import{r as yr,j as iu}from"./main-42df28c9.js";import{br as au,bs as ou,bt as su,bu as uu,bv as lu}from"./user-profile-link-2c2503cd.js";import"./OpenInNew-3462026f.js";var yo={exports:{}};/*! For license information please see dash.all.min.js.LICENSE.txt */(function(tr,or){(function(Or,Rr){tr.exports=Rr()})(self,()=>(()=>{var Or={4593:(et,we)=>{var C,oe,b,e,t,S=function(h){for(var _=[],n=0;n<h.length;++n){var l=h.charCodeAt(n);l<128?_.push(l):l<2048?(_.push(192|l>>6),_.push(128|63&l)):l<65536?(_.push(224|l>>12),_.push(128|63&l>>6),_.push(128|63&l)):(_.push(240|l>>18),_.push(128|63&l>>12),_.push(128|63&l>>6),_.push(128|63&l))}return _},g=function(h){for(var _=[],n=0;n<h.length;){var l=h[n++];l<128||(l<224?(l=(31&l)<<6,l|=63&h[n++]):l<240?(l=(15&l)<<12,l|=(63&h[n++])<<6,l|=63&h[n++]):(l=(7&l)<<18,l|=(63&h[n++])<<12,l|=(63&h[n++])<<6,l|=63&h[n++])),_.push(String.fromCharCode(l))}return _.join("")},i={};C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",oe=function(h){for(var _=0,n=[],l=0|h.length/3;0<l--;){var d=(h[_]<<16)+(h[_+1]<<8)+h[_+2];_+=3,n.push(C.charAt(63&d>>18)),n.push(C.charAt(63&d>>12)),n.push(C.charAt(63&d>>6)),n.push(C.charAt(63&d))}return h.length-_==2?(d=(h[_]<<16)+(h[_+1]<<8),n.push(C.charAt(63&d>>18)),n.push(C.charAt(63&d>>12)),n.push(C.charAt(63&d>>6)),n.push("=")):h.length-_==1&&(d=h[_]<<16,n.push(C.charAt(63&d>>18)),n.push(C.charAt(63&d>>12)),n.push("==")),n.join("")},b=function(){for(var h=[],_=0;_<C.length;++_)h[C.charCodeAt(_)]=_;return h["=".charCodeAt(0)]=0,h}(),e=function(h){for(var _=0,n=[],l=0|h.length/4;0<l--;){var d=(b[h.charCodeAt(_)]<<18)+(b[h.charCodeAt(_+1)]<<12)+(b[h.charCodeAt(_+2)]<<6)+b[h.charCodeAt(_+3)];n.push(255&d>>16),n.push(255&d>>8),n.push(255&d),_+=4}return n&&(h.charAt(_-2)=="="?(n.pop(),n.pop()):h.charAt(_-1)=="="&&n.pop()),n},t={encode:function(h){for(var _=[],n=0;n<h.length;++n)_.push(h.charCodeAt(n));return _},decode:function(h){for(var _=0;_<s.length;++_)a[_]=String.fromCharCode(a[_]);return a.join("")}},i.decodeArray=function(h){var _=e(h);return new Uint8Array(_)},i.encodeASCII=function(h){var _=t.encode(h);return oe(_)},i.decodeASCII=function(h){var _=e(h);return t.decode(_)},i.encode=function(h){var _=S(h);return oe(_)},i.decode=function(h){var _=e(h);return g(_)},we.decode=i.decode,we.decodeArray=i.decodeArray,we.encode=i.encode,we.encodeASCII=i.encodeASCII},452:(et,we)=>{(function(C){var oe={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},b=function(D){var I=D;return oe.hasOwnProperty(D)&&(I=oe[D]),String.fromCharCode(I)},e=15,t=32,S={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},g={17:2,18:4,21:6,22:8,23:10,19:13,20:15},i={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},h={25:2,26:4,29:6,30:8,31:10,27:13,28:15},_=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],n={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(D){this.time=D},log:function(D,I){var k=this.verboseFilter[D];this.verboseLevel>=k&&console.log(this.time+" ["+D+"] "+I)}},l=function(D){for(var I=[],k=0;k<D.length;k++)I.push(D[k].toString(16));return I},d=function(D,I,k,$,J){this.foreground=D||"white",this.underline=I||!1,this.italics=k||!1,this.background=$||"black",this.flash=J||!1};d.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(D){for(var I=["foreground","underline","italics","background","flash"],k=0;k<I.length;k++){var $=I[k];D.hasOwnProperty($)&&(this[$]=D[$])}},isDefault:function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},equals:function(D){return this.foreground===D.foreground&&this.underline===D.underline&&this.italics===D.italics&&this.background===D.background&&this.flash===D.flash},copy:function(D){this.foreground=D.foreground,this.underline=D.underline,this.italics=D.italics,this.background=D.background,this.flash=D.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var P=function(D,I,k,$,J,Ne){this.uchar=D||" ",this.penState=new d(I,k,$,J,Ne)};P.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(D,I){this.uchar=D,this.penState.copy(I)},setPenState:function(D){this.penState.copy(D)},equals:function(D){return this.uchar===D.uchar&&this.penState.equals(D.penState)},copy:function(D){this.uchar=D.uchar,this.penState.copy(D.penState)},isEmpty:function(){return this.uchar===" "&&this.penState.isDefault()}};var F=function(){this.chars=[];for(var D=0;D<t;D++)this.chars.push(new P);this.pos=0,this.currPenState=new d};F.prototype={equals:function(D){for(var I=!0,k=0;k<t;k++)if(!this.chars[k].equals(D.chars[k])){I=!1;break}return I},copy:function(D){for(var I=0;I<t;I++)this.chars[I].copy(D.chars[I])},isEmpty:function(){for(var D=!0,I=0;I<t;I++)if(!this.chars[I].isEmpty()){D=!1;break}return D},setCursor:function(D){this.pos!==D&&(this.pos=D),this.pos<0?(n.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>t&&(n.log("ERROR","Too large cursor position "+this.pos),this.pos=t)},moveCursor:function(D){var I=this.pos+D;if(D>1)for(var k=this.pos+1;k<I+1;k++)this.chars[k].setPenState(this.currPenState);this.setCursor(I)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(D){D>=144&&this.backSpace();var I=b(D);this.pos>=t?n.log("ERROR","Cannot insert "+D.toString(16)+" ("+I+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(I,this.currPenState),this.moveCursor(1))},clearFromPos:function(D){var I;for(I=D;I<t;I++)this.chars[I].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var D=[],I=!0,k=0;k<t;k++){var $=this.chars[k].uchar;$!==" "&&(I=!1),D.push($)}return I?"":D.join("")},setPenStyles:function(D){this.currPenState.setStyles(D),this.chars[this.pos].setPenState(this.currPenState)}};var j=function(){this.rows=[];for(var D=0;D<e;D++)this.rows.push(new F);this.currRow=14,this.nrRollUpRows=null,this.reset()};j.prototype={reset:function(){for(var D=0;D<e;D++)this.rows[D].clear();this.currRow=14},equals:function(D){for(var I=!0,k=0;k<e;k++)if(!this.rows[k].equals(D.rows[k])){I=!1;break}return I},copy:function(D){for(var I=0;I<e;I++)this.rows[I].copy(D.rows[I])},isEmpty:function(){for(var D=!0,I=0;I<e;I++)if(!this.rows[I].isEmpty()){D=!1;break}return D},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(D){this.rows[this.currRow].insertChar(D)},setPen:function(D){this.rows[this.currRow].setPenStyles(D)},moveCursor:function(D){this.rows[this.currRow].moveCursor(D)},setCursor:function(D){n.log("INFO","setCursor: "+D),this.rows[this.currRow].setCursor(D)},setPAC:function(D){n.log("INFO","pacData = "+JSON.stringify(D));var I=D.row-1;this.nrRollUpRows&&I<this.nrRollUpRows-1&&(I=this.nrRollUpRows-1),this.currRow=I;var k=this.rows[this.currRow];if(D.indent!==null){var $=D.indent,J=Math.max($-1,0);k.setCursor(D.indent),D.color=k.chars[J].penState.foreground}var Ne={foreground:D.color,underline:D.underline,italics:D.italics,background:"black",flash:!1};this.setPen(Ne)},setBkgData:function(D){n.log("INFO","bkgData = "+JSON.stringify(D)),this.backSpace(),this.setPen(D),this.insertChar(32)},setRollUpRows:function(D){this.nrRollUpRows=D},rollUp:function(){if(this.nrRollUpRows!==null){n.log("TEXT",this.getDisplayText());var D=this.currRow+1-this.nrRollUpRows,I=this.rows.splice(D,1)[0];I.clear(),this.rows.splice(this.currRow,0,I),n.log("INFO","Rolling up")}else n.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(D){D=D||!1;for(var I=[],k="",$=-1,J=0;J<e;J++){var Ne=this.rows[J].getTextString();Ne&&($=J+1,D?I.push("Row "+$+': "'+Ne+'"'):I.push(Ne.trim()))}return I.length>0&&(k=D?"["+I.join(" | ")+"]":I.join(`
`)),k},getTextAndFormat:function(){return this.rows}};var U=function(D,I){this.chNr=D,this.outputFilter=I,this.mode=null,this.verbose=0,this.displayedMemory=new j,this.nonDisplayedMemory=new j,this.lastOutputScreen=new j,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};U.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(D){this.outputFilter=D},setPAC:function(D){this.writeScreen.setPAC(D)},setBkgData:function(D){this.writeScreen.setBkgData(D)},setMode:function(D){D!==this.mode&&(this.mode=D,n.log("INFO","MODE="+D),this.mode=="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=D)},insertChars:function(D){for(var I=0;I<D.length;I++)this.writeScreen.insertChar(D[I]);var k=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";n.log("INFO",k+": "+this.writeScreen.getDisplayText(!0)),this.mode!=="MODE_PAINT-ON"&&this.mode!=="MODE_ROLL-UP"||(n.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){n.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){n.log("INFO","BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){n.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(D){n.log("INFO","RU("+D+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(D)},cc_FON:function(){n.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){n.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){n.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){n.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){n.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){n.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){n.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(n.log("INFO","EOC - End Of Caption"),this.mode==="MODE_POP-ON"){var D=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=D,this.writeScreen=this.nonDisplayedMemory,n.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(D){n.log("INFO","TO("+D+") - Tab Offset"),this.writeScreen.moveCursor(D)},cc_MIDROW:function(D){var I={flash:!1};if(I.underline=D%2==1,I.italics=D>=46,I.italics)I.foreground="white";else{var k=Math.floor(D/2)-16;I.foreground=["white","green","blue","cyan","red","yellow","magenta"][k]}n.log("INFO","MIDROW: "+JSON.stringify(I)),this.writeScreen.setPen(I)},outputDataUpdate:function(){var D=n.time;D!==null&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(D,this.displayedMemory),this.cueStartTime!==null||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,D,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:D):this.cueStartTime=D,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(D){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,D,this.displayedMemory),this.cueStartTime=D))}};var W=function(D,I,k){this.field=D||1,this.outputs=[I,k],this.channels=[new U(1,I),new U(2,k)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};W.prototype={getHandler:function(D){return this.channels[D].getHandler()},setHandler:function(D,I){this.channels[D].setHandler(I)},addData:function(D,I){var k,$,J,Ne=!1;this.lastTime=D,n.setTime(D);for(var Be=0;Be<I.length;Be+=2)$=127&I[Be],J=127&I[Be+1],$>=16&&$<=31&&$===this.lastCmdA&&J===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,n.log("DEBUG","Repeated command ("+l([$,J])+") is dropped")):$!==0||J!==0?(n.log("DATA","["+l([I[Be],I[Be+1]])+"] -> ("+l([$,J])+")"),(k=this.parseCmd($,J))||(k=this.parseMidrow($,J)),k||(k=this.parsePAC($,J)),k||(k=this.parseBackgroundAttributes($,J)),k||(Ne=this.parseChars($,J))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(Ne):n.log("WARNING","No channel found yet. TEXT-MODE?")),k?this.dataCounters.cmd+=2:Ne?this.dataCounters.char+=2:(this.dataCounters.other+=2,n.log("WARNING","Couldn't parse cleaned data "+l([$,J])+" orig: "+l([I[Be],I[Be+1]])))):this.dataCounters.padding+=2},parseCmd:function(D,I){var k;if(!((D===20||D===21||D===28||D===29)&&32<=I&&I<=47||(D===23||D===31)&&33<=I&&I<=35))return!1;k=D===20||D===21||D===23?1:2;var $=this.channels[k-1];return D===20||D===21||D===28||D===29?I===32?$.cc_RCL():I===33?$.cc_BS():I===34?$.cc_AOF():I===35?$.cc_AON():I===36?$.cc_DER():I===37?$.cc_RU(2):I===38?$.cc_RU(3):I===39?$.cc_RU(4):I===40?$.cc_FON():I===41?$.cc_RDC():I===42?$.cc_TR():I===43?$.cc_RTD():I===44?$.cc_EDM():I===45?$.cc_CR():I===46?$.cc_ENM():I===47&&$.cc_EOC():$.cc_TO(I-32),this.lastCmdA=D,this.lastCmdB=I,this.currChNr=k,!0},parseMidrow:function(D,I){var k=null;if((D===17||D===25)&&32<=I&&I<=47){if((k=D===17?1:2)!==this.currChNr)return n.log("ERROR","Mismatch channel in midrow parsing"),!1;var $=this.channels[k-1];return $.insertChars([32]),$.cc_MIDROW(I),n.log("DEBUG","MIDROW ("+l([D,I])+")"),this.lastCmdA=D,this.lastCmdB=I,!0}return!1},parsePAC:function(D,I){var k,$;if(!((17<=D&&D<=23||25<=D&&D<=31)&&64<=I&&I<=127||(D===16||D===24)&&64<=I&&I<=95))return!1;k=D<=23?1:2,$=64<=I&&I<=95?k===1?S[D]:i[D]:k===1?g[D]:h[D];var J=this.interpretPAC($,I);return this.channels[k-1].setPAC(J),this.lastCmdA=D,this.lastCmdB=I,this.currChNr=k,!0},interpretPAC:function(D,I){var k,$={color:null,italics:!1,indent:null,underline:!1,row:D};return k=I>95?I-96:I-64,$.underline=(1&k)==1,k<=13?$.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(k/2)]:k<=15?($.italics=!0,$.color="white"):$.indent=4*Math.floor((k-16)/2),$},parseChars:function(D,I){var k=null,$=null,J=null;if(D>=25?(k=2,J=D-8):(k=1,J=D),17<=J&&J<=19){var Ne;Ne=J===17?I+80:J===18?I+112:I+144,n.log("INFO","Special char '"+b(Ne)+"' in channel "+k),$=[Ne],this.lastCmdA=D,this.lastCmdB=I}else 32<=D&&D<=127&&($=I===0?[D]:[D,I],this.lastCmdA=null,this.lastCmdB=null);if($){var Be=l($);n.log("DEBUG","Char codes =  "+Be.join(","))}return $},parseBackgroundAttributes:function(D,I){var k,$,J;return((D===16||D===24)&&32<=I&&I<=47||(D===23||D===31)&&45<=I&&I<=47)&&(k={},D===16||D===24?($=Math.floor((I-32)/2),k.background=_[$],I%2==1&&(k.background=k.background+"_semi")):I===45?k.background="transparent":(k.foreground="black",I===47&&(k.underline=!0)),J=D<24?1:2,this.channels[J-1].setBkgData(k),this.lastCmdA=D,this.lastCmdB=I,!0)},reset:function(){for(var D=0;D<this.channels.length;D++)this.channels[D]&&this.channels[D].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(D){for(var I=0;I<this.channels.length;I++)this.channels[I]&&this.channels[I].cueSplitAtTime(D)}},C.logger=n,C.PenState=d,C.CaptionScreen=j,C.Cea608Parser=W,C.findCea608Nalus=function(D,I,k){for(var $=0,J=I,Ne=[],Be=function(pe,be,He,ut){if(pe!==4||be<8)return null;var tt=He.getUint8(ut),Se=He.getUint16(ut+1),We=He.getUint32(ut+3),lt=He.getUint8(ut+7);return tt==181&&Se==49&&We==1195456820&&lt==3};J<I+k;){if($=D.getUint32(J),(31&D.getUint8(J+4))==6)for(var te=J+5,ot=-1;te<J+4+$-1;){ot=0;for(var Ae=255;Ae===255;)ot+=Ae=D.getUint8(te),te++;var ke=0;for(Ae=255;Ae===255;)ke+=Ae=D.getUint8(te),te++;Be(ot,ke,D,te)&&Ne.push([te,ke]),te+=ke}J+=$+4}return Ne},C.extractCea608DataFromRange=function(D,I){var k=I[0],$=[[],[]];k+=8;var J=31&D.getUint8(k);k+=2;for(var Ne=0;Ne<J;Ne++){var Be=D.getUint8(k),te=4&Be,ot=3&Be;k++;var Ae=D.getUint8(k);k++;var ke=D.getUint8(k);k++,te&&(127&Ae)+(127&ke)!=0&&(ot===0?($[0].push(Ae),$[0].push(ke)):ot===1&&($[1].push(Ae),$[1].push(ke)))}return $}})(we)},8416:(et,we,C)=>{var oe=C(7688),b=C(5448),e=C(6398),t=C(2032),S=(C(5530),typeof window<"u"&&window||C.g),g=S.dashjs;g||(g=S.dashjs={}),g.MediaPlayer=oe.Z,g.FactoryMaker=b.Z,g.Debug=e.Z,g.Version=(0,t.e)()},6398:(et,we,C)=>{C.d(we,{Z:()=>l});var oe=C(5595),b=C(8512),e=C(5448),t=1,S=2,g=3,i=4,h=5;function _(d){d=d||{};var P,F,j,U,W=this.context,D=(0,oe.Z)(W).getInstance(),I=d.settings,k=[];function $(ke){return ke&&ke.bind?ke.bind(window.console):window.console.log.bind(window.console)}function J(){for(var ke=arguments.length,pe=new Array(ke),be=0;be<ke;be++)pe[be]=arguments[be];Ae.apply(void 0,[t,this].concat(pe))}function Ne(){for(var ke=arguments.length,pe=new Array(ke),be=0;be<ke;be++)pe[be]=arguments[be];Ae.apply(void 0,[S,this].concat(pe))}function Be(){for(var ke=arguments.length,pe=new Array(ke),be=0;be<ke;be++)pe[be]=arguments[be];Ae.apply(void 0,[g,this].concat(pe))}function te(){for(var ke=arguments.length,pe=new Array(ke),be=0;be<ke;be++)pe[be]=arguments[be];Ae.apply(void 0,[i,this].concat(pe))}function ot(){for(var ke=arguments.length,pe=new Array(ke),be=0;be<ke;be++)pe[be]=arguments[be];Ae.apply(void 0,[h,this].concat(pe))}function Ae(ke,pe){var be="",He=null;F&&(He=new Date().getTime(),be+="["+(He-U)+"]"),j&&pe&&pe.getClassName&&(be+="["+pe.getClassName()+"]",pe.getType&&(be+="["+pe.getType()+"]")),be.length>0&&(be+=" ");for(var ut=arguments.length,tt=new Array(ut>2?ut-2:0),Se=2;Se<ut;Se++)tt[Se-2]=arguments[Se];Array.apply(null,tt).forEach(function(We){be+=We+" "}),k[ke]&&I&&I.get().debug.logLevel>=ke&&k[ke](be),I&&I.get().debug.dispatchEvent&&D.trigger(b.Z.LOG,{message:be,level:ke})}return P={getLogger:function(ke){return{fatal:J.bind(ke),error:Ne.bind(ke),warn:Be.bind(ke),info:te.bind(ke),debug:ot.bind(ke)}},setLogTimestampVisible:function(ke){F=ke},setCalleeNameVisible:function(ke){j=ke}},F=!0,j=!0,U=new Date().getTime(),typeof window<"u"&&window.console&&(k[t]=$(window.console.error),k[S]=$(window.console.error),k[g]=$(window.console.warn),k[i]=$(window.console.info),k[h]=$(window.console.debug)),P}_.__dashjs_factory_name="Debug";var n=e.Z.getSingletonFactory(_);n.LOG_LEVEL_NONE=0,n.LOG_LEVEL_FATAL=t,n.LOG_LEVEL_ERROR=S,n.LOG_LEVEL_WARNING=g,n.LOG_LEVEL_INFO=i,n.LOG_LEVEL_DEBUG=h,e.Z.updateSingletonFactory(_.__dashjs_factory_name,n);const l=n},5595:(et,we,C)=>{C.d(we,{Z:()=>S});var oe=C(5448),b=C(8825);function e(){var g={};function i(_,n,l){var d=-1;return g[_]&&g[_].some(function(P,F){if(P&&P.callback===n&&(!l||l===P.scope))return d=F,!0}),d}var h={on:function(_,n,l){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(!_)throw new Error("event type cannot be null or undefined");if(!n||typeof n!="function")throw new Error("listener must be a function: "+n);var P=d.priority||0;if(!(i(_,n,l)>=0)){g[_]=g[_]||[];var F={callback:n,scope:l,priority:P};l&&l.getStreamId&&(F.streamId=l.getStreamId()),l&&l.getType&&(F.mediaType=l.getType()),d&&d.mode&&(F.mode=d.mode);var j=g[_].some(function(U,W){if(U&&P>U.priority)return g[_].splice(W,0,F),!0});j||g[_].push(F)}},off:function(_,n,l){if(_&&n&&g[_]){var d=i(_,n,l);d<0||(g[_][d]=null)}},trigger:function(_){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(_&&g[_]){if((n=n||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");n.type=_,l.streamId&&(n.streamId=l.streamId),l.mediaType&&(n.mediaType=l.mediaType),g[_].filter(function(d){return!(!d||l.streamId&&d.streamId&&d.streamId!==l.streamId||l.mediaType&&d.mediaType&&d.mediaType!==l.mediaType||l.mode&&d.mode&&d.mode!==l.mode||!d.mode&&l.mode&&l.mode===b.Z.EVENT_MODE_ON_RECEIVE)}).forEach(function(d){return d&&d.callback.call(d.scope,n)})}},reset:function(){g={}}};return h}e.__dashjs_factory_name="EventBus";var t=oe.Z.getSingletonFactory(e);t.EVENT_PRIORITY_LOW=0,t.EVENT_PRIORITY_HIGH=5e3,oe.Z.updateSingletonFactory(e.__dashjs_factory_name,t);const S=t},5448:(et,we,C)=>{C.d(we,{Z:()=>oe});const oe=function(){var b,e=[],t={},S={};function g(n,l){for(var d in e){var P=e[d];if(P.context===n&&P.name===l)return P.instance}return null}function i(n,l){return l[n]}function h(n,l,d){n in d&&(d[n]=l)}function _(n,l,d){var P,F=n.__dashjs_factory_name,j=l[F];if(j){var U=j.instance;if(!j.override)return U.apply({context:l,factory:b},d);for(var W in P=n.apply({context:l},d),U=U.apply({context:l,factory:b,parent:P},d))P.hasOwnProperty(W)&&(P[W]=U[W])}else P=n.apply({context:l},d);return P.getClassName=function(){return F},P}return b={extend:function(n,l,d,P){!P[n]&&l&&(P[n]={instance:l,override:d})},getSingletonInstance:g,setSingletonInstance:function(n,l,d){for(var P in e){var F=e[P];if(F.context===n&&F.name===l)return void(e[P].instance=d)}e.push({name:l,context:n,instance:d})},deleteSingletonInstances:function(n){e=e.filter(function(l){return l.context!==n})},getSingletonFactory:function(n){var l=i(n.__dashjs_factory_name,t);return l||(l=function(d){var P;return d===void 0&&(d={}),{getInstance:function(){return P||(P=g(d,n.__dashjs_factory_name)),P||(P=_(n,d,arguments),e.push({name:n.__dashjs_factory_name,context:d,instance:P})),P}}},t[n.__dashjs_factory_name]=l),l},getSingletonFactoryByName:function(n){return i(n,t)},updateSingletonFactory:function(n,l){h(n,l,t)},getClassFactory:function(n){var l=i(n.__dashjs_factory_name,S);return l||(l=function(d){return d===void 0&&(d={}),{create:function(){return _(n,d,arguments)}}},S[n.__dashjs_factory_name]=l),l},getClassFactoryByName:function(n){return i(n,S)},updateClassFactory:function(n,l){h(n,l,S)}},b}()},1264:(et,we,C)=>{C.d(we,{Z:()=>l});var oe=C(5448),b=C(703),e=C(6398),t=C(3393),S=C(7855),g=C(5595),i=C(8512);function h(d){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},h(d)}function _(d,P,F){return P in d?Object.defineProperty(d,P,{value:F,enumerable:!0,configurable:!0,writable:!0}):d[P]=F,d}function n(){var d,P,F=this.context,j=(0,g.Z)(F).getInstance(),U={"streaming.delay.liveDelay":i.Z.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":i.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":i.Z.SETTING_UPDATED_CATCHUP_ENABLED,"streaming.liveCatchup.playbackRate.min":i.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,"streaming.liveCatchup.playbackRate.max":i.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX},W={debug:{logLevel:e.Z.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,applyContentSteering:!0,eventControllerRefreshDelay:100,enableManifestDurationMismatchFix:!0,parseInbandPrft:!1,enableManifestTimescaleMismatchFix:!1,capabilities:{filterUnsupportedEssentialProperties:!0,useMediaCapabilitiesApi:!1},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:!0,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,stableBufferTime:12,longFormContentDurationThreshold:600,stallThreshold:.3,useAppendWindow:!0,setStallState:!0,avoidCurrentTimeRangePruning:!1,useChangeTypeForTrackSwitch:!0},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0,extendSegmentedCues:!0,webvtt:{customRenderingEnabled:!1}},liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN},playbackBufferMin:.5,enabled:null,mode:t.Z.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},cacheLoadThresholds:{video:50,audio:5},trackSwitchMode:{audio:t.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:t.Z.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:t.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY,fragmentRequestTimeout:2e4,fragmentRequestProgressTimeout:-1,manifestRequestTimeout:1e4,retryIntervals:(d={},_(d,S.w.MPD_TYPE,500),_(d,S.w.XLINK_EXPANSION_TYPE,500),_(d,S.w.MEDIA_SEGMENT_TYPE,1e3),_(d,S.w.INIT_SEGMENT_TYPE,1e3),_(d,S.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),_(d,S.w.INDEX_SEGMENT_TYPE,1e3),_(d,S.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,1e3),_(d,S.w.LICENSE,1e3),_(d,S.w.OTHER_TYPE,1e3),_(d,"lowLatencyReductionFactor",10),d),retryAttempts:(P={},_(P,S.w.MPD_TYPE,3),_(P,S.w.XLINK_EXPANSION_TYPE,1),_(P,S.w.MEDIA_SEGMENT_TYPE,3),_(P,S.w.INIT_SEGMENT_TYPE,3),_(P,S.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),_(P,S.w.INDEX_SEGMENT_TYPE,3),_(P,S.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,3),_(P,S.w.LICENSE,3),_(P,S.w.OTHER_TYPE,3),_(P,"lowLatencyMultiplyFactor",5),P),abr:{movingAverageMethod:t.Z.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:t.Z.ABR_STRATEGY_DYNAMIC,additionalAbrRules:{insufficientBufferRule:!0,switchHistoryRule:!0,droppedFramesRule:!0,abandonRequestsRule:!0},bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0},fetchThroughputCalculationMode:t.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING},cmcd:{enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:t.Z.CMCD_MODE_QUERY,enabledKeys:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"]},cmsd:{enabled:!1,abr:{applyMb:!1,etpWeightRatio:0}}},errors:{recoverAttempts:{mediaErrorDecode:5}}},D=b.Z.clone(W);function I(k,$,J){for(var Ne in k)k.hasOwnProperty(Ne)&&($.hasOwnProperty(Ne)?h(k[Ne])!=="object"||k[Ne]instanceof Array||k[Ne]===null?($[Ne]=b.Z.clone(k[Ne]),U[J+Ne]&&j.trigger(U[J+Ne])):I(k[Ne],$[Ne],J.slice()+Ne+"."):console.error("Settings parameter "+J+Ne+" is not supported"))}return{get:function(){return D},update:function(k){h(k)==="object"&&I(k,D,"")},reset:function(){D=b.Z.clone(W)}}}n.__dashjs_factory_name="Settings";const l=oe.Z.getSingletonFactory(n)},703:(et,we,C)=>{C.d(we,{Z:()=>g});var oe=C(3875),b=C.n(oe),e=C(1067);function t(i){return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},t(i)}function S(i,h){for(var _=0;_<h.length;_++){var n=h[_];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}const g=function(){function i(){(function(n,l){if(!(n instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i)}var h,_;return h=i,_=[{key:"mixin",value:function(n,l,d){var P,F={};if(n)for(var j in l)l.hasOwnProperty(j)&&(P=l[j],j in n&&(n[j]===P||j in F&&F[j]===P)||(t(n[j])==="object"&&n[j]!==null?n[j]=i.mixin(n[j],P,d):n[j]=d(P)));return n}},{key:"clone",value:function(n){if(!n||t(n)!=="object")return n;var l;if(n instanceof Array){l=[];for(var d=0,P=n.length;d<P;++d)d in n&&l.push(i.clone(n[d]))}else l={};return i.mixin(l,n,i.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(n,l){try{if(!l||l.length===0)return n;var d=new URL(n);return l.forEach(function(P){P.key&&P.value&&d.searchParams.set(P.key,P.value)}),d.href}catch{return n}}},{key:"parseHttpHeaders",value:function(n){var l={};if(!n)return l;for(var d=n.trim().split(`\r
`),P=0,F=d.length;P<F;P++){var j=d[P],U=j.indexOf(": ");U>0&&(l[j.substring(0,U)]=j.substring(U+2))}return l}},{key:"generateUuid",value:function(){var n=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(l){var d=(n+16*Math.random())%16|0;return n=Math.floor(n/16),(l=="x"?d:3&d|8).toString(16)})}},{key:"generateHashCode",value:function(n){var l=0;if(n.length===0)return l;for(var d=0;d<n.length;d++)l=(l<<5)-l+n.charCodeAt(d),l|=0;return l}},{key:"getRelativeUrl",value:function(n,l){try{var d=new URL(n),P=new URL(l);if(d.protocol=P.protocol,d.origin!==P.origin)return l;var F=b().relative(d.pathname.substr(0,d.pathname.lastIndexOf("/")),P.pathname.substr(0,P.pathname.lastIndexOf("/"))),j=F.length===0?1:0;return F+=P.pathname.substr(P.pathname.lastIndexOf("/")+j,P.pathname.length-1),P.pathname.length<F.length?P.pathname:F}catch{return l}}},{key:"parseUserAgent",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{var l=n===null&&typeof navigator<"u"?navigator.userAgent.toLowerCase():"";return(0,e.UAParser)(l)}catch{return{}}}},{key:"stringHasProtocol",value:function(n){return/(http(s?)):\/\//i.test(n)}}],_&&S(h,_),i}()},2032:(et,we,C)=>{function oe(){return"4.7.1"}C.d(we,{e:()=>oe})},2230:(et,we,C)=>{function oe(e,t){for(var S=0;S<t.length;S++){var g=t[S];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(e,g.key,g)}}C.d(we,{Z:()=>b});const b=function(){function e(){(function(g,i){if(!(g instanceof i))throw new TypeError("Cannot call a class as a function")})(this,e)}var t,S;return t=e,(S=[{key:"extend",value:function(g,i){if(g){var h=!!i&&i.override,_=!!i&&i.publicOnly;for(var n in g)!g.hasOwnProperty(n)||this[n]&&!h||_&&g[n].indexOf("public_")===-1||(this[n]=g[n])}}}])&&oe(t.prototype,S),e}()},4351:(et,we,C)=>{function oe(g){return oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},oe(g)}function b(g,i){return b=Object.setPrototypeOf||function(h,_){return h.__proto__=_,h},b(g,i)}function e(g,i){return!i||oe(i)!=="object"&&typeof i!="function"?function(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}(g):i}function t(g){return t=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},t(g)}C.d(we,{Z:()=>S});const S=function(g){(function(l,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(d&&d.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),d&&b(l,d)})(n,g);var i,h,_=(i=n,h=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var l,d=t(i);if(h){var P=t(this).constructor;l=Reflect.construct(d,arguments,P)}else l=d.apply(this,arguments);return e(this,l)});function n(){var l;return function(d,P){if(!(d instanceof P))throw new TypeError("Cannot call a class as a function")}(this,n),(l=_.call(this)).ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",l.BUFFERING_COMPLETED="bufferingCompleted",l.BUFFER_CLEARED="bufferCleared",l.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",l.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",l.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",l.CMSD_STATIC_HEADER="cmsdStaticHeader",l.CURRENT_TRACK_CHANGED="currentTrackChanged",l.DATA_UPDATE_COMPLETED="dataUpdateCompleted",l.INBAND_EVENTS="inbandEvents",l.INITIAL_STREAM_SWITCH="initialStreamSwitch",l.INIT_FRAGMENT_LOADED="initFragmentLoaded",l.INIT_FRAGMENT_NEEDED="initFragmentNeeded",l.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",l.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",l.LOADING_COMPLETED="loadingCompleted",l.LOADING_PROGRESS="loadingProgress",l.LOADING_DATA_PROGRESS="loadingDataProgress",l.LOADING_ABANDONED="loadingAborted",l.MANIFEST_UPDATED="manifestUpdated",l.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",l.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",l.QUOTA_EXCEEDED="quotaExceeded",l.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",l.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",l.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD="serviceLocationBlacklistAdd",l.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",l.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD="serviceLocationLocationBlacklistAdd",l.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED="serviceLocationLocationBlacklistChanged",l.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",l.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",l.SOURCE_BUFFER_ERROR="sourceBufferError",l.STREAMS_COMPOSED="streamsComposed",l.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",l.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",l.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",l.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",l.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",l.URL_RESOLUTION_FAILED="urlResolutionFailed",l.VIDEO_CHUNK_RECEIVED="videoChunkReceived",l.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",l.XLINK_ELEMENT_LOADED="xlinkElementLoaded",l.XLINK_READY="xlinkReady",l.SEEK_TARGET="seekTarget",l.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",l.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",l.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",l.SETTING_UPDATED_PLAYBACK_RATE_MIN="settingUpdatedPlaybackRateMin",l.SETTING_UPDATED_PLAYBACK_RATE_MAX="settingUpdatedPlaybackRateMax",l}return n}(C(8342).Z)},8512:(et,we,C)=>{function oe(i){return oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},oe(i)}function b(i,h){if(!(i instanceof h))throw new TypeError("Cannot call a class as a function")}function e(i,h){return e=Object.setPrototypeOf||function(_,n){return _.__proto__=n,_},e(i,h)}function t(i,h){return!h||oe(h)!=="object"&&typeof h!="function"?function(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}(i):h}function S(i){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(h){return h.__proto__||Object.getPrototypeOf(h)},S(i)}C.d(we,{Z:()=>g});const g=new(function(i){(function(d,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(P&&P.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),P&&e(d,P)})(l,i);var h,_,n=(h=l,_=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var d,P=S(h);if(_){var F=S(this).constructor;d=Reflect.construct(P,arguments,F)}else d=P.apply(this,arguments);return t(this,d)});function l(){return b(this,l),n.apply(this,arguments)}return l}(C(4351).Z))},8342:(et,we,C)=>{function oe(e,t){for(var S=0;S<t.length;S++){var g=t[S];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(e,g.key,g)}}C.d(we,{Z:()=>b});const b=function(){function e(){(function(g,i){if(!(g instanceof i))throw new TypeError("Cannot call a class as a function")})(this,e)}var t,S;return t=e,(S=[{key:"extend",value:function(g,i){if(g){var h=!!i&&i.override,_=!!i&&i.publicOnly;for(var n in g)!g.hasOwnProperty(n)||this[n]&&!h||_&&g[n].indexOf("public_")===-1||(this[n]=g[n])}}}])&&oe(t.prototype,S),e}()},9326:(et,we,C)=>{C.d(we,{Z:()=>h});var oe=C(3186),b=C(7855),e=C(5448),t=C(8825),S=C(7387),g=C(1553);function i(_){var n,l,d,P,F,j=(_=_||{}).eventBus,U=_.debug,W=_.urlUtils,D=_.type,I=_.streamInfo,k=_.segmentsController,$=_.timelineConverter,J=_.baseURLController;function Ne(){return D}function Be(){d=null}function te(pe,be,He){var ut,tt,Se=J.resolve(He.path),We={};return Se&&be!==Se.url&&W.isRelative(be)?(ut=Se.url,tt=Se.serviceLocation,We=Se.queryParams,be&&(ut=W.resolve(be,ut))):ut=be,!W.isRelative(ut)&&(pe.url=ut,pe.serviceLocation=tt,pe.queryParams=We,!0)}function ot(pe,be){if(be==null)return null;var He=new oe.Z,ut=be.representation,tt=ut.adaptation.period.mpd.manifest.Period_asArray[ut.adaptation.period.index].AdaptationSet_asArray[ut.adaptation.index].Representation_asArray[ut.index].bandwidth,Se=be.media;return Se=(0,S.vi)(Se,"Number",be.replacementNumber),Se=(0,S.vi)(Se,"Time",be.replacementTime),Se=(0,S.vi)(Se,"Bandwidth",tt),Se=(0,S.Aj)(Se,ut.id),Se=(0,S.eR)(Se),He.mediaType=Ne(),He.type=b.w.MEDIA_SEGMENT_TYPE,He.range=be.mediaRange,He.startTime=be.presentationStartTime,He.mediaStartTime=be.mediaStartTime,He.duration=be.duration,He.timescale=ut.timescale,He.availabilityStartTime=be.availabilityStartTime,He.availabilityEndTime=be.availabilityEndTime,He.availabilityTimeComplete=ut.availabilityTimeComplete,He.wallStartTime=be.wallStartTime,He.quality=ut.index,He.index=be.index,He.mediaInfo=pe,He.adaptationIndex=ut.adaptation.index,He.representationId=ut.id,te(He,Se,ut)?He:void 0}function Ae(pe,be,He){var ut=null;if(!be||!be.segmentInfoType)return ut;var tt=k.getSegmentByTime(be,He);return tt&&(d=tt,l.debug("Index for time "+He+" is "+tt.index),ut=ot(pe,tt)),ut}function ke(){l.debug("Dynamic stream complete"),F=!0}return n={initialize:function(pe){P=pe,F=!1,k.initialize(pe)},getStreamId:function(){return I.id},getType:Ne,getStreamInfo:function(){return I},getInitRequest:function(pe,be){return be?function(He,ut,tt){var Se=new oe.Z,We=ut.adaptation.period,lt=We.start;if(Se.mediaType=tt,Se.type=b.w.INIT_SEGMENT_TYPE,Se.range=ut.range,Se.availabilityStartTime=$.calcAvailabilityStartTimeFromPresentationTime(lt,ut,P),Se.availabilityEndTime=$.calcAvailabilityEndTimeFromPresentationTime(lt+We.duration,ut,P),Se.quality=ut.index,Se.mediaInfo=He,Se.representationId=ut.id,te(Se,ut.initialization,ut))return Se.url=(0,S.vi)(Se.url,"Bandwidth",ut.bandwidth),Se}(pe,be,Ne()):null},getSegmentRequestForTime:Ae,getCurrentIndex:function(){return d?d.index:-1},getNextSegmentRequest:function(pe,be){var He=null;if(!be||!be.segmentInfoType)return null;var ut=d?d.index+1:0,tt=k.getSegmentByIndex(be,ut,d?d.mediaStartTime:-1);if(tt)He=ot(pe,tt),d=tt;else{if(P&&!F)return l.debug(Ne()+" No segment found at index: "+ut+". Wait for next loop"),null;F=!0}return He},isLastSegmentRequested:function(pe,be){return!pe||!d?!1:F?!0:!isFinite(pe.adaptation.period.duration)||d.presentationStartTime+d.duration>be?!1:pe.mediaFinishedInformation&&!isNaN(pe.mediaFinishedInformation.numberOfSegments)&&!isNaN(d.index)&&d.index>=pe.mediaFinishedInformation.numberOfSegments-1&&(!P||pe.segmentInfoType===g.Z.SEGMENT_TEMPLATE||P&&pe.segmentInfoType===g.Z.SEGMENT_LIST&&pe.adaptation.period.nextPeriodId)?!0:!!(P&&pe.adaptation.period.nextPeriodId&&pe.segmentInfoType===g.Z.SEGMENT_TIMELINE&&pe.mediaFinishedInformation&&!isNaN(pe.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&d&&!isNaN(d.mediaStartTime)&&!isNaN(d.duration)&&d.mediaStartTime+d.duration>=pe.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},reset:function(){Be(),j.off(t.Z.DYNAMIC_TO_STATIC,ke,n)},getNextSegmentRequestIdempotent:function(pe,be){var He=d?d.index+1:0,ut=k.getSegmentByIndex(be,He,d?d.mediaStartTime:-1);return ut?ot(pe,ut):null},getValidTimeAheadOfTargetTime:function(pe,be,He,ut){try{if(isNaN(pe)||!be||!He)return NaN;if(pe<0&&(pe=0),isNaN(ut)&&(ut=.5),Ae(be,He,pe))return pe;if(He.adaptation.period.start+He.adaptation.period.duration<pe)return NaN;for(var tt=isFinite(He.adaptation.period.duration)?He.adaptation.period.start+He.adaptation.period.duration:pe+30,Se=Math.min(pe+ut,tt),We=NaN,lt=null;Se<=tt;){var Fe=null;if(Se<=tt&&(Fe=Ae(be,He,Se)),Fe){We=Se,lt=Fe;break}Se+=ut}if(lt){var Xe=lt.startTime+lt.duration;return pe>lt.startTime&&Xe-pe>ut?pe:!isNaN(lt.startTime)&&pe<lt.startTime&&We>lt.startTime?lt.startTime+.001:Math.min(Xe-ut,We)}return We}catch{return NaN}}},l=U.getLogger(n),Be(),j.on(t.Z.DYNAMIC_TO_STATIC,ke,n),n}i.__dashjs_factory_name="DashHandler";const h=e.Z.getClassFactory(i)},1553:(et,we,C)=>{function oe(e,t){for(var S=0;S<t.length;S++){var g=t[S];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(e,g.key,g)}}C.d(we,{Z:()=>b});const b=new(function(){function e(){(function(g,i){if(!(g instanceof i))throw new TypeError("Cannot call a class as a function")})(this,e),this.init()}var t,S;return t=e,(S=[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.SUPPLEMENTAL_PROPERTY_ASARRAY="SupplementalProperty_asArray",this.INBAND_EVENT_STREAM="InbandEventStream",this.PRODUCER_REFERENCE_TIME="ProducerReferenceTime",this.INBAND="inband",this.TYPE="type",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.VIEWPOINT_ASARRAY="Viewpoint_asArray",this.ROLE_ASARRAY="Role_asArray",this.REPRESENTATION_ASARRAY="Representation_asArray",this.PRODUCERREFERENCETIME_ASARRAY="ProducerReferenceTime_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate",this.SERVICE_DESCRIPTION_OPERATING_QUALITY="OperatingQuality",this.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH="OperatingBandwidth",this.PATCH_LOCATION="PatchLocation",this.PATCH_LOCATION_AS_ARRAY="PatchLocation_asArray",this.LOCATION="Location",this.LOCATION_AS_ARRAY="Location_asArray",this.PUBLISH_TIME="publishTime",this.ORIGINAL_PUBLISH_TIME="originalPublishTime",this.ORIGINAL_MPD_ID="mpdId",this.WALL_CLOCK_TIME="wallClockTime",this.PRESENTATION_TIME="presentationTime",this.LABEL="Label",this.GROUP_LABEL="GroupLabel",this.CONTENT_STEERING="ContentSteering",this.CONTENT_STEERING_AS_ARRAY="ContentSteering_asArray",this.DEFAULT_SERVICE_LOCATION="defaultServiceLocation",this.QUERY_BEFORE_START="queryBeforeStart",this.CLIENT_REQUIREMENT="clientRequirement",this.TTL="ttl",this.CONTENT_STEERING_RESPONSE={VERSION:"VERSION",TTL:"TTL",RELOAD_URI:"RELOAD-URI",PATHWAY_PRIORITY:"PATHWAY-PRIORITY",PATHWAY_CLONES:"PATHWAY-CLONES",BASE_ID:"BASE-ID",ID:"ID",URI_REPLACEMENT:"URI-REPLACEMENT",HOST:"HOST",PARAMS:"PARAMS"},this.PRODUCER_REFERENCE_TIME_TYPE={ENCODER:"encoder",CAPTURED:"captured",APPLICATION:"application"},this.SEGMENT_ALIGNMENT="segmentAlignment",this.SUB_SEGMENT_ALIGNMENT="subsegmentAlignment"}}])&&oe(t.prototype,S),e}())},7802:(et,we,C)=>{C.d(we,{Z:()=>i});var oe=C(5448),b=C(1724),e=C(3636),t=C(1736),S=C(5246);function g(h){h=h||{};var _,n,l=this.context,d=h.dashConstants,P=h.type,F=h.segmentBaseController;function j(U){return U?U.segments?n[d.SEGMENT_BASE]:n[U.segmentInfoType]:null}return _={initialize:function(U){n[d.SEGMENT_TIMELINE]=(0,b.Z)(l).create(h,U),n[d.SEGMENT_TEMPLATE]=(0,e.Z)(l).create(h,U),n[d.SEGMENT_LIST]=(0,t.Z)(l).create(h,U),n[d.SEGMENT_BASE]=(0,S.Z)(l).create(h,U)},updateInitData:function(U,W){return W?Promise.resolve():F.getSegmentBaseInitSegment({representation:U,mediaType:P})},updateSegmentData:function(U,W){return W?Promise.resolve():F.getSegmentList({mimeType:U.mimeType,representation:U,mediaType:P})},getSegmentByIndex:function(U,W,D){var I=j(U);return I?I.getSegmentByIndex(U,W,D):null},getSegmentByTime:function(U,W){var D=j(U);return D?D.getSegmentByTime(U,W):null},getMediaFinishedInformation:function(U){var W=j(U);return W?W.getMediaFinishedInformation(U):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}},n={},_}g.__dashjs_factory_name="SegmentsController";const i=oe.Z.getClassFactory(g)},1736:(et,we,C)=>{C.d(we,{Z:()=>S});var oe=C(5448),b=C(3393),e=C(7387);function t(g,i){var h=(g=g||{}).timelineConverter;function _(){if(!h||!h.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(b.Z.MISSING_CONFIG_ERROR)}function n(l,d){if(_(),!l)return null;var P=l.adaptation.period.mpd.manifest.Period_asArray[l.adaptation.period.index].AdaptationSet_asArray[l.adaptation.index].Representation_asArray[l.index].SegmentList,F=P.SegmentURL_asArray.length,j=l&&!isNaN(l.startNumber)?l.startNumber:1,U=Math.max(j-1,0),W=Math.max(d-U,0),D=null;if(W<F){var I=P.SegmentURL_asArray[W];(D=(0,e.NF)(h,i,l,d))&&(D.replacementTime=(j+d-1)*l.segmentDuration,D.media=I.media?I.media:"",D.mediaRange=I.mediaRange,D.indexRange=I.indexRange)}return D}return{getSegmentByIndex:n,getSegmentByTime:function(l,d){if(_(),!l)return null;var P=l.segmentDuration;if(isNaN(P))return null;var F=h.calcPeriodRelativeTimeFromMpdRelativeTime(l,d);return n(l,Math.floor(F/P))},getMediaFinishedInformation:function(l){var d={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!l)return d;var P=l.adaptation.period.mpd.manifest.Period_asArray[l.adaptation.period.index].AdaptationSet_asArray[l.adaptation.index].Representation_asArray[l.index].SegmentList,F=l&&!isNaN(l.startNumber)?l.startNumber:1,j=Math.max(F-1,0);return d.numberOfSegments=j+P.SegmentURL_asArray.length,d}}}t.__dashjs_factory_name="ListSegmentsGetter";const S=oe.Z.getClassFactory(t)},5246:(et,we,C)=>{C.d(we,{Z:()=>t});var oe=C(5448),b=C(3393);function e(S){var g=(S=S||{}).timelineConverter;function i(){if(!g||!g.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(b.Z.MISSING_CONFIG_ERROR)}function h(_,n){if(i(),!_)return null;var l,d=_.segments?_.segments.length:-1;if(n<d&&(l=_.segments[n])&&l.index===n)return l;for(var P=0;P<d;P++)if((l=_.segments[P])&&l.index===n)return l;return null}return{getSegmentByIndex:h,getSegmentByTime:function(_,n){i();var l=function(d,P){if(!d)return-1;var F,j,U,W,D,I=d.segments,k=I?I.length:null,$=-1;if(I&&k>0){for(D=0;D<k;D++)if(U=(j=I[D]).presentationStartTime,P+(F=(W=j.duration)/2)>=U&&P-F<U+W){$=j.index;break}}return $}(_,n);return h(_,l)},getMediaFinishedInformation:function(_){var n={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return _&&_.segments&&(n.numberOfSegments=_.segments.length),n}}}e.__dashjs_factory_name="SegmentBaseGetter";const t=oe.Z.getClassFactory(e)},7387:(et,we,C)=>{C.d(we,{Aj:()=>t,NF:()=>h,TJ:()=>_,eR:()=>e,vi:()=>S});var oe=C(2011);function b(n,l){for(;n.length<l;)n="0"+n;return n}function e(n){return n&&n.split("$$").join("$")}function t(n,l){if(!l||!n||n.indexOf("$RepresentationID$")===-1)return n;var d=l.toString();return n.split("$RepresentationID$").join(d)}function S(n,l,d){var P,F,j,U,W,D,I=l.length,k=2;if(!n)return n;for(;;){if((P=n.indexOf("$"+l))<0||(F=n.indexOf("$",P+I))<0)return n;if((j=n.indexOf("%0",P+I))>P&&j<F)switch(U=n.charAt(F-1),W=parseInt(n.substring(j+k,F-1),10),U){case"d":case"i":case"u":D=b(d.toString(),W);break;case"x":D=b(d.toString(16),W);break;case"X":D=b(d.toString(16),W).toUpperCase();break;case"o":D=b(d.toString(8),W);break;default:return n}else D=d;n=n.substring(0,P)+D+n.substring(F+1)}}function g(n,l,d,P,F,j,U,W){var D,I=new oe.Z;return I.representation=n,I.duration=l,I.presentationStartTime=d,I.mediaStartTime=P,I.availabilityStartTime=F.calcAvailabilityStartTimeFromPresentationTime(j,n,U),I.availabilityEndTime=F.calcAvailabilityEndTimeFromPresentationTime(j+l,n,U),I.wallStartTime=F.calcWallTimeForSegment(I,U),I.replacementNumber=(D=W,I.representation.startNumber+D),I.index=W,I}function i(n,l,d,P){var F=l.adaptation.period;if(isFinite(F.duration)&&F.start+F.duration<=d.presentationStartTime)return!1;if(P){if(l.availabilityTimeOffset==="INF")return!0;var j=n.getClientReferenceTime();return d.availabilityStartTime.getTime()<=j&&(!isFinite(d.availabilityEndTime)||d.availabilityEndTime.getTime()>=j)}return!0}function h(n,l,d,P){var F,j,U;F=d.segmentDuration,isNaN(F)&&(F=d.adaptation.period.duration),j=parseFloat((d.adaptation.period.start+P*F).toFixed(5)),U=parseFloat((j+F).toFixed(5));var W=g(d,F,j,n.calcMediaTimeFromPresentationTime(j,d),n,U,l,P);return i(n,d,W,l)?W:null}function _(n,l,d,P,F,j,U,W,D,I){var k,$,J=P/j,Ne=F/j;return k=n.calcPresentationTimeFromMediaTime(J,d),i(n,d,$=g(d,Ne,k,J,n,k+Ne,l,D),l)?($.replacementTime=I||P,U=S(U,"Number",$.replacementNumber),U=S(U,"Time",$.replacementTime),$.media=U,$.mediaRange=W,$):null}},3636:(et,we,C)=>{C.d(we,{Z:()=>S});var oe=C(5448),b=C(3393),e=C(7387);function t(g,i){var h=(g=g||{}).timelineConverter;function _(){if(!h||!h.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(b.Z.MISSING_CONFIG_ERROR)}function n(l,d){if(_(),!l)return null;var P=l.adaptation.period.mpd.manifest.Period_asArray[l.adaptation.period.index].AdaptationSet_asArray[l.adaptation.index].Representation_asArray[l.index].SegmentTemplate;d=Math.max(d,0);var F=(0,e.NF)(h,i,l,d);if(F){F.replacementTime=Math.round((d-1)*l.segmentDuration*l.timescale,10);var j=P.media;j=(0,e.vi)(j,"Number",F.replacementNumber),j=(0,e.vi)(j,"Time",F.replacementTime),F.media=j}return F}return{getSegmentByIndex:n,getSegmentByTime:function(l,d){if(_(),!l)return null;var P=l.segmentDuration;if(isNaN(P))return null;var F=h.calcPeriodRelativeTimeFromMpdRelativeTime(l,d);return n(l,Math.floor(F/P))},getMediaFinishedInformation:function(l){var d={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!l)return d;var P=l.segmentDuration;return isNaN(P)?d.numberOfSegments=1:d.numberOfSegments=Math.ceil(l.adaptation.period.duration/P),d}}}t.__dashjs_factory_name="TemplateSegmentsGetter";const S=oe.Z.getClassFactory(t)},1724:(et,we,C)=>{C.d(we,{Z:()=>S});var oe=C(5448),b=C(3393),e=C(7387);function t(g,i){var h=(g=g||{}).timelineConverter,_=g.dashMetrics;function n(){if(!h)throw new Error(b.Z.MISSING_CONFIG_ERROR)}function l(P,F){var j,U,W,D,I,k,$,J=P.adaptation.period.mpd.manifest.Period_asArray[P.adaptation.period.index].AdaptationSet_asArray[P.adaptation.index].Representation_asArray[P.index].SegmentTemplate||P.adaptation.period.mpd.manifest.Period_asArray[P.adaptation.period.index].AdaptationSet_asArray[P.adaptation.index].Representation_asArray[P.index].SegmentList,Ne=J.SegmentTimeline,Be=J.SegmentURL_asArray,te=0,ot=-1;$=P.timescale;var Ae=!1;for(W=0,D=(j=Ne.S_asArray).length;W<D&&!Ae;W++)for(k=0,(U=j[W]).hasOwnProperty("r")&&(k=U.r),U.hasOwnProperty("t")&&(te=U.t),k<0&&(k=d(P,j[W+1],U,$,te/$)),I=0;I<=k&&!Ae;I++)(Ae=F(te,J,Be,U,$,++ot,W))&&(P.segmentDuration=U.d/$),te+=U.d}function d(P,F,j,U,W){var D;if(F&&F.hasOwnProperty("t"))D=F.t/U;else try{var I=0;if(isNaN(P.adaptation.period.start)||isNaN(P.adaptation.period.duration)||!isFinite(P.adaptation.period.duration)){var k=_.getCurrentDVRInfo();I=isNaN(k.end)?0:k.end}else I=P.adaptation.period.start+P.adaptation.period.duration;D=h.calcMediaTimeFromPresentationTime(I,P),P.segmentDuration=j.d/U}catch{D=0}return Math.max(Math.ceil((D-W)/(j.d/U))-1,0)}return{getSegmentByIndex:function(P,F,j){if(n(),!P)return null;var U=null,W=!1;return l(P,function(D,I,k,$,J,Ne,Be){if(W||j<0){var te=I.media,ot=$.mediaRange;return k&&(te=k[Be].media||"",ot=k[Be].mediaRange),U=(0,e.TJ)(h,i,P,D,$.d,J,te,ot,Ne,$.tManifest),!0}return D>=j*J-.5*$.d&&(W=!0),!1}),U},getSegmentByTime:function(P,F){if(n(),!P)return null;F===void 0&&(F=null);var j=null,U=h.calcMediaTimeFromPresentationTime(F,P);return l(P,function(W,D,I,k,$,J,Ne){var Be=parseFloat((U*$).toPrecision(15));if(Be<W+k.d&&Be>=W){var te=D.media,ot=k.mediaRange;return I&&(te=I[Ne].media||"",ot=I[Ne].mediaRange),j=(0,e.TJ)(h,i,P,W,k.d,$,te,ot,J,k.tManifest),!0}return!1}),j},getMediaFinishedInformation:function(P){if(!P)return 0;var F,j,U,W,D,I,k,$=(P.adaptation.period.mpd.manifest.Period_asArray[P.adaptation.period.index].AdaptationSet_asArray[P.adaptation.index].Representation_asArray[P.index].SegmentTemplate||P.adaptation.period.mpd.manifest.Period_asArray[P.adaptation.period.index].AdaptationSet_asArray[P.adaptation.index].Representation_asArray[P.index].SegmentList).SegmentTimeline,J=0,Ne=0,Be=0;for(k=P.timescale,W=(F=$.S_asArray).length,U=0;U<W;U++)for(I=0,(j=F[U]).hasOwnProperty("r")&&(I=j.r),j.hasOwnProperty("t")&&(Ne=(J=j.t)/k),I<0&&(I=d(P,F[U+1],j,k,Ne)),D=0;D<=I;D++)Be++,Ne=(J+=j.d)/k;return{numberOfSegments:Be,mediaTimeOfLastSignaledSegment:Ne}}}}t.__dashjs_factory_name="TimelineSegmentsGetter";const S=oe.Z.getClassFactory(t)},2011:(et,we,C)=>{C.d(we,{Z:()=>oe});const oe=function b(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,b),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.wallStartTime=NaN,this.representation=null}},2610:(et,we,C)=>{C.d(we,{Z:()=>oe});const oe=function b(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,b),this.schemeIdUri="",this.value=""}},7688:(et,we,C)=>{C.d(we,{Z:()=>ru});var oe=C(452),b=C.n(oe),e=C(3393),t=C(1553),S=C(3860),g=C(5595),i=C(8512),h=C(5448),_=C(6398),n=C(8825);function l(){var u,r,c,y,A,T,m,R,G,V,Y,N,H,q,ge,ne,ue,fe,x,re,ee,ae,p,L,Z=this.context,O=(0,g.Z)(Z).getInstance();function w(){M(),q=!1,V=0,Y=0,ne=0,ae=!1,ue=!0,fe=!1,p=!1,x=NaN,m&&(O.off(i.Z.DATA_UPDATE_COMPLETED,Me,u),O.off(i.Z.LOADING_PROGRESS,Bt,u),O.off(i.Z.MANIFEST_UPDATED,yt,u),O.off(i.Z.STREAMS_COMPOSED,Ye,u),O.off(n.Z.PLAYBACK_ENDED,cn,u),O.off(n.Z.STREAM_INITIALIZING,Zt,u),O.off(n.Z.REPRESENTATION_SWITCH,Ke,u),O.off(n.Z.BUFFER_LEVEL_STATE_CHANGED,Ge,u),le(),m.removeEventListener("canplay",ye),m.removeEventListener("canplaythrough",xe),m.removeEventListener("play",Ve),m.removeEventListener("waiting",ft),m.removeEventListener("playing",St),m.removeEventListener("pause",qt),m.removeEventListener("error",gt),m.removeEventListener("seeking",jt),m.removeEventListener("seeked",kt),m.removeEventListener("timeupdate",Ht),m.removeEventListener("progress",Kt),m.removeEventListener("ratechange",rn),m.removeEventListener("loadedmetadata",un),m.removeEventListener("loadeddata",en),m.removeEventListener("stalled",Gt),m.removeEventListener("ended",ln),m.removeEventListener("volumechange",an)),G=null,m=null,N=null,H=null}function z(){var Re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return parseFloat((Q(Re)-Ie()).toFixed(5))}function Q(Re){var se=Re||N;return se.start+se.duration}function ie(){var Re=arguments.length>0&&arguments[0]!==void 0&&arguments[0];N&&m&&m.getElement()?(Re&&H&&Te(Ie()),m.play()):q=!0}function M(){N&&m&&m.pause()}function B(Re){var se=arguments.length>1&&arguments[1]!==void 0&&arguments[1],Ue=arguments.length>2&&arguments[2]!==void 0&&arguments[2],it=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(N&&m&&m.getElement()){var Rt=isNaN(x)?m.getTime():x;Re!==Rt&&((re=Ue===!0)||(x=Re),r.info("Requesting seek to time: "+Re+(re?" (internal)":"")),H&&it&&Te(Re),m.setCurrentTime(Re,se))}}function me(){if(N&&m&&H){var Re=c&&c.hasVideoTrack()?e.Z.VIDEO:e.Z.AUDIO,se=A.getCurrentDVRInfo(Re);return se&&se.range?se.range.end:0}}function Te(Re){var se=new Date(R.getClientReferenceTime()),Ue=T.getRegularPeriods()[0],it=R.calcPresentationTimeFromWallTime(se,Ue);V=it-Re}function Ie(){return N&&m?m.getTime():null}function Oe(){return N&&m?m.isPaused():null}function Ee(){return N&&m?m.isSeeking():null}function Pe(){return N&&m?m.isStalled():null}function ct(){return N&&m?m.getPlaybackRate():null}function $e(){return N&&m?m.getEnded():null}function nt(){return H}function Tt(){var Re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(!Oe()&&H&&m.getReadyState()!==0&&!Ee()&&!ae){Re||(Re=c.hasVideoTrack()?e.Z.VIDEO:e.Z.AUDIO);var se=Ie(),Ue=Dt(se,Re),it=!isNaN(Ue)&&Ue!==se;it&&!Ee()&&(Pe()||ee||m.getReadyState()===1)&&(r.debug("UpdateCurrentTime: Seek to actual time: ".concat(Ue," from currentTime: ").concat(se)),B(Ue,!1,!1))}}function Dt(Re,se){var Ue=A.getCurrentDVRInfo(se),it=Ue?Ue.range:null;return it?Re>it.end?Math.max(it.end-V,it.start):Re>0&&Re+.25<it.start&&Math.abs(Re-it.start)<31536e4?fe?Math.max(it.end-V,it.start):it.start:Re:NaN}function _e(){G===null&&(G=setInterval(function(){var Re;O.trigger(i.Z.WALLCLOCK_TIME_UPDATED,{isDynamic:H,time:new Date}),nt()&&(c.addDVRMetric(),Oe()?(Re=Date.now(),(!ge||Re>ge+500)&&(ge=Re,Ht())):Tt())},L.get().streaming.wallclockTimeUpdateInterval))}function le(){clearInterval(G),G=null}function Me(Re){var se=T.convertRepresentationToRepresentationInfo(Re.currentRepresentation),Ue=se?se.mediaInfo.streamInfo:null;Ue!==null&&N.id===Ue.id&&(N=Ue)}function ye(){O.trigger(i.Z.CAN_PLAY)}function xe(){O.trigger(i.Z.CAN_PLAY_THROUGH)}function Ge(Re){Re.streamId===c.getActiveStreamInfo().id&&(ee=Re.state===S.Z.BUFFER_EMPTY,L.get().streaming.buffer.setStallState&&m.setStallState(Re.mediaType,Re.state===S.Z.BUFFER_EMPTY))}function Ve(){r.info("Native video element event: play"),Tt(),_e(),O.trigger(i.Z.PLAYBACK_STARTED,{startTime:Ie()})}function ft(){r.info("Native video element event: waiting"),O.trigger(i.Z.PLAYBACK_WAITING,{playingTime:Ie()})}function St(){r.info("Native video element event: playing"),re=!1,O.trigger(i.Z.PLAYBACK_PLAYING,{playingTime:Ie()})}function qt(){r.info("Native video element event: pause"),O.trigger(i.Z.PLAYBACK_PAUSED,{ended:$e()})}function jt(){if(!re){var Re=Ie();isNaN(x)||x===Re||(Re=x),x=NaN,r.info("Seeking to: "+Re),_e(),O.trigger(i.Z.PLAYBACK_SEEKING,{seekTime:Re,streamId:N.id})}}function kt(){r.info("Native video element event: seeked"),re=!1,O.trigger(i.Z.PLAYBACK_SEEKED)}function Ht(){N&&O.trigger(i.Z.PLAYBACK_TIME_UPDATED,{timeToEnd:z(),time:Ie(),streamId:N.id})}function Kt(){O.trigger(i.Z.PLAYBACK_PROGRESS,{streamId:N.id})}function rn(){var Re=ct();r.info("Native video element event: ratechange: ",Re),O.trigger(i.Z.PLAYBACK_RATE_CHANGED,{playbackRate:Re})}function un(){r.info("Native video element event: loadedmetadata"),O.trigger(i.Z.PLAYBACK_METADATA_LOADED),_e()}function en(){r.info("Native video element event: loadeddata"),O.trigger(i.Z.PLAYBACK_LOADED_DATA)}function ln(){r.info("Native video element event: ended"),M(),le();var Re=c?c.getActiveStreamInfo():null;Re&&O.trigger(i.Z.PLAYBACK_ENDED,{isLast:Re.isLast})}function an(){O.trigger(i.Z.PLAYBACK_VOLUME_CHANGED)}function cn(Re){if(G&&Re.isLast){r.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");var se=Re.seekTime?Re.seekTime:Q();m.setCurrentTime(se),M(),le()}}function gt(Re){var se=Re.target||Re.srcElement;O.trigger(i.Z.PLAYBACK_ERROR,{error:se.error})}function Bt(Re){if(Re.stream===!1&&fe&&!isNaN(Re.request.duration)){var se=1.2*Re.request.duration;se>V&&(r.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",se.toFixed(2)),V=se,Y=se)}}function Gt(Re){O.trigger(i.Z.PLAYBACK_STALLED,{e:Re})}function Zt(Re){var se;(se=Re.mediaInfo)&&se.supplementalProperties&&se.supplementalProperties[e.Z.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME]==="true"&&(r.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),fe=!0)}function Ke(Re){var se=c.getActiveStreamInfo();Re&&se&&Re.currentRepresentation&&Re.streamId&&Re.streamId===se.id&&Re.mediaType&&(Re.mediaType===e.Z.VIDEO||Re.mediaType===e.Z.AUDIO)&&(ue=Re.currentRepresentation.availabilityTimeComplete,(fe=!ue)&&!p&&(p=!0))}function yt(){ae=!0}function Ye(){ae=!1}return u={initialize:function(Re,se){N=Re,se!==!0&&(m.addEventListener("canplay",ye),m.addEventListener("canplaythrough",xe),m.addEventListener("play",Ve),m.addEventListener("waiting",ft),m.addEventListener("playing",St),m.addEventListener("pause",qt),m.addEventListener("error",gt),m.addEventListener("seeking",jt),m.addEventListener("seeked",kt),m.addEventListener("timeupdate",Ht),m.addEventListener("progress",Kt),m.addEventListener("ratechange",rn),m.addEventListener("loadedmetadata",un),m.addEventListener("loadeddata",en),m.addEventListener("stalled",Gt),m.addEventListener("ended",ln),m.addEventListener("volumechange",an),H=N.manifestInfo.isDynamic,ee=!1,re=!1,O.on(i.Z.DATA_UPDATE_COMPLETED,Me,u),O.on(i.Z.LOADING_PROGRESS,Bt,u),O.on(i.Z.MANIFEST_UPDATED,yt,u),O.on(i.Z.STREAMS_COMPOSED,Ye,u),O.on(n.Z.PLAYBACK_ENDED,cn,u,{priority:g.Z.EVENT_PRIORITY_HIGH}),O.on(n.Z.STREAM_INITIALIZING,Zt,u),O.on(n.Z.REPRESENTATION_SWITCH,Ke,u),O.on(n.Z.BUFFER_LEVEL_STATE_CHANGED,Ge,u),q&&(q=!1,ie()))},setConfig:function(Re){Re&&(Re.streamController&&(c=Re.streamController),Re.serviceDescriptionController&&(y=Re.serviceDescriptionController),Re.dashMetrics&&(A=Re.dashMetrics),Re.adapter&&(T=Re.adapter),Re.videoModel&&(m=Re.videoModel),Re.timelineConverter&&(R=Re.timelineConverter),Re.settings&&(L=Re.settings))},getTimeToStreamEnd:z,getBufferLevel:function(){var Re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,se=null;return c.getActiveStreamProcessors().forEach(function(Ue){if(!Re||Re.length===0||Re.indexOf(Ue.getType())===-1){var it=Ue.getBufferLevel();se=se===null?it:Math.min(se,it)}}),se},getPlaybackStalled:function(){return ee},getTime:Ie,getLowLatencyModeEnabled:function(){return fe},getInitialCatchupModeActivated:function(){return p},getIsManifestUpdateInProgress:function(){return ae},getPlaybackRate:ct,getPlayedRanges:function(){return N&&m?m.getPlayedRanges():null},getEnded:$e,getIsDynamic:nt,getStreamController:function(){return c},computeAndSetLiveDelay:function(Re,se){var Ue,it,Rt,Lt=!isNaN(Re)&&isFinite(Re)?Re:NaN,nn=T.getSuggestedPresentationDelay(),In=y.getServiceDescriptionSettings();return Ue=isNaN(L.get().streaming.delay.liveDelay)?L.get().streaming.delay.liveDelayFragmentCount===null||isNaN(L.get().streaming.delay.liveDelayFragmentCount)||isNaN(Lt)?In&&!isNaN(In.liveDelay)&&In.liveDelay>0?In.liveDelay:L.get().streaming.delay.useSuggestedPresentationDelay===!0&&nn!==null&&!isNaN(nn)&&nn>0?nn:isNaN(Lt)?se&&!isNaN(se.minBufferTime)?4*se.minBufferTime:4*N.manifestInfo.minBufferTime:4*Lt:Lt*L.get().streaming.delay.liveDelayFragmentCount:L.get().streaming.delay.liveDelay,(Rt=T.getAvailabilityStartTime())!==null&&(ne=Rt),it=se&&se.dvrWindowSize>0?Math.min(Ue,se.dvrWindowSize):Ue,V=it,Y=it,it},getLiveDelay:function(){return V},getOriginalLiveDelay:function(){return Y},getCurrentLiveLatency:function(){if(!H||isNaN(ne))return NaN;var Re=Ie();if(isNaN(Re)||Re===0)return 0;var se=new Date().getTime()+1e3*R.getClientTimeOffset();return Math.max(((se-ne-1e3*Re)/1e3).toFixed(3),0)},play:ie,isPaused:Oe,isStalled:Pe,pause:M,isSeeking:Ee,getStreamEndTime:Q,seek:B,seekToOriginalLive:function(){var Re=arguments.length>0&&arguments[0]!==void 0&&arguments[0],se=arguments.length>1&&arguments[1]!==void 0&&arguments[1],Ue=arguments.length>2&&arguments[2]!==void 0&&arguments[2],it=me();if(it!==0){var Rt=it-(V=Y);B(Rt,Re,se,Ue)}},seekToCurrentLive:function(){var Re=arguments.length>0&&arguments[0]!==void 0&&arguments[0],se=arguments.length>1&&arguments[1]!==void 0&&arguments[1],Ue=arguments.length>2&&arguments[2]!==void 0&&arguments[2],it=me();if(it!==0){var Rt=it-V;B(Rt,Re,se,Ue)}},reset:w,updateCurrentTime:Tt,getAvailabilityStartTime:function(){return ne}},r=(0,_.Z)(Z).getInstance().getLogger(u),w(),u}l.__dashjs_factory_name="PlaybackController";const d=h.Z.getSingletonFactory(l);var P=C(3186),F="loading",j="executed",U="failed";function W(u){var r,c,y,A,T=(u=u||{}).eventBus,m=u.events,R=u.dashMetrics,G=u.fragmentLoader,V=u.debug,Y=u.streamInfo,N=u.type;function H(p){var L;return!!p&&(L=!1,y.some(function(Z){if(O=p,w=Z,!isNaN(O.index)&&O.startTime===w.startTime&&O.adaptationIndex===w.adaptationIndex&&O.type===w.type||function(z,Q){return isNaN(z.index)&&isNaN(Q.index)&&z.quality===Q.quality}(p,Z)||function(z,Q){return z.action===P.Z.ACTION_COMPLETE&&z.action===Q.action}(p,Z))return L=!0;var O,w}),L)}function q(p){return isNaN(p.duration)?.25:Math.min(p.duration/8,.5)}function ge(p){y=y.filter(function(L){var Z=q(L);return isNaN(L.startTime)||p!==void 0&&L.startTime>=p-Z})}function ne(p,L){L<=p+.5||(y=y.filter(function(Z){var O=q(Z);return isNaN(Z.startTime)||Z.startTime>=L-O||isNaN(Z.duration)||Z.startTime+Z.duration<=p+O}))}function ue(p,L,Z){for(var O=p.length-1;O>=0;O--){var w=p[O],z=w.startTime,Q=z+w.duration;if(Z=isNaN(Z)?q(w):Z,!isNaN(z)&&!isNaN(Q)&&L+Z>=z&&L-Z<Q||isNaN(z)&&isNaN(L))return w}return null}function fe(p,L){R.addSchedulingInfo(p,L),R.addRequestsQueue(p.mediaType,A,y)}function x(p){p.sender===G&&(A.splice(A.indexOf(p.request),1),p.response&&!p.error&&y.push(p.request),fe(p.request,p.error?U:j),T.trigger(m.FRAGMENT_LOADING_COMPLETED,{request:p.request,response:p.response,error:p.error,sender:this},{streamId:Y.id,mediaType:N}))}function re(p){p.sender===G&&T.trigger(m.FRAGMENT_LOADING_PROGRESS,{request:p.request,response:p.response,error:p.error,sender:this},{streamId:Y.id,mediaType:N})}function ee(p){p.sender===G&&T.trigger(m.FRAGMENT_LOADING_ABANDONED,{request:p.request},{streamId:Y.id,mediaType:N})}function ae(){y=[],A=[]}return r={getStreamId:function(){return Y.id},getType:function(){return N},getRequests:function(p){var L=p?p.state instanceof Array?p.state:[p.state]:[],Z=[];return L.forEach(function(O){var w=function(z){var Q;switch(z){case F:Q=A;break;case j:Q=y;break;default:Q=[]}return Q}(O);Z=Z.concat(function(z,Q){return Q.hasOwnProperty("time")?[ue(z,Q.time,Q.threshold)]:z.filter(function(ie){for(var M in Q)if(M!=="state"&&Q.hasOwnProperty(M)&&ie[M]!=Q[M])return!1;return!0})}(w,p))}),Z},isFragmentLoaded:H,isFragmentLoadedOrPending:function(p){var L,Z=!1,O=0;if(!(Z=H(p)))for(O=0;O<A.length;O++)L=A[O],p.url===L.url&&p.startTime===L.startTime&&(Z=!0);return Z},removeExecutedRequestsBeforeTime:ge,removeExecutedRequestsAfterTime:function(p){y=y.filter(function(L){return isNaN(L.startTime)||p!==void 0&&L.startTime<p})},syncExecutedRequestsWithBufferedRange:function(p,L){if(p&&p.length!==0){for(var Z=0,O=0,w=p.length;O<w;O++)ne(Z,p.start(O)),Z=p.end(O);L>0&&ne(Z,L)}else ge()},abortRequests:function(){c.debug("abort requests"),G.abort(),A=[]},executeRequest:function(p){p.action===P.Z.ACTION_DOWNLOAD?(fe(p,F),A.push(p),function(L){T.trigger(m.FRAGMENT_LOADING_STARTED,{request:L},{streamId:Y.id,mediaType:N}),G.load(L)}(p)):c.warn("Unknown request action.")},reset:function(){T.off(m.LOADING_COMPLETED,x,this),T.off(m.LOADING_DATA_PROGRESS,re,this),T.off(m.LOADING_ABANDONED,ee,this),G&&G.reset(),ae()},resetInitialSettings:ae,addExecutedRequest:function(p){y.push(p)}},c=V.getLogger(r),ae(),T.on(m.LOADING_COMPLETED,x,r),T.on(m.LOADING_DATA_PROGRESS,re,r),T.on(m.LOADING_ABANDONED,ee,r),r}W.__dashjs_factory_name="FragmentModel";var D=h.Z.getClassFactory(W);D.FRAGMENT_MODEL_LOADING=F,D.FRAGMENT_MODEL_EXECUTED=j,D.FRAGMENT_MODEL_CANCELED="canceled",D.FRAGMENT_MODEL_FAILED=U,h.Z.updateClassFactory(W.__dashjs_factory_name,D);const I=D;var k=C(5459);function $(u){return $=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},$(u)}function J(u,r){return J=Object.setPrototypeOf||function(c,y){return c.__proto__=y,c},J(u,r)}function Ne(u,r){return!r||$(r)!=="object"&&typeof r!="function"?function(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}(u):r}function Be(u){return Be=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Be(u)}const te=new(function(u){(function(T,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(m&&m.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),m&&J(T,m)})(A,u);var r,c,y=(r=A,c=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var T,m=Be(r);if(c){var R=Be(this).constructor;T=Reflect.construct(m,arguments,R)}else T=m.apply(this,arguments);return Ne(this,T)});function A(){var T;return function(m,R){if(!(m instanceof R))throw new TypeError("Cannot call a class as a function")}(this,A),(T=y.call(this)).MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,T.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,T.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,T.SEGMENT_BASE_LOADER_ERROR_CODE=15,T.TIME_SYNC_FAILED_ERROR_CODE=16,T.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,T.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,T.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,T.APPEND_ERROR_CODE=20,T.REMOVE_ERROR_CODE=21,T.DATA_UPDATE_FAILED_ERROR_CODE=22,T.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,T.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,T.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,T.DOWNLOAD_ERROR_ID_SIDX_CODE=26,T.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,T.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,T.DOWNLOAD_ERROR_ID_XLINK_CODE=29,T.MANIFEST_ERROR_ID_PARSE_CODE=31,T.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,T.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,T.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,T.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,T.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",T.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",T.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",T.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",T.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",T.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",T.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",T.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",T.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",T.APPEND_ERROR_MESSAGE="chunk is not defined",T.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",T.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",T.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",T.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",T.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",T.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",T}return A}(C(2230).Z));var ot=C(1264),Ae=C(7855);function ke(u){var r,c,y,A,T,m,R=this.context,G=(0,ot.Z)(R).getInstance(),V=u.textController,Y=u.eventBus,N=[],H=[],q=!1,ge=u.mediaSource,ne=null;function ue(w){return new Promise(function(z){O(function(){A.changeType&&A.changeType(w),z()})})}function fe(w){return A=V.getTextSourceBuffer(w),Promise.resolve()}function x(){if(typeof A.addEventListener=="function")try{A.addEventListener("updateend",L,!1),A.addEventListener("error",Z,!1),A.addEventListener("abort",Z,!1)}catch{m=setInterval(L,50)}else m=setInterval(L,50)}function re(w){return new Promise(function(z){A&&G.get().streaming.buffer.useAppendWindow?O(function(){try{if(!A)return void z();var Q=ge.duration,ie=0;w&&!isNaN(w.start)&&!isNaN(w.duration)&&isFinite(w.duration)&&(Q=w.start+w.duration),w&&!isNaN(w.start)&&(ie=w.start),A.appendWindowEnd===Q&&A.appendWindowStart===ie||(A.appendWindowStart=0,A.appendWindowEnd=Q+.01,A.appendWindowStart=Math.max(ie-.1,0),y.debug("Updated append window for ".concat(T.type,". Set start to ").concat(A.appendWindowStart," and end to ").concat(A.appendWindowEnd))),z()}catch{y.warn("Failed to set append window"),z()}}):z()})}function ee(w){return new Promise(function(z){A?O(function(){try{A.timestampOffset===w||isNaN(w)||(A.timestampOffset=w,y.debug("Set MSE timestamp offset to ".concat(w))),z()}catch{z()}}):z()})}function ae(){if(!q&&H.length>0){q=!0;var w=H[0];H.splice(0,1);var z=function(){q=!1,H.length>0&&ae.call(this),w&&w.data&&w.data.segmentType&&w.data.segmentType!==Ae.w.INIT_SEGMENT_TYPE&&delete w.data.bytes,w.promise.resolve({chunk:w.data})};try{ne=w.request,w.data.bytes.byteLength===0?z.call(this):(A.appendBuffer?A.appendBuffer(w.data.bytes):A.append(w.data.bytes,w.data),O(z.bind(this)))}catch(Q){y.fatal('SourceBuffer append failed "'+Q+'"'),H.length>0?ae():q=!1,delete w.data.bytes,w.promise.reject({chunk:w.data,error:new k.Z(Q.code,Q.message)})}}}function p(){N.length>0&&(A.updating||(N.shift()(),p()))}function L(){A.updating||p()}function Z(w){var z,Q,ie=w.target||{};z=i.Z.SOURCE_BUFFER_ERROR,Q={error:ie,lastRequestAppended:ne},Y.trigger(z,Q,{streamId:T.streamInfo.id,mediaType:c})}function O(w){N.push(w),A.updating||p()}return r={getType:function(){return c},getAllBufferRanges:function(){try{return A.buffered}catch(w){return y.error("getAllBufferRanges exception: "+w.message),null}},getBuffer:function(){return A},append:function(w){var z=this,Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise(function(ie,M){w?(H.push({data:w,promise:{resolve:ie,reject:M},request:Q}),O(ae.bind(z))):M({chunk:w,error:new k.Z(te.APPEND_ERROR_CODE,te.APPEND_ERROR_MESSAGE)})})},remove:function(w){return new Promise(function(z,Q){var ie=w.start,M=w.end;ie>=0&&M>ie?O(function(){try{A.remove(ie,M),O(function(){z({from:ie,to:M,unintended:!1}),w.resolve&&w.resolve()})}catch(B){Q({from:ie,to:M,unintended:!1,error:new k.Z(te.REMOVE_ERROR_CODE,te.REMOVE_ERROR_MESSAGE)}),w.reject&&w.reject(B)}}):z()})},abort:function(){return new Promise(function(w){try{H=[],ge.readyState==="open"?O(function(){try{A&&A.abort(),w()}catch{w()}}):(A&&A.setTextTrack&&ge.readyState==="ended"&&A.abort(),w())}catch{w()}})},reset:function(){if(A){try{N=[],function(){try{typeof A.removeEventListener=="function"&&(A.removeEventListener("updateend",L,!1),A.removeEventListener("error",Z,!1),A.removeEventListener("abort",Z,!1)),clearInterval(m)}catch(w){y.error(w)}}(),q=!1,H=[],A.getClassName&&A.getClassName()==="TextSourceBuffer"||(y.debug("Removing sourcebuffer from media source"),ge.removeSourceBuffer(A))}catch{}A=null}ne=null},updateTimestampOffset:ee,initializeForStreamSwitch:function(w,z,Q){c=(T=w).type;var ie=T.codec;(function(B){A=B.getBuffer()})(Q),x();var M=[];return M.push(new Promise(function(B){O(function(){var me=A.appendWindowStart,Te=A.appendWindowEnd;A&&(A.abort(),A.appendWindowStart=me,A.appendWindowEnd=Te),B()})})),M.push(re(T.streamInfo)),G.get().streaming.buffer.useChangeTypeForTrackSwitch&&M.push(ue(ie)),z&&z.MSETimeOffset!==void 0&&M.push(ee(z.MSETimeOffset)),Promise.all(M)},initializeForFirstUse:function(w,z,Q){c=(T=z).type;var ie=T.codec;try{if(ie.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return fe(w);A=ge.addSourceBuffer(ie),x();var M=[];return M.push(re(T.streamInfo)),Q&&Q.MSETimeOffset!==void 0&&M.push(ee(Q.MSETimeOffset)),Promise.all(M)}catch(B){return T.type==e.Z.TEXT&&!T.isFragmented||ie.indexOf('codecs="stpp')!==-1||ie.indexOf('codecs="vtt')!==-1?fe(w):Promise.reject(B)}},updateAppendWindow:re,changeType:ue},y=(0,_.Z)(R).getInstance().getLogger(r),r}ke.__dashjs_factory_name="SourceBufferSink";const pe=h.Z.getClassFactory(ke);function be(u){var r,c,y,A=this.context,T=[],m=u;function R(G,V){return T=T.filter(function(Y){return!((isNaN(V)||Y.start<V)&&(isNaN(G)||Y.end>G))}),Promise.resolve()}return r={getAllBufferRanges:function(){for(var G=[],V=0;V<T.length;V++){var Y=T[V];G.length===0||Y.start>G[G.length-1].end?G.push({start:Y.start,end:Y.end}):G[G.length-1].end=Y.end}var N={start:function(H){return G[H].start},end:function(H){return G[H].end}};return Object.defineProperty(N,"length",{get:function(){return G.length}}),N},append:function(G){return G.segmentType!=="InitializationSegment"?(T.push(G),T.sort(function(V,Y){return V.start-Y.start}),y=null):y=G,c.debug("PreBufferSink appended chunk s: "+G.start+"; e: "+G.end),m&&m({chunk:G}),Promise.resolve()},remove:R,abort:function(){return Promise.resolve()},discharge:function(G,V){var Y=function(N,H){return T.filter(function(q){return(isNaN(H)||q.start<H)&&(isNaN(N)||q.end>N)})}(G,V);return y&&(Y.push(y),y=null),R(G,V),Y},reset:function(){T=[],y=null,m=null},updateTimestampOffset:function(){return Promise.resolve()},waitForUpdateEnd:function(G){G()},getBuffer:function(){return this}},c=(0,_.Z)(A).getInstance().getLogger(r),r}be.__dashjs_factory_name="PreBufferSink";const He=h.Z.getClassFactory(be);function ut(){var u={};return{save:function(r){var c=r.streamId,y=r.representationId;u[c]=u[c]||{},u[c][y]=r},extract:function(r,c){return u&&u[r]&&u[r][c]?u[r][c]:null},reset:function(){u={}}}}ut.__dashjs_factory_name="InitCache";const tt=h.Z.getSingletonFactory(ut);var Se=.01,We="BufferController";function lt(u){u=u||{};var r,c,y,A,T,m,R,G,V,Y,N,H,q,ge,ne,ue,fe,x,re,ee,ae,p=this.context,L=(0,g.Z)(p).getInstance(),Z=u.errHandler,O=u.fragmentModel,w=u.representationController,z=u.adapter,Q=u.textController,ie=u.abrController,M=u.playbackController,B=u.streamInfo,me=u.type,Te=u.settings;function Ie(Ye){var Re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise(function(se,Ue){m=Ye,V&&Re&&typeof V.discharge=="function"?(Y=V,Ee(Re).then(function(){se()}).catch(function(it){Ue(it)})):se()})}function Oe(Ye){return z.convertRepresentationToRepresentationInfo(w.getRepresentationForQuality(Ye))}function Ee(Ye){var Re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return new Promise(function(se,Ue){x&&Ye?m?(N=!1,ct(Ye,Re).then(function(it){se(it)}).catch(function(it){Ue(it)})):(N=!0,Pe().then(function(it){se(it)}).catch(function(it){Ue(it)})):se(null)})}function Pe(){var Ye=this;return new Promise(function(Re,se){var Ue=ie.getQualityFor(me,B.id);V=He(p).create(_e.bind(Ye)),en(Oe(Ue)).then(function(){Re(V)}).catch(function(){se()})})}function ct(Ye,Re){return new Promise(function(se,Ue){var it=ie.getQualityFor(me,B.id);V=pe(p).create({mediaSource:m,textController:Q,eventBus:L}),function(Rt,Lt,nn){var In=Oe(nn);return Lt&&Lt[me]&&(me===e.Z.VIDEO||me===e.Z.AUDIO)?V.initializeForStreamSwitch(Rt,In,Lt[me]):V.initializeForFirstUse(B,Rt,In)}(Ye,Re,it).then(function(){return en(Oe(it))}).then(function(){se(V)}).catch(function(Rt){c.fatal("Caught error on create SourceBuffer: "+Rt),Z.error(new k.Z(te.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,te.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+me)),Ue(Rt)})})}function $e(Ye){Te.get().streaming.cacheInitSegments&&(c.info("Init fragment finished loading saving to",me+"'s init cache"),x.save(Ye.chunk)),c.debug("Append Init fragment",me," with representationId:",Ye.chunk.representationId," and quality:",Ye.chunk.quality,", data size:",Ye.chunk.bytes.byteLength),Tt(Ye.chunk)}function nt(Ye){Tt(Ye.chunk,Ye.request)}function Tt(Ye){var Re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;V.append(Ye,Re).then(function(se){_e(se)}).catch(function(se){_e(se)}),Ye.mediaInfo.type===e.Z.VIDEO&&Ke(i.Z.VIDEO_CHUNK_RECEIVED,{chunk:Ye})}function Dt(Ye){if(Ye&&Ye.length>0)for(var Re=0,se=Ye.length;Re<se;Re++)c.debug("Buffered range: "+Ye.start(Re)+" - "+Ye.end(Re)+", currentTime = ",M.getTime())}function _e(Ye){if(Ye.error)return Ye.error.code===22&&function(){if(fe=!0,T=.8*Bt(),c.warn("Quota exceeded, Critical Buffer: "+T),T>0){var Ue=Math.max(.2*T,1),it=T-Ue,Rt=Math.min(Te.get().streaming.buffer.bufferTimeAtTopQuality,.9*it),Lt=Math.min(Te.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*it),nn={streaming:{buffer:{bufferToKeep:parseFloat(Ue.toFixed(5)),bufferTimeAtTopQuality:parseFloat(Rt.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(Lt.toFixed(5))}}};Te.update(nn)}}(),void(Ye.error.code!==22&&Zt()||(c.warn("Clearing playback buffer to overcome quota exceed situation"),Ke(i.Z.QUOTA_EXCEEDED,{criticalBufferLevel:T,quotaExceededTime:Ye.chunk.start}),Kt(Ht())));if(V&&(ft(),fe=!1,(ge=Ye.chunk)&&ge.endFragment)){ge&&!isNaN(ge.index)&&(R=Math.max(ge.index,R),St());var Re=V.getAllBufferRanges();ge.segmentType===Ae.w.MEDIA_SEGMENT_TYPE&&(Dt(Re),ye(),function(){if(!isNaN(ae)&&!N)if(me===e.Z.AUDIO||me===e.Z.VIDEO){var Ue=M.getTime(),it=Ve(Ue,0),Rt=Ve(ae,0);if(it&&Rt&&it.start===Rt.start)ae=NaN;else{var Lt=w.getCurrentRepresentation().segmentDuration,nn=Ve(ae,Lt);nn&&(Te.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(Ue-ae)>Lt?ae<=nn.end&&M.seek(Math.max(ae,nn.start),!1,!0):Ue<nn.start&&M.seek(nn.start,!1,!0))}}else ae=NaN}());var se=!1;H&&(H.indexOf(ge)>0&&(se=!0),H=null),ge&&!se&&Ke(i.Z.BYTES_APPENDED_END_FRAGMENT,{quality:ge.quality,startTime:ge.start,index:ge.index,bufferedRanges:Re,segmentType:ge.segmentType,mediaType:me})}}function le(){return new Promise(function(Ye,Re){var se=Me();if(!se||se.length===0)return ye(),void Ye();Kt(se).then(function(){Ye()}).catch(function(Ue){Re(Ue)})})}function Me(Ye){var Re=[],se=V.getAllBufferRanges();if(!se||se.length===0)return Re;if(!Ye&&Ye!==0||isNaN(Ye))Re.push({start:se.start(0),end:se.end(se.length-1)+.5});else{var Ue=function(Rt,Lt){var nn=Te.get().streaming.buffer.bufferToKeep,In=Lt.start(0);if(Rt-In>nn){var Xn=Math.max(0,Rt-nn),Sn=O.getRequests({state:I.FRAGMENT_MODEL_EXECUTED,time:Rt,threshold:Se})[0];if(Sn&&(Xn=Math.min(Sn.startTime,Xn)),Xn>0)return{start:In,end:Xn}}return null}(Ye,se),it=function(Rt,Lt){var nn=Lt.end(Lt.length-1)+.5,In=Gt(Rt),Xn=B.manifestInfo.duration>=Te.get().streaming.buffer.longFormContentDurationThreshold?Te.get().streaming.buffer.bufferTimeAtTopQualityLongForm:Te.get().streaming.buffer.bufferTimeAtTopQuality,Sn=isNaN(In)?Rt:Math.min(In,Rt+Xn);if(Sn>=Lt.end(Lt.length-1))return null;var $n=O.getRequests({state:I.FRAGMENT_MODEL_EXECUTED,time:Rt,threshold:Se})[0];if($n&&(Sn=Math.max($n.startTime+$n.duration,Sn)),Te.get().streaming.buffer.avoidCurrentTimeRangePruning){for(var Hn=0;Hn<Lt.length;Hn++)if(Lt.start(Hn)<=Rt&&Rt<=Lt.end(Hn)&&Lt.start(Hn)<=Sn&&Sn<=Lt.end(Hn)){var gr=Sn;Sn=Hn+1<Lt.length?Lt.start(Hn+1):Lt.end(Hn)+1,c.debug("Buffered range ["+Lt.start(Hn)+", "+Lt.end(Hn)+"] overlaps with targetTime "+Rt+" and range to be pruned ["+gr+", "+nn+"], using ["+Sn+", "+nn+"] instead"+(Sn<nn?"":" (no actual pruning)"));break}}return Sn<Lt.end(Lt.length-1)?{start:Sn,end:nn}:null}(Ye,se);Ue&&Re.push(Ue),it&&Re.push(it)}return Re}function ye(){(!ee||me===e.Z.TEXT&&Q.isTextEnabled())&&ft()}function xe(){qt()}function Ge(){qt(),ae=NaN}function Ve(Ye,Re){var se,Ue,it=V.getAllBufferRanges(),Rt=0,Lt=0,nn=null,In=null,Xn=0,Sn=isNaN(Re)?.15:Re;if(it!=null){for(Ue=0,se=it.length;Ue<se;Ue++)if(Rt=it.start(Ue),Lt=it.end(Ue),nn===null)Xn=Math.abs(Rt-Ye),(Ye>=Rt&&Ye<Lt||Xn<=Sn)&&(nn=Rt,In=Lt);else{if(!((Xn=Rt-In)<=Sn))break;In=Lt}if(nn!==null)return{start:nn,end:In}}return null}function ft(){if(M){var Ye=M.getTime()||0;N&&(Ye=isNaN(ae)?0:ae);var Re=Te.get().streaming.gaps.jumpGaps&&!isNaN(Te.get().streaming.gaps.smallGapLimit)?Te.get().streaming.gaps.smallGapLimit:NaN;A=Math.max(function(se,Ue){var it;return Te.get().streaming.gaps.jumpGaps&&(Ue=Te.get().streaming.gaps.smallGapLimit),(it=Ve(se,Ue))===null?0:it.end-se}(Ye,Re),0),Ke(i.Z.BUFFER_LEVEL_UPDATED,{mediaType:me,bufferLevel:A}),qt()}}function St(){var Ye=R>=G-1,Re=M.getTimeToStreamEnd(B)-A<1e-5;!Ye&&!Re||y||(gt(!0),c.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ".concat(B.id," and type ").concat(me)))}function qt(){me!==e.Z.AUDIO&&me!==e.Z.VIDEO||((!M.getLowLatencyModeEnabled()&&A<Te.get().streaming.buffer.stallThreshold||A===0)&&!y?jt(S.Z.BUFFER_EMPTY):(y||A>=Te.get().streaming.buffer.stallThreshold||M.getLowLatencyModeEnabled()&&A>0)&&jt(S.Z.BUFFER_LOADED))}function jt(Ye){q===Ye||Ye===S.Z.BUFFER_EMPTY&&M.getTime()===0||me===e.Z.TEXT&&!Q.isTextEnabled()||(q=Ye,Ke(i.Z.BUFFER_LEVEL_STATE_CHANGED,{state:Ye}),Ke(Ye===S.Z.BUFFER_LOADED?i.Z.BUFFER_LOADED:i.Z.BUFFER_EMPTY),c.debug(Ye===S.Z.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function kt(){V&&me!==e.Z.TEXT&&(y||Kt(Ht()))}function Ht(){var Ye=[],Re=V.getAllBufferRanges();if(!Re||Re.length===0)return Ye;var se=M.getTime(),Ue=Math.max(0,se-Te.get().streaming.buffer.bufferToKeep),it=O.getRequests({state:I.FRAGMENT_MODEL_EXECUTED,time:se,threshold:Se})[0];if(it)Ue=Math.min(it.startTime,Ue);else if(se===0&&M.getIsDynamic())return[];if(Re.start(0)<=Ue){for(var Rt={start:0,end:Ue},Lt=0;Lt<Re.length&&Re.end(Lt)<=Ue;Lt++)Rt.end=Re.end(Lt);Rt.start<Rt.end&&Ye.push(Rt)}return Ye}function Kt(Ye){return new Promise(function(Re,se){if(Ye&&V&&Ye.length!==0){var Ue=[];Ye.forEach(function(it){Ue.push(function(Rt){return new Promise(function(Lt,nn){Rt.resolve=Lt,Rt.reject=nn,re.push(Rt)})}(it))}),ue||rn(),Promise.all(Ue).then(function(){Re()}).catch(function(it){se(it)})}else Re()})}function rn(){try{if(re.length===0||!V)return c.debug("Nothing to prune, halt pruning"),re=[],void(ue=!1);var Ye=V.getBuffer();if(!Ye||!Ye.buffered||Ye.buffered.length===0)return c.debug("SourceBuffer is empty (or does not exist), halt pruning"),re=[],void(ue=!1);var Re=re.shift();c.debug("".concat(me,": Removing buffer from: ").concat(Re.start," to ").concat(Re.end)),ue=!0,M.getTime()<Re.end&&gt(!1),V.remove(Re).then(function(se){un(se)}).catch(function(se){un(se)})}catch{ue=!1}}function un(Ye){c.debug("onRemoved buffer from:",Ye.from,"to",Ye.to),Dt(V.getAllBufferRanges()),re.length===0&&(ue=!1,ft()),Ye.unintended&&(c.warn("Detected unintended removal from:",Ye.from,"to",Ye.to,"setting streamprocessor time to",Ye.from),Ke(i.Z.SEEK_TARGET,{time:Ye.from})),ue?rn():(ee?ee=!1:ft(),Ke(i.Z.BUFFER_CLEARED,{from:Ye.from,to:Ye.to,unintended:Ye.unintended,hasEnoughSpaceToAppend:Zt(),quotaExceeded:fe}))}function en(Ye){return new Promise(function(Re){Ye&&Ye.MSETimeOffset!==void 0&&V&&V.updateTimestampOffset?V.updateTimestampOffset(Ye.MSETimeOffset).then(function(){Re()}).catch(function(){Re()}):Re()})}function ln(){return V&&!y?V.updateAppendWindow(B):Promise.resolve()}function an(){++ne*(Te.get().streaming.wallclockTimeUpdateInterval/1e3)>=Te.get().streaming.buffer.bufferPruningInterval&&(ne=0,kt())}function cn(){qt()}function gt(Ye){(y=Ye)?Ke(i.Z.BUFFERING_COMPLETED):G=Number.POSITIVE_INFINITY}function Bt(){try{var Ye,Re,se=V.getAllBufferRanges(),Ue=0;if(!se)return Ue;for(Re=0,Ye=se.length;Re<Ye;Re++)Ue+=se.end(Re)-se.start(Re);return Ue}catch{return 0}}function Gt(Ye){try{var Re=Ye,se=V.getAllBufferRanges();if(!se||se.length===0)return NaN;for(var Ue=0;Re===Ye&&Ue<se.length;){var it=se.start(Ue),Rt=se.end(Ue);Re>=it&&Re<=Rt&&(Re=Rt),Ue+=1}return Re===Ye?NaN:Re}catch{}}function Zt(){var Ye=Bt();return isNaN(Ye)||Ye<T}function Ke(Ye,Re){var se=Re||{};L.trigger(Ye,se,{streamId:B.id,mediaType:me})}function yt(Ye,Re){if(T=Number.POSITIVE_INFINITY,q=void 0,G=Number.POSITIVE_INFINITY,R=0,ge=null,y=!1,ue=!1,fe=!1,A=0,ne=0,re=[],ae=NaN,N=!1,V){var se=V;V=null,Ye||Re||se.abort().then(function(){se.reset(Re),se=null})}ee=!1}return r={initialize:function(Ye){Ie(Ye),L.on(i.Z.INIT_FRAGMENT_LOADED,$e,r),L.on(i.Z.MEDIA_FRAGMENT_LOADED,nt,r),L.on(i.Z.WALLCLOCK_TIME_UPDATED,an,r),L.on(n.Z.PLAYBACK_PLAYING,Ge,r),L.on(n.Z.PLAYBACK_PROGRESS,ye,r),L.on(n.Z.PLAYBACK_TIME_UPDATED,ye,r),L.on(n.Z.PLAYBACK_RATE_CHANGED,cn,r),L.on(n.Z.PLAYBACK_STALLED,xe,r)},getStreamId:function(){return B.id},getType:function(){return me},getBufferControllerType:function(){return We},createBufferSink:Ee,dischargePreBuffer:function(){if(V&&Y&&typeof Y.discharge=="function"){var Ye=Y.getAllBufferRanges();if(Ye.length>0){for(var Re="Beginning "+me+"PreBuffer discharge, adding buffer for:",se=0;se<Ye.length;se++)Re+=" start: "+Ye.start(se)+", end: "+Ye.end(se)+";";c.debug(Re)}else c.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");H=[];for(var Ue=Y.discharge(),it=null,Rt=0;Rt<Ue.length;Rt++){var Lt=Ue[Rt];if(Lt.segmentType!==Ae.w.INIT_SEGMENT_TYPE){var nn=x.extract(Lt.streamId,Lt.representationId);nn&&it!==nn&&(H.push(nn),V.append(nn),it=nn)}H.push(Lt),V.append(Lt)}Y.reset(),Y=null}},getBuffer:function(){return V},getBufferLevel:function(){return A},getRangeAt:Ve,hasBufferAtTime:function(Ye){try{var Re=V.getAllBufferRanges();if(!Re||Re.length===0)return!1;for(var se=0;se<Re.length;){var Ue=Re.start(se),it=Re.end(se);if(Ye>=Ue&&Ye<=it)return!0;se+=1}return!1}catch(Rt){return c.error(Rt),!1}},pruneBuffer:kt,setMediaSource:Ie,getMediaSource:function(){return m},appendInitSegmentFromCache:function(Ye){var Re=x.extract(B.id,Ye);return!!Re&&(c.info("Append Init fragment",me," with representationId:",Re.representationId," and quality:",Re.quality,", data size:",Re.bytes.byteLength),Tt(Re),!0)},getIsBufferingCompleted:function(){return y},setIsBufferingCompleted:gt,getIsPruningInProgress:function(){return ue},reset:function(Ye,Re){L.off(i.Z.INIT_FRAGMENT_LOADED,$e,this),L.off(i.Z.MEDIA_FRAGMENT_LOADED,nt,this),L.off(i.Z.WALLCLOCK_TIME_UPDATED,an,this),L.off(n.Z.PLAYBACK_PLAYING,Ge,this),L.off(n.Z.PLAYBACK_PROGRESS,ye,this),L.off(n.Z.PLAYBACK_TIME_UPDATED,ye,this),L.off(n.Z.PLAYBACK_RATE_CHANGED,cn,this),L.off(n.Z.PLAYBACK_STALLED,xe,this),yt(Ye,Re)},prepareForPlaybackSeek:function(){return y&&gt(!1),V.abort()},prepareForReplacementTrackSwitch:function(Ye){return new Promise(function(Re,se){V.abort().then(function(){return ln()}).then(function(){return Te.get().streaming.buffer.useChangeTypeForTrackSwitch?V.changeType(Ye):Promise.resolve()}).then(function(){return le()}).then(function(){gt(!1),Re()}).catch(function(Ue){se(Ue)})})},prepareForNonReplacementTrackSwitch:function(Ye){return new Promise(function(Re,se){ln().then(function(){return Te.get().streaming.buffer.useChangeTypeForTrackSwitch?V.changeType(Ye):Promise.resolve()}).then(function(){Re()}).catch(function(Ue){se(Ue)})})},prepareForForceReplacementQualitySwitch:function(Ye){return new Promise(function(Re,se){V.abort().then(function(){return ln()}).then(function(){return le()}).then(function(){return en(Ye)}).then(function(){gt(!1),Re()}).catch(function(Ue){se(Ue)})})},updateAppendWindow:ln,getAllRangesWithSafetyFactor:Me,getContinuousBufferTimeForTargetTime:Gt,clearBuffers:Kt,pruneAllSafely:le,updateBufferTimestampOffset:en,setSeekTarget:function(Ye){ae=Ye},segmentRequestingCompleted:function(Ye){isNaN(Ye)||(G=Ye,St())}},c=(0,_.Z)(p).getInstance().getLogger(r),x=tt(p).getInstance(),yt(),r}lt.__dashjs_factory_name=We;const Fe=h.Z.getClassFactory(lt);var Xe="NotFragmentedTextBufferController";function ce(u){u=u||{};var r,c,y,A,T,m,R=this.context,G=(0,g.Z)(R).getInstance(),V=u.textController,Y=u.errHandler,N=u.streamInfo,H=u.type;function q(ue){A=ue}function ge(ue){var fe,x;c!==ue&&(c=ue)&&(fe=i.Z.BUFFERING_COMPLETED,x={},G.trigger(fe,x,{streamId:N.id,mediaType:H}))}function ne(ue){ue.chunk.bytes&&!c&&(m.save(ue.chunk),T.append(ue.chunk),ge(!0))}return r={initialize:function(ue){q(ue)},getStreamId:function(){return N.id},getType:function(){return H},getBufferControllerType:function(){return Xe},createBufferSink:function(ue){return new Promise(function(fe,x){try{(T=pe(R).create({mediaSource:A,textController:V,eventBus:G})).initializeForFirstUse(N,ue),y||(T.getBuffer()&&typeof T.getBuffer().initialize=="function"&&T.getBuffer().initialize(),y=!0),fe(T)}catch(re){Y.error(new k.Z(te.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,te.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+H)),x(re)}})},dischargePreBuffer:function(){},getBuffer:function(){return T},getBufferLevel:function(){return 0},getRangeAt:function(){return null},pruneBuffer:function(){},hasBufferAtTime:function(){return!0},getAllRangesWithSafetyFactor:function(){return[]},getContinuousBufferTimeForTargetTime:function(){return Number.POSITIVE_INFINITY},setMediaSource:q,getMediaSource:function(){return A},appendInitSegmentFromCache:function(ue){return m.extract(N.id,ue)!==null},getIsBufferingCompleted:function(){return c},setIsBufferingCompleted:ge,getIsPruningInProgress:function(){return!1},reset:function(ue){G.off(i.Z.INIT_FRAGMENT_LOADED,ne,r),!ue&&T&&(T.abort(),T.reset(),T=null)},clearBuffers:function(){return Promise.resolve()},prepareForPlaybackSeek:function(){return Promise.resolve()},prepareForReplacementTrackSwitch:function(){return c=!1,Promise.resolve()},setSeekTarget:function(){},updateAppendWindow:function(){return Promise.resolve()},pruneAllSafely:function(){return Promise.resolve()},updateBufferTimestampOffset:function(){return Promise.resolve()},segmentRequestingCompleted:function(){}},y=!1,A=null,c=!1,m=tt(R).getInstance(),G.on(i.Z.INIT_FRAGMENT_LOADED,ne,r),r}ce.__dashjs_factory_name=Xe;const de=h.Z.getClassFactory(ce);function je(u){u=u||{};var r,c,y,A,T,m,R,G,V,Y,N,H,q=this.context,ge=(0,g.Z)(q).getInstance(),ne=u.dashMetrics,ue=u.mediaPlayerModel,fe=u.fragmentModel,x=u.abrController,re=u.playbackController,ee=u.textController,ae=u.type,p=u.bufferController,L=u.representationController,Z=u.settings;function O(Oe){if(!p.getIsBufferingCompleted()){w();var Ee=isNaN(Oe)?0:Oe;T=setTimeout(z,Ee)}}function w(){T&&(clearTimeout(T),T=null)}function z(){try{if(function(){try{return ae===e.Z.TEXT&&!ee.isTextEnabled()||re.isPaused()&&(!re.getStreamController().getInitialPlayback()||!re.getStreamController().getAutoPlay())&&!Z.get().streaming.scheduling.scheduleWhilePaused}catch{return!1}}())return void w();if(function(){try{return L.getCurrentRepresentationInfo()&&(isNaN(V)||Y||(Pe=c.id,ct=x.getMaxAllowedIndexFor(ae,Pe),!(!isNaN(G)&&G==ct||(y.info("Top quality "+ae+" index has changed from "+G+" to "+ct),G=ct,0)))||function(){var $e=L.getCurrentRepresentationInfo();return!ae||!$e||ne.getCurrentBufferLevel(ae)<Q()}())}catch{return!1}var Pe,ct}()){var Oe=!1;H&&(Oe=x.checkPlaybackQuality(ae,c.id)),Oe||(Ee=L.getCurrentRepresentationInfo(),N||Ee.quality!==V||Y?(Y?(y.debug("Switch track for "+ae+", representation id = "+Ee.id),Y=!1):y.debug("Quality has changed, get init request for representationid = "+Ee.id),ge.trigger(i.Z.INIT_FRAGMENT_NEEDED,{representationId:Ee.id,sender:r},{streamId:c.id,mediaType:ae}),H=!1,N=!1):(y.debug("Media segment needed for ".concat(ae," and stream id ").concat(c.id)),ge.trigger(i.Z.MEDIA_FRAGMENT_NEEDED,{},{streamId:c.id,mediaType:ae}),H=!0))}else O(re.getLowLatencyModeEnabled()?Z.get().streaming.scheduling.lowLatencyTimeout:Z.get().streaming.scheduling.defaultTimeout)}catch{O(re.getLowLatencyModeEnabled()?Z.get().streaming.scheduling.lowLatencyTimeout:Z.get().streaming.scheduling.defaultTimeout)}var Ee}function Q(){var Oe=NaN,Ee=L.getCurrentRepresentationInfo();return ae&&Ee&&(Oe=ae===e.Z.TEXT?function(){try{if(ee.isTextEnabled()){var Pe=L.getCurrentRepresentationInfo();if(isNaN(Pe.fragmentDuration)){var ct=ne.getCurrentSchedulingInfo(S.Z.SCHEDULING_INFO);return ct?ct.duration:0}return Pe.fragmentDuration}return 0}catch{return 0}}():ae===e.Z.AUDIO&&m?function(){try{var Pe=ne.getCurrentBufferLevel(e.Z.VIDEO),ct=L.getCurrentRepresentationInfo();return isNaN(ct.fragmentDuration)?Pe+1:Math.max(Pe+1,ct.fragmentDuration)}catch{return 0}}():function(){try{var Pe=L.getCurrentRepresentationInfo().mediaInfo.streamInfo;return x.isPlayingAtTopQuality(Pe)?Pe.manifestInfo.duration>=Z.get().streaming.buffer.longFormContentDurationThreshold?Z.get().streaming.buffer.bufferTimeAtTopQualityLongForm:Z.get().streaming.buffer.bufferTimeAtTopQuality:ue.getStableBufferTime()}catch{return ue.getStableBufferTime()}}()),Oe}function ie(){M(!0)}function M(Oe){if(re&&fe){var Ee=fe.getRequests({state:I.FRAGMENT_MODEL_EXECUTED,time:re.getTime(),threshold:0})[0];Ee&&re.getTime()>=Ee.startTime&&((!R.mediaInfo||Ee.mediaInfo.type===R.mediaInfo.type&&Ee.mediaInfo.id!==R.mediaInfo.id)&&Oe&&ge.trigger(i.Z.TRACK_CHANGE_RENDERED,{mediaType:ae,oldMediaInfo:R.mediaInfo,newMediaInfo:Ee.mediaInfo,streamId:c.id}),Ee.quality===R.quality&&Ee.adaptationIndex===R.adaptationIndex||!Oe||(y.debug("Quality change rendered for streamId ".concat(c.id," and type ").concat(ae)),ge.trigger(i.Z.QUALITY_CHANGE_RENDERED,{mediaType:ae,oldQuality:R.quality,newQuality:Ee.quality,streamId:c.id})),R={mediaInfo:Ee.mediaInfo,quality:Ee.quality,adaptationIndex:Ee.adaptationIndex})}}function B(){fe.abortRequests(),w()}function me(){Z.get().streaming.scheduling.scheduleWhilePaused||O()}function Te(Oe){ne.updatePlayListTraceMetrics({playbackspeed:Oe.playbackRate.toString()})}function Ie(){H=!0,A=0,V=NaN,R={mediaInfo:void 0,quality:NaN,adaptationIndex:NaN},G=NaN,Y=!1,N=!1}return r={initialize:function(Oe){m=Oe,ge.on(i.Z.URL_RESOLUTION_FAILED,B,r),ge.on(n.Z.PLAYBACK_STARTED,me,r),ge.on(n.Z.PLAYBACK_RATE_CHANGED,Te,r),ge.on(n.Z.PLAYBACK_TIME_UPDATED,ie,r)},getType:function(){return ae},getStreamId:function(){return c.id},setTimeToLoadDelay:function(Oe){A=Oe},getTimeToLoadDelay:function(){return A},setSwitchTrack:function(Oe){Y=Oe},getSwitchTrack:function(){return Y},startScheduleTimer:O,clearScheduleTimer:w,reset:function(){ge.off(i.Z.URL_RESOLUTION_FAILED,B,r),ge.off(n.Z.PLAYBACK_STARTED,me,r),ge.off(n.Z.PLAYBACK_RATE_CHANGED,Te,r),ge.off(n.Z.PLAYBACK_TIME_UPDATED,ie,r),w(),M(!1),Ie(),c=null},getBufferTarget:Q,getPlaybackController:function(){return re},setCheckPlaybackQuality:function(Oe){H=Oe},setInitSegmentRequired:function(Oe){N=Oe},setLastInitializedQuality:function(Oe){V=Oe}},y=(0,_.Z)(q).getInstance().getLogger(r),Ie(),c=u.streamInfo,r}je.__dashjs_factory_name="ScheduleController";const f=h.Z.getClassFactory(je);var o=C(7387);function v(u){var r,c,y,A,T,m,R=(u=u||{}).eventBus,G=u.events,V=u.abrController,Y=u.dashMetrics,N=u.playbackController,H=u.timelineConverter,q=u.type,ge=u.streamInfo,ne=u.dashConstants,ue=u.segmentsController,fe=u.isDynamic,x=u.adapter;function re(){return q}function ee(){return y}function ae(){return m}function p(){c=null,y=!0,A=[],T=null}function L(ie){return new Promise(function(M,B){var me=ie.hasInitialization(),Te=ie.hasSegments(),Ie=[];Ie.push(ue.updateInitData(ie,me)),Ie.push(ue.updateSegmentData(ie,Te)),Promise.all(Ie).then(function(Oe){var Ee;Oe[0]&&!Oe[0].error&&(ie=function(Pe,ct){return ct&&!ct.error&&ct.representation?ct.representation:Pe}(ie,Oe[0])),Oe[1]&&!Oe[1].error&&(ie=function(Pe,ct){if(ct&&!ct.error){var $e,nt,Tt,Dt,_e=ct.segments,le=[],Me=0;for($e=0,nt=_e?_e.length:0;$e<nt;$e++)Tt=_e[$e],(Dt=(0,o.TJ)(H,fe,Pe,Tt.startTime,Tt.duration,Tt.timescale,Tt.media,Tt.mediaRange,Me))&&(le.push(Dt),Dt=null,Me++);return le.length>0&&(Pe.segments=le),Pe}}(ie,Oe[1])),(Ee=ie).mediaFinishedInformation=ue.getMediaFinishedInformation(Ee),function(Pe){if(ee()){var ct,$e,nt=Y.getCurrentManifestUpdate(),Tt=!1;if(nt){for(var Dt=0;Dt<nt.representationInfo.length;Dt++)if((ct=nt.representationInfo[Dt]).index===Pe.index&&ct.mediaType===re()){Tt=!0;break}Tt||Y.addManifestUpdateRepresentationInfo(Pe,re())}if(function(){for(var le=0,Me=A.length;le<Me;le++){var ye=A[le].segmentInfoType;if(!A[le].hasInitialization()||(ye===ne.SEGMENT_BASE||ye===ne.BASE_URL)&&!A[le].segments)return!1}return!0}()){V.setPlaybackQuality(q,ge,($e=m,A.indexOf($e)));var _e=Y.getCurrentDVRInfo(q);_e&&Y.updateManifestUpdateInfo({latency:_e.range.end-N.getTime()}),Y.getCurrentRepresentationSwitch(ae().adaptation.type)||Z(),w()}}}(ie),M()}).catch(function(Oe){B(Oe)})})}function Z(){(function(){if(!(V&&Y&&N&&H))throw new Error(e.Z.MISSING_CONFIG_ERROR)})();var ie=new Date,M=ae(),B=1e3*N.getTime();M&&Y.addRepresentationSwitch(M.adaptation.type,ie,B,M.id),R.trigger(n.Z.REPRESENTATION_SWITCH,{mediaType:q,streamId:ge.id,currentRepresentation:M,numberOfRepresentations:A.length},{streamId:ge.id,mediaType:q})}function O(ie){return ie==null||ie>=A.length?null:A[ie]}function w(ie){y=!1,R.trigger(G.DATA_UPDATE_COMPLETED,{data:c,currentRepresentation:m,error:ie},{streamId:ge.id,mediaType:q})}function z(ie){m=ie,T=x.convertRepresentationToRepresentationInfo(m)}function Q(ie){if(ie.newDuration){var M=ae();M&&M.adaptation.period&&(M.adaptation.period.duration=ie.newDuration)}}return r={getStreamId:function(){return ge.id},getType:re,getData:function(){return c},isUpdating:ee,updateData:function(ie,M,B,me,Te){return new Promise(function(Ie,Oe){if(y=!0,A=M,c=ie,z(O(Te)),B!==e.Z.VIDEO&&B!==e.Z.AUDIO&&(B!==e.Z.TEXT||!me))return w(),void Ie();for(var Ee=[],Pe=0,ct=A.length;Pe<ct;Pe++){var $e=A[Pe];Ee.push(L($e))}Promise.all(Ee).then(function(){z(O(Te)),Ie()}).catch(function(nt){Oe(nt)})})},getCurrentRepresentation:ae,getCurrentRepresentationInfo:function(){return T},getRepresentationForQuality:O,prepareQualityChange:function(ie){z(O(ie)),Z()},reset:function(){R.off(n.Z.MANIFEST_VALIDITY_CHANGED,Q,r),p()}},p(),R.on(n.Z.MANIFEST_VALIDITY_CHANGED,Q,r),r}v.__dashjs_factory_name="RepresentationController";const E=h.Z.getClassFactory(v);var X=C(3106),K=C(9326),he=C(7473),Ce=C(2594);function De(u,r){if(!(u instanceof r))throw new TypeError("Cannot call a class as a function")}var ve=function u(){De(this,u),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};ve.INITIAL_PLAYOUT_START_REASON="initial_playout",ve.SEEK_START_REASON="seek",ve.RESUME_FROM_PAUSE_START_REASON="resume",ve.METRICS_COLLECTION_START_REASON="metrics_collection_start";var Le=function u(){De(this,u),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};Le.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",Le.REBUFFERING_REASON="rebuffering",Le.USER_REQUEST_STOP_REASON="user_request",Le.END_OF_PERIOD_STOP_REASON="end_of_period",Le.END_OF_CONTENT_STOP_REASON="end_of_content",Le.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",Le.FAILURE_STOP_REASON="failure";var Ze=C(7802);function Je(){return{ntpToUTC:function(u){var r=new Date(Date.UTC(1900,0,1,0,0,0));return new Date(r.getTime()+u).getTime()}}}Je.__dashjs_factory_name="TimeUtils";const ht=h.Z.getSingletonFactory(Je);function st(u){u=u||{};var r,c,y,A,T,m,R,G,V,Y,N,H,q,ge,ne=this.context,ue=(0,g.Z)(ne).getInstance(),fe=u.streamInfo,x=u.type,re=u.errHandler,ee=u.mimeType,ae=u.timelineConverter,p=u.adapter,L=u.manifestModel,Z=u.mediaPlayerModel,O=u.fragmentModel,w=u.abrController,z=u.playbackController,Q=u.mediaController,ie=u.textController,M=u.dashMetrics,B=u.settings,me=u.boxParser,Te=u.segmentBlacklistController;function Ie(){return fe.id}function Oe(){return x}function Ee(){return p.getIsTextTrack(G.getData())}function Pe(){T=[],A=null,q=0,V=!1,Y=!1,ge=null}function ct(Ke){return!isNaN(Ke)&&!isNaN(fe.duration)&&isFinite(fe.duration)&&Ke>=fe.start+fe.duration}function $e(Ke){var yt=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(Ke.sender){if(z.getIsManifestUpdateInProgress())le();else if((!Ee()||ie.isTextEnabled())&&m&&Ke.representationId&&!m.appendInitSegmentFromCache(Ke.representationId)){var Ye=G.getCurrentRepresentation();if(Ye.range===0)return void nt();var Re=N?N.getInitRequest(A,Ye):null;Re?O.executeRequest(Re):yt&&(R.setInitSegmentRequired(!0),le())}}}function nt(Ke){var yt=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(z.getIsManifestUpdateInProgress()||m.getIsPruningInProgress())le();else{var Ye=_e();Ye?(V=!1,Tt(Ye)):Dt(yt)}}function Tt(Ke){isNaN(Ke.startTime+Ke.duration)||(q=Ke.startTime+Ke.duration),Ke.delayLoadingTime=new Date().getTime()+R.getTimeToLoadDelay(),R.setTimeToLoadDelay(0),function(yt){var Ye=yt.url;return yt.range&&(Ye=Ye.concat("_",yt.range)),Te.contains(Ye)}(Ke)?(c.warn("Fragment request url ".concat(Ke.url," for stream id ").concat(fe.id," and media type ").concat(x," is on the ignore list and will be skipped")),le()):(c.debug("Next fragment request url for stream id ".concat(fe.id," and media type ").concat(x," is ").concat(Ke.url)),O.executeRequest(Ke))}function Dt(Ke){var yt,Ye=G.getCurrentRepresentation();if(!B.get().streaming.gaps.enableSeekFix||!V&&z.getTime()!==0||(y?y&&Ye.segmentInfoType===t.Z.SEGMENT_TIMELINE&&(yt=N.getValidTimeAheadOfTargetTime(q,A,Ye,B.get().streaming.gaps.threshold)):yt=N.getValidTimeAheadOfTargetTime(q,A,Ye,B.get().streaming.gaps.threshold),isNaN(yt)||yt===q)){if(N.isLastSegmentRequested(Ye,q)){var Re=N.getCurrentIndex();return c.debug("Segment requesting for stream ".concat(fe.id," has finished")),ue.trigger(i.Z.STREAM_REQUESTING_COMPLETED,{segmentIndex:Re},{streamId:fe.id,mediaType:x}),m.segmentRequestingCompleted(Re),void R.clearScheduleTimer()}Ke&&le()}else z.isSeeking()||z.getTime()===0?(c.warn("Adjusting playback time ".concat(yt," because of gap in the manifest. Seeking by ").concat(yt-q)),z.seek(yt,!1,!1)):(c.warn("Adjusting buffering time ".concat(yt," because of gap in the manifest. Adjusting time by ").concat(yt-q)),Zt(yt),Ke&&le())}function _e(){var Ke,yt=en();if(isNaN(q)||Oe()===e.Z.TEXT&&!ie.isTextEnabled())return null;if(N){var Ye=G&&yt?G.getRepresentationForQuality(yt.quality):null;Ke=V?N.getSegmentRequestForTime(A,Ye,q):N.getNextSegmentRequest(A,Ye)}return Ke}function le(){R.startScheduleTimer(z.getLowLatencyModeEnabled()?B.get().streaming.scheduling.lowLatencyTimeout:B.get().streaming.scheduling.defaultTimeout)}function Me(Ke){Ke.error||m.getIsBufferingCompleted()||m.updateBufferTimestampOffset(Ke.currentRepresentation)}function ye(Ke){M.addBufferState(x,Ke.state,R.getBufferTarget()),Ke.state!==S.Z.BUFFER_EMPTY||z.isSeeking()||(c.info("Buffer is empty! Stalling!"),M.pushPlayListTraceMetrics(new Date,Le.REBUFFERING_REASON))}function xe(Ke){O.syncExecutedRequestsWithBufferedRange(m.getBuffer().getAllBufferRanges(),fe.duration),Ke.quotaExceeded&&Ke.from>z.getTime()&&Zt(Ke.from),Ke.hasEnoughSpaceToAppend&&Ke.quotaExceeded&&R.startScheduleTimer()}function Ge(Ke){if(Ke&&Ke.lastRequestAppended&&Ke.lastRequestAppended.url){var yt=Ke.lastRequestAppended.url;Ke.lastRequestAppended.range&&(yt=yt.concat("_",Ke.lastRequestAppended.range)),c.warn("Blacklisting segment with url ".concat(yt)),Te.add(yt)}}function Ve(Ke){if(c.debug("Appended bytes for ".concat(Ke.mediaType," and stream id ").concat(Ke.streamId)),Ke.segmentType===Ae.w.INIT_SEGMENT_TYPE){var yt=Ke.quality;R.setLastInitializedQuality(yt),c.info("["+x+"] lastInitializedRepresentationInfo changed to "+Ke.quality)}ge?ft(ge):R.startScheduleTimer(0)}function ft(Ke){var yt=O.getRequests({state:I.FRAGMENT_MODEL_LOADING});if(yt&&yt.length>0)return c.debug("Preparing for default quality switch: Waiting for ongoing segment request to be finished before applying switch."),void(ge=Ke);m.updateBufferTimestampOffset(Ke).then(function(){A.segmentAlignment||A.subSegmentAlignment?R.startScheduleTimer():Bt(),ge=null,Y=!1}).catch(function(){ge=null,Y=!1})}function St(Ke){c.info("onFragmentLoadingAbandoned request: "+Ke.request.url+" has been aborted"),z.isSeeking()||R.getSwitchTrack()||Y||(c.info("onFragmentLoadingAbandoned request: "+Ke.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),Ke.request&&Ke.request.isInitializationRequest()?R.setInitSegmentRequired(!0):Zt(Ke.request.startTime+Ke.request.duration/2),R.startScheduleTimer(0))}function qt(Ke){c.info("OnFragmentLoadingCompleted for stream id "+fe.id+" and media type "+x+" - Url:",Ke.request?Ke.request.url:"undefined",Ke.request.range?", Range:"+Ke.request.range:""),Ee()&&R.startScheduleTimer(0),Ke.error&&Ke.request.serviceLocation&&function(yt){c.info("Fragment loading completed with an error"),yt&&yt.request&&yt.request.type&&(yt.request.type===Ae.w.INIT_SEGMENT_TYPE?$e({representationId:yt.request.representationId,sender:{}},!1):yt.request.type===Ae.w.MEDIA_SEGMENT_TYPE&&(Zt(yt.request.startTime+yt.request.duration/2),nt({},!1)))}(Ke)}function jt(){Zt(z.getTime()),un().startScheduleTimer()}function kt(Ke){var yt=Ke.currentTrackInfo;if(yt){var Ye=T.find(function(Re){return Re.index===yt.index&&Re.lang===yt.lang});Ye&&rn(Ye).then(function(){m.setIsBufferingCompleted(!1),Zt(z.getTime()),R.setInitSegmentRequired(!0),R.startScheduleTimer()})}}function Ht(Ke){Zt(Ke.quotaExceededTime),R.clearScheduleTimer()}function Kt(){return m?m.getBuffer():null}function rn(Ke){Ke===A||Ke&&A&&Ke.type!==A.type||(A=Ke);var yt=p.getRealAdaptation(fe,A),Ye=p.getVoRepresentations(A);if(G){var Re,se=G.getData(),Ue=w.getMaxAllowedIndexFor(x,fe.id),it=w.getMinAllowedIndexFor(x,fe.id),Rt=null;return se!==null&&se.id===yt.id||x===e.Z.TEXT?Re=w.getQualityFor(x,fe.id):(Rt=w.getThroughputHistory().getAverageThroughput(x,y)||w.getInitialBitrateFor(x,fe.id),Re=w.getQualityForBitrate(A,Rt,fe.id)),it!==void 0&&Re<it&&(Re=it),Re>Ue&&(Re=Ue),G.updateData(yt,Ye,x,A.isFragmented,Re)}return Promise.resolve()}function un(){return R}function en(Ke){var yt;return Ke!==void 0?((0,X.SE)(Ke),yt=G?G.getRepresentationForQuality(Ke):null):yt=G?G.getCurrentRepresentation():null,p.convertRepresentationToRepresentationInfo(yt)}function ln(){return!!m&&m.getIsBufferingCompleted()}function an(Ke){if(B.get().streaming.enableManifestTimescaleMismatchFix){var yt=Ke.chunk,Ye=yt.bytes,Re=en(yt.quality),se=G&&Re?G.getRepresentationForQuality(Re.quality):null;Re&&se&&(se.timescale=me.getMediaTimescaleFromMoov(Ye))}}function cn(Ke){var yt=Ke.chunk,Ye=yt.bytes,Re=yt.quality,se=en(Re),Ue=G&&se?G.getRepresentationForQuality(se.quality):null;if(se&&Ue){var it;if(B.get().streaming.parseInbandPrft&&Ke.request.type===Ae.w.MEDIA_SEGMENT_TYPE){var Rt=function(Sn,$n){var Hn=Sn.getBoxes("prft"),gr=[];return Hn.forEach(function(Dr){gr.push(function(lr,hr){var ir="unknown";switch(lr.flags){case 0:ir=t.Z.PRODUCER_REFERENCE_TIME_TYPE.ENCODER;break;case 16:ir=t.Z.PRODUCER_REFERENCE_TIME_TYPE.APPLICATION;break;case 24:ir=t.Z.PRODUCER_REFERENCE_TIME_TYPE.CAPTURED}var mr=1e3*lr.ntp_timestamp_sec+lr.ntp_timestamp_frac/Math.pow(2,32)*1e3;return{type:ir,ntpTimestamp:mr=ht(ne).getInstance().ntpToUTC(mr),mediaTime:lr.media_time/hr}}(Dr,$n))}),gr}(it=it||me.parse(Ye),Ue.timescale);Rt&&Rt.length&&ue.trigger(n.Z.INBAND_PRFT,{data:Rt},{streamId:fe.id,mediaType:x})}var Lt=p.getEventsFor(se.mediaInfo,null,fe),nn=p.getEventsFor(se,Ue,fe);if(Lt&&Lt.length>0||nn&&nn.length>0){var In=O.getRequests({state:I.FRAGMENT_MODEL_EXECUTED,quality:Re,index:yt.index})[0],Xn=function(Sn,$n,Hn,gr){try{for(var Dr={},lr=[],hr=Hn.concat(gr),ir=0,mr=hr.length;ir<mr;ir++)Dr[hr[ir].schemeIdUri+"/"+hr[ir].value]=hr[ir];var br=Sn.getBoxes("emsg");if(!br||br.length===0)return lr;for(var Ar=Sn.getBox("sidx"),Ir=!Ar||isNaN(Ar.earliest_presentation_time)||isNaN(Ar.timescale)?$n&&!isNaN($n.mediaStartTime)?$n.mediaStartTime:0:Ar.earliest_presentation_time/Ar.timescale,Xr=Math.max(Ir,0),Ai=G.getCurrentRepresentation(),Fr=0,kr=br.length;Fr<kr;Fr++){var Jr=p.getEvent(br[Fr],Dr,Xr,Ai);Jr&&lr.push(Jr)}return lr}catch{return[]}}(it=it||me.parse(Ye),In,Lt,nn);ue.trigger(i.Z.INBAND_EVENTS,{events:Xn},{streamId:fe.id})}}}function gt(){var Ke=z.getTime();B.get().streaming.buffer.flushBufferAtTrackSwitch&&z.seek(Ke+.001,!1,!0),Zt(Ke),m.setSeekTarget(Ke),R.startScheduleTimer()}function Bt(){var Ke=z.getTime(),yt=m.getContinuousBufferTimeForTargetTime(Ke);Zt(isNaN(yt)?Ke:yt),R.startScheduleTimer()}function Gt(Ke){Ke&&!isNaN(Ke.time)&&(Zt(Ke.time),m.setSeekTarget(Ke.time))}function Zt(Ke){q=Ke,V=!0}return r={initialize:function(Ke,yt,Ye){H=(0,Ze.Z)(ne).create({events:i.Z,eventBus:ue,streamInfo:fe,timelineConverter:ae,dashConstants:t.Z,segmentBaseController:u.segmentBaseController,type:x}),N=(0,K.Z)(ne).create({streamInfo:fe,type:x,timelineConverter:ae,dashMetrics:M,mediaPlayerModel:Z,baseURLController:u.baseURLController,errHandler:re,segmentsController:H,settings:B,boxParser:me,events:i.Z,eventBus:ue,errors:te,debug:(0,_.Z)(ne).getInstance(),requestModifier:(0,he.Z)(ne).getInstance(),dashConstants:t.Z,constants:e.Z,urlUtils:(0,Ce.Z)(ne).getInstance()}),y=fe.manifestInfo.isDynamic,N.initialize(y),w.registerStreamType(x,r),G=E(ne).create({streamInfo:fe,type:x,abrController:w,dashMetrics:M,playbackController:z,timelineConverter:ae,dashConstants:t.Z,events:i.Z,eventBus:ue,errors:te,isDynamic:y,adapter:p,segmentsController:H}),m=function(Re,se){return Re?Re!==e.Z.TEXT||se?Fe(ne).create({streamInfo:fe,type:Re,mediaPlayerModel:Z,manifestModel:L,fragmentModel:O,errHandler:re,mediaController:Q,representationController:G,adapter:p,textController:ie,abrController:w,playbackController:z,settings:B}):de(ne).create({streamInfo:fe,type:Re,mimeType:ee,fragmentModel:O,textController:ie,errHandler:re,settings:B}):(re.error(new k.Z(te.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,te.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null)}(x,Ye),m&&m.initialize(Ke),(R=f(ne).create({streamInfo:fe,type:x,mimeType:ee,adapter:p,dashMetrics:M,mediaPlayerModel:Z,fragmentModel:O,abrController:w,playbackController:z,textController:ie,mediaController:Q,bufferController:m,representationController:G,settings:B})).initialize(yt),q=0,V=!1},getStreamId:Ie,getType:Oe,isUpdating:function(){return!!G&&G.isUpdating()},getBufferController:function(){return m},dischargePreBuffer:function(){m.dischargePreBuffer()},getFragmentModel:function(){return O},getScheduleController:un,getRepresentationController:function(){return G},getRepresentationInfo:en,getBufferLevel:function(){return m?m.getBufferLevel():0},isBufferingCompleted:ln,createBufferSinks:function(Ke){var yt=Kt();return yt?Promise.resolve(yt):m?m.createBufferSink(A,Ke):Promise.resolve(null)},updateStreamInfo:function(Ke){return fe=Ke,ln()?Promise.resolve():m.updateAppendWindow()},getStreamInfo:function(){return fe},selectMediaInfo:rn,clearMediaInfoArray:function(){T=[]},addMediaInfo:function(Ke){T.indexOf(Ke)===-1&&T.push(Ke)},prepareTrackSwitch:function(){return new Promise(function(Ke){c.debug("Preparing track switch for type ".concat(x));var yt=x===e.Z.TEXT||B.get().streaming.trackSwitchMode[x]===e.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&z.getTimeToStreamEnd(fe)>B.get().streaming.buffer.stallThreshold;if(m.getIsBufferingCompleted()&&!yt)return m.prepareForNonReplacementTrackSwitch(A.codec).then(function(){ue.trigger(i.Z.BUFFERING_COMPLETED,{},{streamId:fe.id,mediaType:x})}).catch(function(){ue.trigger(i.Z.BUFFERING_COMPLETED,{},{streamId:fe.id,mediaType:x})}),void Ke();R.clearScheduleTimer(),R.setSwitchTrack(!0),yt?(ue.trigger(i.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:x,streamId:fe.id},{mediaType:x,streamId:fe.id}),O.abortRequests(),m.prepareForReplacementTrackSwitch(A.codec).then(function(){var Ye=en();return m.updateBufferTimestampOffset(Ye)}).then(function(){gt(),Ke()}).catch(function(){gt(),Ke()})):m.prepareForNonReplacementTrackSwitch(A.codec).then(function(){Bt(),Ke()}).catch(function(){Bt(),Ke()})})},prepareQualityChange:function(Ke){ge&&c.warning("Canceling queued representation switch to ".concat(ge.quality," for ").concat(x)),c.debug("Preparing quality switch for type ".concat(x));var yt=Ke.newQuality;Y=!0,R.clearScheduleTimer(),G.prepareQualityChange(yt);var Ye=en(yt);Ke.reason&&Ke.reason.forceReplace?function(Re){O.abortRequests(),ue.trigger(i.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:x,streamId:fe.id},{mediaType:x,streamId:fe.id}),m.prepareForForceReplacementQualitySwitch(Re).then(function(){gt(),Y=!1}).catch(function(){gt(),Y=!1})}(Ye):B.get().streaming.buffer.fastSwitchEnabled?function(Re){var se=z.getTime(),Ue=1.5*(isNaN(Re.fragmentDuration)?1:Re.fragmentDuration),it=O.getRequests({state:I.FRAGMENT_MODEL_EXECUTED,time:se+Ue,threshold:0})[0];if(it&&!Ee()){var Rt=m.getBufferLevel(),Lt=w.getAbandonmentStateFor(fe.id,x);it.quality<Re.quality&&Rt>=Ue&&Lt!==S.Z.ABANDON_LOAD?m.updateBufferTimestampOffset(Re).then(function(){O.abortRequests(),Zt(se+Ue),R.setCheckPlaybackQuality(!1),R.startScheduleTimer(),Y=!1}).catch(function(){Y=!1}):ft(Re)}else R.startScheduleTimer(),Y=!1}(Ye):ft(Ye),M.pushPlayListTraceMetrics(new Date,Le.REPRESENTATION_SWITCH_STOP_REASON),M.createPlaylistTraceMetrics(Ye.id,1e3*z.getTime(),z.getPlaybackRate())},getMediaInfo:function(){return A},getMediaSource:function(){return m.getMediaSource()},setMediaSource:function(Ke){return m.setMediaSource(Ke,A)},getBuffer:Kt,setExplicitBufferingTime:Zt,finalisePlayList:function(Ke,yt){M.pushPlayListTraceMetrics(Ke,yt)},probeNextRequest:function(){var Ke=en(),yt=G&&Ke?G.getRepresentationForQuality(Ke.quality):null;return N.getNextSegmentRequestIdempotent(A,yt)},prepareInnerPeriodPlaybackSeeking:function(Ke){return new Promise(function(yt){if(m.hasBufferAtTime(Ke.seekTime))return m.pruneBuffer(),ct(m.getContinuousBufferTimeForTargetTime(Ke.seekTime))&&m.setIsBufferingCompleted(!0),void yt();R.clearScheduleTimer(),O.abortRequests(),m.prepareForPlaybackSeek().then(function(){var Ye=m.getAllRangesWithSafetyFactor(Ke.seekTime);return m.clearBuffers(Ye)}).then(function(){var Ye=m.getContinuousBufferTimeForTargetTime(Ke.seekTime);if(ct(Ye))m.setIsBufferingCompleted(!0),yt();else{var Re=isNaN(Ye)?Ke.seekTime:Ye;Zt(Re),m.setSeekTarget(Re);var se=[];se.push(m.updateAppendWindow());var Ue=en();se.push(m.updateBufferTimestampOffset(Ue)),Promise.all(se).then(function(){R.setInitSegmentRequired(!0),R.setCheckPlaybackQuality(!1),R.startScheduleTimer(),yt()})}}).catch(function(Ye){c.error(Ye)})})},prepareOuterPeriodPlaybackSeeking:function(){return new Promise(function(Ke,yt){try{R.clearScheduleTimer(),O.abortRequests(),m.prepareForPlaybackSeek().then(function(){return m.pruneAllSafely()}).then(function(){Ke()})}catch(Ye){yt(Ye)}})},reset:function(Ke,yt){N&&N.reset(),m&&(m.reset(Ke,yt),m=null),R&&(R.reset(),R=null),G&&(G.reset(),G=null),H&&(H=null),w&&w.unRegisterStreamType(Ie(),x),ue.off(i.Z.DATA_UPDATE_COMPLETED,Me,r),ue.off(i.Z.INIT_FRAGMENT_NEEDED,$e,r),ue.off(i.Z.MEDIA_FRAGMENT_NEEDED,nt,r),ue.off(i.Z.INIT_FRAGMENT_LOADED,an,r),ue.off(i.Z.MEDIA_FRAGMENT_LOADED,cn,r),ue.off(i.Z.BUFFER_LEVEL_STATE_CHANGED,ye,r),ue.off(i.Z.BUFFER_CLEARED,xe,r),ue.off(i.Z.SEEK_TARGET,Gt,r),ue.off(i.Z.FRAGMENT_LOADING_ABANDONED,St,r),ue.off(i.Z.FRAGMENT_LOADING_COMPLETED,qt,r),ue.off(i.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,jt,r),ue.off(i.Z.SET_NON_FRAGMENTED_TEXT,kt,r),ue.off(i.Z.QUOTA_EXCEEDED,Ht,r),ue.off(i.Z.SOURCE_BUFFER_ERROR,Ge,r),ue.off(i.Z.BYTES_APPENDED_END_FRAGMENT,Ve,r),Pe(),x=null,fe=null}},c=(0,_.Z)(ne).getInstance().getLogger(r),Pe(),ue.on(i.Z.DATA_UPDATE_COMPLETED,Me,r,{priority:g.Z.EVENT_PRIORITY_HIGH}),ue.on(i.Z.INIT_FRAGMENT_NEEDED,$e,r),ue.on(i.Z.MEDIA_FRAGMENT_NEEDED,nt,r),ue.on(i.Z.INIT_FRAGMENT_LOADED,an,r),ue.on(i.Z.MEDIA_FRAGMENT_LOADED,cn,r),ue.on(i.Z.BUFFER_LEVEL_STATE_CHANGED,ye,r),ue.on(i.Z.BUFFER_CLEARED,xe,r),ue.on(i.Z.SEEK_TARGET,Gt,r),ue.on(i.Z.FRAGMENT_LOADING_ABANDONED,St,r),ue.on(i.Z.FRAGMENT_LOADING_COMPLETED,qt,r),ue.on(i.Z.QUOTA_EXCEEDED,Ht,r),ue.on(i.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,jt,r),ue.on(i.Z.SET_NON_FRAGMENTED_TEXT,kt,r),ue.on(i.Z.SOURCE_BUFFER_ERROR,Ge,r),ue.on(i.Z.BYTES_APPENDED_END_FRAGMENT,Ve,r),r}st.__dashjs_factory_name="StreamProcessor";const wt=h.Z.getClassFactory(st),Mt=function u(){(function(r,c){if(!(r instanceof c))throw new TypeError("Cannot call a class as a function")})(this,u),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null};var xt=C(9032);function mn(u,r){if(u){if(typeof u=="string")return pn(u,r);var c=Object.prototype.toString.call(u).slice(8,-1);return c==="Object"&&u.constructor&&(c=u.constructor.name),c==="Map"||c==="Set"?Array.from(u):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?pn(u,r):void 0}}function pn(u,r){(r==null||r>u.length)&&(r=u.length);for(var c=0,y=new Array(r);c<r;c++)y[c]=u[c];return y}function hn(u){u=u||{};var r,c,y=this.context,A=u.requestModifier,T=u.lowLatencyThroughputModel,m=u.boxParser,R=(0,ot.Z)(y).getInstance();function G(N){var H,q=new Date,ge=N.request,ne=new Headers;if(ge.range&&ne.append("Range","bytes="+ge.range),N.headers)for(var ue in N.headers){var fe=N.headers[ue];fe&&ne.append(ue,fe)}ge.requestStartDate||(ge.requestStartDate=q),A&&A.modifyRequestHeader&&A.modifyRequestHeader({setRequestHeader:function(p,L){ne.append(p,L)}},{url:N.url}),typeof window.AbortController=="function"&&(H=new AbortController,N.abortController=H,H.signal.onabort=N.onabort);var x={method:N.method,headers:ne,credentials:N.withCredentials?"include":void 0,signal:H?H.signal:void 0},re=R.get().streaming.abr.fetchThroughputCalculationMode,ee=Date.now(),ae=0;new Promise(function(p){if(re===e.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&T&&(ae=T.getThroughputCapacityDelayMS(ge,1e3*c.getCurrentBufferLevel(ge.mediaType))))return setTimeout(p,ae);p()}).then(function(){var p=Date.now();fetch(N.url,x).then(function(L){N.response||(N.response={}),N.response.status=L.status,N.response.statusText=L.statusText,N.response.responseURL=L.url,L.ok||N.onerror();var Z,O="",w=function(ye,xe){var Ge;if(typeof Symbol>"u"||ye[Symbol.iterator]==null){if(Array.isArray(ye)||(Ge=mn(ye))){Ge&&(ye=Ge);var Ve=0,ft=function(){};return{s:ft,n:function(){return Ve>=ye.length?{done:!0}:{done:!1,value:ye[Ve++]}},e:function(kt){throw kt},f:ft}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var St,qt=!0,jt=!1;return{s:function(){Ge=ye[Symbol.iterator]()},n:function(){var kt=Ge.next();return qt=kt.done,kt},e:function(kt){jt=!0,St=kt},f:function(){try{qt||Ge.return==null||Ge.return()}finally{if(jt)throw St}}}}(L.headers.keys());try{for(w.s();!(Z=w.n()).done;){var z=Z.value;O+=z+": "+L.headers.get(z)+`\r
`}}catch(ye){w.e(ye)}finally{w.f()}if(N.response.responseHeaders=O,!L.body)return L.arrayBuffer().then(function(ye){N.response.response=ye;var xe={loaded:ye.byteLength,total:ye.byteLength,stream:!1};N.progress(xe),N.onload(),N.onend()});var Q,ie,M,B,me=parseInt(L.headers.get("Content-Length"),10),Te=0,Ie=!1,Oe=new Uint8Array,Ee=0;if(re===e.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&T){var Pe=p,ct=0,$e=(M=L.body.tee(),B=2,function(ye){if(Array.isArray(ye))return ye}(M)||function(ye,xe){if(typeof Symbol<"u"&&Symbol.iterator in Object(ye)){var Ge=[],Ve=!0,ft=!1,St=void 0;try{for(var qt,jt=ye[Symbol.iterator]();!(Ve=(qt=jt.next()).done)&&(Ge.push(qt.value),!xe||Ge.length!==xe);Ve=!0);}catch(kt){ft=!0,St=kt}finally{try{Ve||jt.return==null||jt.return()}finally{if(ft)throw St}}return Ge}}(M,B)||mn(M,B)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()),nt=$e[0],Tt=$e[1];Q=nt.getReader(),ie=[],Q.read().then(function ye(xe){var Ge=xe.value,Ve=xe.done;if(ct=Date.now(),Ge&&Ge.length){var ft=ct-Pe,St=Ge.length;ie.push({chunkDownloadTimeRelativeMS:ct-p,chunkDownloadDurationMS:ft,chunkBytes:St,kbps:Math.round(8*St/(ft/1e3)),bufferLevel:c.getCurrentBufferLevel(ge.mediaType)})}if(Ve){var qt=ct-p,jt=ie.reduce(function(kt,Ht){return kt+Ht.chunkBytes},0);return T.addMeasurement(ge,qt,ie,ee,ae,O),void N.progress({loaded:jt,total:jt,lengthComputable:!0,time:T.getEstimatedDownloadDurationMS(ge),stream:!0})}return Pe=Date.now(),Q.read().then(ye)}),N.reader=Tt.getReader()}else N.reader=L.body.getReader();var Dt=[],_e=[],le=[],Me=!0;V(N,function ye(xe){var Ge=xe.value;if(xe.done){if(Oe){if(re!==e.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST){var Ve=null,ft=null;re===e.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING?(Ve=function(kt,Ht){try{var Kt,rn;Kt=kt.filter(function(Bt,Gt){return Gt<kt.length-1}),rn=Ht.filter(function(Bt,Gt){return Gt<Ht.length-1});var un=[];if(Kt.length>1){for(var en=0,ln=0,an=0;an<Kt.length;an++)if(Kt[an]&&rn[an]){var cn=rn[an].ts-Kt[an].ts;if(cn>1)un.push(8*rn[an].bytes/cn),ln=0;else{ln===0&&(ln=Kt[an].ts,en=0);var gt=rn[an].ts-ln;gt>1?(en+=rn[an].bytes,un.push(8*en/gt),ln=0):en+=rn[an].bytes}}if(un.length>0)return un.reduce(function(Bt,Gt){return Bt+Gt},0)/un.length}return null}catch{return null}}(_e,le),Ve&&(ft=8*Te/Ve)):re===e.Z.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA&&(ft=Y(Dt,Te)),N.progress({loaded:Te,total:isNaN(me)?Te:me,lengthComputable:!0,time:ft,stream:!0})}N.response.response=Oe.buffer}return N.onload(),void N.onend()}if(Ge&&Ge.length>0){Oe=function(kt,Ht){if(kt.length===0)return Ht;var Kt=new Uint8Array(kt.length+Ht.length);return Kt.set(kt),Kt.set(Ht,kt.length),Kt}(Oe,Ge),Te+=Ge.length,Dt.push({ts:Date.now(),bytes:Ge.length}),re===e.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&Me&&m.findLastTopIsoBoxCompleted(["moof"],Oe,Ee).found&&(Me=!1,_e.push({ts:performance.now(),bytes:Ge.length}));var St=m.findLastTopIsoBoxCompleted(["moov","mdat"],Oe,Ee);if(St.found){var qt,jt=St.lastCompletedOffset+St.size;re!==e.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING||Me||(Me=!0,le.push({ts:performance.now(),bytes:Oe.length})),jt===Oe.length?(qt=Oe,Oe=new Uint8Array):(qt=new Uint8Array(Oe.subarray(0,jt)),Oe=Oe.subarray(jt)),N.progress({data:qt.buffer,lengthComputable:!1,noTrace:!0}),Ee=0}else Ee=St.lastCompletedOffset,Ie||(N.progress({lengthComputable:!1,noTrace:!0}),Ie=!0)}V(N,ye)})}).catch(function(L){N.onerror&&N.onerror(L)})})}function V(N,H){N.reader.read().then(H).catch(function(q){N.onerror&&N.response.status===200&&N.onerror(q)})}function Y(N,H){try{if((N=N.filter(function(ne){return ne.bytes>H/4/N.length})).length>1){var q=0,ge=(N[N.length-1].ts-N[0].ts)/N.length;return N.forEach(function(ne,ue){var fe=N[ue+1];if(fe){var x=fe.ts-ne.ts;q+=x<ge?x:0}}),q}return null}catch{return null}}return r={load:function(N){A&&A.modifyRequest?(0,he.k)(N,A).then(function(){return G(N)}):G(N)},abort:function(N){if(N.abortController)N.abortController.abort();else if(N.reader)try{N.reader.cancel(),N.onabort()}catch{}},calculateDownloadedTime:Y,setup:function(N){c=N.dashMetrics}},r}hn.__dashjs_factory_name="FetchLoader";const Mn=h.Z.getClassFactory(hn);var Dn=C(1180);function vn(u,r){for(var c=0;c<r.length;c++){var y=r[c];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(u,y.key,y)}}const kn=function(){function u(){(function(y,A){if(!(y instanceof A))throw new TypeError("Cannot call a class as a function")})(this,u),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.mimeType=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.frameRate=null}var r,c;return r=u,(c=[{key:"hasInitialization",value:function(){return this.initialization!==null||this.range!==null}},{key:"hasSegments",value:function(){return this.segmentInfoType!==t.Z.BASE_URL&&this.segmentInfoType!==t.Z.SEGMENT_BASE&&!this.indexRange}}])&&vn(r.prototype,c),u}(),Zn=function u(){(function(r,c){if(!(r instanceof c))throw new TypeError("Cannot call a class as a function")})(this,u),this.period=null,this.index=-1,this.type=null};var _n=function u(){(function(r,c){if(!(r instanceof c))throw new TypeError("Cannot call a class as a function")})(this,u),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null};_n.DEFAULT_ID="defaultId";const qn=_n,Yn=function u(){(function(r,c){if(!(r instanceof c))throw new TypeError("Cannot call a class as a function")})(this,u),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.publishTime=null,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN};var Vn=C(2610);const Kn=function u(){(function(r,c){if(!(r instanceof c))throw new TypeError("Cannot call a class as a function")})(this,u),this.type="",this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN};var nr=function u(r,c,y,A){(function(T,m){if(!(T instanceof m))throw new TypeError("Cannot call a class as a function")})(this,u),this.url=r||"",this.serviceLocation=c||r||"",this.dvb_priority=y||1,this.dvb_weight=A||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.queryParams={}};nr.DEFAULT_DVB_PRIORITY=1,nr.DEFAULT_DVB_WEIGHT=1;const er=nr,wr=function u(){(function(r,c){if(!(r instanceof c))throw new TypeError("Cannot call a class as a function")})(this,u),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0},vt=function u(){(function(r,c){if(!(r instanceof c))throw new TypeError("Cannot call a class as a function")})(this,u),this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null},mt=function u(){(function(r,c){if(!(r instanceof c))throw new TypeError("Cannot call a class as a function")})(this,u),this.defaultServiceLocation=null,this.defaultServiceLocationArray=[],this.queryBeforeStart=!1,this.serverUrl=null,this.clientRequirement=!0};function pt(u,r){for(var c=0;c<r.length;c++){var y=r[c];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(u,y.key,y)}}const qe=function(){function u(){(function(y,A){if(!(y instanceof A))throw new TypeError("Cannot call a class as a function")})(this,u),this.schemeIdUri=null,this.value=null,this.id=null}var r,c;return r=u,(c=[{key:"init",value:function(y){return y&&(this.schemeIdUri=y.schemeIdUri?y.schemeIdUri:null,this.value=y.value?y.value:null,this.id=y.id?y.id:null),this}}])&&pt(r.prototype,c),u}();var at=C(3101),ze=C.n(at);function rt(){return{areEqual:function(u,r){return ze()(u,r)}}}rt.__dashjs_factory_name="ObjectUtils";const It=h.Z.getSingletonFactory(rt);var Nt=C(7803);const Ut=function u(r,c){(function(y,A){if(!(y instanceof A))throw new TypeError("Cannot call a class as a function")})(this,u),this.url=r||"",this.serviceLocation=c||null,this.queryParams={}},Yt=function u(r,c,y){(function(A,T){if(!(A instanceof T))throw new TypeError("Cannot call a class as a function")})(this,u),this.url=r||"",this.serviceLocation=c||null,this.ttl=y||NaN,this.queryParams={}};function Ot(u,r){var c;if(typeof Symbol>"u"||u[Symbol.iterator]==null){if(Array.isArray(u)||(c=dt(u))||r&&u&&typeof u.length=="number"){c&&(u=c);var y=0,A=function(){};return{s:A,n:function(){return y>=u.length?{done:!0}:{done:!1,value:u[y++]}},e:function(G){throw G},f:A}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var T,m=!0,R=!1;return{s:function(){c=u[Symbol.iterator]()},n:function(){var G=c.next();return m=G.done,G},e:function(G){R=!0,T=G},f:function(){try{m||c.return==null||c.return()}finally{if(R)throw T}}}}function dt(u,r){if(u){if(typeof u=="string")return Ft(u,r);var c=Object.prototype.toString.call(u).slice(8,-1);return c==="Object"&&u.constructor&&(c=u.constructor.name),c==="Map"||c==="Set"?Array.from(u):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?Ft(u,r):void 0}}function Ft(u,r){(r==null||r>u.length)&&(r=u.length);for(var c=0,y=new Array(r);c<r;c++)y[c]=u[c];return y}function Pt(){var u,r,c,y,A=this.context,T=(0,Ce.Z)(A).getInstance(),m=Number.isInteger||function(p){return typeof p=="number"&&isFinite(p)&&Math.floor(p)===p};function R(p,L){if(!p)throw new Error("adaptation is not defined");if(!L)throw new Error("type is not defined");if(p.Representation_asArray&&p.Representation_asArray.length){var Z=ue(p.Representation_asArray[0]);if(Z&&Z.length>0&&Nt.Y.indexOf(Z[0].schemeIdUri)>=0)return L===e.Z.IMAGE}if(p.ContentComponent_asArray&&p.ContentComponent_asArray.length>0){if(p.ContentComponent_asArray.length>1)return L===e.Z.MUXED;if(p.ContentComponent_asArray[0].contentType===L)return!0}var O=L===e.Z.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(L);if(p.Representation_asArray&&p.Representation_asArray.length){var w=p.Representation_asArray[0].codecs;if(O.test(w))return!0}if(p.hasOwnProperty(t.Z.MIME_TYPE))return O.test(p.mimeType);if(p.Representation_asArray){for(var z,Q=0;Q<p.Representation_asArray.length;Q++)if((z=p.Representation_asArray[Q]).hasOwnProperty(t.Z.MIME_TYPE))return O.test(z.mimeType)}return!1}function G(p){if(!p)throw new Error("adaptation is not defined");if(p.hasOwnProperty(t.Z.SEGMENT_TEMPLATE)||p.hasOwnProperty(t.Z.SEGMENT_TIMELINE)||p.hasOwnProperty(t.Z.SEGMENT_LIST)||p.hasOwnProperty(t.Z.SEGMENT_BASE))return!0;if(p.Representation_asArray&&p.Representation_asArray.length>0){var L=p.Representation_asArray[0];if(L.hasOwnProperty(t.Z.SEGMENT_TEMPLATE)||L.hasOwnProperty(t.Z.SEGMENT_TIMELINE)||L.hasOwnProperty(t.Z.SEGMENT_LIST)||L.hasOwnProperty(t.Z.SEGMENT_BASE))return!0}return!1}function V(p){return R(p,e.Z.VIDEO)}function Y(p){return R(p,e.Z.TEXT)}function N(p){return R(p,e.Z.IMAGE)}function H(p){return p&&Array.isArray(p.Representation_asArray)&&p.Representation_asArray.sort(function(L,Z){return L.bandwidth-Z.bandwidth}),p}function q(p,L){return p&&p.Period_asArray&&m(L)&&p.Period_asArray[L]?p.Period_asArray[L].AdaptationSet_asArray:[]}function ge(p){return p&&p.Period_asArray?p.Period_asArray:[]}function ne(p){var L=!1;return p&&p.hasOwnProperty("type")&&(L=p.type===t.Z.DYNAMIC),L}function ue(p){return p&&p.EssentialProperty_asArray&&p.EssentialProperty_asArray.length?p.EssentialProperty_asArray.map(function(L){return{schemeIdUri:L.schemeIdUri,value:L.value}}):null}function fe(p){if(!p||!p.S_asArray)return NaN;var L=p.S_asArray[0],Z=p.S_asArray[1];return L.hasOwnProperty("d")?L.d:Z.t-L.t}function x(p,L){if(!p)throw new Error("Period cannot be null or undefined");var Z=qn.DEFAULT_ID+"_"+L;return p.hasOwnProperty(t.Z.ID)&&p.id.length>0&&p.id!=="__proto__"&&(Z=p.id),Z}function re(p,L,Z){var O,w=[];if(!p)return w;for(O=0;O<p.length;O++){var z=new wr;if(z.timescale=1,z.representation=L,!p[O].hasOwnProperty(e.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");z.schemeIdUri=p[O].schemeIdUri,p[O].hasOwnProperty(t.Z.TIMESCALE)&&(z.timescale=p[O].timescale),p[O].hasOwnProperty(t.Z.VALUE)&&(z.value=p[O].value),w.push(z),z.period=Z}return w}function ee(p){var L=[],Z=p.BaseURL_asArray||[p.baseUri],O=!1;return Z.some(function(w){if(w){var z=new er,Q=w.__text||w;return T.isRelative(Q)&&(O=!0,p.baseUri&&(Q=T.resolve(Q,p.baseUri))),z.url=Q,w.hasOwnProperty(t.Z.SERVICE_LOCATION)&&w.serviceLocation.length?z.serviceLocation=w.serviceLocation:z.serviceLocation=Q,w.hasOwnProperty(t.Z.DVB_PRIORITY)&&(z.dvb_priority=w[t.Z.DVB_PRIORITY]),w.hasOwnProperty(t.Z.DVB_WEIGHT)&&(z.dvb_weight=w[t.Z.DVB_WEIGHT]),w.hasOwnProperty(t.Z.AVAILABILITY_TIME_OFFSET)&&(z.availabilityTimeOffset=w[t.Z.AVAILABILITY_TIME_OFFSET]),w.hasOwnProperty(t.Z.AVAILABILITY_TIME_COMPLETE)&&(z.availabilityTimeComplete=w[t.Z.AVAILABILITY_TIME_COMPLETE]!=="false"),L.push(z),O}}),L}function ae(p){var L=new mt;return L.serverUrl=p.__text,p.hasOwnProperty(t.Z.DEFAULT_SERVICE_LOCATION)&&(L.defaultServiceLocation=p[t.Z.DEFAULT_SERVICE_LOCATION],L.defaultServiceLocationArray=L.defaultServiceLocation.split(" ")),p.hasOwnProperty(t.Z.QUERY_BEFORE_START)&&(L.queryBeforeStart=p[t.Z.QUERY_BEFORE_START].toLowerCase()==="true"),p.hasOwnProperty(t.Z.CLIENT_REQUIREMENT)&&(L.clientRequirement=p[t.Z.CLIENT_REQUIREMENT].toLowerCase()!=="false"),L}return u={getIsTypeOf:R,getIsText:Y,getIsFragmented:G,getProducerReferenceTimesForAdaptation:function(p){var L=p&&p.hasOwnProperty(t.Z.PRODUCERREFERENCETIME_ASARRAY)?p[t.Z.PRODUCERREFERENCETIME_ASARRAY]:[];(p&&p.hasOwnProperty(t.Z.REPRESENTATION_ASARRAY)?p[t.Z.REPRESENTATION_ASARRAY]:[]).forEach(function(O){var w;O.hasOwnProperty(t.Z.PRODUCERREFERENCETIME_ASARRAY)&&L.push.apply(L,function(z){if(Array.isArray(z))return Ft(z)}(w=O[t.Z.PRODUCERREFERENCETIME_ASARRAY])||function(z){if(typeof Symbol<"u"&&Symbol.iterator in Object(z))return Array.from(z)}(w)||dt(w)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}())});var Z=[];return L.forEach(function(O){var w=new vt;O.hasOwnProperty(t.Z.ID)&&(w[t.Z.ID]=O[t.Z.ID],O.hasOwnProperty(t.Z.WALL_CLOCK_TIME)&&(w[t.Z.WALL_CLOCK_TIME]=O[t.Z.WALL_CLOCK_TIME],O.hasOwnProperty(t.Z.PRESENTATION_TIME)&&(w[t.Z.PRESENTATION_TIME]=O[t.Z.PRESENTATION_TIME],O.hasOwnProperty(t.Z.INBAND)&&(w[t.Z.INBAND]=O[t.Z.INBAND]!=="false"),O.hasOwnProperty(t.Z.TYPE)&&(w[t.Z.TYPE]=O[t.Z.TYPE]),Z.push(w))))}),Z},getLanguageForAdaptation:function(p){var L="";return p&&p.hasOwnProperty(t.Z.LANG)&&(L=p.lang),L},getViewpointForAdaptation:function(p){return p&&p.hasOwnProperty(t.Z.VIEWPOINT_ASARRAY)&&p[t.Z.VIEWPOINT_ASARRAY].length?p[t.Z.VIEWPOINT_ASARRAY].map(function(L){return new qe().init(L)}):[]},getRolesForAdaptation:function(p){return p&&p.hasOwnProperty(t.Z.ROLE_ASARRAY)&&p[t.Z.ROLE_ASARRAY].length?p[t.Z.ROLE_ASARRAY].map(function(L){return new qe().init(L)}):[]},getAccessibilityForAdaptation:function(p){return p&&p.hasOwnProperty(t.Z.ACCESSIBILITY_ASARRAY)&&p[t.Z.ACCESSIBILITY_ASARRAY].length?p[t.Z.ACCESSIBILITY_ASARRAY].map(function(L){return new qe().init(L)}):[]},getAudioChannelConfigurationForAdaptation:function(p){return p&&p.hasOwnProperty(t.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&p[t.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?p[t.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(L){return new qe().init(L)}):[]},getAudioChannelConfigurationForRepresentation:function(p){return p&&p.hasOwnProperty(t.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&p[t.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?p[t.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(L){return new qe().init(L)}):[]},getAdaptationForIndex:function(p,L,Z){var O=q(L,Z);return O.length>0&&m(p)?O[p]:null},getIndexForAdaptation:function(p,L,Z){if(!p)return-1;for(var O=q(L,Z),w=0;w<O.length;w++)if(It(A).getInstance().areEqual(O[w],p))return w;return-1},getAdaptationForId:function(p,L,Z){var O,w,z=q(L,Z);for(O=0,w=z.length;O<w;O++)if(z[O].hasOwnProperty(t.Z.ID)&&z[O].id===p)return z[O];return null},getAdaptationsForType:function(p,L,Z){var O,w,z=q(p,L),Q=[];for(O=0,w=z.length;O<w;O++)R(z[O],Z)&&Q.push(H(z[O]));return Q},getRealPeriods:ge,getRealPeriodForIndex:function(p,L){var Z=ge(L);return Z.length>0&&m(p)?Z[p]:null},getCodec:function(p,L,Z){var O=null;if(p&&p.Representation_asArray&&p.Representation_asArray.length>0){var w=m(L)&&L>=0&&L<p.Representation_asArray.length?p.Representation_asArray[L]:p.Representation_asArray[0];w&&(O=w.mimeType+';codecs="'+w.codecs+'"',Z&&w.width!==void 0&&(O+=';width="'+w.width+'";height="'+w.height+'"'))}return O&&(O=O.replace(/\sprofiles=[^;]*/g,"")),O},getSelectionPriority:function(p){try{var L=p&&p.selectionPriority!==void 0?parseInt(p.selectionPriority):1;return isNaN(L)?1:L}catch{return 1}},getMimeType:function(p){return p&&p.Representation_asArray&&p.Representation_asArray.length>0?p.Representation_asArray[0].mimeType:null},getKID:function(p){return p&&p.hasOwnProperty(t.Z.CENC_DEFAULT_KID)?p[t.Z.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(p){if(!p||!Array.isArray(p.Label_asArray))return[];for(var L=[],Z=0;Z<p.Label_asArray.length;Z++)L.push({lang:p.Label_asArray[Z].lang,text:p.Label_asArray[Z].__text||p.Label_asArray[Z]});return L},getContentProtectionData:function(p){return p&&p.hasOwnProperty(t.Z.CONTENTPROTECTION_ASARRAY)&&p.ContentProtection_asArray.length!==0?p.ContentProtection_asArray:null},getIsDynamic:ne,getId:function(p){return p&&p[t.Z.ID]||null},hasProfile:function(p,L){var Z=!1;return p&&p.profiles&&p.profiles.length>0&&(Z=p.profiles.indexOf(L)!==-1),Z},getDuration:function(p){return p&&p.hasOwnProperty(t.Z.MEDIA_PRESENTATION_DURATION)?p.mediaPresentationDuration:p&&p.type=="dynamic"?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(p){return p&&p.bandwidth?p.bandwidth:NaN},getManifestUpdatePeriod:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Z=NaN;return p&&p.hasOwnProperty(t.Z.MINIMUM_UPDATE_PERIOD)&&(Z=p.minimumUpdatePeriod),isNaN(Z)?Z:Math.max(Z-L,1)},getPublishTime:function(p){return p&&p.hasOwnProperty(t.Z.PUBLISH_TIME)?new Date(p[t.Z.PUBLISH_TIME]):null},getRepresentationCount:function(p){return p&&Array.isArray(p.Representation_asArray)?p.Representation_asArray.length:0},getBitrateListForAdaptation:function(p){var L=H(p);return(L&&Array.isArray(L.Representation_asArray)?L.Representation_asArray:[]).map(function(Z){return{bandwidth:Z.bandwidth,width:Z.width||0,height:Z.height||0,scanType:Z.scanType||null,id:Z.id||null}})},getRepresentationFor:function(p,L){return L&&L.Representation_asArray&&L.Representation_asArray.length>0&&m(p)?L.Representation_asArray[p]:null},getRepresentationsForAdaptation:function(p){var L,Z,O,w,z=[],Q=function(Oe){if(Oe&&Oe.period&&m(Oe.period.index)){var Ee=Oe.period.mpd.manifest.Period_asArray[Oe.period.index];if(Ee&&Ee.AdaptationSet_asArray&&m(Oe.index))return H(Ee.AdaptationSet_asArray[Oe.index])}}(p);if(Q&&Q.Representation_asArray){if(p&&p.period&&m(p.period.index)){var ie=ee(p.period.mpd.manifest);ie&&(Z=ie[0])}for(var M=0,B=Q.Representation_asArray.length;M<B;++M){var me=Q.Representation_asArray[M],Te=new kn;if(Te.index=M,Te.adaptation=p,me.hasOwnProperty(t.Z.ID)&&(Te.id=me.id),me.hasOwnProperty(t.Z.CODECS)&&(Te.codecs=me.codecs),me.hasOwnProperty(t.Z.MIME_TYPE)&&(Te.mimeType=me[t.Z.MIME_TYPE]),me.hasOwnProperty(t.Z.CODEC_PRIVATE_DATA)&&(Te.codecPrivateData=me.codecPrivateData),me.hasOwnProperty(t.Z.BANDWITH)&&(Te.bandwidth=me.bandwidth),me.hasOwnProperty(t.Z.WIDTH)&&(Te.width=me.width),me.hasOwnProperty(t.Z.HEIGHT)&&(Te.height=me.height),me.hasOwnProperty(t.Z.SCAN_TYPE)&&(Te.scanType=me.scanType),me.hasOwnProperty(t.Z.MAX_PLAYOUT_RATE)&&(Te.maxPlayoutRate=me.maxPlayoutRate),me.hasOwnProperty(t.Z.SEGMENT_BASE)?(L=me.SegmentBase,Te.segmentInfoType=t.Z.SEGMENT_BASE):me.hasOwnProperty(t.Z.SEGMENT_LIST)?(L=me.SegmentList).hasOwnProperty(t.Z.SEGMENT_TIMELINE)?Te.segmentInfoType=t.Z.SEGMENT_TIMELINE:Te.segmentInfoType=t.Z.SEGMENT_LIST:me.hasOwnProperty(t.Z.SEGMENT_TEMPLATE)?((L=me.SegmentTemplate).hasOwnProperty(t.Z.SEGMENT_TIMELINE)?Te.segmentInfoType=t.Z.SEGMENT_TIMELINE:Te.segmentInfoType=t.Z.SEGMENT_TEMPLATE,L.hasOwnProperty(t.Z.INITIALIZATION_MINUS)&&(Te.initialization=L.initialization.split("$Bandwidth$").join(me.bandwidth).split("$RepresentationID$").join(me.id))):Te.segmentInfoType=t.Z.BASE_URL,Te.essentialProperties=ue(me),L){if(L.hasOwnProperty(t.Z.INITIALIZATION)){var Ie=L.Initialization;Ie.hasOwnProperty(t.Z.SOURCE_URL)&&(Te.initialization=Ie.sourceURL),Ie.hasOwnProperty(t.Z.RANGE)&&(Te.range=Ie.range)}else Y(Q)&&G(Q)&&Q.mimeType&&Q.mimeType.indexOf("application/mp4")===-1&&(Te.range=0);L.hasOwnProperty(t.Z.TIMESCALE)&&(Te.timescale=L.timescale),L.hasOwnProperty(t.Z.DURATION)?Te.segmentDuration=L.duration/Te.timescale:me.hasOwnProperty(t.Z.SEGMENT_TEMPLATE)&&(L=me.SegmentTemplate).hasOwnProperty(t.Z.SEGMENT_TIMELINE)&&(Te.segmentDuration=fe(L.SegmentTimeline)/Te.timescale),L.hasOwnProperty(t.Z.MEDIA)&&(Te.media=L.media),L.hasOwnProperty(t.Z.START_NUMBER)&&(Te.startNumber=L.startNumber),L.hasOwnProperty(t.Z.INDEX_RANGE)&&(Te.indexRange=L.indexRange),L.hasOwnProperty(t.Z.PRESENTATION_TIME_OFFSET)&&(Te.presentationTimeOffset=L.presentationTimeOffset/Te.timescale),L.hasOwnProperty(t.Z.AVAILABILITY_TIME_OFFSET)?Te.availabilityTimeOffset=L.availabilityTimeOffset:Z&&Z.availabilityTimeOffset!==void 0&&(Te.availabilityTimeOffset=Z.availabilityTimeOffset),L.hasOwnProperty(t.Z.AVAILABILITY_TIME_COMPLETE)?Te.availabilityTimeComplete=L.availabilityTimeComplete!=="false":Z&&Z.availabilityTimeComplete!==void 0&&(Te.availabilityTimeComplete=Z.availabilityTimeComplete)}Te.MSETimeOffset=(w=(O=Te).presentationTimeOffset,O.adaptation.period.start-w),Te.path=[p.period.index,p.index,M],z.push(Te)}}return z},getAdaptationsForPeriod:function(p){var L,Z,O,w=p&&m(p.index)?p.mpd.manifest.Period_asArray[p.index]:null,z=[];if(w&&w.AdaptationSet_asArray)for(O=0;O<w.AdaptationSet_asArray.length;O++)Z=w.AdaptationSet_asArray[O],L=new Zn,Z.hasOwnProperty(t.Z.ID)&&(L.id=Z.id),L.index=O,L.period=p,R(Z,e.Z.MUXED)?L.type=e.Z.MUXED:R(Z,e.Z.AUDIO)?L.type=e.Z.AUDIO:V(Z)?L.type=e.Z.VIDEO:Y(Z)?L.type=e.Z.TEXT:N(Z)?L.type=e.Z.IMAGE:r.warn("Unknown Adaptation stream type"),z.push(L);return z},getRegularPeriods:function(p){var L,Z,O=!!p&&ne(p.manifest),w=[],z=null,Q=null,ie=null,M=null;for(Z=0,L=p&&p.manifest&&p.manifest.Period_asArray?p.manifest.Period_asArray.length:0;Z<L;Z++)(Q=p.manifest.Period_asArray[Z]).hasOwnProperty(t.Z.START)?(M=new qn).start=Q.start:z!==null&&z.hasOwnProperty(t.Z.DURATION)&&ie!==null?(M=new qn).start=parseFloat((ie.start+ie.duration).toFixed(5)):Z!==0||O||((M=new qn).start=0),ie!==null&&isNaN(ie.duration)&&(M!==null?ie.duration=parseFloat((M.start-ie.start).toFixed(5)):r.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),M!==null&&(M.id=x(Q,Z),M.index=Z,M.mpd=p,Q.hasOwnProperty(t.Z.DURATION)&&(M.duration=Q.duration),ie&&(ie.nextPeriodId=M.id),w.push(M),z=Q,ie=M),Q=null,M=null;return w.length===0||ie!==null&&isNaN(ie.duration)&&(ie.duration=parseFloat((function(B){(function(){if(!c||!c.hasOwnProperty("error"))throw new Error(e.Z.MISSING_CONFIG_ERROR)})();var me,Te=ne(B.mpd.manifest);return B.mpd.manifest.mediaPresentationDuration?me=B.mpd.manifest.mediaPresentationDuration:B.duration?me=B.duration:Te?me=Number.POSITIVE_INFINITY:c.error(new k.Z(te.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",B)),me}(ie)-ie.start).toFixed(5))),w},getMpd:function(p){var L=new Yn;return p&&(L.manifest=p,p.hasOwnProperty(t.Z.AVAILABILITY_START_TIME)?L.availabilityStartTime=new Date(p.availabilityStartTime.getTime()):p.loadedTime&&(L.availabilityStartTime=new Date(p.loadedTime.getTime())),p.hasOwnProperty(t.Z.AVAILABILITY_END_TIME)&&(L.availabilityEndTime=new Date(p.availabilityEndTime.getTime())),p.hasOwnProperty(t.Z.MINIMUM_UPDATE_PERIOD)&&(L.minimumUpdatePeriod=p.minimumUpdatePeriod),p.hasOwnProperty(t.Z.MEDIA_PRESENTATION_DURATION)&&(L.mediaPresentationDuration=p.mediaPresentationDuration),p.hasOwnProperty(t.Z.SUGGESTED_PRESENTATION_DELAY)&&(L.suggestedPresentationDelay=p.suggestedPresentationDelay),p.hasOwnProperty(t.Z.TIMESHIFT_BUFFER_DEPTH)&&(L.timeShiftBufferDepth=p.timeShiftBufferDepth),p.hasOwnProperty(t.Z.MAX_SEGMENT_DURATION)&&(L.maxSegmentDuration=p.maxSegmentDuration),p.hasOwnProperty(t.Z.PUBLISH_TIME)&&(L.publishTime=new Date(p.publishTime))),L},getEventsForPeriod:function(p){var L,Z,O=p&&p.mpd&&p.mpd.manifest?p.mpd.manifest:null,w=O?O.Period_asArray:null,z=w&&p&&m(p.index)?w[p.index].EventStream_asArray:null,Q=[];if(z)for(L=0;L<z.length;L++){var ie=new wr;if(ie.period=p,ie.timescale=1,!z[L].hasOwnProperty(e.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(ie.schemeIdUri=z[L][e.Z.SCHEME_ID_URI],z[L].hasOwnProperty(t.Z.TIMESCALE)&&(ie.timescale=z[L][t.Z.TIMESCALE]),z[L].hasOwnProperty(t.Z.VALUE)&&(ie.value=z[L][t.Z.VALUE]),z[L].hasOwnProperty(t.Z.PRESENTATION_TIME_OFFSET)&&(ie.presentationTimeOffset=z[L][t.Z.PRESENTATION_TIME_OFFSET]),Z=0;z[L].Event_asArray&&Z<z[L].Event_asArray.length;Z++){var M=z[L].Event_asArray[Z],B=new Kn;B.presentationTime=0,B.eventStream=ie,M.hasOwnProperty(t.Z.PRESENTATION_TIME)&&(B.presentationTime=M.presentationTime);var me=ie.presentationTimeOffset?ie.presentationTimeOffset/ie.timescale:0;B.calculatedPresentationTime=B.presentationTime/ie.timescale+p.start-me,M.hasOwnProperty(t.Z.DURATION)&&(B.duration=M.duration/ie.timescale),M.hasOwnProperty(t.Z.ID)?B.id=M.id:B.id=null,M.Signal&&M.Signal.Binary?B.messageData=y.decodeArray(M.Signal.Binary.toString()):B.messageData=M.messageData||M.__cdata||M.__text,Q.push(B)}}return Q},getEssentialPropertiesForRepresentation:ue,getEventStreamForAdaptationSet:function(p,L,Z){var O,w,z;return p&&p.Period_asArray&&L&&L.period&&m(L.period.index)&&(w=p.Period_asArray[L.period.index])&&w.AdaptationSet_asArray&&m(L.index)&&(z=w.AdaptationSet_asArray[L.index])&&(O=z.InbandEventStream_asArray),re(O,null,Z)},getEventStreamForRepresentation:function(p,L,Z){var O,w,z,Q;return p&&p.Period_asArray&&L&&L.adaptation&&L.adaptation.period&&m(L.adaptation.period.index)&&(w=p.Period_asArray[L.adaptation.period.index])&&w.AdaptationSet_asArray&&m(L.adaptation.index)&&(z=w.AdaptationSet_asArray[L.adaptation.index])&&z.Representation_asArray&&m(L.index)&&(Q=z.Representation_asArray[L.index])&&(O=Q.InbandEventStream_asArray),re(O,L,Z)},getUTCTimingSources:function(p){var L=ne(p),Z=!!p&&p.hasOwnProperty(t.Z.AVAILABILITY_START_TIME),O=p?p.UTCTiming_asArray:null,w=[];return(L||Z)&&O&&O.forEach(function(z){var Q=new Vn.Z;z.hasOwnProperty(e.Z.SCHEME_ID_URI)&&(Q.schemeIdUri=z.schemeIdUri,z.hasOwnProperty(t.Z.VALUE)&&(Q.value=z.value.toString(),w.push(Q)))}),w},getBaseURLsFromElement:ee,getRepresentationSortFunction:function(){return function(p,L){return p.bandwidth-L.bandwidth}},getContentSteering:function(p){if(p&&p.hasOwnProperty(t.Z.CONTENT_STEERING_AS_ARRAY))return ae(p[t.Z.CONTENT_STEERING_AS_ARRAY][0])},getLocation:function(p){return p&&p.hasOwnProperty(t.Z.LOCATION_AS_ARRAY)?p[t.Z.LOCATION_AS_ARRAY].map(function(L){var Z=L.__text||L,O=L.hasOwnProperty(t.Z.SERVICE_LOCATION)?L[t.Z.SERVICE_LOCATION]:null;return new Ut(Z,O)}):[]},getPatchLocation:function(p){return p&&p.hasOwnProperty(t.Z.PATCH_LOCATION_AS_ARRAY)?p[t.Z.PATCH_LOCATION_AS_ARRAY].map(function(L){var Z=L.__text||L,O=L.hasOwnProperty(t.Z.SERVICE_LOCATION)?L[t.Z.SERVICE_LOCATION]:null,w=L.hasOwnProperty(t.Z.TTL)?1e3*parseFloat(L[t.Z.TTL]):NaN;return new Yt(Z,O,w)}):[]},getSuggestedPresentationDelay:function(p){return p&&p.hasOwnProperty(t.Z.SUGGESTED_PRESENTATION_DELAY)?p.suggestedPresentationDelay:null},getAvailabilityStartTime:function(p){return p&&p.hasOwnProperty(t.Z.AVAILABILITY_START_TIME)&&p.availabilityStartTime!==null?p.availabilityStartTime.getTime():null},getServiceDescriptions:function(p){var L=[];if(p&&p.hasOwnProperty(t.Z.SERVICE_DESCRIPTION)){var Z,O=Ot(p.ServiceDescription_asArray);try{for(O.s();!(Z=O.n()).done;){var w=Z.value,z=null,Q=null,ie=null,M=null,B=null,me=null,Te=null;for(var Ie in w)w.hasOwnProperty(Ie)&&(Ie===t.Z.ID?z=w[Ie]:Ie===t.Z.SERVICE_DESCRIPTION_SCOPE?Q=w[Ie].schemeIdUri:Ie===t.Z.SERVICE_DESCRIPTION_LATENCY?ie={target:parseInt(w[Ie].target),max:parseInt(w[Ie].max),min:parseInt(w[Ie].min),referenceId:parseInt(w[Ie].referenceId)}:Ie===t.Z.SERVICE_DESCRIPTION_PLAYBACK_RATE?M={max:parseFloat(w[Ie].max),min:parseFloat(w[Ie].min)}:Ie===t.Z.SERVICE_DESCRIPTION_OPERATING_QUALITY?B={mediaType:w[Ie].mediaType,max:parseInt(w[Ie].max),min:parseInt(w[Ie].min),target:parseInt(w[Ie].target),type:w[Ie].type,maxQualityDifference:parseInt(w[Ie].maxQualityDifference)}:Ie===t.Z.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH?me={mediaType:w[Ie].mediaType,max:parseInt(w[Ie].max),min:parseInt(w[Ie].min),target:parseInt(w[Ie].target)}:Ie===t.Z.CONTENT_STEERING&&(Te=ae(w[Ie])));L.push({id:z,schemeIdUri:Q,latency:ie,playbackRate:M,operatingQuality:B,operatingBandwidth:me,contentSteering:Te})}}catch(Oe){O.e(Oe)}finally{O.f()}}return L},getSegmentAlignment:function(p){return!(!p||!p.hasOwnProperty(t.Z.SEGMENT_ALIGNMENT))&&p[t.Z.SEGMENT_ALIGNMENT]==="true"},getSubSegmentAlignment:function(p){return!(!p||!p.hasOwnProperty(t.Z.SUB_SEGMENT_ALIGNMENT))&&p[t.Z.SUB_SEGMENT_ALIGNMENT]==="true"},getSupplementalPropertiesForAdaptation:function(p){var L={};if(p&&p.hasOwnProperty(t.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var Z,O=Ot(p.SupplementalProperty_asArray);try{for(O.s();!(Z=O.n()).done;){var w=Z.value;w.hasOwnProperty(e.Z.SCHEME_ID_URI)&&w.hasOwnProperty(t.Z.VALUE)&&(L[w[e.Z.SCHEME_ID_URI]]=w[t.Z.VALUE])}}catch(z){O.e(z)}finally{O.f()}}return L},getSupplementalPropertiesAsArrayForAdaptation:function(p){return p&&p.hasOwnProperty(t.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&p.SupplementalProperty_asArray.length?p.SupplementalProperty_asArray.map(function(L){return new qe().init(L)}):[]},getSupplementalPropertiesForRepresentation:function(p){var L={};if(p&&p.hasOwnProperty(t.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var Z,O=Ot(p.SupplementalProperty_asArray);try{for(O.s();!(Z=O.n()).done;){var w=Z.value;w.hasOwnProperty(e.Z.SCHEME_ID_URI)&&w.hasOwnProperty(t.Z.VALUE)&&(L[w[e.Z.SCHEME_ID_URI]]=w[t.Z.VALUE])}}catch(z){O.e(z)}finally{O.f()}}return L},getSupplementalPropertiesAsArrayForRepresentation:function(p){return p&&p.hasOwnProperty(t.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&p.SupplementalProperty_asArray.length?p.SupplementalProperty_asArray.map(function(L){return new qe().init(L)}):[]},setConfig:function(p){p&&(p.errHandler&&(c=p.errHandler),p.BASE64&&(y=p.BASE64))}},r=(0,_.Z)(A).getInstance().getLogger(u),u}Pt.__dashjs_factory_name="DashManifestModel";const Xt=h.Z.getSingletonFactory(Pt);var on=C(703);function En(u,r){var c;if(typeof Symbol>"u"||u[Symbol.iterator]==null){if(Array.isArray(u)||(c=function(G,V){if(G){if(typeof G=="string")return Wt(G,V);var Y=Object.prototype.toString.call(G).slice(8,-1);return Y==="Object"&&G.constructor&&(Y=G.constructor.name),Y==="Map"||Y==="Set"?Array.from(G):Y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Y)?Wt(G,V):void 0}}(u))||r&&u&&typeof u.length=="number"){c&&(u=c);var y=0,A=function(){};return{s:A,n:function(){return y>=u.length?{done:!0}:{done:!1,value:u[y++]}},e:function(G){throw G},f:A}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var T,m=!0,R=!1;return{s:function(){c=u[Symbol.iterator]()},n:function(){var G=c.next();return m=G.done,G},e:function(G){R=!0,T=G},f:function(){try{m||c.return==null||c.return()}finally{if(R)throw T}}}}function Wt(u,r){(r==null||r>u.length)&&(r=u.length);for(var c=0,y=new Array(r);c<r;c++)y[c]=u[c];return y}function Et(){var u,r,c,y,A,T,m,R,G,V,Y=this.context,N=(0,g.Z)(Y).getInstance(),H=(0,ot.Z)(Y).getInstance();function q(){c={pr:1,nor:null,st:null,sf:null,sid:"".concat(on.Z.generateUuid()),cid:null},G={},R={},V={},ne()}function ge(){ne()}function ne(){if(T){var w=T.getStreamController();if(w&&typeof w.getActiveStream=="function"){var z=w.getActiveStream();z&&(m=z.getProcessors())}}}function ue(w,z){var Q,ie={},M=En(z);try{for(M.s();!(Q=M.n()).done;){var B=Q.value;w[B]&&(ie[B]=w[B])}}catch(me){M.e(me)}finally{M.f()}return ie}function fe(w){var z=H.get().streaming.cmcd.enabledKeys;return w.filter(function(Q){return z.includes(Q)})}function x(w){try{return w.type===Ae.w.MPD_TYPE?((Q=re()).ot="m",Q):w.type===Ae.w.MEDIA_SEGMENT_TYPE?(z=w.mediaType,V.hasOwnProperty(z)||(V[z]=!1),R.hasOwnProperty(z)||(R[z]=!1),G.hasOwnProperty(z)||(G[z]=!1),function(ie){var M,B=re(),me=function(Tt){try{var Dt=Tt.quality,_e=Tt.mediaInfo.bitrateList;return parseInt(_e[Dt].bandwidth/1e3)}catch{return null}}(ie),Te=function(Tt){try{return isNaN(Tt.duration)?NaN:Math.round(1e3*Tt.duration)}catch{return null}}(ie),Ie=function(Tt){try{return 100*parseInt(y.getThroughputHistory().getSafeAverageThroughput(Tt)/100)}catch{return null}}(ie.mediaType),Oe=function(Tt){try{var Dt=c.pr,_e=A.getCurrentBufferLevel(Tt);return isNaN(Dt)||isNaN(_e)?null:100*parseInt(_e/Dt*10)}catch{return null}}(ie.mediaType),Ee=ee(ie.mediaType),Pe=function(Tt){try{var Dt=y.getTopBitrateInfoFor(Tt);return Math.round(Dt.bitrate/1e3)}catch{return null}}(ie.mediaType),ct=c.pr,$e=function(Tt){if(m&&m.length!==0){var Dt,_e=En(m);try{for(_e.s();!(Dt=_e.n()).done;){var le=Dt.value;if(le.getType()===Tt)return le.probeNextRequest()}}catch(Me){_e.e(Me)}finally{_e.f()}}}(ie.mediaType);ie.mediaType===e.Z.VIDEO&&(M="v"),ie.mediaType===e.Z.AUDIO&&(M="a"),ie.mediaType===e.Z.TEXT&&(M=ie.mediaInfo.mimeType==="application/mp4"?"tt":"c");var nt=H.get().streaming.cmcd.rtp;return nt||(nt=function(Tt){try{var Dt=T.getPlaybackRate();Dt||(Dt=1);var _e=Tt.quality,le=Tt.mediaType,Me=Tt.mediaInfo,ye=Tt.duration;if(!Me)return NaN;var xe=ee(le);xe===0&&(xe=500);var Ge=Me.bitrateList[_e].bandwidth*ye/1e3/(xe/Dt/1e3),Ve=H.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(H.get().streaming.cmcd.rtpSafetyFactor)?H.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(Ge*Ve/100)+1)}catch{return NaN}}(ie)),isNaN(nt)||(B.rtp=nt),$e&&(ie.url!==$e.url?B.nor=encodeURIComponent(on.Z.getRelativeUrl(ie.url,$e.url)):$e.range&&(B.nrr=$e.range)),me&&(B.br=me),M&&(B.ot=M),isNaN(Te)||(B.d=Te),isNaN(Ie)||(B.mtp=Ie),isNaN(Oe)||(B.dl=Oe),isNaN(Ee)||(B.bl=Ee),isNaN(Pe)||(B.tb=Pe),isNaN(ct)||ct===1||(B.pr=ct),G[ie.mediaType]&&(B.bs=!0,G[ie.mediaType]=!1),!R[ie.mediaType]&&V[ie.mediaType]||(B.su=!0,R[ie.mediaType]=!1,V[ie.mediaType]=!0),B}(w)):w.type===Ae.w.INIT_SEGMENT_TYPE?function(){var ie=re();return ie.ot="i",ie.su=!0,ie}():w.type===Ae.w.OTHER_TYPE||w.type===Ae.w.XLINK_EXPANSION_TYPE?function(){var ie=re();return ie.ot="o",ie}():w.type===Ae.w.LICENSE?function(ie){var M=re();return M.ot="k",M}():null}catch{return null}var z,Q}function re(){var w={},z=H.get().streaming.cmcd.cid?H.get().streaming.cmcd.cid:c.cid;return w.v=1,w.sid=H.get().streaming.cmcd.sid?H.get().streaming.cmcd.sid:c.sid,w.sid="".concat(w.sid),z&&(w.cid="".concat(z)),isNaN(c.pr)||c.pr===1||c.pr===null||(w.pr=c.pr),c.st&&(w.st=c.st),c.sf&&(w.sf=c.sf),w}function ee(w){try{var z=A.getCurrentBufferLevel(w);return isNaN(z)?null:100*parseInt(10*z)}catch{return null}}function ae(w){try{c.pr=w.playbackRate}catch{}}function p(w){try{var z=u.getIsDynamic(w.data)?"l":"v",Q=w.protocol&&w.protocol==="MSS"?"s":"d";c.st="".concat(z),c.sf="".concat(Q)}catch{}}function L(w){try{w.state&&w.mediaType&&w.state===n.Z.BUFFER_EMPTY&&(G[w.mediaType]||(G[w.mediaType]=!0),R[w.mediaType]||(R[w.mediaType]=!0))}catch{}}function Z(){for(var w in G)G.hasOwnProperty(w)&&(G[w]=!0);for(var z in R)R.hasOwnProperty(z)&&(R[z]=!0)}function O(w){try{if(!w)return null;var z=Object.keys(w).sort(function(M,B){return M.localeCompare(B)}),Q=z.length,ie=z.reduce(function(M,B,me){return B==="v"&&w[B]===1||(typeof w[B]=="string"&&B!=="ot"&&B!=="sf"&&B!=="st"?M+="".concat(B,"=").concat(JSON.stringify(w[B])):M+="".concat(B,"=").concat(w[B]),me<Q-1&&(M+=",")),M},"");return(ie=ie.replace(/=true/g,"")).replace(/,\s*$/,"")}catch{return null}}return r={getQueryParameter:function(w){try{if(H.get().streaming.cmcd&&H.get().streaming.cmcd.enabled){var z=x(w),Q=function(M){try{var B=H.get().streaming.cmcd.enabledKeys;return Object.keys(M).filter(function(me){return B.includes(me)}).reduce(function(me,Te){return me[Te]=M[Te],me},{})}catch{return M}}(z),ie=O(Q);return N.trigger(Dn.Z.CMCD_DATA_GENERATED,{url:w.url,mediaType:w.mediaType,cmcdData:z,cmcdString:ie}),{key:"CMCD",value:ie}}return null}catch{return null}},getHeaderParameters:function(w){try{if(H.get().streaming.cmcd&&H.get().streaming.cmcd.enabled){var z=x(w),Q=ue(z,fe(["br","d","ot","tb"])),ie=ue(z,fe(["bl","dl","mtp","nor","nrr","su"])),M=ue(z,fe(["bs","rtp"])),B=ue(z,fe(["cid","pr","sf","sid","st","v"])),me={"CMCD-Object":O(Q),"CMCD-Request":O(ie),"CMCD-Status":O(M),"CMCD-Session":O(B)};return N.trigger(Dn.Z.CMCD_DATA_GENERATED,{url:w.url,mediaType:w.mediaType,cmcdData:z,headers:me}),me}return null}catch{return null}},setConfig:function(w){w&&(w.abrController&&(y=w.abrController),w.dashMetrics&&(A=w.dashMetrics),w.playbackController&&(T=w.playbackController))},reset:function(){N.off(n.Z.PLAYBACK_RATE_CHANGED,ae,this),N.off(n.Z.MANIFEST_LOADED,p,this),N.off(n.Z.BUFFER_LEVEL_STATE_CHANGED,L,r),N.off(n.Z.PLAYBACK_SEEKED,Z,r),q()},initialize:function(){N.on(n.Z.PLAYBACK_RATE_CHANGED,ae,r),N.on(n.Z.MANIFEST_LOADED,p,r),N.on(n.Z.BUFFER_LEVEL_STATE_CHANGED,L,r),N.on(n.Z.PLAYBACK_SEEKED,Z,r),N.on(n.Z.PERIOD_SWITCH_COMPLETED,ge,r)}},u=Xt(Y).getInstance(),q(),r}Et.__dashjs_factory_name="CmcdModel";const _t=h.Z.getSingletonFactory(Et);function Ct(u){return Ct=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ct(u)}function Qt(u,r){Qt=function(R,G){return new T(R,void 0,G)};var c=gn(RegExp),y=RegExp.prototype,A=new WeakMap;function T(R,G,V){var Y=c.call(this,R,G);return A.set(Y,V||A.get(R)),Y}function m(R,G){var V=A.get(G);return Object.keys(V).reduce(function(Y,N){return Y[N]=R[V[N]],Y},Object.create(null))}return $t(T,c),T.prototype.exec=function(R){var G=y.exec.call(this,R);return G&&(G.groups=m(G,this)),G},T.prototype[Symbol.replace]=function(R,G){if(typeof G=="string"){var V=A.get(this);return y[Symbol.replace].call(this,R,G.replace(/\$<([^>]+)>/g,function(N,H){return"$"+V[H]}))}if(typeof G=="function"){var Y=this;return y[Symbol.replace].call(this,R,function(){var N=[];return N.push.apply(N,arguments),Ct(N[N.length-1])!=="object"&&N.push(m(N,Y)),G.apply(this,N)})}return y[Symbol.replace].call(this,R,G)},Qt.apply(this,arguments)}function $t(u,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(r&&r.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),r&&Bn(u,r)}function gn(u){var r=typeof Map=="function"?new Map:void 0;return gn=function(c){if(c===null||(y=c,Function.toString.call(y).indexOf("[native code]")===-1))return c;var y;if(typeof c!="function")throw new TypeError("Super expression must either be null or a function");if(r!==void 0){if(r.has(c))return r.get(c);r.set(c,A)}function A(){return yn(c,arguments,Rn(this).constructor)}return A.prototype=Object.create(c.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),Bn(A,c)},gn(u)}function yn(u,r,c){return yn=jn()?Reflect.construct:function(y,A,T){var m=[null];m.push.apply(m,A);var R=new(Function.bind.apply(y,m));return T&&Bn(R,T.prototype),R},yn.apply(null,arguments)}function jn(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Bn(u,r){return Bn=Object.setPrototypeOf||function(c,y){return c.__proto__=y,c},Bn(u,r)}function Rn(u){return Rn=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Rn(u)}var Fn="static",Pn="dynamic",zn="cmsd-",Nr=zn+Fn,Er=zn+Pn,ar="stream",Jn=["mb","st","sf","v"],ei={video:"v",audio:"a",text:"tt",stream:ar},ti=/^[-0-9]/;function Br(){var u,r,c,y,A=this.context,T=(0,g.Z)(A).getInstance();function m(){c={},y={}}function R(q){q&&Object.keys(q).forEach(function(ge){Jn.includes(ge)||delete q[ge]})}function G(q){return!q||q.toLowerCase()!=="false"&&(ti.test(q)?parseInt(q,10):q.replace(/["]+/g,""))}function V(q){try{for(var ge={},ne=q.split(","),ue=0;ue<ne.length;ue++){var fe=ne[ue].split("="),x=fe[0],re=G(fe[1]);ge[x]=re}return ge}catch(ee){r.error("Failed to parse CMSD-Static response header value:",ee)}}function Y(q){try{for(var ge={},ne=q.split(","),ue=ne[ne.length-1].split(";"),fe=1;fe<ue.length;fe++){var x=ue[fe].split("="),re=x[0],ee=G(x[1]);ge[re]=ee}return ge}catch(ae){return r.error("Failed to parse CMSD-Dynamic response header value:",ae),[]}}function N(q){return ei[q]||"o"}function H(q,ge,ne){var ue=q===Fn?c:y,fe=ue[ge]||{},x=ue[ar]||{};return fe[ne]||x[ne]}return u={setConfig:function(){},initialize:function(){},reset:function(){m()},parseResponseHeaders:function(q,ge){for(var ne=null,ue=null,fe=q.split(`\r
`),x=fe.length-1;x>=0;x--){var re=fe[x].match(Qt(/^((?:(?!:)[\s\S])*):[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(.*)$/,{key:1,value:2}));if(re&&re.groups){var ee=re.groups.key.toLowerCase(),ae=re.groups.value;switch(ee){case Nr:ne=V(ae),T.trigger(i.Z.CMSD_STATIC_HEADER,ne);break;case Er:ue||(ue=Y(ae))}}}var p=ar;return ne&&ne.ot?p=ne.ot:ge&&(p=N(ge)),R(c[p]),R(y[p]),ne&&(c[p]=Object.assign(c[p]||{},ne)),ue&&(y[p]=Object.assign(y[p]||{},ue)),{static:ne,dynamic:ue}},getMaxBitrate:function(q){var ge=N(q);return H(Pn,ge,"mb")||-1},getEstimatedThroughput:function(q){var ge=N(q);return H(Pn,ge,"etp")||null},getResponseDelay:function(q){var ge=N(q);return H(Pn,ge,"rd")||null},getRoundTripTime:function(q){var ge=N(q);return H(Pn,ge,"rtt")||null}},r=(0,_.Z)(A).getInstance().getLogger(u),m(),u}Br.__dashjs_factory_name="CmsdModel";const Gr=h.Z.getSingletonFactory(Br);function qr(){var u,r,c=this.context,y={};function A(){r=(0,_.Z)(c).getInstance().getLogger(u)}function T(R){for(var G={},V=0,Y=0,N=0,H=0,q=R.length,ge=0;ge<q;++ge)V+=R[ge].chunkDownloadTimeRelativeMS,Y+=R[ge].bufferLevel,N+=R[ge].chunkDownloadTimeRelativeMS*R[ge].bufferLevel,H+=R[ge].chunkDownloadTimeRelativeMS*R[ge].chunkDownloadTimeRelativeMS;return G.m=(N-V*Y/q)/(H-V*V/q),G.b=Y/q-G.m*V/q,function(ne){return G.m*ne+G.b}}function m(R){var G,V=!0,Y=R.reduce(function(N,H){return N+H.bufferLevelAtSegmentEnd},0)/R.length;return R.forEach(function(N){Math.abs(N.bufferLevelAtSegmentEnd/N.bufferLevelAtSegmentStart)<.95&&(V=!1),N.bufferLevelAtSegmentEnd/Y<.8&&(V=!1),G?G>N.bitrate&&(V=!1):G=N.bitrate}),V}return u={setup:A,addMeasurement:function(R,G,V,Y,N){R&&R.mediaType&&!y[R.mediaType]&&(y[R.mediaType]=[]);var H=R.mediaInfo.bitrateList.find(function(q){return q.id===R.representationId});y[R.mediaType].push({index:R.index,repId:R.representationId,mediaType:R.mediaType,requestTimeMS:Y,adjustedAvailabilityStartTimeMS:R.availabilityStartTime.getTime(),segDurationMS:1e3*R.duration,chunksDurationMS:V.reduce(function(q,ge){return q+ge.chunkDownloadDurationMS},0),segmentBytes:V.reduce(function(q,ge){return q+ge.chunkBytes},0),bitrate:H&&H.bandwidth,bitrateList:R.mediaInfo.bitrateList,chunkMeasurements:V,fetchDownloadDurationMS:G,throughputCapacityDelayMS:N,getEstimatedBufferLevel:T(V.slice(1))}),y[R.mediaType].length>10&&y[R.mediaType].shift()},getThroughputCapacityDelayMS:function(R,G){var V=y[R.mediaType]&&y[R.mediaType].slice(-3);return!V||V.length<3?0:m(V)?G/4>250?250:G/4:0},getEstimatedDownloadDurationMS:function(R){var G=y[R.mediaType].slice(-1).pop(),V=y[R.mediaType].slice(-3),Y=G.chunkMeasurements.slice(-1).pop().chunkDownloadTimeRelativeMS;G.bufferLevelAtSegmentStart=G.getEstimatedBufferLevel(Y/2),G.bufferLevelAtSegmentEnd=G.getEstimatedBufferLevel(Y);var N=m(V),H=N?.6:.8;if(G.isBufferStable&&1.05*G.segDurationMS<G.fetchDownloadDurationMS)return G.fetchDownloadDurationMS;if(!N||G.segDurationMS<G.fetchDownloadDurationMS||G.adjustedAvailabilityStartTimeMS<=G.requestTimeMS+G.throughputCapacityDelayMS-G.segDurationMS)return .8*G.fetchDownloadDurationMS;for(var q=G.requestTimeMS+G.throughputCapacityDelayMS-G.adjustedAvailabilityStartTimeMS,ge=0,ne=0,ue=0,fe=0;fe<G.chunkMeasurements.length;fe++){var x=G.chunkMeasurements[fe];if(q<ne+x.chunkDownloadDurationMS)break;ne+=x.chunkDownloadDurationMS,ge+=x.chunkBytes,ue++}if(q<0&&r.warn("request time was before adjusted availibitly start time"),ge&&ne&&ue>.2*G.chunkMeasurements.length){var re=ge/ne,ee=G.segmentBytes/re;return G.fetchDownloadDurationMS<ee?G.fetchDownloadDurationMS*H:ee*H}var ae=G.bitrate;return G.bitrateList.some(function(p){if(p.bandwidth>G.bitrate)return ae=p.bandwidth,!0}),ae===G.bitrate?G.fetchDownloadDurationMS*H:H*G.segmentBytes*8*1e3/ae}},A(),u}qr.__dashjs_factory_name="LowLatencyThroughputModel";const Yr=h.Z.getSingletonFactory(qr);var At=C(5717);function zt(u,r,c){return r in u?Object.defineProperty(u,r,{value:c,enumerable:!0,configurable:!0,writable:!0}):u[r]=c,u}function sn(u){u=u||{};var r,c,y,A,T,m,R,G,V,Y,N,H=this.context,q=u.errHandler,ge=u.dashMetrics,ne=u.mediaPlayerModel,ue=u.requestModifier,fe=u.boxParser,x=u.errors,re=u.requestTimeout||0,ee=(0,g.Z)(H).getInstance(),ae=(0,ot.Z)(H).getInstance();function p(L,Z){var O,w=L.request,z=[],Q=!0,ie=!0,M=new Date,B=M,me=0,Te=null,Ie=null;if(!ue||!ge||!q)throw new Error("config object is not correct or missing");var Oe,Ee=function(xe){w.requestStartDate=M,w.requestEndDate=new Date,w.firstByteDate=w.firstByteDate||M,w.fileLoaderType=Ie;var Ge=O.response?O.response.responseURL:null,Ve=O.response?O.response.status:null,ft=O.response&&O.response.getAllResponseHeaders?O.response.getAllResponseHeaders():O.response?O.response.responseHeaders:null,St=ft&&ae.get().streaming.cmsd&&ae.get().streaming.cmsd.enabled?R.parseResponseHeaders(ft,w.mediaType):null;ge.addHttpRequest(w,Ge,Ve,ft,xe?z:null,St)},Pe=function(xe){ie=!1,Ee(xe),w.type===Ae.w.MPD_TYPE&&(ge.addManifestUpdate(w),ee.trigger(i.Z.MANIFEST_LOADING_FINISHED,{request:w}))},ct=function(){if(Te&&(clearTimeout(Te),Te=null),c.indexOf(O)!==-1&&(c.splice(c.indexOf(O),1),ie))if(Pe(!1),Z>0){try{ae.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&w.type===Ae.w.MEDIA_SEGMENT_TYPE&&ne.getRetryAttemptsForType(Ae.w.MEDIA_SEGMENT_TYPE)===Z&&ee.trigger(i.Z.ATTEMPT_BACKGROUND_SYNC)}catch{}Z--;var xe={config:L};A.push(xe),xe.timeout=setTimeout(function(){A.indexOf(xe)!==-1&&(A.splice(A.indexOf(xe),1),p(L,Z))},ne.getRetryIntervalsForType(w.type))}else{if(w.type===Ae.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;q.error(new k.Z(T[w.type],w.url+" is not available",{request:w,response:O.response})),L.error&&L.error(w,"error",O.response.statusText,O.response),L.complete&&L.complete(w,O.response.statusText)}};w.hasOwnProperty("availabilityTimeComplete")&&w.availabilityTimeComplete===!1&&window.fetch&&w.responseType==="arraybuffer"&&w.type===Ae.w.MEDIA_SEGMENT_TYPE?((Oe=Mn(H).create({requestModifier:ue,lowLatencyThroughputModel:V,boxParser:fe})).setup({dashMetrics:ge}),Ie=e.Z.FILE_LOADER_TYPES.FETCH):(Oe=(0,xt.Z)(H).create({requestModifier:ue}),Ie=e.Z.FILE_LOADER_TYPES.XHR);var $e=null,nt=ue.modifyRequestURL?ue.modifyRequestURL(w.url):w.url;if(ae.get().streaming.cmcd&&ae.get().streaming.cmcd.enabled){var Tt=ae.get().streaming.cmcd.mode;if(Tt===e.Z.CMCD_MODE_QUERY){var Dt=function(xe){try{var Ge=[],Ve=m.getQueryParameter(xe);return Ve&&Ge.push(Ve),Ge}catch{return[]}}(w);nt=on.Z.addAditionalQueryParameterToUrl(nt,Dt)}else Tt===e.Z.CMCD_MODE_HEADER&&($e=m.getHeaderParameters(w))}var _e=G.getXHRWithCredentialsForType(w.type);if(w.queryParams){var le=Object.keys(w.queryParams).map(function(xe){return{key:xe,value:w.queryParams[xe]}});nt=on.Z.addAditionalQueryParameterToUrl(nt,le)}w.url=nt,O={url:nt,method:Ae.w.GET,withCredentials:_e,request:w,onload:function(){O.response.status>=200&&O.response.status<=299&&(Pe(!0),L.success&&L.success(O.response.response,O.response.statusText,O.response.responseURL),L.complete&&L.complete(w,O.response.statusText))},onend:ct,onerror:ct,progress:function(xe){var Ge=new Date;Q&&(Q=!1,(!xe.lengthComputable||xe.lengthComputable&&xe.total!==xe.loaded)&&(w.firstByteDate=Ge)),xe.lengthComputable&&(w.bytesLoaded=xe.loaded,w.bytesTotal=xe.total),xe.noTrace||(z.push({s:B,d:xe.time?xe.time:Ge.getTime()-B.getTime(),b:[xe.loaded?xe.loaded-me:0]}),B=Ge,me=xe.loaded),Te&&(clearTimeout(Te),Te=null),ae.get().streaming.fragmentRequestProgressTimeout>0&&(Te=setTimeout(function(){Y.warn("Abort request "+O.url+" due to progress timeout"),O.response.onabort=null,O.loader.abort(O),ct()},ae.get().streaming.fragmentRequestProgressTimeout)),L.progress&&xe&&L.progress(xe)},onabort:function(){Ee(!0),Te&&(clearTimeout(Te),Te=null),L.abort&&L.abort(w)},ontimeout:function(xe){var Ge;if(xe.lengthComputable){var Ve=xe.loaded/xe.total*100;Ge="Request timeout: loaded: "+xe.loaded+", out of: "+xe.total+" : "+Ve.toFixed(3)+"% Completed"}else Ge="Request timeout: non-computable download size";Y.warn(Ge)},loader:Oe,timeout:re,headers:$e};var Me=new Date().getTime();if(isNaN(w.delayLoadingTime)||Me>=w.delayLoadingTime)c.push(O),Oe.load(O);else{var ye={httpRequest:O};y.push(ye),ye.delayTimeout=setTimeout(function(){if(y.indexOf(ye)!==-1){y.splice(y.indexOf(ye),1);try{M=new Date,B=M,c.push(ye.httpRequest),Oe.load(ye.httpRequest)}catch{ye.httpRequest.onerror()}}},w.delayLoadingTime-Me)}}return r={load:function(L){L.request?p(L,ne.getRetryAttemptsForType(L.request.type)):L.error&&L.error(L.request,"error")},abort:function(){A.forEach(function(L){clearTimeout(L.timeout),L.config.request&&L.config.abort&&L.config.abort(L.config.request)}),A=[],y.forEach(function(L){return clearTimeout(L.delayTimeout)}),y=[],c.forEach(function(L){L.request.type!==Ae.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(L.onloadend=L.onerror=L.onprogress=void 0,L.loader.abort(L))}),c=[]}},Y=(0,_.Z)(H).getInstance().getLogger(r),c=[],y=[],A=[],m=_t(H).getInstance(),R=Gr(H).getInstance(),V=Yr(H).getInstance(),G=(0,At.Z)(H).getInstance(),zt(N={},Ae.w.MPD_TYPE,x.DOWNLOAD_ERROR_ID_MANIFEST_CODE),zt(N,Ae.w.XLINK_EXPANSION_TYPE,x.DOWNLOAD_ERROR_ID_XLINK_CODE),zt(N,Ae.w.INIT_SEGMENT_TYPE,x.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),zt(N,Ae.w.MEDIA_SEGMENT_TYPE,x.DOWNLOAD_ERROR_ID_CONTENT_CODE),zt(N,Ae.w.INDEX_SEGMENT_TYPE,x.DOWNLOAD_ERROR_ID_CONTENT_CODE),zt(N,Ae.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,x.DOWNLOAD_ERROR_ID_CONTENT_CODE),zt(N,Ae.w.OTHER_TYPE,x.DOWNLOAD_ERROR_ID_CONTENT_CODE),T=N,r}sn.__dashjs_factory_name="HTTPLoader";const Ln=h.Z.getClassFactory(sn);function On(){var u;function r(){u={}}function c(){r()}return c(),{getLoader:function(y){for(var A in u)if(u.hasOwnProperty(A)&&y.startsWith(A))return u[A];return Ln},registerLoader:function(y,A){u[y]=A},unregisterLoader:function(y){u[y]&&delete u[y]},unregisterAllLoader:r,reset:c}}On.__dashjs_factory_name="SchemeLoaderFactory";const Un=h.Z.getSingletonFactory(On);function Tn(u){u=u||{};var r,c,y=this.context;return r=Un(y).getInstance(),{load:function(A){if(!c){var T=r.getLoader(A&&A.request?A.request.url:null);c=T(y).create({errHandler:u.errHandler,mediaPlayerModel:u.mediaPlayerModel,requestModifier:u.requestModifier,dashMetrics:u.dashMetrics,boxParser:u.boxParser?u.boxParser:null,constants:u.constants?u.constants:null,dashConstants:u.dashConstants?u.dashConstants:null,urlUtils:u.urlUtils?u.urlUtils:null,requestTimeout:isNaN(u.requestTimeout)?0:u.requestTimeout,errors:u.errors})}c.load(A)},abort:function(){c&&c.abort()}}}Tn.__dashjs_factory_name="URLLoader";const Wn=h.Z.getClassFactory(Tn);function xn(u){return xn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},xn(u)}function An(u,r){return An=Object.setPrototypeOf||function(c,y){return c.__proto__=y,c},An(u,r)}function sr(u,r){return!r||xn(r)!=="object"&&typeof r!="function"?function(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}(u):r}function Qn(u){return Qn=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Qn(u)}const fr=function(u){(function(T,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(m&&m.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),m&&An(T,m)})(A,u);var r,c,y=(r=A,c=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var T,m=Qn(r);if(c){var R=Qn(this).constructor;T=Reflect.construct(m,arguments,R)}else T=m.apply(this,arguments);return sr(this,T)});function A(T){var m;return function(R,G){if(!(R instanceof G))throw new TypeError("Cannot call a class as a function")}(this,A),(m=y.call(this,T)).checkForExistenceOnly=!0,m}return A}(P.Z);function rr(u){u=u||{};var r,c,y=this.context,A=u.eventBus,T=u.events,m=u.urlUtils,R=u.errors,G=u.streamId;return r={checkForExistence:function(V){var Y=function(H){A.trigger(T.CHECK_FOR_EXISTENCE_COMPLETED,{request:V,exists:H})};if(V){var N=new fr(V.url);c.load({request:N,success:function(){Y(!0)},error:function(){Y(!1)}})}else Y(!1)},load:function(V){var Y=function(N,H){A.trigger(T.LOADING_COMPLETED,{request:V,response:N||null,error:H||null,sender:r})};V?c.load({request:V,progress:function(N){A.trigger(T.LOADING_PROGRESS,{request:V,stream:N.stream,streamId:G}),N.data&&A.trigger(T.LOADING_DATA_PROGRESS,{request:V,response:N.data||null,error:null,sender:r})},success:function(N){Y(N)},error:function(N,H,q){Y(void 0,new k.Z(R.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,q,H))},abort:function(N){N&&A.trigger(T.LOADING_ABANDONED,{mediaType:N.mediaType,request:N,sender:r})}}):Y(void 0,new k.Z(R.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,R.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function(){c&&c.abort()},reset:function(){c&&(c.abort(),c=null)}},c=Wn(y).create({errHandler:u.errHandler,errors:R,dashMetrics:u.dashMetrics,mediaPlayerModel:u.mediaPlayerModel,requestModifier:u.requestModifier,urlUtils:m,constants:e.Z,boxParser:u.boxParser,dashConstants:u.dashConstants,requestTimeout:u.settings.get().streaming.fragmentRequestTimeout}),r}rr.__dashjs_factory_name="FragmentLoader";const vr=h.Z.getClassFactory(rr);function dr(){return{modifyResponseAsync:function(u){return Promise.resolve(u)}}}dr.__dashjs_factory_name="SegmentResponseModifier";const ni=h.Z.getSingletonFactory(dr);function Cr(u){u=u||{};var r,c,y,A=this.context,T=(0,g.Z)(A).getInstance(),m=u.errHandler,R=u.mediaPlayerModel,G=u.dashMetrics,V=(0,_.Z)(A).getInstance(),Y=ni(A).getInstance(),N=u.streamInfo;function H(){return N.id}function q(){for(var ne in y)y[ne].reset();y={}}function ge(ne){if(ne.sender){var ue=ne.request,fe=ne.response,x=ue.isInitializationRequest(),re=ue.mediaInfo.streamInfo;if(ne.error&&(ue.mediaType===e.Z.AUDIO||ue.mediaType===e.Z.VIDEO||ue.mediaType===e.Z.TEXT&&ue.mediaInfo.isFragmented)&&T.trigger(i.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD,{entry:ne.request.serviceLocation}),fe&&re){var ee=function(ae,p,L,Z){var O=new Mt;return O.streamId=L,O.mediaInfo=p.mediaInfo,O.segmentType=p.type,O.start=p.startTime,O.duration=p.duration,O.end=O.start+O.duration,O.bytes=ae,O.index=p.index,O.quality=p.quality,O.representationId=p.representationId,O.endFragment=Z,O}(fe,ue,N.id,ne.type!==i.Z.FRAGMENT_LOADING_PROGRESS);Y.modifyResponseAsync(ee).then(function(ae){T.trigger(x?i.Z.INIT_FRAGMENT_LOADED:i.Z.MEDIA_FRAGMENT_LOADED,{chunk:ae,request:ue},{streamId:re.id,mediaType:ue.mediaType})}).catch(function(ae){c.error(ae),T.trigger(x?i.Z.INIT_FRAGMENT_LOADED:i.Z.MEDIA_FRAGMENT_LOADED,{chunk:ee,request:ue},{streamId:re.id,mediaType:ue.mediaType})})}else c.warn("No "+ue.mediaType+" bytes to push or stream is inactive.")}}return r={getStreamId:H,getModel:function(ne){var ue=y[ne];return ue||(ue=I(A).create({streamInfo:N,type:ne,dashMetrics:G,fragmentLoader:vr(A).create({dashMetrics:G,mediaPlayerModel:R,errHandler:m,requestModifier:(0,he.Z)(A).getInstance(),settings:u.settings,boxParser:u.boxParser,eventBus:T,events:i.Z,errors:te,dashConstants:u.dashConstants,urlUtils:u.urlUtils,streamId:H()}),debug:V,eventBus:T,events:i.Z}),y[ne]=ue),ue},reset:function(){T.off(n.Z.FRAGMENT_LOADING_COMPLETED,ge,this),T.off(n.Z.FRAGMENT_LOADING_PROGRESS,ge,this),q()}},c=V.getLogger(r),q(),T.on(n.Z.FRAGMENT_LOADING_COMPLETED,ge,r),T.on(n.Z.FRAGMENT_LOADING_PROGRESS,ge,r),r}Cr.__dashjs_factory_name="FragmentController";const jr=h.Z.getClassFactory(Cr),ri=function u(){(function(r,c){if(!(r instanceof c))throw new TypeError("Cannot call a class as a function")})(this,u),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null},ii=function u(){(function(r,c){if(!(r instanceof c))throw new TypeError("Cannot call a class as a function")})(this,u),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN};function ai(u){var r,c,y=this.context,A=u.streamInfo;function T(R){c.setTrackByIndex(R)}function m(){c&&c.reset()}return r={getStreamId:function(){return A.id},initialize:function(){c.addTracks();var R=c.getTracks();R&&R.length>0&&T(0)},provide:function(R,G){if(typeof G=="function"){var V,Y,N=c.getCurrentTrack();if(!N||N.segmentDuration<=0||R==null)G(null);else{(Y=c.getThumbnailRequestForTime(R))&&(N.segmentDuration=Y.duration),V=R%N.segmentDuration;var H=Math.floor(V*N.tilesHor*N.tilesVert/N.segmentDuration),q=new ri;if(q.width=Math.floor(N.widthPerTile),q.height=Math.floor(N.heightPerTile),q.x=Math.floor(H%N.tilesHor)*N.widthPerTile,q.y=Math.floor(H/N.tilesHor)*N.heightPerTile,"readThumbnail"in N)return N.readThumbnail(R,function(ne){q.url=ne,G(q)});if(Y)q.url=Y.url,N.segmentDuration=NaN;else{var ge=Math.floor(R/N.segmentDuration);q.url=function(ne,ue){var fe=ue+ne.startNumber,x=(0,o.vi)(ne.templateUrl,"Number",fe);return x=(0,o.vi)(x,"Time",(fe-1)*ne.segmentDuration*ne.timescale),x=(0,o.vi)(x,"Bandwidth",ne.bandwidth),(0,o.eR)(x)}(N,ge)}G(q)}}},setTrackByIndex:T,getCurrentTrackIndex:function(){return c.getCurrentTrackIndex()},getBitrateList:function(){var R=c.getTracks(),G=0;return R.map(function(V){var Y=new ii;return Y.mediaType=e.Z.IMAGE,Y.qualityIndex=G++,Y.bitrate=V.bitrate,Y.width=V.width,Y.height=V.height,Y})},reset:m},m(),c=(0,Nt.Z)(y).create({streamInfo:A,adapter:u.adapter,baseURLController:u.baseURLController,timelineConverter:u.timelineConverter,debug:u.debug,eventBus:u.eventBus,events:u.events,dashConstants:u.dashConstants,dashMetrics:u.dashMetrics,segmentBaseController:u.segmentBaseController}),r}ai.__dashjs_factory_name="ThumbnailController";const Ri=h.Z.getClassFactory(ai);var Hr=C(7417);function oi(u){var r;u=u||{};var c=[],y=(0,g.Z)(this.context).getInstance(),A=u.updateEventName,T=u.addBlacklistEventName;function m(R){c.indexOf(R)===-1&&(c.push(R),y.trigger(A,{entry:R}))}return r={add:m,contains:function(R){return!!(c.length&&R&&R.length)&&c.indexOf(R)!==-1},reset:function(){c=[]}},T&&y.on(T,function(R){m(R.entry)},r),r}oi.__dashjs_factory_name="BlackListController";const Vr=h.Z.getClassFactory(oi);var wi=[e.Z.VIDEO,e.Z.AUDIO,e.Z.TEXT,e.Z.MUXED,e.Z.IMAGE];function si(u){u=u||{};var r,c,y,A,T,m,R,G,V,Y,N,H,q,ge,ne,ue,fe,x,re=this.context,ee=(0,g.Z)(re).getInstance(),ae=(0,Ce.Z)(re).getInstance(),p=u.manifestModel,L=u.mediaPlayerModel,Z=u.dashMetrics,O=u.manifestUpdater,w=u.adapter,z=u.timelineConverter,Q=u.capabilities,ie=u.errHandler,M=u.abrController,B=u.playbackController,me=u.eventController,Te=u.mediaController,Ie=u.protectionController,Oe=u.textController,Ee=u.videoModel,Pe=u.streamInfo,ct=u.settings;function $e(gt,Bt){return new Promise(function(Gt,Zt){Ge(),Y=!0,ft();var Ke=Ee.getElement(),yt=[];wi.forEach(function(Ye){(Ye!==e.Z.TEXT||gt)&&(Ye!==e.Z.VIDEO||!Ke||Ke&&/^VIDEO$/i.test(Ke.nodeName))&&yt.push(nt(Ye,gt))}),Promise.all(yt).then(function(){return Ye=Bt,new Promise(function(Re){var se={},Ue=y.map(function(it){return it.createBufferSinks(Ye)});Promise.all(Ue).then(function(it){it.forEach(function(Rt){Rt&&(se[Rt.getType()]=Rt)}),Re(se)}).catch(function(){Re(se)})});var Ye}).then(function(Ye){if(Y=!1,y.length===0){var Re="No streams to play.";ie.error(new k.Z(te.MANIFEST_ERROR_ID_NOSTREAMS_CODE,Re,p.getValue())),c.fatal(Re)}else St();gt&&Oe.createTracks(Pe),Gt(Ye)}).catch(function(Ye){Zt(Ye)})})}function nt(gt,Bt){var Gt,Zt=w.getAllMediaInfoForType(Pe,gt),Ke=[],yt=null;if(!Zt||Zt.length===0)return c.info("No "+gt+" data."),Promise.resolve();gt===e.Z.VIDEO&&(R=!0),gt===e.Z.AUDIO&&(G=!0);for(var Ye=0,Re=Zt.length;Ye<Re;Ye++)yt=Zt[Ye],gt===e.Z.TEXT&&yt.isEmbedded&&(Oe.addEmbeddedTrack(Pe,yt),Ke.push(yt)),Tt(yt)&&Te.addTrack(yt);if(Ke.length>0&&(Te.setInitialMediaSettingsForType(gt,Pe),Oe.addMediaInfosToBuffer(Pe,gt,Ke)),Zt=Zt.filter(function(Ue){return!Ue.isEmbedded}),Zt.length===0)return Promise.resolve();if(gt===e.Z.IMAGE)return(H=Ri(re).create({streamInfo:Pe,adapter:w,baseURLController:u.baseURLController,timelineConverter:u.timelineConverter,debug:ue,eventBus:ee,events:i.Z,dashConstants:t.Z,dashMetrics:u.dashMetrics,segmentBaseController:u.segmentBaseController})).initialize(),Promise.resolve();ee.trigger(i.Z.STREAM_INITIALIZING,{streamInfo:Pe,mediaInfo:yt}),Te.setInitialMediaSettingsForType(gt,Pe);var se=function(Ue,it){var Rt=Ue&&Ue.length>0?Ue[0]:null,Lt=N.getModel(Rt?Rt.type:null),nn=Rt?Rt.type:null,In=Rt?Rt.mimeType:null,Xn=Rt?Rt.isFragmented:null,Sn=wt(re).create({streamInfo:Pe,type:nn,mimeType:In,timelineConverter:z,adapter:w,manifestModel:p,mediaPlayerModel:L,fragmentModel:Lt,dashMetrics:u.dashMetrics,baseURLController:u.baseURLController,segmentBaseController:u.segmentBaseController,abrController:M,playbackController:B,mediaController:Te,textController:Oe,errHandler:ie,settings:ct,boxParser:ne,segmentBlacklistController:q});Sn.initialize(it,R,Xn),y.push(Sn);for(var $n=0;$n<Ue.length;$n++)Sn.addMediaInfo(Ue[$n]);return nn===e.Z.TEXT&&Oe.addMediaInfosToBuffer(Pe,nn,Ue,Lt),Sn}(Zt,Bt);return(Gt=Te.getCurrentTrackFor(gt,Pe.id))?(M.updateTopQualityIndex(Gt),se.selectMediaInfo(gt===e.Z.TEXT&&Gt.isEmbedded?Zt[0]:Gt)):Promise.resolve()}function Tt(gt){var Bt,Gt=gt?gt.type:null;return Gt===e.Z.MUXED?(Bt="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",c.fatal(Bt),ie.error(new k.Z(te.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,Bt,p.getValue())),!1):!(Gt!==e.Z.TEXT&&Gt!==e.Z.IMAGE&&gt.contentProtection&&!Q.supportsEncryptedMedia()&&(ie.error(new k.Z(te.CAPABILITY_MEDIAKEYS_ERROR_CODE,te.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),1))}function Dt(gt){for(var Bt=y?y.length:0,Gt=0;Gt<Bt;Gt++){var Zt=y[Gt].getFragmentModel();Zt.abortRequests(),Zt.resetInitialSettings(),y[Gt].reset(!1,gt)}Oe&&Oe.deactivateStream(Pe),y=[],T=!1,m=!1,an(!1),le(!1),ee.trigger(i.Z.STREAM_DEACTIVATED,{streamInfo:Pe})}function _e(gt){Dt(gt),A=!1,R=!1,G=!1,V={},Y=!1,fe=!1,x=[]}function le(gt){fe=gt}function Me(){return Pe?Pe.start:NaN}function ye(){return Pe?Pe.id:null}function xe(){return Pe}function Ge(){if(!Ee||!M)throw new Error(e.Z.MISSING_CONFIG_ERROR)}function Ve(gt){gt.error&&(ie.error(gt.error),c.fatal(gt.error.message))}function ft(){if(me){var gt=w.getEventsFor(Pe);gt&&gt.length>0&&me.addInlineEvents(gt,Pe.id)}}function St(){for(var gt=y.length,Bt=V.audio||V.video?new k.Z(te.DATA_UPDATE_FAILED_ERROR_CODE,te.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,Gt=0;Gt<gt;Gt++)if(y[Gt].isUpdating()||Y)return;if(Ie){Ie.clearMediaInfoArray();for(var Zt=0;Zt<gt&&y[Zt];Zt++){var Ke=y[Zt].getType(),yt=y[Zt].getMediaInfo();if(Ke===e.Z.AUDIO||Ke===e.Z.VIDEO||Ke===e.Z.TEXT&&yt.isFragmented){var Ye=y[Zt].getMediaInfo();Ye&&Ie.initializeForMedia(Ye)}}Ie.handleKeySystemFromManifest()}Bt?ie.error(Bt):A||(A=!0,Ee.waitForReadyState(e.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){ee.trigger(i.Z.STREAM_INITIALIZED,{streamInfo:Pe})}))}function qt(){var gt=rn(),Bt=gt.length;if(Bt!==0){for(var Gt=0;Gt<Bt;Gt++)if(!gt[Gt].isBufferingCompleted()&&(gt[Gt].getType()===e.Z.AUDIO||gt[Gt].getType()===e.Z.VIDEO))return void c.debug("onBufferingCompleted - One streamProcessor has finished but",gt[Gt].getType(),"one is not buffering completed");c.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),m=!0,ee.trigger(i.Z.STREAM_BUFFERING_COMPLETED,{streamInfo:Pe},{streamInfo:Pe})}else c.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function jt(gt){V[gt.mediaType]=gt.error,St()}function kt(gt){me&&me.addInbandEvents(gt.events,Pe.id)}function Ht(gt){return gt&&gt.type?Kt(gt.type):null}function Kt(gt){return gt?rn().filter(function(Bt){return Bt.getType()===gt})[0]:null}function rn(){for(var gt,Bt,Gt=[],Zt=0;Zt<y.length;Zt++)(gt=(Bt=y[Zt]).getType())!==e.Z.AUDIO&&gt!==e.Z.VIDEO&&gt!==e.Z.TEXT||Gt.push(Bt);return Gt}function un(gt,Bt){var Gt=xe(),Zt=Bt.getStreamInfo();if(!Zt||!Gt)return!0;var Ke=w.getAdaptationForType(Zt.index,gt,Zt),yt=w.getAdaptationForType(Gt.index,gt,Gt);return Ke&&yt?!(!en(yt)&&en(Ke)):!Ke&&!yt}function en(gt){return!!gt&&!!(gt.ContentProtection||gt.Representation_asArray&&gt.Representation_asArray.length>0&&gt.Representation_asArray[0].ContentProtection)}function ln(gt,Bt){var Gt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!gt||!gt.hasOwnProperty("getStreamInfo"))return!1;var Zt=gt.getStreamInfo(),Ke=Gt?Gt.getStreamInfo():xe();if(!Zt||!Ke)return!1;var yt=w.getAdaptationForType(Zt.index,Bt,Zt),Ye=w.getAdaptationForType(Ke.index,Bt,Ke);if(!yt||!Ye)return!yt&&!Ye;var Re=yt&&Ye&&yt.mimeType===Ye.mimeType,se=Ye.Representation_asArray.map(function(Lt){return Lt.codecs}),Ue=yt.Representation_asArray.map(function(Lt){return Lt.codecs}),it=Ue.some(function(Lt){return se.indexOf(Lt)>-1}),Rt=Ue.some(function(Lt){return se.some(function(nn){return Q.codecRootCompatibleWithCodec(nn,Lt)})});return it||Rt&&Re}function an(gt){ge=gt}function cn(){return ge}return r={initialize:function(){ee.on(i.Z.BUFFERING_COMPLETED,qt,r),ee.on(i.Z.DATA_UPDATE_COMPLETED,jt,r),ee.on(i.Z.INBAND_EVENTS,kt,r),Ie&&(ee.on(i.Z.KEY_ERROR,Ve,r),ee.on(i.Z.SERVER_CERTIFICATE_UPDATED,Ve,r),ee.on(i.Z.LICENSE_REQUEST_COMPLETE,Ve,r),ee.on(i.Z.KEY_SYSTEM_SELECTED,Ve,r),ee.on(i.Z.KEY_SESSION_CREATED,Ve,r),ee.on(i.Z.KEY_STATUSES_CHANGED,Ve,r)),Oe.initializeForStream(Pe),ee.trigger(i.Z.STREAM_UPDATED,{streamInfo:Pe})},getStreamId:function(){return Pe?Pe.id:null},activate:function(gt,Bt){return new Promise(function(Gt,Zt){if(!T)return cn()?(T=!0,ee.trigger(i.Z.STREAM_ACTIVATED,{streamInfo:Pe}),void Gt(Bt)):void function(Ke,yt){return $e(Ke,yt)}(gt,Bt).then(function(Ke){T=!0,ee.trigger(i.Z.STREAM_ACTIVATED,{streamInfo:Pe}),Gt(Ke)}).catch(function(Ke){Zt(Ke)});Gt(Bt)})},deactivate:Dt,getIsActive:function(){return T},getDuration:function(){return Pe?Pe.duration:NaN},getStartTime:Me,getId:ye,getStreamInfo:xe,getHasAudioTrack:function(){return G},getHasVideoTrack:function(){return R},startPreloading:function(gt,Bt){return new Promise(function(Gt,Zt){cn()?Zt():(c.info("[startPreloading] Preloading next stream with id ".concat(ye())),an(!0),$e(gt,Bt).then(function(){for(var Ke=0;Ke<y.length&&y[Ke];Ke++)y[Ke].setExplicitBufferingTime(Me()),y[Ke].getScheduleController().startScheduleTimer();Gt()}).catch(function(){an(!1),Zt()}))})},initializeForTextWithMediaSource:function(gt){return new Promise(function(Bt,Gt){nt(e.Z.TEXT,gt).then(function(){return(Zt=Kt(e.Z.TEXT))?Zt.createBufferSinks():Promise.resolve();var Zt}).then(function(){Oe.createTracks(Pe),Bt()}).catch(function(Zt){Gt(Zt)})})},getThumbnailController:function(){return H},getBitrateListFor:function(gt){if(Ge(),gt===e.Z.IMAGE)return H?H.getBitrateList():[];var Bt=function(Gt){for(var Zt=null,Ke=0;Ke<y.length;Ke++)if((Zt=y[Ke]).getType()===Gt)return Zt.getMediaInfo();return null}(gt);return M.getBitrateList(Bt)},updateData:function(gt){return new Promise(function(Bt){Y=!0,Pe=gt,me&&ft();for(var Gt=[],Zt=0,Ke=y.length;Zt<Ke;Zt++){var yt=y[Zt],Ye=yt.getMediaInfo();Gt.push(yt.updateStreamInfo(Pe));var Re=w.getAllMediaInfoForType(Pe,yt.getType());if(Re=Re.filter(function(it){return!it.isEmbedded})){yt.clearMediaInfoArray();for(var se=0;se<Re.length;se++){var Ue=Re[se];yt.addMediaInfo(Re[se]),w.areMediaInfosEqual(Ye,Ue)&&(M.updateTopQualityIndex(Ue),Gt.push(yt.selectMediaInfo(Ue)))}}}Promise.all(Gt).then(function(){for(Gt=[];x.length>0;){var it=x.pop(),Rt=it.newMediaInfo,Lt=Ht(it.oldMediaInfo);if(!Lt)return;Gt.push(Lt.prepareTrackSwitch()),Gt.push(Lt.selectMediaInfo(Rt))}return Promise.all(Gt)}).then(function(){Y=!1,St(),ee.trigger(i.Z.STREAM_UPDATED,{streamInfo:Pe}),Bt()})})},reset:function(gt){N&&(N.reset(),N=null),M&&Pe&&M.clearDataForStream(Pe.id),q&&(q.reset(),q=null),_e(gt),Pe=null,ee.off(i.Z.DATA_UPDATE_COMPLETED,jt,r),ee.off(i.Z.BUFFERING_COMPLETED,qt,r),ee.off(i.Z.INBAND_EVENTS,kt,r),Ie&&(ee.off(i.Z.KEY_ERROR,Ve,r),ee.off(i.Z.SERVER_CERTIFICATE_UPDATED,Ve,r),ee.off(i.Z.LICENSE_REQUEST_COMPLETE,Ve,r),ee.off(i.Z.KEY_SYSTEM_SELECTED,Ve,r),ee.off(i.Z.KEY_SESSION_CREATED,Ve,r),ee.off(i.Z.KEY_STATUSES_CHANGED,Ve,r))},getProcessors:rn,setMediaSource:function(gt){return new Promise(function(Bt,Gt){for(var Zt=[],Ke=0;Ke<y.length;)Tt(y[Ke].getMediaInfo())?(Zt.push(y[Ke].setMediaSource(gt)),Ke++):(y[Ke].reset(),y.splice(Ke,1));Promise.all(Zt).then(function(){for(var yt=0;yt<y.length;yt++)y[yt].dischargePreBuffer();if(y.length===0){var Ye="No streams to play.";ie.error(new k.Z(te.MANIFEST_ERROR_ID_NOSTREAMS_CODE,Ye+"nostreams",p.getValue())),c.fatal(Ye)}Bt()}).catch(function(yt){c.error(yt),Gt(yt)})})},isMediaCodecCompatible:function(gt){var Bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return ln(gt,e.Z.VIDEO,Bt)&&ln(gt,e.Z.AUDIO,Bt)},isProtectionCompatible:function(gt){return!gt||un(e.Z.VIDEO,gt)&&un(e.Z.AUDIO,gt)},getPreloaded:cn,getIsEndedEventSignaled:function(){return fe},setIsEndedEventSignaled:le,getAdapter:function(){return w},getHasFinishedBuffering:function(){return m},setPreloaded:an,startScheduleControllers:function(){for(var gt=y.length,Bt=0;Bt<gt&&y[Bt];Bt++)y[Bt].getScheduleController().startScheduleTimer()},prepareTrackChange:function(gt){if(T&&Pe){m=!1;var Bt=gt.newMediaInfo,Gt=p.getValue();w.setCurrentMediaInfo(Pe.id,Bt.type,Bt);var Zt=Ht(Bt);if(Zt){var Ke=B.getTime();c.info("Stream -  Process track changed at current time "+Ke),Gt.refreshManifestOnSwitchTrack?(x.push(gt),O.getIsUpdating()||(c.debug("Stream -  Refreshing manifest for switch track"),O.refreshManifest())):Zt.selectMediaInfo(Bt).then(function(){Bt.type!==e.Z.VIDEO&&Bt.type!==e.Z.AUDIO||M.updateTopQualityIndex(Bt),Zt.prepareTrackSwitch()})}}},prepareQualityChange:function(gt){var Bt=Kt(gt.mediaType);Bt&&Bt.prepareQualityChange(gt)}},function(){try{ue=(0,_.Z)(re).getInstance(),c=ue.getLogger(r),_e(),ne=(0,Hr.Z)(re).getInstance(),q=Vr(re).create({updateEventName:i.Z.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:i.Z.SEGMENT_LOCATION_BLACKLIST_ADD}),N=jr(re).create({streamInfo:Pe,mediaPlayerModel:L,dashMetrics:Z,errHandler:ie,settings:ct,boxParser:ne,dashConstants:t.Z,urlUtils:ae})}catch(gt){throw gt}}(),r}si.__dashjs_factory_name="Stream";const ui=h.Z.getClassFactory(si),Ni=function u(r){(function(c,y){if(!(c instanceof y))throw new TypeError("Cannot call a class as a function")})(this,u),this.url=r||null,this.type=Ae.w.CONTENT_STEERING_TYPE,this.responseType="json"},wn=function u(){(function(r,c){if(!(r instanceof c))throw new TypeError("Cannot call a class as a function")})(this,u),this.version=null,this.ttl=300,this.reloadUri=null,this.pathwayPriority=[],this.pathwayClones=[]};function _r(){var u,r,c,y,A,T,m,R,G,V,Y,N,H,q,ge,ne=this.context,ue=(0,Ce.Z)(ne).getInstance();function fe(M){p(M,"baseUrl")}function x(M){p(M,"location")}function re(M){if(M&&M.request&&M.request.serviceLocation&&M.request.requestStartDate&&M.request.requestEndDate&&!isNaN(M.request.bytesTotal)){var B=M.request.serviceLocation,me=M.request.requestEndDate.getTime()-M.request.requestStartDate.getTime();ae(B,parseInt(8*M.request.bytesTotal/me*1e3))}}function ee(M){M&&M.httpRequest&&M.httpRequest._serviceLocation&&!isNaN(M.throughput)&&ae(M.httpRequest._serviceLocation,1e3*M.throughput)}function ae(M,B){A[M]||(A[M]=[]),A[M].push(B),A[M].length>4&&A[M].shift()}function p(M,B){if(M&&M.request&&M.request.serviceLocation){var me=M.request.serviceLocation;y[B].all.indexOf(me)===-1&&y[B].all.push(me),y[B].current=me}}function L(){var M=Y.getValue(),B=ge.getContentSteering(M);return B||(B=H.getServiceDescriptionSettings().contentSteering),B}function Z(){return new Promise(function(M){try{var B=L();if(!B||!B.serverUrl)return void M();var me=function(Ie){var Oe=Ie.serverUrl;c&&c.reloadUri&&(Oe=ue.isRelative(c.reloadUri)?ue.resolve(c.reloadUri,Ie.serverUrl):c.reloadUri);var Ee=[],Pe=y.baseUrl.all.concat(y.location.all);if(Pe.length>0){var ct=Pe.map(function(Tt){var Dt=function(_e){if(!_e||!A[_e]||A[_e].length===0)return-1;var le=A[_e].reduce(function(Me,ye){return Me+ye})/A[_e].length;return parseInt(le)}(Tt);return{serviceLocation:Tt,throughput:Dt}});ct.sort(function(Tt,Dt){return Dt.throughput-Tt.throughput});var $e="",nt="";ct.forEach(function(Tt,Dt){Dt!==0&&($e="".concat($e,","),Tt.throughput>-1&&(nt="".concat(nt,","))),$e="".concat($e).concat(Tt.serviceLocation),Tt.throughput>-1&&(nt="".concat(nt).concat(Tt.throughput))}),Ee.push({key:"_DASH_pathway",value:'"'.concat($e,'"')}),Ee.push({key:"_DASH_throughput",value:nt})}return Oe=on.Z.addAditionalQueryParameterToUrl(Oe,Ee)}(B),Te=new Ni(me);m.load({request:Te,success:function(Ie){(function(Oe){Oe&&Oe[t.Z.CONTENT_STEERING_RESPONSE.VERSION]&&parseInt(Oe[t.Z.CONTENT_STEERING_RESPONSE.VERSION])===1&&((c=new wn).version=Oe[t.Z.CONTENT_STEERING_RESPONSE.VERSION],Oe[t.Z.CONTENT_STEERING_RESPONSE.TTL]&&!isNaN(Oe[t.Z.CONTENT_STEERING_RESPONSE.TTL])&&(c.ttl=Oe[t.Z.CONTENT_STEERING_RESPONSE.TTL]),Oe[t.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]&&(c.reloadUri=Oe[t.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]),Oe[t.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]&&(c.pathwayPriority=Oe[t.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]),Oe[t.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES]&&(c.pathwayClones=Oe[t.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES],c.pathwayClones=c.pathwayClones.filter(function(Ee){return function(Pe){return Pe[t.Z.CONTENT_STEERING_RESPONSE.BASE_ID]&&Pe[t.Z.CONTENT_STEERING_RESPONSE.ID]&&Pe[t.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT]&&Pe[t.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][t.Z.CONTENT_STEERING_RESPONSE.HOST]}(Ee)})),z())})(Ie),q.trigger(n.Z.CONTENT_STEERING_REQUEST_COMPLETED,{currentSteeringResponseData:c,url:me}),M()},error:function(Ie,Oe,Ee,Pe){(function(ct,$e){try{switch(r.warn("Error fetching data from content steering server",ct),$e.status){case 410:break;case 429:var nt=$e&&$e.getResponseHeader?$e.getResponseHeader("retry-after"):null;nt!==null&&(c||(c={}),c.ttl=parseInt(nt)),z();break;default:z()}}catch(Tt){r.error(Tt)}})(Ie,Pe),M(Ie)},complete:function(){y.baseUrl.all=O(y.baseUrl),y.location.all=O(y.location)}})}catch(Ie){M(Ie)}})}function O(M){return M.all&&M.all.length!==0&&M.current?M.all.filter(function(B){return B===M.current}):[]}function w(M){try{var B=[];return M&&M.length!==0&&c&&c.pathwayClones&&c.pathwayClones.length!==0&&c.pathwayClones.forEach(function(me){var Te=M.filter(function(ct){return me[t.Z.CONTENT_STEERING_RESPONSE.BASE_ID]===ct.serviceLocation}),Ie=null;if(Te&&Te.length>0&&(Ie=Te[0]),Ie){var Oe=new URL(Ie.url),Ee=me[t.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][t.Z.CONTENT_STEERING_RESPONSE.HOST];Ee=on.Z.stringHasProtocol(Ee)?Ee:"".concat(Oe.protocol,"//").concat(Ee);var Pe={synthesizedUrl:"".concat(Ee).concat(Oe.pathname),serviceLocation:me[t.Z.CONTENT_STEERING_RESPONSE.ID],queryParams:me[t.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][t.Z.CONTENT_STEERING_RESPONSE.PARAMS],reference:Ie};B.push(Pe)}}),B}catch(me){return r.error(me),[]}}function z(){c&&c.ttl&&!isNaN(c.ttl)&&(T&&clearTimeout(T),T=setTimeout(function(){Z()},1e3*c.ttl))}function Q(){T&&clearTimeout(T),T=null}function ie(){c=null,A={},y={baseUrl:{current:null,all:[]},location:{current:null,all:[]}},Q()}return u={reset:function(){ie(),q.off(n.Z.FRAGMENT_LOADING_STARTED,fe,u),q.off(n.Z.MANIFEST_LOADING_STARTED,x,u),q.off(n.Z.MANIFEST_LOADING_FINISHED,re,u),q.off(n.Z.THROUGHPUT_MEASUREMENT_STORED,ee,u)},setConfig:function(M){M&&(M.adapter&&(ge=M.adapter),M.errHandler&&(R=M.errHandler),M.dashMetrics&&(G=M.dashMetrics),M.mediaPlayerModel&&(V=M.mediaPlayerModel),M.requestModifier&&(N=M.requestModifier),M.manifestModel&&(Y=M.manifestModel),M.serviceDescriptionController&&(H=M.serviceDescriptionController),M.eventBus&&(q=M.eventBus))},loadSteeringData:Z,getCurrentSteeringResponseData:function(){return c},shouldQueryBeforeStart:function(){var M=L();return!!M&&M.queryBeforeStart},getSteeringDataFromManifest:L,stopSteeringRequestTimer:Q,getSynthesizedBaseUrlElements:function(M){try{return w(M).map(function(B){var me=new er(B.synthesizedUrl,B.serviceLocation);return me.queryParams=B.queryParams,me.dvb_priority=B.reference.dvb_priority,me.dvb_weight=B.reference.dvb_weight,me.availabilityTimeOffset=B.reference.availabilityTimeOffset,me.availabilityTimeComplete=B.reference.availabilityTimeComplete,me})}catch(B){return r.error(B),[]}},getSynthesizedLocationElements:function(M){try{return w(M).map(function(B){var me=new Ut(B.synthesizedUrl,B.serviceLocation);return me.queryParams=B.queryParams,me})}catch(B){return r.error(B),[]}},initialize:function(){m=Wn(ne).create({errHandler:R,dashMetrics:G,mediaPlayerModel:V,requestModifier:N,errors:te}),q.on(n.Z.FRAGMENT_LOADING_STARTED,fe,u),q.on(n.Z.MANIFEST_LOADING_STARTED,x,u),q.on(n.Z.MANIFEST_LOADING_FINISHED,re,u),q.on(n.Z.THROUGHPUT_MEASUREMENT_STORED,ee,u)}},r=(0,_.Z)(ne).getInstance().getLogger(u),ie(),u}_r.__dashjs_factory_name="ContentSteeringController";const Tr=h.Z.getSingletonFactory(_r);function Sr(){var u,r,c,y=this.context,A=(0,ot.Z)(y).getInstance();return u={select:function(T){if(!T||T.length===0)return null;var m=null;return A.get().streaming.applyContentSteering&&(m=function(R){var G=c.getCurrentSteeringResponseData();return G&&G.pathwayPriority&&G.pathwayPriority.length>0?function(){for(var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],N=0,H=null,q=function(){var ge=V[N],ne=Y.findIndex(function(ue){return ue.serviceLocation&&ue.serviceLocation===ge});if(ne!==-1&&!r.contains(Y[ne].serviceLocation))return H=Y[ne],"break";N+=1};N<V.length&&q()!=="break";);return H}(G.pathwayPriority,R):null}(T)),m||(m=function(R){return R[0]}(T)),m},setConfig:function(T){T.blacklistController&&(r=T.blacklistController),T.contentSteeringController&&(c=T.contentSteeringController)},reset:function(){r.reset()}},r=Vr(y).create({updateEventName:i.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:i.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD}),c=Tr(y).getInstance(),u}Sr.__dashjs_factory_name="LocationSelector";const Ci=h.Z.getClassFactory(Sr);function ur(){var u,r,c,y,A,T,m,R,G,V,Y,N,H,q,ge=this.context,ne=(0,g.Z)(ge).getInstance(),ue=(0,Ce.Z)(ge).getInstance();function fe(){c=NaN,m=!1,A=!0,T=!1,x()}function x(){y!==null&&(clearTimeout(y),y=null)}function re(Q){x(),T||(isNaN(Q)&&!isNaN(c)&&(Q=1e3*c),isNaN(Q)||(r.debug("Refresh manifest in "+Q+" milliseconds."),y=setTimeout(L,Q)))}function ee(){var Q=arguments.length>0&&arguments[0]!==void 0&&arguments[0];m=!0;var ie=G.getValue(),M=ie.url,B=null,me=Y.getPatchLocation(ie),Te=V.select(me),Ie=null;if(Te&&!Q)M=Te.url,B=Te.serviceLocation,Ie=Te.queryParams;else{var Oe=ae(ie),Ee=V.select(Oe);Ee&&(M=Ee.url,B=Ee.serviceLocation,Ie=Ee.queryParams)}ue.isRelative(M)&&(M=ue.resolve(M,ie.url)),R.load(M,B,Ie)}function ae(Q){var ie=Y.getLocation(Q),M=H.getSynthesizedLocationElements(ie);return ie.concat(M)}function p(Q){if(Q){if(Y.getIsPatch(Q)){var ie=Q;Q=G.getValue();var M=Y.isPatchValid(Q,ie),B=M;if(M){var me=Y.getPublishTime(Q);B=Y.applyPatchToManifest(Q,ie);var Te=Y.getPublishTime(Q);B=me.getTime()!=Te.getTime()}if(!B)return r.debug("Patch provided is invalid, performing full manifest refresh"),void ee(!0);Q.loadedTime=new Date}}else(Q=G.getValue()).loadedTime=new Date;if(G.getValue()&&G.getValue().type===t.Z.DYNAMIC&&Q.type===t.Z.STATIC)return ne.trigger(i.Z.DYNAMIC_TO_STATIC),m=!1,void(T=!0);G.setValue(Q);var Ie=new Date,Oe=(Ie.getTime()-Q.loadedTime.getTime())/1e3;1e3*(c=Y.getManifestUpdatePeriod(Q,Oe))>2147483647&&(c=2147483647e-3),ne.trigger(i.Z.MANIFEST_UPDATED,{manifest:Q}),r.info("Manifest has been refreshed at "+Ie+"["+Ie.getTime()/1e3+"] "),A||re()}function L(){A||(m?re(q.get().streaming.manifestUpdateRetryInterval):ee())}function Z(Q){Q.error?Q.error.code===te.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&N.error(Q.error):p(Q.manifest)}function O(){A=!1,re()}function w(){(A=!q.get().streaming.scheduling.scheduleWhilePaused)&&x()}function z(){m=!1}return u={initialize:function(){fe(),ne.on(i.Z.STREAMS_COMPOSED,z,this),ne.on(n.Z.PLAYBACK_STARTED,O,this),ne.on(n.Z.PLAYBACK_PAUSED,w,this),ne.on(i.Z.INTERNAL_MANIFEST_LOADED,Z,this)},setManifest:function(Q){p(Q)},refreshManifest:ee,getIsUpdating:function(){return m},setConfig:function(Q){Q&&(Q.manifestModel&&(G=Q.manifestModel),Q.adapter&&(Y=Q.adapter),Q.manifestLoader&&(R=Q.manifestLoader),Q.errHandler&&(N=Q.errHandler),Q.locationSelector&&(V=Q.locationSelector),Q.settings&&(q=Q.settings),Q.contentSteeringController&&(H=Q.contentSteeringController))},reset:function(){ne.off(n.Z.PLAYBACK_STARTED,O,this),ne.off(n.Z.PLAYBACK_PAUSED,w,this),ne.off(i.Z.STREAMS_COMPOSED,z,this),ne.off(i.Z.INTERNAL_MANIFEST_LOADED,Z,this),fe()}},r=(0,_.Z)(ge).getInstance().getLogger(u),V=Ci(ge).create(),u}ur.__dashjs_factory_name="ManifestUpdater";const li=h.Z.getClassFactory(ur);function cr(){var u,r,c,y,A,T,m,R,G,V,Y,N,H,q,ge,ne,ue=this.context,fe=(0,g.Z)(ue).getInstance(),x=(0,Ce.Z)(ue).getInstance();function re(){R=[],G=[],V=null,Y=null,H=null,N=NaN,c=!1,y=!1,q=A.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function ee(){A.get().streaming.utcSynchronization.enabled&&!c&&!y&&H&&H.value&&H.schemeIdUri&&!isNaN(N)&&!isNaN(A.get().streaming.utcSynchronization.backgroundAttempts)&&(Y&&(Date.now()-Y)/1e3<30||(R=[],y=!0,ae(isNaN(A.get().streaming.utcSynchronization.backgroundAttempts)?2:A.get().streaming.utcSynchronization.backgroundAttempts)))}function ae(Ee){try{if(Ee<=0)return void Ie();var Pe=Date.now();T[H.schemeIdUri](H.value,function(ct){var $e=Date.now(),nt=L(Pe,$e,ct);R.push(nt),ae(Ee-1)},function(){Ie()})}catch{Ie()}}function p(){var Ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,Pe=Ee||0;if(!G||G.length===0||Pe>=G.length)Z();else{var ct=G[Pe];if(ct)if(T.hasOwnProperty(ct.schemeIdUri)){var $e=new Date().getTime();T[ct.schemeIdUri](ct.value,function(nt){var Tt=new Date().getTime(),Dt=L($e,Tt,nt);H=ct,Z(Dt)},function(){p(Pe+1)})}else p(Pe+1);else Z()}}function L(Ee,Pe,ct){return ct-(Pe-(Pe-Ee)/2)}function Z(){var Ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN,Pe=isNaN(Ee);Pe&&A.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?me():Te(Pe,Ee)}function O(Ee){var Pe=Date.parse(Ee);return isNaN(Pe)&&(Pe=function(ct){var $e,nt,Tt=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(ct);return $e=Date.UTC(parseInt(Tt[1],10),parseInt(Tt[2],10)-1,parseInt(Tt[3],10),parseInt(Tt[4],10),parseInt(Tt[5],10),Tt[6]&&(parseInt(Tt[6],10)||0),Tt[7]&&1e3*parseFloat(Tt[7])||0),Tt[9]&&Tt[10]&&(nt=60*parseInt(Tt[9],10)+parseInt(Tt[10],10),$e+=(Tt[8]==="+"?-1:1)*nt*60*1e3),new Date($e).getTime()}(Ee)),Pe}function w(Ee){return Date.parse(Ee)}function z(Ee){return Date.parse(Ee)}function Q(Ee,Pe,ct){ct()}function ie(Ee,Pe,ct){var $e=O(Ee);isNaN($e)?ct():Pe($e)}function M(Ee,Pe,ct,$e,nt){var Tt,Dt,_e=!1,le=new XMLHttpRequest,Me=nt?Ae.w.HEAD:Ae.w.GET,ye=Pe.match(/\S+/g);if(Pe=ye.shift(),Tt=function(){_e||(_e=!0,ye.length?M(Ee,ye.join(" "),ct,$e,nt):$e())},Dt=function(){var Ge,Ve;le.status===200&&(Ge=nt?le.getResponseHeader("Date"):le.response,Ve=Ee(Ge),isNaN(Ve)||(ct(Ve),_e=!0))},x.isRelative(Pe)){var xe=ne.resolve();xe&&(Pe=x.resolve(Pe,xe.url))}le.open(Me,Pe),le.timeout=5e3,le.onload=Dt,le.onloadend=Tt,le.send()}function B(Ee,Pe,ct){M(z,Ee,Pe,ct,!0)}function me(){var Ee=m.getLatestMPDRequestHeaderValueByID("Date"),Pe=Ee!==null?new Date(Ee).getTime():Number.NaN;isNaN(Pe)?Te(!0):Te(!1,Pe-Date.now())}function Te(Ee,Pe){if(isNaN(N)||isNaN(Pe)||Ee||function($e){try{var nt,Tt=Oe($e),Dt=isNaN(q)?30:q,_e=isNaN(A.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:A.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,le=isNaN(A.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:A.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,Me=isNaN(A.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:A.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;Tt?(nt=Math.min(Dt*_e,le),r.debug("Increasing timeBetweenSyncAttempts to ".concat(nt))):(nt=Math.max(Dt/_e,Me),r.debug("Decreasing timeBetweenSyncAttempts to ".concat(nt))),q=nt}catch{}}(Pe),!Ee&&!isNaN(Pe)){V=Date.now(),c=!1;var ct=isNaN(N);N=Pe,ct&&ee(),r.debug("Completed UTC sync. Setting client - server offset to ".concat(Pe))}Ee&&(H=null,c=!1,ge.error(new k.Z(te.TIME_SYNC_FAILED_ERROR_CODE,te.TIME_SYNC_FAILED_ERROR_MESSAGE))),fe.trigger(i.Z.UPDATE_TIME_SYNC_OFFSET,{offset:Pe}),fe.trigger(i.Z.TIME_SYNCHRONIZATION_COMPLETED)}function Ie(){if(R&&R.length!==0){var Ee=R.reduce(function(Pe,ct){return Pe+ct},0)/R.length;Oe(Ee)?r.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(r.debug("Completed background UTC sync. Setting client - server offset to ".concat(Ee)),N=Ee,fe.trigger(i.Z.UPDATE_TIME_SYNC_OFFSET,{offset:N})),y=!1,Y=Date.now()}}function Oe(Ee){try{if(isNaN(N))return!0;var Pe=A.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(A.get().streaming.utcSynchronization.maximumAllowedDrift)?A.get().streaming.utcSynchronization.maximumAllowedDrift:100;return Ee>=N-Pe&&Ee<=N+Pe}catch{return!0}}return u={initialize:function(){re(),T={"urn:mpeg:dash:utc:http-head:2014":B,"urn:mpeg:dash:utc:http-xsdate:2014":M.bind(null,O),"urn:mpeg:dash:utc:http-iso:2014":M.bind(null,w),"urn:mpeg:dash:utc:direct:2014":ie,"urn:mpeg:dash:utc:http-head:2012":B,"urn:mpeg:dash:utc:http-xsdate:2012":M.bind(null,O),"urn:mpeg:dash:utc:http-iso:2012":M.bind(null,w),"urn:mpeg:dash:utc:direct:2012":ie,"urn:mpeg:dash:utc:http-ntp:2014":Q,"urn:mpeg:dash:utc:ntp:2014":Q,"urn:mpeg:dash:utc:sntp:2014":Q}},attemptSync:function(Ee,Pe){G=Ee,c||(function(ct){try{if(!ct||!A.get().streaming.utcSynchronization.enabled)return!1;var $e=isNaN(q)?30:q;return!(V&&$e&&!isNaN($e))||(Date.now()-V)/1e3>=$e}catch{return!0}}(Pe)?(c=!0,p()):fe.trigger(i.Z.TIME_SYNCHRONIZATION_COMPLETED))},setConfig:function(Ee){Ee&&(Ee.dashMetrics&&(m=Ee.dashMetrics),Ee.baseURLController&&(ne=Ee.baseURLController),Ee.errHandler&&(ge=Ee.errHandler),Ee.settings&&(A=Ee.settings))},reset:function(){re(),fe.off(i.Z.ATTEMPT_BACKGROUND_SYNC,ee,u)}},r=(0,_.Z)(ue).getInstance().getLogger(u),fe.on(i.Z.ATTEMPT_BACKGROUND_SYNC,ee,u),u}cr.__dashjs_factory_name="TimeSyncController";var Kr=h.Z.getSingletonFactory(cr);Kr.HTTP_TIMEOUT_MS=5e3,h.Z.updateSingletonFactory(cr.__dashjs_factory_name,Kr);const Eo=Kr;function ia(){var u,r,c,y=this.context;return u={createMediaSource:function(){var A="WebKitMediaSource"in window;return"MediaSource"in window?r=new MediaSource:A&&(r=new WebKitMediaSource),r},attachMediaSource:function(A){var T=window.URL.createObjectURL(r);return A.setSource(T),T},detachMediaSource:function(A){A.setSource(null)},setDuration:function A(T){r&&r.readyState==="open"&&(T===null&&isNaN(T)||r.duration!==T&&(function(m){for(var R=m.sourceBuffers,G=0;G<R.length;G++)if(R[G].updating)return!0;return!1}(r)?setTimeout(A.bind(null,T),50):(c.info("Set MediaSource duration:"+T),r.duration=T)))},setSeekable:function(A,T){r&&typeof r.setLiveSeekableRange=="function"&&typeof r.clearLiveSeekableRange=="function"&&r.readyState==="open"&&A>=0&&A<T&&(r.clearLiveSeekableRange(),r.setLiveSeekableRange(A,T))},signalEndOfStream:function(A){if(A&&A.readyState==="open"){for(var T=A.sourceBuffers,m=0;m<T.length;m++)if(T[m].updating||T[m].buffered.length===0)return;c.info("call to mediaSource endOfStream"),A.endOfStream()}}},c=(0,_.Z)(y).getInstance().getLogger(u),u}ia.__dashjs_factory_name="MediaSourceController";const vo=h.Z.getSingletonFactory(ia);function aa(){var u,r,c,y,A,T,m,R,G,V,Y,N="urn:mpeg:dash:event:2012",H="discarded",q="updated",ge="added",ne=this.context,ue=(0,g.Z)(ne).getInstance();function fe(){if(!m||!R)throw new Error("setConfig function has to be called previously")}function x(){Y=!1,c={},y={},A=null,V=!1,T=Date.now()/1e3}function re(){try{if(!V){V=!0;var Q=R.getTime(),ie=Q-T;ie=T>0?Math.max(0,ie):0,ee(y,ie,Q),ee(c,ie,Q),ae(y),ae(c),T=Q,V=!1}}catch(M){V=!1,r.error(M)}}function ee(Q,ie,M){try{O(Q,function(B){if(B!==void 0){var me=isNaN(B.duration)?0:B.duration;B.calculatedPresentationTime<=M&&B.calculatedPresentationTime+ie+me>=M?z(B,n.Z.EVENT_MODE_ON_START):(w(M,me+ie,B.calculatedPresentationTime)||function(Te){try{var Ie=Te.eventStream.period.start+Te.eventStream.period.duration;return Te.calculatedPresentationTime>Ie}catch(Oe){return r.error(Oe),!1}}(B))&&(r.debug("Removing event ".concat(B.id," from period ").concat(B.eventStream.period.id," as it is expired or invalid")),function(Te,Ie){try{var Oe=Ie.eventStream.schemeIdUri,Ee=Ie.eventStream.period.id,Pe=Ie.eventStream.value,ct=Ie.id;Te[Ee][Oe]=Te[Ee][Oe].filter(function($e){return Pe&&$e.eventStream.value&&$e.eventStream.value!==Pe||$e.id!==ct}),Te[Ee][Oe].length===0&&delete Te[Ee][Oe]}catch($e){r.error($e)}}(Q,B))}})}catch(B){r.error(B)}}function ae(Q){try{for(var ie in Q)Q.hasOwnProperty(ie)&&Object.keys(Q[ie]).length===0&&delete Q[ie]}catch(M){r.error(M)}}function p(Q,ie){var M=arguments.length>2&&arguments[2]!==void 0&&arguments[2],B=Q.eventStream.schemeIdUri,me=Q.eventStream.value,Te=Q.id,Ie=H;ie[B]||(ie[B]=[]);var Oe=ie[B].findIndex(function(Pe){return(!me||Pe.eventStream.value&&Pe.eventStream.value===me)&&Pe.id===Te});if(Oe===-1)ie[B].push(Q),Q.triggeredReceivedEvent=!1,Q.triggeredStartEvent=!1,Ie=ge;else if(M){var Ee=ie[B][Oe];Q.triggeredReceivedEvent=Ee.triggeredReceivedEvent,Q.triggeredStartEvent=Ee.triggeredStartEvent,ie[B][Oe]=Q,Ie=q}return Ie}function L(Q){try{if(Q.eventStream.value==1){var ie,M=Q.calculatedPresentationTime;ie=Q.calculatedPresentationTime==4294967295?NaN:Q.calculatedPresentationTime+Q.duration,ue.trigger(n.Z.MANIFEST_VALIDITY_CHANGED,{id:Q.id,validUntil:M,newDuration:ie,newManifestValidAfter:NaN},{mode:n.Z.EVENT_MODE_ON_START})}}catch(B){r.error(B)}}function Z(Q){try{var ie=R.getTime();O(Q,function(M){var B=M.eventStream&&M.eventStream.period&&!isNaN(M.eventStream.period.duration)?M.eventStream.period.duration:NaN,me=M.eventStream&&M.eventStream.period&&!isNaN(M.eventStream.period.start)?M.eventStream.period.start:NaN;if(!isNaN(B)&&!isNaN(me)){var Te=M.calculatedPresentationTime;Math.abs(Te-ie)<300&&z(M,n.Z.EVENT_MODE_ON_START)}})}catch(M){r.error(M)}}function O(Q,ie){try{if(Q)for(var M=Object.keys(Q),B=0;B<M.length;B++)for(var me=Q[M[B]],Te=Object.keys(me),Ie=0;Ie<Te.length;Ie++)me[Te[Ie]].forEach(function(Oe){Oe!==void 0&&ie(Oe)})}catch(Oe){r.error(Oe)}}function w(Q,ie,M){try{return Q-ie>M}catch(B){return r.error(B),!1}}function z(Q,ie){try{var M=R.getTime(),B=Q.id;if(ie===n.Z.EVENT_MODE_ON_RECEIVE&&!Q.triggeredReceivedEvent)return r.debug("Received event ".concat(B)),Q.triggeredReceivedEvent=!0,void ue.trigger(Q.eventStream.schemeIdUri,{event:Q},{mode:ie});Q.triggeredStartEvent||(Q.eventStream.schemeIdUri===N&&Q.eventStream.value==1?Q.duration===0&&Q.presentationTimeDelta===0||(r.debug("Starting manifest refresh event ".concat(B," at ").concat(M)),function(){try{fe(),m.refreshManifest()}catch(me){r.error(me)}}()):Q.eventStream.schemeIdUri==="urn:mpeg:dash:event:callback:2015"&&Q.eventStream.value==1?(r.debug("Starting callback event ".concat(B," at ").concat(M)),function(me){try{(0,xt.Z)(ne).create({}).load({method:"get",url:me,request:{responseType:"arraybuffer"}})}catch(Te){r.error(Te)}}(Q.messageData)):(r.debug("Starting event ".concat(B," from period ").concat(Q.eventStream.period.id," at ").concat(M)),ue.trigger(Q.eventStream.schemeIdUri,{event:Q},{mode:ie})),Q.triggeredStartEvent=!0)}catch(me){r.error(me)}}return u={addInlineEvents:function(Q,ie){try{if(fe(),c[ie]||(c[ie]={}),Q)for(var M=0;M<Q.length;M++){var B=Q[M];if(!w(R.getTime(),isNaN(B.duration)?0:B.duration,B.calculatedPresentationTime)){var me=p(B,c[ie],!0);me===ge?(r.debug("Added inline event with id ".concat(B.id," from period ").concat(ie)),z(B,n.Z.EVENT_MODE_ON_RECEIVE)):me===q&&r.debug("Updated inline event with id ".concat(B.id," from period ").concat(ie))}}}catch(Te){throw Te}},addInbandEvents:function(Q,ie){try{fe(),y[ie]||(y[ie]={});for(var M=0;M<Q.length;M++){var B=Q[M];w(R.getTime(),isNaN(B.duration)?0:B.duration,B.calculatedPresentationTime)||(p(B,y[ie],!1)===ge?(B.eventStream.schemeIdUri===N&&L(B),r.debug("Added inband event with id ".concat(B.id," from period ").concat(ie)),z(B,n.Z.EVENT_MODE_ON_RECEIVE)):r.debug("Inband event with scheme_id_uri ".concat(B.eventStream.schemeIdUri,", value ").concat(B.eventStream.value,", period id ").concat(ie," and event id ").concat(B.id," was ignored because it has been added before.")))}re()}catch(me){throw me}},getInbandEvents:function(){return y},getInlineEvents:function(){return c},start:function(){try{fe(),r.debug("Start Event Controller");var Q=G.get().streaming.eventControllerRefreshDelay;Y||isNaN(Q)||(Y=!0,A=setInterval(re,Q))}catch(ie){throw ie}},setConfig:function(Q){try{if(!Q)return;Q.manifestUpdater&&(m=Q.manifestUpdater),Q.playbackController&&(R=Q.playbackController),Q.settings&&(G=Q.settings)}catch(ie){throw ie}},reset:function(){(function(){try{A!==null&&Y&&(clearInterval(A),A=null,Y=!1,function(){try{Z(y),Z(c)}catch(Q){r.error(Q)}}())}catch(Q){throw Q}})(),x()}},r=(0,_.Z)(ne).getInstance().getLogger(u),x(),u}aa.__dashjs_factory_name="EventController";const _o=h.Z.getSingletonFactory(aa),Mr={LEVELS:{SUGGESTION:"Suggestion",WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}};function Di(u,r){(r==null||r>u.length)&&(r=u.length);for(var c=0,y=new Array(r);c<r;c++)y[c]=u[c];return y}function oa(){var u,r,c,y,A,T,m,R,G,V,Y,N,H,q,ge,ne,ue,fe,x,re,ee,ae,p,L,Z,O,w,z,Q,ie,M,B,me,Te,Ie,Oe,Ee,Pe,ct,$e,nt,Tt,Dt,_e,le,Me,ye,xe,Ge=this.context,Ve=(0,g.Z)(Ge).getInstance();function ft(){if(!(T&&T.hasOwnProperty("load")&&ee&&ee.hasOwnProperty("initialize")&&ee.hasOwnProperty("reset")&&ee.hasOwnProperty("getClientTimeOffset")&&m&&re&&G&&me))throw new Error(e.Z.MISSING_CONFIG_ERROR)}function St(){if(!A||!A.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}function qt(){(function(){try{var Qe=R.getStreamsInfo();if(!p&&Qe.length===0)throw new Error("There are no periods in the MPD");p&&Qe.length>0&&G.updateManifestUpdateInfo({currentTime:me.getTime(),buffered:B.getBufferRange(),presentationStartTime:Qe[0].start,clientTimeOffset:ee.getClientTimeOffset()}),ae.length>0&&function(dn){dn.length!==0?ae=ae.filter(function(tn){var Cn=dn.filter(function(bn){return bn.id===tn.getId()}).length>0||tn.getId()===p.getId();return Cn||(r.debug("Removing stream ".concat(tn.getId())),tn.reset(!0)),Cn}):r.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects.")}(Qe);for(var bt=[],Vt=0,Jt=Qe.length;Vt<Jt;Vt++){var fn=Qe[Vt];bt.push(kt(fn)),G.addManifestUpdateStreamInfo(fn)}Promise.all(bt).then(function(){return new Promise(function(dn,tn){p?dn():Ht(Qe,dn,tn)})}).then(function(){Ve.trigger(i.Z.STREAMS_COMPOSED),Lt()}).catch(function(dn){throw dn})}catch(dn){re.error(new k.Z(te.MANIFEST_ERROR_ID_NOSTREAMS_CODE,dn.message+" nostreamscomposed",m.getValue())),ie=!0,kr()}})()}function jt(){le=!0}function kt(Qe){var bt=Xr(Qe.id);return bt?bt.updateData(Qe):(bt=ui(Ge).create({manifestModel:m,mediaPlayerModel:Ie,dashMetrics:G,manifestUpdater:A,adapter:R,timelineConverter:ee,capabilities:c,capabilitiesFilter:y,errHandler:re,baseURLController:H,segmentBaseController:q,textController:Z,abrController:ne,playbackController:me,eventController:fe,mediaController:ue,protectionController:L,videoModel:B,streamInfo:Qe,settings:_e}),ae.push(bt),bt.initialize(),Promise.resolve())}function Ht(Qe,bt,Vt){try{Ke();var Jt=G.getCurrentDVRInfo().range;if(Jt.end<Jt.start){Me&&clearTimeout(Me);var fn=Math.min(1e3*(-1*(Jt.end-Jt.start)+2),2147483647);return r.debug("Waiting for ".concat(fn," ms before playback can start")),Ve.trigger(i.Z.AST_IN_FUTURE,{delay:fn}),void(Me=setTimeout(function(){Ht(Qe,bt,Vt)},fn))}_e.get().streaming.applyProducerReferenceTime&&Te.calculateProducerReferenceTimeOffsets(Qe);var dn=Qe[0].manifestInfo;if(_e.get().streaming.applyServiceDescription&&Te.applyServiceDescription(dn),R.getIsDynamic()){var tn=Dr(Qe,dn);me.computeAndSetLiveDelay(tn,dn)}(_e.get().streaming.applyContentSteering&&N.shouldQueryBeforeStart()?N.loadSteeringData():Promise.resolve()).then(function(){var Cn=m.getValue();Cn&&H.update(Cn),Kt(),bt()}).catch(function(Cn){r.error(Cn),Kt(),bt()})}catch(Cn){Vt(Cn)}}function Kt(){var Qe=function(){var Jt;if(R.getIsDynamic()){var fn=G.getCurrentDVRInfo();Jt=(fn&&fn.range?fn.range.end:0)-me.getOriginalLiveDelay();var dn=fn?fn.range:null;if(dn){if(isNaN(ye)&&ye.toString().indexOf("posix:")===-1){var tn=$n(!0);isNaN(tn)||(r.info("Start time from URI parameters: ".concat(tn)),Jt=Math.min(Jt,tn))}else{r.info("Start time provided by the app: ".concat(ye));var Cn=Hn(!0,ye);isNaN(Cn)||(Jt=Math.min(Jt,Cn))}var bn=_e.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;Jt=Math.max(Jt,dn.start+bn)}}else if(Jt=$r()[0].getStreamInfo().start,isNaN(ye)){var pr=$n(!1);isNaN(pr)||(r.info("Start time from URI parameters: ".concat(pr)),Jt=Math.max(Jt,pr))}else{r.info("Start time provided by the app: ".concat(ye));var Zr=Hn(!1,ye);isNaN(Zr)||(Jt=Math.max(Jt,Zr))}return Jt}(),bt=Zt(Qe),Vt=bt!==null?bt:ae[0];Ve.trigger(i.Z.INITIAL_STREAM_SWITCH,{startTime:Qe}),rn(Vt,null,Qe),$e||($e=setInterval(function(){!z&&me.getTimeToStreamEnd()<=0&&!me.isSeeking()&&Ve.trigger(i.Z.PLAYBACK_ENDED,{isLast:Ir().isLast})},200))}function rn(Qe,bt,Vt){try{if(z||!Qe||bt===Qe&&Qe.getIsActive())return;z=!0,Ve.trigger(i.Z.PERIOD_SWITCH_STARTED,{fromStreamInfo:bt?bt.getStreamInfo():null,toStreamInfo:Qe.getStreamInfo()});var Jt=!1;p=Qe,bt&&(Jt=Bt(Qe,bt),bt.deactivate(Jt)),Vt=isNaN(Vt)?!Jt&&bt?Qe.getStreamInfo().start:NaN:Vt,r.info("Switch to stream ".concat(Qe.getId(),". Seektime is ").concat(Vt,", current playback time is ").concat(me.getTime(),". Seamless period switch is set to ").concat(Jt)),Tt=Tt.filter(function(fn){return fn.getId()!==p.getId()}),me.initialize(Ir(),!!bt),B.getElement()?un(Vt,Jt,!1):en(Vt,Jt)}catch{z=!1}}function un(Qe,bt){var Vt,Jt=arguments.length>2&&arguments[2]!==void 0&&arguments[2];function fn(){if(M&&M.readyState==="open"){r.debug("MediaSource is open!"),window.URL.revokeObjectURL(Vt),M.removeEventListener("sourceopen",fn),M.removeEventListener("webkitsourceopen",fn),Sn();var tn=G.getCurrentDVRInfo();V.setSeekable(tn.range.start,tn.range.end),Jt?(isNaN(Qe)||me.seek(Qe,!0,!0),p.setMediaSource(M).then(function(){p.initializeForTextWithMediaSource(M)})):en(Qe,bt)}}function dn(){M.addEventListener("sourceopen",fn,!1),M.addEventListener("webkitsourceopen",fn,!1),Vt=V.attachMediaSource(B),r.debug("MediaSource attached to element.  Waiting on open...")}M?bt?en(Qe,bt):(V.detachMediaSource(B),dn()):(M=V.createMediaSource(),dn())}function en(Qe,bt){p.activate(M,bt?nt:void 0,Qe).then(function(Vt){if(Vt){var Jt=Object.keys(Vt);Jt.length>0&&Vt[Jt[0]].getBuffer().changeType&&(Dt=!0),nt=Vt}isNaN(Qe)||(Ve.trigger(i.Z.SEEK_TARGET,{time:Qe},{streamId:p.getId()}),me.seek(Qe,!1,!0),p.startScheduleControllers()),z=!1,Ve.trigger(i.Z.PERIOD_SWITCH_COMPLETED,{toStreamInfo:Ir()})})}function ln(Qe){var bt=Zt(Qe.seekTime);bt&&bt!==p?bt&&bt!==p&&(an(),function(Vt,Jt){var fn=Vt&&!isNaN(Vt.seekTime)?Vt.seekTime:NaN,dn=p.getProcessors().map(function(tn){return tn.prepareOuterPeriodPlaybackSeeking(Vt)});Promise.all(dn).then(function(){rn(Jt,p,fn)}).catch(function(tn){re.error(tn)})}(Qe,bt)):(an(),function(Vt){p.getProcessors().forEach(function(Jt){return Jt.prepareInnerPeriodPlaybackSeeking(Vt)}),mr(Le.USER_REQUEST_STOP_REASON)}(Qe)),br(ve.SEEK_START_REASON)}function an(){cn()}function cn(){Tt&&Tt.length>0&&(Tt.forEach(function(Qe){Qe.deactivate(!0)}),Tt=[])}function gt(Qe){Qe.newMediaInfo.streamInfo.id===p.getId()&&(cn(),p.prepareTrackChange(Qe))}function Bt(Qe,bt){try{return _e.get().streaming.buffer.reuseExistingSourceBuffers&&(bt.isProtectionCompatible(Qe)||le)&&(Dt&&_e.get().streaming.buffer.useChangeTypeForTrackSwitch||bt.isMediaCodecCompatible(Qe,bt))}catch{return!1}}function Gt(Qe){var bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(M&&!Qe.getPreloaded()){var Vt=Bt(Qe,bt);Vt&&Qe.startPreloading(M,nt).then(function(){Tt.push(Qe)})}}function Zt(Qe){if(isNaN(Qe))return null;for(var bt=ae.length,Vt=0;Vt<bt;Vt++){var Jt=ae[Vt];if(Qe<parseFloat((Jt.getStartTime()+Jt.getDuration()).toFixed(5)))return Jt}return null}function Ke(){try{var Qe=R.getIsDynamic(),bt=R.getStreamsInfo()[0].manifestInfo,Vt=me.getTime(),Jt=ee.calcTimeShiftBufferWindow(ae,Qe),fn=In();if(Jt.start===void 0||Jt.end===void 0)return;fn&&fn.length!==0?fn.forEach(function(dn){G.addDVRInfo(dn.getType(),Vt,bt,Jt)}):G.addDVRInfo(e.Z.VIDEO,Vt,bt,Jt)}catch{}}function yt(Qe){if(Pe&&w){var bt=Ie.getInitialBufferLevel(),Vt=[e.Z.TEXT];(isNaN(bt)||bt<=me.getBufferLevel(Vt)||R.getIsDynamic()&&bt>me.getLiveDelay())&&(Pe=!1,br(ve.INITIAL_PLAYOUT_START_REASON),me.play())}Qe&&Qe.mediaType&&G.addBufferLevel(Qe.mediaType,new Date,1e3*Qe.bufferLevel)}function Ye(Qe){Qe.streamInfo.id===p.getId()&&Qe.reason&&Qe.reason.forceReplace&&cn(),Xr(Qe.streamInfo.id).prepareQualityChange(Qe)}function Re(){if(R.getIsDynamic()&&me.getOriginalLiveDelay()!==0&&p){var Qe=R.getStreamsInfo();if(Qe.length>0){var bt=Qe[0].manifestInfo,Vt=Dr(Qe,bt);me.computeAndSetLiveDelay(Vt,bt)}}}function se(){if(hr()){var Qe=B.getPlaybackQuality();Qe&&G.addDroppedFrames(Qe)}}function Ue(){r.debug("[onPlaybackStarted]"),!Pe&&Ee&&br(ve.RESUME_FROM_PAUSE_START_REASON),Pe&&(Pe=!1),ct&&(ct=!1,_e.get().streaming.applyContentSteering&&!N.shouldQueryBeforeStart()&&N.loadSteeringData()),Ee=!1}function it(Qe){r.debug("[onPlaybackPaused]"),Qe.ended||(Ee=!0,mr(Le.USER_REQUEST_STOP_REASON))}function Rt(Qe){r.debug("Stream with id ".concat(Qe.streamInfo.id," finished buffering"));var bt=Qe.streamInfo.isLast;M&&bt?(r.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),V.signalEndOfStream(M)):Lt()}function Lt(){if(p&&p.getHasFinishedBuffering())for(var Qe=function(){var fn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{var dn=fn||p||null;if(dn){var tn=dn.getStreamInfo();return ae.filter(function(Cn){var bn=Cn.getStreamInfo();return bn.start>tn.start&&tn.id!==bn.id})}}catch{return[]}}(p),bt=0;bt<Qe.length;){var Vt=Qe[bt],Jt=bt===0?p:Qe[bt-1];!Vt.getPreloaded()&&Jt.getHasFinishedBuffering()&&M&&Gt(Vt,Jt),bt+=1}}function nn(){$e&&(clearInterval($e),$e=null)}function In(){return p?p.getProcessors():[]}function Xn(Qe){if(p&&!p.getIsEndedEventSignaled()){p.setIsEndedEventSignaled(!0);var bt=function(){var Vt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,Jt=Vt||p||null;if(!Jt)return null;for(var fn=Jt.getStreamInfo(),dn=fn.start,tn=0,Cn=-1,bn=NaN;tn<ae.length;){var pr=ae[tn].getStreamInfo(),Zr=pr.start-dn;Zr>0&&(isNaN(bn)||Zr<bn)&&fn.id!==pr.id&&(bn=Zr,Cn=tn),tn+=1}return Cn>=0?ae[Cn]:null}();bt?(r.debug("StreamController onEnded, found next stream with id ".concat(bt.getStreamInfo().id,". Switching from ").concat(p.getStreamInfo().id," to ").concat(bt.getStreamInfo().id)),rn(bt,p,NaN)):(r.debug("StreamController no next stream found"),p.setIsEndedEventSignaled(!1)),mr(bt?Le.END_OF_PERIOD_STOP_REASON:Le.END_OF_CONTENT_STOP_REASON)}Qe&&Qe.isLast&&(nn(),N.stopSteeringRequestTimer())}function Sn(Qe){var bt=Qe||Ir().manifestInfo.duration;V.setDuration(bt)}function $n(Qe){var bt=ge.getURIFragmentData();if(!bt||!bt.t)return NaN;var Vt=$r()[0].getStreamInfo().start;return bt.t=bt.t.split(",")[0],gr(Qe,bt.t,Vt)}function Hn(Qe,bt){var Vt=0;return Qe||(Vt=$r()[0].getStreamInfo().start),gr(Qe,bt,Vt)}function gr(Qe,bt,Vt){var Jt=R.getRegularPeriods()[0],fn=bt.toString(),dn=fn.indexOf("posix:")!==-1?fn.substring(6)==="now"?Date.now()/1e3:parseFloat(fn.substring(6)):NaN;return Qe&&!isNaN(dn)?ee.calcPresentationTimeFromWallTime(new Date(1e3*dn),Jt):parseFloat(fn)+Vt}function Dr(Qe,bt){try{var Vt=NaN;if(bt&&!isNaN(bt.maxFragmentDuration)&&isFinite(bt.maxFragmentDuration))return bt.maxFragmentDuration;if(Qe&&Qe.length===1){var Jt=Qe[0],fn=[e.Z.VIDEO,e.Z.AUDIO,e.Z.TEXT].reduce(function(tn,Cn){var bn=R.getMediaInfoForType(Jt,Cn);return bn&&bn.isFragmented!==!1&&tn.push(bn),tn},[]).reduce(function(tn,Cn){var bn=R.getVoRepresentations(Cn);return bn&&bn.length>0&&bn.forEach(function(pr){pr&&tn.push(pr)}),tn},[]).reduce(function(tn,Cn){var bn=R.convertRepresentationToRepresentationInfo(Cn);return bn&&bn.fragmentDuration&&!isNaN(bn.fragmentDuration)&&tn.push(bn.fragmentDuration),tn},[]);Vt=Math.max.apply(Math,function(tn){if(Array.isArray(tn))return Di(tn)}(dn=fn)||function(tn){if(typeof Symbol<"u"&&Symbol.iterator in Object(tn))return Array.from(tn)}(dn)||function(tn,Cn){if(tn){if(typeof tn=="string")return Di(tn,Cn);var bn=Object.prototype.toString.call(tn).slice(8,-1);return bn==="Object"&&tn.constructor&&(bn=tn.constructor.name),bn==="Map"||bn==="Set"?Array.from(tn):bn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(bn)?Di(tn,Cn):void 0}}(dn)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}())}return isFinite(Vt)?Vt:NaN}catch{return NaN}var dn}function lr(Qe){if(Qe.error)ie=!0,kr();else{r.info("Manifest updated... updating data system wide.");var bt=Qe.manifest;R.updatePeriods(bt);var Vt=R.getUTCTimingSources();!R.getIsDynamic()||Vt&&Vt.length!==0||Ve.trigger(n.Z.CONFORMANCE_VIOLATION,{level:Mr.LEVELS.WARNING,event:Mr.EVENTS.NO_UTC_TIMING_ELEMENT});var Jt=R.getIsDynamic()?Vt.concat(Oe.getUTCTimingSources()):Vt;y.filterUnsupportedFeatures(bt).then(function(){H.initialize(bt),Y.attemptSync(Jt,R.getIsDynamic())})}}function hr(){return!!p&&p.getHasVideoTrack()}function ir(){return!!p&&p.getHasAudioTrack()}function mr(Qe,bt){bt=bt||new Date,In().forEach(function(Vt){Vt.finalisePlayList(bt,Qe)}),G.addPlayList()}function br(Qe){G.createPlaylistMetrics(1e3*me.getTime(),Qe)}function Ar(Qe){if(Qe.error){var bt="";switch(Qe.error.code){case 1:bt="MEDIA_ERR_ABORTED";break;case 2:bt="MEDIA_ERR_NETWORK";break;case 3:bt="MEDIA_ERR_DECODE",xe.counts.mediaErrorDecode+=1;break;case 4:bt="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:bt="MEDIA_ERR_ENCRYPTED";break;default:bt="UNKNOWN"}bt==="MEDIA_ERR_DECODE"&&_e.get().errors.recoverAttempts.mediaErrorDecode>=xe.counts.mediaErrorDecode?function(){r.warn("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");var Vt=me.getTime();p.deactivate(!1),r.warn("MediaSource has been resetted. Resuming playback from time ".concat(Vt)),un(Vt,!1,!1)}():(Q=!0,Qe.error.message&&(bt+=" ("+Qe.error.message+")"),Qe.error.msExtendedCode&&(bt+=" (0x"+(Qe.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),r.fatal("Video Element Error: "+bt),Qe.error&&r.fatal(Qe.error),re.error(new k.Z(Qe.error.code,bt)),kr())}}function Ir(){return p?p.getStreamInfo():null}function Xr(Qe){for(var bt=0,Vt=ae.length;bt<Vt;bt++)if(ae[bt].getId()===Qe)return ae[bt];return null}function Ai(Qe){isNaN(Qe.newDuration)||Sn(Qe.newDuration)}function Fr(){ae=[],ye=NaN,L=null,z=!1,p=null,Q=!1,ie=!1,Pe=!0,ct=!0,Ee=!1,w=!0,$e=null,le=!1,Dt=!1,Tt=[],Me=null,xe={counts:{mediaErrorDecode:0}}}function kr(){ft(),Y.reset(),mr(Q||ie?Le.FAILURE_STOP_REASON:Le.USER_REQUEST_STOP_REASON);for(var Qe=0,bt=ae?ae.length:0;Qe<bt;Qe++)ae[Qe].reset(Q);Ve.off(n.Z.PLAYBACK_TIME_UPDATED,se,u),Ve.off(n.Z.PLAYBACK_SEEKING,ln,u),Ve.off(n.Z.PLAYBACK_ERROR,Ar,u),Ve.off(n.Z.PLAYBACK_STARTED,Ue,u),Ve.off(n.Z.PLAYBACK_PAUSED,it,u),Ve.off(n.Z.PLAYBACK_ENDED,Xn,u),Ve.off(n.Z.METRIC_ADDED,Jr,u),Ve.off(n.Z.MANIFEST_VALIDITY_CHANGED,Ai,u),Ve.off(n.Z.BUFFER_LEVEL_UPDATED,yt,u),Ve.off(n.Z.QUALITY_CHANGE_REQUESTED,Ye,u),i.Z.KEY_SESSION_UPDATED&&Ve.off(i.Z.KEY_SESSION_UPDATED,jt,u),Ve.off(i.Z.MANIFEST_UPDATED,lr,u),Ve.off(i.Z.STREAM_BUFFERING_COMPLETED,Rt,u),Ve.off(i.Z.TIME_SYNCHRONIZATION_COMPLETED,qt,u),Ve.off(i.Z.CURRENT_TRACK_CHANGED,gt,u),Ve.off(i.Z.SETTING_UPDATED_LIVE_DELAY,Re,u),Ve.off(i.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Re,u),H.reset(),A.reset(),fe.reset(),G.clearAllCurrentMetrics(),m.setValue(null),T.reset(),ee.reset(),x.reset(),M&&(V.detachMediaSource(B),M=null),B=null,L&&(L=null,O=null,m.getValue()&&Ve.trigger(i.Z.PROTECTION_DESTROYED,{data:m.getValue().url})),nn(),Ve.trigger(i.Z.STREAM_TEARDOWN_COMPLETE),Fr()}function Jr(Qe){if(Qe.metric===S.Z.DVR_INFO){var bt=ir()?e.Z.AUDIO:e.Z.VIDEO;Qe.mediaType===bt&&V.setSeekable(Qe.value.range.start,Qe.value.range.end)}}function $r(){return ae}return u={initialize:function(Qe,bt){ft(),w=Qe,O=bt,ee.initialize(),(A=li(Ge).create()).setConfig({manifestModel:m,adapter:R,manifestLoader:T,errHandler:re,settings:_e,contentSteeringController:N}),A.initialize(),(fe=_o(Ge).getInstance()).setConfig({manifestUpdater:A,playbackController:me,settings:_e}),fe.start(),Y.setConfig({dashMetrics:G,baseURLController:H,errHandler:re,settings:_e}),Y.initialize(),L&&(Ve.trigger(i.Z.PROTECTION_CREATED,{controller:L}),L.setMediaElement(B.getElement()),O&&L.setProtectionData(O)),Ve.on(n.Z.PLAYBACK_TIME_UPDATED,se,u),Ve.on(n.Z.PLAYBACK_SEEKING,ln,u),Ve.on(n.Z.PLAYBACK_ERROR,Ar,u),Ve.on(n.Z.PLAYBACK_STARTED,Ue,u),Ve.on(n.Z.PLAYBACK_PAUSED,it,u),Ve.on(n.Z.PLAYBACK_ENDED,Xn,u),Ve.on(n.Z.METRIC_ADDED,Jr,u),Ve.on(n.Z.MANIFEST_VALIDITY_CHANGED,Ai,u),Ve.on(n.Z.BUFFER_LEVEL_UPDATED,yt,u),Ve.on(n.Z.QUALITY_CHANGE_REQUESTED,Ye,u),i.Z.KEY_SESSION_UPDATED&&Ve.on(i.Z.KEY_SESSION_UPDATED,jt,u),Ve.on(i.Z.MANIFEST_UPDATED,lr,u),Ve.on(i.Z.STREAM_BUFFERING_COMPLETED,Rt,u),Ve.on(i.Z.TIME_SYNCHRONIZATION_COMPLETED,qt,u),Ve.on(i.Z.CURRENT_TRACK_CHANGED,gt,u),Ve.on(i.Z.SETTING_UPDATED_LIVE_DELAY,Re,u),Ve.on(i.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Re,u)},getActiveStreamInfo:Ir,addDVRMetric:Ke,hasVideoTrack:hr,hasAudioTrack:ir,getStreamById:Xr,getStreamForTime:Zt,getTimeRelativeToStreamId:function(Qe,bt){for(var Vt=null,Jt=0,fn=0,dn=null,tn=0;tn<ae.length;tn++){if(fn=(Vt=ae[tn]).getStartTime(),dn=Vt.getDuration(),Number.isFinite(fn)&&(Jt=fn),Vt.getId()===bt)return Qe-Jt;Number.isFinite(dn)&&(Jt+=dn)}return null},load:function(Qe){var bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;ft(),ye=bt,T.load(Qe)},loadWithManifest:function(Qe){var bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;St(),ye=bt,A.setManifest(Qe)},getActiveStreamProcessors:In,setConfig:function(Qe){Qe&&(Qe.capabilities&&(c=Qe.capabilities),Qe.capabilitiesFilter&&(y=Qe.capabilitiesFilter),Qe.manifestLoader&&(T=Qe.manifestLoader),Qe.manifestModel&&(m=Qe.manifestModel),Qe.mediaPlayerModel&&(Ie=Qe.mediaPlayerModel),Qe.customParametersModel&&(Oe=Qe.customParametersModel),Qe.protectionController&&(L=Qe.protectionController),Qe.adapter&&(R=Qe.adapter),Qe.dashMetrics&&(G=Qe.dashMetrics),Qe.errHandler&&(re=Qe.errHandler),Qe.timelineConverter&&(ee=Qe.timelineConverter),Qe.videoModel&&(B=Qe.videoModel),Qe.playbackController&&(me=Qe.playbackController),Qe.serviceDescriptionController&&(Te=Qe.serviceDescriptionController),Qe.contentSteeringController&&(N=Qe.contentSteeringController),Qe.textController&&(Z=Qe.textController),Qe.abrController&&(ne=Qe.abrController),Qe.mediaController&&(ue=Qe.mediaController),Qe.settings&&(_e=Qe.settings),Qe.baseURLController&&(H=Qe.baseURLController),Qe.uriFragmentModel&&(ge=Qe.uriFragmentModel),Qe.segmentBaseController&&(q=Qe.segmentBaseController))},setProtectionData:function(Qe){O=Qe,L&&L.setProtectionData(O)},getIsStreamSwitchInProgress:function(){return z},switchToVideoElement:function(Qe){p&&(me.initialize(Ir()),un(Qe,!1,!0))},getHasMediaOrInitialisationError:function(){return Q||ie},getStreams:$r,getActiveStream:function(){return p},getInitialPlayback:function(){return Pe},getAutoPlay:function(){return w},reset:kr},r=(0,_.Z)(Ge).getInstance().getLogger(u),Y=Eo(Ge).getInstance(),V=vo(Ge).getInstance(),x=tt(Ge).getInstance(),Fr(),u}oa.__dashjs_factory_name="StreamController";const sa=h.Z.getSingletonFactory(oa);function ua(){var u,r,c,y,A,T,m,R,G,V,Y,N,H=this.context,q=(0,g.Z)(H).getInstance();function ge(){N.debug("Stopping the gap controller"),A&&(clearInterval(A),A=null),function(){q.off(i.Z.WALLCLOCK_TIME_UPDATED,re,this),q.off(i.Z.INITIAL_STREAM_SWITCH,x,this),q.off(i.Z.PLAYBACK_SEEKING,ne,this),q.off(i.Z.BUFFER_REPLACEMENT_STARTED,ue,u),q.off(i.Z.TRACK_CHANGE_RENDERED,fe,u)}(),A=null,T=NaN,y=0,V=null,Y={}}function ne(){V&&(clearTimeout(V),V=null)}function ue(O){try{if(O.streamId!==R.getActiveStreamInfo().id||O.mediaType!==e.Z.VIDEO&&O.mediaType!==e.Z.AUDIO)return;O.streamId===R.getActiveStreamInfo().id&&(Y[O.mediaType]=!0)}catch(w){N.error(w)}}function fe(O){O&&O.mediaType&&(Y[O.mediaType]=!1)}function x(){A||function(){try{A||(N.debug("Starting the gap controller"),A=setInterval(function(){ee()&&Z(m.getTime())},100))}catch{}}()}function re(){if(ee(c.get().streaming.gaps.enableSeekFix)&&++y>=10){var O=m.getTime();r===O?Z(O,!0):(r=O,T=NaN),y=0}}function ee(){var O=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!R.getActiveStream())return!1;var w=Object.keys(Y).some(function(Q){return Y[Q]}),z=!!O&&ae();return!w&&c.get().streaming.gaps.jumpGaps&&R.getActiveStreamProcessors().length>0&&(!m.isSeeking()||z)&&!m.isPaused()&&!R.getIsStreamSwitchInProgress()&&!R.getHasMediaOrInitialisationError()}function ae(){var O=R.getActiveStream(),w=parseFloat((O.getStartTime()+O.getDuration()).toFixed(5));return m.getTime()+c.get().streaming.gaps.threshold>=w}function p(O,w){try{if(!O||O.length<=1&&w>0)return NaN;for(var z=NaN,Q=0;isNaN(z)&&Q<O.length;){var ie=Q>0?O.end(Q-1):0;w<O.start(Q)&&ie-w<c.get().streaming.gaps.threshold&&(z=Q),Q+=1}return z}catch{return null}}function L(O,w){for(var z=0,Q=O.length;z<Q;z++)if(w>=O.start(z)&&w<=O.end(z))return!0;return!1}function Z(O){var w,z=arguments.length>1&&arguments[1]!==void 0&&arguments[1],Q=c.get().streaming.gaps.enableStallFix,ie=c.get().streaming.gaps.stallSeek,M=c.get().streaming.gaps.smallGapLimit,B=c.get().streaming.gaps.jumpLargeGaps,me=G.getBufferRange(),Te=NaN,Ie=!1;if(w=p(me,O),!isNaN(w)){var Oe=me.start(w),Ee=Oe-O;Ee>0&&(Ee<=M||B)&&(Te=Oe)}var Pe=m.getTimeToStreamEnd();if(isNaN(Te)&&z&&isFinite(Pe)&&!isNaN(Pe)&&Pe<M&&(Te=parseFloat(m.getStreamEndTime().toFixed(5)),Ie=!0),Q&&isNaN(Te)&&z&&isNaN(w)&&L(me,O)&&(ie===0?(N.warn("Toggle play pause to break stall"),G.pause(),G.play()):(N.warn("Jumping ".concat(ie,"s to break stall")),Te=O+ie)),Te>0&&T!==Te&&Te>O&&!V){var ct=Te-O;if(Ie){var $e=R.getStreamForTime(Te),nt=$e&&!!$e.getPreloaded();N.warn("Jumping to end of stream because of gap from ".concat(O," to ").concat(Te,". Gap duration: ").concat(ct)),m.seek(Te,!0,nt)}else{var Tt=m.getIsDynamic(),Dt=w>0?me.end(w-1):O,_e=Tt?1e3*Math.max(0,ct-.1):0;V=window.setTimeout(function(){m.seek(Te,!0,!0),N.warn("Jumping gap occuring in period ".concat(R.getActiveStream().getStreamId()," starting at ").concat(Dt," and ending at ").concat(Te,". Jumping by: ").concat(Te-Dt)),V=null},_e)}T=Te}}return u={reset:ge,setConfig:function(O){O&&(O.settings&&(c=O.settings),O.playbackController&&(m=O.playbackController),O.streamController&&(R=O.streamController),O.videoModel&&(G=O.videoModel))},initialize:function(){(function(){q.on(i.Z.WALLCLOCK_TIME_UPDATED,re,this),q.on(i.Z.INITIAL_STREAM_SWITCH,x,this),q.on(i.Z.PLAYBACK_SEEKING,ne,this),q.on(i.Z.BUFFER_REPLACEMENT_STARTED,ue,u),q.on(i.Z.TRACK_CHANGE_RENDERED,fe,u)})()}},N=(0,_.Z)(H).getInstance().getLogger(u),ge(),u}ua.__dashjs_factory_name="GapController";const To=h.Z.getSingletonFactory(ua);function la(){var u,r,c,y,A,T,m,R,G,V,Y=this.context,N=(0,g.Z)(Y).getInstance();function H(){r=!1;var ae=on.Z.parseUserAgent();c=ae&&ae.browser&&ae.browser.name&&ae.browser.name.toLowerCase()==="safari"}function q(){r=!1}function ge(ae){if(ae.streamId===T.getActiveStreamInfo().id&&G){var p=m.getLiveDelay();m.getBufferLevel()>p/2&&(G=!1)}}function ne(ae){ae.streamId===T.getActiveStreamInfo().id&&(G=ae.state===S.Z.BUFFER_EMPTY)}function ue(){R.getCatchupModeEnabled()||y.setPlaybackRate(1)}function fe(){m.getIsDynamic()&&R.getCatchupModeEnabled()&&(R.getCatchupPlaybackRates().max>0||R.getCatchupPlaybackRates().min<0)&&!m.isPaused()&&!m.isSeeking()&&function(){try{return!(!m.getTime()>0||r)&&(re()===e.Z.LIVE_CATCHUP_MODE_LOLP?function(ae,p){try{return Math.abs(x())>0||ae<p}catch{return!1}}(m.getBufferLevel(),A.get().streaming.liveCatchup.playbackBufferMin):function(){try{return Math.abs(x())>0}catch{return!1}}())}catch{return!1}}()&&function(){if(!r&&y){var ae,p=y.getPlaybackRate(),L=R.getCatchupPlaybackRates(),Z=m.getBufferLevel(),O=x(),w=R.getCatchupMaxDrift();if(!isNaN(w)&&w>0&&O>w)V.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),r=!0,m.seekToCurrentLive(!0,!1);else{var z=m.getCurrentLiveLatency(),Q=m.getLiveDelay();ae=re()===e.Z.LIVE_CATCHUP_MODE_LOLP?function(M,B,me,Te,Ie){var Oe;if(Ie<Te){var Ee=Math.abs(M.min),Pe=5*(Ie-Te);Oe=1-Ee+2*Ee/(1+Math.pow(Math.E,-Pe)),V.debug("[LoL+ playback control_buffer-based] bufferLevel: "+Ie+", newRate: "+Oe)}else{var ct=M.max;if(Math.abs(B-me)<=.02*me)Oe=1;else{var $e=5*(B-me);Oe=1-ct+2*ct/(1+Math.pow(Math.E,-$e))}V.debug("[LoL+ playback control_latency-based] latency: "+B+", newRate: "+Oe)}return Oe}(L,z,Q,A.get().streaming.liveCatchup.playbackBufferMin,Z):function(M,B,me,Te){if(G)return 1;var Ie=B-me,Oe=Ie<0?Math.abs(M.min):M.max,Ee=5*Ie,Pe=1-Oe+2*Oe/(1+Math.pow(Math.E,-Ee));return m.getPlaybackStalled()&&Te<=me/2&&Ie>0&&(Pe=1),Pe}(L,z,Q,Z);var ie=c?.25:.02/(.5/L.max);ae&&Math.abs(p-ae)>=ie&&(V.debug("[CatchupController]: Setting playback rate to ".concat(ae)),y.setPlaybackRate(ae))}}}()}function x(){return m.getCurrentLiveLatency()-m.getLiveDelay()}function re(){var ae=A.get().streaming.liveCatchup.playbackBufferMin;return A.get().streaming.liveCatchup.mode!==e.Z.LIVE_CATCHUP_MODE_LOLP||ae===null||isNaN(ae)?e.Z.LIVE_CATCHUP_MODE_DEFAULT:e.Z.LIVE_CATCHUP_MODE_LOLP}function ee(){R.getCatchupPlaybackRates(!0)}return u={reset:function(){N.off(n.Z.BUFFER_LEVEL_UPDATED,ge,u),N.off(n.Z.BUFFER_LEVEL_STATE_CHANGED,ne,u),N.off(n.Z.PLAYBACK_PROGRESS,fe,u),N.off(n.Z.PLAYBACK_TIME_UPDATED,fe,u),N.off(n.Z.PLAYBACK_SEEKED,q,u),N.off(i.Z.SETTING_UPDATED_CATCHUP_ENABLED,ue,u),N.off(i.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,ee,u),N.off(i.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,ee,u),N.off(n.Z.STREAM_INITIALIZED,ee,u),H(),y.setPlaybackRate(1,!0)},setConfig:function(ae){ae&&(ae.settings&&(A=ae.settings),ae.videoModel&&(y=ae.videoModel),ae.streamController&&(T=ae.streamController),ae.playbackController&&(m=ae.playbackController),ae.mediaPlayerModel&&(R=ae.mediaPlayerModel))},initialize:function(){N.on(n.Z.BUFFER_LEVEL_UPDATED,ge,u),N.on(n.Z.BUFFER_LEVEL_STATE_CHANGED,ne,u),N.on(n.Z.PLAYBACK_PROGRESS,fe,u),N.on(n.Z.PLAYBACK_TIME_UPDATED,fe,u),N.on(n.Z.PLAYBACK_SEEKED,q,u),N.on(i.Z.SETTING_UPDATED_CATCHUP_ENABLED,ue,u),N.on(i.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,ee,u),N.on(i.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,ee,u),N.on(n.Z.STREAM_INITIALIZED,ee,u),ee()}},V=(0,_.Z)(Y).getInstance().getLogger(u),H(),u}la.__dashjs_factory_name="CatchupController";const So=h.Z.getSingletonFactory(la);var bo=[e.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME],ca="video",fa="audio";function da(){var u,r,c,y,A,T=this.context;function m(){r={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN}},minBitrate:{},maxBitrate:{},initialBitrate:{},contentSteering:null},c=[]}function R(G,V,Y){try{r[G][V]=Y/1e3}catch(N){y.error(N)}}return u={getServiceDescriptionSettings:function(){return r},getProducerReferenceTimeOffsets:function(){return c},calculateProducerReferenceTimeOffsets:function(G){try{var V=[];if(G&&G.length>0){var Y=[e.Z.VIDEO,e.Z.AUDIO,e.Z.TEXT],N=A.getAvailabilityStartTime()/1e3;G.forEach(function(H){var q=Y.reduce(function(ge,ne){return ge.concat(A.getAllMediaInfoForType(H,ne))},[]).reduce(function(ge,ne){return A.getProducerReferenceTimes(H,ne).forEach(function(ue){var fe=A.getVoRepresentations(ne);if(fe&&fe.length>0&&fe[0].adaptation&&fe[0].segmentInfoType===t.Z.SEGMENT_TEMPLATE){var x=fe[0],re=new Date(ue[t.Z.WALL_CLOCK_TIME]).getTime()/1e3-(ue[t.Z.PRESENTATION_TIME]/x[t.Z.TIMESCALE]-x[t.Z.PRESENTATION_TIME_OFFSET]+H.start),ee=N-re;ge.push({id:ue[t.Z.ID],to:ee})}}),ge},[]);V=V.concat(q)})}c=V}catch(H){y.error(H),c=[]}},applyServiceDescription:function(G){if(G&&G.serviceDescriptions){var V=G.serviceDescriptions.filter(function(H){return bo.includes(H.schemeIdUri)}),Y=G.serviceDescriptions.filter(function(H){return H.schemeIdUri==null}),N=V.length>0?V[V.length-1]:Y[Y.length-1];N&&(N.latency&&N.latency.target>0&&function(H){var q;if(H.schemeIdUri,e.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME,q=function(fe){return{liveDelay:fe.latency.target/1e3,maxDrift:!isNaN(fe.latency.max)&&fe.latency.max>fe.latency.target?(fe.latency.max-fe.latency.target+500)/1e3:NaN,referenceId:fe.latency.referenceId||NaN}}(H),c.length>0){var ge=function(fe){var x,re=0,ee=c.filter(function(ae){return ae.id===fe.referenceId});return ee.length===0?(re=c.length>0?c[0].to:0,x=c[0].id||NaN):(re=ee[0].to||0,x=ee[0].id||NaN),{to:re,id:x}}(q),ne=ge.to,ue=ge.id;r.liveDelay=q.liveDelay-ne,r.liveCatchup.maxDrift=q.maxDrift,y.debug(`
                Found latency properties coming from service description. Applied time offset of `.concat(ne," from ProducerReferenceTime element with id ").concat(ue,`.
                Live Delay: `).concat(q.liveDelay-ne,", Live catchup max drift: ").concat(q.maxDrift,`
            `))}else r.liveDelay=q.liveDelay,r.liveCatchup.maxDrift=q.maxDrift,y.debug("Found latency properties coming from service description: Live Delay: ".concat(q.liveDelay,", Live catchup max drift: ").concat(q.maxDrift))}(N),N.playbackRate&&function(H){var q=H.playbackRate.min?Math.round(1e3*(H.playbackRate.min-1))/1e3:NaN,ge=H.playbackRate.max?Math.round(1e3*(H.playbackRate.max-1))/1e3:NaN;r.liveCatchup.playbackRate.min=q,r.liveCatchup.playbackRate.max=ge,y.debug("Found latency properties coming from service description: Live catchup min playback rate: ".concat(q)),y.debug("Found latency properties coming from service description: Live catchup max playback rate: ".concat(ge))}(N),N.operatingQuality,N.operatingBandwidth&&function(H){if(H&&H.operatingBandwidth&&H.operatingBandwidth.mediaType&&H.operatingBandwidth.mediaType!=="all"){var q={};q.minBandwidth=H.operatingBandwidth.min,q.maxBandwidth=H.operatingBandwidth.max,q.targetBandwidth=H.operatingBandwidth.target;var ge=[];H.operatingBandwidth.mediaType===ca||H.operatingBandwidth.mediaType===fa?ge.push(H.operatingBandwidth.mediaType):H.operatingBandwidth.mediaType==="any"&&(ge.push(fa),ge.push(ca)),ge.forEach(function(ne){isNaN(q.minBandwidth)||R("minBitrate",ne,q.minBandwidth),isNaN(q.maxBandwidth)||R("maxBitrate",ne,q.maxBandwidth),isNaN(q.targetBandwidth)||R("initialBitrate",ne,q.targetBandwidth)})}}(N),N.contentSteering&&function(H){r.contentSteering=H.contentSteering}(N))}},reset:function(){m()},setConfig:function(G){G&&G.adapter&&(A=G.adapter)}},y=(0,_.Z)(T).getInstance().getLogger(u),m(),u}da.__dashjs_factory_name="ServiceDescriptionController";const Ao=h.Z.getSingletonFactory(da);var Io=C(3973),ci=C.n(Io),ga=C(3039);function Oi(){var u,r,c,y,A,T,m,R,G=this.context,V=(0,g.Z)(G).getInstance();function Y(M,B){return M&&c[B]&&c[B][M]?c[B][M].list:[]}function N(M,B){return M&&c[B]&&c[B][M]?c[B][M].current:null}function H(M){var B=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(M&&M.streamInfo){var me=M.type,Te=M.streamInfo,Ie=Te.id,Oe=N(me,Ie);if(c[Ie]&&c[Ie][me]&&(c[Ie][me].current=M,c[Ie][me].current&&(me!==e.Z.TEXT&&!ne(M,Oe)||me===e.Z.TEXT&&M.isFragmented)&&V.trigger(i.Z.CURRENT_TRACK_CHANGED,{oldMediaInfo:Oe,newMediaInfo:M,switchMode:y.get().streaming.trackSwitchMode[me]},{streamId:Ie}),!B)){var Ee=fe(M);if(!Ee||!c[Ie][me].storeLastSettings)return;Ee.roles&&(Ee.role=Ee.roles[0],delete Ee.roles),Ee.accessibility&&(Ee.accessibility=Ee.accessibility[0]),Ee.audioChannelConfiguration&&(Ee.audioChannelConfiguration=Ee.audioChannelConfiguration[0]),T[me]=Ee,R.setSavedMediaSettings(me,Ee)}}}function q(M,B){M&&B&&(A[M]=B)}function ge(M){return M?A[M]:null}function ne(M,B){if(!M&&!B)return!0;if(!M||!B)return!1;var me=M.id===B.id,Te=M.viewpoint===B.viewpoint,Ie=JSON.stringify(M.viewpointsWithSchemeIdUri)===JSON.stringify(B.viewpointsWithSchemeIdUri),Oe=M.lang===B.lang,Ee=M.codec===B.codec,Pe=M.roles.toString()===B.roles.toString(),ct=JSON.stringify(M.rolesWithSchemeIdUri)===JSON.stringify(B.rolesWithSchemeIdUri),$e=M.accessibility.toString()===B.accessibility.toString(),nt=JSON.stringify(M.accessibilitiesWithSchemeIdUri)===JSON.stringify(B.accessibilitiesWithSchemeIdUri),Tt=M.audioChannelConfiguration.toString()===B.audioChannelConfiguration.toString(),Dt=JSON.stringify(M.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(B.audioChannelConfigurationsWithSchemeIdUri);return me&&Ee&&Te&&Ie&&Oe&&Pe&&ct&&$e&&nt&&Tt&&Dt}function ue(){c={},T={},A={audio:null,video:null,text:null}}function fe(M){var B={lang:M.lang,viewpoint:M.viewpoint,roles:M.roles,accessibility:M.accessibility,audioChannelConfiguration:M.audioChannelConfiguration};return B.lang||B.viewpoint||B.role&&B.role.length>0||B.accessibility&&B.accessibility.length>0||B.audioChannelConfiguration&&B.audioChannelConfiguration.length>0?B:null}function x(M,B,me){var Te=[];return M.forEach(function(Ie){B(me,Ie)&&Te.push(Ie)}),Te.length!==0?Te:M}function re(M,B){return!M.lang||M.lang instanceof RegExp?B.lang.match(M.lang):B.lang!==""&&(0,ga.extendedFilter)(B.lang,ci()(M.lang)).length>0}function ee(M,B){return M.index===void 0||M.index===null||B.index===M.index}function ae(M,B){return!M.viewpoint||M.viewpoint===B.viewpoint}function p(M,B){var me=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Te=!M.role||!!B.roles.filter(function(Ie){return Ie===M.role})[0];return Te||B.type===e.Z.AUDIO&&me}function L(M,B){return M.accessibility?!!B.accessibility.filter(function(me){return me===M.accessibility})[0]:!B.accessibility.length}function Z(M,B){return!M.audioChannelConfiguration||!!B.audioChannelConfiguration.filter(function(me){return me===M.audioChannelConfiguration})[0]}function O(M){var B,me=0,Te=[];return M.forEach(function(Ie){(B=Math.max.apply(Math,Ie.bitrateList.map(function(Oe){return Oe.bandwidth})))>me?(me=B,Te=[Ie]):B===me&&Te.push(Ie)}),Te}function w(M){var B,me=1/0,Te=[];return M.forEach(function(Ie){var Oe=Ie.bitrateList.reduce(function(Ee,Pe){var ct=Math.max(1,Pe.width*Pe.height);return Ee+Pe.bandwidth/ct},0);(B=Oe/Ie.bitrateList.length)<me?(me=B,Te=[Ie]):B===me&&Te.push(Ie)}),Te}function z(M){var B,me=0,Te=[];return M.forEach(function(Ie){(B=Ie.representationCount)>me?(me=B,Te=[Ie]):B===me&&Te.push(Ie)}),Te}function Q(M,B){if(M===e.Z.TEXT)return B[0];var me,Te=y.get().streaming.selectionModeForInitialTrack,Ie=m.getCustomInitialTrackSelectionFunction();if(Ie&&typeof Ie=="function")me=Ie(B);else switch(Te){case e.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY:me=function(Oe){var Ee,Pe,ct=(Ee=0,Pe=[],Oe.forEach(function($e){isNaN($e.selectionPriority)||($e.selectionPriority>Ee?(Ee=$e.selectionPriority,Pe=[$e]):$e.selectionPriority===Ee&&Pe.push($e))}),Pe);return ct.length>1&&(ct=O(ct)),ct.length>1&&(ct=z(ct)),ct}(B);break;case e.Z.TRACK_SELECTION_MODE_HIGHEST_BITRATE:me=function(Oe){var Ee=O(Oe);return Ee.length>1&&(Ee=z(Ee)),Ee}(B);break;case e.Z.TRACK_SELECTION_MODE_FIRST_TRACK:me=ie(B);break;case e.Z.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:me=function(Oe){var Ee=w(Oe);return Ee.length>1&&(Ee=O(Ee)),Ee}(B);break;case e.Z.TRACK_SELECTION_MODE_WIDEST_RANGE:me=function(Oe){var Ee=z(Oe);return Ee.length>1&&(Ee=O(Oe)),Ee}(B);break;default:r.warn("Track selection mode ".concat(Te," is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK")),me=ie(B)}return me.length>0?me[0]:B[0]}function ie(M){return M[0]}return u={setInitialMediaSettingsForType:function(M,B){var me=T[M]||ge(M),Te=Y(M,B.id),Ie=[];me||q(M,me=R.getSavedMediaSettings(M)),Te&&Te.length!==0&&(me&&(Ie=x(Ie=Array.from(Te),re,me),Ie=x(Ie,ee,me),Ie=x(Ie,ae,me),M===e.Z.AUDIO&&T[M]||(Ie=x(Ie,p,me)),Ie=x(Ie,L,me),Ie=x(Ie,Z,me)),Ie.length===0?H(Q(M,Te),!0):Ie.length>1?H(Q(M,Ie,T[M])):H(Ie[0]))},addTrack:function(M){if(M){var B=M.type;if((me=B)===e.Z.AUDIO||me===e.Z.VIDEO||me===e.Z.TEXT||me===e.Z.IMAGE){var me,Te=M.streamInfo.id;c[Te]||(c[Te]={audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},image:{list:[],storeLastSettings:!0,current:null}});for(var Ie=c[Te][B].list,Oe=0,Ee=Ie.length;Oe<Ee;++Oe)if(ne(Ie[Oe],M))return;Ie.push(M)}}},getTracksFor:Y,getCurrentTrackFor:N,isCurrentTrack:function(M){if(!M)return!1;var B=M.type,me=M.streamInfo.id;return c[me]&&c[me][B]&&ne(c[me][B].current,M)},setTrack:H,selectInitialTrack:Q,setInitialSettings:q,getInitialSettings:ge,getTracksWithHighestBitrate:O,getTracksWithHighestEfficiency:w,getTracksWithWidestRange:z,isTracksEqual:ne,matchSettings:function(M,B){var me=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{var Te=!1;if(M.lang){if(M.lang instanceof RegExp)Te=B.lang.match(M.lang);else if(B.lang!==""){var Ie=ci()(M.lang);Ie&&(Te=(0,ga.extendedFilter)(B.lang,Ie).length>0)}}else Te=!0;var Oe=M.index===void 0||M.index===null||B.index===M.index,Ee=!M.viewpoint||M.viewpoint===B.viewpoint,Pe=!M.role||!!B.roles.filter(function(nt){return nt===M.role})[0],ct=!M.accessibility||!!B.accessibility.filter(function(nt){return nt===M.accessibility})[0],$e=!M.audioChannelConfiguration||!!B.audioChannelConfiguration.filter(function(nt){return nt===M.audioChannelConfiguration})[0];return Te&&Oe&&Ee&&(Pe||B.type===e.Z.AUDIO&&me)&&ct&&$e}catch{return!1}},matchSettingsLang:re,matchSettingsIndex:ee,matchSettingsViewPoint:ae,matchSettingsRole:p,matchSettingsAccessibility:L,matchSettingsAudioChannelConfig:Z,saveTextSettingsDisabled:function(){R.setSavedMediaSettings(e.Z.TEXT,null)},setConfig:function(M){M&&(M.domStorage&&(R=M.domStorage),M.settings&&(y=M.settings),M.customParametersModel&&(m=M.customParametersModel))},reset:ue},r=(0,_.Z)(G).getInstance().getLogger(u),ue(),u}Oi.__dashjs_factory_name="MediaController";var ha=h.Z.getSingletonFactory(Oi);h.Z.updateSingletonFactory(Oi.__dashjs_factory_name,ha);const Ro=ha;var fi=NaN,ma=function u(r,c){(function(y,A){if(!(y instanceof A))throw new TypeError("Cannot call a class as a function")})(this,u),this.data={baseUrls:r||null,selectedIdx:c||fi},this.children=[]};function pa(){var u,r,c,y,A=this.context,T=It(A).getInstance();function m(Y,N,H){var q=R(H);Y[N]?T.areEqual(q,Y[N].data.baseUrls)||(Y[N].data.baseUrls=q,Y[N].data.selectedIdx=fi):Y[N]=new ma(q)}function R(Y){var N=c.getBaseURLsFromElement(Y),H=y.getSynthesizedBaseUrlElements(N);return H&&H.length>0&&(N=N.concat(H)),N}function G(Y,N){var H=N||r;Y(H.data),H.children&&H.children.forEach(function(q){return G(Y,q)})}function V(){r=new ma}return u={reset:V,update:function(Y){(function(N){(function(){if(!c||!c.hasOwnProperty("getBaseURLsFromElement")||!c.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")})();var H=R(N);T.areEqual(H,r.data.baseUrls)||(r.data.baseUrls=H,r.data.selectedIdx=fi),N&&N.Period_asArray&&N.Period_asArray.forEach(function(q,ge){m(r.children,ge,q),q.AdaptationSet_asArray&&q.AdaptationSet_asArray.forEach(function(ne,ue){m(r.children[ge].children,ue,ne),ne.Representation_asArray&&ne.Representation_asArray.sort(c.getRepresentationSortFunction()).forEach(function(fe,x){m(r.children[ge].children[ue].children,x,fe)})})})})(Y)},getForPath:function(Y){var N=r,H=[N.data];return Y&&Y.forEach(function(q){(N=N.children[q])&&H.push(N.data)}),H.filter(function(q){return q.baseUrls.length})},invalidateSelectedIndexes:function(Y){G(function(N){isNaN(N.selectedIdx)||Y===N.baseUrls[N.selectedIdx].serviceLocation&&(N.selectedIdx=fi)})},setConfig:function(Y){Y.adapter&&(c=Y.adapter),Y.contentSteeringController&&(y=Y.contentSteeringController)},getBaseUrls:function(Y){return R(Y)}},V(),u}pa.__dashjs_factory_name="BaseURLTreeModel";const wo=h.Z.getClassFactory(pa);function ya(u){var r=(u=u||{}).blacklistController;return{select:function(c){return c&&function(A){var T,m,R=0,G=[],V=0;if((m=A.sort(function(Y,N){var H=Y.dvb_priority-N.dvb_priority;return isNaN(H)?0:H}).filter(function(Y,N,H){return!N||H[0].dvb_priority&&Y.dvb_priority&&H[0].dvb_priority===Y.dvb_priority})).length)return m.length>1&&(m.forEach(function(Y){R+=Y.dvb_weight,G.push(R)}),T=Math.floor(Math.random()*(R-1)),G.every(function(Y,N){return V=N,!(T<Y)})),m[V]}((y=[],c.filter(function(A){return!r.contains(A.serviceLocation)||(A.dvb_priority&&y.push(A.dvb_priority),!1)}).filter(function(A){return!y.length||!A.dvb_priority||y.indexOf(A.dvb_priority)===-1})));var y}}}ya.__dashjs_factory_name="DVBSelector";const No=h.Z.getClassFactory(ya);function Ea(u){var r=(u=u||{}).blacklistController;return{select:function(c){var y,A=0;return c&&c.some(function(T,m){return A=m,!r.contains(T.serviceLocation)})&&(y=c[A]),y}}}Ea.__dashjs_factory_name="BasicSelector";const Co=h.Z.getClassFactory(Ea);function va(){var u,r,c,y=this.context;function A(){for(var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],R=0,G=NaN,V=function(){var N=T[R],H=m.findIndex(function(q){return q.serviceLocation&&q.serviceLocation===N});if(H!==-1&&!c.contains(m[H].serviceLocation))return G=H,"break";R+=1};R<T.length;){var Y=V();if(Y==="break")break}return G}return u={selectBaseUrlIndex:function(T){var m=NaN;if(isNaN(T.selectedIdx)){var R=r.getSteeringDataFromManifest();R&&R.defaultServiceLocationArray.length>0&&(m=A(R.defaultServiceLocationArray,T.baseUrls))}var G=r.getCurrentSteeringResponseData();return T.baseUrls&&T.baseUrls.length&&G&&G.pathwayPriority&&G.pathwayPriority.length&&(m=A(G.pathwayPriority,T.baseUrls)),m},setConfig:function(T){T.blacklistController&&(c=T.blacklistController),T.contentSteeringController&&(r=T.contentSteeringController)}},r=Tr(y).getInstance(),u}va.__dashjs_factory_name="ContentSteeringSelector";const Do=h.Z.getClassFactory(va);function _a(){var u,r,c,y,A,T,m=this.context,R=(0,g.Z)(m).getInstance(),G=(0,ot.Z)(m).getInstance();function V(){r.reset()}return u={chooseSelector:function(Y){(0,X.PS)(Y,"boolean"),T=Y?y:c},select:function(Y){if(Y){if(G.get().streaming.applyContentSteering){var N=A.selectBaseUrlIndex(Y);isNaN(N)||N===-1||(Y.selectedIdx=N)}if(!isNaN(Y.selectedIdx))return Y.baseUrls[Y.selectedIdx];var H=T.select(Y.baseUrls);return H?(Y.selectedIdx=Y.baseUrls.indexOf(H),H):(R.trigger(i.Z.URL_RESOLUTION_FAILED,{error:new k.Z(te.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,te.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(T===c&&V()))}},reset:V,setConfig:function(Y){Y.selector&&(T=Y.selector),Y.contentSteeringSelector&&(A=Y.contentSteeringSelector)}},r=Vr(m).create({updateEventName:i.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,addBlacklistEventName:i.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),c=Co(m).create({blacklistController:r}),y=No(m).create({blacklistController:r}),(A=Do(m).create()).setConfig({blacklistController:r}),T=c,u}_a.__dashjs_factory_name="BaseURLSelector";const Oo=h.Z.getClassFactory(_a);function Ta(){var u,r,c,y,A,T=this.context,m=(0,g.Z)(T).getInstance(),R=(0,Ce.Z)(T).getInstance();function G(Y){c.update(Y),y.chooseSelector(r.getIsDVB(Y)),m.trigger(n.Z.BASE_URLS_UPDATED,{baseUrls:V(Y)})}function V(Y){return c.getBaseUrls(Y)}return u={reset:function(){c.reset(),y.reset()},initialize:function(Y){c.setConfig({adapter:r,contentSteeringController:A}),G(Y)},resolve:function(Y){var N=c.getForPath(Y).reduce(function(H,q){var ge=y.select(q);return ge?(R.isRelative(ge.url)?H.url=R.resolve(ge.url,H.url):(H.url=ge.url,H.serviceLocation=ge.serviceLocation),H.availabilityTimeOffset=ge.availabilityTimeOffset,H.availabilityTimeComplete=ge.availabilityTimeComplete,H.queryParams=ge.queryParams,H):new er},new er);if(!R.isRelative(N.url))return N},setConfig:function(Y){Y.baseURLTreeModel&&(c=Y.baseURLTreeModel),Y.baseURLSelector&&(y=Y.baseURLSelector),Y.adapter&&(r=Y.adapter),Y.contentSteeringController&&(A=Y.contentSteeringController)},getBaseUrls:V,update:G},c=wo(T).create(),y=Oo(T).create(),m.on(i.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,function(Y){c.invalidateSelectedIndexes(Y.entry)},u),u}Ta.__dashjs_factory_name="BaseURLController";const Mo=h.Z.getClassFactory(Ta);function Mi(u){return Mi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Mi(u)}function Pi(u,r){return Pi=Object.setPrototypeOf||function(c,y){return c.__proto__=y,c},Pi(u,r)}function Po(u,r){return!r||Mi(r)!=="object"&&typeof r!="function"?function(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}(u):r}function di(u){return di=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},di(u)}const Sa=function(u){(function(T,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(m&&m.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),m&&Pi(T,m)})(A,u);var r,c,y=(r=A,c=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var T,m=di(r);if(c){var R=di(this).constructor;T=Reflect.construct(m,arguments,R)}else T=m.apply(this,arguments);return Po(this,T)});function A(T,m){var R;return function(G,V){if(!(G instanceof V))throw new TypeError("Cannot call a class as a function")}(this,A),(R=y.call(this)).url=T||null,R.type=m||null,R.mediaType=e.Z.STREAM,R.responseType="",R}return A}(P.Z);function ba(u){u=u||{};var r=this.context,c=(0,g.Z)(r).getInstance(),y=Wn(r).create({errHandler:u.errHandler,dashMetrics:u.dashMetrics,mediaPlayerModel:u.mediaPlayerModel,requestModifier:u.requestModifier,errors:te});return{load:function(A,T,m){var R=function(V,Y){T.resolved=!0,T.resolvedContent=V||null,c.trigger(i.Z.XLINK_ELEMENT_LOADED,{element:T,resolveObject:m,error:V||Y?null:new k.Z(te.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,te.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+A)})};if(A==="urn:mpeg:dash:resolve-to-zero:2013")R(null,!0);else{var G=new Sa(A,Ae.w.XLINK_EXPANSION_TYPE);y.load({request:G,success:function(V){R(V)},error:function(){R(null)}})}},reset:function(){y&&(y.abort(),y=null)}}}ba.__dashjs_factory_name="XlinkLoader";const Lo=h.Z.getClassFactory(ba),Aa=function(u){(u=u||{}).escapeMode===void 0&&(u.escapeMode=!0),u.attributePrefix===void 0&&(u.attributePrefix="_"),u.arrayAccessForm=u.arrayAccessForm||"none",u.emptyNodeForm=u.emptyNodeForm||"text",u.enableToStringFunc===void 0&&(u.enableToStringFunc=!0),u.arrayAccessFormPaths=u.arrayAccessFormPaths||[],u.skipEmptyTextNodesForObj===void 0&&(u.skipEmptyTextNodesForObj=!0),u.stripWhitespaces===void 0&&(u.stripWhitespaces=!0),u.datetimeAccessFormPaths=u.datetimeAccessFormPaths||[],u.useDoubleQuotes===void 0&&(u.useDoubleQuotes=!1),u.xmlElementsFilter=u.xmlElementsFilter||[],u.jsonPropertiesFilter=u.jsonPropertiesFilter||[],u.keepCData===void 0&&(u.keepCData=!1),u.ignoreRoot===void 0&&(u.ignoreRoot=!1);function r(x){var re=x.localName;return re==null&&(re=x.baseName),re!=null&&re!=""||(re=x.nodeName),re}function c(x){return typeof x=="string"?x.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):x}function y(x,re,ee,ae){for(var p=0;p<x.length;p++){var L=x[p];if(typeof L=="string"){if(L==ae)break}else if(L instanceof RegExp){if(L.test(ae))break}else if(typeof L=="function"&&L(re,ee,ae))break}return p!=x.length}function A(x,re,ee){u.arrayAccessForm==="property"&&(x[re]instanceof Array?x[re+"_asArray"]=x[re]:x[re+"_asArray"]=[x[re]]),!(x[re]instanceof Array)&&u.arrayAccessFormPaths.length>0&&y(u.arrayAccessFormPaths,x,re,ee)&&(x[re]=[x[re]])}function T(x){var re=x.split(/[-T:+Z]/g),ee=new Date(re[0],re[1]-1,re[2]),ae=re[5].split(".");if(ee.setHours(re[3],re[4],ae[0]),ae.length>1&&ee.setMilliseconds(ae[1]),re[6]&&re[7]){var p=60*re[6]+Number(re[7]);p=0+((/\d\d-\d\d:\d\d$/.test(x)?"-":"+")=="-"?-1*p:p),ee.setMinutes(ee.getMinutes()-p-ee.getTimezoneOffset())}else x.indexOf("Z",x.length-1)!==-1&&(ee=new Date(Date.UTC(ee.getFullYear(),ee.getMonth(),ee.getDate(),ee.getHours(),ee.getMinutes(),ee.getSeconds(),ee.getMilliseconds())));return ee}function m(x,re,ee,ae){return!(re==1&&u.xmlElementsFilter.length>0)||y(u.xmlElementsFilter,x,ee,ae)}function R(x,re){if(x.nodeType==9){for(var ee=new Object,ae=x.childNodes,p=0;p<ae.length;p++)(Z=ae[p]).nodeType==1&&(u.ignoreRoot?ee=R(Z):(ee={})[O=r(Z)]=R(Z));return ee}if(x.nodeType==1){(ee=new Object).__cnt=0;var L=[];for(ae=x.childNodes,p=0;p<ae.length;p++){var Z,O=r(Z=ae[p]);if(Z.nodeType!=8){var w=re+"."+O;if(m(ee,Z.nodeType,O,w))if(ee.__cnt++,ee[O]==null){var z=R(Z,w);(O!="#text"||/[^\s]/.test(z))&&((Q={})[O]=z,L.push(Q)),ee[O]=z,A(ee,O,w)}else{var Q;ee[O]!=null&&(ee[O]instanceof Array||(ee[O]=[ee[O]],A(ee,O,w))),z=R(Z,w),(O!="#text"||/[^\s]/.test(z))&&((Q={})[O]=z,L.push(Q)),ee[O][ee[O].length]=z}}}ee.__children=L;for(var ie=r(x),M=0;M<x.attributes.length;M++){var B=x.attributes[M];ee.__cnt++;for(var me=B.value,Te=0,Ie=u.matchers.length;Te<Ie;Te++){var Oe=u.matchers[Te];Oe.test(B,ie)&&(me=Oe.converter(B.value))}ee[u.attributePrefix+B.name]=me}var Ee=function(Pe){return Pe.prefix}(x);return Ee!=null&&Ee!=""&&(ee.__cnt++,ee.__prefix=Ee),ee["#text"]!=null&&(ee.__text=ee["#text"],ee.__text instanceof Array&&(ee.__text=ee.__text.join(`
`)),u.stripWhitespaces&&(ee.__text=ee.__text.trim()),delete ee["#text"],u.arrayAccessForm=="property"&&delete ee["#text_asArray"],ee.__text=function(Pe,ct,$e){if(u.datetimeAccessFormPaths.length>0){var nt=$e.split(".#")[0];return y(u.datetimeAccessFormPaths,Pe,ct,nt)?T(Pe):Pe}return Pe}(ee.__text,O,re+"."+O)),ee["#cdata-section"]!=null&&(ee.__cdata=ee["#cdata-section"],delete ee["#cdata-section"],u.arrayAccessForm=="property"&&delete ee["#cdata-section_asArray"]),ee.__cnt==0&&u.emptyNodeForm=="text"?ee="":ee.__cnt==1&&ee.__text!=null?ee=ee.__text:ee.__cnt!=1||ee.__cdata==null||u.keepCData?ee.__cnt>1&&ee.__text!=null&&u.skipEmptyTextNodesForObj&&(u.stripWhitespaces&&ee.__text==""||ee.__text.trim()=="")&&delete ee.__text:ee=ee.__cdata,delete ee.__cnt,!u.enableToStringFunc||ee.__text==null&&ee.__cdata==null||(ee.toString=function(){return(this.__text!=null?this.__text:"")+(this.__cdata!=null?this.__cdata:"")}),ee}if(x.nodeType==3||x.nodeType==4)return x.nodeValue}function G(x,re,ee,ae){var p="<"+(x!=null&&x.__prefix!=null?x.__prefix+":":"")+re;if(ee!=null)for(var L=0;L<ee.length;L++){var Z=ee[L],O=x[Z];u.escapeMode&&(O=c(O)),p+=" "+Z.substr(u.attributePrefix.length)+"=",u.useDoubleQuotes?p+='"'+O+'"':p+="'"+O+"'"}return p+(ae?"/>":">")}function V(x,re){return"</"+(x.__prefix!=null?x.__prefix+":":"")+re+">"}function Y(x,re){return u.arrayAccessForm=="property"&&(ae="_asArray",(ee=re.toString()).indexOf(ae,ee.length-ae.length)!==-1)||re.toString().indexOf(u.attributePrefix)==0||re.toString().indexOf("__")==0||x[re]instanceof Function;var ee,ae}function N(x){var re=0;if(x instanceof Object)for(var ee in x)Y(x,ee)||re++;return re}function H(x,re,ee){return u.jsonPropertiesFilter.length==0||ee==""||y(u.jsonPropertiesFilter,x,re,ee)}function q(x){var re=[];if(x instanceof Object)for(var ee in x)ee.toString().indexOf("__")==-1&&ee.toString().indexOf(u.attributePrefix)==0&&re.push(ee);return re}function ge(x){var re="";return x instanceof Object?re+=function(ee){var ae="";return ee.__cdata!=null&&(ae+="<![CDATA["+ee.__cdata+"]]>"),ee.__text!=null&&(u.escapeMode?ae+=c(ee.__text):ae+=ee.__text),ae}(x):x!=null&&(u.escapeMode?re+=c(x):re+=x),re}function ne(x,re){return x===""?re:x+"."+re}function ue(x,re,ee,ae){var p="";if(x.length==0)p+=G(x,re,ee,!0);else for(var L=0;L<x.length;L++)p+=G(x[L],re,q(x[L]),!1),p+=fe(x[L],ne(ae,re)),p+=V(x[L],re);return p}function fe(x,re){var ee="";if(N(x)>0){for(var ae in x)if(!Y(x,ae)&&(re==""||H(x,ae,ne(re,ae)))){var p=x[ae],L=q(p);p==null||p==null?ee+=G(p,ae,L,!0):p instanceof Object?p instanceof Array?ee+=ue(p,ae,L,re):p instanceof Date?(ee+=G(p,ae,L,!1),ee+=p.toISOString(),ee+=V(p,ae)):N(p)>0||p.__text!=null||p.__cdata!=null?(ee+=G(p,ae,L,!1),ee+=fe(p,ne(re,ae)),ee+=V(p,ae)):ee+=G(p,ae,L,!0):(ee+=G(p,ae,L,!1),ee+=ge(p),ee+=V(p,ae))}}return ee+ge(x)}this.parseXmlString=function(x){var re;if(x===void 0)return null;if(window.DOMParser){var ee=new window.DOMParser;try{(re=ee.parseFromString(x,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(re=null)}catch{re=null}}else x.indexOf("<?")==0&&(x=x.substr(x.indexOf("?>")+2)),(re=new ActiveXObject("Microsoft.XMLDOM")).async="false",re.loadXML(x);return re},this.asArray=function(x){return x===void 0||x==null?[]:x instanceof Array?x:[x]},this.toXmlDateTime=function(x){return x instanceof Date?x.toISOString():typeof x=="number"?new Date(x).toISOString():null},this.asDateTime=function(x){return typeof x=="string"?T(x):x},this.xml2json=function(x){return R(x)},this.xml_str2json=function(x){var re=this.parseXmlString(x);return re!=null?this.xml2json(re):null},this.json2xml_str=function(x){return fe(x,"")},this.json2xml=function(x){var re=this.json2xml_str(x);return this.parseXmlString(re)},this.getVersion=function(){return"1.2.0"}};var Pr="onLoad";function Ia(u){u=u||{};var r,c,y,A,T,m,R=this.context,G=(0,g.Z)(R).getInstance(),V=(0,Ce.Z)(R).getInstance();function Y(ne,ue,fe){var x,re,ee={};ee.elements=ne,ee.type=ue,ee.resolveType=fe,ee.elements.length===0&&H(ee);for(var ae=0;ae<ee.elements.length;ae++)x=ee.elements[ae],re=V.isHTTPURL(x.url)?x.url:x.originalContent.BaseURL+x.url,m.load(re,x,ee)}function N(ne){var ue,fe,x="";if(ue=ne.element,fe=ne.resolveObject,ue.resolvedContent){var re=0;ue.resolvedContent.indexOf("<?xml")===0&&(re=ue.resolvedContent.indexOf("?>")+2),x=ue.resolvedContent.substr(0,re)+"<response>"+ue.resolvedContent.substr(re)+"</response>",ue.resolvedContent=T.xml_str2json(x)}(function(ee){var ae;for(ae=0;ae<ee.elements.length;ae++)if(ee.elements[ae].resolved===!1)return!1;return!0})(fe)&&H(fe)}function H(ne){var ue,fe,x=[];if(function(re){var ee,ae,p,L,Z,O,w=[];for(L=re.elements.length-1;L>=0;L--){if(ae=(ee=re.elements[L]).type+"_asArray",ee.resolvedContent){if(ee.resolvedContent)for(Z=0;Z<ee.resolvedContent[ae].length;Z++)p=ee.resolvedContent[ae][Z],w.push(p)}else delete ee.originalContent["xlink:actuate"],delete ee.originalContent["xlink:href"],w.push(ee.originalContent);for(ee.parentElement[ae].splice(ee.index,1),O=0;O<w.length;O++)ee.parentElement[ae].splice(ee.index+O,0,w[O]);w=[]}re.elements.length>0&&y.run(A)}(ne),ne.resolveType==="onActuate"&&G.trigger(i.Z.XLINK_READY,{manifest:A}),ne.resolveType===Pr)switch(ne.type){case t.Z.PERIOD:for(ue=0;ue<A[t.Z.PERIOD+"_asArray"].length;ue++)(fe=A[t.Z.PERIOD+"_asArray"][ue]).hasOwnProperty(t.Z.ADAPTATION_SET+"_asArray")&&(x=x.concat(q(fe[t.Z.ADAPTATION_SET+"_asArray"],fe,t.Z.ADAPTATION_SET,Pr))),fe.hasOwnProperty(t.Z.EVENT_STREAM+"_asArray")&&(x=x.concat(q(fe[t.Z.EVENT_STREAM+"_asArray"],fe,t.Z.EVENT_STREAM,Pr)));Y(x,t.Z.ADAPTATION_SET,Pr);break;case t.Z.ADAPTATION_SET:G.trigger(i.Z.XLINK_READY,{manifest:A})}}function q(ne,ue,fe,x){var re,ee,ae,p=[];for(ee=ne.length-1;ee>=0;ee--)(re=ne[ee]).hasOwnProperty("xlink:href")&&re["xlink:href"]==="urn:mpeg:dash:resolve-to-zero:2013"&&ne.splice(ee,1);for(ee=0;ee<ne.length;ee++)(re=ne[ee]).hasOwnProperty("xlink:href")&&re.hasOwnProperty("xlink:actuate")&&re["xlink:actuate"]===x&&(ae=ge(re["xlink:href"],ue,fe,ee,x,re),p.push(ae));return p}function ge(ne,ue,fe,x,re,ee){return{url:ne,parentElement:ue,type:fe,index:x,resolveType:re,originalContent:ee,resolvedContent:null,resolved:!1}}return r={resolveManifestOnLoad:function(ne){T=new Aa({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:c}),(A=ne).Period_asArray?Y(q(A.Period_asArray,A,t.Z.PERIOD,Pr),t.Z.PERIOD,Pr):G.trigger(i.Z.XLINK_READY,{manifest:A})},setMatchers:function(ne){ne&&(c=ne)},setIron:function(ne){ne&&(y=ne)},reset:function(){G.off(i.Z.XLINK_ELEMENT_LOADED,N,r),m&&(m.reset(),m=null)}},G.on(i.Z.XLINK_ELEMENT_LOADED,N,r),m=Lo(R).create({errHandler:u.errHandler,dashMetrics:u.dashMetrics,mediaPlayerModel:u.mediaPlayerModel,requestModifier:u.requestModifier,settings:u.settings}),r}Ia.__dashjs_factory_name="XlinkController";const xo=h.Z.getClassFactory(Ia);function zr(u){return zr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},zr(u)}function Ra(u){function r(A,T){for(var m in A)T.hasOwnProperty(m)||(T[m]=A[m])}function c(A,T,m){for(var R=0,G=A.length;R<G;++R){var V=A[R];if(T[V.name])if(m[V.name]){if(V.merge){var Y=T[V.name],N=m[V.name];zr(Y)==="object"&&zr(N)==="object"?r(Y,N):m[V.name]=Y+N}}else m[V.name]=T[V.name]}}function y(A,T){for(var m=0,R=A.children.length;m<R;++m){var G=A.children[m],V=T[G.name+"_asArray"];if(V)for(var Y=0,N=V.length;Y<N;++Y){var H=V[Y];c(A.properties,T,H),y(G,H)}}}return{run:function(A){if(A===null||zr(A)!=="object")return A;if(A.Period_asArray&&"period"in u)for(var T=u.period,m=A.Period_asArray,R=0,G=m.length;R<G;++R){var V=m[R];if(y(T,V),"adaptationset"in u){var Y=V.AdaptationSet_asArray;if(Y)for(var N=u.adaptationset,H=0,q=Y.length;H<q;++H)y(N,Y[H])}}return A}}}Ra.__dashjs_factory_name="ObjectIron";const Fo=h.Z.getClassFactory(Ra);function ko(u,r){for(var c=0;c<r.length;c++){var y=r[c];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(u,y.key,y)}}const Wr=function(){function u(y,A){(function(T,m){if(!(T instanceof m))throw new TypeError("Cannot call a class as a function")})(this,u),this._test=y,this._converter=A}var r,c;return r=u,(c=[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}])&&ko(r.prototype,c),u}();function Li(u){return Li=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Li(u)}function Nn(u,r,c){return r in u?Object.defineProperty(u,r,{value:c,enumerable:!0,configurable:!0,writable:!0}):u[r]=c,u}function xi(u,r){return xi=Object.setPrototypeOf||function(c,y){return c.__proto__=y,c},xi(u,r)}function Zo(u,r){return!r||Li(r)!=="object"&&typeof r!="function"?function(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}(u):r}function gi(u){return gi=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},gi(u)}const Uo=function(u){(function(T,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(m&&m.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),m&&xi(T,m)})(A,u);var r,c,y=(r=A,c=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var T,m=gi(r);if(c){var R=gi(this).constructor;T=Reflect.construct(m,arguments,R)}else T=m.apply(this,arguments);return Zo(this,T)});function A(){return function(T,m){if(!(T instanceof m))throw new TypeError("Cannot call a class as a function")}(this,A),y.call(this,function(T,m){var R,G=(Nn(R={},t.Z.MPD,[t.Z.ID,t.Z.PROFILES]),Nn(R,t.Z.PERIOD,[t.Z.ID]),Nn(R,t.Z.BASE_URL,[t.Z.SERVICE_LOCATION,t.Z.BYTE_RANGE]),Nn(R,t.Z.SEGMENT_BASE,[t.Z.INDEX_RANGE]),Nn(R,t.Z.INITIALIZATION,[t.Z.RANGE]),Nn(R,t.Z.REPRESENTATION_INDEX,[t.Z.RANGE]),Nn(R,t.Z.SEGMENT_LIST,[t.Z.INDEX_RANGE]),Nn(R,t.Z.BITSTREAM_SWITCHING,[t.Z.RANGE]),Nn(R,t.Z.SEGMENT_URL,[t.Z.MEDIA_RANGE,t.Z.INDEX_RANGE]),Nn(R,t.Z.SEGMENT_TEMPLATE,[t.Z.INDEX_RANGE,t.Z.MEDIA,t.Z.INDEX,t.Z.INITIALIZATION_MINUS,t.Z.BITSTREAM_SWITCHING_MINUS]),Nn(R,t.Z.ASSET_IDENTIFIER,[t.Z.VALUE,t.Z.ID]),Nn(R,t.Z.EVENT_STREAM,[t.Z.VALUE]),Nn(R,t.Z.ADAPTATION_SET,[t.Z.PROFILES,t.Z.MIME_TYPE,t.Z.SEGMENT_PROFILES,t.Z.CODECS,t.Z.CONTENT_TYPE]),Nn(R,t.Z.FRAME_PACKING,[t.Z.VALUE,t.Z.ID]),Nn(R,t.Z.AUDIO_CHANNEL_CONFIGURATION,[t.Z.VALUE,t.Z.ID]),Nn(R,t.Z.CONTENT_PROTECTION,[t.Z.VALUE,t.Z.ID]),Nn(R,t.Z.ESSENTIAL_PROPERTY,[t.Z.VALUE,t.Z.ID]),Nn(R,t.Z.SUPPLEMENTAL_PROPERTY,[t.Z.VALUE,t.Z.ID]),Nn(R,t.Z.INBAND_EVENT_STREAM,[t.Z.VALUE,t.Z.ID]),Nn(R,t.Z.ACCESSIBILITY,[t.Z.VALUE,t.Z.ID]),Nn(R,t.Z.ROLE,[t.Z.VALUE,t.Z.ID]),Nn(R,t.Z.RATING,[t.Z.VALUE,t.Z.ID]),Nn(R,t.Z.VIEWPOINT,[t.Z.VALUE,t.Z.ID]),Nn(R,t.Z.CONTENT_COMPONENT,[t.Z.CONTENT_TYPE]),Nn(R,t.Z.REPRESENTATION,[t.Z.ID,t.Z.DEPENDENCY_ID,t.Z.MEDIA_STREAM_STRUCTURE_ID]),Nn(R,t.Z.SUBSET,[t.Z.ID]),Nn(R,t.Z.METRICS,[t.Z.METRICS_MINUS]),Nn(R,t.Z.REPORTING,[t.Z.VALUE,t.Z.ID]),R);if(G.hasOwnProperty(m)){var V=G[m];return V!==void 0&&V.indexOf(T.name)>=0}return!1},function(T){return String(T)})}return A}(Wr);function Fi(u){return Fi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Fi(u)}function ki(u,r){return ki=Object.setPrototypeOf||function(c,y){return c.__proto__=y,c},ki(u,r)}function Bo(u,r){return!r||Fi(r)!=="object"&&typeof r!="function"?function(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}(u):r}function hi(u){return hi=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},hi(u)}var wa=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/;const Go=function(u){(function(T,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(m&&m.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),m&&ki(T,m)})(A,u);var r,c,y=(r=A,c=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var T,m=hi(r);if(c){var R=hi(this).constructor;T=Reflect.construct(m,arguments,R)}else T=m.apply(this,arguments);return Bo(this,T)});function A(){return function(T,m){if(!(T instanceof m))throw new TypeError("Cannot call a class as a function")}(this,A),y.call(this,function(T){for(var m=[t.Z.MIN_BUFFER_TIME,t.Z.MEDIA_PRESENTATION_DURATION,t.Z.MINIMUM_UPDATE_PERIOD,t.Z.TIMESHIFT_BUFFER_DEPTH,t.Z.MAX_SEGMENT_DURATION,t.Z.MAX_SUBSEGMENT_DURATION,t.Z.SUGGESTED_PRESENTATION_DELAY,t.Z.START,e.Z.START_TIME,t.Z.DURATION],R=m.length,G=0;G<R;G++)if(T.nodeName===m[G])return wa.test(T.value);return!1},function(T){var m=wa.exec(T),R=31536e3*parseFloat(m[3]||0)+2592e3*parseFloat(m[5]||0)+86400*parseFloat(m[7]||0)+3600*parseFloat(m[9]||0)+60*parseFloat(m[11]||0)+parseFloat(m[13]||0);return m[1]!==void 0&&(R=-R),R})}return A}(Wr);function Zi(u){return Zi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Zi(u)}function Ui(u,r){return Ui=Object.setPrototypeOf||function(c,y){return c.__proto__=y,c},Ui(u,r)}function qo(u,r){return!r||Zi(r)!=="object"&&typeof r!="function"?function(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}(u):r}function mi(u){return mi=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},mi(u)}var Na=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/;const Yo=function(u){(function(T,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(m&&m.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),m&&Ui(T,m)})(A,u);var r,c,y=(r=A,c=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var T,m=mi(r);if(c){var R=mi(this).constructor;T=Reflect.construct(m,arguments,R)}else T=m.apply(this,arguments);return qo(this,T)});function A(){return function(T,m){if(!(T instanceof m))throw new TypeError("Cannot call a class as a function")}(this,A),y.call(this,function(T){return Na.test(T.value)},function(T){var m,R=Na.exec(T);if(m=Date.UTC(parseInt(R[1],10),parseInt(R[2],10)-1,parseInt(R[3],10),parseInt(R[4],10),parseInt(R[5],10),R[6]&&parseInt(R[6],10)||0,R[7]&&1e3*parseFloat(R[7])||0),R[9]&&R[10]){var G=60*parseInt(R[9],10)+parseInt(R[10],10);m+=(R[8]==="+"?-1:1)*G*60*1e3}return new Date(m)})}return A}(Wr);function Bi(u){return Bi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Bi(u)}function Gi(u,r){return Gi=Object.setPrototypeOf||function(c,y){return c.__proto__=y,c},Gi(u,r)}function jo(u,r){return!r||Bi(r)!=="object"&&typeof r!="function"?function(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}(u):r}function pi(u){return pi=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},pi(u)}var Ho=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/;const Vo=function(u){(function(T,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(m&&m.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),m&&Gi(T,m)})(A,u);var r,c,y=(r=A,c=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var T,m=pi(r);if(c){var R=pi(this).constructor;T=Reflect.construct(m,arguments,R)}else T=m.apply(this,arguments);return jo(this,T)});function A(){return function(T,m){if(!(T instanceof m))throw new TypeError("Cannot call a class as a function")}(this,A),y.call(this,function(T){return Ho.test(T.value)},function(T){return parseFloat(T)})}return A}(Wr);function qi(u){return qi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},qi(u)}function Qr(u,r,c){return r in u?Object.defineProperty(u,r,{value:c,enumerable:!0,configurable:!0,writable:!0}):u[r]=c,u}function Yi(u,r){return Yi=Object.setPrototypeOf||function(c,y){return c.__proto__=y,c},Yi(u,r)}function Ko(u,r){return!r||qi(r)!=="object"&&typeof r!="function"?function(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}(u):r}function yi(u){return yi=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},yi(u)}const zo=function(u){(function(T,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(m&&m.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),m&&Yi(T,m)})(A,u);var r,c,y=(r=A,c=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var T,m=yi(r);if(c){var R=yi(this).constructor;T=Reflect.construct(m,arguments,R)}else T=m.apply(this,arguments);return Ko(this,T)});function A(){return function(T,m){if(!(T instanceof m))throw new TypeError("Cannot call a class as a function")}(this,A),y.call(this,function(T,m){var R,G=(Qr(R={},t.Z.ADAPTATION_SET,[t.Z.LANG]),Qr(R,t.Z.REPRESENTATION,[t.Z.LANG]),Qr(R,t.Z.CONTENT_COMPONENT,[t.Z.LANG]),Qr(R,t.Z.LABEL,[t.Z.LANG]),Qr(R,t.Z.GROUP_LABEL,[t.Z.LANG]),R);if(G.hasOwnProperty(m)){var V=G[m];return V!==void 0&&V.indexOf(T.name)>=0}return!1},function(T){var m=ci()(T);return m!==void 0?m:String(T)})}return A}(Wr);function Wo(u,r){for(var c=0;c<r.length;c++){var y=r[c];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(u,y.key,y)}}const Qo=function(){function u(y){var A;(function(T,m){if(!(T instanceof m))throw new TypeError("Cannot call a class as a function")})(this,u),this._name=y,this._merge=(A=y)&&A.length&&A.charAt(0)===A.charAt(0).toUpperCase()}var r,c;return r=u,(c=[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}])&&Wo(r.prototype,c),u}();function Xo(u,r){for(var c=0;c<r.length;c++){var y=r[c];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(u,y.key,y)}}const Lr=function(){function u(y,A,T){var m=this;(function(R,G){if(!(R instanceof G))throw new TypeError("Cannot call a class as a function")})(this,u),this._name=y||"",this._properties=[],this._children=T||[],Array.isArray(A)&&A.forEach(function(R){m._properties.push(new Qo(R))})}var r,c;return r=u,(c=[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}])&&Xo(r.prototype,c),u}();function ji(u){return ji=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ji(u)}function Hi(u,r){return Hi=Object.setPrototypeOf||function(c,y){return c.__proto__=y,c},Hi(u,r)}function Jo(u,r){return!r||ji(r)!=="object"&&typeof r!="function"?function(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}(u):r}function Ei(u){return Ei=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Ei(u)}const $o=function(u){(function(T,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(m&&m.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),m&&Hi(T,m)})(A,u);var r,c,y=(r=A,c=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var T,m=Ei(r);if(c){var R=Ei(this).constructor;T=Reflect.construct(m,arguments,R)}else T=m.apply(this,arguments);return Jo(this,T)});function A(){(function(m,R){if(!(m instanceof R))throw new TypeError("Cannot call a class as a function")})(this,A);var T=[t.Z.PROFILES,t.Z.WIDTH,t.Z.HEIGHT,t.Z.SAR,t.Z.FRAMERATE,t.Z.AUDIO_SAMPLING_RATE,t.Z.MIME_TYPE,t.Z.SEGMENT_PROFILES,t.Z.CODECS,t.Z.MAXIMUM_SAP_PERIOD,t.Z.START_WITH_SAP,t.Z.MAX_PLAYOUT_RATE,t.Z.CODING_DEPENDENCY,t.Z.SCAN_TYPE,t.Z.FRAME_PACKING,t.Z.AUDIO_CHANNEL_CONFIGURATION,t.Z.CONTENT_PROTECTION,t.Z.ESSENTIAL_PROPERTY,t.Z.ESSENTIAL_PROPERTY+"_asArray",t.Z.SUPPLEMENTAL_PROPERTY,t.Z.INBAND_EVENT_STREAM];return y.call(this,t.Z.ADAPTATION_SET,T,[new Lr(t.Z.REPRESENTATION,T,[new Lr(t.Z.SUB_REPRESENTATION,T)])])}return A}(Lr);function Vi(u){return Vi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Vi(u)}function Ki(u,r){return Ki=Object.setPrototypeOf||function(c,y){return c.__proto__=y,c},Ki(u,r)}function es(u,r){return!r||Vi(r)!=="object"&&typeof r!="function"?function(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}(u):r}function vi(u){return vi=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},vi(u)}const ts=function(u){(function(T,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(m&&m.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),m&&Ki(T,m)})(A,u);var r,c,y=(r=A,c=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var T,m=vi(r);if(c){var R=vi(this).constructor;T=Reflect.construct(m,arguments,R)}else T=m.apply(this,arguments);return es(this,T)});function A(){(function(m,R){if(!(m instanceof R))throw new TypeError("Cannot call a class as a function")})(this,A);var T=[t.Z.SEGMENT_BASE,t.Z.SEGMENT_TEMPLATE,t.Z.SEGMENT_LIST];return y.call(this,t.Z.PERIOD,T,[new Lr(t.Z.ADAPTATION_SET,T,[new Lr(t.Z.REPRESENTATION,T)])])}return A}(Lr);function Ca(u){u=u||{};var r,c,y,A,T,m=this.context,R=u.debug;return r={parse:function(G){var V,Y=window.performance.now();if(!(V=A.xml_str2json(G)))throw new Error("parsing the manifest failed");var N=window.performance.now();V.Patch?((V=V.Patch).add_asArray&&V.add_asArray.forEach(function(q){return T.run(q)}),V.replace_asArray&&V.replace_asArray.forEach(function(q){return T.run(q)})):(V=V.MPD,T.run(V));var H=window.performance.now();return c.info("Parsing complete: ( xml2json: "+(N-Y).toPrecision(3)+"ms, objectiron: "+(H-N).toPrecision(3)+"ms, total: "+((H-Y)/1e3).toPrecision(3)+"s)"),V.protocol="DASH",V},getMatchers:function(){return y},getIron:function(){return T}},c=R.getLogger(r),y=[new Go,new Yo,new Vo,new zo,new Uo],A=new Aa({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!1,matchers:y}),T=Fo(m).create({adaptationset:new $o,period:new ts}),r}Ca.__dashjs_factory_name="DashParser";const ns=h.Z.getClassFactory(Ca);function Da(u){u=u||{};var r,c,y,A,T,m=this.context,R=u.debug,G=u.settings,V=(0,g.Z)(m).getInstance(),Y=(0,Ce.Z)(m).getInstance(),N=u.mssHandler,H=u.errHandler;function q(ne){V.trigger(i.Z.INTERNAL_MANIFEST_LOADED,{manifest:ne.manifest})}function ge(ne){var ue=null;return ne.indexOf("SmoothStreamingMedia")>-1?(N&&(ue=N.createMssParser(),N.createMssFragmentProcessor(),N.registerEvents()),ue):ne.indexOf("MPD")>-1||ne.indexOf("Patch")>-1?ns(m).create({debug:R}):ue}return r={load:function(ne){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,fe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,x=new Date,re=new Sa(ne,Ae.w.MPD_TYPE);ue&&(re.serviceLocation=ue),fe&&(re.queryParams=fe),re.requestStartDate||(re.requestStartDate=x),V.trigger(i.Z.MANIFEST_LOADING_STARTED,{request:re}),y.load({request:re,success:function(ee,ae,p){var L,Z,O;if(A)if(p&&p!==ne?(Z=Y.parseBaseUrl(p),L=p):(Y.isRelative(ne)&&(ne=Y.resolve(ne,window.location.href)),Z=Y.parseBaseUrl(ne)),ae!="No Content")if(T===null&&(T=ge(ee)),T!==null){A.setMatchers(T.getMatchers()),A.setIron(T.getIron());try{O=T.parse(ee)}catch{return void V.trigger(i.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new k.Z(te.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,te.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(ne))})}if(O){if(O.url=L||ne,O.originalUrl||(O.originalUrl=O.url),G&&G.get().streaming.enableManifestDurationMismatchFix&&O.mediaPresentationDuration&&O.Period_asArray.length>1){var w=O.Period_asArray.reduce(function(z,Q){return z+Q.duration},0);!isNaN(w)&&O.mediaPresentationDuration>w&&(c.warn("Media presentation duration greater than duration of all periods. Setting duration to total period duration"),O.mediaPresentationDuration=w)}O.baseUri=Z,O.loadedTime=new Date,A.resolveManifestOnLoad(O),V.trigger(i.Z.ORIGINAL_MANIFEST_LOADED,{originalManifest:ee})}else V.trigger(i.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new k.Z(te.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,te.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(ne))})}else V.trigger(i.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new k.Z(te.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,te.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(ne))});else V.trigger(i.Z.INTERNAL_MANIFEST_LOADED,{manifest:null})},error:function(ee,ae,p){V.trigger(i.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new k.Z(te.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,te.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+"".concat(ne,", ").concat(p))})}})},reset:function(){V.off(i.Z.XLINK_READY,q,r),N&&N.reset(),A&&(A.reset(),A=null),y&&(y.abort(),y=null)}},c=R.getLogger(r),V.on(i.Z.XLINK_READY,q,r),y=Wn(m).create({errHandler:u.errHandler,dashMetrics:u.dashMetrics,mediaPlayerModel:u.mediaPlayerModel,requestModifier:u.requestModifier,urlUtils:Y,constants:e.Z,dashConstants:t.Z,errors:te,requestTimeout:u.settings.get().streaming.manifestRequestTimeout}),A=xo(m).create({errHandler:H,dashMetrics:u.dashMetrics,mediaPlayerModel:u.mediaPlayerModel,requestModifier:u.requestModifier,settings:u.settings}),T=null,r}Da.__dashjs_factory_name="ManifestLoader";const rs=h.Z.getClassFactory(Da);function Oa(){var u=this.context,r=(0,g.Z)(u).getInstance();return{error:function(c){r.trigger(i.Z.ERROR,{error:c})}}}Oa.__dashjs_factory_name="ErrorHandler";const is=h.Z.getSingletonFactory(Oa);var Ma=C(1715);function Pa(){var u,r,c,y,A,T,m=this.context,R=(0,g.Z)(m).getInstance();function G(V,Y){if(!Y||!Y.Period_asArray||Y.Period_asArray.length===0)return Promise.resolve();var N=[];return Y.Period_asArray.forEach(function(H){N.push(function(q,ge){return new Promise(function(ne){if(q&&q.AdaptationSet_asArray&&q.AdaptationSet_asArray.length!==0){var ue=[];q.AdaptationSet_asArray.forEach(function(fe){r.getIsTypeOf(fe,ge)&&ue.push(function(x,re){return new Promise(function(ee){if(x.Representation_asArray&&x.Representation_asArray.length!==0){var ae=[],p=[];x.Representation_asArray.forEach(function(L,Z){var O=r.getCodec(x,Z,!1),w=function(z,Q,ie){switch(z){case e.Z.VIDEO:return function(M,B){return{codec:B,width:M.width||null,height:M.height||null,framerate:M.frameRate||null,bitrate:M.bandwidth||null}}(Q,ie);case e.Z.AUDIO:return function(M,B){var me=M.audioSamplingRate||null;return{codec:B,bitrate:M.bandwidth||null,samplerate:me}}(Q,ie);default:return null}}(re,L,O);p.push(w),ae.push(c.supportsCodec(w,re))}),Promise.all(ae).then(function(L){x.Representation_asArray=x.Representation_asArray.filter(function(Z,O){return L[O]||T.debug("[Stream] Codec ".concat(p[O].codec," not supported ")),L[O]}),ee()}).catch(function(){ee()})}else ee()})}(fe,ge))}),Promise.all(ue).then(function(){q.AdaptationSet_asArray=q.AdaptationSet_asArray.filter(function(fe){var x=fe.Representation_asArray&&fe.Representation_asArray.length>0;return x||(R.trigger(i.Z.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:fe}),T.warn("AdaptationSet has been removed because of no supported Representation")),x}),ne()}).catch(function(){ne()})}else ne()})}(H,V))}),Promise.all(N)}return u={setConfig:function(V){V&&(V.adapter&&(r=V.adapter),V.capabilities&&(c=V.capabilities),V.settings&&(y=V.settings),V.customParametersModel&&(A=V.customParametersModel))},filterUnsupportedFeatures:function(V){return new Promise(function(Y){var N=[];N.push(G(e.Z.VIDEO,V)),N.push(G(e.Z.AUDIO,V)),Promise.all(N).then(function(){y.get().streaming.capabilities.filterUnsupportedEssentialProperties&&function(H){H&&H.Period_asArray&&H.Period_asArray.length!==0&&H.Period_asArray.forEach(function(q){q.AdaptationSet_asArray=q.AdaptationSet_asArray.filter(function(ge){return!ge.Representation_asArray||ge.Representation_asArray.length===0||(ge.Representation_asArray=ge.Representation_asArray.filter(function(ne){var ue=r.getEssentialPropertiesForRepresentation(ne);if(ue&&ue.length>0)for(var fe=0;fe<ue.length;){if(!c.supportsEssentialProperty(ue[fe]))return T.debug("[Stream] EssentialProperty not supported: "+ue[fe].schemeIdUri),!1;fe+=1}return!0}),ge.Representation_asArray&&ge.Representation_asArray.length>0)})})}(V),function(H){var q=A.getCustomCapabilitiesFilters();q&&q.length!==0&&H&&H.Period_asArray&&H.Period_asArray.length!==0&&H.Period_asArray.forEach(function(ge){ge.AdaptationSet_asArray=ge.AdaptationSet_asArray.filter(function(ne){return!ne.Representation_asArray||ne.Representation_asArray.length===0||(ne.Representation_asArray=ne.Representation_asArray.filter(function(ue){return!q.some(function(fe){return!fe(ue)})}),ne.Representation_asArray&&ne.Representation_asArray.length>0)})})}(V),Y()}).catch(function(){Y()})})}},T=(0,_.Z)(m).getInstance().getLogger(u),u}Pa.__dashjs_factory_name="CapabilitiesFilter";const as=h.Z.getSingletonFactory(Pa),os=function u(){(function(r,c){if(!(r instanceof c))throw new TypeError("Cannot call a class as a function")})(this,u),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null};function La(){var u;return{initialize:function(r){if(u=new os,!r)return null;var c=r.indexOf("#");if(c!==-1)for(var y=r.substr(c+1).split("&"),A=0,T=y.length;A<T;++A){var m=y[A],R=m.indexOf("=");if(R!==-1){var G=m.substring(0,R);u.hasOwnProperty(G)&&(u[G]=m.substr(R+1))}}},getURIFragmentData:function(){return u}}}La.__dashjs_factory_name="URIFragmentModel";const ss=h.Z.getSingletonFactory(La);function xa(){var u,r=this.context,c=(0,g.Z)(r).getInstance();return{getValue:function(){return u},setValue:function(y){u=y,y&&c.trigger(i.Z.MANIFEST_LOADED,{data:y})}}}xa.__dashjs_factory_name="ManifestModel";const us=h.Z.getSingletonFactory(xa);var zi=-.5;function Fa(){var u,r,c,y,A=this.context,T=(0,ot.Z)(A).getInstance();function m(V,Y){return isNaN(V)?0:V>0?(Y&&r.warn("Supplied minimum playback rate is a positive value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):V<zi?(Y&&r.warn("Supplied minimum playback rate is out of range and will be limited to ".concat(zi,": ").concat(-50,"% playback speed.")),zi):V}function R(V,Y){return isNaN(V)?0:V<0?(Y&&r.warn("Supplied maximum playback rate is a negative value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):V>1?(Y&&r.warn("Supplied maximum playback rate is out of range and will be limited to ".concat(1,": ").concat(200,"% playback speed.")),1):V}function G(){var V=T.get().streaming.buffer.stableBufferTime>0?T.get().streaming.buffer.stableBufferTime:T.get().streaming.buffer.fastSwitchEnabled?20:12,Y=c.getLiveDelay();return!isNaN(Y)&&Y>0?Math.min(V,Y):V}return u={getCatchupMaxDrift:function(){if(!isNaN(T.get().streaming.liveCatchup.maxDrift)&&T.get().streaming.liveCatchup.maxDrift>0)return T.get().streaming.liveCatchup.maxDrift;var V=y.getServiceDescriptionSettings();return V&&V.liveCatchup&&!isNaN(V.liveCatchup.maxDrift)&&V.liveCatchup.maxDrift>0?V.liveCatchup.maxDrift:12},getCatchupModeEnabled:function(){return T.get().streaming.liveCatchup.enabled!==null?T.get().streaming.liveCatchup.enabled:c.getInitialCatchupModeActivated()},getStableBufferTime:G,getInitialBufferLevel:function(){var V=T.get().streaming.buffer.initialBufferLevel;return isNaN(V)||V<0?0:Math.min(G(),V)},getRetryAttemptsForType:function(V){var Y=isNaN(T.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:T.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return c.getLowLatencyModeEnabled()?T.get().streaming.retryAttempts[V]*Y:T.get().streaming.retryAttempts[V]},getRetryIntervalsForType:function(V){var Y=isNaN(T.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:T.get().streaming.retryIntervals.lowLatencyReductionFactor;return c.getLowLatencyModeEnabled()?T.get().streaming.retryIntervals[V]/Y:T.get().streaming.retryIntervals[V]},getCatchupPlaybackRates:function(V){var Y=T.get().streaming.liveCatchup.playbackRate;if(!isNaN(Y.min)||!isNaN(Y.max))return{min:m(Y.min,V),max:R(Y.max,V)};var N=y.getServiceDescriptionSettings();if(N&&N.liveCatchup&&(!isNaN(N.liveCatchup.playbackRate.min)||!isNaN(N.liveCatchup.playbackRate.max))){var H=N.liveCatchup.playbackRate;return{min:m(H.min,V),max:R(H.max,V)}}return{min:-.5,max:.5}},getAbrBitrateParameter:function(V,Y){try{var N=T.get().streaming.abr[V][Y];if(!isNaN(N)&&N!==-1)return N;var H=y.getServiceDescriptionSettings();return H&&H[V]&&!isNaN(H[V][Y])?H[V][Y]:-1}catch{return-1}},setConfig:function(V){V.playbackController&&(c=V.playbackController),V.serviceDescriptionController&&(y=V.serviceDescriptionController)},reset:function(){}},r=(0,_.Z)(A).getInstance().getLogger(u),u}Fa.__dashjs_factory_name="MediaPlayerModel";const ls=h.Z.getSingletonFactory(Fa);var cs=C(1767);function ka(u){var r=(u=u||{}).abrController,c=u.switchHistory,y=u.droppedFramesHistory,A=u.currentRequest,T=u.useBufferOccupancyABR,m=u.useL2AABR,R=u.useLoLPABR,G=u.streamProcessor?u.streamProcessor.getScheduleController():null,V=u.streamProcessor?u.streamProcessor.getRepresentationInfo():null,Y=u.videoModel?u.videoModel:null;function N(){return V?V.mediaInfo:null}return{getMediaType:function(){var H=N();return H?H.type:null},getMediaInfo:N,getDroppedFramesHistory:function(){return y},getCurrentRequest:function(){return A},getSwitchHistory:function(){return c},getStreamInfo:function(){var H=N();return H?H.streamInfo:null},getScheduleController:function(){return G},getAbrController:function(){return r},getRepresentationInfo:function(){return V},useBufferOccupancyABR:function(){return T},useL2AABR:function(){return m},useLoLPABR:function(){return R},getVideoModel:function(){return Y}}}ka.__dashjs_factory_name="RulesContext";const Za=h.Z.getClassFactory(ka);var _i=C(2068);function Ua(){var u=[],r=[];return{push:function(c){c.newValue===_i.Z.NO_CHANGE&&(c.newValue=c.oldValue),u[c.oldValue]||(u[c.oldValue]={noDrops:0,drops:0,dropSize:0});var y=c.newValue-c.oldValue,A=y<0?1:0,T=A?-y:0,m=A?0:1;if(u[c.oldValue].drops+=A,u[c.oldValue].dropSize+=T,u[c.oldValue].noDrops+=m,r.push({idx:c.oldValue,noDrop:m,drop:A,dropSize:T}),r.length>8){var R=r.shift();u[R.idx].drops-=R.drop,u[R.idx].dropSize-=R.dropSize,u[R.idx].noDrops-=R.noDrop}},getSwitchRequests:function(){return u},reset:function(){u=[],r=[]}}}Ua.__dashjs_factory_name="SwitchRequestHistory";const fs=h.Z.getClassFactory(Ua);function Ba(){var u={},r={},c={};return{push:function(y,A,T){if(A){u[y]||(u[y]=[],r[y]=0,c[y]=0);var m=T&&T.droppedVideoFrames?T.droppedVideoFrames:0,R=T&&T.totalVideoFrames?T.totalVideoFrames:0,G=m-r[y];r[y]=m;var V=R-c[y];c[y]=R;var Y=u[y];isNaN(A)||(Y[A]?(Y[A].droppedVideoFrames+=G,Y[A].totalVideoFrames+=V):Y[A]={droppedVideoFrames:G,totalVideoFrames:V})}},getFrameHistory:function(y){return u[y]},clearForStream:function(y){try{delete u[y],delete r[y],delete c[y]}catch{}},reset:function(){u={},r={},c={}}}}Ba.__dashjs_factory_name="DroppedFramesHistory";const ds=h.Z.getClassFactory(Ba);function Ga(u){var r,c,y,A,T,m=this.context,R=(u=u||{}).settings,G=(0,g.Z)(m).getInstance();function V(ne,ue,fe,x){var re=Math.pow(.5,fe/x.fast);ne.fastEstimate=(1-re)*ue+re*ne.fastEstimate;var ee=Math.pow(.5,fe/x.slow);ne.slowEstimate=(1-ee)*ue+ee*ne.slowEstimate,ne.totalWeight+=fe}function Y(ne,ue,fe){return R.get().streaming.abr.movingAverageMethod!==e.Z.MOVING_AVERAGE_SLIDING_WINDOW?function(x,re){var ee=x?T.throughputHalfLife:T.latencyHalfLife,ae=x?y[re]:A[re];if(!ae||ae.totalWeight<=0)return NaN;var p=ae.fastEstimate/(1-Math.pow(.5,ae.totalWeight/ee.fast)),L=ae.slowEstimate/(1-Math.pow(.5,ae.totalWeight/ee.slow));return x?Math.min(p,L):Math.max(p,L)}(ne,ue):function(x,re,ee){var ae=function(L,Z,O){var w,z;if(L?(w=r[Z],z=O?3:4):(w=c[Z],z=4),w){if(z>=w.length)z=w.length;else if(L)for(var Q=1;Q<z;++Q){var ie=w[w.length-Q]/w[w.length-Q-1];if((ie>=1.3||ie<=.7692307692307692)&&(z+=1)===w.length)break}}else z=0;return z}(x,re,ee),p=(x?r:c)[re];return ae!==0&&p&&p.length!==0?(p=p.slice(-ae)).reduce(function(L,Z){return L+Z})/p.length:NaN}(ne,ue,fe)}function N(ne,ue){return Y(!0,ne,ue)}function H(ne){r[ne]=r[ne]||[],c[ne]=c[ne]||[],y[ne]=y[ne]||{fastEstimate:0,slowEstimate:0,totalWeight:0},A[ne]=A[ne]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function q(){r={},c={},y={},A={}}var ge={push:function(ne,ue,fe){if(ue.trace&&ue.trace.length){var x,re=ue.tresponse.getTime()-ue.trequest.getTime()||1,ee=ue._tfinish.getTime()-ue.tresponse.getTime()||1,ae=ue.trace.reduce(function(O,w){return O+w.b[0]},0),p=0;if((x=ue._fileLoaderType&&ue._fileLoaderType===e.Z.FILE_LOADER_TYPES.FETCH?ue.trace.reduce(function(O,w){return O+w.d},0):fe?ee:re+ee)!==0&&(p=Math.round(8*ae/x)),ue.cmsd){var L=ue.cmsd.dynamic&&ue.cmsd.dynamic.etp?ue.cmsd.dynamic.etp:null;if(L){var Z=R.get().streaming.cmsd.abr.etpWeightRatio;Z>0&&Z<=1&&(p=p*(1-Z)+L*Z)}}if(H(ne),function(O,w,z){return O===e.Z.VIDEO?z<R.get().streaming.cacheLoadThresholds[e.Z.VIDEO]:O===e.Z.AUDIO?z<R.get().streaming.cacheLoadThresholds[e.Z.AUDIO]:void 0}(ne,0,ee)){if(r[ne].length>0&&!r[ne].hasCachedEntries)return;r[ne].hasCachedEntries=!0}else r[ne]&&r[ne].hasCachedEntries&&function(O){delete r[O],delete c[O],delete y[O],delete A[O],H(O)}(ne);r[ne].push(p),G.trigger(n.Z.THROUGHPUT_MEASUREMENT_STORED,{throughput:p,mediaType:ne,httpRequest:ue}),r[ne].length>20&&r[ne].shift(),c[ne].push(re),c[ne].length>20&&c[ne].shift(),V(y[ne],p,.001*ee,T.throughputHalfLife),V(A[ne],re,1,T.latencyHalfLife)}},getAverageThroughput:N,getSafeAverageThroughput:function(ne,ue){var fe=N(ne,ue);return isNaN(fe)||(fe*=R.get().streaming.abr.bandwidthSafetyFactor),fe},getAverageLatency:function(ne){return Y(!1,ne)},reset:q};return T={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},q(),ge}Ga.__dashjs_factory_name="ThroughputHistory";const gs=h.Z.getClassFactory(Ga);function Wi(){var u,r,c,y,A,T,m,R,G,V,Y,N,H,q,ge,ne,ue,fe,x,re,ee,ae,p,L,Z,O,w,z=this.context,Q=(0,_.Z)(z).getInstance(),ie=(0,g.Z)(z).getInstance();function M(){A={},T={},R={},m={},re={},p={},L={},Z={},V===void 0&&(V=!1),ee&&ee.reset(),x=void 0,ee=void 0,ae=void 0,clearTimeout(G),G=null}function B(_e){var le=_e.request.mediaType,Me=_e.streamId;if(le&&Me&&m[Me]&&w.get().streaming.abr.autoSwitchBitrate[le]){var ye=m[Me][le];if(ye){var xe=Za(z).create({abrController:u,streamProcessor:ye,currentRequest:_e.request,useBufferOccupancyABR:p[le],useL2AABR:L[le],useLoLPABR:Z[le],videoModel:q}),Ge=c.shouldAbandonFragment(xe,Me);Ge.quality>_i.Z.NO_CHANGE&&ye.getFragmentModel().getRequests({state:I.FRAGMENT_MODEL_LOADING,index:_e.request.index})[0]&&(R[Me][le].state=S.Z.ABANDON_LOAD,re[Me][le].reset(),re[Me][le].push({oldValue:Ee(le,Me),newValue:Ge.quality,confidence:1,reason:Ge.reason}),Pe(le,y.getActiveStreamInfo(),Ge.quality,Ge.reason),clearTimeout(G),G=setTimeout(function(){R[Me][le].state=S.Z.ALLOW_LOAD,G=null},w.get().streaming.abandonLoadTimeout))}}}function me(_e){_e.mediaType===e.Z.VIDEO&&(x!==void 0&&ee.push(_e.streamId,x,q.getPlaybackQuality()),x=_e.newQuality)}function Te(_e){var le,Me;_e.metric!==S.Z.HTTP_REQUEST||!_e.value||_e.value.type!==Ae.w.MEDIA_SEGMENT_TYPE||_e.mediaType!==e.Z.AUDIO&&_e.mediaType!==e.Z.VIDEO||ae.push(_e.mediaType,_e.value,w.get().streaming.abr.useDeadTimeLatency),_e.metric!==S.Z.BUFFER_LEVEL||_e.mediaType!==e.Z.AUDIO&&_e.mediaType!==e.Z.VIDEO||(le=_e.mediaType,Me=.001*_e.value.level,w.get().streaming.abr.ABRStrategy===e.Z.ABR_STRATEGY_DYNAMIC&&function(ye,xe){try{var Ge=ge.getStableBufferTime(),Ve=Ge,ft=.5*Ge,St=p[ye],qt=xe>(St?ft:Ve);p[ye]=qt,qt!==St&&(qt?r.info("["+ye+"] switching from throughput to buffer occupancy ABR rule (buffer: "+xe.toFixed(3)+")."):r.info("["+ye+"] switching from buffer occupancy to throughput ABR rule (buffer: "+xe.toFixed(3)+")."))}catch(jt){r.error(jt)}}(le,Me))}function Ie(_e,le){try{var Me;return A[le]=A[le]||{},A[le].hasOwnProperty(_e)||(A[le][_e]=0),Me=function(ye,xe){var Ge=A[xe][ye],Ve=Ge;if(!m[xe]||!m[xe][ye])return Ve;var ft=Oe(ye,xe);ft!==void 0&&(Ve=Math.max(Ge,ft));var St=function(qt,jt){try{var kt=ge.getAbrBitrateParameter("maxBitrate",qt);return kt>-1?nt(m[jt][qt].getMediaInfo(),kt,jt):void 0}catch{return}}(ye,xe);return St!==void 0&&(Ve=Math.min(Ve,St)),Ve}(_e,le),Me=function(ye,xe,Ge){var Ve=A[Ge][xe],ft=w.get().streaming.abr.maxRepresentationRatio[xe];return isNaN(ft)||ft>=1||ft<0?ye:Math.min(ye,Math.round(Ve*ft))}(Me,_e,le),Me=function(ye,xe,Ge){if(xe!==e.Z.VIDEO||!w.get().streaming.abr.limitBitrateByPortal||!m[Ge]||!m[Ge][xe])return ye;V||Dt();var Ve=m[Ge][xe].getStreamInfo(),ft=H.getAdaptationForType(Ve.index,xe,Ve).Representation_asArray,St=ye;if(Y>0&&N>0){for(;St>0&&ft[St]&&Y<ft[St].width&&Y-ft[St-1].width<ft[St].width-Y;)St-=1;for(;St<ft.length-1&&ft[St].width===ft[St+1].width;)St+=1}return St}(Me,_e,le),w.get().streaming.cmsd.enabled&&w.get().streaming.cmsd.abr.applyMb&&(Me=function(ye,xe,Ge){if(xe!=="video")return ye;var Ve=ue.getMaxBitrate(xe);if(Ve<0)return ye;var ft=$e(Ge,"audio",Ee("audio",Ge));Ve-=ft?ft.bitrate/1e3:0;var St=nt(m[Ge][xe].getMediaInfo(),Ve,Ge);return r.debug("Stream ID: "+Ge+" ["+xe+"] Apply max bit rate from CMSD: "+Ve),Math.min(ye,St)}(Me,_e,le)),Me}catch{return}}function Oe(_e,le){try{return function(Me,ye){try{var xe=ge.getAbrBitrateParameter("minBitrate",Me);if(xe>-1){var Ge=m[ye][Me].getMediaInfo(),Ve=Tt(Ge),ft=nt(Ge,xe,ye);return Ve[ft]&&ft<Ve.length-1&&Ve[ft].bitrate<1e3*xe&&ft++,ft}return}catch{return}}(_e,le)}catch{return}}function Ee(_e){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;try{return le||(le=y.getActiveStreamInfo().id),_e&&m[le]&&m[le][_e]&&le?(T[le]=T[le]||{},T[le].hasOwnProperty(_e)||(T[le][_e]=0),T[le][_e]):0}catch{return 0}}function Pe(_e,le,Me){var ye=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(le&&le.id&&_e){var xe=le.id,Ge=Ee(_e,xe);(0,X.SE)(Me);var Ve=Ie(_e,xe);Me!==Ge&&Me>=0&&Me<=Ve&&ct(_e,Ge,Me,Ve,ye,xe)}}function ct(_e,le,Me,ye,xe,Ge){if(_e&&m[Ge]&&m[Ge][_e]){var Ve=m[Ge][_e].getStreamInfo(),ft=Ve&&Ve.manifestInfo&&Ve.manifestInfo.isDynamic,St=O.getCurrentBufferLevel(_e);r.info("Stream ID: "+Ge+" ["+_e+"] switch from "+le+" to "+Me+"/"+ye+" (buffer: "+St+") "+(xe?JSON.stringify(xe):".")),T[Ge]=T[Ge]||{},T[Ge][_e]=Me;var qt=$e(Ge,_e,Me);ie.trigger(i.Z.QUALITY_CHANGE_REQUESTED,{oldQuality:le,newQuality:Me,reason:xe,streamInfo:Ve,bitrateInfo:qt,maxIdx:ye,mediaType:_e},{streamId:Ve.id,mediaType:_e});var jt=ae.getAverageThroughput(_e,ft);isNaN(jt)||fe.setSavedBitrateSettings(_e,jt)}}function $e(_e,le,Me){if(le&&m&&m[_e]&&m[_e][le]){var ye=Tt(m[_e][le].getMediaInfo());return ye[Me]?ye[Me]:null}return null}function nt(_e,le,Me){var ye=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,xe=_e&&_e.type?m[Me][_e.type].getRepresentationInfo():null;if(w.get().streaming.abr.useDeadTimeLatency&&ye&&xe&&xe.fragmentDuration){ye/=1e3;var Ge=xe.fragmentDuration;if(ye>Ge)return 0;var Ve=ye/Ge;le*=1-Ve}for(var ft=Tt(_e),St=ft.length-1;St>=0;St--){var qt=ft[St];if(1e3*le>=qt.bitrate)return St}return 0}function Tt(_e){var le=[];if(!_e||!_e.bitrateList)return le;for(var Me,ye=_e.bitrateList,xe=_e.type,Ge=0,Ve=ye.length;Ge<Ve;Ge++)(Me=new ii).mediaType=xe,Me.qualityIndex=Ge,Me.bitrate=ye[Ge].bandwidth,Me.width=ye[Ge].width,Me.height=ye[Ge].height,Me.scanType=ye[Ge].scanType,le.push(Me);return le}function Dt(){if(q){var _e=w.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;Y=q.getClientWidth()*_e,N=q.getClientHeight()*_e}}return u={initialize:function(){ee=ds(z).create(),ae=gs(z).create({settings:w}),(c=(0,cs.Z)(z).create({dashMetrics:O,customParametersModel:ne,mediaPlayerModel:ge,settings:w})).initialize(),ie.on(n.Z.QUALITY_CHANGE_RENDERED,me,u),ie.on(n.Z.METRIC_ADDED,Te,u),ie.on(i.Z.LOADING_PROGRESS,B,u)},isPlayingAtTopQuality:function(_e){var le=_e?_e.id:null,Me=Ee(e.Z.AUDIO,le),ye=Ee(e.Z.VIDEO,le);return Me===Ie(e.Z.AUDIO,le)&&ye===Ie(e.Z.VIDEO,le)},updateTopQualityIndex:function(_e){var le=_e.type,Me=_e.streamInfo.id,ye=_e.representationCount-1;return A[Me]=A[Me]||{},A[Me][le]=ye,ye},clearDataForStream:function(_e){ee&&ee.clearForStream(_e),m[_e]&&delete m[_e],re[_e]&&delete re[_e],R[_e]&&delete R[_e]},getThroughputHistory:function(){return ae},getBitrateList:Tt,getQualityForBitrate:nt,getTopBitrateInfoFor:function(_e){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(le||(le=y.getActiveStreamInfo().id),_e&&m&&m[le]&&m[le][_e]){var Me=Ie(_e,le),ye=Tt(m[le][_e].getMediaInfo());return ye[Me]?ye[Me]:null}return null},getMinAllowedIndexFor:Oe,getMaxAllowedIndexFor:Ie,getInitialBitrateFor:function(_e,le){if(function(){if(!fe||!fe.hasOwnProperty("getSavedBitrateSettings"))throw new Error(e.Z.MISSING_CONFIG_ERROR)}(),_e===e.Z.TEXT)return NaN;var Me=fe.getSavedBitrateSettings(_e),ye=ge.getAbrBitrateParameter("initialBitrate",_e),xe=w.get().streaming.abr.initialRepresentationRatio[_e];if(ye===-1)if(xe>-1){var Ge=m[le][_e].getStreamInfo(),Ve=H.getAdaptationForType(Ge.index,_e,Ge).Representation_asArray;ye=Array.isArray(Ve)?Ve[Math.max(Math.round(Ve.length*xe)-1,0)].bandwidth/1e3:0}else ye=isNaN(Me)?_e===e.Z.VIDEO?1e3:100:Me;return ye},getQualityFor:Ee,getAbandonmentStateFor:function(_e,le){return R[_e]&&R[_e][le]?R[_e][le].state:null},setPlaybackQuality:Pe,checkPlaybackQuality:function(_e,le){try{if(!(_e&&m&&m[le]&&m[le][_e]))return!1;if(ee){var Me=q.getPlaybackQuality();Me&&ee.push(le,x,Me)}if(!w.get().streaming.abr.autoSwitchBitrate[_e])return!1;var ye=Ee(_e,le),xe=Za(z).create({abrController:u,switchHistory:re[le][_e],droppedFramesHistory:ee,streamProcessor:m[le][_e],currentValue:ye,useBufferOccupancyABR:p[_e],useL2AABR:L[_e],useLoLPABR:Z[_e],videoModel:q}),Ge=Oe(_e,le),Ve=Ie(_e,le),ft=c.getMaxQuality(xe),St=ft.quality;return Ge!==void 0&&(St>_i.Z.NO_CHANGE?St:ye)<Ge&&(St=Ge),St>Ve&&(St=Ve),re[le][_e].push({oldValue:ye,newValue:St}),St>_i.Z.NO_CHANGE&&St!==ye&&(R[le][_e].state===S.Z.ALLOW_LOAD||St<ye)&&(ct(_e,ye,St,Ve,ft.reason,le),!0)}catch{return!1}},setElementSize:Dt,setWindowResizeEventCalled:function(_e){V=_e},registerStreamType:function(_e,le){var Me=le.getStreamInfo().id;m[Me]||(m[Me]={}),re[Me]||(re[Me]={}),R[Me]||(R[Me]={}),re[Me][_e]=fs(z).create(),m[Me][_e]=le,R[Me][_e]={},R[Me][_e].state=S.Z.ALLOW_LOAD,function(ye){var xe=w.get().streaming.abr.ABRStrategy;xe===e.Z.ABR_STRATEGY_L2A?(p[ye]=!1,Z[ye]=!1,L[ye]=!0):xe===e.Z.ABR_STRATEGY_LoLP?(p[ye]=!1,Z[ye]=!0,L[ye]=!1):xe===e.Z.ABR_STRATEGY_BOLA?(p[ye]=!0,Z[ye]=!1,L[ye]=!1):xe===e.Z.ABR_STRATEGY_THROUGHPUT?(p[ye]=!1,Z[ye]=!1,L[ye]=!1):xe===e.Z.ABR_STRATEGY_DYNAMIC&&(p[ye]=!(!p||!p[ye])&&p[ye],Z[ye]=!1,L[ye]=!1)}(_e),_e===e.Z.VIDEO&&Dt()},unRegisterStreamType:function(_e,le){try{m[_e]&&m[_e][le]&&delete m[_e][le],re[_e]&&re[_e][le]&&delete re[_e][le],R[_e]&&R[_e][le]&&delete R[_e][le]}catch{}},setConfig:function(_e){_e&&(_e.streamController&&(y=_e.streamController),_e.domStorage&&(fe=_e.domStorage),_e.mediaPlayerModel&&(ge=_e.mediaPlayerModel),_e.customParametersModel&&(ne=_e.customParametersModel),_e.cmsdModel&&(ue=_e.cmsdModel),_e.dashMetrics&&(O=_e.dashMetrics),_e.adapter&&(H=_e.adapter),_e.videoModel&&(q=_e.videoModel),_e.settings&&(w=_e.settings))},reset:function(){M(),ie.off(i.Z.LOADING_PROGRESS,B,u),ie.off(n.Z.QUALITY_CHANGE_RENDERED,me,u),ie.off(n.Z.METRIC_ADDED,Te,u),c&&c.reset()}},r=Q.getLogger(u),M(),u}Wi.__dashjs_factory_name="AbrController";var Qi=h.Z.getSingletonFactory(Wi);Qi.QUALITY_DEFAULT=0,h.Z.updateSingletonFactory(Wi.__dashjs_factory_name,Qi);const hs=Qi;var ms=new Map([[e.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[e.Z.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[e.Z.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[e.Z.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function qa(){var u,r,c,y,A,T,m=this.context,R=(0,g.Z)(m).getInstance(),G=[];function V(){c&&(c.playbackRate=1,c.removeEventListener("canplay",V))}function Y(){return G.length>0}function N(){if(c&&Y()&&c.playbackRate===0){var x=document.createEvent("Event");x.initEvent("waiting",!0,!1),c.dispatchEvent(x)}}function H(x,re){c&&c.addEventListener(x,re)}function q(x,re){c&&c.removeEventListener(x,re)}function ge(){return c?c.readyState:NaN}function ne(){return c?c.buffered:null}function ue(x,re,ee,ae,p){if(c){for(var L=0;L<c.textTracks.length;L++)if(c.textTracks[L].kind===x&&(!re||c.textTracks[L].label==re)&&c.textTracks[L].language===ee&&c.textTracks[L].isTTML===ae&&c.textTracks[L].isEmbedded===p)return c.textTracks[L]}return null}function fe(x,re){x===e.Z.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||ge()>=x?re():function(ee,ae){H(ee,function p(){q(ee,p),ae(ee)})}(ms.get(x),re)}return u={initialize:function(){R.on(i.Z.PLAYBACK_PLAYING,N,this)},setCurrentTime:function(x,re){c&&(y=x,fe(e.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){if(c.currentTime!==y)try{y=re?function(ee){var ae=ne(),p=ee,L=9999999999;if(ae)for(var Z=0;Z<ae.length;Z++){var O=ae.start(Z),w=ae.end(Z),z=Math.abs(O-ee),Q=Math.abs(w-ee);if(ee>=O&&ee<=w)return ee;z<L&&(L=z,p=O),Q<L&&(L=Q,p=w)}return p}(y):y,c.currentTime=y,y=NaN}catch(ee){c.readyState===0&&ee.code===ee.INVALID_STATE_ERR&&setTimeout(function(){c.currentTime=y,y=NaN},400)}else y=NaN}))},play:function(){if(c){c.autoplay=!0;var x=c.play();x&&x.catch&&typeof Promise<"u"&&x.catch(function(re){re.name==="NotAllowedError"&&R.trigger(i.Z.PLAYBACK_NOT_ALLOWED),r.warn("Caught pending play exception - continuing (".concat(re,")"))})}},isPaused:function(){return c?c.paused:null},pause:function(){c&&(c.pause(),c.autoplay=!1)},isStalled:Y,isSeeking:function(){return c?c.seeking||!isNaN(y):null},getTime:function(){return c?isNaN(y)?c.currentTime:y:null},getPlaybackRate:function(){return c?c.playbackRate:null},setPlaybackRate:function(x){var re=arguments.length>1&&arguments[1]!==void 0&&arguments[1];c&&(!re&&c.readyState<=2&&x>0?c.addEventListener("canplay",V):c.playbackRate=x)},getPlayedRanges:function(){return c?c.played:null},getEnded:function(){return c?c.ended:null},setStallState:function(x,re){(function(ee,ae){ae?function(p){p!==null&&c&&!c.seeking&&G.indexOf(p)===-1&&G.push(p)}(ee):function(p){var L=G.indexOf(p);p!==null&&L!==-1&&G.splice(L,1)}(ee)})(x,re)},getElement:function(){return c},setElement:function(x){if(!(x==null||x&&/^(VIDEO|AUDIO)$/i.test(x.nodeName)))throw"element is not video or audio DOM type!";(c=x)&&(c.preload="auto")},setSource:function(x){c&&(x?c.src=x:(c.removeAttribute("src"),c.load()))},getSource:function(){return c?c.src:null},getTTMLRenderingDiv:function(){return A},setTTMLRenderingDiv:function(x){(A=x).style.position="absolute",A.style.display="flex",A.style.overflow="hidden",A.style.pointerEvents="none",A.style.top=0,A.style.left=0},getVttRenderingDiv:function(){return T},setVttRenderingDiv:function(x){T=x},getPlaybackQuality:function(){if(!c)return null;var x="webkitDroppedFrameCount"in c&&"webkitDecodedFrameCount"in c,re=null;return"getVideoPlaybackQuality"in c?re=c.getVideoPlaybackQuality():x&&(re={droppedVideoFrames:c.webkitDroppedFrameCount,totalVideoFrames:c.webkitDroppedFrameCount+c.webkitDecodedFrameCount,creationTime:new Date}),re},addEventListener:H,removeEventListener:q,getReadyState:ge,getBufferRange:ne,getClientWidth:function(){return c?c.clientWidth:NaN},getClientHeight:function(){return c?c.clientHeight:NaN},getTextTracks:function(){return c?c.textTracks:[]},getTextTrack:ue,addTextTrack:function(x,re,ee,ae,p){if(!c)return null;var L=ue(x,re,ee,ae,p);return L||((L=c.addTextTrack(x,re,ee)).isEmbedded=p,L.isTTML=ae),L},appendChild:function(x){c&&(c.appendChild(x),x.isTTML!==void 0&&(c.textTracks[c.textTracks.length-1].isTTML=x.isTTML,c.textTracks[c.textTracks.length-1].isEmbedded=x.isEmbedded))},removeChild:function(x){c&&c.removeChild(x)},getVideoWidth:function(){return c?c.videoWidth:NaN},getVideoHeight:function(){return c?c.videoHeight:NaN},getVideoRelativeOffsetTop:function(){if(c){var x=c.parentNode.host||c.parentNode;return x?c.getBoundingClientRect().top-x.getBoundingClientRect().top:NaN}return NaN},getVideoRelativeOffsetLeft:function(){if(c){var x=c.parentNode.host||c.parentNode;return x?c.getBoundingClientRect().left-x.getBoundingClientRect().left:NaN}return NaN},waitForReadyState:fe,reset:function(){R.off(i.Z.PLAYBACK_PLAYING,N,this)}},r=(0,_.Z)(m).getInstance().getLogger(u),y=NaN,u}qa.__dashjs_factory_name="VideoModel";const ps=h.Z.getSingletonFactory(qa);var ys=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],Ya="dashjs_?_bitrate",ja="dashjs_?_settings",xr="localStorage",Ha="lastBitrate",Va="lastMediaSettings";function Ka(u){u=u||{};var r,c,y,A=this.context,T=u.settings;function m(Y){if(y!==void 0)return y;var N;y=!1;try{typeof window<"u"&&(N=window[Y])}catch(H){return c.warn("DOMStorage access denied: "+H.message),y}if(!N||Y!==xr&&Y!=="sessionStorage")return y;try{N.setItem("1","1"),N.removeItem("1"),y=!0}catch(H){c.warn("DOMStorage is supported, but cannot be used: "+H.message)}return y}function R(){var Y=6e5;return Math.round(new Date().getTime()/Y)*Y}function G(Y,N){return m(Y)&&T.get().streaming[N+"CachingInfo"].enabled}function V(){if(!T)throw new Error(e.Z.MISSING_CONFIG_ERROR)}return r={getSavedBitrateSettings:function(Y){if(V(),!T.get().streaming.lastBitrateCachingInfo.enabled)return NaN;var N=NaN;if(G(xr,Ha)){var H=Ya.replace(/\?/,Y);try{var q=JSON.parse(localStorage.getItem(H))||{},ge=new Date().getTime()-parseInt(q.timestamp,10)>=T.get().streaming.lastBitrateCachingInfo.ttl||!1,ne=parseFloat(q.bitrate);isNaN(ne)||ge?ge&&localStorage.removeItem(H):(N=ne,c.debug("Last saved bitrate for "+Y+" was "+ne))}catch{return null}}return N},setSavedBitrateSettings:function(Y,N){if(G(xr,Ha)&&N){var H=Ya.replace(/\?/,Y);try{localStorage.setItem(H,JSON.stringify({bitrate:N.toFixed(3),timestamp:R()}))}catch(q){c.error(q.message)}}},getSavedMediaSettings:function(Y){if(V(),!T.get().streaming.lastMediaSettingsCachingInfo.enabled)return null;var N=null;if(G(xr,Va)){var H=ja.replace(/\?/,Y);try{var q=JSON.parse(localStorage.getItem(H))||{},ge=new Date().getTime()-parseInt(q.timestamp,10)>=T.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;N=q.settings,ge&&(localStorage.removeItem(H),N=null)}catch{return null}}return N},setSavedMediaSettings:function(Y,N){if(G(xr,Va)){var H=ja.replace(/\?/,Y);try{localStorage.setItem(H,JSON.stringify({settings:N,timestamp:R()}))}catch(q){c.error(q.message)}}}},c=(0,_.Z)(A).getInstance().getLogger(r),m(xr)&&ys.forEach(function(Y){var N=localStorage.getItem(Y.oldKey);if(N){localStorage.removeItem(Y.oldKey);try{localStorage.setItem(Y.newKey,N)}catch(H){c.error(H.message)}}}),r}Ka.__dashjs_factory_name="DOMStorage";const Es=h.Z.getSingletonFactory(Ka);var vs=C(2032),za=C(2011);function Wa(){var u,r,c,y,A,T,m,R,G,V,Y,N,H,q=this.context;function ge(x,re,ee,ae){var p=null,L=x?H.resolve(x.path):null,Z=ae||{init:!0,url:L?L.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:re};r.debug("Start searching for initialization.");var O=fe(Z);R.load({request:O,success:function(w){if(Z.bytesLoaded=Z.range.end,!(p=y.findInitRange(w)))return Z.range.end=Z.bytesLoaded+Z.bytesToLoad,ge(x,re,ee,Z);x.range=p,ee(x)},error:function(){ee(x)}}),r.debug("Perform init search: "+Z.url)}function ne(x,re,ee,ae,p,L){if(ee&&(ee.start===void 0||ee.end===void 0)){var Z=ee?ee.toString().split("-"):null;ee=Z?{start:parseFloat(Z[0]),end:parseFloat(Z[1])}:null}p=p||ue;var O=null,w=null,z=!!ee,Q=x?H.resolve(x.path):null,ie={init:!1,url:Q?Q.url:void 0,range:z?ee:{start:0,end:1500},searching:!z,bytesLoaded:L?L.bytesLoaded:0,bytesToLoad:1500,mediaType:re},M=fe(ie);R.load({request:M,success:function(B){var me=ie.bytesToLoad,Te=B.byteLength;if(ie.bytesLoaded=ie.range.end-ie.range.start,O=y.parse(B),(w=O.getBox("sidx"))&&w.isComplete){var Ie,Oe,Ee=w.references;if(Ee!=null&&Ee.length>0&&(Ie=Ee[0].reference_type===1),Ie){var Pe,ct,$e,nt;r.debug("Initiate multiple SIDX load."),ie.range.end=ie.range.start+w.size;var Tt=[],Dt=0,_e=(w.offset||ie.range.start)+w.size,le=function(ye){ye?(Tt=Tt.concat(ye),++Dt>=ct&&(Tt.sort(function(xe,Ge){return xe.startTime-Ge.startTime<0?-1:0}),p(Tt,x,ae))):p(null,x,ae)};for(Pe=0,ct=Ee.length;Pe<ct;Pe++)$e=_e,nt=_e+Ee[Pe].referenced_size-1,_e+=Ee[Pe].referenced_size,ne(x,re,{start:$e,end:nt},ae,le,ie)}else r.debug("Parsing segments from SIDX. representation "+re+" - id: "+x.id+" for range : "+ie.range.start+" - "+ie.range.end),Oe=function(ye,xe){for(var Ge,Ve,ft,St,qt=ye.references,jt=qt.length,kt=ye.timescale,Ht=ye.earliest_presentation_time,Kt=xe.range.start+ye.offset+ye.first_offset+ye.size,rn=[],un=0;un<jt;un++)ft=qt[un].subsegment_duration,St=qt[un].referenced_size,(Ge=new za.Z).duration=ft,Ge.startTime=Ht,Ge.timescale=kt,Ve=Kt+St-1,Ge.mediaRange=Kt+"-"+Ve,rn.push(Ge),Ht+=ft,Kt+=St;return rn}(w,ie),p(Oe,x,ae)}else{if(w)ie.range.start=w.offset||ie.range.start,ie.range.end=ie.range.start+(w.size||me);else{if(Te<ie.bytesLoaded)return void p(null,x,ae);var Me=O.getLastBox();Me&&Me.size?(ie.range.start=Me.offset+Me.size,ie.range.end=ie.range.start+me):ie.range.end+=me}ne(x,re,ie.range,ae,null,ie)}},error:function(){p(null,x,ae)}}),r.debug("Perform SIDX load for type ".concat(re," : ").concat(ie.url," with range ").concat(ie.range.start," - ").concat(ie.range.end))}function ue(x,re,ee){ee({segments:x,representation:re,error:x?void 0:new k.Z(G.SEGMENT_BASE_LOADER_ERROR_CODE,G.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function fe(x){if(x.url){var re=new P.Z;return re.setInfo(x),re}}return u={setConfig:function(x){x.baseURLController&&(H=x.baseURLController),x.dashMetrics&&(T=x.dashMetrics),x.mediaPlayerModel&&(m=x.mediaPlayerModel),x.errHandler&&(c=x.errHandler),x.boxParser&&(y=x.boxParser),x.debug&&(r=x.debug.getLogger(u)),x.requestModifier&&(A=x.requestModifier),x.errors&&(G=x.errors),x.urlUtils&&(N=x.urlUtils),x.constants&&(V=x.constants),x.dashConstants&&(Y=x.dashConstants)},initialize:function(){R=Wn(q).create({errHandler:c,dashMetrics:T,mediaPlayerModel:m,requestModifier:A,boxParser:y,errors:G,urlUtils:N,constants:V,dashConstants:Y})},loadInitialization:function(x,re){return new Promise(function(ee){ge(x,re,ee)})},loadSegments:function(x,re,ee){return new Promise(function(ae){ne(x,re,ee,ae)})},reset:function(){R&&(R.abort(),R=null)}}}Wa.__dashjs_factory_name="SegmentBaseLoader";const _s=h.Z.getSingletonFactory(Wa);function Qa(u){var r;u=u||{};var c=new DataView(u.data),y=0;function A(m,R){var G=!0,V=0;if(R===void 0&&(R=!1),m.tag>16777215?(c.getUint32(y)!==m.tag&&(G=!1),V=4):m.tag>65535?(256*c.getUint16(y)+c.getUint8(y+2)!==m.tag&&(G=!1),V=3):m.tag>255?(c.getUint16(y)!==m.tag&&(G=!1),V=2):(c.getUint8(y)!==m.tag&&(G=!1),V=1),!G&&m.required&&!R)throw new Error("required tag not found");return G&&(y+=V),G}function T(m){var R=1,G=128,V=-1,Y=0,N=c.getUint8(y),H=0;for(H=0;H<8;H+=1){if((N&G)===G){Y=m===void 0?N&~G:N,V=H;break}G>>=1}for(H=0;H<V;H+=1,R+=1)Y=Y<<8|255&c.getUint8(y+R);return y+=R,Y}return r={getPos:function(){return y},setPos:function(m){y=m},consumeTag:A,consumeTagAndSize:function(m,R){var G=A(m,R);return G&&T(),G},parseTag:function(m){var R;return A(m),R=T(),r[m.parse](R)},skipOverElement:function(m,R){var G,V=A(m,R);return V&&(G=T(),y+=G),V},getMatroskaCodedNum:T,getMatroskaFloat:function(m){var R;switch(m){case 4:R=c.getFloat32(y),y+=4;break;case 8:R=c.getFloat64(y),y+=8}return R},getMatroskaUint:function(m){if(m>4)return function(V){for(var Y=Math.floor(Number.MAX_SAFE_INTEGER/256),N=0,H=0;H<V;H+=1){if(N>Y)throw new Error("Value exceeds safe integer limit");N*=256;var q=c.getUint8(y+H);if(N>Number.MAX_SAFE_INTEGER-q)throw new Error("Value exceeds safe integer limit");N+=q}return y+=V,N}(m);for(var R=0,G=0;G<m;G+=1)R<<=8,R|=255&c.getUint8(y+G);return y+=m,R>>>0},moreData:function(){return y<c.byteLength}}}Qa.__dashjs_factory_name="EBMLParser";const Xa=h.Z.getClassFactory(Qa);function Ja(){var u,r,c,y,A,T,m,R,G,V,Y=this.context;function N(H){var q=new P.Z;return q.setInfo(H),q}return u={setConfig:function(H){if(!(H.baseURLController&&H.dashMetrics&&H.mediaPlayerModel&&H.errHandler))throw new Error(e.Z.MISSING_CONFIG_ERROR);V=H.baseURLController,T=H.dashMetrics,m=H.mediaPlayerModel,y=H.errHandler,G=H.errors,r=H.debug.getLogger(u),A=H.requestModifier},initialize:function(){R=Wn(Y).create({errHandler:y,dashMetrics:T,mediaPlayerModel:m,requestModifier:A,errors:G})},loadInitialization:function(H,q){return new Promise(function(ge){var ne=null,ue=H?V.resolve(H.path):null,fe=H?H.range.split("-"):null,x={range:{start:fe?parseFloat(fe[0]):null,end:fe?parseFloat(fe[1]):null},request:ne,url:ue?ue.url:void 0,init:!0,mediaType:q};r.info("Start loading initialization."),ne=N(x),R.load({request:ne,success:function(){ge(H)},error:function(){ge(H)}}),r.debug("Perform init load: "+x.url)})},loadSegments:function(H,q,ge){return new Promise(function(ne){var ue=null,fe=H?V.resolve(H.path):null,x=fe?fe.url:void 0;ue=N({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:ue,url:x,init:!1,mediaType:q}),r.debug("Parsing ebml header"),R.load({request:ue,success:function(re){(function(ee,ae,p,L){if(ee&&ee.byteLength!==0){var Z,O,w,z,Q=Xa(Y).create({data:ee}),ie=p?p.split("-"):null,M=null,B={url:ae,range:{start:ie?parseFloat(ie[0]):null,end:ie?parseFloat(ie[1]):null},request:M};for(r.debug("Parse EBML header: "+B.url),Q.skipOverElement(c.EBML),Q.consumeTag(c.Segment),w=Q.getMatroskaCodedNum(),w+=Q.getPos(),z=Q.getPos();Q.moreData()&&!Q.consumeTagAndSize(c.Segment.Info,!0);)if(!(Q.skipOverElement(c.Segment.SeekHead,!0)||Q.skipOverElement(c.Segment.Tracks,!0)||Q.skipOverElement(c.Segment.Cues,!0)||Q.skipOverElement(c.Void,!0)))throw new Error("no valid top level element found");for(;Z===void 0;){var me=Q.getMatroskaCodedNum(!0),Te=Q.getMatroskaCodedNum();me===c.Segment.Info.Duration.tag?Z=Q[c.Segment.Info.Duration.parse](Te):Q.setPos(Q.getPos()+Te)}M=N(B),R.load({request:M,success:function(Ie){O=function(Oe,Ee,Pe,ct){var $e,nt,Tt,Dt,_e,le,Me,ye;for(Tt=[],_e=0,le=(nt=function(xe){var Ge,Ve,ft=[],St=Xa(Y).create({data:xe});for(St.consumeTagAndSize(c.Segment.Cues);St.moreData()&&St.consumeTagAndSize(c.Segment.Cues.CuePoint,!0);){for((Ge={}).CueTime=St.parseTag(c.Segment.Cues.CuePoint.CueTime),Ge.CueTracks=[];St.moreData()&&St.consumeTag(c.Segment.Cues.CuePoint.CueTrackPositions,!0);){var qt=St.getMatroskaCodedNum(),jt=St.getPos();if((Ve={}).Track=St.parseTag(c.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),Ve.Track===0)throw new Error("Cue track cannot be 0");Ve.ClusterPosition=St.parseTag(c.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),Ge.CueTracks.push(Ve),St.setPos(jt+qt)}if(Ge.CueTracks.length===0)throw new Error("Mandatory cuetrack not found");ft.push(Ge)}if(ft.length===0)throw new Error("mandatory cuepoint not found");return ft}(Oe)).length;_e<le;_e+=1)Dt=new za.Z,$e=_e<nt.length-1?nt[_e+1].CueTime-nt[_e].CueTime:ct-nt[_e].CueTime,Dt.duration=$e,Dt.startTime=nt[_e].CueTime,Dt.timescale=1e3,Me=nt[_e].CueTracks[0].ClusterPosition+Ee,ye=_e<nt.length-1?nt[_e+1].CueTracks[0].ClusterPosition+Ee-1:Pe-1,Dt.mediaRange=Me+"-"+ye,Tt.push(Dt);return r.debug("Parsed cues: "+Tt.length+" cues."),Tt}(Ie,z,w,Z),L(O)},error:function(){r.error("Download Error: Cues "+B.url),L(null)}}),r.debug("Perform cues load: "+B.url+" bytes="+B.range.start+"-"+B.range.end)}else L(null)})(re,x,ge,function(ee){ne({segments:ee,representation:H,error:ee?void 0:new k.Z(G.SEGMENT_BASE_LOADER_ERROR_CODE,G.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})})},error:function(){ne({representation:H,error:new k.Z(G.SEGMENT_BASE_LOADER_ERROR_CODE,G.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})})},reset:function(){R&&(R.abort(),R=null)}},c={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},u}Ja.__dashjs_factory_name="WebmSegmentBaseLoader";const Ts=h.Z.getSingletonFactory(Ja);function $a(u){u=u||{};var r,c,y,A=this.context,T=u.eventBus,m=u.events,R=u.dashMetrics,G=u.mediaPlayerModel,V=u.errHandler,Y=u.baseURLController,N=u.debug,H=u.boxParser,q=u.requestModifier,ge=u.errors;function ne(ue){return(ue?ue.split("/")[1]:"").toLowerCase()==="webm"}return r={initialize:function(){c.initialize(),y.initialize()},getSegmentBaseInitSegment:function(ue){return ne(ue.representation.mimeType)?y.loadInitialization(ue.representation,ue.mediaType):c.loadInitialization(ue.representation,ue.mediaType)},getSegmentList:function(ue){return ne(ue.mimeType)?y.loadSegments(ue.representation,ue.mediaType,ue.representation?ue.representation.indexRange:null):c.loadSegments(ue.representation,ue.mediaType,ue.representation?ue.representation.indexRange:null)},reset:function(){c.reset(),y.reset()}},c=_s(A).getInstance(),y=Ts(A).getInstance(),c.setConfig({baseURLController:Y,dashMetrics:R,mediaPlayerModel:G,errHandler:V,eventBus:T,events:m,errors:ge,debug:N,boxParser:H,requestModifier:q}),y.setConfig({baseURLController:Y,dashMetrics:R,mediaPlayerModel:G,errHandler:V,eventBus:T,events:m,errors:ge,debug:N,requestModifier:q}),r}$a.__dashjs_factory_name="SegmentBaseController";const Ss=h.Z.getSingletonFactory($a),eo=function u(){(function(r,c){if(!(r instanceof c))throw new TypeError("Cannot call a class as a function")})(this,u),this.id=null,this.quality=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null},Xi=function u(){(function(r,c){if(!(r instanceof c))throw new TypeError("Cannot call a class as a function")})(this,u),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.labels=null,this.lang=null,this.viewpoint=null,this.viewpointsWithSchemeIdUri=null,this.accessibility=null,this.accessibilitiesWithSchemeIdUri=null,this.audioChannelConfiguration=null,this.audioChannelConfigurationsWithSchemeIdUri=null,this.roles=null,this.rolesWithSchemeIdUri=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null,this.isFragmented=null,this.isEmbedded=null,this.selectionPriority=1,this.supplementalProperties={},this.supplementalPropertiesAsArray=[],this.segmentAlignment=!1,this.subSegmentAlignment=!1},to=function u(){(function(r,c){if(!(r instanceof c))throw new TypeError("Cannot call a class as a function")})(this,u),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0},bs=function u(){(function(r,c){if(!(r instanceof c))throw new TypeError("Cannot call a class as a function")})(this,u),this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null,this.serviceDescriptions=[],this.protocol=null};function As(u,r){for(var c=0;c<r.length;c++){var y=r[c];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(u,y.key,y)}}const Is=function(){function u(y){var A=this;(function(T,m){if(!(T instanceof m))throw new TypeError("Cannot call a class as a function")})(this,u),this.valid=y[0]=="/",this.path=y.split("/").filter(function(T){return T.length!==0}).map(function(T){var m={name:T},R=T.indexOf("[");if(R!=-1){m.name=T.substring(0,R);var G=T.substring(R+1,T.length-1);A.valid=A.valid&&G.indexOf("[")==-1;var V=G.indexOf("=");V!=-1?(m.attribute={name:G.substring(1,V),value:G.substring(V+1)},["'",'"'].indexOf(m.attribute.value[0])!=-1&&(m.attribute.value=m.attribute.value.substring(1,m.attribute.value.length-1))):m.position=parseInt(G,10)-1}return m})}var r,c;return r=u,(c=[{key:"isValid",value:function(){return this.valid}},{key:"findsElement",value:function(){return!this.findsAttribute()}},{key:"findsAttribute",value:function(){return this.path[this.path.length-1].name.startsWith("@")}},{key:"getMpdTarget",value:function(y,A){for(var T=null,m=y,R=1,G="MPD";R<this.path.length&&m!==null;){T=m;var V=this.path[R];if(G=V.name,R!==this.path.length-1||!G.startsWith("@")){var Y=T[G+"_asArray"]||[];Y.length===0&&T[G]&&Y.push(T[G]),V.position?m=Y[V.position]||null:V.attribute?function(){var N=V.attribute;m=Y.filter(function(H){return H[N.name]==N.value})[0]||null}():m=Y[0]||null}R++}return m===null?null:G.startsWith("@")?{name:G.substring(1),leaf:m,target:m}:{name:G,leaf:m,target:A?T:m}}}])&&As(r.prototype,c),u}();function Rs(u,r){for(var c=0;c<r.length;c++){var y=r[c];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(u,y.key,y)}}const ws=function(){function u(y,A,T){(function(m,R){if(!(m instanceof R))throw new TypeError("Cannot call a class as a function")})(this,u),this.action=y,this.xpath=A,this.value=T,this.position=null}var r,c;return r=u,(c=[{key:"getMpdTarget",value:function(y){var A=this.action==="remove"||this.action==="replace"||this.position==="before"||this.position==="after";return this.xpath.getMpdTarget(y,A)}}])&&Rs(r.prototype,c),u}();function no(){var u,r,c=this.context;return u={getIsPatch:function(y){return y&&y.hasOwnProperty(t.Z.ORIGINAL_MPD_ID)||!1},getPublishTime:function(y){return y&&y.hasOwnProperty(t.Z.PUBLISH_TIME)?new Date(y[t.Z.PUBLISH_TIME]):null},getOriginalPublishTime:function(y){return y&&y.hasOwnProperty(t.Z.ORIGINAL_PUBLISH_TIME)?new Date(y[t.Z.ORIGINAL_PUBLISH_TIME]):null},getMpdId:function(y){return y&&y[t.Z.ORIGINAL_MPD_ID]||null},getPatchOperations:function(y){return y?(y.__children||[]).map(function(A){var T=Object.keys(A)[0];if(T!=="add"&&T!=="remove"&&T!=="replace")return r.warn("Ignoring node of invalid action: ".concat(T)),null;var m=A[T],R=m.sel;if(T==="add"&&m.type){if(!m.type.startsWith("@"))return r.warn("Ignoring add action for prefixed namespace declaration: ".concat(m.type,"=").concat(m.__text)),null;R="".concat(R,"/").concat(m.type)}var G=new Is(R);if(!G.isValid())return r.warn("Ignoring action with invalid selector: ".concat(T," - ").concat(R)),null;var V=null;G.findsAttribute()?V=m.__text||"":T!=="remove"&&(V=m.__children.reduce(function(N,H){var q=Object.keys(H)[0];return q!=="#text"&&(N[q]=N[q]||[],N[q].push(H[q])),N},{}));var Y=new ws(T,G,V);return T==="add"&&(Y.position=m.pos),Y}).filter(function(A){return!!A}):[]}},r=(0,_.Z)(c).getInstance().getLogger(u),u}no.__dashjs_factory_name="PatchManifestModel";const Ns=h.Z.getSingletonFactory(no);function ro(){var u,r,c,y,A,T,m,R=this.context;function G(Z,O,w){var z,Q=r.getAdaptationsForType(y[0].mpd.manifest,Z,O);if(!Q||Q.length===0)return null;if(Q.length>1&&w){var ie=N(w,O);if(A[w.id]&&A[w.id][O]){for(var M=0,B=Q.length;M<B;M++)if(V(A[w.id][O],ie[M]))return Q[M]}for(var me=0,Te=Q.length;me<Te;me++)if(z=Q[me],r.getRolesForAdaptation(z).filter(function(Ie){return Ie.value===t.Z.MAIN})[0])return Q[me]}return Q[0]}function V(Z,O){if(!Z||!O)return!1;var w=Z.id===O.id,z=Z.codec===O.codec,Q=Z.viewpoint===O.viewpoint,ie=JSON.stringify(Z.viewpointsWithSchemeIdUri)===JSON.stringify(O.viewpointsWithSchemeIdUri),M=Z.lang===O.lang,B=Z.roles.toString()===O.roles.toString(),me=JSON.stringify(Z.rolesWithSchemeIdUri)===JSON.stringify(O.rolesWithSchemeIdUri),Te=Z.accessibility.toString()===O.accessibility.toString(),Ie=JSON.stringify(Z.accessibilitiesWithSchemeIdUri)===JSON.stringify(O.accessibilitiesWithSchemeIdUri),Oe=Z.audioChannelConfiguration.toString()===O.audioChannelConfiguration.toString(),Ee=JSON.stringify(Z.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(O.audioChannelConfigurationsWithSchemeIdUri);return w&&z&&Q&&ie&&M&&B&&me&&Te&&Ie&&Oe&&Ee}function Y(Z,O,w,z,Q,ie){var M,B,me,Te,Ie,Oe,Ee=[];if(!z||z.length===0)return[];var Pe=r.getAdaptationsForPeriod(O);for(Te=0,Oe=z.length;Te<Oe;Te++)if(M=z[Te],B=x(Pe[me=r.getIndexForAdaptation(M,Z,w.index)]),ie){var ct=B.accessibility.length;for(Ie=0;Ie<ct;Ie++)if(B){var $e=B.accessibility[Ie];if($e.indexOf("cea-608:")===0){var nt=$e.substring(8).split(";");if(nt[0].substring(0,2)==="CC")for(Ie=0;Ie<nt.length;Ie++)B||(B=x.call(this,Pe[me])),re(B,nt[Ie].substring(0,3),nt[Ie].substring(4)),Ee.push(B),B=null;else for(Ie=0;Ie<nt.length;Ie++)B||(B=x.call(this,Pe[me])),re(B,"CC"+(Ie+1),nt[Ie]),Ee.push(B),B=null}else $e.indexOf("cea-608")===0&&(re(B,T.CC1,"eng"),Ee.push(B),B=null)}}else Q===T.IMAGE?(B.type=T.IMAGE,Ee.push(B),B=null):B&&Ee.push(B);return Ee}function N(Z,O,w){var z=y,Q=w,ie=[];if(Q)ae(),z=H(Q);else{if(!(y.length>0))return ie;Q=y[0].mpd.manifest}var M=fe(Z,z),B=r.getAdaptationsForType(Q,Z?Z.index:null,O);return ie=Y(Q,M,Z,B,O),O===T.TEXT&&(B=r.getAdaptationsForType(Q,Z?Z.index:null,T.VIDEO),ie=ie.concat(Y(Q,M,Z,B,O,!0))),ie}function H(Z){var O=q(Z);return r.getRegularPeriods(O)}function q(Z){var O=ne(Z);return r.getMpd(O)}function ge(){y=[],A={}}function ne(Z){return Z||(y.length>0?y[0].mpd.manifest:null)}function ue(Z){try{var O=fe(Z.streamInfo,y),w=r.getAdaptationsForPeriod(O);return Z&&Z.streamInfo&&Z.streamInfo.id!==void 0&&w?w[Z.index]:null}catch{return null}}function fe(Z,O){for(var w=O.length,z=0;z<w;z++){var Q=O[z];if(Z&&Z.id===Q.id)return Q}return null}function x(Z){if(!Z)return null;var O,w,z,Q,ie,M=new Xi,B=Z.period.mpd.manifest.Period_asArray[Z.period.index].AdaptationSet_asArray[Z.index];if(M.id=Z.id,M.index=Z.index,M.type=Z.type,M.streamInfo=ee(Z.period),M.representationCount=r.getRepresentationCount(B),M.labels=r.getLabelsForAdaptation(B),M.lang=r.getLanguageForAdaptation(B),M.segmentAlignment=r.getSegmentAlignment(B),M.subSegmentAlignment=r.getSubSegmentAlignment(B),O=r.getViewpointForAdaptation(B),M.viewpoint=O.length?O[0].value:void 0,M.viewpointsWithSchemeIdUri=O,ie=r.getAccessibilityForAdaptation(B),M.accessibility=ie.map(function(Ee){var Pe=Ee.value,ct=Pe;return Ee.schemeIdUri&&Ee.schemeIdUri.search("cea-608")>=0&&m!==void 0&&(ct=Pe?"cea-608:"+Pe:"cea-608",M.embeddedCaptions=!0),ct}),M.accessibilitiesWithSchemeIdUri=ie,w=r.getAudioChannelConfigurationForAdaptation(B),M.audioChannelConfiguration=w.map(function(Ee){return Ee.value}),M.audioChannelConfigurationsWithSchemeIdUri=w,M.audioChannelConfiguration.length===0&&Array.isArray(B.Representation_asArray)&&B.Representation_asArray.length>0&&(z=r.getAudioChannelConfigurationForRepresentation(B.Representation_asArray[0]),M.audioChannelConfiguration=z.map(function(Ee){return Ee.value}),M.audioChannelConfigurationsWithSchemeIdUri=z),Q=r.getRolesForAdaptation(B),M.roles=Q.map(function(Ee){return Ee.value}),M.rolesWithSchemeIdUri=Q,M.codec=r.getCodec(B),M.mimeType=r.getMimeType(B),M.contentProtection=r.getContentProtectionData(B),M.bitrateList=r.getBitrateListForAdaptation(B),M.selectionPriority=r.getSelectionPriority(B),M.contentProtection){var me=M.contentProtection.map(function(Ee){return r.getKID(Ee)}).filter(function(Ee){return Ee!==null});if(me.length){var Te=me[0];M.contentProtection.forEach(function(Ee){Ee.keyId=Te})}}if(M.isText=r.getIsText(B),M.supplementalProperties=r.getSupplementalPropertiesForAdaptation(B),(!M.supplementalProperties||Object.keys(M.supplementalProperties).length===0)&&Array.isArray(B.Representation_asArray)&&B.Representation_asArray.length>0){var Ie=B.Representation_asArray.map(function(Ee){return r.getSupplementalPropertiesForRepresentation(Ee)});Ie.every(function(Ee){return JSON.stringify(Ee)===JSON.stringify(Ie[0])})&&(M.supplementalProperties=Ie[0])}if(M.supplementalPropertiesAsArray=r.getSupplementalPropertiesAsArrayForAdaptation(B),(!M.supplementalPropertiesAsArray||M.supplementalPropertiesAsArray.length===0)&&Array.isArray(B.Representation_asArray)&&B.Representation_asArray.length>0){var Oe=B.Representation_asArray.map(function(Ee){return r.getSupplementalPropertiesAsArrayForRepresentation(Ee)});Oe.every(function(Ee){return JSON.stringify(Ee)===JSON.stringify(Oe[0])})&&(M.supplementalPropertiesAsArray=Oe[0])}return M.isFragmented=r.getIsFragmented(B),M.isEmbedded=!1,M}function re(Z,O,w){Z.id=O,Z.index=100+parseInt(O.substring(2,3)),Z.type=T.TEXT,Z.codec="cea-608-in-SEI",Z.isEmbedded=!0,Z.isFragmented=!1,Z.lang=ci()(w),Z.roles=["caption"],Z.rolesWithSchemeIdUri=[{schemeIdUri:"urn:mpeg:dash:role:2011",value:"caption"}]}function ee(Z){var O,w,z=new to;return z.id=Z.id,z.index=Z.index,z.start=Z.start,z.duration=Z.duration,z.manifestInfo=(O=Z.mpd,(w=new bs).dvrWindowSize=O.timeShiftBufferDepth,w.loadedTime=O.manifest.loadedTime,w.availableFrom=O.availabilityStartTime,w.minBufferTime=O.manifest.minBufferTime,w.maxFragmentDuration=O.maxSegmentDuration,w.duration=r.getDuration(O.manifest),w.isDynamic=r.getIsDynamic(O.manifest),w.serviceDescriptions=r.getServiceDescriptions(O.manifest),w.protocol=O.manifest.protocol,w),z.isLast=Z.mpd.manifest.Period_asArray.length===1||Math.abs(z.start+z.duration-z.manifestInfo.duration)<1,z}function ae(){if(!T)throw new Error("setConfig function has to be called previously")}function p(Z){return y.length>0?y[0].mpd.manifest.Period_asArray[Z]:null}function L(Z,O,w){var z,Q,ie,M,B;if(Z){for(z=Z.AdaptationSet_asArray,M=0;M<z.length;M+=1)for(ie=z[M].Representation_asArray,B=0;B<ie.length;B+=1)if(O===(Q=ie[B]).id)return w?B:Q}return null}return u={getBandwidthForRepresentation:function(Z,O){var w;return(w=L(p(O),Z))?w.bandwidth:null},getIndexForRepresentation:function(Z,O){return function(w,z){var Q=L(w,z,!0);return Q!==null?Q:-1}(p(O),Z)},getMaxIndexForBufferType:function(Z,O){return function(w,z){var Q,ie,M,B;if(!w||!z)return-1;for(ie=w.AdaptationSet_asArray,B=0;B<ie.length;B+=1)if(M=(Q=ie[B]).Representation_asArray,r.getIsTypeOf(Q,z))return M.length;return-1}(p(O),Z)},convertRepresentationToRepresentationInfo:function(Z){if(Z){var O=new eo,w=Z.adaptation.period.mpd.manifest.Period_asArray[Z.adaptation.period.index].AdaptationSet_asArray[Z.adaptation.index],z=r.getRepresentationFor(Z.index,w);return O.id=Z.id,O.quality=Z.index,O.bandwidth=r.getBandwidth(z),O.fragmentDuration=Z.segmentDuration||(Z.segments&&Z.segments.length>0?Z.segments[0].duration:NaN),O.MSETimeOffset=Z.MSETimeOffset,O.mediaInfo=x(Z.adaptation),O}return null},getStreamsInfo:function(Z,O){var w=[],z=y;if(Z&&(ae(),z=H(Z)),z.length>0){(!O||O>z.length)&&(O=z.length);for(var Q=0;Q<O;Q++)w.push(ee(z[Q]))}return w},getMediaInfoForType:function(Z,O){if(y.length===0||!Z)return null;var w=fe(Z,y);if(!w)return null;var z=r.getAdaptationsForPeriod(w),Q=G(Z.index,O,Z);return Q?x(z[r.getIndexForAdaptation(Q,y[0].mpd.manifest,Z.index)]):null},getAllMediaInfoForType:N,getAdaptationForType:G,getRealAdaptation:function(Z,O){var w,z,Q=fe(Z,y);return w=O?O.id:null,y.length>0&&Q&&(z=w?r.getAdaptationForId(w,y[0].mpd.manifest,Q.index):r.getAdaptationForIndex(O?O.index:null,y[0].mpd.manifest,Q.index)),z},getProducerReferenceTimes:function(Z,O){var w,z,Q=fe(Z,y);return w=O?O.id:null,y.length>0&&Q&&(z=w?r.getAdaptationForId(w,y[0].mpd.manifest,Q.index):r.getAdaptationForIndex(O?O.index:null,y[0].mpd.manifest,Q.index)),z?r.getProducerReferenceTimesForAdaptation(z):[]},getRealPeriodByIndex:function(Z){return r.getRealPeriodForIndex(Z,y[0].mpd.manifest)},getEssentialPropertiesForRepresentation:function(Z){try{return r.getEssentialPropertiesForRepresentation(Z)}catch{return[]}},getVoRepresentations:function(Z){var O=ue(Z);return r.getRepresentationsForAdaptation(O)},getEventsFor:function(Z,O,w){var z=[];if(y.length>0){var Q=y[0].mpd.manifest;if(Z instanceof to){var ie=fe(Z,y);z=r.getEventsForPeriod(ie)}else if(Z instanceof Xi){var M=fe(w,y);z=r.getEventStreamForAdaptationSet(Q,ue(Z),M)}else if(Z instanceof eo){var B=fe(w,y);z=r.getEventStreamForRepresentation(Q,O,B)}}return z},getEvent:function(Z,O,w,z){try{if(!Z||!O||isNaN(w)||!z)return null;var Q=Z.scheme_id_uri,ie=Z.value;if(!O[Q+"/"+ie])return null;var M,B=new Kn,me=Z.timescale||1,Te=z.adaptation.period.start,Ie=O[Q+"/"+ie],Oe=isNaN(z.presentationTimeOffset)?isNaN(Ie.presentationTimeOffset)?0:Ie.presentationTimeOffset:z.presentationTimeOffset,Ee=Z.presentation_time_delta/me;M=Z.version===0?Te+w-Oe+Ee:Te-Oe+Ee;var Pe=Z.event_duration/me,ct=Z.id,$e=Z.message_data;return B.eventStream=Ie,B.eventStream.value=ie,B.eventStream.timescale=me,B.duration=Pe,B.id=ct,B.calculatedPresentationTime=M,B.messageData=$e,B.presentationTimeDelta=Ee,B}catch{return null}},getMpd:q,setConfig:function(Z){Z&&(Z.constants&&(T=Z.constants),Z.cea608parser&&(m=Z.cea608parser),Z.errHandler&&r.setConfig({errHandler:Z.errHandler}),Z.BASE64&&r.setConfig({BASE64:Z.BASE64}))},updatePeriods:function(Z){if(!Z)return null;ae(),y=H(Z)},getIsTextTrack:function(Z){return r.getIsText(Z)},getUTCTimingSources:function(){var Z=ne();return r.getUTCTimingSources(Z)},getSuggestedPresentationDelay:function(){var Z=y.length>0?y[0].mpd:null;return r.getSuggestedPresentationDelay(Z)},getAvailabilityStartTime:function(Z){var O=q(Z);return r.getAvailabilityStartTime(O)},getIsTypeOf:function(Z,O){return r.getIsTypeOf(Z,O)},getIsDynamic:function(Z){var O=ne(Z);return r.getIsDynamic(O)},getDuration:function(Z){var O=ne(Z);return r.getDuration(O)},getRegularPeriods:H,getContentSteering:function(Z){return r.getContentSteering(Z)},getLocation:function(Z){return r.getLocation(Z)},getPatchLocation:function(Z){var O=r.getPatchLocation(Z),w=r.getPublishTime(Z);return O&&O.length!==0&&w?O.filter(function(z){return isNaN(z.ttl)||w.getTime()+z.ttl>new Date().getTime()}):[]},getManifestUpdatePeriod:function(Z){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return r.getManifestUpdatePeriod(Z,O)},getPublishTime:function(Z){return r.getPublishTime(Z)},getIsDVB:function(Z){return r.hasProfile(Z,"urn:dvb:dash:profile:dvb-dash:2014")},getIsPatch:function(Z){return c.getIsPatch(Z)},getBaseURLsFromElement:function(Z){return r.getBaseURLsFromElement(Z)},getRepresentationSortFunction:function(){return r.getRepresentationSortFunction()},getCodec:function(Z,O,w){return r.getCodec(Z,O,w)},getPeriodById:function(Z){if(!Z||y.length===0)return null;var O=y.filter(function(w){return w.id===Z});return O&&O.length>0?O[0]:null},setCurrentMediaInfo:function(Z,O,w){A[Z]=A[Z]||{},A[Z][O]=A[Z][O]||{},A[Z][O]=w},isPatchValid:function(Z,O){var w=r.getId(Z),z=c.getMpdId(O),Q=r.getPublishTime(Z),ie=c.getPublishTime(O),M=c.getOriginalPublishTime(O);return!!(w&&z&&w==z&&Q&&M&&Q.getTime()==M.getTime()&&ie&&Q.getTime()<ie.getTime())},applyPatchToManifest:function(Z,O){c.getPatchOperations(O).forEach(function(w){var z=w.getMpdTarget(Z);if(z!==null){var Q=z.name,ie=z.target,M=z.leaf;if(w.xpath.findsAttribute())switch(w.action){case"add":case"replace":ie[Q]=w.value;break;case"remove":delete ie[Q]}else{var B=(ie[Q+"_asArray"]||[]).indexOf(M),me=w.position==="prepend"||w.position==="before";if((w.action==="remove"||w.action==="replace")&&(delete ie[Q],B!=-1)){var Te=ie[Q+"_asArray"];Te.splice(B,1),Te.length>1?ie[Q]=Te:Te.length==1?ie[Q]=Te[0]:delete ie[Q+"_asArray"]}w.action!=="add"&&w.action!=="replace"||Object.keys(w.value).forEach(function(Ie){var Oe=w.value[Ie],Ee=ie[Ie+"_asArray"]||[];if(Ee.length===0&&ie[Ie]&&Ee.push(ie[Ie]),Ee.length===0)Ee=Oe;else{var Pe=Ee.length;Pe=Ie==Q&&B!=-1?B+(me?0:1)+(w.action=="replace"?-1:0):me?0:Ee.length,Ee.splice.apply(Ee,[Pe,0].concat(Oe))}ie[Ie+"_asArray"]=Ee,ie[Ie]=Ee.length==1?Ee[0]:Ee})}}})},areMediaInfosEqual:V,reset:ge},r=Xt(R).getInstance(),c=Ns(R).getInstance(),ge(),u}ro.__dashjs_factory_name="DashAdapter";const Cs=h.Z.getSingletonFactory(ro);function Ds(u,r){for(var c=0;c<r.length;c++){var y=r[c];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(u,y.key,y)}}var Os=function(){function u(){(function(y,A){if(!(y instanceof A))throw new TypeError("Cannot call a class as a function")})(this,u)}var r,c;return r=u,c=[{key:"round10",value:function(y,A){return function(T,m,R){return R===void 0||+R==0?Math[T](m):(R=+R,(m=+m)===null||isNaN(m)||typeof R!="number"||R%1!=0?NaN:(m=m.toString().split("e"),+((m=(m=Math[T](+(m[0]+"e"+(m[1]?+m[1]-R:-R)))).toString().split("e"))[0]+"e"+(m[1]?+m[1]+R:R))))}("round",y,A)}}],c&&Ds(r,c),u}();const Ms=function u(){(function(r,c){if(!(r instanceof c))throw new TypeError("Cannot call a class as a function")})(this,u),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]},Ps=function u(){(function(r,c){if(!(r instanceof c))throw new TypeError("Cannot call a class as a function")})(this,u),this.t=null,this.mt=null,this.to=null,this.lto=null},Ls=function u(){(function(r,c){if(!(r instanceof c))throw new TypeError("Cannot call a class as a function")})(this,u),this.t=null,this.level=null},xs=function u(){(function(r,c){if(!(r instanceof c))throw new TypeError("Cannot call a class as a function")})(this,u),this.target=null,this.state=S.Z.BUFFER_EMPTY},Fs=function u(){(function(r,c){if(!(r instanceof c))throw new TypeError("Cannot call a class as a function")})(this,u),this.time=null,this.range=null,this.manifestInfo=null},ks=function u(){(function(r,c){if(!(r instanceof c))throw new TypeError("Cannot call a class as a function")})(this,u),this.time=null,this.droppedFrames=null};function Ji(u,r){if(!(u instanceof r))throw new TypeError("Cannot call a class as a function")}var Zs=function u(){Ji(this,u),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},Us=function u(){Ji(this,u),this.id=null,this.index=null,this.start=null,this.duration=null},Bs=function u(){Ji(this,u),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null};const Gs=function u(){(function(r,c){if(!(r instanceof c))throw new TypeError("Cannot call a class as a function")})(this,u),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null},qs=function u(){(function(r,c){if(!(r instanceof c))throw new TypeError("Cannot call a class as a function")})(this,u),this.loadingRequests=[],this.executedRequests=[]};function io(u){var r,c,y=(u=u||{}).settings,A=this.context,T=(0,g.Z)(A).getInstance();function m(){T.trigger(i.Z.METRICS_CHANGED)}function R(q){T.trigger(i.Z.METRIC_CHANGED,{mediaType:q}),m()}function G(q,ge,ne){T.trigger(i.Z.METRIC_UPDATED,{mediaType:q,metric:ge,value:ne}),R(q)}function V(q,ge,ne){T.trigger(i.Z.METRIC_ADDED,{mediaType:q,metric:ge,value:ne}),R(q)}function Y(q,ge){var ne=null;return q&&(c.hasOwnProperty(q)?ne=c[q]:ge||(ne=new Ms,c[q]=ne)),ne}function N(q,ge,ne){var ue=Y(q);ue!==null&&(ue[ge].push(ne),ue[ge].length>y.get().streaming.metrics.maxListDepth&&ue[ge].shift())}function H(q,ge,ne){N(q,ge,ne),V(q,ge,ne)}return r={clearCurrentMetricsForType:function(q){delete c[q],R(q)},clearAllCurrentMetrics:function(){c={},m()},getMetricsFor:Y,addHttpRequest:function q(ge,ne,ue,fe,x,re,ee,ae,p,L,Z,O,w,z,Q,ie,M){var B=new Ae.w;re&&re!==fe&&(q(ge,null,ue,fe,x,null,null,ae,p,null,null,null,w,null,null,ie,M),B.actualurl=re),B.tcpid=ne,B.type=ue,B.url=fe,B.range=ae,B.trequest=p,B.tresponse=L,B.responsecode=O,B.cmsd=M,B._tfinish=Z,B._stream=ge,B._mediaduration=w,B._quality=x,B._responseHeaders=z,B._serviceLocation=ee,B._fileLoaderType=ie,Q?Q.forEach(function(me){(function(Te,Ie,Oe,Ee){var Pe=new Ae.O;Pe.s=Ie,Pe.d=Oe,Pe.b=Ee,Te.trace.push(Pe),Te.interval||(Te.interval=0),Te.interval+=Oe})(B,me.s,me.d,me.b)}):(delete B.interval,delete B.trace),H(ge,S.Z.HTTP_REQUEST,B)},addRepresentationSwitch:function(q,ge,ne,ue,fe){var x=new Ps;x.t=ge,x.mt=ne,x.to=ue,fe?x.lto=fe:delete x.lto,H(q,S.Z.TRACK_SWITCH,x)},addBufferLevel:function(q,ge,ne){var ue=new Ls;ue.t=ge,ue.level=ne,H(q,S.Z.BUFFER_LEVEL,ue)},addBufferState:function(q,ge,ne){var ue=new xs;ue.target=ne,ue.state=ge,H(q,S.Z.BUFFER_STATE,ue)},addDVRInfo:function(q,ge,ne,ue){var fe=new Fs;fe.time=ge,fe.range=ue,fe.manifestInfo=ne,H(q,S.Z.DVR_INFO,fe)},addDroppedFrames:function(q,ge){var ne=new ks,ue=Y(q).DroppedFrames;ge&&(ne.time=ge.creationTime,ne.droppedFrames=ge.droppedVideoFrames,ue.length>0&&ue[ue.length-1]==ne||H(q,S.Z.DROPPED_FRAMES,ne))},addSchedulingInfo:function(q,ge,ne,ue,fe,x,re,ee,ae){var p=new Gs;p.mediaType=q,p.t=ge,p.type=ne,p.startTime=ue,p.availabilityStartTime=fe,p.duration=x,p.quality=re,p.range=ee,p.state=ae,H(q,S.Z.SCHEDULING_INFO,p)},addRequestsQueue:function(q,ge,ne){var ue=new qs;ue.loadingRequests=ge,ue.executedRequests=ne,Y(q).RequestsQueue=ue,V(q,S.Z.REQUESTS_QUEUE,ue)},addManifestUpdate:function(q,ge,ne,ue,fe,x,re,ee,ae,p){var L=new Zs;L.mediaType=q,L.type=ge,L.requestTime=ne,L.fetchTime=ue,L.availabilityStartTime=fe,L.presentationStartTime=x,L.clientTimeOffset=re,L.currentTime=ee,L.buffered=ae,L.latency=p,N(e.Z.STREAM,S.Z.MANIFEST_UPDATE,L),V(q,S.Z.MANIFEST_UPDATE,L)},updateManifestUpdateInfo:function(q,ge){if(q){for(var ne in ge)q[ne]=ge[ne];G(q.mediaType,S.Z.MANIFEST_UPDATE,q)}},addManifestUpdateStreamInfo:function(q,ge,ne,ue,fe){if(q){var x=new Us;x.id=ge,x.index=ne,x.start=ue,x.duration=fe,q.streamInfo.push(x),G(q.mediaType,S.Z.MANIFEST_UPDATE_STREAM_INFO,q)}},addManifestUpdateRepresentationInfo:function(q,ge,ne,ue,fe,x,re,ee){if(q&&q.representationInfo){var ae=new Bs;ae.id=ge,ae.index=ne,ae.streamIndex=ue,ae.mediaType=fe,ae.startNumber=re,ae.fragmentInfoType=ee,ae.presentationTimeOffset=x,q.representationInfo.push(ae),G(q.mediaType,S.Z.MANIFEST_UPDATE_TRACK_INFO,q)}},addPlayList:function(q){q.trace&&Array.isArray(q.trace)?q.trace.forEach(function(ge){ge.hasOwnProperty("subreplevel")&&!ge.subreplevel&&delete ge.subreplevel}):delete q.trace,H(e.Z.STREAM,S.Z.PLAY_LIST,q)},addDVBErrors:function(q){H(e.Z.STREAM,S.Z.DVB_ERRORS,q)}},c={},r}io.__dashjs_factory_name="MetricsModel";const Ys=h.Z.getSingletonFactory(io);function ao(u){u=u||{};var r,c,y,A,T=this.context,m=u.metricsModel;function R(Y){var N=m.getMetricsFor(Y,!0);if(!N)return null;var H,q=N.HttpList,ge=null;if(!q||q.length<=0)return null;for(H=q.length-1;H>=0;){if(q[H].responsecode){ge=q[H];break}H--}return ge}function G(Y){var N=m.getMetricsFor(Y,!0);return N&&N.HttpList?N.HttpList:[]}function V(Y,N){if(!Y)return null;var H=Y[N];return H&&H.length!==0?H[H.length-1]:null}return r={getCurrentRepresentationSwitch:function(Y){return V(m.getMetricsFor(Y,!0),S.Z.TRACK_SWITCH)},getCurrentBufferState:function(Y){return V(m.getMetricsFor(Y,!0),S.Z.BUFFER_STATE)},getCurrentBufferLevel:function(Y){var N=V(m.getMetricsFor(Y,!0),S.Z.BUFFER_LEVEL);return N?Os.round10(N.level/1e3,-3):0},getCurrentHttpRequest:R,getHttpRequests:G,getCurrentDroppedFrames:function(){return V(m.getMetricsFor(e.Z.VIDEO,!0),S.Z.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(Y){return V(m.getMetricsFor(Y,!0),S.Z.SCHEDULING_INFO)},getCurrentDVRInfo:function(Y){return V(Y?m.getMetricsFor(Y,!0):m.getMetricsFor(e.Z.VIDEO,!0)||m.getMetricsFor(e.Z.AUDIO,!0),S.Z.DVR_INFO)},getCurrentManifestUpdate:function(){return V(m.getMetricsFor(e.Z.STREAM),S.Z.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(Y,N){if(!N)return null;var H={},q=R(Y);q&&(H=on.Z.parseHttpHeaders(q._responseHeaders));var ge=H[N.toLowerCase()];return ge===void 0?null:ge},getLatestMPDRequestHeaderValueByID:function(Y){if(!Y)return null;var N,H,q,ge={};for(q=(N=G(e.Z.STREAM)).length-1;q>=0;q--)if((H=N[q]).type===Ae.w.MPD_TYPE){ge=on.Z.parseHttpHeaders(H._responseHeaders);break}var ne=ge[Y.toLowerCase()];return ne===void 0?null:ne},addRepresentationSwitch:function(Y,N,H,q,ge){m.addRepresentationSwitch(Y,N,H,q,ge)},addDVRInfo:function(Y,N,H,q){m.addDVRInfo(Y,N,H,q)},updateManifestUpdateInfo:function(Y){var N=this.getCurrentManifestUpdate();m.updateManifestUpdateInfo(N,Y)},addManifestUpdateStreamInfo:function(Y){if(Y){var N=this.getCurrentManifestUpdate();m.addManifestUpdateStreamInfo(N,Y.id,Y.index,Y.start,Y.duration)}},addManifestUpdateRepresentationInfo:function(Y,N){if(Y){var H=this.getCurrentManifestUpdate();m.addManifestUpdateRepresentationInfo(H,Y.id,Y.index,Y.streamIndex,N,Y.presentationTimeOffset,Y.startNumber,Y.fragmentInfoType)}},addManifestUpdate:function(Y){m.addManifestUpdate(e.Z.STREAM,Y.type,Y.requestStartDate,Y.requestEndDate)},addHttpRequest:function(Y,N,H,q,ge,ne){m.addHttpRequest(Y.mediaType,null,Y.type,Y.url,Y.quality,N,Y.serviceLocation||null,Y.range||null,Y.requestStartDate,Y.firstByteDate,Y.requestEndDate,H,Y.duration,q,ge,Y.fileLoaderType,ne)},addSchedulingInfo:function(Y,N){m.addSchedulingInfo(Y.mediaType,new Date,Y.type,Y.startTime,Y.availabilityStartTime,Y.duration,Y.quality,Y.range,N)},addRequestsQueue:function(Y,N,H){m.addRequestsQueue(Y,N,H)},addBufferLevel:function(Y,N,H){m.addBufferLevel(Y,N,H)},addBufferState:function(Y,N,H){m.addBufferState(Y,N,H)},addDroppedFrames:function(Y){m.addDroppedFrames(e.Z.VIDEO,Y)},addPlayList:function(){A&&(m.addPlayList(A),A=null)},addDVBErrors:function(Y){m.addDVBErrors(Y)},createPlaylistMetrics:function(Y,N){(A=new ve).start=new Date,A.mstart=Y,A.starttype=N},createPlaylistTraceMetrics:function(Y,N,H){c===!0&&(c=!1,(y=new Le).representationid=Y,y.start=new Date,y.mstart=N,y.playbackspeed=H!==null?H.toString():null)},updatePlayListTraceMetrics:function(Y){if(y)for(var N in y)y[N]=Y[N]},pushPlayListTraceMetrics:function(Y,N){if(c===!1&&A&&y&&y.start){var H=y.start,q=Y.getTime()-H.getTime();y.duration=q,y.stopreason=N,A.trace.push(y),c=!0}},clearAllCurrentMetrics:function(){m.clearAllCurrentMetrics()}},m=m||Ys(T).getInstance({settings:u.settings}),c=!0,y=null,A=null,r}ao.__dashjs_factory_name="DashMetrics";const js=h.Z.getSingletonFactory(ao);function oo(){var u,r,c,y,A=this.context,T=(0,g.Z)(A).getInstance(),m=(0,ot.Z)(A).getInstance();function R(fe){y=fe}function G(fe,x,re,ee){var ae,p=x.adaptation.period.mpd,L=p.availabilityStartTime;if(ee)ae=re&&p.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(L.getTime()+1e3*(fe+p.timeShiftBufferDepth)):p.availabilityEndTime;else if(re){var Z=x.availabilityTimeOffset;ae=new Date(L.getTime()+1e3*(fe-Z))}else ae=L;return ae}function V(fe,x){return(fe.getTime()-x.mpd.availabilityStartTime.getTime()+1e3*y)/1e3}function Y(fe,x){return fe+(x.adaptation.period.start-x.presentationTimeOffset)}function N(fe){var x={start:NaN,end:NaN},re=fe[0].getAdapter().getRegularPeriods()[0],ee=V(new Date,re);if(!fe||fe.length===0)return{range:x,now:ee};fe.forEach(function(p){var L=p.getAdapter(),Z=L.getMediaInfoForType(p.getStreamInfo(),e.Z.VIDEO)||L.getMediaInfoForType(p.getStreamInfo(),e.Z.AUDIO),O=L.getVoRepresentations(Z)[0],w={start:NaN,end:NaN};if(O)if(O.segmentInfoType===t.Z.SEGMENT_TIMELINE)w=function(Q){var ie,M,B,me,Te=Q.adaptation.period.mpd.manifest.Period_asArray[Q.adaptation.period.index].AdaptationSet_asArray[Q.adaptation.index],Ie=r.getRepresentationFor(Q.index,Te),Oe=Ie.SegmentTemplate||Ie.SegmentList,Ee=Oe.SegmentTimeline,Pe=Oe.timescale,ct=Ee.S_asArray,$e={start:0,end:0},nt=ct[0].t,Tt=!isNaN(nt),Dt=Tt?nt:0,_e=0;for(Tt&&($e.start=Y(Dt/Pe,Q)),B=0,me=ct.length;B<me;B++)M=0,(ie=ct[B]).hasOwnProperty("r")&&(M=ie.r),_e+=ie.d*(1+M);return $e.end=Y((Dt+_e)/Pe,Q),$e}(O);else{var z=O.adaptation.period;w.start=z.start,w.end=Math.max(ee,z.start+z.duration)}!isNaN(w.start)&&(isNaN(x.start)||x.start>w.start)&&(x.start=w.start),!isNaN(w.end)&&(isNaN(x.end)||x.end<w.end)&&(x.end=w.end)}),x.end=Math.min(ee,x.end);var ae=q(fe,x.end,!0);return x.end=isNaN(ae)?x.end:ae,x.start=re&&re.mpd&&re.mpd.timeShiftBufferDepth&&!isNaN(re.mpd.timeShiftBufferDepth)&&!isNaN(x.end)?Math.max(x.end-re.mpd.timeShiftBufferDepth,x.start):x.start,x.start=q(fe,x.start),{range:x,now:ee}}function H(fe,x){c=fe-x.end}function q(fe,x){var re=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{for(var ee=0,ae=!1,p=NaN;!ae&&ee<fe.length;){var L=fe[ee].getStreamInfo();L.start<=x&&(!isFinite(L.duration)||L.start+L.duration>=x)?(p=x,ae=!0):!re&&L.start>x&&(isNaN(p)||L.start<p)?p=L.start:re&&L.start+L.duration<x&&(isNaN(p)||L.start+L.duration>p)&&(p=L.start+L.duration),ee+=1}return p}catch{return x}}function ge(fe){fe.offset===void 0||isNaN(fe.offset)||R(fe.offset/1e3)}function ne(){y=0,c=0}function ue(){T.off(i.Z.UPDATE_TIME_SYNC_OFFSET,ge,this),ne()}return u={initialize:function(){ne(),T.on(i.Z.UPDATE_TIME_SYNC_OFFSET,ge,this)},getClientTimeOffset:function(){return y},setClientTimeOffset:R,getClientReferenceTime:function(){return Date.now()-1e3*c+1e3*y},calcAvailabilityStartTimeFromPresentationTime:function(fe,x,re){return G(fe,x,re)},calcAvailabilityEndTimeFromPresentationTime:function(fe,x,re){return G(fe,x,re,!0)},calcPresentationTimeFromWallTime:V,calcPresentationTimeFromMediaTime:Y,calcPeriodRelativeTimeFromMpdRelativeTime:function(fe,x){return x-fe.adaptation.period.start},calcMediaTimeFromPresentationTime:function(fe,x){return fe-x.adaptation.period.start+x.presentationTimeOffset},calcWallTimeForSegment:function(fe,x){var re,ee,ae;return x&&(re=fe.representation.adaptation.period.mpd.suggestedPresentationDelay,ee=fe.presentationStartTime+re,ae=new Date(fe.availabilityStartTime.getTime()+1e3*ee)),ae},calcTimeShiftBufferWindow:function(fe,x){if(!x)return function(ee){var ae={start:NaN,end:NaN},p=0,L=NaN;return ee.forEach(function(Z){var O=Z.getStreamInfo();p+=O.duration,(isNaN(L)||O.start<L)&&(L=O.start)}),ae.start=L,ae.end=L+p,ae}(fe);if(m.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){var re=N(fe);return H(re.now,re.range),re.range}return function(ee){var ae={start:NaN,end:NaN};if(!ee||ee.length===0)return ae;var p=ee[0].getAdapter().getRegularPeriods()[0],L=V(new Date,p),Z=p.mpd.timeShiftBufferDepth,O=isNaN(Z)?0:L-Z;if(ae.start=q(ee,O),ae.end=!isNaN(ae.start)&&L<ae.start?L:q(ee,L,!0),!isNaN(Z)&&ae.end<L-Z&&(ae.end=NaN),m.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){var w=N(ee);if(w.range.end<ae.start)return T.trigger(n.Z.CONFORMANCE_VIOLATION,{level:Mr.LEVELS.WARNING,event:Mr.EVENTS.INVALID_DVR_WINDOW}),H(w.now,w.range),w.range}return ae}(fe)},reset:ue},r=Xt(A).getInstance(),ue(),u}oo.__dashjs_factory_name="TimelineConverter";const Hs=h.Z.getSingletonFactory(oo);var $i=C(4593),Ti=C(6934);function ea(u){return ea=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ea(u)}function ta(u,r){return ta=Object.setPrototypeOf||function(c,y){return c.__proto__=y,c},ta(u,r)}function Vs(u,r){return!r||ea(r)!=="object"&&typeof r!="function"?function(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}(u):r}function Si(u){return Si=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Si(u)}const Ks=function(u){(function(T,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(m&&m.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),m&&ta(T,m)})(A,u);var r,c,y=(r=A,c=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var T,m=Si(r);if(c){var R=Si(this).constructor;T=Reflect.construct(m,arguments,R)}else T=m.apply(this,arguments);return Vs(this,T)});function A(){var T;return function(m,R){if(!(m instanceof R))throw new TypeError("Cannot call a class as a function")}(this,A),(T=y.call(this)).captionData=null,T.label=null,T.defaultTrack=!1,T.kind=null,T.isFragmented=!1,T.isEmbedded=!1,T.isTTML=null,T}return A}(Xi);var zs=C(2295);function so(){var u=0;function r(R){for(var G="",V=0;V<R.length;++V)G+=R[V].uchar;return G.length-G.replace(/^\s+/,"").length}function c(R){return"left: "+3.125*R.x+"%; top: "+6.66*R.y1+"%; width: "+(100-3.125*R.x)+"%; height: "+6.66*Math.max(R.y2-1-R.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function y(R){return R==="red"?"rgb(255, 0, 0)":R==="green"?"rgb(0, 255, 0)":R==="blue"?"rgb(0, 0, 255)":R==="cyan"?"rgb(0, 255, 255)":R==="magenta"?"rgb(255, 0, 255)":R==="yellow"?"rgb(255, 255, 0)":R==="white"?"rgb(255, 255, 255)":R==="black"?"rgb(0, 0, 0)":R}function A(R,G){var V=R.videoHeight/15;return G?"font-size: "+V+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(G.foreground?y(G.foreground):"rgb(255, 255, 255)")+"; font-style: "+(G.italics?"italic":"normal")+"; text-decoration: "+(G.underline?"underline":"none")+"; white-space: pre; background-color: "+(G.background?y(G.background):"transparent")+";":"font-size: "+V+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function T(R){return R.replace(/^\s+/g,"")}function m(R){return R.replace(/\s+$/g,"")}return{createHTMLCaptionsFromScreen:function(R,G,V,Y){var N,H,q=null,ge=!1,ne=-1,ue={start:G,end:V,spans:[]},fe="style_cea608_white_black",x={},re={},ee=[];for(N=0;N<15;++N){var ae=Y.rows[N],p="",L=null;if(ae.isEmpty()===!1){var Z=r(ae.chars);q===null&&(q={x:Z,y1:N,y2:N+1,p:[]}),Z!==ne&&ge&&(q.p.push(ue),ue={start:G,end:V,spans:[]},q.y2=N,q.name="region_"+q.x+"_"+q.y1+"_"+q.y2,x.hasOwnProperty(q.name)===!1?(ee.push(q),x[q.name]=q):x[q.name].p.contat(q.p),q={x:Z,y1:N,y2:N+1,p:[]});for(var O=0;O<ae.chars.length;++O){var w=ae.chars[O],z=w.penState;if(L===null||!z.equals(L)){p.trim().length>0&&(ue.spans.push({name:fe,line:p,row:N}),p="");var Q="style_cea608_"+z.foreground+"_"+z.background;z.underline&&(Q+="_underline"),z.italics&&(Q+="_italics"),re.hasOwnProperty(Q)||(re[Q]=JSON.parse(JSON.stringify(z))),L=z,fe=Q}p+=w.uchar}p.trim().length>0&&ue.spans.push({name:fe,line:p,row:N}),ge=!0,ne=Z}else ge=!1,ne=-1,q&&(q.p.push(ue),ue={start:G,end:V,spans:[]},q.y2=N,q.name="region_"+q.x+"_"+q.y1+"_"+q.y2,x.hasOwnProperty(q.name)===!1?(ee.push(q),x[q.name]=q):x[q.name].p.contat(q.p),q=null)}q&&(q.p.push(ue),q.y2=N+1,q.name="region_"+q.x+"_"+q.y1+"_"+q.y2,x.hasOwnProperty(q.name)===!1?(ee.push(q),x[q.name]=q):x[q.name].p.contat(q.p),q=null);var ie=[];for(N=0;N<ee.length;++N){var M=ee[N],B="sub_cea608_"+u++,me=document.createElement("div");me.id=B;var Te=c(M);me.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+Te;var Ie=document.createElement("div");Ie.className="paragraph bodyStyle",Ie.style.cssText=A(R);var Oe=document.createElement("div");Oe.className="cueUniWrapper",Oe.style.cssText="unicode-bidi: normal; direction: ltr;";for(var Ee=0;Ee<M.p.length;++Ee){var Pe=M.p[Ee],ct=0;for(H=0;H<Pe.spans.length;++H){var $e=Pe.spans[H];if($e.line.length>0){if(H!==0&&ct!=$e.row){var nt=document.createElement("br");nt.className="lineBreak",Oe.appendChild(nt)}var Tt=!1;ct===$e.row&&(Tt=!0),ct=$e.row;var Dt=re[$e.name],_e=document.createElement("span");_e.className="spanPadding "+$e.name+" customSpanColor",_e.style.cssText=A(R,Dt),H!==0&&Tt?H===Pe.spans.length-1?_e.textContent=m($e.line):_e.textContent=$e.line:Pe.spans.length>1&&H<Pe.spans.length-1&&$e.row===Pe.spans[H+1].row?_e.textContent=T($e.line):_e.textContent=$e.line.trim(),Oe.appendChild(_e)}}}Ie.appendChild(Oe),me.appendChild(Ie);var le={bodyStyle:["%",90]};for(var Me in re)re.hasOwnProperty(Me)&&(le[Me]=["%",90]);ie.push({type:"html",start:G,end:V,cueHTMLElement:me,cueID:B,cellResolution:[32,15],isFromCEA608:!0,fontSize:le,lineHeight:{},linePadding:{}})}return ie}}}so.__dashjs_factory_name="EmbeddedTextHtmlRender";const Ws=h.Z.getSingletonFactory(so);function uo(u){var r,c,y,A,T,m,R,G,V,Y,N,H,q,ge,ne,ue,fe=u.errHandler,x=u.manifestModel,re=u.mediaController,ee=u.videoModel,ae=u.textTracks,p=u.vttParser,L=u.vttCustomRenderingParser,Z=u.ttmlParser,O=u.streamInfo,w=u.settings,z=this.context,Q=(0,g.Z)(z).getInstance(),ie=!1;function M(){m=null,G=NaN,V=[],Y=null,R=!1,T=[],A=null}function B($e){var nt=new Ks;for(var Tt in $e)nt[Tt]=$e[Tt];nt.labels=$e.labels,nt.defaultTrack=function(Dt){var _e=!1;return H.length>1&&Dt.isEmbedded?_e=Dt.id&&Dt.id===e.Z.CC1:H.length===1?Dt.id&&typeof Dt.id=="string"&&Dt.id.substring(0,2)==="CC"&&(_e=!0):H.length===0&&(_e=Dt.index===T[0].index),_e}($e),nt.isFragmented=$e.isFragmented,nt.isEmbedded=!!$e.isEmbedded,nt.isTTML=function(Dt){return Dt.codec&&Dt.codec.search(e.Z.STPP)>=0||Dt.mimeType&&Dt.mimeType.search(e.Z.TTML)>=0}($e),nt.kind=function(Dt,_e){var le=Dt.roles&&Dt.roles.length>0?_e[Dt.roles[0]]:_e.caption;return le=le===_e.caption||le===_e.subtitle?le:_e.caption}($e,{subtitle:"subtitles",caption:"captions"}),ae.addTextTrack(nt)}function me($e){var nt=$e.chunk;nt.mediaInfo.embeddedCaptions&&Ie(nt.bytes,nt)}function Te($e){N=$e}function Ie($e,nt){var Tt=nt.mediaInfo,Dt=Tt.type,_e=Tt.mimeType,le=Tt.codec||_e;le?Tt.codec.indexOf("application/mp4")!==-1?function(Me,ye,xe){var Ge;if(ye.segmentType==="InitializationSegment")R=!0,G=y.getMediaTimescaleFromMoov(Me);else{if(!R)return;(Ge=y.getSamplesInfo(Me).sampleList).length>0&&(Y=Ge[0].cts-ye.start*G),xe.search(e.Z.STPP)>=0?function(Ve,ft,St){var qt,jt;for(A=A!==null?A:Pe(St),qt=0;qt<ft.length;qt++){var kt=ft[qt],Ht=kt.cts,Kt=Ee(),rn=Kt+Ht/G,un=rn+kt.duration/G;r.buffered.add(rn,un);var en=new DataView(Ve,kt.offset,kt.subSizes[0]),ln=Ti.Utils.dataViewToString(en,e.Z.UTF8),an=[],cn=kt.offset+kt.subSizes[0];for(jt=1;jt<kt.subSizes.length;jt++){var gt=new Uint8Array(Ve,cn,kt.subSizes[jt]),Bt=String.fromCharCode.apply(null,gt);an.push(Bt),cn+=kt.subSizes[jt]}try{var Gt=x.getValue().ttmlTimeIsRelative?Ht/G:0,Zt=A.parse(ln,Gt,Ht/G,(Ht+kt.duration)/G,an);ae.addCaptions(N,Kt,Zt)}catch(Ke){m.removeExecutedRequestsBeforeTime(),this.remove(),c.error("TTML parser error: "+Ke.message)}}}(Me,Ge,xe):function(Ve,ft){var St,qt,jt,kt=[];for(St=0;St<ft.length;St++){var Ht=ft[St];Ht.cts-=Y;var Kt=Ee()+Ht.cts/G,rn=Kt+Ht.duration/G;r.buffered.add(Kt,rn);var un=Ve.slice(Ht.offset,Ht.offset+Ht.size),en=Ti.parseBuffer(un);for(qt=0;qt<en.boxes.length;qt++){var ln=en.boxes[qt];if(c.debug("VTT box1: "+ln.type),ln.type!=="vtte"&&ln.type==="vttc"){c.debug("VTT vttc boxes.length = "+ln.boxes.length);var an={styles:{}};for(jt=0;jt<ln.boxes.length;jt++){var cn=ln.boxes[jt];if(c.debug("VTT box2: "+cn.type),cn.type==="payl")an.start=Ht.cts/G,an.end=(Ht.cts+Ht.duration)/G,an.data=cn.cue_text;else if(cn.type==="sttg"&&cn.settings&&cn.settings!=="")try{var gt=cn.settings.split(" ");an.styles=p.getCaptionStyles(gt)}catch{}}an&&an.data&&(kt.push(an),c.debug("VTT  ".concat(an.start," - ").concat(an.end," :  ").concat(an.data)))}}}kt.length>0&&ae.addCaptions(N,0,kt)}(Me,Ge)}}($e,nt,le):Dt===e.Z.VIDEO?function(Me,ye){var xe,Ge;if(ye.segmentType===Ae.w.INIT_SEGMENT_TYPE)q===0&&(q=y.getMediaTimescaleFromMoov(Me));else if(ye.segmentType===Ae.w.MEDIA_SEGMENT_TYPE){if(q===0)return void c.warn("CEA-608: No timescale for embeddedTextTrack yet");var Ve=(Ge=y.getSamplesInfo(Me)).lastSequenceNumber;if(ne[0]||ne[1]||function(){for(var kt,Ht=0;Ht<H.length;Ht++){if((kt=ae.getTrackIdxForId(H[Ht].id))===-1)return void c.warn("CEA-608: data before track is ready.");var Kt=Oe(kt);ne[Ht]=new(b()).Cea608Parser(Ht+1,{newCue:Kt},null)}}(),q){if(ge!==null&&Ve!==ge+Ge.numSequences)for(xe=0;xe<ne.length;xe++)ne[xe]&&ne[xe].reset();for(var ft=function(kt,Ht){if(Ht.length===0)return null;for(var Kt={splits:[],fields:[[],[]]},rn=new DataView(kt),un=0;un<Ht.length;un++)for(var en=Ht[un],ln=b().findCea608Nalus(rn,en.offset,en.size),an=null,cn=0,gt=0;gt<ln.length;gt++)for(var Bt=b().extractCea608DataFromRange(rn,ln[gt]),Gt=0;Gt<2;Gt++)if(Bt[Gt].length>0){en.cts!==an?cn=0:cn+=1;var Zt=Ee();Kt.fields[Gt].push([en.cts+Zt*q,Bt[Gt],cn]),an=en.cts}return Kt.fields.forEach(function(Ke){Ke.sort(function(yt,Ye){return yt[0]===Ye[0]?yt[2]-Ye[2]:yt[0]-Ye[0]})}),Kt}(Me,Ge.sampleList),St=0;St<ne.length;St++){var qt=ft.fields[St],jt=ne[St];if(jt)for(xe=0;xe<qt.length;xe++)jt.addData(qt[xe][0]/q,qt[xe][1])}ge=Ve}}}($e,nt):function(Me,ye,xe){var Ge,Ve,ft=new DataView(Me,0,Me.byteLength);Ve=Ti.Utils.dataViewToString(ft,e.Z.UTF8);try{Ge=Pe(xe).parse(Ve,0),ae.addCaptions(ae.getCurrentTrackIdx(),0,Ge),r.buffered&&r.buffered.add(ye.start,ye.end)}catch(St){fe.error(new k.Z(te.TIMED_TEXT_ERROR_ID_PARSE_CODE,te.TIMED_TEXT_ERROR_MESSAGE_PARSE+St.message,Ve))}}($e,nt,le):c.error("No text type defined")}function Oe($e){return function(nt,Tt,Dt){var _e;(_e=ee.getTTMLRenderingDiv()?ue.createHTMLCaptionsFromScreen(ee.getElement(),nt,Tt,Dt):[{start:nt,end:Tt,data:Dt.getDisplayText(),styles:{}}])&&ae.addCaptions($e,0,_e)}}function Ee(){return isNaN(r.timestampOffset)?0:r.timestampOffset}function Pe($e){var nt;return $e.search(e.Z.VTT)>=0?nt=w.get().streaming.text.webvtt.customRenderingEnabled&&L?L:p:($e.search(e.Z.TTML)>=0||$e.search(e.Z.STPP)>=0)&&(nt=Z),nt}function ct($e){H.forEach(function(nt){var Tt=ae.getTrackIdxForId(nt.id);Tt>=0&&ae.deleteCuesFromTrackIdx(Tt,$e.from,$e.to)})}return r={initialize:function(){ie||(H=[],N=null,q=0,ne=[],ge=null,ie=!0,ue=Ws(z).getInstance(),Q.on(i.Z.VIDEO_CHUNK_RECEIVED,me,r),Q.on(i.Z.BUFFER_CLEARED,ct,r))},addMediaInfos:function($e,nt,Tt){if(T=T.concat(nt),$e===e.Z.TEXT&&nt[0].isFragmented&&!nt[0].isEmbedded){m=Tt,r.buffered=(0,zs.Z)(z).create(),V=re.getTracksFor(e.Z.TEXT,O.id).filter(function(Me){return Me.isFragmented});for(var Dt=re.getCurrentTrackFor(e.Z.TEXT,O.id),_e=0;_e<V.length;_e++)if(V[_e]===Dt){Te(_e);break}}for(var le=0;le<nt.length;le++)B(nt[le])},resetMediaInfos:function(){T=[]},getStreamId:function(){return O.id},append:Ie,abort:function(){},addEmbeddedTrack:function($e){if(ie&&$e)if($e.id===e.Z.CC1||$e.id===e.Z.CC3){for(var nt=0;nt<H.length;nt++)if(H[nt].id===$e.id)return;H.push($e)}else c.warn("Embedded track "+$e.id+" not supported!")},resetEmbedded:function(){Q.off(i.Z.VIDEO_CHUNK_RECEIVED,me,r),Q.off(i.Z.BUFFER_CLEARED,ct,r),ae&&ae.deleteAllTextTracks(),ie=!1,H=[],ne=[null,null],ge=null},getConfig:function(){return{fragmentModel:m,fragmentedTracks:V,videoModel:ee}},setCurrentFragmentedTrackIdx:Te,remove:function($e,nt){$e===void 0&&$e===nt&&($e=r.buffered.start(0),nt=r.buffered.end(r.buffered.length-1)),r.buffered.remove($e,nt),ae.deleteCuesFromTrackIdx(N,$e,nt)},reset:function(){M(),T=[],y=null}},c=(0,_.Z)(z).getInstance().getLogger(r),y=(0,Hr.Z)(z).getInstance(),M(),r}uo.__dashjs_factory_name="TextSourceBuffer";const Qs=h.Z.getClassFactory(uo);var na=C(4403);function lo(u,r){(r==null||r>u.length)&&(r=u.length);for(var c=0,y=new Array(r);c<r;c++)y[c]=u[c];return y}var Xs=["text","align","fontSize","id","isd","line","lineAlign","lineHeight","linePadding","position","positionAlign","region","size","snapToLines","vertical"];function co(u){var r,c,y,A,T,m,R,G,V,Y,N,H,q,ge,ne,ue,fe,x,re=this.context,ee=(0,g.Z)(re).getInstance(),ae=u.videoModel,p=u.streamInfo,L=u.settings;function Z(le,Me,ye,xe,Ge,Ve){var ft=0,St=0;le/Me>ye/xe?ft=(St=Me)/xe*ye:St=(ft=le)/ye*xe;var qt,jt,kt=0,Ht=0;return ft/St>Ge?(Ht=St,kt=St*Ge):(kt=ft,Ht=ft/Ge),qt=(le-kt)/2,jt=(Me-Ht)/2,Ve?{x:qt+.1*kt,y:jt+.1*Ht,w:.8*kt,h:.8*Ht}:{x:qt,y:jt,w:kt,h:Ht}}function O(le,Me){var ye=ae.getClientWidth(),xe=ae.getClientHeight(),Ge=ae.getVideoWidth(),Ve=ae.getVideoHeight(),ft=ae.getVideoRelativeOffsetTop(),St=ae.getVideoRelativeOffsetLeft();if(Ge!==0&&Ve!==0){var qt=Ge/Ve,jt=!1;le.isFromCEA608&&(qt=1.1666666666666667,jt=!0);var kt=Z.call(this,ye,xe,Ge,Ve,qt,jt),Ht=kt.w,Kt=kt.h,rn=kt.x,un=kt.y;if(Ht!=V||Kt!=Y||rn!=R||un!=G||Me){if(R=rn+St,G=un+ft,V=Ht,Y=Kt,N){var en=N.style;en&&(en.left=R+"px",en.top=G+"px",en.width=V+"px",en.height=Y+"px",en.zIndex=ge&&document[ge]||ne?fe:null,ee.trigger(n.Z.CAPTION_CONTAINER_RESIZE))}var ln=le.activeCues;if(ln)for(var an=ln.length,cn=0;cn<an;++cn){var gt=ln[cn];gt.scaleCue(gt)}}}}function w(le){var Me,ye,xe,Ge,Ve,ft=V,St=Y;if(le.cellResolution){var qt=[ft/le.cellResolution[0],St/le.cellResolution[1]];if(le.linePadding){for(Me in le.linePadding)if(le.linePadding.hasOwnProperty(Me)){ye=(le.linePadding[Me]*qt[0]).toString();for(var jt=document.getElementsByClassName("spanPadding"),kt=0;kt<jt.length;kt++)jt[kt].style.cssText=jt[kt].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+ye),jt[kt].style.cssText=jt[kt].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+ye)}}if(le.fontSize){for(Me in le.fontSize)if(le.fontSize.hasOwnProperty(Me)){le.fontSize[Me][0]==="%"?xe=le.fontSize[Me][1]/100:le.fontSize[Me][0]==="c"&&(xe=le.fontSize[Me][1]),ye=(xe*qt[1]).toString(),Ve=Me!=="defaultFontSize"?document.getElementsByClassName(Me):document.getElementsByClassName("paragraph");for(var Ht=0;Ht<Ve.length;Ht++)Ve[Ht].style.cssText=Ve[Ht].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+ye)}if(le.lineHeight){for(Me in le.lineHeight)if(le.lineHeight.hasOwnProperty(Me)){le.lineHeight[Me][0]==="%"?Ge=le.lineHeight[Me][1]/100:le.fontSize[Me][0]==="c"&&(Ge=le.lineHeight[Me][1]),ye=(Ge*qt[1]).toString(),Ve=document.getElementsByClassName(Me);for(var Kt=0;Kt<Ve.length;Kt++)Ve[Kt].style.cssText=Ve[Kt].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+ye)}}}}if(le.isd){var rn=document.getElementById(le.cueID);rn&&N.removeChild(rn),Q(le)}}function z(le,Me){var ye=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,xe=/^#(.*)$/;if(ye.test(Me)){var Ge=ye.exec(Me),Ve=parseInt(Ge[4],10)-1;return"data:image/png;base64,"+btoa(le.images[Ve])}if(xe.test(Me)){var ft=xe.exec(Me)[1];return"data:image/png;base64,"+le.embeddedImages[ft]}return Me}function Q(le){if(N){var Me=document.createElement("div");N.appendChild(Me),ue=(0,na.renderHTML)(le.isd,Me,function(ye){return z(le,ye)},N.clientHeight,N.clientWidth,!1,function(ye){c.info("renderCaption :",ye)},ue,!0),Me.id=le.cueID,ee.trigger(n.Z.CAPTION_RENDERED,{captionDiv:Me,currentTrackIdx:m})}}function ie(le,Me){if(!L.get().streaming.text.extendSegmentedCues||!Me.cues||Me.cues.length===0)return!1;var ye=Me.cues[Me.cues.length-1];return!(ye.endTime<le.startTime||!function(xe,Ge,Ve){for(var ft=0;ft<Ve.length;ft++){var St=Ve[ft];if(JSON.stringify(xe[St])!==JSON.stringify(Ge[St]))return!1}return!0}(ye,le,Xs)||(ye.endTime=Math.max(ye.endTime,le.endTime),0))}function M(le,Me){Me&&Me.forEach(function(ye){ye.kind&&ye.kind==="image"&&(ye.src=z(le,ye.src)),M(le,ye.contents)})}function B(le,Me,ye){var xe=Oe(le);if(xe&&Array.isArray(ye)&&ye.length!==0)for(var Ge=0;Ge<ye.length;Ge++){var Ve=void 0,ft=ye[Ge];xe.cellResolution=ft.cellResolution,xe.isFromCEA608=ft.isFromCEA608,isNaN(ft.start)||isNaN(ft.end)||(Ve=ft.type==="html"&&N?me(ft,Me,xe):ft.data?Te(ft,Me,xe):null);try{Ve?ct(xe,Ve)||(L.get().streaming.text.webvtt.customRenderingEnabled?(xe.manualCueList||(xe.manualCueList=[]),xe.manualCueList.push(Ve)):ie(Ve,xe)||xe.addCue(Ve)):c.error("Impossible to display subtitles. You might have missed setting a TTML rendering div via player.attachTTMLRenderingDiv(TTMLRenderingDiv)")}catch(St){throw nt(xe),xe.addCue(Ve),St}}}function me(le,Me,ye){var xe=this,Ge=new y(le.start+Me,le.end+Me,"");return Ge.cueHTMLElement=le.cueHTMLElement,Ge.isd=le.isd,Ge.images=le.images,Ge.embeddedImages=le.embeddedImages,Ge.cueID=le.cueID,Ge.scaleCue=w.bind(xe),Ge.cellResolution=le.cellResolution,Ge.lineHeight=le.lineHeight,Ge.linePadding=le.linePadding,Ge.fontSize=le.fontSize,N.style.left=R+"px",N.style.top=G+"px",N.style.width=V+"px",N.style.height=Y+"px",Ge.isd&&M(Ge,Ge.isd.contents),Ge.onenter=function(){ye.mode===e.Z.TEXT_SHOWING&&(this.isd?(Q(this),c.debug("Cue enter id:"+this.cueID)):(N.appendChild(this.cueHTMLElement),w.call(xe,this),ee.trigger(n.Z.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:m})))},Ge.onexit=function(){if(N)for(var Ve=N.childNodes,ft=0;ft<Ve.length;++ft)Ve[ft].id===this.cueID&&(c.debug("Cue exit id:"+Ve[ft].id),N.removeChild(Ve[ft]),--ft)},Ge}function Te(le,Me,ye){var xe=new y(le.start-Me,le.end-Me,le.data);if(xe.cueID="".concat(xe.startTime,"_").concat(xe.endTime),xe.isActive=!1,le.styles)try{le.styles.align!==void 0&&"align"in xe&&(xe.align=le.styles.align),le.styles.line!==void 0&&"line"in xe&&(xe.line=le.styles.line),le.styles.snapToLines!==void 0&&"snapToLines"in xe&&(xe.snapToLines=le.styles.snapToLines),le.styles.position!==void 0&&"position"in xe&&(xe.position=le.styles.position),le.styles.size!==void 0&&"size"in xe&&(xe.size=le.styles.size)}catch(Ge){c.error(Ge)}return xe.onenter=function(){ye.mode===e.Z.TEXT_SHOWING&&ee.trigger(n.Z.CAPTION_RENDERED,{currentTrackIdx:m})},xe}function Ie(){var le,Me=[],ye=function(Ge,Ve){var ft;if(typeof Symbol>"u"||Ge[Symbol.iterator]==null){if(Array.isArray(Ge)||(ft=function(Kt,rn){if(Kt){if(typeof Kt=="string")return lo(Kt,rn);var un=Object.prototype.toString.call(Kt).slice(8,-1);return un==="Object"&&Kt.constructor&&(un=Kt.constructor.name),un==="Map"||un==="Set"?Array.from(Kt):un==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(un)?lo(Kt,rn):void 0}}(Ge))||Ve&&Ge&&typeof Ge.length=="number"){ft&&(Ge=ft);var St=0,qt=function(){};return{s:qt,n:function(){return St>=Ge.length?{done:!0}:{done:!1,value:Ge[St++]}},e:function(Kt){throw Kt},f:qt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var jt,kt=!0,Ht=!1;return{s:function(){ft=Ge[Symbol.iterator]()},n:function(){var Kt=ft.next();return kt=Kt.done,Kt},e:function(Kt){Ht=!0,jt=Kt},f:function(){try{kt||ft.return==null||ft.return()}finally{if(Ht)throw jt}}}}(ae.getTextTracks());try{for(ye.s();!(le=ye.n()).done;){var xe=le.value;xe.manualMode===e.Z.TEXT_SHOWING&&Me.push(xe)}}catch(Ge){ye.e(Ge)}finally{ye.f()}return Me}function Oe(le){return le>=0&&A[le]?ae.getTextTrack(A[le].kind,A[le].id,A[le].lang,A[le].isTTML,A[le].isEmbedded):null}function Ee(le){var Me=this;if(le!==m){var ye=Oe(m=le);Pe.call(this,ye),q&&(clearInterval(q),q=null),ye&&ye.renderingType==="html"&&(O.call(this,ye,!0),window.ResizeObserver?(x=new window.ResizeObserver(function(){O.call(Me,ye,!0)})).observe(ae.getElement()):q=setInterval(O.bind(this,ye),500))}}function Pe(le){_e.call(this),le&&le.renderingType==="html"?Tt.call(this):Dt.call(this)}function ct(le,Me){if(!le.cues)return!1;for(var ye=0;ye<le.cues.length;ye++)if(le.cues[ye].startTime===Me.startTime&&le.cues[ye].endTime===Me.endTime)return!0;return!1}function $e(le,Me,ye){var xe=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return(isNaN(Me)||(xe?le.startTime:le.endTime)>=Me)&&(isNaN(ye)||(xe?le.endTime:le.startTime)<=ye)}function nt(le,Me,ye){var xe=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];if(le.cues)for(var Ge=le.cues,Ve=Ge.length-1,ft=Ve;ft>=0;ft--)$e(Ge[ft],Me,ye,xe)&&(Ge[ft].onexit&&Ge[ft].onexit(),le.removeCue(Ge[ft]))}function Tt(){var le=document.getElementById("native-cue-style");if(!le){(le=document.createElement("style")).id="native-cue-style",document.head.appendChild(le);var Me=le.sheet,ye=ae.getElement();try{ye&&(ye.id?Me.insertRule("#"+ye.id+"::cue {background: transparent}",0):ye.classList.length!==0?Me.insertRule("."+ye.className+"::cue {background: transparent}",0):Me.insertRule("video::cue {background: transparent}",0))}catch(xe){c.info(""+xe.message)}}}function Dt(){var le=document.getElementById("native-cue-style");le&&document.head.removeChild(le)}function _e(){if(N)for(;N.firstChild;)N.removeChild(N.firstChild)}return r={initialize:function(){typeof window<"u"&&typeof navigator<"u"&&(y=window.VTTCue||window.TextTrackCue,A=[],T=[],m=-1,R=0,G=0,V=0,Y=0,N=null,H=null,q=null,ne=!1,fe=2147483647,ue=null,document.fullscreenElement!==void 0?ge="fullscreenElement":document.webkitIsFullScreen!==void 0?ge="webkitIsFullScreen":document.msFullscreenElement?ge="msFullscreenElement":document.mozFullScreen&&(ge="mozFullScreen"))},getStreamId:function(){return p.id},addTextTrack:function(le){A.push(le)},addCaptions:B,createTracks:function(){A.sort(function(Kt,rn){return Kt.index-rn.index}),N=ae.getTTMLRenderingDiv(),H=ae.getVttRenderingDiv();for(var le,Me,ye,xe,Ge,Ve,ft=-1,St=0;St<A.length;St++){var qt=(Me=(le=A[St]).kind,ye=le.id!==void 0?le.id:le.lang,xe=le.lang,Ge=le.isTTML,Ve=le.isEmbedded,ae.addTextTrack(Me,ye,xe,Ge,Ve));T.push(qt),A[St].defaultTrack&&(qt.default=!0,ft=St);var jt=Oe(St);jt&&(jt.mode=e.Z.TEXT_SHOWING,N&&(A[St].isTTML||A[St].isEmbedded)?jt.renderingType="html":jt.renderingType="default"),B(St,0,A[St].captionData),ee.trigger(n.Z.TEXT_TRACK_ADDED)}if(Ee.call(this,ft),ft>=0){ee.on(n.Z.PLAYBACK_METADATA_LOADED,function Kt(){var rn=Oe(ft);rn&&rn.renderingType==="html"&&O.call(this,rn,!0),ee.off(n.Z.PLAYBACK_METADATA_LOADED,Kt,this)},this);for(var kt=0;kt<A.length;kt++){var Ht=Oe(kt);Ht&&(Ht.mode=kt===ft?e.Z.TEXT_SHOWING:e.Z.TEXT_HIDDEN,Ht.manualMode=kt===ft?e.Z.TEXT_SHOWING:e.Z.TEXT_HIDDEN)}}ee.trigger(i.Z.TEXT_TRACKS_QUEUE_INITIALIZED,{index:m,tracks:A,streamId:p.id})},getCurrentTrackIdx:function(){return m},setCurrentTrackIdx:Ee,getTrackIdxForId:function(le){for(var Me=-1,ye=0;ye<A.length;ye++)if(A[ye].id===le){Me=ye;break}return Me},getCurrentTrackInfo:function(){return A[m]},setModeForTrackIdx:function(le,Me){var ye=Oe(le);ye&&ye.mode!==Me&&(ye.mode=Me),ye&&ye.manualMode!==Me&&(ye.manualMode=Me)},deleteCuesFromTrackIdx:function(le,Me,ye){var xe=Oe(le);xe&&nt(xe,Me,ye)},deleteAllTextTracks:function(){for(var le=T?T.length:0,Me=0;Me<le;Me++){var ye=Oe(Me);ye&&nt.call(this,ye,p.start,p.start+p.duration,!1)}T=[],A=[],q&&(clearInterval(q),q=null),x&&ae&&(x.unobserve(ae.getElement()),x=null),m=-1,_e.call(this)},deleteTextTrack:function(le){ae.removeChild(T[le]),T.splice(le,1)},manualCueProcessing:function(le){var Me=Ie();if(Me&&Me.length>0){var ye=Me[0].manualCueList;ye&&ye.length>0&&ye.forEach(function(xe){if(xe.startTime<=le&&xe.endTime>=le&&!xe.isActive)xe.isActive=!0,WebVTT.processCues(window,[xe],H,xe.cueID);else if(xe.isActive&&(xe.startTime>le||xe.endTime<le)&&(xe.isActive=!1,H))for(var Ge=H.childNodes,Ve=0;Ve<Ge.length;++Ve)Ge[Ve].id===xe.cueID&&(H.removeChild(Ge[Ve]),--Ve)})}},disableManualTracks:function(){var le=Ie();if(le&&le.length>0){var Me=le[0].manualCueList;Me&&Me.length>0&&Me.forEach(function(ye){if(ye.isActive&&(ye.isActive=!1,H))for(var xe=H.childNodes,Ge=0;Ge<xe.length;++Ge)xe[Ge].id===ye.cueID&&(H.removeChild(xe[Ge]),--Ge)})}}},c=(0,_.Z)(re).getInstance().getLogger(r),r}co.__dashjs_factory_name="TextTracks";const Js=h.Z.getClassFactory(co);function fo(){var u,r,c,y,A,T,m=this.context;function R(N){var H=N.split(":"),q=H.length-1;return N=60*parseInt(H[q-1],10)+parseFloat(H[q]),q===2&&(N+=3600*parseInt(H[0],10)),N}function G(N){var H=N.split(y),q=H[1].split(T);return q.shift(),H[1]=q[0],q.shift(),{cuePoints:H,styles:V(q)}}function V(N){var H={};return N.forEach(function(q){if(q.split(/:/).length>1){var ge=q.split(/:/)[1],ne=!1;ge&&ge.search(/%/)!=-1&&(ne=!0,ge=parseInt(ge.replace(/%/,""),10)),(q.match(/align/)||q.match(/A/))&&(H.align=ge),(q.match(/line/)||q.match(/L/))&&(H.line=ge==="auto"?ge:parseInt(ge,10),ne&&(H.snapToLines=!1)),(q.match(/position/)||q.match(/P/))&&(H.position=ge),(q.match(/size/)||q.match(/S/))&&(H.size=ge)}}),H}function Y(N,H){for(var q,ge=H,ne="",ue="";N[ge]!==""&&ge<N.length;)ge++;if((q=ge-H)>1)for(var fe=0;fe<q;fe++){if((ue=N[H+fe]).match(y)){ne="";break}ne+=ue,fe!==q-1&&(ne+=`
`)}else(ue=N[H]).match(y)||(ne=ue);return ne}return u={parse:function(N){var H,q,ge=[];if(!N)return ge;H=(N=N.split(c)).length,q=-1;for(var ne=0;ne<H;ne++){var ue=N[ne];if(ue.length>0&&ue!=="WEBVTT"&&ue.match(y)){var fe=G(ue),x=fe.cuePoints,re=fe.styles,ee=Y(N,ne+1),ae=R(x[0].replace(A,"")),p=R(x[1].replace(A,""));!isNaN(ae)&&!isNaN(p)&&ae>=q&&p>ae?ee!==""?(q=ae,ge.push({start:ae,end:p,data:ee,styles:re})):r.error("Skipping cue due to empty/malformed cue text"):r.error("Skipping cue due to incorrect cue timing")}}return ge},getCaptionStyles:V},r=(0,_.Z)(m).getInstance().getLogger(u),c=/(?:\r\n|\r|\n)/gm,y=/-->/,A=/(^[\s]+|[\s]+$)/g,T=/\s\b/g,u}fo.__dashjs_factory_name="VTTParser";const $s=h.Z.getSingletonFactory(fo);function go(){var u,r;return u={parse:function(c){var y=[];return r.oncue=function(A){A.start=A.startTime,A.end=A.endTime,A.data=A.text,A.styles={align:A.align,line:A.line,position:A.position,size:A.size},y.push(A)},r.parse(c),y}},function(){try{window&&window.WebVTT&&window.WebVTT.Parser&&(r=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()))}catch{}}(),u}go.__dashjs_factory_name="VttCustomRenderingParser";const eu=h.Z.getSingletonFactory(go);function ho(){var u,r,c=this.context,y=(0,g.Z)(c).getInstance(),A=0;return u={parse:function(T,m,R,G,V){var Y,N,H,q="",ge=[],ne={},ue={},fe="",x="",re={onOpenTag:function(Z,O,w){if(w[" imagetype"]&&!w[" imageType"]&&(y.trigger(n.Z.CONFORMANCE_VIOLATION,{level:Mr.LEVELS.ERROR,event:Mr.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),w[" imageType"]=w[" imagetype"]),O==="image"&&(Z==="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"||Z==="http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt")){if(!w[" imageType"]||w[" imageType"].value!=="PNG")return void r.warn("smpte-tt imageType != PNG. Discarded");fe=w["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){fe&&(ue[fe]=x.trim()),x="",fe=""},onText:function(Z){fe&&(x+=Z)}};if(!T)throw q="no ttml data to parse",new Error(q);ne.data=T,y.trigger(i.Z.TTML_TO_PARSE,ne);var ee=(0,na.fromXML)(ne.data,function(Z){q=Z},re);y.trigger(i.Z.TTML_PARSED,{ttmlString:ne.data,ttmlDoc:ee});var ae,p=ee.getMediaTimeEvents();for(H=0;H<p.length;H++){var L=(0,na.generateISD)(ee,p[H],function(Z){q=Z});L.contents.some(function(Z){return Z.contents.length})&&(Y=p[H]+m)<(N=p[H+1]+m)&&ge.push({start:Y,end:N,type:"html",cueID:(ae="cue_TTML_"+A,A++,ae),isd:L,images:V,embeddedImages:ue})}if(q!=="")throw r.error(q),new Error(q);return ge}},r=(0,_.Z)(c).getInstance().getLogger(u),u}ho.__dashjs_factory_name="TTMLParser";const tu=h.Z.getSingletonFactory(ho);function mo(u){var r,c,y,A,T,m,R,G,V,Y,N,H,q=this.context,ge=u.adapter,ne=u.errHandler,ue=u.manifestModel,fe=u.mediaController,x=u.videoModel,re=u.settings;function ee(z){var Q=z.tracks,ie=z.index,M=z.streamId;if(re.get().streaming.text.defaultEnabled===!1&&!L()||H)Z(M,-1);else{var B=fe.getCurrentTrackFor(e.Z.TEXT,M);if(B){var me={lang:B.lang,role:B.roles[0],index:B.index,codec:B.codec,accessibility:B.accessibility[0]};Q.some(function(Te,Ie){if(fe.matchSettings(me,Te))return Z(M,Ie),ie=Ie,!0})}V=!1}c[M].lastEnabledIndex=ie,G.trigger(n.Z.TEXT_TRACKS_ADDED,{enabled:L(),index:ie,tracks:Q,streamId:M}),N=!0}function ae(z){try{var Q=z.streamId;if(!A[Q]||isNaN(z.time))return;A[Q].manualCueProcessing(z.time)}catch{}}function p(z){try{var Q=z.streamId;if(!A[Q])return;A[Q].disableManualTracks()}catch{}}function L(){var z=!0;return V&&!Y&&(z=!1),z}function Z(z,Q){(V=Q===-1)&&fe&&fe.saveTextSettingsDisabled();var ie=O(z);if(ie!==Q&&A[z]){A[z].disableManualTracks(),A[z].setModeForTrackIdx(ie,e.Z.TEXT_HIDDEN),A[z].setCurrentTrackIdx(Q),A[z].setModeForTrackIdx(Q,e.Z.TEXT_SHOWING);var M=A[z].getCurrentTrackInfo();M&&M.isFragmented&&!M.isEmbedded?function(B,me,Te){if(y[B])for(var Ie=y[B].getConfig().fragmentedTracks,Oe=0;Oe<Ie.length;Oe++){var Ee=Ie[Oe];if(me.lang===Ee.lang&&(Ee.id?me.id===Ee.id:me.index===Ee.index)){var Pe=fe.getCurrentTrackFor(e.Z.TEXT,B);(Ee.id?Pe.id!==Ee.id:Pe.index!==Ee.index)?(A[B].deleteCuesFromTrackIdx(Te),y[B].setCurrentFragmentedTrackIdx(Oe)):Te===-1&&G.trigger(i.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:B,mediaType:e.Z.TEXT})}}}(z,M,ie):M&&!M.isFragmented&&function(B,me){G.trigger(i.Z.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:me},{streamId:B,mediaType:e.Z.TEXT})}(z,M),fe.setTrack(M)}}function O(z){return A[z].getCurrentTrackIdx()}function w(){y={},A={},c={},V=!0,N=!1,H=!1}return r={deactivateStream:function(z){if(z){var Q=z.id;y[Q]&&y[Q].resetMediaInfos(),A[Q]&&A[Q].deleteAllTextTracks()}},initialize:function(){G.on(i.Z.TEXT_TRACKS_QUEUE_INITIALIZED,ee,r),re.get().streaming.text.webvtt.customRenderingEnabled&&(G.on(i.Z.PLAYBACK_TIME_UPDATED,ae,r),G.on(i.Z.PLAYBACK_SEEKING,p,r))},initializeForStream:function(z){var Q=z.id,ie=Js(q).create({videoModel:x,settings:re,streamInfo:z});ie.initialize(),A[Q]=ie;var M=Qs(q).create({errHandler:ne,adapter:ge,manifestModel:ue,mediaController:fe,videoModel:x,textTracks:ie,vttParser:T,vttCustomRenderingParser:m,ttmlParser:R,streamInfo:z,settings:re});M.initialize(),y[Q]=M,c[Q]={},c[Q].lastEnabledIndex=-1},createTracks:function(z){var Q=z.id;A[Q]&&A[Q].createTracks()},getTextSourceBuffer:function(z){var Q=z.id;if(y&&y[Q])return y[Q]},getAllTracksAreDisabled:function(){return V},addEmbeddedTrack:function(z,Q){var ie=z.id;y[ie]&&y[ie].addEmbeddedTrack(Q)},enableText:function(z,Q){return(0,X.PS)(Q,"boolean"),L()!==Q&&(Q&&Z(z,c[z].lastEnabledIndex),Q||(c[z].lastEnabledIndex=O(z),N?Z(z,-1):H=!0)),!0},isTextEnabled:L,setTextTrack:Z,getCurrentTrackIdx:O,enableForcedTextStreaming:function(z){return(0,X.PS)(z,"boolean"),Y=z,!0},addMediaInfosToBuffer:function(z,Q,ie){var M=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,B=z.id;y[B]&&y[B].addMediaInfos(Q,ie,M)},reset:function(){w(),G.off(i.Z.TEXT_TRACKS_QUEUE_INITIALIZED,ee,r),re.get().streaming.text.webvtt.customRenderingEnabled&&(G.off(i.Z.PLAYBACK_TIME_UPDATED,ae,r),G.off(i.Z.PLAYBACK_SEEKING,p,r)),Object.keys(y).forEach(function(z){y[z].resetEmbedded(),y[z].reset()})}},Y=!1,N=!1,H=!1,T=$s(q).getInstance(),m=eu(q).getInstance(),R=tu(q).getInstance(),G=(0,g.Z)(q).getInstance(),w(),r}mo.__dashjs_factory_name="TextController";const nu=h.Z.getClassFactory(mo);function ra(){var u,r,c,y,A,T,m,R,G,V,Y,N,H,q,ge,ne,ue,fe,x,re,ee,ae,p,L,Z,O,w,z,Q,ie,M,B,me,Te,Ie,Oe,Ee,Pe,ct,$e="You must first call initialize() and set a source before calling this method",nt="You must first call initialize() and set a valid source and view before calling this method",Tt="You must first call attachView() to set the video element before calling this method",Dt="You must first call attachSource() with a valid source before calling this method",_e="MediaPlayer not initialized!",le=this.context,Me=(0,g.Z)(le).getInstance(),ye=(0,ot.Z)(le).getInstance(),xe=(0,_.Z)(le).getInstance({settings:ye});function Ge(){cn(null),ln(null),y=null,q&&(q.reset(),q=null),ge&&(ge.reset(),ge=null),re&&re.reset(),ye.reset(),ue&&(ue.reset(),ue=null)}function Ve(){return!!c&&!!Oe.getElement()}function ft(){return(0,vs.e)()}function St(){if(!m)throw nt;return z.isPaused()}function qt(){if(!m)throw nt;return z.getIsDynamic()}function jt(se){var Ue=Z&&Z.hasVideoTrack()?e.Z.VIDEO:e.Z.AUDIO,it=B.getCurrentDVRInfo(Ue);if(!it)return 0;var Rt=z.getOriginalLiveDelay(),Lt=it.range.start+se;return Lt>it.range.end-Rt&&(Lt=it.range.end-Rt),Lt}function kt(se){if(!m)throw nt;var Ue=en().currentTime;if(se!==void 0)Ue=Z.getTimeRelativeToStreamId(Ue,se);else if(z.getIsDynamic()){var it=Z&&Z.hasVideoTrack()?e.Z.VIDEO:e.Z.AUDIO,Rt=B.getCurrentDVRInfo(it);Ue=Rt===null||Ue===0?0:Math.max(0,Ue-Rt.range.start)}return Ue}function Ht(){if(!m)throw nt;var se=en().duration;if(z.getIsDynamic()){var Ue=Z&&Z.hasVideoTrack()?e.Z.VIDEO:e.Z.AUDIO,it=B.getCurrentDVRInfo(Ue);se=it?it.range.end-it.range.start:0}return se}function Kt(se){(0,X.PS)(se,"boolean"),R=se}function rn(){re.restoreDefaultUTCTimingSources()}function un(){return B}function en(){if(!Oe.getElement())throw Tt;return Oe.getElement()}function ln(se){if(!A)throw _e;Oe.setElement(se),se&&(Ke(),function(){if(!ge){var Ue=dashjs.MetricsReporting;if(typeof Ue=="function"){var it=Ue(le).create();ge=it.createMetricsReporting({debug:xe,eventBus:Me,mediaElement:en(),adapter:fe,dashMetrics:B,mediaPlayerModel:x,events:i.Z,constants:e.Z,metricsConstants:S.Z})}}}(),function(){if(!ne){var Ue=dashjs.MssHandler;typeof Ue=="function"&&(te.extend(Ue.errors),ne=Ue(le).create({eventBus:Me,mediaPlayerModel:x,dashMetrics:B,manifestModel:me,playbackController:z,streamController:Z,protectionController:q,baseURLController:ae,errHandler:ee,events:i.Z,constants:e.Z,debug:xe,initSegmentType:Ae.w.INIT_SEGMENT_TYPE,BASE64:$i,ISOBoxer:Ti,settings:ye}))}}(),Z&&Z.switchToVideoElement(G)),m&&Bt(),Re(G)}function an(se){if(!T)throw $e;var Ue=Z.getActiveStreamInfo();return Ue?H.getTracksFor(se,Ue.id):[]}function cn(se){var Ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;if(!A)throw _e;typeof se=="string"&&Ee.initialize(se),Ue==null&&(Ue=NaN),isNaN(Ue)||(Ue=Math.max(0,Ue)),G=Ue,c=se,(T||m)&&Bt(),Ve()&&Re(G)}function gt(){if(!T)throw $e;var se=Z.getActiveStreamInfo();return se?Z.getStreamById(se.id):null}function Bt(){m=!1,T=!1,fe.reset(),Z.reset(),w.reset(),M.reset(),z.reset(),Q.reset(),ie.reset(),V.reset(),H.reset(),ct.reset(),q&&(ye.get().streaming.protection.keepProtectionMediaKeys?q.stop():(q.reset(),q=null,Ke())),O.reset(),Te.reset(),Ie.reset()}function Gt(){var se=Zt();Z||(Z=sa(le).getInstance()),O||(O=nu(le).create({errHandler:ee,manifestModel:me,adapter:fe,mediaController:H,videoModel:Oe,settings:ye})),L.setConfig({capabilities:p,customParametersModel:re,adapter:fe,settings:ye,manifestModel:me,errHandler:ee}),Z.setConfig({capabilities:p,capabilitiesFilter:L,manifestLoader:se,manifestModel:me,mediaPlayerModel:x,customParametersModel:re,protectionController:q,textController:O,adapter:fe,dashMetrics:B,errHandler:ee,timelineConverter:N,videoModel:Oe,playbackController:z,serviceDescriptionController:Q,contentSteeringController:ie,abrController:V,mediaController:H,settings:ye,baseURLController:ae,uriFragmentModel:Ee,segmentBaseController:ct}),w.setConfig({settings:ye,playbackController:z,streamController:Z,videoModel:Oe,timelineConverter:N,adapter:fe}),z.setConfig({streamController:Z,serviceDescriptionController:Q,dashMetrics:B,adapter:fe,videoModel:Oe,timelineConverter:N,settings:ye}),M.setConfig({streamController:Z,playbackController:z,mediaPlayerModel:x,videoModel:Oe,settings:ye}),V.setConfig({streamController:Z,domStorage:Pe,mediaPlayerModel:x,customParametersModel:re,cmsdModel:Ie,dashMetrics:B,adapter:fe,videoModel:Oe,settings:ye}),Te.setConfig({abrController:V,dashMetrics:B,playbackController:z}),Ie.setConfig({}),V.initialize(),Z.initialize(R,y),O.initialize(),w.initialize(),M.initialize(),Te.initialize(),Ie.initialize(),ie.initialize(),ct.initialize()}function Zt(){return rs(le).create({debug:xe,errHandler:ee,dashMetrics:B,mediaPlayerModel:x,requestModifier:(0,he.Z)(le).getInstance(),mssHandler:ne,settings:ye})}function Ke(){if(q)return q;var se=dashjs.Protection;if(typeof se=="function"){var Ue=se(le).create();return i.Z.extend(se.events),n.Z.extend(se.events,{publicOnly:!0}),te.extend(se.errors),p||(p=(0,Ma.Z)(le).getInstance()),q=Ue.createProtectionSystem({debug:xe,errHandler:ee,videoModel:Oe,customParametersModel:re,capabilities:p,eventBus:Me,events:i.Z,BASE64:$i,constants:e.Z,cmcdModel:Te,settings:ye})}return null}function yt(){if(!A)throw _e;if(ue)return ue;var se=dashjs.OfflineController;if(typeof se=="function"){i.Z.extend(se.events),n.Z.extend(se.events,{publicOnly:!0}),te.extend(se.errors);var Ue=Zt(),it=li(le).create();return it.setConfig({manifestModel:me,adapter:fe,manifestLoader:Ue,errHandler:ee,contentSteeringController:ie}),ue=se(le).create({debug:xe,manifestUpdater:it,baseURLController:ae,manifestLoader:Ue,manifestModel:me,mediaPlayerModel:x,abrController:V,playbackController:z,adapter:fe,errHandler:ee,dashMetrics:B,timelineConverter:N,segmentBaseController:ct,schemeLoaderFactory:Y,eventBus:Me,events:i.Z,errors:te,constants:e.Z,settings:ye,dashConstants:t.Z,urlUtils:(0,Ce.Z)(le).getInstance()})}return null}function Ye(se){var Ue=Z&&Z.hasVideoTrack()?e.Z.VIDEO:e.Z.AUDIO,it=B.getCurrentDVRInfo(Ue);return it?se+(it.manifestInfo.availableFrom.getTime()/1e3+it.range.start):0}function Re(){var se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN;ue&&ue.resetRecords(),!T&&c&&(T=!0,r.info("Streaming Initialized"),Gt(),typeof c=="string"?Z.load(c,se):Z.loadWithManifest(c,se)),!m&&Ve()&&(m=!0,r.info("Playback Initialized"))}return u={initialize:function(se,Ue,it){var Rt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:NaN;p||(p=(0,Ma.Z)(le).getInstance()).setConfig({settings:ye}),ee||(ee=is(le).getInstance()),p.supportsMediaSource()?(A||(A=!0,N=Hs(le).getInstance(),V||(V=hs(le).getInstance()).setConfig({settings:ye}),Y||(Y=Un(le).getInstance()),z||(z=d(le).getInstance()),H||(H=Ro(le).getInstance()),Z||(Z=sa(le).getInstance()),w||(w=To(le).getInstance()),M||(M=So(le).getInstance()),Q||(Q=Ao(le).getInstance()),ie||(ie=Tr(le).getInstance()),L||(L=as(le).getInstance()),fe=Cs(le).getInstance(),me=us(le).getInstance(),Te=_t(le).getInstance(),Ie=Gr(le).getInstance(),B=js(le).getInstance({settings:ye}),Pe=Es(le).getInstance({settings:ye}),fe.setConfig({constants:e.Z,cea608parser:b(),errHandler:ee,BASE64:$i}),ae||(ae=Mo(le).create()),ae.setConfig({adapter:fe,contentSteeringController:ie}),Q.setConfig({adapter:fe}),ct||(ct=Ss(le).getInstance({dashMetrics:B,mediaPlayerModel:x,errHandler:ee,baseURLController:ae,events:i.Z,eventBus:Me,debug:xe,boxParser:(0,Hr.Z)(le).getInstance(),requestModifier:(0,he.Z)(le).getInstance(),errors:te})),H.setConfig({domStorage:Pe,settings:ye,customParametersModel:re}),x.setConfig({playbackController:z,serviceDescriptionController:Q}),ie.setConfig({adapter:fe,errHandler:ee,dashMetrics:B,mediaPlayerModel:x,manifestModel:me,serviceDescriptionController:Q,eventBus:Me,requestModifier:(0,he.Z)(le).getInstance()}),rn(),Kt(it===void 0||it),yt()),se&&ln(se),Ue&&cn(Ue,Rt),r.info("[dash.js "+ft()+"] MediaPlayer has been initialized")):ee.error(new k.Z(te.CAPABILITY_MEDIASOURCE_ERROR_CODE,te.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function(se){se&&(se.capabilities&&(p=se.capabilities),se.capabilitiesFilter&&(L=se.capabilitiesFilter),se.streamController&&(Z=se.streamController),se.textController&&(O=se.textController),se.gapController&&(w=se.gapController),se.playbackController&&(z=se.playbackController),se.serviceDescriptionController&&(Q=se.serviceDescriptionController),se.contentSteeringController&&(ie=se.contentSteeringController),se.catchupController&&(M=se.catchupController),se.mediaPlayerModel&&(x=se.mediaPlayerModel),se.customParametersModel&&(re=se.customParametersModel),se.abrController&&(V=se.abrController),se.schemeLoaderFactory&&(Y=se.schemeLoaderFactory),se.mediaController&&(H=se.mediaController),se.settings&&(ye=se.settings))},on:function(se,Ue,it,Rt){Me.on(se,Ue,it,Rt)},off:function(se,Ue,it){Me.off(se,Ue,it)},extend:function(se,Ue,it){h.Z.extend(se,Ue,it,le)},attachView:ln,attachSource:cn,isReady:Ve,preload:function(){if(!Oe.getElement()&&!T){if(!c)throw Dt;Re(G)}},play:function(){if(!m)throw nt;(!R||St()&&m)&&z.play(!0)},isPaused:St,pause:function(){if(!m)throw nt;z.pause()},isSeeking:function(){if(!m)throw nt;return z.isSeeking()},isDynamic:qt,getLowLatencyModeEnabled:function(){if(!m)throw nt;return z.getLowLatencyModeEnabled()},seek:function(se){if(!m)throw nt;if((0,X.PS)(se,"number"),isNaN(se))throw e.Z.BAD_ARGUMENT_ERROR;se<0&&(se=0);var Ue=z.getIsDynamic()?jt(se):se,it=en();!z.getIsDynamic()&&it.duration&&(Ue=Math.min(it.duration,Ue)),z.seek(Ue,!1,!1,!0)},seekToOriginalLive:function(){m&&qt()&&z.seekToOriginalLive()},setPlaybackRate:function(se){en().playbackRate=se},getPlaybackRate:function(){return en().playbackRate},setMute:function(se){(0,X.PS)(se,"boolean"),en().muted=se},isMuted:function(){return en().muted},setVolume:function(se){if(typeof se!="number"||isNaN(se)||se<0||se>1)throw e.Z.BAD_ARGUMENT_ERROR;en().volume=se},getVolume:function(){return en().volume},time:kt,duration:Ht,timeAsUTC:function(){if(!m)throw nt;return kt()<0?NaN:Ye(kt())},durationAsUTC:function(){if(!m)throw nt;return Ye(Ht())},getActiveStream:gt,getDVRWindowSize:function(){var se=Z&&Z.hasVideoTrack()?e.Z.VIDEO:e.Z.AUDIO,Ue=B.getCurrentDVRInfo(se);return Ue?Ue.manifestInfo.dvrWindowSize:0},getDVRSeekOffset:jt,getAvailableBaseUrls:function(){var se=me.getValue();return se?ae.getBaseUrls(se):[]},getAvailableLocations:function(){var se=me.getValue();if(!se)return[];var Ue=fe.getLocation(se),it=ie.getSynthesizedLocationElements(Ue);return Ue.concat(it)},getTargetLiveDelay:function(){if(!m)throw nt;return z.getOriginalLiveDelay()},convertToTimeCode:function(se){se=Math.max(se,0);var Ue=Math.floor(se/3600),it=Math.floor(se%3600/60),Rt=Math.floor(se%3600%60);return(Ue===0?"":Ue<10?"0"+Ue.toString()+":":Ue.toString()+":")+(it<10?"0"+it.toString():it.toString())+":"+(Rt<10?"0"+Rt.toString():Rt.toString())},formatUTC:function(se,Ue,it){var Rt=arguments.length>3&&arguments[3]!==void 0&&arguments[3],Lt=new Date(1e3*se),nn=Lt.toLocaleDateString(Ue),In=Lt.toLocaleTimeString(Ue,{hour12:it});return Rt?In+" "+nn:In},getVersion:ft,getDebug:function(){return xe},getBufferLength:function(se){var Ue=[e.Z.VIDEO,e.Z.AUDIO,e.Z.TEXT];if(se)return Ue.indexOf(se)!==-1?un().getCurrentBufferLevel(se)||NaN:(r.warn("getBufferLength requested for invalid type"),NaN);var it=Ue.map(function(Rt){return an(Rt).length>0?un().getCurrentBufferLevel(Rt):Number.MAX_VALUE}).reduce(function(Rt,Lt){return Math.min(Rt,Lt)});return it===Number.MAX_VALUE?NaN:it},getTTMLRenderingDiv:function(){return Oe?Oe.getTTMLRenderingDiv():null},getVideoElement:en,getSource:function(){if(!c)throw Dt;return c},updateSource:function(se){c=se,Z.load(c)},getCurrentLiveLatency:function(){if(!A)throw _e;return m?z.getCurrentLiveLatency():NaN},getTopBitrateInfoFor:function(se){if(!T)throw $e;return V.getTopBitrateInfoFor(se)},setAutoPlay:Kt,getAutoPlay:function(){return R},getDashMetrics:un,getQualityFor:function(se){if(!T)throw $e;if(se===e.Z.IMAGE){var Ue=gt();if(!Ue)return-1;var it=Ue.getThumbnailController();return it?it.getCurrentTrackIndex():-1}return V.getQualityFor(se)},setQualityFor:function(se,Ue){var it=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!T)throw $e;if(se===e.Z.IMAGE){var Rt=gt();if(!Rt)return;var Lt=Rt.getThumbnailController();Lt&&Lt.setTrackByIndex(Ue)}V.setPlaybackQuality(se,Z.getActiveStreamInfo(),Ue,{forceReplace:it})},updatePortalSize:function(){V.setElementSize(),V.setWindowResizeEventCalled(!0)},enableText:function(se){var Ue=Z.getActiveStreamInfo();return!(!Ue||!O)&&O.enableText(Ue.id,se)},enableForcedTextStreaming:function(se){return!(!Z.getActiveStreamInfo()||!O)&&O.enableForcedTextStreaming(se)},isTextEnabled:function(){var se=Z.getActiveStreamInfo();return!(!se||!O)&&O.isTextEnabled(se)},setTextTrack:function(se){if(!m)throw nt;var Ue=Z.getActiveStreamInfo();Ue&&O&&O.setTextTrack(Ue.id,se)},getBitrateInfoListFor:function(se){if(!T)throw $e;var Ue=gt();return Ue?Ue.getBitrateListFor(se):[]},getStreamsFromManifest:function(se){if(!T)throw $e;return fe.getStreamsInfo(se)},getTracksFor:an,getTracksForTypeFromManifest:function(se,Ue,it){if(!T)throw $e;return(it=it||fe.getStreamsInfo(Ue,1)[0])?fe.getAllMediaInfoForType(it,se,Ue):[]},getCurrentTrackFor:function(se){if(!T)throw $e;var Ue=Z.getActiveStreamInfo();return H.getCurrentTrackFor(se,Ue.id)},setInitialMediaSettingsFor:function(se,Ue){if(!A)throw _e;H.setInitialSettings(se,Ue)},getInitialMediaSettingsFor:function(se){if(!A)throw _e;return H.getInitialSettings(se)},setCurrentTrack:function(se){if(!T)throw $e;H.setTrack(se)},addABRCustomRule:function(se,Ue,it){re.addAbrCustomRule(se,Ue,it)},removeABRCustomRule:function(se){re.removeAbrCustomRule(se)},removeAllABRCustomRule:function(){re.removeAllAbrCustomRule()},getABRCustomRules:function(){return re.getAbrCustomRules()},getAverageThroughput:function(se){var Ue=V.getThroughputHistory(),it=z.getIsDynamic();return Ue?Ue.getAverageThroughput(se,it):0},retrieveManifest:function(se,Ue){var it=Zt(),Rt=this;Me.on(i.Z.INTERNAL_MANIFEST_LOADED,function Lt(nn){nn.error?Ue(null,nn.error):Ue(nn.manifest),Me.off(i.Z.INTERNAL_MANIFEST_LOADED,Lt,Rt),it.reset()},Rt),Ee.initialize(se),it.load(se)},addUTCTimingSource:function(se,Ue){re.addUTCTimingSource(se,Ue)},removeUTCTimingSource:function(se,Ue){re.removeUTCTimingSource(se,Ue)},clearDefaultUTCTimingSources:function(){re.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:rn,setXHRWithCredentialsForType:function(se,Ue){re.setXHRWithCredentialsForType(se,Ue)},getXHRWithCredentialsForType:function(se){return re.getXHRWithCredentialsForType(se)},getProtectionController:function(){return Ke()},attachProtectionController:function(se){q=se},setProtectionData:function(se){y=se,Z&&Z.setProtectionData(y)},registerLicenseRequestFilter:function(se){re.registerLicenseRequestFilter(se)},registerLicenseResponseFilter:function(se){re.registerLicenseResponseFilter(se)},unregisterLicenseRequestFilter:function(se){re.unregisterLicenseRequestFilter(se)},unregisterLicenseResponseFilter:function(se){re.unregisterLicenseResponseFilter(se)},registerCustomCapabilitiesFilter:function(se){re.registerCustomCapabilitiesFilter(se)},unregisterCustomCapabilitiesFilter:function(se){re.unregisterCustomCapabilitiesFilter(se)},setCustomInitialTrackSelectionFunction:function(se){re.setCustomInitialTrackSelectionFunction(se)},resetCustomInitialTrackSelectionFunction:function(){re.resetCustomInitialTrackSelectionFunction(null)},attachTTMLRenderingDiv:function(se){if(!Oe.getElement())throw Tt;Oe.setTTMLRenderingDiv(se)},attachVttRenderingDiv:function(se){if(!Oe.getElement())throw Tt;Oe.setVttRenderingDiv(se)},getCurrentTextTrackIndex:function(){var se=Z.getActiveStreamInfo();if(se&&O)return O.getCurrentTrackIdx(se.id)},provideThumbnail:function(se,Ue){if(typeof Ue=="function")if(se<0)Ue(null);else{var it=z.getIsDynamic()?jt(se):se,Rt=Z.getStreamForTime(it);if(Rt!==null){var Lt=Rt.getThumbnailController();if(Lt)return Lt.provide(it,Ue);Ue(null)}else Ue(null)}},getDashAdapter:function(){return fe},getOfflineController:function(){return yt()},triggerSteeringRequest:function(){if(ie)return ie.loadSteeringData()},getCurrentSteeringResponseData:function(){if(ie)return ie.getCurrentSteeringResponseData()},getSettings:function(){return ye.get()},updateSettings:function(se){ye.update(se)},resetSettings:function(){ye.reset()},reset:Ge,destroy:function(){Ge(),h.Z.deleteSingletonInstances(le)}},r=xe.getLogger(u),A=!1,m=!1,T=!1,R=!0,G=NaN,q=null,ue=null,y=null,fe=null,ct=null,i.Z.extend(n.Z),x=ls(le).getInstance(),re=(0,At.Z)(le).getInstance(),Oe=ps(le).getInstance(),Ee=ss(le).getInstance(),u}ra.__dashjs_factory_name="MediaPlayer";var bi=h.Z.getClassFactory(ra);bi.events=n.Z,bi.errors=te,h.Z.updateClassFactory(ra.__dashjs_factory_name,bi);const ru=bi},8825:(et,we,C)=>{function oe(g){return oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},oe(g)}function b(g,i){return b=Object.setPrototypeOf||function(h,_){return h.__proto__=_,h},b(g,i)}function e(g,i){return!i||oe(i)!=="object"&&typeof i!="function"?function(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}(g):i}function t(g){return t=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},t(g)}C.d(we,{Z:()=>S});const S=new(function(g){(function(l,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(d&&d.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),d&&b(l,d)})(n,g);var i,h,_=(i=n,h=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var l,d=t(i);if(h){var P=t(this).constructor;l=Reflect.construct(d,arguments,P)}else l=d.apply(this,arguments);return e(this,l)});function n(){var l;return function(d,P){if(!(d instanceof P))throw new TypeError("Cannot call a class as a function")}(this,n),(l=_.call(this)).AST_IN_FUTURE="astInFuture",l.BASE_URLS_UPDATED="baseUrlsUpdated",l.BUFFER_EMPTY="bufferStalled",l.BUFFER_LOADED="bufferLoaded",l.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",l.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",l.DYNAMIC_TO_STATIC="dynamicToStatic",l.ERROR="error",l.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",l.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",l.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",l.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",l.LOG="log",l.MANIFEST_LOADING_STARTED="manifestLoadingStarted",l.MANIFEST_LOADING_FINISHED="manifestLoadingFinished",l.MANIFEST_LOADED="manifestLoaded",l.METRICS_CHANGED="metricsChanged",l.METRIC_CHANGED="metricChanged",l.METRIC_ADDED="metricAdded",l.METRIC_UPDATED="metricUpdated",l.PERIOD_SWITCH_STARTED="periodSwitchStarted",l.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",l.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",l.QUALITY_CHANGE_RENDERED="qualityChangeRendered",l.TRACK_CHANGE_RENDERED="trackChangeRendered",l.STREAM_INITIALIZING="streamInitializing",l.STREAM_UPDATED="streamUpdated",l.STREAM_ACTIVATED="streamActivated",l.STREAM_DEACTIVATED="streamDeactivated",l.STREAM_INITIALIZED="streamInitialized",l.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",l.TEXT_TRACKS_ADDED="allTextTracksAdded",l.TEXT_TRACK_ADDED="textTrackAdded",l.THROUGHPUT_MEASUREMENT_STORED="throughputMeasurementStored",l.TTML_PARSED="ttmlParsed",l.TTML_TO_PARSE="ttmlToParse",l.CAPTION_RENDERED="captionRendered",l.CAPTION_CONTAINER_RESIZE="captionContainerResize",l.CAN_PLAY="canPlay",l.CAN_PLAY_THROUGH="canPlayThrough",l.PLAYBACK_ENDED="playbackEnded",l.PLAYBACK_ERROR="playbackError",l.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",l.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",l.PLAYBACK_LOADED_DATA="playbackLoadedData",l.PLAYBACK_PAUSED="playbackPaused",l.PLAYBACK_PLAYING="playbackPlaying",l.PLAYBACK_PROGRESS="playbackProgress",l.PLAYBACK_RATE_CHANGED="playbackRateChanged",l.PLAYBACK_SEEKED="playbackSeeked",l.PLAYBACK_SEEKING="playbackSeeking",l.PLAYBACK_STALLED="playbackStalled",l.PLAYBACK_STARTED="playbackStarted",l.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",l.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",l.PLAYBACK_WAITING="playbackWaiting",l.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",l.EVENT_MODE_ON_START="eventModeOnStart",l.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",l.CONFORMANCE_VIOLATION="conformanceViolation",l.REPRESENTATION_SWITCH="representationSwitch",l.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",l.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",l.INBAND_PRFT="inbandPrft",l}return n}(C(8342).Z))},3393:(et,we,C)=>{function oe(e,t){for(var S=0;S<t.length;S++){var g=t[S];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(e,g.key,g)}}C.d(we,{Z:()=>b});const b=new(function(){function e(){(function(g,i){if(!(g instanceof i))throw new TypeError("Cannot call a class as a function")})(this,e),this.init()}var t,S;return t=e,(S=[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.CONTENT_STEERING="contentSteering",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_L2A="abrL2A",this.ABR_STRATEGY_LoLP="abrLoLP",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA="abrFetchThroughputCalculationDownloadedData",this.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING="abrFetchThroughputCalculationMoofParsing",this.ABR_FETCH_THROUGHPUT_CALCULATION_AAST="abrFetchThroughputCalculationAAST",this.LIVE_CATCHUP_MODE_DEFAULT="liveCatchupModeDefault",this.LIVE_CATCHUP_MODE_LOLP="liveCatchupModeLoLP",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",this.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",this.TRACK_SELECTION_MODE_FIRST_TRACK="firstTrack",this.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",this.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY="highestEfficiency",this.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",this.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY="highestSelectionPriority",this.CMCD_MODE_QUERY="query",this.CMCD_MODE_HEADER="header",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer",this.DVB_REPORTING_URL="dvb:reportingUrl",this.DVB_PROBABILITY="dvb:probability",this.VIDEO_ELEMENT_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},this.FILE_LOADER_TYPES={FETCH:"fetch_loader",XHR:"xhr_loader"}}}])&&oe(t.prototype,S),e}())},3860:(et,we,C)=>{function oe(e,t){for(var S=0;S<t.length;S++){var g=t[S];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(e,g.key,g)}}C.d(we,{Z:()=>b});const b=new(function(){function e(){(function(g,i){if(!(g instanceof i))throw new TypeError("Cannot call a class as a function")})(this,e),this.init()}var t,S;return t=e,(S=[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors",this.HTTP_REQUEST_DVB_REPORTING_TYPE="DVBReporting"}}])&&oe(t.prototype,S),e}())},8080:(et,we,C)=>{C.d(we,{default:()=>v});var oe=function E(){(function(X,K){if(!(X instanceof K))throw new TypeError("Cannot call a class as a function")})(this,E),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};oe.SSL_CONNECTION_FAILED_PREFIX="SSL",oe.DNS_RESOLUTION_FAILED="C00",oe.HOST_UNREACHABLE="C01",oe.CONNECTION_REFUSED="C02",oe.CONNECTION_ERROR="C03",oe.CORRUPT_MEDIA_ISOBMFF="M00",oe.CORRUPT_MEDIA_OTHER="M01",oe.BASE_URL_CHANGED="F00",oe.BECAME_REPORTER="S00";const b=oe;var e=C(1180);function t(E){var X,K,he=(E=E||{}).eventBus,Ce=E.dashMetrics,De=E.metricsConstants,ve=E.events;function Le(Mt){var xt=new b;if(K){for(var mn in Mt)Mt.hasOwnProperty(mn)&&(xt[mn]=Mt[mn]);xt.mpdurl||(xt.mpdurl=K.originalUrl||K.url),xt.terror||(xt.terror=new Date),Ce.addDVBErrors(xt)}}function Ze(Mt){Mt.error||(K=Mt.manifest)}function Je(Mt){Le({errorcode:b.BASE_URL_CHANGED,servicelocation:Mt.entry})}function ht(){Le({errorcode:b.BECAME_REPORTER})}function st(Mt){var xt;Mt.metric===De.HTTP_REQUEST&&((xt=Mt.value).responsecode===0||xt.responsecode==null||xt.responsecode>=400||xt.responsecode<100||xt.responsecode>=600)&&Le({errorcode:xt.responsecode||b.CONNECTION_ERROR,url:xt.url,terror:xt.tresponse,servicelocation:xt._serviceLocation})}function wt(Mt){var xt;switch(Mt.error?Mt.error.code:0){case MediaError.MEDIA_ERR_NETWORK:xt=b.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:xt=b.CORRUPT_MEDIA_OTHER;break;default:return}Le({errorcode:xt})}return X={initialize:function(){he.on(ve.MANIFEST_UPDATED,Ze,X),he.on(ve.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,Je,X),he.on(ve.METRIC_ADDED,st,X),he.on(ve.METRIC_UPDATED,st,X),he.on(ve.PLAYBACK_ERROR,wt,X),he.on(e.Z.BECAME_REPORTING_PLAYER,ht,X)},reset:function(){he.off(ve.MANIFEST_UPDATED,Ze,X),he.off(ve.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,Je,X),he.off(ve.METRIC_ADDED,st,X),he.off(ve.METRIC_UPDATED,st,X),he.off(ve.PLAYBACK_ERROR,wt,X),he.off(e.Z.BECAME_REPORTING_PLAYER,ht,X)}}}t.__dashjs_factory_name="DVBErrorsTranslator";const S=dashjs.FactoryMaker.getSingletonFactory(t);var g=C(2295);function i(E){E=E||{};var X,K,he=!1,Ce=this.context,De=E.mediaElement;return X={initialize:function(ve){ve&&ve.length&&(ve.forEach(function(Le){var Ze=Le.starttime,Je=Ze+Le.duration;K.add(Ze,Je)}),he=!!ve[0]._useWallClockTime)},reset:function(){K.clear()},isEnabled:function(){var ve,Le=K.length;if(!Le)return!0;ve=he?new Date().getTime()/1e3:De.currentTime;for(var Ze=0;Ze<Le;Ze+=1){var Je=K.start(Ze),ht=K.end(Ze);if(Je<=ve&&ve<ht)return!0}return!1}},K=(0,g.Z)(Ce).create(),X}i.__dashjs_factory_name="RangeController";const h=dashjs.FactoryMaker.getClassFactory(i);function _(){return{serialise:function E(X){var K,he,Ce=[],De=[];for(K in X)if(X.hasOwnProperty(K)&&K.indexOf("_")!==0){if((he=X[K])==null&&(he=""),Array.isArray(he)){if(!he.length)continue;De=[],he.forEach(function(ve){var Le=Object.prototype.toString.call(ve).slice(8,-1)!=="Object";De.push(Le?ve:E(ve))}),he=De.map(encodeURIComponent).join(",")}else typeof he=="string"?he=encodeURIComponent(he):he instanceof Date?he=he.toISOString():typeof he=="number"&&(he=Math.round(he));Ce.push(K+"="+he)}return Ce.join("&")}}}_.__dashjs_factory_name="MetricSerialiser";const n=dashjs.FactoryMaker.getSingletonFactory(_);function l(){var E,X,K,he=window.crypto||window.msCrypto,Ce=Uint32Array,De=Math.pow(2,8*Ce.BYTES_PER_ELEMENT)-1;function ve(){he&&(E||(E=new Ce(10)),he.getRandomValues(E),X=0)}return K={random:function(Le,Ze){var Je;return Le||(Le=0),Ze||(Ze=1),he?(X===E.length&&ve(),Je=E[X]/De,X+=1):Je=Math.random(),Je*(Ze-Le)+Le}},ve(),K}l.__dashjs_factory_name="RNG";const d=dashjs.FactoryMaker.getSingletonFactory(l);var P=C(5717);function F(E){var X;E=E||{};var K,he,Ce,De,ve,Le,Ze,Je=this.context,ht=[],st=E.metricsConstants;function wt(){De=!1,ve=!1,Le=null,Ze=null}return X={report:function(Mt,xt){Array.isArray(xt)||(xt=[xt]),ve&&Ze.isEnabled()&&xt.forEach(function(mn){var pn=K.serialise(mn);Mt!==st.DVB_ERRORS&&(pn="metricname=".concat(Mt,"&").concat(pn)),function(hn,Mn,Dn){var vn=new XMLHttpRequest;vn.withCredentials=he.getXHRWithCredentialsForType(st.HTTP_REQUEST_DVB_REPORTING_TYPE);var kn=function(){var Zn=ht.indexOf(vn);Zn!==-1&&(ht.splice(Zn,1),!(vn.status>=200&&vn.status<300)&&Dn&&Dn())};ht.push(vn);try{vn.open("GET",hn),vn.onloadend=kn,vn.onerror=kn,vn.send()}catch{vn.onerror()}}(pn="".concat(Le,"?").concat(pn),0,function(){ve=!1})})},initialize:function(Mt,xt){var mn;if(Ze=xt,!(Le=Mt.dvb_reportingUrl))throw new Error("required parameter missing (dvb:reportingUrl)");De||((mn=Mt.dvb_probability)&&(mn===1e3||mn/1e3>=Ce.random())&&(ve=!0),De=!0)},reset:function(){wt()}},K=n(Je).getInstance(),Ce=d(Je).getInstance(),he=(0,P.Z)(Je).getInstance(),wt(),X}F.__dashjs_factory_name="DVBReporting";const j=dashjs.FactoryMaker.getClassFactory(F);function U(E){E=E||{};var X,K={"urn:dvb:dash:reporting:2014":j},he=this.context,Ce=E.debug?E.debug.getLogger(X):{},De=E.metricsConstants,ve=E.mediaPlayerModel||{};return{create:function(Le,Ze){var Je;try{(Je=K[Le.schemeIdUri](he).create({metricsConstants:De,mediaPlayerModel:ve})).initialize(Le,Ze)}catch(ht){Je=null,Ce.error("ReportingFactory: could not create Reporting with schemeIdUri ".concat(Le.schemeIdUri," (").concat(ht.message,")"))}return Je},register:function(Le,Ze){K[Le]=Ze},unregister:function(Le){delete K[Le]}}}U.__dashjs_factory_name="ReportingFactory";const W=dashjs.FactoryMaker.getSingletonFactory(U);function D(E){var X=[],K=W(this.context).getInstance(E);return{initialize:function(he,Ce){he.some(function(De){var ve=K.create(De,Ce);if(ve)return X.push(ve),!0})},reset:function(){X.forEach(function(he){return he.reset()}),X=[]},report:function(he,Ce){X.forEach(function(De){return De.report(he,Ce)})}}}D.__dashjs_factory_name="ReportingController";const I=dashjs.FactoryMaker.getClassFactory(D);function k(){return{reconstructFullMetricName:function(E,X,K){var he=E;return X&&(he+="("+X,K&&K.length&&(he+=","+K),he+=")"),he},validateN:function(E){if(!E)throw new Error("missing n");if(isNaN(E))throw new Error("n is NaN");if(E<0)throw new Error("n must be positive");return E}}}k.__dashjs_factory_name="HandlerHelpers";const $=dashjs.FactoryMaker.getSingletonFactory(k);function J(E){var X,K,he,Ce,De;E=E||{};var ve=this.context,Le=$(ve).getInstance(),Ze=[],Je=E.metricsConstants;function ht(){var st=function(){try{return Object.keys(Ze).map(function(wt){return Ze[wt]}).reduce(function(wt,Mt){return wt.level<Mt.level?wt:Mt})}catch{return}}();st&&De!==st.t&&(De=st.t,X.report(he,st))}return{initialize:function(st,wt,Mt){wt&&(K=Le.validateN(Mt),X=wt,he=Le.reconstructFullMetricName(st,Mt),Ce=setInterval(ht,K))},reset:function(){clearInterval(Ce),Ce=null,K=0,X=null,De=null},handleNewMetric:function(st,wt,Mt){st===Je.BUFFER_LEVEL&&(Ze[Mt]=wt)}}}J.__dashjs_factory_name="BufferLevelHandler";const Ne=dashjs.FactoryMaker.getClassFactory(J),Be=dashjs.FactoryMaker.getClassFactory(function(E){var X,K=(E=E||{}).eventBus,he=E.metricsConstants;function Ce(){K.off(e.Z.METRICS_INITIALISATION_COMPLETE,Ce,this),K.trigger(e.Z.BECAME_REPORTING_PLAYER)}return{initialize:function(De,ve){ve&&(X=ve,K.on(e.Z.METRICS_INITIALISATION_COMPLETE,Ce,this))},reset:function(){X=null},handleNewMetric:function(De,ve){De===he.DVB_ERRORS&&X&&X.report(De,ve)}}});function te(E){var X,K,he,Ce,De;E=E||{};var ve=[],Le=$(this.context).getInstance(),Ze=E.metricsConstants;function Je(){var ht=ve;ht.length&&X&&X.report(Ce,ht),ve=[]}return{initialize:function(ht,st,wt,Mt){st&&(K=Le.validateN(wt),X=st,Mt&&Mt.length&&(he=Mt),Ce=Le.reconstructFullMetricName(ht,wt,Mt),De=setInterval(Je,K))},reset:function(){clearInterval(De),De=null,K=null,he=null,ve=[],X=null},handleNewMetric:function(ht,st){ht===Ze.HTTP_REQUEST&&(he&&he!==st.type||ve.push(st))}}}te.__dashjs_factory_name="HttpListHandler";const ot=dashjs.FactoryMaker.getClassFactory(te);function Ae(){var E,X;return{initialize:function(K,he){E=K,X=he},reset:function(){X=null,E=void 0},handleNewMetric:function(K,he){K===E&&X&&X.report(E,he)}}}Ae.__dashjs_factory_name="GenericMetricHandler";const ke=dashjs.FactoryMaker.getClassFactory(Ae);function pe(E){var X,K=(E=E||{}).debug?E.debug.getLogger(X):{},he=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,Ce=this.context,De={BufferLevel:Ne,DVBErrors:Be,HttpList:ot,PlayList:ke,RepSwitchList:ke,TcpList:ke};return{create:function(ve,Le){var Ze,Je=ve.match(he);if(Je){try{(Ze=De[Je[1]](Ce).create({eventBus:E.eventBus,metricsConstants:E.metricsConstants})).initialize(Je[1],Le,Je[3],Je[5])}catch(ht){Ze=null,K.error("MetricsHandlerFactory: Could not create handler for type ".concat(Je[1]," with args ").concat(Je[3],", ").concat(Je[5]," (").concat(ht.message,")"))}return Ze}},register:function(ve,Le){De[ve]=Le},unregister:function(ve){delete De[ve]}}}pe.__dashjs_factory_name="MetricsHandlerFactory";const be=dashjs.FactoryMaker.getSingletonFactory(pe);function He(E){E=E||{};var X,K=[],he=this.context,Ce=E.eventBus,De=E.events,ve=be(he).getInstance({debug:E.debug,eventBus:E.eventBus,metricsConstants:E.metricsConstants});function Le(Ze){K.forEach(function(Je){Je.handleNewMetric(Ze.metric,Ze.value,Ze.mediaType)})}return X={initialize:function(Ze,Je){Ze.split(",").forEach(function(ht,st,wt){var Mt;if(ht.indexOf("(")!==-1&&ht.indexOf(")")===-1){var xt=wt[st+1];xt&&xt.indexOf("(")===-1&&xt.indexOf(")")!==-1&&(ht+=","+xt,delete wt[st+1])}(Mt=ve.create(ht,Je))&&K.push(Mt)}),Ce.on(De.METRIC_ADDED,Le,X),Ce.on(De.METRIC_UPDATED,Le,X)},reset:function(){Ce.off(De.METRIC_ADDED,Le,X),Ce.off(De.METRIC_UPDATED,Le,X),K.forEach(function(Ze){return Ze.reset()}),K=[]}}}He.__dashjs_factory_name="MetricsHandlersController";const ut=dashjs.FactoryMaker.getClassFactory(He);function tt(E){var X,K,he;E=E||{};var Ce=this.context;function De(){X&&X.reset(),K&&K.reset(),he&&he.reset()}return{initialize:function(ve){try{(he=h(Ce).create({mediaElement:E.mediaElement})).initialize(ve.Range),(K=I(Ce).create({debug:E.debug,metricsConstants:E.metricsConstants,mediaPlayerModel:E.mediaPlayerModel})).initialize(ve.Reporting,he),(X=ut(Ce).create({debug:E.debug,eventBus:E.eventBus,metricsConstants:E.metricsConstants,events:E.events})).initialize(ve.metrics,K)}catch(Le){throw De(),Le}},reset:De}}tt.__dashjs_factory_name="MetricsController";const Se=dashjs.FactoryMaker.getClassFactory(tt),We=function E(){(function(X,K){if(!(X instanceof K))throw new TypeError("Cannot call a class as a function")})(this,E),this.metrics="",this.Range=[],this.Reporting=[]},lt=function E(){(function(X,K){if(!(X instanceof K))throw new TypeError("Cannot call a class as a function")})(this,E),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1},Fe=function E(){(function(X,K){if(!(X instanceof K))throw new TypeError("Cannot call a class as a function")})(this,E),this.schemeIdUri="",this.value="",this.dvb_reportingUrl="",this.dvb_probability=1e3};function Xe(E){var X=(E=E||{}).adapter,K=E.constants;return{getMetrics:function(he){var Ce=[];return he&&he.Metrics_asArray&&he.Metrics_asArray.forEach(function(De){var ve=new We,Le=X.getIsDynamic(he);De.hasOwnProperty("metrics")&&(ve.metrics=De.metrics,De.Range_asArray&&De.Range_asArray.forEach(function(Ze){var Je=new lt;Je.starttime=function(ht,st,wt){var Mt,xt,mn=0;return st?mn=X.getAvailabilityStartTime(ht)/1e3:(Mt=X.getRegularPeriods(ht)).length&&(mn=Mt[0].start),xt=mn,wt&&wt.hasOwnProperty(K.START_TIME)&&(xt+=wt.starttime),xt}(he,Le,Ze),Ze.hasOwnProperty("duration")?Je.duration=Ze.duration:Je.duration=X.getDuration(he),Je._useWallClockTime=Le,ve.Range.push(Je)}),De.Reporting_asArray&&(De.Reporting_asArray.forEach(function(Ze){var Je=new Fe;Ze.hasOwnProperty(K.SCHEME_ID_URI)&&(Je.schemeIdUri=Ze.schemeIdUri,Ze.hasOwnProperty("value")&&(Je.value=Ze.value),Ze.hasOwnProperty(K.DVB_REPORTING_URL)&&(Je.dvb_reportingUrl=Ze[K.DVB_REPORTING_URL]),Ze.hasOwnProperty(K.DVB_PROBABILITY)&&(Je.dvb_probability=Ze[K.DVB_PROBABILITY]),ve.Reporting.push(Je))}),Ce.push(ve)))}),Ce}}}Xe.__dashjs_factory_name="ManifestParsing";const ce=dashjs.FactoryMaker.getSingletonFactory(Xe);function de(E){var X;E=E||{};var K={},he=this.context,Ce=E.eventBus,De=E.events;function ve(Ze){if(!Ze.error){var Je=Object.keys(K);ce(he).getInstance({adapter:E.adapter,constants:E.constants}).getMetrics(Ze.manifest).forEach(function(ht){var st=JSON.stringify(ht);if(K.hasOwnProperty(st))Je.splice(st,1);else try{var wt=Se(he).create(E);wt.initialize(ht),K[st]=wt}catch{}}),Je.forEach(function(ht){K[ht].reset(),delete K[ht]}),Ce.trigger(e.Z.METRICS_INITIALISATION_COMPLETE)}}function Le(){Object.keys(K).forEach(function(Ze){K[Ze].reset()}),K={}}return X={reset:function(){Ce.off(De.MANIFEST_UPDATED,ve,X),Ce.off(De.STREAM_TEARDOWN_COMPLETE,Le,X)}},Ce.on(De.MANIFEST_UPDATED,ve,X),Ce.on(De.STREAM_TEARDOWN_COMPLETE,Le,X),X}de.__dashjs_factory_name="MetricsCollectionController";const je=dashjs.FactoryMaker.getClassFactory(de);function f(){var E=this.context;return{createMetricsReporting:function(X){return S(E).getInstance({eventBus:X.eventBus,dashMetrics:X.dashMetrics,metricsConstants:X.metricsConstants,events:X.events}).initialize(),je(E).create(X)},getReportingFactory:function(){return W(E).getInstance()},getMetricsHandlerFactory:function(){return be(E).getInstance()}}}f.__dashjs_factory_name="MetricsReporting";var o=dashjs.FactoryMaker.getClassFactory(f);o.events=e.Z,dashjs.FactoryMaker.updateClassFactory(f.__dashjs_factory_name,o);const v=o},1180:(et,we,C)=>{function oe(g){return oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},oe(g)}function b(g,i){return b=Object.setPrototypeOf||function(h,_){return h.__proto__=_,h},b(g,i)}function e(g,i){return!i||oe(i)!=="object"&&typeof i!="function"?function(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}(g):i}function t(g){return t=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},t(g)}C.d(we,{Z:()=>S});const S=new(function(g){(function(l,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(d&&d.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),d&&b(l,d)})(n,g);var i,h,_=(i=n,h=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var l,d=t(i);if(h){var P=t(this).constructor;l=Reflect.construct(d,arguments,P)}else l=d.apply(this,arguments);return e(this,l)});function n(){var l;return function(d,P){if(!(d instanceof P))throw new TypeError("Cannot call a class as a function")}(this,n),(l=_.call(this)).METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",l.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",l.CMCD_DATA_GENERATED="cmcdDataGenerated",l}return n}(C(8342).Z))},5717:(et,we,C)=>{C.d(we,{Z:()=>h});var oe=C(2610),b=C(5448),e=C(1264),t=C(3106),S=C(1767),g=C(3393);function i(){var _,n,l,d,P,F,j,U,W=this.context,D=(0,e.Z)(W).getInstance();function I(){d=[],P=[],F=[],U=[],j=null,n=[]}function k(Be,te){var ot=-1;Be.some(function(Ae,ke){if(Ae===te)return ot=ke,!0}),ot<0||Be.splice(ot,1)}function $(Be){var te;for(te=0;te<U.length;te++)if(U[te].rulename===Be)return te;return-1}function J(Be,te){Ne(Be,te);var ot=new oe.Z;ot.schemeIdUri=Be,ot.value=te,n.push(ot)}function Ne(Be,te){(0,t.PS)(Be,"string"),(0,t.PS)(te,"string"),n.forEach(function(ot,Ae){ot.schemeIdUri===Be&&ot.value===te&&n.splice(Ae,1)})}return _={getCustomInitialTrackSelectionFunction:function(){return j},setCustomInitialTrackSelectionFunction:function(Be){j=Be},resetCustomInitialTrackSelectionFunction:function(){j=null},getLicenseResponseFilters:function(){return P},getLicenseRequestFilters:function(){return d},getCustomCapabilitiesFilters:function(){return F},registerCustomCapabilitiesFilter:function(Be){F.push(Be)},registerLicenseResponseFilter:function(Be){P.push(Be)},registerLicenseRequestFilter:function(Be){d.push(Be)},unregisterCustomCapabilitiesFilter:function(Be){k(F,Be)},unregisterLicenseResponseFilter:function(Be){k(P,Be)},unregisterLicenseRequestFilter:function(Be){k(d,Be)},addAbrCustomRule:function(Be,te,ot){if(typeof Be!="string"||Be!==S.Z.ABANDON_FRAGMENT_RULES&&Be!==S.Z.QUALITY_SWITCH_RULES||typeof te!="string")throw g.Z.BAD_ARGUMENT_ERROR;var Ae=$(te);Ae===-1?U.push({type:Be,rulename:te,rule:ot}):(U[Ae].type=Be,U[Ae].rule=ot)},removeAllAbrCustomRule:function(){U=[]},removeAbrCustomRule:function(Be){if(Be){var te=$(Be);te!==-1&&U.splice(te,1)}else U=[]},getAbrCustomRules:function(){return U},addUTCTimingSource:J,removeUTCTimingSource:Ne,getUTCTimingSources:function(){return n},clearDefaultUTCTimingSources:function(){n=[]},restoreDefaultUTCTimingSources:function(){var Be=D.get().streaming.utcSynchronization.defaultTimingSource;J(Be.scheme,Be.value)},setXHRWithCredentialsForType:function Be(te,ot){te?l[te]=!!ot:Object.keys(l).forEach(function(Ae){Be(Ae,ot)})},getXHRWithCredentialsForType:function(Be){var te=l[Be];return te===void 0?l.default:te},setConfig:function(){},reset:function(){I()}},l={default:!1},I(),_}i.__dashjs_factory_name="CustomParametersModel";const h=b.Z.getSingletonFactory(i)},9032:(et,we,C)=>{C.d(we,{Z:()=>t});var oe=C(5448),b=C(7473);function e(S){var g=(S=S||{}).requestModifier;function i(h){var _=new Date,n=h.request,l=new XMLHttpRequest;if(l.open(h.method,h.url,!0),n.responseType&&(l.responseType=n.responseType),n.range&&l.setRequestHeader("Range","bytes="+n.range),n.requestStartDate||(n.requestStartDate=_),g&&g.modifyRequestHeader&&(l=g.modifyRequestHeader(l,{url:h.url})),h.headers)for(var d in h.headers){var P=h.headers[d];P&&l.setRequestHeader(d,P)}l.withCredentials=h.withCredentials,l.onload=h.onload,l.onloadend=h.onend,l.onerror=h.onerror,l.onprogress=h.progress,l.onabort=h.onabort,l.ontimeout=h.ontimeout,l.timeout=h.timeout,l.send(),h.response=l}return{load:function(h){g&&g.modifyRequest?(0,b.k)(h,g).then(function(){return i(h)}):i(h)},abort:function(h){var _=h.response;_.onloadend=_.onerror=_.onprogress=void 0,_.abort()}}}e.__dashjs_factory_name="XHRLoader";const t=oe.Z.getClassFactory(e)},1737:(et,we,C)=>{function oe(vt,mt){for(var pt=0;pt<mt.length;pt++){var qe=mt[pt];qe.enumerable=qe.enumerable||!1,qe.configurable=!0,"value"in qe&&(qe.writable=!0),Object.defineProperty(vt,qe.key,qe)}}C.d(we,{default:()=>wr});var b={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]};const e=function(){function vt(){(function(qe,at){if(!(qe instanceof at))throw new TypeError("Cannot call a class as a function")})(this,vt)}var mt,pt;return mt=vt,pt=[{key:"findCencContentProtection",value:function(qe){for(var at=null,ze=0;ze<qe.length;++ze){var rt=qe[ze];rt.schemeIdUri.toLowerCase()!=="urn:mpeg:dash:mp4protection:2011"||rt.value.toLowerCase()!=="cenc"&&rt.value.toLowerCase()!=="cbcs"||(at=rt)}return at}},{key:"getPSSHData",value:function(qe){var at=8,ze=new DataView(qe),rt=ze.getUint8(at);return at+=20,rt>0&&(at+=4+16*ze.getUint32(at)),at+=4,qe.slice(at)}},{key:"getPSSHForKeySystem",value:function(qe,at){var ze=vt.parsePSSHList(at);return qe&&ze.hasOwnProperty(qe.uuid.toLowerCase())?ze[qe.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(qe,at){return"pssh"in qe?(qe.pssh.__text=qe.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),at.decodeArray(qe.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(qe){if(qe==null)return[];for(var at=new DataView(qe.buffer||qe),ze={},rt=0;;){var It,Nt,Ut=void 0,Yt=rt;if(rt>=at.buffer.byteLength)break;if(It=rt+at.getUint32(rt),rt+=4,at.getUint32(rt)===1886614376)if(rt+=4,(Nt=at.getUint8(rt))===0||Nt===1){rt++,rt+=3,Ut="";var Ot=void 0,dt=void 0;for(Ot=0;Ot<4;Ot++)Ut+=(dt=at.getUint8(rt+Ot).toString(16)).length===1?"0"+dt:dt;for(rt+=4,Ut+="-",Ot=0;Ot<2;Ot++)Ut+=(dt=at.getUint8(rt+Ot).toString(16)).length===1?"0"+dt:dt;for(rt+=2,Ut+="-",Ot=0;Ot<2;Ot++)Ut+=(dt=at.getUint8(rt+Ot).toString(16)).length===1?"0"+dt:dt;for(rt+=2,Ut+="-",Ot=0;Ot<2;Ot++)Ut+=(dt=at.getUint8(rt+Ot).toString(16)).length===1?"0"+dt:dt;for(rt+=2,Ut+="-",Ot=0;Ot<6;Ot++)Ut+=(dt=at.getUint8(rt+Ot).toString(16)).length===1?"0"+dt:dt;rt+=6,rt+=4,ze[Ut=Ut.toLowerCase()]=at.buffer.slice(Yt,It),rt=It}else rt=It;else rt=It}return ze}},{key:"getLicenseServerUrlFromMediaInfo",value:function(qe,at){try{if(!qe||qe.length===0)return null;for(var ze=0,rt=null;ze<qe.length&&!rt;){var It=qe[ze];if(It&&It.contentProtection&&It.contentProtection.length>0){var Nt=It.contentProtection.filter(function(Xt){return Xt.schemeIdUri&&Xt.schemeIdUri===at});if(Nt&&Nt.length>0)for(var Ut=0;Ut<Nt.length&&!rt;){for(var Yt=Nt[Ut],Ot=0;Ot<b.attributes.length&&!rt;){for(var dt=0,Ft=b.attributes[Ot];dt<b.prefixes.length&&!rt;){var Pt=b.prefixes[dt];Yt[Ft]&&Yt[Ft].__prefix&&Yt[Ft].__prefix===Pt&&Yt[Ft].__text&&(rt=Yt[Ft].__text),dt+=1}Ot+=1}Ut+=1}}ze+=1}return rt}catch{return null}}}],pt&&oe(mt,pt),vt}(),t=function vt(mt,pt){(function(qe,at){if(!(qe instanceof at))throw new TypeError("Cannot call a class as a function")})(this,vt),this.contentType=mt,this.robustness=pt},S=function vt(mt,pt,qe,at,ze){(function(rt,It){if(!(rt instanceof It))throw new TypeError("Cannot call a class as a function")})(this,vt),this.initDataTypes=["cenc"],mt&&mt.length&&(this.audioCapabilities=mt),pt&&pt.length&&(this.videoCapabilities=pt),this.distinctiveIdentifier=qe,this.persistentState=at,this.sessionTypes=ze};function g(vt){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(mt){return typeof mt}:function(mt){return mt&&typeof Symbol=="function"&&mt.constructor===Symbol&&mt!==Symbol.prototype?"symbol":typeof mt},g(vt)}function i(vt,mt){return i=Object.setPrototypeOf||function(pt,qe){return pt.__proto__=qe,pt},i(vt,mt)}function h(vt,mt){return!mt||g(mt)!=="object"&&typeof mt!="function"?function(pt){if(pt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return pt}(vt):mt}function _(vt){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(mt){return mt.__proto__||Object.getPrototypeOf(mt)},_(vt)}const n=new(function(vt){(function(ze,rt){if(typeof rt!="function"&&rt!==null)throw new TypeError("Super expression must either be null or a function");ze.prototype=Object.create(rt&&rt.prototype,{constructor:{value:ze,writable:!0,configurable:!0}}),rt&&i(ze,rt)})(at,vt);var mt,pt,qe=(mt=at,pt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var ze,rt=_(mt);if(pt){var It=_(this).constructor;ze=Reflect.construct(rt,arguments,It)}else ze=rt.apply(this,arguments);return h(this,ze)});function at(){var ze;return function(rt,It){if(!(rt instanceof It))throw new TypeError("Cannot call a class as a function")}(this,at),(ze=qe.call(this)).MEDIA_KEYERR_CODE=100,ze.MEDIA_KEYERR_UNKNOWN_CODE=101,ze.MEDIA_KEYERR_CLIENT_CODE=102,ze.MEDIA_KEYERR_SERVICE_CODE=103,ze.MEDIA_KEYERR_OUTPUT_CODE=104,ze.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,ze.MEDIA_KEYERR_DOMAIN_CODE=106,ze.MEDIA_KEY_MESSAGE_ERROR_CODE=107,ze.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,ze.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,ze.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,ze.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,ze.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,ze.KEY_SESSION_CREATED_ERROR_CODE=113,ze.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,ze.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",ze.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",ze.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",ze.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",ze.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",ze.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",ze.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",ze.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",ze.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",ze.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",ze.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",ze.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",ze.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",ze.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --",ze}return at}(C(2230).Z));var l=C(5459);const d=function vt(mt,pt,qe,at,ze,rt,It,Nt){(function(Ut,Yt){if(!(Ut instanceof Yt))throw new TypeError("Cannot call a class as a function")})(this,vt),this.url=mt,this.method=pt,this.responseType=qe,this.headers=at,this.withCredentials=ze,this.messageType=rt,this.sessionId=It,this.data=Nt},P=function vt(mt,pt,qe){(function(at,ze){if(!(at instanceof ze))throw new TypeError("Cannot call a class as a function")})(this,vt),this.url=mt,this.headers=pt,this.data=qe};var F=C(7855),j=C(703),U=C(3393),W=C(5448);function D(vt){return D=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(mt){return typeof mt}:function(mt){return mt&&typeof Symbol=="function"&&mt.constructor===Symbol&&mt!==Symbol.prototype?"symbol":typeof mt},D(vt)}function I(vt){var mt,pt,qe,at,ze,rt,It,Nt,Ut,Yt,Ot,dt=(vt=vt||{}).protectionKeyController,Ft=vt.protectionModel,Pt=vt.eventBus,Xt=vt.events,on=vt.debug,En=vt.BASE64,Wt=vt.constants,Et=[],_t=vt.cmcdModel,Ct=vt.settings,Qt=vt.customParametersModel;function $t(){if(!(Pt&&Pt.hasOwnProperty("on")&&dt&&dt.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function gn(At,zt){Nt||Ut?Nt&&yn():function(sn,Ln){if(!Ut){Ut=!0;var On,Un=[];sn=sn.sort(function(xn,An){return(ze&&ze[xn.ks.systemString]&&ze[xn.ks.systemString].priority>=0?ze[xn.ks.systemString].priority:sn.length)-(ze&&ze[An.ks.systemString]&&ze[An.ks.systemString].priority>=0?ze[An.ks.systemString].priority:sn.length)});for(var Tn=0;Tn<sn.length;Tn++){var Wn=Nr(sn[Tn]);Un.push({ks:sn[Tn].ks,configs:[Wn],protData:sn[Tn].protData})}Ft.requestKeySystemAccess(Un).then(function(xn){var An=(On=xn.data).mksa&&On.mksa.selectedSystemString?On.mksa.selectedSystemString:On.keySystem.systemString;return pt.info("DRM: KeySystem Access Granted for system string ("+An+")!  Selecting key system..."),Ft.selectKeySystem(On)}).then(function(xn){if(Nt=xn,Ut=!1,Ft){Pt.trigger(Xt.KEY_SYSTEM_SELECTED,{data:On});var An=Fn(Nt);An&&An.serverCertificate&&An.serverCertificate.length>0&&Ft.setServerCertificate(En.decodeArray(An.serverCertificate).buffer),yn()}}).catch(function(xn){Nt=null,Ut=!1,Ln||Pt.trigger(Xt.KEY_SYSTEM_SELECTED,{data:null,error:new l.Z(n.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,n.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+xn.error)})})}}(At,zt)}function yn(){for(var At,zt=0;zt<qe.length;zt++)for(At=0;At<qe[zt].length;At++)if(Nt===qe[zt][At].ks){jn(qe[zt][At]);break}qe=[]}function jn(At){if(dt.isClearKey(Nt)&&At.protData&&At.protData.hasOwnProperty("clearkeys")&&Object.keys(At.protData.clearkeys).length!==0){var zt={kids:Object.keys(At.protData.clearkeys)};At.initData=new TextEncoder().encode(JSON.stringify(zt))}At.sessionId?Bn(At):At.initData!==null&&Rn(At)}function Bn(At){$t(),Ft.loadKeySession(At)}function Rn(At){var zt=e.getPSSHForKeySystem(Nt,At?At.initData:null);if(zt){if(function(sn){if(!sn)return!1;try{for(var Ln=Ft.getSessions(),On=0;On<Ln.length;On++)if(Ln[On].getKeyId()===sn)return!0;return!1}catch{return!1}}(At.keyId)||Pn(zt))return;try{At.initData=zt,Ft.createKeySession(At)}catch(sn){Pt.trigger(Xt.KEY_SESSION_CREATED,{data:null,error:new l.Z(n.KEY_SESSION_CREATED_ERROR_CODE,n.KEY_SESSION_CREATED_ERROR_MESSAGE+sn.message)})}}else At&&At.initData?Ft.createKeySession(At):Pt.trigger(Xt.KEY_SESSION_CREATED,{data:null,error:new l.Z(n.KEY_SESSION_CREATED_ERROR_CODE,n.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(Nt?Nt.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function Fn(At){if(At){var zt=At.systemString;if(ze)return zt in ze?ze[zt]:null}return null}function Pn(At){if(!At)return!1;try{for(var zt=Ft.getAllInitData(),sn=0;sn<zt.length;sn++)if(dt.initDataEquals(At,zt[sn]))return pt.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch{return!1}}function zn(At){$t(),At?(Ft.setMediaElement(At),Pt.on(Xt.NEED_KEY,Yr,mt)):At===null&&(Ft.setMediaElement(At),Pt.off(Xt.NEED_KEY,Yr,mt))}function Nr(At){var zt=At.protData,sn=[],Ln=[],On=zt&&zt.audioRobustness&&zt.audioRobustness.length>0?zt.audioRobustness:It,Un=zt&&zt.videoRobustness&&zt.videoRobustness.length>0?zt.videoRobustness:It,Tn=At.sessionType,Wn=zt&&zt.distinctiveIdentifier?zt.distinctiveIdentifier:"optional",xn=zt&&zt.persistentState?zt.persistentState:Tn==="temporary"?"optional":"required";return at.forEach(function(An){An.type===Wt.AUDIO?sn.push(new t(An.codec,On)):An.type===Wt.VIDEO&&Ln.push(new t(An.codec,Un))}),new S(sn,Ln,Wn,xn,[Tn])}function Er(At){At.error?Pt.trigger(Xt.KEY_STATUSES_CHANGED,{data:null,error:At.error}):pt.debug("DRM: key status = "+At.status)}function ar(At){pt.debug("DRM: onKeyMessage");var zt=At.data;Pt.trigger(Xt.KEY_MESSAGE,{data:zt});var sn=zt.messageType?zt.messageType:"license-request",Ln=zt.message,On=zt.sessionToken,Un=Fn(Nt),Tn=dt.getLicenseServerModelInstance(Nt,Un,sn),Wn={sessionToken:On,messageType:sn};if(Ln&&Ln.byteLength!==0){if(!Tn)return pt.debug("DRM: License server request not required for this message (type = "+At.data.messageType+").  Session ID = "+On.getSessionId()),void Jn(Wn);if(dt.isClearKey(Nt)){var xn=dt.processClearKeyLicenseRequest(Nt,Un,Ln);if(xn&&xn.keyPairs&&xn.keyPairs.length>0)return pt.debug("DRM: ClearKey license request handled by application!"),Jn(Wn),void Ft.updateKeySession(On,xn)}(function(An,sr,Qn){var fr=An.sessionToken,rr=An.messageType?An.messageType:"license-request",vr={sessionToken:fr,messageType:rr},dr=Nt?Nt.systemString:null,ni=function(wn,_r,Tr,Sr,Ci){var ur=null,li=Sr.message;if(wn&&wn.serverURL){var cr=wn.serverURL;typeof cr=="string"&&cr!==""?ur=cr:D(cr)==="object"&&cr.hasOwnProperty(_r)&&(ur=cr[_r])}else if(wn&&wn.laURL&&wn.laURL!=="")ur=wn.laURL;else if(!(ur=e.getLicenseServerUrlFromMediaInfo(at,Nt.schemeIdURI))&&!dt.isClearKey(Nt)){var Kr=e.getPSSHData(Tr.initData);(ur=Nt.getLicenseServerURLFromInitData(Kr))||(ur=Sr.laURL)}return ur=Ci.getServerURLFromMessage(ur,li,_r)}(Qn,rr,fr,An,sr);if(ni){var Cr={},jr=!1;Qn&&Br(Cr,Qn.httpRequestHeaders);var ri=An.message;Br(Cr,Nt.getRequestHeadersFromMessage(ri)),Object.keys(Cr).forEach(function(wn){wn.toLowerCase()==="authorization"&&(jr=!0)}),Qn&&typeof Qn.withCredentials=="boolean"&&(jr=Qn.withCredentials);var ii=function(wn){if(Ft)if(wn.status>=200&&wn.status<=299){var _r=j.Z.parseHttpHeaders(wn.getAllResponseHeaders?wn.getAllResponseHeaders():null),Tr=new P(wn.responseURL,_r,wn.response);qr(Qt.getLicenseResponseFilters(),Tr).then(function(){var Sr=sr.getLicenseMessage(Tr.data,dr,rr);Sr!==null?(Jn(vr),Ft.updateKeySession(fr,Sr)):Gr(wn,vr,dr,rr,sr)})}else Gr(wn,vr,dr,rr,sr)},ai=function(wn){Jn(vr,new l.Z(n.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,n.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+dr+' update, XHR aborted. status is "'+wn.statusText+'" ('+wn.status+"), readyState is "+wn.readyState))},Ri=function(wn){Jn(vr,new l.Z(n.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,n.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+dr+' update, XHR error. status is "'+wn.statusText+'" ('+wn.status+"), readyState is "+wn.readyState))},Hr=Nt.getLicenseRequestFromMessage(ri),oi=sr.getHTTPMethod(rr),Vr=sr.getResponseType(dr,rr),wi=Qn&&!isNaN(Qn.httpTimeout)?Qn.httpTimeout:8e3,si=fr.getSessionId()||null,ui=new d(ni,oi,Vr,Cr,jr,rr,si,Hr),Ni=isNaN(Ct.get().streaming.retryAttempts[F.w.LICENSE])?3:Ct.get().streaming.retryAttempts[F.w.LICENSE];qr(Qt.getLicenseRequestFilters(),ui).then(function(){ei(ui,Ni,wi,ii,ai,Ri)})}else Jn(vr,new l.Z(n.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,n.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))})(zt,Tn,Un)}else Jn(Wn,new l.Z(n.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,n.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function Jn(At,zt){Pt.trigger(Xt.LICENSE_REQUEST_COMPLETE,{data:At,error:zt})}function ei(At,zt,sn,Ln,On,Un){var Tn=new XMLHttpRequest;if(Ct.get().streaming.cmcd&&Ct.get().streaming.cmcd.enabled&&Ct.get().streaming.cmcd.mode===U.Z.CMCD_MODE_QUERY){var Wn=_t.getQueryParameter({url:At.url,type:F.w.LICENSE});Wn&&(At.url=j.Z.addAditionalQueryParameterToUrl(At.url,[Wn]))}for(var xn in Tn.open(At.method,At.url,!0),Tn.responseType=At.responseType,Tn.withCredentials=At.withCredentials,sn>0&&(Tn.timeout=sn),At.headers)Tn.setRequestHeader(xn,At.headers[xn]);if(Ct.get().streaming.cmcd&&Ct.get().streaming.cmcd.enabled&&Ct.get().streaming.cmcd.mode===U.Z.CMCD_MODE_HEADER){var An=_t.getHeaderParameters({url:At.url,type:F.w.LICENSE});if(An)for(var sr in An){var Qn=An[sr];Qn&&Tn.setRequestHeader(sr,Qn)}}var fr=function(){zt--;var rr=isNaN(Ct.get().streaming.retryIntervals[F.w.LICENSE])?1e3:Ct.get().streaming.retryIntervals[F.w.LICENSE];Ot=setTimeout(function(){ei(At,zt,sn,Ln,On,Un)},rr)};Tn.onload=function(){Yt=null,this.status>=200&&this.status<=299||zt<=0?Ln(this):(pt.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+zt),fr())},Tn.ontimeout=Tn.onerror=function(){Yt=null,zt<=0?Un(this):(pt.warn("License request network request failed . Retrying it... Pending retries: "+zt),fr())},Tn.onabort=function(){On(this)},Pt.trigger(Xt.LICENSE_REQUEST_SENDING,{url:At.url,headers:At.headers,payload:At.data,sessionId:At.sessionId}),Yt=Tn,Tn.send(At.data)}function ti(){Yt&&(Yt.onloadend=Yt.onerror=Yt.onprogress=void 0,Yt.abort(),Yt=null),Ot&&(clearTimeout(Ot),Ot=null)}function Br(At,zt){if(zt)for(var sn in zt)At[sn]=zt[sn]}function Gr(At,zt,sn,Ln,On){var Un="NONE",Tn=null;At.response&&(Un=On.getErrorResponse(At.response,sn,Ln),Tn={serverResponse:At.response||null,responseCode:At.status||null,responseText:At.statusText||null}),Jn(zt,new l.Z(n.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,n.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+sn+' update, XHR complete. status is "'+At.statusText+'" ('+At.status+"), readyState is "+At.readyState+".  Response is "+Un,Tn))}function qr(At,zt){return At?At.reduce(function(sn,Ln){return sn.then(function(){return Ln(zt)})},Promise.resolve()):Promise.resolve()}function Yr(At,zt){if(!Ct.get().streaming.protection.ignoreEmeEncryptedEvent){if(pt.debug("DRM: onNeedKey"),At.key.initDataType!=="cenc")return void pt.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+At.key.initDataType);if(at.length===0&&(pt.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(zt=zt===void 0?1:zt+1)<5))return void Et.push(setTimeout(function(){Yr(At,zt)},500));var sn=At.key.initData;if(ArrayBuffer.isView(sn)&&(sn=sn.buffer),Nt){var Ln=e.getPSSHForKeySystem(Nt,sn);if(Ln&&Pn(Ln))return}pt.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(sn)));var On=dt.getSupportedKeySystemsFromSegmentPssh(sn,ze,rt);if(On.length===0)return void pt.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!");(function(Un){qe.push(Un),gn(Un,!1)})(On)}}return mt={initializeForMedia:function(At){if(!At)throw new Error("mediaInfo can not be null or undefined");$t(),at.push(At)},clearMediaInfoArray:function(){at=[]},handleKeySystemFromManifest:function(){if(at&&at.length!==0){var At=[];at.forEach(function(zt){var sn=dt.getSupportedKeySystemsFromContentProtection(zt.contentProtection,ze,rt);sn.length>0&&(At.length===0&&(At=sn),qe.push(sn))}),At&&At.length>0&&gn(At,!0)}},createKeySession:Rn,loadKeySession:Bn,removeKeySession:function(At){$t(),Ft.removeKeySession(At)},closeKeySession:function(At){$t(),Ft.closeKeySession(At)},setServerCertificate:function(At){$t(),Ft.setServerCertificate(At)},setMediaElement:zn,setSessionType:function(At){rt=At},setRobustnessLevel:function(At){It=At},setProtectionData:function(At){ze=At,dt.setProtectionData(At)},getSupportedKeySystemsFromContentProtection:function(At){return $t(),dt.getSupportedKeySystemsFromContentProtection(At,ze,rt)},getKeySystems:function(){return dt?dt.getKeySystems():[]},setKeySystems:function(At){dt&&dt.setKeySystems(At)},stop:function(){ti(),Ft&&Ft.stop()},reset:function(){Pt.off(Xt.INTERNAL_KEY_MESSAGE,ar,mt),Pt.off(Xt.INTERNAL_KEY_STATUS_CHANGED,Er,mt),$t(),ti(),zn(null),Nt=null,Ut=!1,Ft&&(Ft.reset(),Ft=null),Et.forEach(function(At){return clearTimeout(At)}),Et=[],at=[],qe=[]}},pt=on.getLogger(mt),qe=[],at=[],rt="temporary",It="",Yt=null,Ot=null,Pt.on(Xt.INTERNAL_KEY_MESSAGE,ar,mt),Pt.on(Xt.INTERNAL_KEY_STATUS_CHANGED,Er,mt),mt}I.__dashjs_factory_name="ProtectionController";const k=W.Z.getClassFactory(I),$=function vt(mt,pt){(function(qe,at){if(!(qe instanceof at))throw new TypeError("Cannot call a class as a function")})(this,vt),this.keyID=mt,this.key=pt};function J(vt,mt){for(var pt=0;pt<mt.length;pt++){var qe=mt[pt];qe.enumerable=qe.enumerable||!1,qe.configurable=!0,"value"in qe&&(qe.writable=!0),Object.defineProperty(vt,qe.key,qe)}}const Ne=function(){function vt(qe,at){if(function(ze,rt){if(!(ze instanceof rt))throw new TypeError("Cannot call a class as a function")}(this,vt),at&&at!=="persistent"&&at!=="temporary")throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=qe,this.type=at}var mt,pt;return mt=vt,(pt=[{key:"toJWK",value:function(){var qe,at=this.keyPairs.length,ze={keys:[]};for(qe=0;qe<at;qe++){var rt={kty:"oct",alg:"A128KW",kid:this.keyPairs[qe].keyID,k:this.keyPairs[qe].key};ze.keys.push(rt)}this.type&&(ze.type=this.type);var It=JSON.stringify(ze),Nt=It.length,Ut=new ArrayBuffer(Nt),Yt=new Uint8Array(Ut);for(qe=0;qe<Nt;qe++)Yt[qe]=It.charCodeAt(qe);return Ut}}])&&J(mt.prototype,pt),vt}();function Be(vt,mt){for(var pt=0;pt<mt.length;pt++){var qe=mt[pt];qe.enumerable=qe.enumerable||!1,qe.configurable=!0,"value"in qe&&(qe.writable=!0),Object.defineProperty(vt,qe.key,qe)}}const te=new(function(){function vt(){(function(qe,at){if(!(qe instanceof at))throw new TypeError("Cannot call a class as a function")})(this,vt),this.init()}var mt,pt;return mt=vt,(pt=[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready",this.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING="com.microsoft.playready.recommendation",this.INITIALIZATION_DATA_TYPE_CENC="cenc",this.INITIALIZATION_DATA_TYPE_KEYIDS="keyids",this.INITIALIZATION_DATA_TYPE_WEBM="webm"}}])&&Be(mt.prototype,pt),vt}());var ot="e2719d58-a985-b3c9-781a-b030af78d30e",Ae=te.CLEARKEY_KEYSTEM_STRING,ke="urn:uuid:"+ot;function pe(vt){var mt=(vt=vt||{}).BASE64;return{uuid:ot,schemeIdURI:ke,systemString:Ae,getInitData:function(pt,qe){try{var at=e.parseInitDataFromContentProtection(pt,mt);if(!at&&qe){var ze={kids:[function(rt){try{var It=rt.replace(/-/g,"");return(It=btoa(It.match(/\w{2}/g).map(function(Nt){return String.fromCharCode(parseInt(Nt,16))}).join(""))).replace(/=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}catch{return null}}(qe["cenc:default_KID"])]};at=new TextEncoder().encode(JSON.stringify(ze))}return at}catch{return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(pt){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(pt))))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(pt,qe){var at=null;if(pt){for(var ze=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(qe))),rt=[],It=0;It<ze.kids.length;It++){var Nt=ze.kids[It],Ut=pt.clearkeys&&pt.clearkeys.hasOwnProperty(Nt)?pt.clearkeys[Nt]:null;if(!Ut)throw new Error("DRM: ClearKey keyID ("+Nt+") is not known!");rt.push(new $(Nt,Ut))}at=new Ne(rt)}return at}}}pe.__dashjs_factory_name="KeySystemClearKey";const be=dashjs.FactoryMaker.getSingletonFactory(pe);var He="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",ut=te.CLEARKEY_KEYSTEM_STRING,tt="urn:uuid:"+He;function Se(vt){var mt,pt=vt.BASE64,qe=vt.debug.getLogger(mt);return{uuid:He,schemeIdURI:tt,systemString:ut,getInitData:function(at){return e.parseInitDataFromContentProtection(at,pt)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(at){return new Uint8Array(at)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(at,ze){var rt=null;if(at){for(var It=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(ze))),Nt=[],Ut=0;Ut<It.kids.length;Ut++){var Yt=It.kids[Ut],Ot=at.clearkeys&&at.clearkeys.hasOwnProperty(Yt)?at.clearkeys[Yt]:null;if(!Ot)throw new Error("DRM: ClearKey keyID ("+Yt+") is not known!");Nt.push(new $(Yt,Ot))}rt=new Ne(Nt),qe.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return rt}}}Se.__dashjs_factory_name="KeySystemW3CClearKey";const We=dashjs.FactoryMaker.getSingletonFactory(Se);var lt="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",Fe=te.WIDEVINE_KEYSTEM_STRING,Xe="urn:uuid:"+lt;function ce(vt){var mt=(vt=vt||{}).BASE64;return{uuid:lt,schemeIdURI:Xe,systemString:Fe,getInitData:function(pt){return e.parseInitDataFromContentProtection(pt,mt)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(pt){return new Uint8Array(pt)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}}}ce.__dashjs_factory_name="KeySystemWidevine";const de=dashjs.FactoryMaker.getSingletonFactory(ce);var je="9a04f079-9840-4286-ab92-e65be0885f95",f=te.PLAYREADY_KEYSTEM_STRING,o="urn:uuid:"+je;function v(vt){var mt="utf-16",pt=(vt=vt||{}).BASE64,qe=vt.settings;function at(){if(!pt||!pt.hasOwnProperty("decodeArray")||!pt.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:je,schemeIdURI:o,systemString:f,getInitData:function(ze){var rt,It,Nt,Ut,Yt,Ot=new Uint8Array([112,115,115,104,0,0,0,0]),dt=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),Ft=0,Pt=null;if(at(),!ze)return null;if("pssh"in ze)return e.parseInitDataFromContentProtection(ze,pt);if("pro"in ze)Pt=pt.decodeArray(ze.pro.__text);else{if(!("prheader"in ze))return null;Pt=pt.decodeArray(ze.prheader.__text)}return rt=Pt.length,It=4+Ot.length+dt.length+4+rt,Nt=new ArrayBuffer(It),Ut=new Uint8Array(Nt),(Yt=new DataView(Nt)).setUint32(Ft,It),Ft+=4,Ut.set(Ot,Ft),Ft+=Ot.length,Ut.set(dt,Ft),Ft+=dt.length,Yt.setUint32(Ft,rt),Ft+=4,Ut.set(Pt,Ft),Ft+=rt,Ut.buffer},getRequestHeadersFromMessage:function(ze){var rt,It,Nt={},Ut=new DOMParser;if(qe&&qe.get().streaming.protection.detectPlayreadyMessageFormat&&mt==="utf-16"&&ze&&ze.byteLength%2==1)return Nt["Content-Type"]="text/xml; charset=utf-8",Nt;var Yt=mt==="utf-16"?new Uint16Array(ze):new Uint8Array(ze);rt=String.fromCharCode.apply(null,Yt);for(var Ot=(It=Ut.parseFromString(rt,"application/xml")).getElementsByTagName("name"),dt=It.getElementsByTagName("value"),Ft=0;Ft<Ot.length;Ft++)Nt[Ot[Ft].childNodes[0].nodeValue]=dt[Ft].childNodes[0].nodeValue;return Nt.hasOwnProperty("Content")&&(Nt["Content-Type"]=Nt.Content,delete Nt.Content),Nt.hasOwnProperty("Content-Type")||(Nt["Content-Type"]="text/xml; charset=utf-8"),Nt},getLicenseRequestFromMessage:function(ze){var rt=null,It=new DOMParser;if(qe&&qe.get().streaming.protection.detectPlayreadyMessageFormat&&mt==="utf-16"&&ze&&ze.byteLength%2==1)return ze;var Nt=mt==="utf-16"?new Uint16Array(ze):new Uint8Array(ze);at();var Ut=String.fromCharCode.apply(null,Nt),Yt=It.parseFromString(Ut,"application/xml");if(!Yt.getElementsByTagName("PlayReadyKeyMessage")[0])return ze;var Ot=Yt.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;return Ot&&(rt=pt.decode(Ot)),rt},getLicenseServerURLFromInitData:function(ze){if(ze)for(var rt=new DataView(ze),It=rt.getUint16(4,!0),Nt=6,Ut=new DOMParser,Yt=0;Yt<It;Yt++){var Ot=rt.getUint16(Nt,!0);Nt+=2;var dt=rt.getUint16(Nt,!0);if(Nt+=2,Ot===1){var Ft=ze.slice(Nt,Nt+dt),Pt=String.fromCharCode.apply(null,new Uint16Array(Ft)),Xt=Ut.parseFromString(Pt,"application/xml");if(Xt.getElementsByTagName("LA_URL")[0]){var on=Xt.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(on)return on}if(Xt.getElementsByTagName("LUI_URL")[0]){var En=Xt.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(En)return En}}else Nt+=dt}return null},getCDMData:function(ze){var rt,It,Nt,Ut;if(at(),!ze)return null;for(rt=[],Ut=0;Ut<ze.length;++Ut)rt.push(ze.charCodeAt(Ut)),rt.push(0);for(rt=String.fromCharCode.apply(null,rt),rt=pt.encode(rt),It='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",rt),Nt=[],Ut=0;Ut<It.length;++Ut)Nt.push(It.charCodeAt(Ut)),Nt.push(0);return new Uint8Array(Nt).buffer},setPlayReadyMessageFormat:function(ze){if(ze!=="utf-8"&&ze!=="utf-16")throw new Error('Specified message format is not one of "utf-8" or "utf-16"');mt=ze}}}v.__dashjs_factory_name="KeySystemPlayReady";const E=dashjs.FactoryMaker.getSingletonFactory(v);function X(vt){var mt=(vt=vt||{}).BASE64,pt={};return pt[te.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(qe){return mt.decodeArray(qe.license)},getErrorResponse:function(qe){return qe}},pt[te.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(qe){return qe},getErrorResponse:function(qe){return String.fromCharCode.apply(null,new Uint8Array(qe))}},{getServerURLFromMessage:function(qe){return qe},getHTTPMethod:function(){return"POST"},getResponseType:function(qe){return pt[qe].responseType},getLicenseMessage:function(qe,at){return function(){if(!mt||!mt.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),pt[at].getLicenseMessage(qe)},getErrorResponse:function(qe,at){return pt[at].getErrorResponse(qe)}}}X.__dashjs_factory_name="DRMToday";const K=dashjs.FactoryMaker.getSingletonFactory(X);function he(){var vt="http://schemas.xmlsoap.org/soap/envelope/";function mt(at){var ze=String.fromCharCode.apply(null,new Uint8Array(at));return decodeURIComponent(escape(ze))}function pt(at){if(window.DOMParser){var ze=mt(at),rt=new window.DOMParser().parseFromString(ze,"text/xml"),It=rt?rt.getElementsByTagNameNS(vt,"Envelope")[0]:null,Nt=It?It.getElementsByTagNameNS(vt,"Body")[0]:null;if(Nt&&Nt.getElementsByTagNameNS(vt,"Fault")[0])return null}return at}function qe(at){var ze="",rt="",It="",Nt=-1,Ut=-1;if(window.DOMParser){var Yt=mt(at),Ot=new window.DOMParser().parseFromString(Yt,"text/xml"),dt=Ot?Ot.getElementsByTagNameNS(vt,"Envelope")[0]:null,Ft=dt?dt.getElementsByTagNameNS(vt,"Body")[0]:null,Pt=Ft?Ft.getElementsByTagNameNS(vt,"Fault")[0]:null,Xt=Pt?Pt.getElementsByTagName("detail")[0]:null,on=Xt?Xt.getElementsByTagName("Exception")[0]:null,En=null;if(Pt===null)return Yt;ze=(En=Pt.getElementsByTagName("faultstring")[0].firstChild)?En.nodeValue:null,on!==null&&(rt=(En=on.getElementsByTagName("StatusCode")[0])?En.firstChild.nodeValue:null,Nt=(It=(En=on.getElementsByTagName("Message")[0])?En.firstChild.nodeValue:null)?It.lastIndexOf("[")+1:-1,Ut=It?It.indexOf("]"):-1,It=It?It.substring(Nt,Ut):"")}var Wt="code: ".concat(rt,", name: ").concat(ze);return It&&(Wt+=", message: ".concat(It)),Wt}return{getServerURLFromMessage:function(at){return at},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(at){return pt.call(this,at)},getErrorResponse:function(at){return qe.call(this,at)}}}he.__dashjs_factory_name="PlayReady";const Ce=W.Z.getSingletonFactory(he);function De(){return{getServerURLFromMessage:function(vt){return vt},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(vt){return vt},getErrorResponse:function(vt){return String.fromCharCode.apply(null,new Uint8Array(vt))}}}De.__dashjs_factory_name="Widevine";const ve=dashjs.FactoryMaker.getSingletonFactory(De);function Le(){return{getServerURLFromMessage:function(vt){return vt},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(vt){if(!vt.hasOwnProperty("keys"))return null;for(var mt=[],pt=0;pt<vt.keys.length;pt++){var qe=vt.keys[pt],at=qe.kid.replace(/=/g,""),ze=qe.k.replace(/=/g,"");mt.push(new $(at,ze))}return new Ne(mt)},getErrorResponse:function(vt){return String.fromCharCode.apply(null,new Uint8Array(vt))}}}Le.__dashjs_factory_name="ClearKey";const Ze=dashjs.FactoryMaker.getSingletonFactory(Le);function Je(){var vt,mt,pt,qe,at,ze,rt,It,Nt=this.context;function Ut(dt,Ft){return Ft&&dt in Ft?Ft[dt]:null}function Yt(dt,Ft){return dt&&dt.sessionId?dt.sessionId:Ft&&Ft.sessionId?Ft.sessionId:null}function Ot(dt,Ft){return dt&&dt.sessionType?dt.sessionType:Ft}return vt={initialize:function(){var dt;qe=[],dt=E(Nt).getInstance({BASE64:at,settings:ze}),qe.push(dt),dt=de(Nt).getInstance({BASE64:at}),qe.push(dt),dt=be(Nt).getInstance({BASE64:at}),qe.push(dt),rt=dt,dt=We(Nt).getInstance({BASE64:at,debug:mt}),qe.push(dt),It=dt},setProtectionData:function(dt){for(var Ft,Pt,Xt=0;Xt<qe.length;Xt++){var on=qe[Xt];on.hasOwnProperty("init")&&on.init((Ft=on.systemString,Pt=void 0,Pt=null,dt&&(Pt=Ft in dt?dt[Ft]:null),Pt))}},isClearKey:function(dt){return dt===rt||dt===It},initDataEquals:function(dt,Ft){if(dt.byteLength===Ft.byteLength){for(var Pt=new Uint8Array(dt),Xt=new Uint8Array(Ft),on=0;on<Pt.length;on++)if(Pt[on]!==Xt[on])return!1;return!0}return!1},getKeySystems:function(){return qe},setKeySystems:function(dt){qe=dt},getKeySystemBySystemString:function(dt){for(var Ft=0;Ft<qe.length;Ft++)if(qe[Ft].systemString===dt)return qe[Ft];return null},getSupportedKeySystemsFromContentProtection:function(dt,Ft,Pt){var Xt,on,En,Wt,Et=[];if(dt){var _t=e.findCencContentProtection(dt);for(En=0;En<qe.length;++En){var Ct=Ut((on=qe[En]).systemString,Ft);for(Wt=0;Wt<dt.length;++Wt)if((Xt=dt[Wt]).schemeIdUri.toLowerCase()===on.schemeIdURI){var Qt=on.getInitData(Xt,_t);Et.push({ks:qe[En],keyId:Xt.keyId,initData:Qt,protData:Ct,cdmData:on.getCDMData(Ct?Ct.cdmData:null),sessionId:Yt(Ct,Xt),sessionType:Ot(Ct,Pt)})}}}return Et},getSupportedKeySystemsFromSegmentPssh:function(dt,Ft,Pt){for(var Xt,on=[],En=e.parsePSSHList(dt),Wt=0;Wt<qe.length;++Wt){var Et=Ut((Xt=qe[Wt]).systemString,Ft);Xt.uuid in En&&on.push({ks:Xt,initData:En[Xt.uuid],protData:Et,cdmData:Xt.getCDMData(Et?Et.cdmData:null),sessionId:Yt(Et),sessionType:Ot(Et,Pt)})}return on},getLicenseServerModelInstance:function(dt,Ft,Pt){if(Pt==="license-release"||Pt==="individualization-request")return null;var Xt=null;return Ft&&Ft.hasOwnProperty("drmtoday")?Xt=K(Nt).getInstance({BASE64:at}):dt.systemString===te.WIDEVINE_KEYSTEM_STRING?Xt=ve(Nt).getInstance():dt.systemString===te.PLAYREADY_KEYSTEM_STRING?Xt=Ce(Nt).getInstance():dt.systemString===te.CLEARKEY_KEYSTEM_STRING&&(Xt=Ze(Nt).getInstance()),Xt},processClearKeyLicenseRequest:function(dt,Ft,Pt){try{return dt.getClearKeysFromProtectionData(Ft,Pt)}catch{return pt.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(dt){dt&&(dt.debug&&(mt=dt.debug,pt=mt.getLogger(vt)),dt.BASE64&&(at=dt.BASE64),dt.settings&&(ze=dt.settings))}},vt}Je.__dashjs_factory_name="ProtectionKeyController";const ht=dashjs.FactoryMaker.getSingletonFactory(Je);function st(vt){return st=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(mt){return typeof mt}:function(mt){return mt&&typeof Symbol=="function"&&mt.constructor===Symbol&&mt!==Symbol.prototype?"symbol":typeof mt},st(vt)}function wt(vt,mt){return wt=Object.setPrototypeOf||function(pt,qe){return pt.__proto__=qe,pt},wt(vt,mt)}function Mt(vt,mt){return!mt||st(mt)!=="object"&&typeof mt!="function"?function(pt){if(pt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return pt}(vt):mt}function xt(vt){return xt=Object.setPrototypeOf?Object.getPrototypeOf:function(mt){return mt.__proto__||Object.getPrototypeOf(mt)},xt(vt)}const mn=new(function(vt){(function(ze,rt){if(typeof rt!="function"&&rt!==null)throw new TypeError("Super expression must either be null or a function");ze.prototype=Object.create(rt&&rt.prototype,{constructor:{value:ze,writable:!0,configurable:!0}}),rt&&wt(ze,rt)})(at,vt);var mt,pt,qe=(mt=at,pt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var ze,rt=xt(mt);if(pt){var It=xt(this).constructor;ze=Reflect.construct(rt,arguments,It)}else ze=rt.apply(this,arguments);return Mt(this,ze)});function at(){var ze;return function(rt,It){if(!(rt instanceof It))throw new TypeError("Cannot call a class as a function")}(this,at),(ze=qe.call(this)).INTERNAL_KEY_MESSAGE="internalKeyMessage",ze.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",ze.KEY_ADDED="public_keyAdded",ze.KEY_ERROR="public_keyError",ze.KEY_MESSAGE="public_keyMessage",ze.KEY_SESSION_CLOSED="public_keySessionClosed",ze.KEY_SESSION_CREATED="public_keySessionCreated",ze.KEY_SESSION_REMOVED="public_keySessionRemoved",ze.KEY_STATUSES_CHANGED="public_keyStatusesChanged",ze.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",ze.KEY_SYSTEM_SELECTED="public_keySystemSelected",ze.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",ze.LICENSE_REQUEST_SENDING="public_licenseRequestSending",ze.NEED_KEY="needkey",ze.PROTECTION_CREATED="public_protectioncreated",ze.PROTECTION_DESTROYED="public_protectiondestroyed",ze.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",ze.TEARDOWN_COMPLETE="protectionTeardownComplete",ze.VIDEO_ELEMENT_SELECTED="videoElementSelected",ze.KEY_SESSION_UPDATED="public_keySessionUpdated",ze}return at}(C(8342).Z)),pn=function vt(mt,pt){(function(qe,at){if(!(qe instanceof at))throw new TypeError("Cannot call a class as a function")})(this,vt),this.initData=mt,this.initDataType=pt},hn=function vt(mt,pt,qe,at){(function(ze,rt){if(!(ze instanceof rt))throw new TypeError("Cannot call a class as a function")})(this,vt),this.sessionToken=mt,this.message=pt,this.defaultURL=qe,this.messageType=at||"license-request"},Mn=function vt(mt,pt){(function(qe,at){if(!(qe instanceof at))throw new TypeError("Cannot call a class as a function")})(this,vt),this.keySystem=mt,this.ksConfiguration=pt};var Dn={};function vn(vt){vt=vt||{};var mt,pt,qe,at,ze,rt,It,Nt,Ut=this.context,Yt=vt.eventBus,Ot=vt.events,dt=vt.debug;function Ft(Et,_t,Ct,Qt){if(navigator.requestMediaKeySystemAccess===void 0||typeof navigator.requestMediaKeySystemAccess!="function"){var $t="Insecure origins are not allowed";return Yt.trigger(Ot.KEY_SYSTEM_ACCESS_COMPLETE,{error:$t}),void Qt({error:$t})}var gn=Et[_t].protData&&Et[_t].protData.systemStringPriority?Et[_t].protData.systemStringPriority:null,yn=Et[_t].configs,jn=Et[_t].ks,Bn=jn.systemString;(function(Rn,Fn){return new Promise(function(Pn,zn){Pt(Rn,Fn,0,Pn,zn)})})(gn||(Dn[Bn]?Dn[Bn]:[Bn]),yn).then(function(Rn){var Fn=typeof Rn.getConfiguration=="function"?Rn.getConfiguration():null,Pn=new Mn(jn,Fn);Pn.mksa=Rn,Yt.trigger(Ot.KEY_SYSTEM_ACCESS_COMPLETE,{data:Pn}),Ct({data:Pn})}).catch(function(Rn){if(_t+1<Et.length)Ft(Et,_t+1,Ct,Qt);else{var Fn="Key system access denied! ";Yt.trigger(Ot.KEY_SYSTEM_ACCESS_COMPLETE,{error:Fn+Rn.message}),Qt({error:Fn+Rn.message})}})}function Pt(Et,_t,Ct,Qt,$t){var gn=Et[Ct];pt.debug("Requesting key system access for system string ".concat(gn)),navigator.requestMediaKeySystemAccess(gn,_t).then(function(yn){yn.selectedSystemString=gn,Qt(yn)}).catch(function(yn){Ct+1<Et.length?Pt(Et,_t,Ct+1,Qt,$t):$t(yn)})}function Xt(Et){var _t=Et.session;return _t.removeEventListener("keystatuseschange",Et),_t.removeEventListener("message",Et),_t.close()}function on(Et){for(var _t=0;_t<rt.length;_t++)if(rt[_t]===Et){rt.splice(_t,1);break}}function En(Et){var _t,Ct;return Et&&Et.length>0&&(Et[0]&&(typeof Et[0]=="string"?_t=Et[0]:Ct=Et[0]),Et[1]&&(typeof Et[1]=="string"?_t=Et[1]:Ct=Et[1])),{status:_t,keyId:Ct}}function Wt(Et,_t){var Ct={session:Et,keyId:_t.keyId,initData:_t.initData,sessionId:_t.sessionId,sessionType:_t.sessionType,handleEvent:function(Qt){switch(Qt.type){case"keystatuseschange":Yt.trigger(Ot.KEY_STATUSES_CHANGED,{data:this}),Qt.target.keyStatuses.forEach(function(){var gn=En(arguments);gn.status==="expired"?Yt.trigger(Ot.INTERNAL_KEY_STATUS_CHANGED,{error:new l.Z(n.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,n.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)}):Yt.trigger(Ot.INTERNAL_KEY_STATUS_CHANGED,gn)});break;case"message":var $t=ArrayBuffer.isView(Qt.message)?Qt.message.buffer:Qt.message;Yt.trigger(Ot.INTERNAL_KEY_MESSAGE,{data:new hn(this,$t,void 0,Qt.messageType)})}},getKeyId:function(){return this.keyId},getSessionId:function(){return Et.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return Et.expiration},getKeyStatuses:function(){return Et.keyStatuses},getUsable:function(){var Qt=!1;return Et.keyStatuses.forEach(function(){var $t=En(arguments);$t.status==="usable"&&(Qt=!0)}),Qt}};return Et.addEventListener("keystatuseschange",Ct),Et.addEventListener("message",Ct),Et.closed.then(function(){on(Ct),pt.debug("DRM: Session closed.  SessionID = "+Ct.getSessionId()),Yt.trigger(Ot.KEY_SESSION_CLOSED,{data:Ct.getSessionId()})}),rt.push(Ct),Ct}return mt={getAllInitData:function(){for(var Et=[],_t=0;_t<rt.length;_t++)rt[_t].initData&&Et.push(rt[_t].initData);return Et},getSessions:function(){return rt},requestKeySystemAccess:function(Et){return new Promise(function(_t,Ct){Ft(Et,0,_t,Ct)})},selectKeySystem:function(Et){return new Promise(function(_t,Ct){Et.mksa.createMediaKeys().then(function(Qt){return qe=Et.keySystem,ze=Qt,at?at.setMediaKeys(ze):Promise.resolve()}).then(function(){_t(qe)}).catch(function(){Ct({error:"Error selecting keys system ("+Et.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})})},setMediaElement:function(Et){at!==Et&&(at&&(at.removeEventListener("encrypted",It),at.setMediaKeys&&at.setMediaKeys(null)),(at=Et)&&(at.addEventListener("encrypted",It),at.setMediaKeys&&ze&&at.setMediaKeys(ze)))},setServerCertificate:function(Et){if(!qe||!ze)throw new Error("Can not set server certificate until you have selected a key system");ze.setServerCertificate(Et).then(function(){pt.info("DRM: License server certificate successfully updated."),Yt.trigger(Ot.SERVER_CERTIFICATE_UPDATED)}).catch(function(_t){Yt.trigger(Ot.SERVER_CERTIFICATE_UPDATED,{error:new l.Z(n.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,n.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+_t.name)})})},createKeySession:function(Et){if(!qe||!ze)throw new Error("Can not create sessions until you have selected a key system");var _t=ze.createSession(Et.sessionType),Ct=Wt(_t,Et),Qt=qe.systemString===te.CLEARKEY_KEYSTEM_STRING&&(Et.initData||Et.protData&&Et.protData.clearkeys)?te.INITIALIZATION_DATA_TYPE_KEYIDS:te.INITIALIZATION_DATA_TYPE_CENC;_t.generateRequest(Qt,Et.initData).then(function(){pt.debug("DRM: Session created.  SessionID = "+Ct.getSessionId()),Yt.trigger(Ot.KEY_SESSION_CREATED,{data:Ct})}).catch(function($t){on(Ct),Yt.trigger(Ot.KEY_SESSION_CREATED,{data:null,error:new l.Z(n.KEY_SESSION_CREATED_ERROR_CODE,n.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+$t.name)})})},updateKeySession:function(Et,_t){var Ct=Et.session;Nt.isClearKey(qe)&&(_t=_t.toJWK()),Ct.update(_t).then(function(){Yt.trigger(Ot.KEY_SESSION_UPDATED)}).catch(function(Qt){Yt.trigger(Ot.KEY_ERROR,{error:new l.Z(n.MEDIA_KEYERR_CODE,"Error sending update() message! "+Qt.name,Et)})})},loadKeySession:function(Et){if(!qe||!ze)throw new Error("Can not load sessions until you have selected a key system");for(var _t=Et.sessionId,Ct=0;Ct<rt.length;Ct++)if(_t===rt[Ct].sessionId)return void pt.warn("DRM: Ignoring session ID because we have already seen it!");var Qt=ze.createSession(Et.sessionType),$t=Wt(Qt,Et);Qt.load(_t).then(function(gn){gn?(pt.debug("DRM: Session loaded.  SessionID = "+$t.getSessionId()),Yt.trigger(Ot.KEY_SESSION_CREATED,{data:$t})):(on($t),Yt.trigger(Ot.KEY_SESSION_CREATED,{data:null,error:new l.Z(n.KEY_SESSION_CREATED_ERROR_CODE,n.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+_t+")")}))}).catch(function(gn){on($t),Yt.trigger(Ot.KEY_SESSION_CREATED,{data:null,error:new l.Z(n.KEY_SESSION_CREATED_ERROR_CODE,n.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+_t+")! "+gn.name)})})},removeKeySession:function(Et){Et.session.remove().then(function(){pt.debug("DRM: Session removed.  SessionID = "+Et.getSessionId()),Yt.trigger(Ot.KEY_SESSION_REMOVED,{data:Et.getSessionId()})},function(_t){Yt.trigger(Ot.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+Et.getSessionId()+"). "+_t.name})})},closeKeySession:function(Et){Xt(Et).catch(function(_t){on(Et),Yt.trigger(Ot.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+Et.getSessionId()+") "+_t.name})})},stop:function(){for(var Et,_t=0;_t<rt.length;_t++)(Et=rt[_t]).getUsable()||Xt(Et).catch(function(){on(Et)})},reset:function(){var Et,_t=rt.length;_t!==0?function(){for(var Ct=function($t){on($t),rt.length===0&&(at?(at.removeEventListener("encrypted",It),at.setMediaKeys(null).then(function(){Yt.trigger(Ot.TEARDOWN_COMPLETE)})):Yt.trigger(Ot.TEARDOWN_COMPLETE))},Qt=0;Qt<_t;Qt++)(function($t){Et.session.closed.then(function(){Ct($t)}),Xt(Et).catch(function(){Ct($t)})})(Et=rt[Qt])}():Yt.trigger(Ot.TEARDOWN_COMPLETE)}},pt=dt.getLogger(mt),qe=null,at=null,ze=null,rt=[],Nt=ht(Ut).getInstance(),It={handleEvent:function(Et){if(Et.type==="encrypted"&&Et.initData){var _t=ArrayBuffer.isView(Et.initData)?Et.initData.buffer:Et.initData;Yt.trigger(Ot.NEED_KEY,{key:new pn(_t,Et.initDataType)})}}},mt}Dn[te.PLAYREADY_KEYSTEM_STRING]=[te.PLAYREADY_KEYSTEM_STRING,te.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],Dn[te.WIDEVINE_KEYSTEM_STRING]=[te.WIDEVINE_KEYSTEM_STRING],Dn[te.CLEARKEY_KEYSTEM_STRING]=[te.CLEARKEY_KEYSTEM_STRING],vn.__dashjs_factory_name="ProtectionModel_21Jan2015";const kn=dashjs.FactoryMaker.getClassFactory(vn);function Zn(vt){vt=vt||{};var mt,pt,qe,at,ze,rt,It,Nt,Ut,Yt=this.context,Ot=vt.eventBus,dt=vt.events,Ft=vt.debug,Pt=vt.api;function Xt(){try{for(var Wt=0;Wt<It.length;Wt++)on(It[Wt]);qe&&qe.removeEventListener(Pt.needkey,Nt),Ot.trigger(dt.TEARDOWN_COMPLETE)}catch(Et){Ot.trigger(dt.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+Et.message})}}function on(Wt){var Et=Wt.session;Et.removeEventListener(Pt.error,Wt),Et.removeEventListener(Pt.message,Wt),Et.removeEventListener(Pt.ready,Wt),Et.removeEventListener(Pt.close,Wt);for(var _t=0;_t<It.length;_t++)if(It[_t]===Wt){It.splice(_t,1);break}Et[Pt.release]()}function En(){var Wt=null,Et=function(){qe.removeEventListener("loadedmetadata",Wt),qe[Pt.setMediaKeys](ze),Ot.trigger(dt.VIDEO_ELEMENT_SELECTED)};qe.readyState>=1?Et():(Wt=Et.bind(this),qe.addEventListener("loadedmetadata",Wt))}return mt={getAllInitData:function(){for(var Wt=[],Et=0;Et<It.length;Et++)Wt.push(It[Et].initData);return Wt},getSessions:function(){return It},requestKeySystemAccess:function(Wt){return new Promise(function(Et,_t){for(var Ct=!1,Qt=0;Qt<Wt.length;Qt++)for(var $t=Wt[Qt].ks.systemString,gn=Wt[Qt].configs,yn=null,jn=null,Bn=0;Bn<gn.length;Bn++){var Rn=gn[Bn].audioCapabilities,Fn=gn[Bn].videoCapabilities;if(Rn&&Rn.length!==0){yn=[];for(var Pn=0;Pn<Rn.length;Pn++)window[Pt.MediaKeys].isTypeSupported($t,Rn[Pn].contentType)&&yn.push(Rn[Pn])}if(Fn&&Fn.length!==0){jn=[];for(var zn=0;zn<Fn.length;zn++)window[Pt.MediaKeys].isTypeSupported($t,Fn[zn].contentType)&&jn.push(Fn[zn])}if(!(!yn&&!jn||yn&&yn.length===0||jn&&jn.length===0)){Ct=!0;var Nr=new S(yn,jn),Er=Ut.getKeySystemBySystemString($t),ar=new Mn(Er,Nr);Ot.trigger(dt.KEY_SYSTEM_ACCESS_COMPLETE,{data:ar}),Et({data:ar});break}}if(!Ct){var Jn="Key system access denied! -- No valid audio/video content configurations detected!";Ot.trigger(dt.KEY_SYSTEM_ACCESS_COMPLETE,{error:Jn}),_t({error:Jn})}})},selectKeySystem:function(Wt){return new Promise(function(Et,_t){try{ze=Wt.mediaKeys=new window[Pt.MediaKeys](Wt.keySystem.systemString),at=Wt.keySystem,rt=Wt,qe&&En(),Et(at)}catch{_t({error:"Error selecting keys system ("+at.systemString+")! Could not create MediaKeys -- TODO"})}})},setMediaElement:function(Wt){qe!==Wt&&(qe&&qe.removeEventListener(Pt.needkey,Nt),(qe=Wt)&&(qe.addEventListener(Pt.needkey,Nt),ze&&En()))},createKeySession:function(Wt){if(!at||!ze||!rt)throw new Error("Can not create sessions until you have selected a key system");var Et=null;if(rt.ksConfiguration.videoCapabilities&&rt.ksConfiguration.videoCapabilities.length>0&&(Et=rt.ksConfiguration.videoCapabilities[0]),Et===null&&rt.ksConfiguration.audioCapabilities&&rt.ksConfiguration.audioCapabilities.length>0&&(Et=rt.ksConfiguration.audioCapabilities[0]),Et===null)throw new Error("Can not create sessions for unknown content types.");var _t=Et.contentType,Ct=ze.createSession(_t,new Uint8Array(Wt.initData),Wt.cdmData?new Uint8Array(Wt.cdmData):null),Qt=function($t,gn){return{session:$t,keyId:gn.keyId,initData:gn.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(yn){switch(yn.type){case Pt.error:Ot.trigger(dt.KEY_ERROR,{error:new l.Z(n.MEDIA_KEYERR_CODE,"KeyError",this)});break;case Pt.message:var jn=ArrayBuffer.isView(yn.message)?yn.message.buffer:yn.message;Ot.trigger(dt.INTERNAL_KEY_MESSAGE,{data:new hn(this,jn,yn.destinationURL)});break;case Pt.ready:pt.debug("DRM: Key added."),Ot.trigger(dt.KEY_ADDED);break;case Pt.close:pt.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),Ot.trigger(dt.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}}}(Ct,Wt);Ct.addEventListener(Pt.error,Qt),Ct.addEventListener(Pt.message,Qt),Ct.addEventListener(Pt.ready,Qt),Ct.addEventListener(Pt.close,Qt),It.push(Qt),pt.debug("DRM: Session created.  SessionID = "+Qt.getSessionId()),Ot.trigger(dt.KEY_SESSION_CREATED,{data:Qt})},updateKeySession:function(Wt,Et){var _t=Wt.session;Ut.isClearKey(at)?_t.update(new Uint8Array(Et.toJWK())):_t.update(new Uint8Array(Et)),Ot.trigger(dt.KEY_SESSION_UPDATED)},closeKeySession:on,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:Xt,reset:Xt},pt=Ft.getLogger(mt),qe=null,at=null,ze=null,rt=null,It=[],Ut=ht(Yt).getInstance(),Nt={handleEvent:function(Wt){if(Wt.type===Pt.needkey&&Wt.initData){var Et=ArrayBuffer.isView(Wt.initData)?Wt.initData.buffer:Wt.initData;Ot.trigger(dt.NEED_KEY,{key:new pn(Et,"cenc")})}}},mt}Zn.__dashjs_factory_name="ProtectionModel_3Feb2014";const _n=dashjs.FactoryMaker.getClassFactory(Zn);function qn(vt){vt=vt||{};var mt,pt,qe,at,ze,rt,It,Nt,Ut,Yt=this.context,Ot=vt.eventBus,dt=vt.events,Ft=vt.debug,Pt=vt.api,Xt=vt.errHandler;function on(){qe&&Et();for(var _t=0;_t<It.length;_t++)En(It[_t]);Ot.trigger(dt.TEARDOWN_COMPLETE)}function En(_t){try{qe[Pt.cancelKeyRequest](at.systemString,_t.sessionId)}catch(Ct){Ot.trigger(dt.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+_t.sessionId+") "+Ct.message})}}function Wt(_t,Ct){if(Ct&&_t){for(var Qt=_t.length,$t=0;$t<Qt;$t++)if(_t[$t].sessionId==Ct)return _t[$t];return null}return null}function Et(){qe.removeEventListener(Pt.keyerror,Ut),qe.removeEventListener(Pt.needkey,Ut),qe.removeEventListener(Pt.keymessage,Ut),qe.removeEventListener(Pt.keyadded,Ut)}return mt={getAllInitData:function(){for(var _t=[],Ct=0;Ct<rt.length;Ct++)_t.push(rt[Ct].initData);for(var Qt=0;Qt<It.length;Qt++)_t.push(It[Qt].initData);return _t},getSessions:function(){return It.concat(rt)},requestKeySystemAccess:function(_t){return new Promise(function(Ct,Qt){var $t=qe;$t||($t=document.createElement("video"));for(var gn=!1,yn=0;yn<_t.length;yn++)for(var jn=_t[yn].ks.systemString,Bn=_t[yn].configs,Rn=null,Fn=0;Fn<Bn.length;Fn++){var Pn=Bn[Fn].videoCapabilities;if(Pn&&Pn.length!==0){Rn=[];for(var zn=0;zn<Pn.length;zn++)$t.canPlayType(Pn[zn].contentType,jn)!==""&&Rn.push(Pn[zn])}if(Rn&&(!Rn||Rn.length!==0)){gn=!0;var Nr=new S(null,Rn),Er=ze.getKeySystemBySystemString(jn),ar=new Mn(Er,Nr);Ot.trigger(dt.KEY_SYSTEM_ACCESS_COMPLETE,{data:ar}),Ct({data:ar});break}}if(!gn){var Jn="Key system access denied! -- No valid audio/video content configurations detected!";Ot.trigger(dt.KEY_SYSTEM_ACCESS_COMPLETE,{error:Jn}),Qt({error:Jn})}})},selectKeySystem:function(_t){return at=_t.keySystem,Promise.resolve(at)},setMediaElement:function(_t){if(qe!==_t){if(qe){Et();for(var Ct=0;Ct<It.length;Ct++)En(It[Ct]);It=[]}(qe=_t)&&(qe.addEventListener(Pt.keyerror,Ut),qe.addEventListener(Pt.needkey,Ut),qe.addEventListener(Pt.keymessage,Ut),qe.addEventListener(Pt.keyadded,Ut),Ot.trigger(dt.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(_t){if(!at)throw new Error("Can not create sessions until you have selected a key system");if(Nt||It.length===0){var Ct={sessionId:null,keyId:_t.keyId,initData:_t.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return rt.push(Ct),qe[Pt.generateKeyRequest](at.systemString,new Uint8Array(_t.initData)),Ct}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(_t,Ct){var Qt=_t.sessionId;if(ze.isClearKey(at))for(var $t=0;$t<Ct.keyPairs.length;$t++)qe[Pt.addKey](at.systemString,Ct.keyPairs[$t].key,Ct.keyPairs[$t].keyID,Qt);else qe[Pt.addKey](at.systemString,new Uint8Array(Ct),new Uint8Array(_t.initData),Qt);Ot.trigger(dt.KEY_SESSION_UPDATED)},closeKeySession:En,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:on,reset:on},pt=Ft.getLogger(mt),qe=null,at=null,rt=[],It=[],ze=ht(Yt).getInstance(),Ut={handleEvent:function(_t){var Ct=null;switch(_t.type){case Pt.needkey:var Qt=ArrayBuffer.isView(_t.initData)?_t.initData.buffer:_t.initData;Ot.trigger(dt.NEED_KEY,{key:new pn(Qt,"cenc")});break;case Pt.keyerror:if((Ct=Wt(It,_t.sessionId))||(Ct=Wt(rt,_t.sessionId)),Ct){var $t=n.MEDIA_KEYERR_CODE,gn="";switch(_t.errorCode.code){case 1:$t=n.MEDIA_KEYERR_UNKNOWN_CODE,gn+="MEDIA_KEYERR_UNKNOWN - "+n.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:$t=n.MEDIA_KEYERR_CLIENT_CODE,gn+="MEDIA_KEYERR_CLIENT - "+n.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:$t=n.MEDIA_KEYERR_SERVICE_CODE,gn+="MEDIA_KEYERR_SERVICE - "+n.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:$t=n.MEDIA_KEYERR_OUTPUT_CODE,gn+="MEDIA_KEYERR_OUTPUT - "+n.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:$t=n.MEDIA_KEYERR_HARDWARECHANGE_CODE,gn+="MEDIA_KEYERR_HARDWARECHANGE - "+n.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:$t=n.MEDIA_KEYERR_DOMAIN_CODE,gn+="MEDIA_KEYERR_DOMAIN - "+n.MEDIA_KEYERR_DOMAIN_MESSAGE}gn+="  System Code = "+_t.systemCode,Ot.trigger(dt.KEY_ERROR,{error:new l.Z($t,gn,Ct)})}else pt.error("No session token found for key error");break;case Pt.keyadded:(Ct=Wt(It,_t.sessionId))||(Ct=Wt(rt,_t.sessionId)),Ct?(pt.debug("DRM: Key added."),Ot.trigger(dt.KEY_ADDED,{data:Ct})):pt.debug("No session token found for key added");break;case Pt.keymessage:if((Nt=_t.sessionId!==null&&_t.sessionId!==void 0)?!(Ct=Wt(It,_t.sessionId))&&rt.length>0&&(Ct=rt.shift(),It.push(Ct),Ct.sessionId=_t.sessionId,Ot.trigger(dt.KEY_SESSION_CREATED,{data:Ct})):rt.length>0&&(Ct=rt.shift(),It.push(Ct),rt.length!==0&&Xt.error(new l.Z(n.MEDIA_KEY_MESSAGE_ERROR_CODE,n.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),Ct){var yn=ArrayBuffer.isView(_t.message)?_t.message.buffer:_t.message;Ct.keyMessage=yn,Ot.trigger(dt.INTERNAL_KEY_MESSAGE,{data:new hn(Ct,yn,_t.defaultURL)})}else pt.warn("No session token found for key message")}}},mt}qn.__dashjs_factory_name="ProtectionModel_01b";const Yn=dashjs.FactoryMaker.getClassFactory(qn);var Vn=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],Kn=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function nr(){var vt,mt=this.context;function pt(qe,at){for(var ze=0;ze<at.length;ze++){var rt=at[ze];if(typeof qe[rt[Object.keys(rt)[0]]]=="function")return rt}return null}return vt={createProtectionSystem:function(qe){var at=null,ze=ht(mt).getInstance();ze.setConfig({debug:qe.debug,BASE64:qe.BASE64,settings:qe.settings}),ze.initialize();var rt=function(It){var Nt=It.debug,Ut=Nt.getLogger(vt),Yt=It.eventBus,Ot=It.errHandler,dt=It.videoModel?It.videoModel.getElement():null;return dt&&dt.onencrypted===void 0||dt&&dt.mediaKeys===void 0?pt(dt,Kn)?(Ut.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),_n(mt).create({debug:Nt,eventBus:Yt,events:It.events,api:pt(dt,Kn)})):pt(dt,Vn)?(Ut.info("EME detected on this user agent! (ProtectionModel_01b)"),Yn(mt).create({debug:Nt,eventBus:Yt,errHandler:Ot,events:It.events,api:pt(dt,Vn)})):(Ut.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(Ut.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),kn(mt).create({debug:Nt,eventBus:Yt,events:It.events}))}(qe);return!at&&rt&&(at=k(mt).create({protectionModel:rt,protectionKeyController:ze,eventBus:qe.eventBus,debug:qe.debug,events:qe.events,BASE64:qe.BASE64,constants:qe.constants,cmcdModel:qe.cmcdModel,customParametersModel:qe.customParametersModel,settings:qe.settings}),qe.capabilities.setEncryptedMediaSupported(!0)),at}}}nr.__dashjs_factory_name="Protection";var er=dashjs.FactoryMaker.getClassFactory(nr);er.events=mn,er.errors=n,dashjs.FactoryMaker.updateClassFactory(nr.__dashjs_factory_name,er);const wr=er},2068:(et,we,C)=>{C.d(we,{Z:()=>S});var oe=C(5448),b={DEFAULT:.5,STRONG:1,WEAK:0};function e(g,i,h){var _,n;return _=g===void 0?-1:g,n=function(l){var d=b.DEFAULT;return l!==b.DEFAULT&&l!==b.STRONG&&l!==b.WEAK||(d=l),d}(h),{quality:_,reason:i===void 0?null:i,priority:n}}e.__dashjs_factory_name="SwitchRequest";var t=oe.Z.getClassFactory(e);t.NO_CHANGE=-1,t.PRIORITY=b,oe.Z.updateClassFactory(e.__dashjs_factory_name,t);const S=t},1767:(et,we,C)=>{C.d(we,{Z:()=>U});var oe=C(5628),b=C(6535),e=C(7423),t=C(895),S=C(6070),g=C(3112),i=C(1914),h=C(5435),_=C(5448),n=C(2068),l=C(3393),d="qualitySwitchRules",P="abandonFragmentRules";function F(W){W=W||{};var D,I,k=this.context,$=W.mediaPlayerModel,J=W.customParametersModel,Ne=W.dashMetrics,Be=W.settings;function te(Ae){return Ae.filter(function(ke){return ke.quality>n.Z.NO_CHANGE})}function ot(Ae){var ke,pe,be,He,ut,tt={},Se=null;if(Ae.length!==0){for(tt[n.Z.PRIORITY.STRONG]={quality:n.Z.NO_CHANGE,reason:null},tt[n.Z.PRIORITY.WEAK]={quality:n.Z.NO_CHANGE,reason:null},tt[n.Z.PRIORITY.DEFAULT]={quality:n.Z.NO_CHANGE,reason:null},ke=0,pe=Ae.length;ke<pe;ke+=1)(be=Ae[ke]).quality!==n.Z.NO_CHANGE&&(tt[be.priority].quality===n.Z.NO_CHANGE||tt[be.priority].quality>be.quality)&&(tt[be.priority].quality=be.quality,tt[be.priority].reason=be.reason||null);return tt[n.Z.PRIORITY.WEAK].quality!==n.Z.NO_CHANGE&&(Se=tt[n.Z.PRIORITY.WEAK]),tt[n.Z.PRIORITY.DEFAULT].quality!==n.Z.NO_CHANGE&&(Se=tt[n.Z.PRIORITY.DEFAULT]),tt[n.Z.PRIORITY.STRONG].quality!==n.Z.NO_CHANGE&&(Se=tt[n.Z.PRIORITY.STRONG]),Se&&(He=Se.quality,ut=Se.reason),(0,n.Z)(k).create(He,ut)}}return{initialize:function(){D=[],I=[],Be.get().streaming.abr.useDefaultABRRules&&(Be.get().streaming.abr.ABRStrategy===l.Z.ABR_STRATEGY_L2A?D.push((0,i.Z)(k).create({dashMetrics:Ne,settings:Be})):Be.get().streaming.abr.ABRStrategy===l.Z.ABR_STRATEGY_LoLP?D.push((0,h.Z)(k).create({dashMetrics:Ne})):(D.push((0,g.Z)(k).create({dashMetrics:Ne,mediaPlayerModel:$,settings:Be})),D.push((0,oe.Z)(k).create({dashMetrics:Ne})),Be.get().streaming.abr.additionalAbrRules.insufficientBufferRule&&D.push((0,b.Z)(k).create({dashMetrics:Ne,settings:Be})),Be.get().streaming.abr.additionalAbrRules.switchHistoryRule&&D.push((0,S.Z)(k).create()),Be.get().streaming.abr.additionalAbrRules.droppedFramesRule&&D.push((0,t.Z)(k).create()),Be.get().streaming.abr.additionalAbrRules.abandonRequestsRule&&I.push((0,e.Z)(k).create({dashMetrics:Ne,mediaPlayerModel:$,settings:Be})))),J.getAbrCustomRules().forEach(function(Ae){Ae.type===d&&D.push(Ae.rule(k).create()),Ae.type===P&&I.push(Ae.rule(k).create())})},reset:function(){[D,I].forEach(function(Ae){Ae&&Ae.length&&Ae.forEach(function(ke){return ke.reset&&ke.reset()})}),D=[],I=[]},getMaxQuality:function(Ae){return ot(te(D.map(function(ke){return ke.getMaxIndex(Ae)})))||(0,n.Z)(k).create()},getMinSwitchRequest:ot,shouldAbandonFragment:function(Ae,ke){return ot(te(I.map(function(pe){return pe.shouldAbandon(Ae,ke)})))||(0,n.Z)(k).create()},getQualitySwitchRules:function(){return D}}}F.__dashjs_factory_name="ABRRulesCollection";var j=_.Z.getClassFactory(F);j.QUALITY_SWITCH_RULES=d,j.ABANDON_FRAGMENT_RULES=P,_.Z.updateSingletonFactory(F.__dashjs_factory_name,j);const U=j},7423:(et,we,C)=>{C.d(we,{Z:()=>S});var oe=C(2068),b=C(5448),e=C(6398);function t(g){g=g||{};var i,h,_,n,l,d=this.context,P=g.mediaPlayerModel,F=g.dashMetrics,j=g.settings;function U(){_={},n={},l=[]}return i={shouldAbandon:function(W){var D=(0,oe.Z)(d).create(oe.Z.NO_CHANGE,{name:t.__dashjs_factory_name});if(!(W&&W.hasOwnProperty("getMediaInfo")&&W.hasOwnProperty("getMediaType")&&W.hasOwnProperty("getCurrentRequest")&&W.hasOwnProperty("getRepresentationInfo")&&W.hasOwnProperty("getAbrController")))return D;var I,k,$=W.getMediaInfo(),J=W.getMediaType(),Ne=W.getStreamInfo(),Be=Ne?Ne.id:null,te=W.getCurrentRequest();if(!isNaN(te.index)){I=J,k=te.index,_[I]=_[I]||{},_[I][k]=_[I][k]||{};var ot=P.getStableBufferTime();if(F.getCurrentBufferLevel(J)>ot)return D;var Ae=_[J][te.index];if(Ae===null||te.firstByteDate===null||n.hasOwnProperty(Ae.id))return D;if(Ae.firstByteTime===void 0&&(l[J]=[],Ae.firstByteTime=te.firstByteDate.getTime(),Ae.segmentDuration=te.duration,Ae.bytesTotal=te.bytesTotal,Ae.id=te.index),Ae.bytesLoaded=te.bytesLoaded,Ae.elapsedTime=new Date().getTime()-Ae.firstByteTime,Ae.bytesLoaded>0&&Ae.elapsedTime>0&&function(We,lt){l[We]=l[We]||[],l[We].push(lt)}(J,Math.round(8*Ae.bytesLoaded/Ae.elapsedTime)),l[J].length>=5&&Ae.elapsedTime>500&&Ae.bytesLoaded<Ae.bytesTotal){var ke=l[J].reduce(function(We,lt){return We+lt},0);if(Ae.measuredBandwidthInKbps=Math.round(ke/l[J].length),Ae.estimatedTimeOfDownload=+(8*Ae.bytesTotal/Ae.measuredBandwidthInKbps/1e3).toFixed(2),Ae.estimatedTimeOfDownload<1.8*Ae.segmentDuration||W.getRepresentationInfo().quality===0)return D;if(!n.hasOwnProperty(Ae.id)){var pe=W.getAbrController(),be=Ae.bytesTotal-Ae.bytesLoaded,He=pe.getBitrateList($),ut=pe.getQualityForBitrate($,Ae.measuredBandwidthInKbps*j.get().streaming.abr.bandwidthSafetyFactor,Be),tt=pe.getMinAllowedIndexFor(J,Be),Se=tt!==void 0?Math.max(tt,ut):ut;be>Ae.bytesTotal*He[Se].bitrate/He[pe.getQualityFor(J,Be)].bitrate&&(D.quality=Se,D.reason.throughput=Ae.measuredBandwidthInKbps,D.reason.fragmentID=Ae.id,D.reason.rule=this.getClassName(),n[Ae.id]=Ae,h.debug("["+J+"] frag id",Ae.id," is asking to abandon and switch to quality to ",Se," measured bandwidth was",Ae.measuredBandwidthInKbps),delete _[J][Ae.id])}}else Ae.bytesLoaded===Ae.bytesTotal&&delete _[J][Ae.id]}return D},reset:U},h=(0,e.Z)(d).getInstance().getLogger(i),U(),i}t.__dashjs_factory_name="AbandonRequestsRule";const S=b.Z.getClassFactory(t)},3112:(et,we,C)=>{C.d(we,{Z:()=>d});var oe=C(3860),b=C(2068),e=C(5448),t=C(7855),S=C(5595),g=C(8512),i=C(6398),h=C(8825),_=C(3393),n=10;function l(P){P=P||{};var F,j,U,W=this.context,D=P.dashMetrics,I=P.mediaPlayerModel,k=(0,S.Z)(W).getInstance();function $(Se,We,lt){var Fe=lt.reduce(function(de,je,f){return je>lt[de]?f:de},0);if(Fe===0)return null;var Xe=Math.max(Se,n+2*We.length),ce=(lt[Fe]-1)/(Xe/n-1);return{gp:ce,Vp:n/ce}}function J(Se){Se.placeholderBuffer=0,Se.mostAdvancedSegmentStart=NaN,Se.lastSegmentWasReplacement=!1,Se.lastSegmentStart=NaN,Se.lastSegmentDurationS=NaN,Se.lastSegmentRequestTimeMs=NaN,Se.lastSegmentFinishTimeMs=NaN}function Ne(Se,We){var lt=I.getStableBufferTime();if(Se.stableBufferTime!==lt){var Fe=$(lt,Se.bitrates,Se.utilities);if(Fe.Vp!==Se.Vp||Fe.gp!==Se.gp){var Xe=D.getCurrentBufferLevel(We),ce=Xe+Se.placeholderBuffer;ce-=n,ce*=Fe.Vp/Se.Vp,ce+=n,Se.stableBufferTime=lt,Se.Vp=Fe.Vp,Se.gp=Fe.gp,Se.placeholderBuffer=Math.max(0,ce-Xe)}}}function Be(Se,We){return Se.Vp*(Se.utilities[We]+Se.gp)}function te(Se,We){for(var lt=Se.bitrates[We],Fe=Se.utilities[We],Xe=0,ce=We-1;ce>=0;--ce)if(Se.utilities[ce]<Se.utilities[We]){var de=Se.bitrates[ce],je=Se.utilities[ce],f=Se.Vp*(Se.gp+(lt*je-de*Fe)/(lt-de));Xe=Math.max(Xe,f)}return Xe}function ot(Se){var We=Se.mediaType===_.Z.AUDIO?[_.Z.AUDIO]:U;for(var lt in We)U.hasOwnProperty(lt)&&U[lt].state===2&&(U[lt].placeholderBuffer=0)}function Ae(){for(var Se in U)if(U.hasOwnProperty(Se)){var We=U[Se];We.state!==0&&(We.state=1,J(We))}}function ke(Se){if(Se&&Se.chunk&&Se.chunk.mediaInfo){var We=U[Se.chunk.mediaInfo.type];if(We&&We.state!==0){var lt=Se.chunk.start;isNaN(We.mostAdvancedSegmentStart)||lt>We.mostAdvancedSegmentStart?(We.mostAdvancedSegmentStart=lt,We.lastSegmentWasReplacement=!1):We.lastSegmentWasReplacement=!0,We.lastSegmentStart=lt,We.lastSegmentDurationS=Se.chunk.duration,We.lastQuality=Se.chunk.quality,be(We,Se.chunk.mediaInfo.type)}}}function pe(Se){if(Se&&Se.metric===oe.Z.HTTP_REQUEST&&Se.value&&Se.value.type===t.w.MEDIA_SEGMENT_TYPE&&Se.value.trace&&Se.value.trace.length){var We=U[Se.mediaType];We&&We.state!==0&&(We.lastSegmentRequestTimeMs=Se.value.trequest.getTime(),We.lastSegmentFinishTimeMs=Se.value._tfinish.getTime(),be(We,Se.mediaType))}}function be(Se,We){if(!isNaN(Se.lastSegmentStart)&&!isNaN(Se.lastSegmentRequestTimeMs)&&!isNaN(Se.placeholderBuffer)){if(Se.placeholderBuffer*=.99,!isNaN(Se.lastSegmentFinishTimeMs)){var lt=D.getCurrentBufferLevel(We)+.001*(Se.lastSegmentFinishTimeMs-Se.lastSegmentRequestTimeMs),Fe=Be(Se,Se.lastQuality),Xe=Math.max(0,Fe-lt);Se.placeholderBuffer=Math.min(Xe,Se.placeholderBuffer)}Se.lastSegmentWasReplacement&&!isNaN(Se.lastSegmentDurationS)&&(Se.placeholderBuffer+=Se.lastSegmentDurationS),Se.lastSegmentStart=NaN,Se.lastSegmentRequestTimeMs=NaN}}function He(Se){if(Se){var We=U[Se.mediaType];We&&We.state!==0&&(We.abrQuality=Se.newQuality)}}function ut(Se){if(Se){var We=U[Se.mediaType];if(We&&We.state!==0){var lt,Fe=D.getCurrentBufferLevel(Se.mediaType);lt=We.abrQuality>0?te(We,We.abrQuality):n;var Xe=Math.max(0,lt-Fe);We.placeholderBuffer=Math.min(We.placeholderBuffer,Xe)}}}function tt(){U={}}return F={getMaxIndex:function(Se){var We=(0,b.Z)(W).create();if(!(Se&&Se.hasOwnProperty("getMediaInfo")&&Se.hasOwnProperty("getMediaType")&&Se.hasOwnProperty("getScheduleController")&&Se.hasOwnProperty("getStreamInfo")&&Se.hasOwnProperty("getAbrController")&&Se.hasOwnProperty("useBufferOccupancyABR")))return We;var lt=Se.getMediaInfo(),Fe=Se.getMediaType(),Xe=Se.getScheduleController(),ce=Se.getStreamInfo(),de=Se.getAbrController(),je=de.getThroughputHistory(),f=ce?ce.id:null,o=ce&&ce.manifestInfo&&ce.manifestInfo.isDynamic,v=Se.useBufferOccupancyABR();if(We.reason=We.reason||{},!v)return We;Xe.setTimeToLoadDelay(0);var E=function(Ze){var Je=Ze.getMediaType(),ht=U[Je];return ht?ht.state!==0&&Ne(ht,Je):(ht=function(st){var wt={},Mt=st.getMediaInfo().bitrateList.map(function(hn){return hn.bandwidth}),xt=function(hn){return hn.map(function(Mn){return Math.log(Mn)})}(Mt);xt=xt.map(function(hn){return hn-xt[0]+1});var mn=I.getStableBufferTime(),pn=$(mn,Mt,xt);return pn?(wt.state=1,wt.bitrates=Mt,wt.utilities=xt,wt.stableBufferTime=mn,wt.Vp=pn.Vp,wt.gp=pn.gp,wt.lastQuality=0,J(wt)):wt.state=0,wt}(Ze),U[Je]=ht),ht}(Se);if(E.state===0)return We;var X,K=D.getCurrentBufferLevel(Fe),he=je.getAverageThroughput(Fe,o),Ce=je.getSafeAverageThroughput(Fe,o),De=je.getAverageLatency(Fe);if(We.reason.state=E.state,We.reason.throughput=he,We.reason.latency=De,isNaN(he))return We;switch(E.state){case 1:X=de.getQualityForBitrate(lt,Ce,f,De),We.quality=X,We.reason.throughput=Ce,E.placeholderBuffer=Math.max(0,te(E,X)-K),E.lastQuality=X,!isNaN(E.lastSegmentDurationS)&&K>=E.lastSegmentDurationS&&(E.state=2);break;case 2:(function(Ze,Je){var ht=Date.now();if(isNaN(Ze.lastSegmentFinishTimeMs)){if(!isNaN(Ze.lastCallTimeMs)){var st=.001*(ht-Ze.lastCallTimeMs);Ze.placeholderBuffer+=Math.max(0,st)}}else{var wt=.001*(ht-Ze.lastSegmentFinishTimeMs);Ze.placeholderBuffer+=Math.max(0,wt)}Ze.lastCallTimeMs=ht,Ze.lastSegmentStart=NaN,Ze.lastSegmentRequestTimeMs=NaN,Ze.lastSegmentFinishTimeMs=NaN,Ne(Ze,Je)})(E,Fe),X=function(Ze,Je){for(var ht=Ze.bitrates.length,st=NaN,wt=NaN,Mt=0;Mt<ht;++Mt){var xt=(Ze.Vp*(Ze.utilities[Mt]+Ze.gp)-Je)/Ze.bitrates[Mt];(isNaN(wt)||xt>=wt)&&(wt=xt,st=Mt)}return st}(E,K+E.placeholderBuffer);var ve=de.getQualityForBitrate(lt,Ce,f,De);X>E.lastQuality&&X>ve&&(X=Math.max(ve,E.lastQuality));var Le=Math.max(0,K+E.placeholderBuffer-Be(E,X));Le<=E.placeholderBuffer?(E.placeholderBuffer-=Le,Le=0):(Le-=E.placeholderBuffer,E.placeholderBuffer=0,X<de.getMaxAllowedIndexFor(Fe,f)?Xe.setTimeToLoadDelay(1e3*Le):Le=0),We.quality=X,We.reason.throughput=he,We.reason.latency=De,We.reason.bufferLevel=K,We.reason.placeholderBuffer=E.placeholderBuffer,We.reason.delay=Le,E.lastQuality=X;break;default:j.debug("BOLA ABR rule invoked in bad state."),We.quality=de.getQualityForBitrate(lt,Ce,f,De),We.reason.state=E.state,We.reason.throughput=Ce,We.reason.latency=De,E.state=1,J(E)}return We},reset:function(){tt(),k.off(h.Z.BUFFER_EMPTY,ot,F),k.off(h.Z.PLAYBACK_SEEKING,Ae,F),k.off(h.Z.METRIC_ADDED,pe,F),k.off(h.Z.QUALITY_CHANGE_REQUESTED,He,F),k.off(h.Z.FRAGMENT_LOADING_ABANDONED,ut,F),k.off(g.Z.MEDIA_FRAGMENT_LOADED,ke,F)}},j=(0,i.Z)(W).getInstance().getLogger(F),tt(),k.on(h.Z.BUFFER_EMPTY,ot,F),k.on(h.Z.PLAYBACK_SEEKING,Ae,F),k.on(h.Z.METRIC_ADDED,pe,F),k.on(h.Z.QUALITY_CHANGE_REQUESTED,He,F),k.on(h.Z.FRAGMENT_LOADING_ABANDONED,ut,F),k.on(g.Z.MEDIA_FRAGMENT_LOADED,ke,F),F}l.__dashjs_factory_name="BolaRule";const d=e.Z.getClassFactory(l)},895:(et,we,C)=>{C.d(we,{Z:()=>S});var oe=C(5448),b=C(2068),e=C(6398);function t(){var g,i,h=this.context;return g={getMaxIndex:function(_){var n=(0,b.Z)(h).create();if(!_||!_.hasOwnProperty("getDroppedFramesHistory"))return n;var l=_.getDroppedFramesHistory(),d=_.getStreamInfo().id;if(l){var P=l.getFrameHistory(d);if(!P||P.length===0)return n;for(var F=0,j=0,U=b.Z.NO_CHANGE,W=1;W<P.length;W++)if(P[W]&&(F=P[W].droppedVideoFrames,(j=P[W].totalVideoFrames)>375&&F/j>.15)){U=W-1,i.debug("index: "+U+" Dropped Frames: "+F+" Total Frames: "+j);break}return(0,b.Z)(h).create(U,{droppedFrames:F})}return n}},i=(0,e.Z)(h).getInstance().getLogger(g),g}t.__dashjs_factory_name="DroppedFramesRule";const S=oe.Z.getClassFactory(t)},6535:(et,we,C)=>{C.d(we,{Z:()=>n});var oe=C(5595),b=C(8512),e=C(5448),t=C(6398),S=C(2068),g=C(3393),i=C(3860),h=C(8825);function _(l){l=l||{};var d,P,F,j=this.context,U=(0,oe.Z)(j).getInstance(),W=l.dashMetrics;function D(){(F={})[g.Z.VIDEO]={ignoreCount:2},F[g.Z.AUDIO]={ignoreCount:2}}function I(){D()}function k($){isNaN($.startTime)||$.mediaType!==g.Z.AUDIO&&$.mediaType!==g.Z.VIDEO||F[$.mediaType].ignoreCount>0&&F[$.mediaType].ignoreCount--}return d={getMaxIndex:function($){var J=(0,S.Z)(j).create();if(!$||!$.hasOwnProperty("getMediaType"))return J;(function(){if(!W||!W.hasOwnProperty("getCurrentBufferLevel")||!W.hasOwnProperty("getCurrentBufferState"))throw new Error(g.Z.MISSING_CONFIG_ERROR)})();var Ne=$.getMediaType(),Be=W.getCurrentBufferState(Ne),te=$.getRepresentationInfo().fragmentDuration,ot=$.getStreamInfo(),Ae=ot?ot.id:null,ke=$.getScheduleController(),pe=ot&&ot.manifestInfo&&ot.manifestInfo.isDynamic;if(function(Fe,Xe){return!Fe&&F[Xe].ignoreCount>0}(ke.getPlaybackController().getLowLatencyModeEnabled(),Ne)||!te)return J;if(Be&&Be.state===i.Z.BUFFER_EMPTY)P.debug("["+Ne+"] Switch to index 0; buffer is empty."),J.quality=0,J.reason="InsufficientBufferRule: Buffer is empty";else{var be=$.getMediaInfo(),He=$.getAbrController(),ut=He.getThroughputHistory(),tt=W.getCurrentBufferLevel(Ne),Se=ut.getAverageThroughput(Ne,pe),We=ut.getAverageLatency(Ne),lt=Se*(tt/te)*.5;J.quality=He.getQualityForBitrate(be,lt,Ae,We),J.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return J},reset:function(){D(),U.off(h.Z.PLAYBACK_SEEKING,I,d),U.off(b.Z.BYTES_APPENDED_END_FRAGMENT,k,d)}},P=(0,t.Z)(j).getInstance().getLogger(d),D(),U.on(h.Z.PLAYBACK_SEEKING,I,d),U.on(b.Z.BYTES_APPENDED_END_FRAGMENT,k,d),d}_.__dashjs_factory_name="InsufficientBufferRule";const n=e.Z.getClassFactory(_)},1914:(et,we,C)=>{C.d(we,{Z:()=>n});var oe=C(3860),b=C(2068),e=C(5448),t=C(7855),S=C(5595),g=C(8512),i=C(6398),h=C(3393);function _(l){l=l||{};var d,P,F,j,U=this.context,W=l.dashMetrics,D=(0,S.Z)(U).getInstance();function I(Ae){Ae.placeholderBuffer=0,Ae.mostAdvancedSegmentStart=NaN,Ae.lastSegmentWasReplacement=!1,Ae.lastSegmentStart=NaN,Ae.lastSegmentDurationS=NaN,Ae.lastSegmentRequestTimeMs=NaN,Ae.lastSegmentFinishTimeMs=NaN,Ae.lastSegmentUrl=""}function k(){for(var Ae in P)if(P.hasOwnProperty(Ae)){var ke=P[Ae];ke.state!==0&&(ke.state=1,I(ke))}}function $(Ae){if(Ae&&Ae.chunk&&Ae.chunk.mediaInfo){var ke=P[Ae.chunk.mediaInfo.type],pe=F[Ae.chunk.mediaInfo.type];if(ke&&ke.state!==0){var be=Ae.chunk.start;isNaN(ke.mostAdvancedSegmentStart)||be>ke.mostAdvancedSegmentStart?(ke.mostAdvancedSegmentStart=be,ke.lastSegmentWasReplacement=!1):ke.lastSegmentWasReplacement=!0,ke.lastSegmentStart=be,ke.lastSegmentDurationS=Ae.chunk.duration,ke.lastQuality=Ae.chunk.quality,Ne(ke,pe)}}}function J(Ae){if(Ae&&Ae.metric===oe.Z.HTTP_REQUEST&&Ae.value&&Ae.value.type===t.w.MEDIA_SEGMENT_TYPE&&Ae.value.trace&&Ae.value.trace.length){var ke=P[Ae.mediaType],pe=F[Ae.mediaType];ke&&ke.state!==0&&(ke.lastSegmentRequestTimeMs=Ae.value.trequest.getTime(),ke.lastSegmentFinishTimeMs=Ae.value._tfinish.getTime(),Ne(ke,pe))}}function Ne(Ae,ke){isNaN(Ae.lastSegmentStart)||isNaN(Ae.lastSegmentRequestTimeMs)||(ke.segment_request_start_s=.001*Ae.lastSegmentRequestTimeMs,ke.segment_download_finish_s=.001*Ae.lastSegmentFinishTimeMs,Ae.lastSegmentStart=NaN,Ae.lastSegmentRequestTimeMs=NaN)}function Be(Ae){if(Ae&&Ae.mediaType){var ke=P[Ae.mediaType];ke&&ke.state!==0&&(ke.abrQuality=Ae.newQuality)}}function te(Ae,ke){if(Ae.length!==ke.length)return-1;for(var pe=0,be=0;be<Ae.length;be++)pe+=Ae[be]*ke[be];return pe}function ot(){P={},F={}}return d={getMaxIndex:function(Ae){var ke,pe=(0,b.Z)(U).create(),be=Math.pow(4,.99),He=Math.max(Math.pow(4,1),be*Math.sqrt(4)),ut=Ae.getMediaInfo(),tt=Ae.getMediaType(),Se=ut.bitrateList.map(function(pn){return pn.bandwidth}),We=Se.length,lt=Ae.getScheduleController(),Fe=Ae.getStreamInfo(),Xe=Ae.getAbrController(),ce=Xe.getThroughputHistory(),de=Fe&&Fe.manifestInfo&&Fe.manifestInfo.isDynamic,je=Ae.useL2AABR(),f=W.getCurrentBufferLevel(tt,!0),o=ce.getSafeAverageThroughput(tt,de),v=ce.getAverageThroughput(tt,de),E=ce.getAverageLatency(tt),X=Ae.getVideoModel().getPlaybackRate();if(!(Ae&&Ae.hasOwnProperty("getMediaInfo")&&Ae.hasOwnProperty("getMediaType")&&Ae.hasOwnProperty("getScheduleController")&&Ae.hasOwnProperty("getStreamInfo")&&Ae.hasOwnProperty("getAbrController")&&Ae.hasOwnProperty("useL2AABR"))||(pe.reason=pe.reason||{},!je||tt===h.Z.AUDIO))return pe;lt.setTimeToLoadDelay(0);var K=function(pn){var hn=pn.getMediaType(),Mn=P[hn];return Mn||(Mn=function(Dn){var vn={},kn=Dn.getMediaInfo(),Zn=kn.bitrateList.map(function(_n){return _n.bandwidth/1e3});return vn.state=1,vn.bitrates=Zn,vn.lastQuality=0,function(_n){_n&&_n.type&&(F[_n.type]={},F[_n.type].w=[],F[_n.type].prev_w=[],F[_n.type].Q=0,F[_n.type].segment_request_start_s=0,F[_n.type].segment_download_finish_s=0,F[_n.type].B_target=1.5)}(kn),I(vn),vn}(pn),P[hn]=Mn),Mn}(Ae);if(K.state===0)return pe;var he=F[tt];if(!he||(pe.reason.state=K.state,pe.reason.throughput=v,pe.reason.latency=E,isNaN(v)))return pe;switch(K.state){case 1:if(ke=Xe.getQualityForBitrate(ut,o,Fe.id,E),pe.quality=ke,pe.reason.throughput=o,K.lastQuality=ke,!isNaN(K.lastSegmentDurationS)&&f>=he.B_target){K.state=2,he.Q=be;for(var Ce=0;Ce<We;++Ce)Ce===K.lastQuality?he.prev_w[Ce]=1:he.prev_w[Ce]=0}break;case 2:var De=[],ve=W.getCurrentHttpRequest(tt).trace.reduce(function(pn,hn){return pn+hn.d},0),Le=W.getCurrentHttpRequest(tt).trace.reduce(function(pn,hn){return pn+hn.b[0]},0),Ze=Math.round(8*Le/ve),Je=W.getCurrentHttpRequest(tt);if(Ze<1&&(Ze=1),Je.url===K.lastSegmentUrl||Je.type===t.w.INIT_SEGMENT_TYPE)ke=K.lastQuality;else{for(var ht=K.lastSegmentDurationS,st=1,wt=0;wt<We;++wt)Se[wt]=Se[wt]/1e3,X*Se[wt]>Ze&&(st=-1),he.w[wt]=he.prev_w[wt]+st*(ht/(2*He))*((he.Q+be)*(X*Se[wt]/Ze));he.w=function(pn){for(var hn=pn.length,Mn=!1,Dn=[],vn=0;vn<hn;++vn)Dn[vn]=pn[vn];for(var kn=pn.sort(function(Kn,nr){return nr-Kn}),Zn=0,_n=0,qn=[],Yn=0;Yn<hn-1;++Yn)if((_n=((Zn+=kn[Yn])-1)/(Yn+1))>=kn[Yn+1]){Mn=!0;break}Mn||(_n=(Zn+kn[hn-1]-1)/hn);for(var Vn=0;Vn<hn;++Vn)qn[Vn]=Math.max(Dn[Vn]-_n,0);return qn}(he.w);for(var Mt=0;Mt<We;++Mt)De[Mt]=he.w[Mt]-he.prev_w[Mt],he.prev_w[Mt]=he.w[Mt];he.Q=Math.max(0,he.Q-ht+ht*X*((te(Se,he.prev_w)+te(Se,De))/Ze));for(var xt=[],mn=0;mn<We;++mn)xt[mn]=Math.abs(Se[mn]-te(he.w,Se));(ke=xt.indexOf(Math.min.apply(Math,xt)))>K.lastQuality&&Se[K.lastQuality+1]<=Ze&&(ke=K.lastQuality+1),Se[ke]>=Ze&&(he.Q=2*Math.max(be,he.Q)),K.lastSegment.url=Je.url}pe.quality=ke,pe.reason.throughput=v,pe.reason.latency=E,pe.reason.bufferLevel=f,K.lastQuality=pe.quality;break;default:j.debug("L2A ABR rule invoked in bad state."),pe.quality=Xe.getQualityForBitrate(ut,o,Fe.id,E),pe.reason.state=K.state,pe.reason.throughput=o,pe.reason.latency=E,K.state=1,I(K)}return pe},reset:function(){ot(),D.off(g.Z.PLAYBACK_SEEKING,k,d),D.off(g.Z.MEDIA_FRAGMENT_LOADED,$,d),D.off(g.Z.METRIC_ADDED,J,d),D.off(g.Z.QUALITY_CHANGE_REQUESTED,Be,d)}},j=(0,i.Z)(U).getInstance().getLogger(d),ot(),D.on(g.Z.PLAYBACK_SEEKING,k,d),D.on(g.Z.MEDIA_FRAGMENT_LOADED,$,d),D.on(g.Z.METRIC_ADDED,J,d),D.on(g.Z.QUALITY_CHANGE_REQUESTED,Be,d),d}_.__dashjs_factory_name="L2ARule";const n=e.Z.getClassFactory(_)},6070:(et,we,C)=>{C.d(we,{Z:()=>S});var oe=C(5448),b=C(6398),e=C(2068);function t(){var g,i,h=this.context;return g={getMaxIndex:function(_){for(var n=_?_.getSwitchHistory():null,l=n?n.getSwitchRequests():[],d=0,P=0,F=0,j=(0,e.Z)(h).create(),U=0;U<l.length;U++)if(l[U]!==void 0&&(d+=l[U].drops,P+=l[U].noDrops,F+=l[U].dropSize,d+P>=6&&d/P>.075)){j.quality=U>0&&l[U].drops>0?U-1:U,j.reason={index:j.quality,drops:d,noDrops:P,dropSize:F},i.debug("Switch history rule index: "+j.quality+" samples: "+(d+P)+" drops: "+d);break}return j}},i=(0,b.Z)(h).getInstance().getLogger(g),g}t.__dashjs_factory_name="SwitchHistoryRule";const S=oe.Z.getClassFactory(t)},5628:(et,we,C)=>{C.d(we,{Z:()=>g});var oe=C(5448),b=C(2068),e=C(3393),t=C(3860);function S(i){i=i||{};var h=this.context,_=i.dashMetrics;return{getMaxIndex:function(n){var l=(0,b.Z)(h).create();if(!(n&&n.hasOwnProperty("getMediaInfo")&&n.hasOwnProperty("getMediaType")&&n.hasOwnProperty("useBufferOccupancyABR")&&n.hasOwnProperty("getAbrController")&&n.hasOwnProperty("getScheduleController")))return l;(function(){if(!_||!_.hasOwnProperty("getCurrentBufferState"))throw new Error(e.Z.MISSING_CONFIG_ERROR)})();var d=n.getMediaInfo(),P=n.getMediaType(),F=_.getCurrentBufferState(P),j=n.getScheduleController(),U=n.getAbrController(),W=n.getStreamInfo(),D=W?W.id:null,I=W&&W.manifestInfo?W.manifestInfo.isDynamic:null,k=U.getThroughputHistory(),$=k.getSafeAverageThroughput(P,I),J=k.getAverageLatency(P),Ne=n.useBufferOccupancyABR();return isNaN($)||!F||Ne||U.getAbandonmentStateFor(D,P)!==t.Z.ABANDON_LOAD&&(F.state===t.Z.BUFFER_LOADED||I)&&(l.quality=U.getQualityForBitrate(d,$,D,J),j.setTimeToLoadDelay(0),l.reason={throughput:$,latency:J}),l},reset:function(){}}}S.__dashjs_factory_name="ThroughputRule";const g=oe.Z.getClassFactory(S)},4722:(et,we,C)=>{C.d(we,{Z:()=>t});var oe=C(5448),b=C(6398);function e(){var S,g,i,h,_,n,l,d,P,F=this.context;function j(){i=null,h=1,_=100,n=0,l=null,d=null,P="dynamic_weight_selection"}function U(){var $=0;if(i)for(var J=0;J<i.length;J++){var Ne=i[J];Ne.state.throughput>$&&($=Ne.state.throughput)}return $}function W($,J,Ne){var Be=$.map(function(te,ot){return Ne[ot]*Math.pow(te-J[ot],2)}).reduce(function(te,ot){return te+ot});return(Be<0?-1:1)*Math.sqrt(Math.abs(Be))}function D($,J){return W([$.state.throughput,$.state.latency,$.state.rebuffer,$.state.switch],[J.state.throughput,J.state.latency,J.state.rebuffer,J.state.switch],[1,1,1,1])}function I($,J,Ne){for(var Be=0;Be<J.length;Be++){var te=J[Be],ot=D(te,$);k(te,Ne,Math.exp(-1*Math.pow(ot,2)/(2*Math.pow(.1,2))))}}function k($,J,Ne){var Be=$.state,te=[.01,.01,.01,.01];Be.throughput=Be.throughput+(J[0]-Be.throughput)*te[0]*Ne,Be.latency=Be.latency+(J[1]-Be.latency)*te[1]*Ne,Be.rebuffer=Be.rebuffer+(J[2]-Be.rebuffer)*te[2]*Ne,Be.switch=Be.switch+(J[3]-Be.switch)*te[3]*Ne}return S={getNextQuality:function($,J,Ne,Be,te,ot,Ae){var ke=Ne,pe=Be,be=J,He=function(he){if(!i){i=[];var Ce=he.bitrateList,De=[];n=Ce[0].bandwidth,Ce.forEach(function(Je){De.push(Je.bandwidth),Je.bandwidth<n&&(n=Je.bandwidth)}),Ze=De.map(function(Je){return Math.pow(Je,2)}).reduce(function(Je,ht){return Je+ht}),h=Math.sqrt(Ze);for(var ve=0;ve<Ce.length;ve++){var Le={qualityIndex:ve,bitrate:Ce[ve].bandwidth,state:{throughput:Ce[ve].bandwidth/h,latency:0,rebuffer:0,switch:0}};i.push(Le)}d=function(Je){var ht=[],st=function(vt){for(var mt=[],pt=0;pt<vt;pt++){var qe=[Math.random()*U(),Math.random(),Math.random(),Math.random()];mt.push(qe)}return mt}(Math.pow(Je.length,2));ht.push(st[0]);for(var wt=[1,1,1,1],Mt=1;Mt<Je.length;Mt++){for(var xt=null,mn=null,pn=0;pn<st.length;pn++){for(var hn=st[pn],Mn=null,Dn=0;Dn<ht.length;Dn++){var vn=W(hn,ht[Dn],wt);(Mn===null||vn<Mn)&&(Mn=vn)}(mn===null||Mn>mn)&&(xt=hn,mn=Mn)}ht.push(xt)}for(var kn=null,Zn=null,_n=0;_n<ht.length;_n++){for(var qn=0,Yn=0;Yn<ht.length;Yn++)_n!==Yn&&(qn+=W(ht[_n],ht[Yn],wt));(kn===null||qn>kn)&&(kn=qn,Zn=_n)}var Vn=[];for(Vn.push(ht[Zn]),ht.splice(Zn,1);ht.length>0;){for(var Kn=null,nr=null,er=0;er<ht.length;er++){var wr=W(Vn[0],ht[er],wt);(Kn===null||wr<Kn)&&(Kn=wr,nr=er)}Vn.push(ht[nr]),ht.splice(nr,1)}return Vn}(i)}var Ze;return i}($),ut=J/h;ut>1&&(ut=U()),Ne/=_,g.debug("getNextQuality called throughput:".concat(ut," latency:").concat(Ne," bufferSize:").concat(Be," currentQualityIndex:").concat(ot," playbackRate:").concat(te));var tt=He[ot],Se=tt.bitrate*Ae.getSegmentDuration()/be,We=Math.max(0,Se-pe);if(pe-Se<Ae.getMinBuffer())return g.debug("Buffer is low for bitrate= ".concat(tt.bitrate," downloadTime=").concat(Se," currentBuffer=").concat(pe," rebuffer=").concat(We)),function(he,Ce){var De=0,ve=he;if(i)for(var Le=0;Le<i.length;Le++){var Ze=i[Le];Ze.bitrate<he.bitrate&&Ze.bitrate>De&&Ce>Ze.bitrate&&(De=Ze.bitrate,ve=Ze)}return ve}(tt,be).qualityIndex;switch(P){case"manual_weight_selection":l=[.4,.4,.4,.4];break;case"random_weight_selection":(function(he){l=function(Ce,De){for(var ve=[],Le=Math.sqrt(2/Ce),Ze=0;Ze<4;Ze++)ve.push(Math.random()*Le);return l=ve}(he.length)})(He);break;default:(function(he,Ce,De,ve,Le,Ze,Je){l||(l=d[d.length-1]);var ht=he.findWeightVector(Ce,De,ve,Le,Ze,Je);ht!==null&&ht!==-1&&(l=ht)})(Ae,He,ke,pe,We,be,te)}for(var lt=null,Fe=null,Xe=null,ce=0;ce<He.length;ce++){var de=He[ce],je=de.state,f=[je.throughput,je.latency,je.rebuffer,je.switch],o=l.slice(),v=Ae.getNextBufferWithBitrate(de.bitrate,pe,be),E=v<Ae.getMinBuffer();E&&g.debug("Buffer is low for bitrate=".concat(de.bitrate," downloadTime=").concat(Se," currentBuffer=").concat(pe," nextBuffer=").concat(v)),(de.bitrate>J-1e4||E)&&de.bitrate!==n&&(o[0]=100);var X=W(f,[ut,0,0,0],o);(lt===null||X<lt)&&(lt=X,Fe=de.qualityIndex,Xe=de)}var K=Math.abs(tt.bitrate-Xe.bitrate)/h;return I(tt,He,[ut,Ne,We,K]),I(Xe,He,[ut,0,0,K]),Fe},reset:function(){j()}},g=(0,b.Z)(F).getInstance().getLogger(S),j(),S}e.__dashjs_factory_name="LearningAbrController";const t=oe.Z.getClassFactory(e)},5317:(et,we,C)=>{C.d(we,{Z:()=>t});var oe=C(5448),b=C(2298);function e(){var S,g,i,h,_;function n(){g=null,i=null,h=null,_=null}function l(P,F,j,U){var W=new b.Z;return W.type=P,W.weights.bitrateReward=F||1,W.weights.bitrateSwitchPenalty=1,W.weights.rebufferPenalty=j||1e3,W.weights.latencyPenalty=[],W.weights.latencyPenalty.push({threshold:1.1,penalty:.05*U}),W.weights.latencyPenalty.push({threshold:1e8,penalty:.1*j}),W.weights.playbackSpeedPenalty=U||200,W}function d(P,F,j,U,W){W.bitrateWSum+=W.weights.bitrateReward*P,W.lastBitrate&&(W.bitrateSwitchWSum+=W.weights.bitrateSwitchPenalty*Math.abs(P-W.lastBitrate)),W.lastBitrate=P,W.rebufferWSum+=W.weights.rebufferPenalty*F;for(var D=0;D<W.weights.latencyPenalty.length;D++){var I=W.weights.latencyPenalty[D];if(j<=I.threshold){W.latencyWSum+=I.penalty*j;break}}W.playbackSpeedWSum+=W.weights.playbackSpeedPenalty*Math.abs(1-U),W.totalQoe=W.bitrateWSum-W.bitrateSwitchWSum-W.rebufferWSum-W.latencyWSum-W.playbackSpeedWSum}return S={setupPerSegmentQoe:function(P,F,j){g=l("segment",P,F,j),i=P,h=F,_=j},logSegmentMetrics:function(P,F,j,U){g&&d(P,F,j,U,g)},getPerSegmentQoe:function(){return g},calculateSingleUseQoe:function(P,F,j,U){var W=null;return i&&h&&_&&(W=l("segment",i,h,_)),W?(d(P,F,j,U,W),W.totalQoe):0},reset:function(){n()}},n(),S}e.__dashjs_factory_name="LoLpQoeEvaluator";const t=oe.Z.getClassFactory(e)},5435:(et,we,C)=>{C.d(we,{Z:()=>n});var oe=C(6398),b=C(5448),e=C(4722),t=C(5317),S=C(2068),g=C(3860),i=C(6523),h=C(3393);function _(l){var d,P,F,j,U=(l=l||{}).dashMetrics,W=this.context;return P={getMaxIndex:function(D){try{var I=(0,S.Z)(W).create(),k=D.getMediaInfo().type,$=D.getAbrController(),J=D.getStreamInfo(),Ne=$.getQualityFor(k,J.id),Be=D.getMediaInfo(),te=U.getCurrentBufferState(k),ot=D.getScheduleController(),Ae=U.getCurrentBufferLevel(k,!0),ke=J&&J.manifestInfo?J.manifestInfo.isDynamic:null,pe=ot.getPlaybackController(),be=pe.getCurrentLiveLatency();if(!D.useLoLPABR()||k===h.Z.AUDIO)return I;be||(be=0);var He=pe.getPlaybackRate(),ut=$.getThroughputHistory().getSafeAverageThroughput(k,ke);if(d.debug("Throughput ".concat(Math.round(ut)," kbps")),isNaN(ut)||!te||$.getAbandonmentStateFor(J.id,k)===g.Z.ABANDON_LOAD)return I;for(var tt=Be.bitrateList,Se=D.getRepresentationInfo().fragmentDuration,We=tt[0].bandwidth/1e3,lt=tt[tt.length-1].bandwidth/1e3,Fe=0;Fe<tt.length;Fe++){var Xe=tt[Fe].bandwidth/1e3;Xe>lt?lt=Xe:Xe<We&&(We=Xe)}var ce=tt[Ne].bandwidth/1e3,de=U.getCurrentHttpRequest(k,!0),je=(de.tresponse.getTime()-de.trequest.getTime())/1e3,f=je>Se?je-Se:0;j.setupPerSegmentQoe(Se,lt,We),j.logSegmentMetrics(ce,f,be,He);var o=(0,i.Z)(W).create({targetLatency:1.5,bufferMin:.3,segmentDuration:Se,qoeEvaluator:j});return I.quality=F.getNextQuality(Be,1e3*ut,be,Ae,He,Ne,o),I.reason={throughput:ut,latency:be},I.priority=S.Z.PRIORITY.STRONG,ot.setTimeToLoadDelay(0),I.quality!==Ne&&d.debug("[TgcLearningRule]["+k+"] requesting switch to index: ",I.quality,"Average throughput",Math.round(ut),"kbps"),I}catch(v){throw v}},reset:function(){F.reset(),j.reset()}},d=(0,oe.Z)(W).getInstance().getLogger(P),F=(0,e.Z)(W).create(),j=(0,t.Z)(W).create(),P}_.__dashjs_factory_name="LoLPRule";const n=b.Z.getClassFactory(_)},6523:(et,we,C)=>{C.d(we,{Z:()=>e});var oe=C(5448);function b(t){var S,g,i,h,_=t.targetLatency,n=t.bufferMin,l=t.segmentDuration,d=t.qoeEvaluator;function P(){return l}function F(j,U){var W=P();return U>W?j-W:j+W-U}return S={getMinBuffer:function(){return n},getSegmentDuration:P,getNextBufferWithBitrate:function(j,U,W){return F(U,j*l/W)},getNextBuffer:F,findWeightVector:function(j,U,W,D,I,k){var $=null,J=null,Ne=null,Be=Math.abs(U-i);return j.forEach(function(te){g.forEach(function(ot){ot[0];var Ae=ot[1],ke=ot[2],pe=(ot[3],te.bitrate*l/I),be=F(W,pe),He=(ke===0?10:1/ke)*Math.max(1e-5,pe-be),ut=(Ae===0?10:1/Ae)*te.state.latency,tt=d.calculateSingleUseQoe(te.bitrate,He,ut,k);($===null||tt>$)&&function(Se,We,lt){return!(Se>_+lt)&&We>=n}(U,be,Be)&&($=tt,J=ot,Ne=te.bitrate)})}),J===null&&Ne===null&&(J=-1),i=U,J}},g=function j(U,W,D){if(D===W)return U;for(var I=U.length,k=0;k<I;k++)for(var $=U.shift(),J=0;J<h.length;J++)U.push($.concat(h[J]));return j(U,W,D+1)}((h=[.2,.4,.6,.8,1]).map(function(j){return[j]}),4,1),i=0,S}b.__dashjs_factory_name="LoLpWeightSelector";const e=oe.Z.getClassFactory(b)},2298:(et,we,C)=>{C.d(we,{Z:()=>oe});const oe=function b(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,b),this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0}},7803:(et,we,C)=>{C.d(we,{Y:()=>l,Z:()=>P});var oe=C(3393),b=C(1553),e=C(5448),t=C(2128),S=C(2594),g=C(7387),i=C(7417),h=C(9032),_=C(9326),n=C(7802),l=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function d(F){var j,U,W,D,I,k,$,J,Ne=this.context,Be=F.adapter,te=F.baseURLController,ot=F.streamInfo,Ae=F.timelineConverter,ke=F.debug,pe=F.eventBus,be=F.events,He=F.dashConstants,ut=(0,S.Z)(Ne).getInstance();function tt(We,lt){var Fe=new t.Z;Fe.id=We.id,Fe.bitrate=We.bandwidth,Fe.width=We.width,Fe.height=We.height,Fe.tilesHor=1,Fe.tilesVert=1,We.essentialProperties&&We.essentialProperties.forEach(function(Xe){if(l.indexOf(Xe.schemeIdUri)>=0&&Xe.value){var ce=Xe.value.split("x");ce.length!==2||isNaN(ce[0])||isNaN(ce[1])||(Fe.tilesHor=parseInt(ce[0],10),Fe.tilesVert=parseInt(ce[1],10))}}),lt?k.updateSegmentData(We).then(function(Xe){(function(ce,de,je){var f=[],o=function(v,E){var X,K,he,Ce,De=[],ve=0;for(X=0,K=v.segments.length;X<K;X++)he=v.segments[X],(Ce=(0,g.TJ)(Ae,Be.getIsDynamic(),E,he.startTime,he.duration,he.timescale,he.media,he.mediaRange,ve))&&(De.push(Ce),Ce=null,ve++);return De}(je,de);de.segments=o,ce.segmentDuration=de.segments[0].duration,ce.readThumbnail=function(v,E){var X=null;f.some(function(K){if(K.start<=v&&K.end>v)return X=K.url,!0}),X?E(X):de.segments.some(function(K){if(K.mediaStartTime<=v&&K.mediaStartTime+K.duration>v){var he=te.resolve(de.path);return $.load({method:"get",url:he.url,request:{range:K.mediaRange,responseType:"arraybuffer"},onload:function(Ce){var De=J.getSamplesInfo(Ce.target.response),ve=new Blob([Ce.target.response.slice(De.sampleList[0].offset,De.sampleList[0].offset+De.sampleList[0].size)],{type:"image/jpeg"}),Le=window.URL.createObjectURL(ve);f.push({start:K.mediaStartTime,end:K.mediaStartTime+K.duration,url:Le}),E&&E(Le)}}),!0}})}})(Fe,We,Xe)}):(Fe.startNumber=We.startNumber,Fe.segmentDuration=We.segmentDuration,Fe.timescale=We.timescale,Fe.templateUrl=function(Xe){var ce=ut.isRelative(Xe.media)?ut.resolve(Xe.media,te.resolve(Xe.path).url):Xe.media;return ce?(0,g.Aj)(ce,Xe.id):""}(We)),Fe.tilesHor>0&&Fe.tilesVert>0&&(Fe.widthPerTile=Fe.width/Fe.tilesHor,Fe.heightPerTile=Fe.height/Fe.tilesVert,U.push(Fe))}function Se(){U=[],D=-1,I=null}return j={getTracks:function(){return U},addTracks:function(){if(ot&&Be&&(I=Be.getMediaInfoForType(ot,oe.Z.IMAGE))){var We=Be.getVoRepresentations(I);We&&We.length>0&&We.forEach(function(lt){(lt.segmentInfoType===b.Z.SEGMENT_TEMPLATE&&lt.segmentDuration>0&&lt.media||lt.segmentInfoType===b.Z.SEGMENT_TIMELINE)&&tt(lt),lt.segmentInfoType===b.Z.SEGMENT_BASE&&tt(lt,!0)}),U.length>0&&U.sort(function(lt,Fe){return lt.bitrate-Fe.bitrate})}},reset:Se,setTrackByIndex:function(We){U&&U.length!==0&&(We>=U.length&&(We=U.length-1),D=We)},getCurrentTrack:function(){return D<0?null:U[D]},getCurrentTrackIndex:function(){return D},getThumbnailRequestForTime:function(We){for(var lt,Fe=Be.getVoRepresentations(I),Xe=0;Xe<Fe.length;Xe++)if(U[D].id===Fe[Xe].id){lt=Fe[Xe];break}return W.getSegmentRequestForTime(I,lt,We)}},Se(),$=(0,h.Z)(Ne).create({}),J=(0,i.Z)(Ne).getInstance(),k=(0,n.Z)(Ne).create({events:be,eventBus:pe,streamInfo:ot,timelineConverter:Ae,dashConstants:He,dashMetrics:F.dashMetrics,segmentBaseController:F.segmentBaseController,type:oe.Z.IMAGE}),(W=(0,_.Z)(Ne).create({streamInfo:ot,type:oe.Z.IMAGE,timelineConverter:Ae,segmentsController:k,baseURLController:te,debug:ke,eventBus:pe,events:be,dashConstants:He,urlUtils:ut})).initialize(!!Be&&Be.getIsDynamic()),j}d.__dashjs_factory_name="ThumbnailTracks";const P=e.Z.getClassFactory(d)},7417:(et,we,C)=>{C.d(we,{Z:()=>i});var oe=C(6398),b=C(8260),e=C(5448),t=C(6934),S=C(9597);function g(){var h,_,n=this.context;function l(F){if(!F)return null;F.fileStart===void 0&&(F.fileStart=0);var j=t.parseBuffer(F),U=(0,b.Z)(n).create();return U.setData(j),U}function d(F,j){return F[j+3]>>>0|F[j+2]<<8>>>0|F[j+1]<<16>>>0|F[j]<<24>>>0}function P(F,j){return String.fromCharCode(F[j++])+String.fromCharCode(F[j++])+String.fromCharCode(F[j++])+String.fromCharCode(F[j])}return _={parse:l,findLastTopIsoBoxCompleted:function(F,j,U){if(U===void 0&&(U=0),!j||U+8>=j.byteLength)return new S.Z(0,!1);for(var W,D=j instanceof ArrayBuffer?new Uint8Array(j):j,I=0;U<D.byteLength;){var k=d(D,U),$=P(D,U+4);if(k===0)break;U+k<=D.byteLength&&(F.indexOf($)>=0?W=new S.Z(U,!0,k):I=U+k),U+=k}return W||new S.Z(I,!1)},getMediaTimescaleFromMoov:function(F){var j=l(F),U=j?j.getBox("mdhd"):void 0;return U?U.timescale:NaN},getSamplesInfo:function(F){if(!F||F.byteLength===0)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var j,U,W,D,I,k,$,J,Ne,Be,te,ot,Ae,ke,pe,be,He=l(F),ut=He.getBoxes("moof"),tt=He.getBoxes("mfhd");pe=He.getBoxes("moof").length,ke=tt[tt.length-1].sequence_number,U=0,I=[];var Se=-1,We=-1;for(Be=0;Be<ut.length;Be++){var lt=ut[Be],Fe=lt.getChildBoxes("traf");for(J=0;J<Fe.length;J++){var Xe=Fe[J],ce=Xe.getChildBox("tfhd"),de=Xe.getChildBox("tfdt");D=de.baseMediaDecodeTime;var je=Xe.getChildBoxes("trun"),f=Xe.getChildBoxes("subs");for(Ne=0;Ne<je.length;Ne++){var o=je[Ne];for(U=o.sample_count,Ae=(ce.base_data_offset||0)+(o.data_offset||0),$=0;$<U;$++){j=(k=o.samples[$]).sample_duration!==void 0?k.sample_duration:ce.default_sample_duration,W=k.sample_size!==void 0?k.sample_size:ce.default_sample_size;var v={dts:D,cts:D+(k.sample_composition_time_offset!==void 0?k.sample_composition_time_offset:0),duration:j,offset:lt.offset+Ae,size:W,subSizes:[W]};if(f)for(te=0;te<f.length;te++){var E=f[te];if(Se<E.entry_count-1&&$>We&&(Se++,We+=E.entries[Se].sample_delta),$==We){v.subSizes=[];var X=E.entries[Se];for(ot=0;ot<X.subsample_count;ot++)v.subSizes.push(X.subsamples[ot].subsample_size)}}I.push(v),Ae+=W,D+=j}}be=D-de.baseMediaDecodeTime}}return{sampleList:I,lastSequenceNumber:ke,totalDuration:be,numSequences:pe}},findInitRange:function(F){var j=null,U=l(F);if(!U)return j;var W=U.getBox("ftyp"),D=U.getBox("moov");return h.debug("Searching for initialization."),D&&D.isComplete&&(j=(W?W.offset:D.offset)+"-"+(D.offset+D.size-1),h.debug("Found the initialization.  Range: "+j)),j},parsePayload:function(F,j,U){if(U===void 0&&(U=0),!j||U+8>=j.byteLength)return new S.Z(0,!1);for(var W,D=j instanceof ArrayBuffer?new Uint8Array(j):j,I=0;U<D.byteLength;){var k=d(D,U),$=P(D,U+4);if(k===0)break;U+k<=D.byteLength&&(F.indexOf($)>=0?W=new S.Z(U,!0,k,$):I=U+k),U+=k}return W||new S.Z(I,!1)}},h=(0,oe.Z)(n).getInstance().getLogger(_),_}g.__dashjs_factory_name="BoxParser";const i=e.Z.getSingletonFactory(g)},1715:(et,we,C)=>{C.d(we,{B:()=>S,Z:()=>i});var oe=C(5448),b=C(7803),e=C(3393),t=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function S(){var h="WebKitMediaSource"in window,_="MediaSource"in window;return h||_}function g(){var h,_,n;return h={setConfig:function(l){l&&l.settings&&(_=l.settings)},supportsMediaSource:S,supportsEncryptedMedia:function(){return n},supportsCodec:function(l,d){return d!==e.Z.AUDIO&&d!==e.Z.VIDEO?Promise.resolve(!0):function(P,F){return _.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(P.codec&&F===e.Z.AUDIO||F===e.Z.VIDEO&&P.codec&&P.width&&P.height&&P.bitrate&&P.framerate)}(l,d)?function(P,F){return new Promise(function(j){if(P&&P.codec){var U={type:"media-source"};U[F]={},U[F].contentType=P.codec,U[F].width=P.width,U[F].height=P.height,U[F].bitrate=parseInt(P.bitrate),U[F].framerate=parseFloat(P.framerate),navigator.mediaCapabilities.decodingInfo(U).then(function(W){j(W.supported)}).catch(function(){j(!1)})}else j(!1)})}(l,d):function(P){return new Promise(function(F){if(P&&P.codec){var j=P.codec;P.width&&P.height&&(j+=';width="'+P.width+'";height="'+P.height+'"'),"MediaSource"in window&&MediaSource.isTypeSupported(j)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(j)?F(!0):F(!1)}else F(!1)})}(l)},setEncryptedMediaSupported:function(l){n=l},supportsEssentialProperty:function(l){try{return b.Y.indexOf(l.schemeIdUri)!==-1}catch{return!0}},codecRootCompatibleWithCodec:function(l,d){for(var P,F=l.split(".")[0],j=d.indexOf(F)===0,U=0;U<t.length;U++)if(t[U].codec===F){P=t[U];break}return P?j||P.compatibleCodecs.some(function(W){return d.indexOf(W)===0}):j}},n=!1,h}g.__dashjs_factory_name="Capabilities";const i=oe.Z.getSingletonFactory(g)},2295:(et,we,C)=>{C.d(we,{Z:()=>t});var oe=C(5448),b=C(3106);function e(){return{customTimeRangeArray:[],length:0,add:function(S,g){var i;for(i=0;i<this.customTimeRangeArray.length&&S>this.customTimeRangeArray[i].start;i++);for(this.customTimeRangeArray.splice(i,0,{start:S,end:g}),i=0;i<this.customTimeRangeArray.length-1;i++)this.mergeRanges(i,i+1)&&i--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(S,g){for(var i=0;i<this.customTimeRangeArray.length;i++)if(S<=this.customTimeRangeArray[i].start&&g>=this.customTimeRangeArray[i].end)this.customTimeRangeArray.splice(i,1),i--;else{if(S>this.customTimeRangeArray[i].start&&g<this.customTimeRangeArray[i].end){this.customTimeRangeArray.splice(i+1,0,{start:g,end:this.customTimeRangeArray[i].end}),this.customTimeRangeArray[i].end=S;break}S>this.customTimeRangeArray[i].start&&S<this.customTimeRangeArray[i].end?this.customTimeRangeArray[i].end=S:g>this.customTimeRangeArray[i].start&&g<this.customTimeRangeArray[i].end&&(this.customTimeRangeArray[i].start=g)}this.length=this.customTimeRangeArray.length},mergeRanges:function(S,g){var i=this.customTimeRangeArray[S],h=this.customTimeRangeArray[g];return i.start<=h.start&&h.start<=i.end&&i.end<=h.end?(i.end=h.end,this.customTimeRangeArray.splice(g,1),!0):h.start<=i.start&&i.start<=h.end&&h.end<=i.end?(i.start=h.start,this.customTimeRangeArray.splice(g,1),!0):h.start<=i.start&&i.start<=h.end&&i.end<=h.end?(this.customTimeRangeArray.splice(S,1),!0):i.start<=h.start&&h.start<=i.end&&h.end<=i.end&&(this.customTimeRangeArray.splice(g,1),!0)},start:function(S){return(0,b.SE)(S),S>=this.customTimeRangeArray.length||S<0?NaN:this.customTimeRangeArray[S].start},end:function(S){return(0,b.SE)(S),S>=this.customTimeRangeArray.length||S<0?NaN:this.customTimeRangeArray[S].end}}}e.__dashjs_factory_name="CustomTimeRanges";const t=oe.Z.getClassFactory(e)},5:(et,we,C)=>{C.d(we,{Z:()=>e});var oe=C(5448);function b(){var t,S=/^[a-z][a-z0-9+\-_.]*:/i,g=/^https?:\/\//i,i=/^https:\/\//i,h=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,_=function(W,D){try{return new window.URL(W,D).toString()}catch{return W}},n=function(W,D){var I=l;if(!D||!F(W))return W;j(W)&&(I=d),U(W)&&(I=P);var k=I(D),$=k.charAt(k.length-1)!=="/"&&W.charAt(0)!=="/"?"/":"";return[k,W].join($)};function l(W){var D=W.indexOf("/"),I=W.lastIndexOf("/");return D!==-1?I===D+1?W:(W.indexOf("?")!==-1&&(W=W.substring(0,W.indexOf("?"))),W.substring(0,I+1)):""}function d(W){var D=W.match(h);return D?D[1]:""}function P(W){var D=W.match(S);return D?D[0]:""}function F(W){return!S.test(W)}function j(W){return F(W)&&W.charAt(0)==="/"}function U(W){return W.indexOf("//")===0}return function(){try{new window.URL("x","http://y"),t=_}catch{}finally{t=t||n}}(),{parseBaseUrl:l,parseOrigin:d,parseScheme:P,isRelative:F,isPathAbsolute:j,isSchemeRelative:U,isHTTPURL:function(W){return g.test(W)},isHTTPS:function(W){return i.test(W)},removeHostname:function(W){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(W)[2].substring(1)},resolve:function(W,D){return t(W,D)}}}b.__dashjs_factory_name="DefaultURLUtils";const e=oe.Z.getSingletonFactory(b)},8260:(et,we,C)=>{C.d(we,{Z:()=>t});var oe=C(2839),b=C(5448);function e(){var S;function g(h){var _=[];if(!h||!S||typeof S.fetchAll!="function")return _;for(var n,l=S.fetchAll(h),d=0,P=l.length;d<P;d++)(n=i(l[d]))&&_.push(n);return _}function i(h){if(!h)return null;var _=new oe.Z(h);return h.hasOwnProperty("_incomplete")&&(_.isComplete=!h._incomplete),_}return{getBox:function(h){return h&&S&&S.boxes&&S.boxes.length!==0&&typeof S.fetch=="function"?i(S.fetch(h)):null},getBoxes:g,setData:function(h){S=h},getLastBox:function(){if(!S||!S.boxes||!S.boxes.length)return null;var h=g(S.boxes[S.boxes.length-1].type);return h.length>0?h[h.length-1]:null}}}e.__dashjs_factory_name="IsoFile";const t=b.Z.getClassFactory(e)},7473:(et,we,C)=>{C.d(we,{Z:()=>t,k:()=>b});var oe=C(5448);function b(S,g){var i={url:S.url,method:S.method,headers:Object.assign({},S.headers),credentials:S.withCredentials?"include":void 0};return Promise.resolve(g.modifyRequest(i)).then(function(){return Object.assign(S,i,{withCredentials:i.credentials==="include"})})}function e(){return{modifyRequest:null,modifyRequestURL:function(S){return S},modifyRequestHeader:function(S,g){return g.url,S}}}e.__dashjs_factory_name="RequestModifier";const t=oe.Z.getSingletonFactory(e)},3106:(et,we,C)=>{C.d(we,{PS:()=>e,SE:()=>t});var oe=C(3393);function b(S){return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},b(S)}function e(S,g){if(b(S)!==g)throw oe.Z.BAD_ARGUMENT_ERROR}function t(S){if(S===null||isNaN(S)||S%1!=0)throw oe.Z.BAD_ARGUMENT_ERROR+" : argument is not an integer"}},2594:(et,we,C)=>{C.d(we,{Z:()=>t});var oe=C(5448),b=C(5);function e(){var S,g=[],i=this.context;function h(_,n,l){var d=function(P){var F;for(F=0;F<g.length;F++)if(g[F].regex.test(P))return g[F].utils;return S}(l||n);return d&&typeof d[_]=="function"?d[_](n,l):S[_](n,l)}return S=(0,b.Z)(i).getInstance(),{registerUrlRegex:function(_,n){g.push({regex:_,utils:n})},parseBaseUrl:function(_){return h("parseBaseUrl",_)},parseOrigin:function(_){return h("parseOrigin",_)},parseScheme:function(_){return h("parseScheme",_)},isRelative:function(_){return h("isRelative",_)},isPathAbsolute:function(_){return h("isPathAbsolute",_)},isSchemeRelative:function(_){return h("isSchemeRelative",_)},isHTTPURL:function(_){return h("isHTTPURL",_)},isHTTPS:function(_){return h("isHTTPS",_)},removeHostname:function(_){return h("removeHostname",_)},resolve:function(_,n){return h("resolve",_,n)}}}e.__dashjs_factory_name="URLUtils";const t=oe.Z.getSingletonFactory(e)},5459:(et,we,C)=>{C.d(we,{Z:()=>oe});const oe=function b(e,t,S){(function(g,i){if(!(g instanceof i))throw new TypeError("Cannot call a class as a function")})(this,b),this.code=e||null,this.message=t||null,this.data=S||null}},3186:(et,we,C)=>{C.d(we,{Z:()=>t});var oe=C(7855);function b(S,g){for(var i=0;i<g.length;i++){var h=g[i];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(S,h.key,h)}}var e=function(){function S(h){(function(_,n){if(!(_ instanceof n))throw new TypeError("Cannot call a class as a function")})(this,S),this.action=S.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=h||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}var g,i;return g=S,(i=[{key:"isInitializationRequest",value:function(){return this.type&&this.type===oe.w.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(h){this.type=h&&h.init?oe.w.INIT_SEGMENT_TYPE:oe.w.MEDIA_SEGMENT_TYPE,this.url=h&&h.url?h.url:null,this.range=h&&h.range?h.range.start+"-"+h.range.end:null,this.mediaType=h&&h.mediaType?h.mediaType:null}}])&&b(g.prototype,i),S}();e.ACTION_DOWNLOAD="download",e.ACTION_COMPLETE="complete";const t=e},2839:(et,we,C)=>{function oe(e,t){for(var S=0;S<t.length;S++){var g=t[S];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(e,g.key,g)}}C.d(we,{Z:()=>b});const b=function(){function e(g){if(function(P,F){if(!(P instanceof F))throw new TypeError("Cannot call a class as a function")}(this,e),this.offset=g._offset,this.type=g.type,this.size=g.size,this.boxes=[],g.boxes)for(var i=0;i<g.boxes.length;i++)this.boxes.push(new e(g.boxes[i]));switch(this.isComplete=!0,g.type){case"sidx":if(this.timescale=g.timescale,this.earliest_presentation_time=g.earliest_presentation_time,this.first_offset=g.first_offset,this.references=g.references,g.references){this.references=[];for(var h=0;h<g.references.length;h++){var _={reference_type:g.references[h].reference_type,referenced_size:g.references[h].referenced_size,subsegment_duration:g.references[h].subsegment_duration};this.references.push(_)}}break;case"emsg":this.id=g.id,this.version=g.version===1?1:0,this.value=g.value,this.timescale=g.timescale,this.scheme_id_uri=g.scheme_id_uri,this.presentation_time_delta=g.version===1?g.presentation_time:g.presentation_time_delta,this.event_duration=g.event_duration,this.message_data=g.message_data;break;case"mdhd":this.timescale=g.timescale;break;case"mfhd":this.sequence_number=g.sequence_number;break;case"subs":this.entry_count=g.entry_count,this.entries=g.entries;break;case"tfhd":this.base_data_offset=g.base_data_offset,this.sample_description_index=g.sample_description_index,this.default_sample_duration=g.default_sample_duration,this.default_sample_size=g.default_sample_size,this.default_sample_flags=g.default_sample_flags,this.flags=g.flags;break;case"tfdt":this.version=g.version,this.baseMediaDecodeTime=g.baseMediaDecodeTime,this.flags=g.flags;break;case"trun":if(this.sample_count=g.sample_count,this.first_sample_flags=g.first_sample_flags,this.data_offset=g.data_offset,this.flags=g.flags,this.samples=g.samples,g.samples){this.samples=[];for(var n=0,l=g.samples.length;n<l;n++){var d={sample_size:g.samples[n].sample_size,sample_duration:g.samples[n].sample_duration,sample_composition_time_offset:g.samples[n].sample_composition_time_offset};this.samples.push(d)}}break;case"prft":this.version=g.version,this.reference_track_ID=g.reference_track_ID,this.ntp_timestamp_sec=g.ntp_timestamp_sec,this.ntp_timestamp_frac=g.ntp_timestamp_frac,this.media_time=g.media_time,this.flags=g.flags}}var t,S;return t=e,(S=[{key:"getChildBox",value:function(g){for(var i=0;i<this.boxes.length;i++)if(this.boxes[i].type===g)return this.boxes[i]}},{key:"getChildBoxes",value:function(g){for(var i=[],h=0;h<this.boxes.length;h++)this.boxes[h].type===g&&i.push(this.boxes[h]);return i}}])&&oe(t.prototype,S),e}()},9597:(et,we,C)=>{C.d(we,{Z:()=>oe});const oe=function b(e,t,S){(function(g,i){if(!(g instanceof i))throw new TypeError("Cannot call a class as a function")})(this,b),this.lastCompletedOffset=e,this.found=t,this.size=S}},2128:(et,we,C)=>{C.d(we,{Z:()=>oe});const oe=function b(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,b),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}},7855:(et,we,C)=>{function oe(t,S){if(!(t instanceof S))throw new TypeError("Cannot call a class as a function")}C.d(we,{O:()=>e,w:()=>b});var b=function t(){oe(this,t),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this.cmsd=null,this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null},e=function t(){oe(this,t),this.s=null,this.d=null,this.b=[]};b.GET="GET",b.HEAD="HEAD",b.MPD_TYPE="MPD",b.XLINK_EXPANSION_TYPE="XLinkExpansion",b.INIT_SEGMENT_TYPE="InitializationSegment",b.INDEX_SEGMENT_TYPE="IndexSegment",b.MEDIA_SEGMENT_TYPE="MediaSegment",b.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",b.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",b.DVB_REPORTING_TYPE="DVBReporting",b.LICENSE="license",b.CONTENT_STEERING_TYPE="ContentSteering",b.OTHER_TYPE="other"},3039:(et,we)=>{function C(b,e){return function(t,S){for(var g,i,h,_=oe(t,"tag"),n=oe(S??"*","range"),l=[],d=-1;++d<n.length;)if(g=n[d].toLowerCase(),e||g!=="*"){for(i=-1,h=[];++i<_.length;)if(b(_[i].toLowerCase(),g)){if(!e)return _[i];l.push(_[i])}else h.push(_[i]);_=h}return e?l:void 0}}function oe(b,e){var t=b&&typeof b=="string"?[b]:b;if(!t||typeof t!="object"||!("length"in t))throw new Error("Invalid "+e+" `"+t+"`, expected non-empty string");return t}we.basicFilter=C(function(b,e){return e==="*"||b===e||b.indexOf(e+"-")>-1},!0),we.extendedFilter=C(function(b,e){var t=b.split("-"),S=e.split("-"),g=0,i=0;if(S[i]!=="*"&&t[g]!==S[i])return!1;for(g++,i++;i<S.length;)if(S[i]!=="*"){if(!t[g])return!1;if(t[g]!==S[i]){if(t[g].length===1)return!1;g++}else g++,i++}else i++;return!0},!0),we.lookup=C(function(b,e){for(var t,S=e;;){if(S==="*"||b===S)return!0;if((t=S.lastIndexOf("-"))<0)return!1;S.charAt(t-2)==="-"&&(t-=2),S=S.slice(0,t)}})},3973:(et,we,C)=>{et.exports=C(3854)},3854:(et,we,C)=>{var oe=C(2415),b=C(3039),e=C(7778),t=C(5813),S=C(3165),g=C(9460);et.exports=function(F,j){var U,W=j||{},D=oe.parse(String(F||"").toLowerCase(),W),I=oe.stringify(D),k=-1;if(!I)return I;for(;++k<e.length;)b.extendedFilter(I,e[k].from).length&&(n(D,e[k].from,e[k].to),I=oe.stringify(D));for(k=-1;++k<t.length;)l(D,t[k].from.field,t[k].from.value)&&d(D,t[k].to.field,t[k].to.value);for(I=oe.stringify(Object.assign({},D,_)),k=-1;++k<S.length;)I===S[k]&&(n(D,S[k],S[k].split("-").slice(0,-1).join("-")),I=oe.stringify(Object.assign({},D,_)));if(D.extensions.sort(P),W.warning)for(U in g)i.call(g[U],D[U])&&W.warning("Deprecated "+U+" `"+D[U]+"`, expected one of `"+g[U][D[U]].join("`, `")+"`",null,7);return D.script&&(D.script=D.script.charAt(0).toUpperCase()+D.script.slice(1)),D.region&&(D.region=D.region.toUpperCase()),oe.stringify(D)};var i={}.hasOwnProperty,h=new Intl.Collator,_={variants:[],extensions:[],privateuse:[],irregular:null,regular:null};function n(F,j,U){var W,D=oe.parse(j),I=oe.parse(U),k=[];for(W in D)D[W]&&D[W].length&&l(F,W,D[W])&&k.push(W);for(W in I)I[W]&&I[W].length&&(k.indexOf(W)>-1||!F[W]||!F[W].length)&&d(F,W,I[W])}function l(F,j,U){var W,D,I,k,$=!1;if(U){if(D=W=F[j],W&&typeof W=="object")for(D=[],I=-1;++I<W.length;)k=W[I],U.indexOf(k)<0?D.push(k):$=!0;else W===U&&(D=null,$=!0);F[j]=D}return $}function d(F,j,U){var W,D,I,k=F[j];if(k&&typeof k=="object")for(W=[].concat(U),D=-1;++D<W.length;)I=W[D],k.indexOf(I)<0&&k.push(I);else F[j]=U}function P(F,j){return h.compare(F.singleton,j.singleton)}},2415:(et,we,C)=>{we.parse=C(6903),we.stringify=C(6713)},6903:(et,we,C)=>{var oe=C(2219),b=C(3516),e=C(395),t=C(858),S=C(8589);et.exports=function i(h,_){var n,l,d,P=_||{},F={language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null},j=String(h),U=j.toLowerCase(),W=0;if(h==null)throw new Error("Expected string, got `"+h+"`");if(g.call(S,U))return(P.normalize==null||P.normalize)&&S[U]?i(S[U]):(F[t.indexOf(U)===-1?"irregular":"regular"]=j,F);for(;b(U.charCodeAt(W))&&W<9;)W++;if(W>1&&W<9){if(F.language=j.slice(0,W),W<4)for(l=0;U.charCodeAt(W)===45&&b(U.charCodeAt(W+1))&&b(U.charCodeAt(W+2))&&b(U.charCodeAt(W+3))&&!b(U.charCodeAt(W+4));){if(l>2)return D(W,3,"Too many extended language subtags, expected at most 3 subtags");F.extendedLanguageSubtags.push(j.slice(W+1,W+4)),W+=4,l++}for(U.charCodeAt(W)===45&&b(U.charCodeAt(W+1))&&b(U.charCodeAt(W+2))&&b(U.charCodeAt(W+3))&&b(U.charCodeAt(W+4))&&!b(U.charCodeAt(W+5))&&(F.script=j.slice(W+1,W+5),W+=5),U.charCodeAt(W)===45&&(b(U.charCodeAt(W+1))&&b(U.charCodeAt(W+2))&&!b(U.charCodeAt(W+3))?(F.region=j.slice(W+1,W+3),W+=3):e(U.charCodeAt(W+1))&&e(U.charCodeAt(W+2))&&e(U.charCodeAt(W+3))&&!e(U.charCodeAt(W+4))&&(F.region=j.slice(W+1,W+4),W+=4));U.charCodeAt(W)===45;){for(d=n=W+1;oe(U.charCodeAt(d));){if(d-n>7)return D(d,1,"Too long variant, expected at most 8 characters");d++}if(!(d-n>4||d-n>3&&e(U.charCodeAt(n))))break;F.variants.push(j.slice(n,d)),W=d}for(;U.charCodeAt(W)===45&&U.charCodeAt(W+1)!==120&&oe(U.charCodeAt(W+1))&&U.charCodeAt(W+2)===45&&oe(U.charCodeAt(W+3));){for(d=W+2,l=0;U.charCodeAt(d)===45&&oe(U.charCodeAt(d+1))&&oe(U.charCodeAt(d+2));)for(d=(n=d+1)+2,l++;oe(U.charCodeAt(d));){if(d-n>7)return D(d,2,"Too long extension, expected at most 8 characters");d++}if(!l)return D(d,4,"Empty extension, extensions must have at least 2 characters of content");F.extensions.push({singleton:j.charAt(W+1),extensions:j.slice(W+3,d).split("-")}),W=d}}else W=0;if(W===0&&U.charCodeAt(W)===120||U.charCodeAt(W)===45&&U.charCodeAt(W+1)===120)for(d=W=W?W+2:1;U.charCodeAt(d)===45&&oe(U.charCodeAt(d+1));){for(d=n=W+1;oe(U.charCodeAt(d));){if(d-n>7)return D(d,5,"Too long private-use area, expected at most 8 characters");d++}F.privateuse.push(j.slice(W+1,d)),W=d}return W!==j.length?D(W,6,"Found superfluous content after tag"):F;function D(I,k,$){return P.warning&&P.warning($,k,I),P.forgiving?F:{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}};var g={}.hasOwnProperty},6713:et=>{et.exports=function(we){var C,oe,b,e=we||{},t=[];if(e.irregular||e.regular)return e.irregular||e.regular;if(e.language)for(t=t.concat(e.language,e.extendedLanguageSubtags||[],e.script||[],e.region||[],e.variants||[]),C=e.extensions||[],oe=-1;++oe<C.length;)(b=C[oe]).singleton&&b.extensions&&b.extensions.length&&(t=t.concat(b.singleton,b.extensions));return e.privateuse&&e.privateuse.length&&(t=t.concat("x",e.privateuse)),t.join("-")}},1549:(et,we,C)=>{var oe=C(6693),b=C(2165),e=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;we.Buffer=g,we.SlowBuffer=function(f){return+f!=f&&(f=0),g.alloc(+f)},we.INSPECT_MAX_BYTES=50;var t=2147483647;function S(f){if(f>t)throw new RangeError('The value "'+f+'" is invalid for option "size"');var o=new Uint8Array(f);return Object.setPrototypeOf(o,g.prototype),o}function g(f,o,v){if(typeof f=="number"){if(typeof o=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return _(f)}return i(f,o,v)}function i(f,o,v){if(typeof f=="string")return function(K,he){if(typeof he=="string"&&he!==""||(he="utf8"),!g.isEncoding(he))throw new TypeError("Unknown encoding: "+he);var Ce=0|P(K,he),De=S(Ce),ve=De.write(K,he);return ve!==Ce&&(De=De.slice(0,ve)),De}(f,o);if(ArrayBuffer.isView(f))return function(K){if(ce(K,Uint8Array)){var he=new Uint8Array(K);return l(he.buffer,he.byteOffset,he.byteLength)}return n(K)}(f);if(f==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(ce(f,ArrayBuffer)||f&&ce(f.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ce(f,SharedArrayBuffer)||f&&ce(f.buffer,SharedArrayBuffer)))return l(f,o,v);if(typeof f=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var E=f.valueOf&&f.valueOf();if(E!=null&&E!==f)return g.from(E,o,v);var X=function(K){if(g.isBuffer(K)){var he=0|d(K.length),Ce=S(he);return Ce.length===0||K.copy(Ce,0,0,he),Ce}return K.length!==void 0?typeof K.length!="number"||de(K.length)?S(0):n(K):K.type==="Buffer"&&Array.isArray(K.data)?n(K.data):void 0}(f);if(X)return X;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof f[Symbol.toPrimitive]=="function")return g.from(f[Symbol.toPrimitive]("string"),o,v);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f)}function h(f){if(typeof f!="number")throw new TypeError('"size" argument must be of type number');if(f<0)throw new RangeError('The value "'+f+'" is invalid for option "size"')}function _(f){return h(f),S(f<0?0:0|d(f))}function n(f){for(var o=f.length<0?0:0|d(f.length),v=S(o),E=0;E<o;E+=1)v[E]=255&f[E];return v}function l(f,o,v){if(o<0||f.byteLength<o)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<o+(v||0))throw new RangeError('"length" is outside of buffer bounds');var E;return E=o===void 0&&v===void 0?new Uint8Array(f):v===void 0?new Uint8Array(f,o):new Uint8Array(f,o,v),Object.setPrototypeOf(E,g.prototype),E}function d(f){if(f>=t)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+t.toString(16)+" bytes");return 0|f}function P(f,o){if(g.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||ce(f,ArrayBuffer))return f.byteLength;if(typeof f!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof f);var v=f.length,E=arguments.length>2&&arguments[2]===!0;if(!E&&v===0)return 0;for(var X=!1;;)switch(o){case"ascii":case"latin1":case"binary":return v;case"utf8":case"utf-8":return lt(f).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*v;case"hex":return v>>>1;case"base64":return Fe(f).length;default:if(X)return E?-1:lt(f).length;o=(""+o).toLowerCase(),X=!0}}function F(f,o,v){var E=!1;if((o===void 0||o<0)&&(o=0),o>this.length||((v===void 0||v>this.length)&&(v=this.length),v<=0)||(v>>>=0)<=(o>>>=0))return"";for(f||(f="utf8");;)switch(f){case"hex":return ke(this,o,v);case"utf8":case"utf-8":return Be(this,o,v);case"ascii":return ot(this,o,v);case"latin1":case"binary":return Ae(this,o,v);case"base64":return Ne(this,o,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pe(this,o,v);default:if(E)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase(),E=!0}}function j(f,o,v){var E=f[o];f[o]=f[v],f[v]=E}function U(f,o,v,E,X){if(f.length===0)return-1;if(typeof v=="string"?(E=v,v=0):v>2147483647?v=2147483647:v<-2147483648&&(v=-2147483648),de(v=+v)&&(v=X?0:f.length-1),v<0&&(v=f.length+v),v>=f.length){if(X)return-1;v=f.length-1}else if(v<0){if(!X)return-1;v=0}if(typeof o=="string"&&(o=g.from(o,E)),g.isBuffer(o))return o.length===0?-1:W(f,o,v,E,X);if(typeof o=="number")return o&=255,typeof Uint8Array.prototype.indexOf=="function"?X?Uint8Array.prototype.indexOf.call(f,o,v):Uint8Array.prototype.lastIndexOf.call(f,o,v):W(f,[o],v,E,X);throw new TypeError("val must be string, number or Buffer")}function W(f,o,v,E,X){var K,he=1,Ce=f.length,De=o.length;if(E!==void 0&&((E=String(E).toLowerCase())==="ucs2"||E==="ucs-2"||E==="utf16le"||E==="utf-16le")){if(f.length<2||o.length<2)return-1;he=2,Ce/=2,De/=2,v/=2}function ve(ht,st){return he===1?ht[st]:ht.readUInt16BE(st*he)}if(X){var Le=-1;for(K=v;K<Ce;K++)if(ve(f,K)===ve(o,Le===-1?0:K-Le)){if(Le===-1&&(Le=K),K-Le+1===De)return Le*he}else Le!==-1&&(K-=K-Le),Le=-1}else for(v+De>Ce&&(v=Ce-De),K=v;K>=0;K--){for(var Ze=!0,Je=0;Je<De;Je++)if(ve(f,K+Je)!==ve(o,Je)){Ze=!1;break}if(Ze)return K}return-1}function D(f,o,v,E){v=Number(v)||0;var X=f.length-v;E?(E=Number(E))>X&&(E=X):E=X;var K=o.length;E>K/2&&(E=K/2);for(var he=0;he<E;++he){var Ce=parseInt(o.substr(2*he,2),16);if(de(Ce))return he;f[v+he]=Ce}return he}function I(f,o,v,E){return Xe(lt(o,f.length-v),f,v,E)}function k(f,o,v,E){return Xe(function(X){for(var K=[],he=0;he<X.length;++he)K.push(255&X.charCodeAt(he));return K}(o),f,v,E)}function $(f,o,v,E){return Xe(Fe(o),f,v,E)}function J(f,o,v,E){return Xe(function(X,K){for(var he,Ce,De,ve=[],Le=0;Le<X.length&&!((K-=2)<0);++Le)Ce=(he=X.charCodeAt(Le))>>8,De=he%256,ve.push(De),ve.push(Ce);return ve}(o,f.length-v),f,v,E)}function Ne(f,o,v){return o===0&&v===f.length?oe.fromByteArray(f):oe.fromByteArray(f.slice(o,v))}function Be(f,o,v){v=Math.min(f.length,v);for(var E=[],X=o;X<v;){var K,he,Ce,De,ve=f[X],Le=null,Ze=ve>239?4:ve>223?3:ve>191?2:1;if(X+Ze<=v)switch(Ze){case 1:ve<128&&(Le=ve);break;case 2:(192&(K=f[X+1]))==128&&(De=(31&ve)<<6|63&K)>127&&(Le=De);break;case 3:K=f[X+1],he=f[X+2],(192&K)==128&&(192&he)==128&&(De=(15&ve)<<12|(63&K)<<6|63&he)>2047&&(De<55296||De>57343)&&(Le=De);break;case 4:K=f[X+1],he=f[X+2],Ce=f[X+3],(192&K)==128&&(192&he)==128&&(192&Ce)==128&&(De=(15&ve)<<18|(63&K)<<12|(63&he)<<6|63&Ce)>65535&&De<1114112&&(Le=De)}Le===null?(Le=65533,Ze=1):Le>65535&&(Le-=65536,E.push(Le>>>10&1023|55296),Le=56320|1023&Le),E.push(Le),X+=Ze}return function(Je){var ht=Je.length;if(ht<=te)return String.fromCharCode.apply(String,Je);for(var st="",wt=0;wt<ht;)st+=String.fromCharCode.apply(String,Je.slice(wt,wt+=te));return st}(E)}we.kMaxLength=t,g.TYPED_ARRAY_SUPPORT=function(){try{var f=new Uint8Array(1),o={foo:function(){return 42}};return Object.setPrototypeOf(o,Uint8Array.prototype),Object.setPrototypeOf(f,o),f.foo()===42}catch{return!1}}(),g.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(g.prototype,"parent",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.buffer}}),Object.defineProperty(g.prototype,"offset",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.byteOffset}}),g.poolSize=8192,g.from=function(f,o,v){return i(f,o,v)},Object.setPrototypeOf(g.prototype,Uint8Array.prototype),Object.setPrototypeOf(g,Uint8Array),g.alloc=function(f,o,v){return function(E,X,K){return h(E),E<=0?S(E):X!==void 0?typeof K=="string"?S(E).fill(X,K):S(E).fill(X):S(E)}(f,o,v)},g.allocUnsafe=function(f){return _(f)},g.allocUnsafeSlow=function(f){return _(f)},g.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==g.prototype},g.compare=function(f,o){if(ce(f,Uint8Array)&&(f=g.from(f,f.offset,f.byteLength)),ce(o,Uint8Array)&&(o=g.from(o,o.offset,o.byteLength)),!g.isBuffer(f)||!g.isBuffer(o))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===o)return 0;for(var v=f.length,E=o.length,X=0,K=Math.min(v,E);X<K;++X)if(f[X]!==o[X]){v=f[X],E=o[X];break}return v<E?-1:E<v?1:0},g.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},g.concat=function(f,o){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return g.alloc(0);var v;if(o===void 0)for(o=0,v=0;v<f.length;++v)o+=f[v].length;var E=g.allocUnsafe(o),X=0;for(v=0;v<f.length;++v){var K=f[v];if(ce(K,Uint8Array))X+K.length>E.length?g.from(K).copy(E,X):Uint8Array.prototype.set.call(E,K,X);else{if(!g.isBuffer(K))throw new TypeError('"list" argument must be an Array of Buffers');K.copy(E,X)}X+=K.length}return E},g.byteLength=P,g.prototype._isBuffer=!0,g.prototype.swap16=function(){var f=this.length;if(f%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var o=0;o<f;o+=2)j(this,o,o+1);return this},g.prototype.swap32=function(){var f=this.length;if(f%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var o=0;o<f;o+=4)j(this,o,o+3),j(this,o+1,o+2);return this},g.prototype.swap64=function(){var f=this.length;if(f%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var o=0;o<f;o+=8)j(this,o,o+7),j(this,o+1,o+6),j(this,o+2,o+5),j(this,o+3,o+4);return this},g.prototype.toString=function(){var f=this.length;return f===0?"":arguments.length===0?Be(this,0,f):F.apply(this,arguments)},g.prototype.toLocaleString=g.prototype.toString,g.prototype.equals=function(f){if(!g.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f||g.compare(this,f)===0},g.prototype.inspect=function(){var f="",o=we.INSPECT_MAX_BYTES;return f=this.toString("hex",0,o).replace(/(.{2})/g,"$1 ").trim(),this.length>o&&(f+=" ... "),"<Buffer "+f+">"},e&&(g.prototype[e]=g.prototype.inspect),g.prototype.compare=function(f,o,v,E,X){if(ce(f,Uint8Array)&&(f=g.from(f,f.offset,f.byteLength)),!g.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(o===void 0&&(o=0),v===void 0&&(v=f?f.length:0),E===void 0&&(E=0),X===void 0&&(X=this.length),o<0||v>f.length||E<0||X>this.length)throw new RangeError("out of range index");if(E>=X&&o>=v)return 0;if(E>=X)return-1;if(o>=v)return 1;if(this===f)return 0;for(var K=(X>>>=0)-(E>>>=0),he=(v>>>=0)-(o>>>=0),Ce=Math.min(K,he),De=this.slice(E,X),ve=f.slice(o,v),Le=0;Le<Ce;++Le)if(De[Le]!==ve[Le]){K=De[Le],he=ve[Le];break}return K<he?-1:he<K?1:0},g.prototype.includes=function(f,o,v){return this.indexOf(f,o,v)!==-1},g.prototype.indexOf=function(f,o,v){return U(this,f,o,v,!0)},g.prototype.lastIndexOf=function(f,o,v){return U(this,f,o,v,!1)},g.prototype.write=function(f,o,v,E){if(o===void 0)E="utf8",v=this.length,o=0;else if(v===void 0&&typeof o=="string")E=o,v=this.length,o=0;else{if(!isFinite(o))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");o>>>=0,isFinite(v)?(v>>>=0,E===void 0&&(E="utf8")):(E=v,v=void 0)}var X=this.length-o;if((v===void 0||v>X)&&(v=X),f.length>0&&(v<0||o<0)||o>this.length)throw new RangeError("Attempt to write outside buffer bounds");E||(E="utf8");for(var K=!1;;)switch(E){case"hex":return D(this,f,o,v);case"utf8":case"utf-8":return I(this,f,o,v);case"ascii":case"latin1":case"binary":return k(this,f,o,v);case"base64":return $(this,f,o,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,f,o,v);default:if(K)throw new TypeError("Unknown encoding: "+E);E=(""+E).toLowerCase(),K=!0}},g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var te=4096;function ot(f,o,v){var E="";v=Math.min(f.length,v);for(var X=o;X<v;++X)E+=String.fromCharCode(127&f[X]);return E}function Ae(f,o,v){var E="";v=Math.min(f.length,v);for(var X=o;X<v;++X)E+=String.fromCharCode(f[X]);return E}function ke(f,o,v){var E=f.length;(!o||o<0)&&(o=0),(!v||v<0||v>E)&&(v=E);for(var X="",K=o;K<v;++K)X+=je[f[K]];return X}function pe(f,o,v){for(var E=f.slice(o,v),X="",K=0;K<E.length-1;K+=2)X+=String.fromCharCode(E[K]+256*E[K+1]);return X}function be(f,o,v){if(f%1!=0||f<0)throw new RangeError("offset is not uint");if(f+o>v)throw new RangeError("Trying to access beyond buffer length")}function He(f,o,v,E,X,K){if(!g.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(o>X||o<K)throw new RangeError('"value" argument is out of bounds');if(v+E>f.length)throw new RangeError("Index out of range")}function ut(f,o,v,E,X,K){if(v+E>f.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("Index out of range")}function tt(f,o,v,E,X){return o=+o,v>>>=0,X||ut(f,0,v,4),b.write(f,o,v,E,23,4),v+4}function Se(f,o,v,E,X){return o=+o,v>>>=0,X||ut(f,0,v,8),b.write(f,o,v,E,52,8),v+8}g.prototype.slice=function(f,o){var v=this.length;(f=~~f)<0?(f+=v)<0&&(f=0):f>v&&(f=v),(o=o===void 0?v:~~o)<0?(o+=v)<0&&(o=0):o>v&&(o=v),o<f&&(o=f);var E=this.subarray(f,o);return Object.setPrototypeOf(E,g.prototype),E},g.prototype.readUintLE=g.prototype.readUIntLE=function(f,o,v){f>>>=0,o>>>=0,v||be(f,o,this.length);for(var E=this[f],X=1,K=0;++K<o&&(X*=256);)E+=this[f+K]*X;return E},g.prototype.readUintBE=g.prototype.readUIntBE=function(f,o,v){f>>>=0,o>>>=0,v||be(f,o,this.length);for(var E=this[f+--o],X=1;o>0&&(X*=256);)E+=this[f+--o]*X;return E},g.prototype.readUint8=g.prototype.readUInt8=function(f,o){return f>>>=0,o||be(f,1,this.length),this[f]},g.prototype.readUint16LE=g.prototype.readUInt16LE=function(f,o){return f>>>=0,o||be(f,2,this.length),this[f]|this[f+1]<<8},g.prototype.readUint16BE=g.prototype.readUInt16BE=function(f,o){return f>>>=0,o||be(f,2,this.length),this[f]<<8|this[f+1]},g.prototype.readUint32LE=g.prototype.readUInt32LE=function(f,o){return f>>>=0,o||be(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+16777216*this[f+3]},g.prototype.readUint32BE=g.prototype.readUInt32BE=function(f,o){return f>>>=0,o||be(f,4,this.length),16777216*this[f]+(this[f+1]<<16|this[f+2]<<8|this[f+3])},g.prototype.readIntLE=function(f,o,v){f>>>=0,o>>>=0,v||be(f,o,this.length);for(var E=this[f],X=1,K=0;++K<o&&(X*=256);)E+=this[f+K]*X;return E>=(X*=128)&&(E-=Math.pow(2,8*o)),E},g.prototype.readIntBE=function(f,o,v){f>>>=0,o>>>=0,v||be(f,o,this.length);for(var E=o,X=1,K=this[f+--E];E>0&&(X*=256);)K+=this[f+--E]*X;return K>=(X*=128)&&(K-=Math.pow(2,8*o)),K},g.prototype.readInt8=function(f,o){return f>>>=0,o||be(f,1,this.length),128&this[f]?-1*(255-this[f]+1):this[f]},g.prototype.readInt16LE=function(f,o){f>>>=0,o||be(f,2,this.length);var v=this[f]|this[f+1]<<8;return 32768&v?4294901760|v:v},g.prototype.readInt16BE=function(f,o){f>>>=0,o||be(f,2,this.length);var v=this[f+1]|this[f]<<8;return 32768&v?4294901760|v:v},g.prototype.readInt32LE=function(f,o){return f>>>=0,o||be(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},g.prototype.readInt32BE=function(f,o){return f>>>=0,o||be(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},g.prototype.readFloatLE=function(f,o){return f>>>=0,o||be(f,4,this.length),b.read(this,f,!0,23,4)},g.prototype.readFloatBE=function(f,o){return f>>>=0,o||be(f,4,this.length),b.read(this,f,!1,23,4)},g.prototype.readDoubleLE=function(f,o){return f>>>=0,o||be(f,8,this.length),b.read(this,f,!0,52,8)},g.prototype.readDoubleBE=function(f,o){return f>>>=0,o||be(f,8,this.length),b.read(this,f,!1,52,8)},g.prototype.writeUintLE=g.prototype.writeUIntLE=function(f,o,v,E){f=+f,o>>>=0,v>>>=0,E||He(this,f,o,v,Math.pow(2,8*v)-1,0);var X=1,K=0;for(this[o]=255&f;++K<v&&(X*=256);)this[o+K]=f/X&255;return o+v},g.prototype.writeUintBE=g.prototype.writeUIntBE=function(f,o,v,E){f=+f,o>>>=0,v>>>=0,E||He(this,f,o,v,Math.pow(2,8*v)-1,0);var X=v-1,K=1;for(this[o+X]=255&f;--X>=0&&(K*=256);)this[o+X]=f/K&255;return o+v},g.prototype.writeUint8=g.prototype.writeUInt8=function(f,o,v){return f=+f,o>>>=0,v||He(this,f,o,1,255,0),this[o]=255&f,o+1},g.prototype.writeUint16LE=g.prototype.writeUInt16LE=function(f,o,v){return f=+f,o>>>=0,v||He(this,f,o,2,65535,0),this[o]=255&f,this[o+1]=f>>>8,o+2},g.prototype.writeUint16BE=g.prototype.writeUInt16BE=function(f,o,v){return f=+f,o>>>=0,v||He(this,f,o,2,65535,0),this[o]=f>>>8,this[o+1]=255&f,o+2},g.prototype.writeUint32LE=g.prototype.writeUInt32LE=function(f,o,v){return f=+f,o>>>=0,v||He(this,f,o,4,4294967295,0),this[o+3]=f>>>24,this[o+2]=f>>>16,this[o+1]=f>>>8,this[o]=255&f,o+4},g.prototype.writeUint32BE=g.prototype.writeUInt32BE=function(f,o,v){return f=+f,o>>>=0,v||He(this,f,o,4,4294967295,0),this[o]=f>>>24,this[o+1]=f>>>16,this[o+2]=f>>>8,this[o+3]=255&f,o+4},g.prototype.writeIntLE=function(f,o,v,E){if(f=+f,o>>>=0,!E){var X=Math.pow(2,8*v-1);He(this,f,o,v,X-1,-X)}var K=0,he=1,Ce=0;for(this[o]=255&f;++K<v&&(he*=256);)f<0&&Ce===0&&this[o+K-1]!==0&&(Ce=1),this[o+K]=(f/he>>0)-Ce&255;return o+v},g.prototype.writeIntBE=function(f,o,v,E){if(f=+f,o>>>=0,!E){var X=Math.pow(2,8*v-1);He(this,f,o,v,X-1,-X)}var K=v-1,he=1,Ce=0;for(this[o+K]=255&f;--K>=0&&(he*=256);)f<0&&Ce===0&&this[o+K+1]!==0&&(Ce=1),this[o+K]=(f/he>>0)-Ce&255;return o+v},g.prototype.writeInt8=function(f,o,v){return f=+f,o>>>=0,v||He(this,f,o,1,127,-128),f<0&&(f=255+f+1),this[o]=255&f,o+1},g.prototype.writeInt16LE=function(f,o,v){return f=+f,o>>>=0,v||He(this,f,o,2,32767,-32768),this[o]=255&f,this[o+1]=f>>>8,o+2},g.prototype.writeInt16BE=function(f,o,v){return f=+f,o>>>=0,v||He(this,f,o,2,32767,-32768),this[o]=f>>>8,this[o+1]=255&f,o+2},g.prototype.writeInt32LE=function(f,o,v){return f=+f,o>>>=0,v||He(this,f,o,4,2147483647,-2147483648),this[o]=255&f,this[o+1]=f>>>8,this[o+2]=f>>>16,this[o+3]=f>>>24,o+4},g.prototype.writeInt32BE=function(f,o,v){return f=+f,o>>>=0,v||He(this,f,o,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[o]=f>>>24,this[o+1]=f>>>16,this[o+2]=f>>>8,this[o+3]=255&f,o+4},g.prototype.writeFloatLE=function(f,o,v){return tt(this,f,o,!0,v)},g.prototype.writeFloatBE=function(f,o,v){return tt(this,f,o,!1,v)},g.prototype.writeDoubleLE=function(f,o,v){return Se(this,f,o,!0,v)},g.prototype.writeDoubleBE=function(f,o,v){return Se(this,f,o,!1,v)},g.prototype.copy=function(f,o,v,E){if(!g.isBuffer(f))throw new TypeError("argument should be a Buffer");if(v||(v=0),E||E===0||(E=this.length),o>=f.length&&(o=f.length),o||(o=0),E>0&&E<v&&(E=v),E===v||f.length===0||this.length===0)return 0;if(o<0)throw new RangeError("targetStart out of bounds");if(v<0||v>=this.length)throw new RangeError("Index out of range");if(E<0)throw new RangeError("sourceEnd out of bounds");E>this.length&&(E=this.length),f.length-o<E-v&&(E=f.length-o+v);var X=E-v;return this===f&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(o,v,E):Uint8Array.prototype.set.call(f,this.subarray(v,E),o),X},g.prototype.fill=function(f,o,v,E){if(typeof f=="string"){if(typeof o=="string"?(E=o,o=0,v=this.length):typeof v=="string"&&(E=v,v=this.length),E!==void 0&&typeof E!="string")throw new TypeError("encoding must be a string");if(typeof E=="string"&&!g.isEncoding(E))throw new TypeError("Unknown encoding: "+E);if(f.length===1){var X=f.charCodeAt(0);(E==="utf8"&&X<128||E==="latin1")&&(f=X)}}else typeof f=="number"?f&=255:typeof f=="boolean"&&(f=Number(f));if(o<0||this.length<o||this.length<v)throw new RangeError("Out of range index");if(v<=o)return this;var K;if(o>>>=0,v=v===void 0?this.length:v>>>0,f||(f=0),typeof f=="number")for(K=o;K<v;++K)this[K]=f;else{var he=g.isBuffer(f)?f:g.from(f,E),Ce=he.length;if(Ce===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(K=0;K<v-o;++K)this[K+o]=he[K%Ce]}return this};var We=/[^+/0-9A-Za-z-_]/g;function lt(f,o){var v;o=o||1/0;for(var E=f.length,X=null,K=[],he=0;he<E;++he){if((v=f.charCodeAt(he))>55295&&v<57344){if(!X){if(v>56319){(o-=3)>-1&&K.push(239,191,189);continue}if(he+1===E){(o-=3)>-1&&K.push(239,191,189);continue}X=v;continue}if(v<56320){(o-=3)>-1&&K.push(239,191,189),X=v;continue}v=65536+(X-55296<<10|v-56320)}else X&&(o-=3)>-1&&K.push(239,191,189);if(X=null,v<128){if((o-=1)<0)break;K.push(v)}else if(v<2048){if((o-=2)<0)break;K.push(v>>6|192,63&v|128)}else if(v<65536){if((o-=3)<0)break;K.push(v>>12|224,v>>6&63|128,63&v|128)}else{if(!(v<1114112))throw new Error("Invalid code point");if((o-=4)<0)break;K.push(v>>18|240,v>>12&63|128,v>>6&63|128,63&v|128)}}return K}function Fe(f){return oe.toByteArray(function(o){if((o=(o=o.split("=")[0]).trim().replace(We,"")).length<2)return"";for(;o.length%4!=0;)o+="=";return o}(f))}function Xe(f,o,v,E){for(var X=0;X<E&&!(X+v>=o.length||X>=f.length);++X)o[X+v]=f[X];return X}function ce(f,o){return f instanceof o||f!=null&&f.constructor!=null&&f.constructor.name!=null&&f.constructor.name===o.name}function de(f){return f!=f}var je=function(){for(var f="0123456789abcdef",o=new Array(256),v=0;v<16;++v)for(var E=16*v,X=0;X<16;++X)o[E+X]=f[v]+f[X];return o}()},6693:(et,we)=>{we.byteLength=function(h){var _=g(h),n=_[0],l=_[1];return 3*(n+l)/4-l},we.toByteArray=function(h){var _,n,l=g(h),d=l[0],P=l[1],F=new b(function(W,D,I){return 3*(D+I)/4-I}(0,d,P)),j=0,U=P>0?d-4:d;for(n=0;n<U;n+=4)_=oe[h.charCodeAt(n)]<<18|oe[h.charCodeAt(n+1)]<<12|oe[h.charCodeAt(n+2)]<<6|oe[h.charCodeAt(n+3)],F[j++]=_>>16&255,F[j++]=_>>8&255,F[j++]=255&_;return P===2&&(_=oe[h.charCodeAt(n)]<<2|oe[h.charCodeAt(n+1)]>>4,F[j++]=255&_),P===1&&(_=oe[h.charCodeAt(n)]<<10|oe[h.charCodeAt(n+1)]<<4|oe[h.charCodeAt(n+2)]>>2,F[j++]=_>>8&255,F[j++]=255&_),F},we.fromByteArray=function(h){for(var _,n=h.length,l=n%3,d=[],P=16383,F=0,j=n-l;F<j;F+=P)d.push(i(h,F,F+P>j?j:F+P));return l===1?(_=h[n-1],d.push(C[_>>2]+C[_<<4&63]+"==")):l===2&&(_=(h[n-2]<<8)+h[n-1],d.push(C[_>>10]+C[_>>4&63]+C[_<<2&63]+"=")),d.join("")};for(var C=[],oe=[],b=typeof Uint8Array<"u"?Uint8Array:Array,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,S=e.length;t<S;++t)C[t]=e[t],oe[e.charCodeAt(t)]=t;function g(h){var _=h.length;if(_%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=h.indexOf("=");return n===-1&&(n=_),[n,n===_?0:4-n%4]}function i(h,_,n){for(var l,d,P=[],F=_;F<n;F+=3)l=(h[F]<<16&16711680)+(h[F+1]<<8&65280)+(255&h[F+2]),P.push(C[(d=l)>>18&63]+C[d>>12&63]+C[d>>6&63]+C[63&d]);return P.join("")}oe["-".charCodeAt(0)]=62,oe["_".charCodeAt(0)]=63},2165:(et,we)=>{we.read=function(C,oe,b,e,t){var S,g,i=8*t-e-1,h=(1<<i)-1,_=h>>1,n=-7,l=b?t-1:0,d=b?-1:1,P=C[oe+l];for(l+=d,S=P&(1<<-n)-1,P>>=-n,n+=i;n>0;S=256*S+C[oe+l],l+=d,n-=8);for(g=S&(1<<-n)-1,S>>=-n,n+=e;n>0;g=256*g+C[oe+l],l+=d,n-=8);if(S===0)S=1-_;else{if(S===h)return g?NaN:1/0*(P?-1:1);g+=Math.pow(2,e),S-=_}return(P?-1:1)*g*Math.pow(2,S-e)},we.write=function(C,oe,b,e,t,S){var g,i,h,_=8*S-t-1,n=(1<<_)-1,l=n>>1,d=t===23?Math.pow(2,-24)-Math.pow(2,-77):0,P=e?0:S-1,F=e?1:-1,j=oe<0||oe===0&&1/oe<0?1:0;for(oe=Math.abs(oe),isNaN(oe)||oe===1/0?(i=isNaN(oe)?1:0,g=n):(g=Math.floor(Math.log(oe)/Math.LN2),oe*(h=Math.pow(2,-g))<1&&(g--,h*=2),(oe+=g+l>=1?d/h:d*Math.pow(2,1-l))*h>=2&&(g++,h/=2),g+l>=n?(i=0,g=n):g+l>=1?(i=(oe*h-1)*Math.pow(2,t),g+=l):(i=oe*Math.pow(2,l-1)*Math.pow(2,t),g=0));t>=8;C[b+P]=255&i,P+=F,i/=256,t-=8);for(g=g<<t|i,_+=t;_>0;C[b+P]=255&g,P+=F,g/=256,_-=8);C[b+P-F]|=128*j}},6934:(et,we)=>{var C={parseBuffer:function(e){return new oe(e).parse()},addBoxProcessor:function(e,t){typeof e=="string"&&typeof t=="function"&&(b.prototype._boxProcessors[e]=t)},createFile:function(){return new oe},createBox:function(e,t,S){var g=b.create(e);return t&&t.append(g,S),g},createFullBox:function(e,t,S){var g=C.createBox(e,t,S);return g.version=0,g.flags=0,g},Utils:{}};C.Utils.dataViewToString=function(e,t){var S=t||"utf-8";if(typeof TextDecoder<"u")return new TextDecoder(S).decode(e);var g=[],i=0;if(S==="utf-8")for(;i<e.byteLength;){var h=e.getUint8(i++);h<128||(h<224?(h=(31&h)<<6,h|=63&e.getUint8(i++)):h<240?(h=(15&h)<<12,h|=(63&e.getUint8(i++))<<6,h|=63&e.getUint8(i++)):(h=(7&h)<<18,h|=(63&e.getUint8(i++))<<12,h|=(63&e.getUint8(i++))<<6,h|=63&e.getUint8(i++))),g.push(String.fromCharCode(h))}else for(;i<e.byteLength;)g.push(String.fromCharCode(e.getUint8(i++)));return g.join("")},C.Utils.utf8ToByteArray=function(e){var t,S;if(typeof TextEncoder<"u")t=new TextEncoder().encode(e);else for(t=[],S=0;S<e.length;++S){var g=e.charCodeAt(S);g<128?t.push(g):g<2048?(t.push(192|g>>6),t.push(128|63&g)):g<65536?(t.push(224|g>>12),t.push(128|63&g>>6),t.push(128|63&g)):(t.push(240|g>>18),t.push(128|63&g>>12),t.push(128|63&g>>6),t.push(128|63&g))}return t},C.Utils.appendBox=function(e,t,S){if(t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,S!==-1)if(S!=null){var g,i=-1;if(typeof S=="number")i=S;else{if(typeof S=="string")g=S;else{if(typeof S!="object"||!S.type)return void e.boxes.push(t);g=S.type}for(var h=0;h<e.boxes.length;h++)if(g===e.boxes[h].type){i=h+1;break}}e.boxes.splice(i,0,t)}else e.boxes.push(t)},we.parseBuffer=C.parseBuffer,we.addBoxProcessor=C.addBoxProcessor,we.createFile=C.createFile,we.createBox=C.createBox,we.createFullBox=C.createFullBox,we.Utils=C.Utils,C.Cursor=function(e){this.offset=e===void 0?0:e};var oe=function(e){this._cursor=new C.Cursor,this.boxes=[],e&&(this._raw=new DataView(e))};oe.prototype.fetch=function(e){var t=this.fetchAll(e,!0);return t.length?t[0]:null},oe.prototype.fetchAll=function(e,t){var S=[];return oe._sweep.call(this,e,S,t),S},oe.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var e=b.parse(this);if(e.type===void 0)break;this.boxes.push(e)}return this},oe._sweep=function(e,t,S){for(var g in this.type&&this.type==e&&t.push(this),this.boxes){if(t.length&&S)return;oe._sweep.call(this.boxes[g],e,t,S)}},oe.prototype.write=function(){var e,t=0;for(e=0;e<this.boxes.length;e++)t+=this.boxes[e].getLength(!1);var S=new Uint8Array(t);for(this._rawo=new DataView(S.buffer),this.bytes=S,this._cursor.offset=0,e=0;e<this.boxes.length;e++)this.boxes[e].write();return S.buffer},oe.prototype.append=function(e,t){C.Utils.appendBox(this,e,t)};var b=function(){this._cursor=new C.Cursor};b.parse=function(e){var t=new b;return t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,t._parseBox(),e._cursor.offset=t._raw.byteOffset+t._raw.byteLength,t},b.create=function(e){var t=new b;return t.type=e,t.boxes=[],t},b.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],b.prototype._boxProcessors={},b.prototype._procField=function(e,t,S){this._parsing?this[e]=this._readField(t,S):this._writeField(t,S,this[e])},b.prototype._procFieldArray=function(e,t,S,g){var i;if(this._parsing)for(this[e]=[],i=0;i<t;i++)this[e][i]=this._readField(S,g);else for(i=0;i<this[e].length;i++)this._writeField(S,g,this[e][i])},b.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},b.prototype._procEntries=function(e,t,S){var g;if(this._parsing)for(this[e]=[],g=0;g<t;g++)this[e].push({}),S.call(this,this[e][g]);else for(g=0;g<t;g++)S.call(this,this[e][g])},b.prototype._procSubEntries=function(e,t,S,g){var i;if(this._parsing)for(e[t]=[],i=0;i<S;i++)e[t].push({}),g.call(this,e[t][i]);else for(i=0;i<S;i++)g.call(this,e[t][i])},b.prototype._procEntryField=function(e,t,S,g){this._parsing?e[t]=this._readField(S,g):this._writeField(S,g,e[t])},b.prototype._procSubBoxes=function(e,t){var S;if(this._parsing)for(this[e]=[],S=0;S<t;S++)this[e].push(b.parse(this));else for(S=0;S<t;S++)this._rawo?this[e][S].write():this.size+=this[e][S].getLength()},b.prototype._readField=function(e,t){switch(e){case"uint":return this._readUint(t);case"int":return this._readInt(t);case"template":return this._readTemplate(t);case"string":return t===-1?this._readTerminatedString():this._readString(t);case"data":return this._readData(t);case"utf8":return this._readUTF8String();default:return-1}},b.prototype._readInt=function(e){var t=null,S=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:t=this._raw.getInt8(S);break;case 16:t=this._raw.getInt16(S);break;case 32:t=this._raw.getInt32(S);break;case 64:var g=this._raw.getInt32(S),i=this._raw.getInt32(S+4);t=g*Math.pow(2,32)+i}return this._cursor.offset+=e>>3,t},b.prototype._readUint=function(e){var t,S,g=null,i=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:g=this._raw.getUint8(i);break;case 16:g=this._raw.getUint16(i);break;case 24:g=((t=this._raw.getUint16(i))<<8)+(S=this._raw.getUint8(i+2));break;case 32:g=this._raw.getUint32(i);break;case 64:t=this._raw.getUint32(i),S=this._raw.getUint32(i+4),g=t*Math.pow(2,32)+S}return this._cursor.offset+=e>>3,g},b.prototype._readString=function(e){for(var t="",S=0;S<e;S++){var g=this._readUint(8);t+=String.fromCharCode(g)}return t},b.prototype._readTemplate=function(e){return this._readUint(e/2)+this._readUint(e/2)/Math.pow(2,e/2)},b.prototype._readTerminatedString=function(){for(var e="";this._cursor.offset-this._offset<this._raw.byteLength;){var t=this._readUint(8);if(t===0)break;e+=String.fromCharCode(t)}return e},b.prototype._readData=function(e){var t=e>0?e:this._raw.byteLength-(this._cursor.offset-this._offset);if(t>0){var S=new Uint8Array(this._raw.buffer,this._cursor.offset,t);return this._cursor.offset+=t,S}return null},b.prototype._readUTF8String=function(){var e=this._raw.byteLength-(this._cursor.offset-this._offset),t=null;return e>0&&(t=new DataView(this._raw.buffer,this._cursor.offset,e),this._cursor.offset+=e),t&&C.Utils.dataViewToString(t)},b.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1?this._parseContainerBox():this._data=this._readData())}},b.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},b.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(b.parse(this))},b.prototype.append=function(e,t){C.Utils.appendBox(this,e,t)},b.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var e=0;e<this.boxes.length;e++)this.size+=this.boxes[e].getLength();return this._data&&this._writeData(this._data),this.size},b.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var e=0;e<this.boxes.length;e++)this.boxes[e].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},b.prototype._writeInt=function(e,t){if(this._rawo){var S=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setInt8(S,t);break;case 16:this._rawo.setInt16(S,t);break;case 32:this._rawo.setInt32(S,t);break;case 64:var g=Math.floor(t/Math.pow(2,32)),i=t-g*Math.pow(2,32);this._rawo.setUint32(S,g),this._rawo.setUint32(S+4,i)}this._cursor.offset+=e>>3}else this.size+=e>>3},b.prototype._writeUint=function(e,t){if(this._rawo){var S,g,i=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setUint8(i,t);break;case 16:this._rawo.setUint16(i,t);break;case 24:S=(16776960&t)>>8,g=255&t,this._rawo.setUint16(i,S),this._rawo.setUint8(i+2,g);break;case 32:this._rawo.setUint32(i,t);break;case 64:g=t-(S=Math.floor(t/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(i,S),this._rawo.setUint32(i+4,g)}this._cursor.offset+=e>>3}else this.size+=e>>3},b.prototype._writeString=function(e,t){for(var S=0;S<e;S++)this._writeUint(8,t.charCodeAt(S))},b.prototype._writeTerminatedString=function(e){if(e.length!==0){for(var t=0;t<e.length;t++)this._writeUint(8,e.charCodeAt(t));this._writeUint(8,0)}},b.prototype._writeTemplate=function(e,t){var S=Math.floor(t),g=(t-S)*Math.pow(2,e/2);this._writeUint(e/2,S),this._writeUint(e/2,g)},b.prototype._writeData=function(e){if(e)if(this._rawo){if(e instanceof Array){for(var t=this._cursor.offset-this._rawo.byteOffset,S=0;S<e.length;S++)this._rawo.setInt8(t+S,e[S]);this._cursor.offset+=e.length}e instanceof Uint8Array&&(this._root.bytes.set(e,this._cursor.offset),this._cursor.offset+=e.length)}else this.size+=e.length},b.prototype._writeUTF8String=function(e){var t=C.Utils.utf8ToByteArray(e);if(this._rawo)for(var S=new DataView(this._rawo.buffer,this._cursor.offset,t.length),g=0;g<t.length;g++)S.setUint8(g,t[g]);else this.size+=t.length},b.prototype._writeField=function(e,t,S){switch(e){case"uint":this._writeUint(t,S);break;case"int":this._writeInt(t,S);break;case"template":this._writeTemplate(t,S);break;case"string":t==-1?this._writeTerminatedString(S):this._writeString(t,S);break;case"data":this._writeData(S);break;case"utf8":this._writeUTF8String(S)}},b.prototype._boxProcessors.avc1=b.prototype._boxProcessors.avc2=b.prototype._boxProcessors.avc3=b.prototype._boxProcessors.avc4=b.prototype._boxProcessors.hvc1=b.prototype._boxProcessors.hev1=b.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},b.prototype._boxProcessors.ctts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"sample_count","uint",32),this._procEntryField(e,"sample_offset",this.version===1?"int":"uint",32)})},b.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},b.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"segment_duration","uint",this.version===1?64:32),this._procEntryField(e,"media_time","int",this.version===1?64:32),this._procEntryField(e,"media_rate_integer","int",16),this._procEntryField(e,"media_rate_fraction","int",16)})},b.prototype._boxProcessors.emsg=function(){this._procFullBox(),this.version==1?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},b.prototype._boxProcessors.free=b.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},b.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},b.prototype._boxProcessors.ftyp=b.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var e=-1;this._parsing&&(e=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",e,"string",4)},b.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},b.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},b.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._parsing||typeof this.language!="string"||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},b.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",this.version==1?64:32)},b.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},b.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},b.prototype._boxProcessors.mp4a=b.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},b.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},b.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},b.prototype._boxProcessors.prft=function(){this._procFullBox(),this._procField("reference_track_ID","uint",32),this._procField("ntp_timestamp_sec","uint",32),this._procField("ntp_timestamp_frac","uint",32),this._procField("media_time","uint",this.version==1?64:32)},b.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},b.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},b.prototype._boxProcessors.sdtp=function(){this._procFullBox();var e=-1;this._parsing&&(e=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",e,"uint",8)},b.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",this.version==1?64:32),this._procField("first_offset","uint",this.version==1?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(e){this._parsing||(e.reference=(1&e.reference_type)<<31,e.reference|=2147483647&e.referenced_size,e.sap=(1&e.starts_with_SAP)<<31,e.sap|=(3&e.SAP_type)<<28,e.sap|=268435455&e.SAP_delta_time),this._procEntryField(e,"reference","uint",32),this._procEntryField(e,"subsegment_duration","uint",32),this._procEntryField(e,"sap","uint",32),this._parsing&&(e.reference_type=e.reference>>31&1,e.referenced_size=2147483647&e.reference,e.starts_with_SAP=e.sap>>31&1,e.SAP_type=e.sap>>28&7,e.SAP_delta_time=268435455&e.sap)})},b.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},b.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(e){this._procEntryField(e,"ranges_count","uint",32),this._procSubEntries(e,"ranges",e.ranges_count,function(t){this._procEntryField(t,"level","uint",8),this._procEntryField(t,"range_size","uint",24)})})},b.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},b.prototype._boxProcessors.sttg=function(){this._procField("settings","utf8")},b.prototype._boxProcessors.stts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"sample_count","uint",32),this._procEntryField(e,"sample_delta","uint",32)})},b.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"sample_delta","uint",32),this._procEntryField(e,"subsample_count","uint",16),this._procSubEntries(e,"subsamples",e.subsample_count,function(t){this._procEntryField(t,"subsample_size","uint",this.version===1?32:16),this._procEntryField(t,"subsample_priority","uint",8),this._procEntryField(t,"discardable","uint",8),this._procEntryField(t,"codec_specific_parameters","uint",32)})})},b.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},b.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",this.version==1?64:32)},b.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},b.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(e){this._procEntryField(e,"time","uint",this.version===1?64:32),this._procEntryField(e,"moof_offset","uint",this.version===1?64:32),this._procEntryField(e,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(e,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(e,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},b.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},b.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},b.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(e){256&this.flags&&this._procEntryField(e,"sample_duration","uint",32),512&this.flags&&this._procEntryField(e,"sample_size","uint",32),1024&this.flags&&this._procEntryField(e,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(e,"sample_composition_time_offset",this.version===1?"int":"uint",32)})},b.prototype._boxProcessors["url "]=b.prototype._boxProcessors["urn "]=function(){this._procFullBox(),this.type==="urn "&&this._procField("name","string",-1),this._procField("location","string",-1)},b.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},b.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},b.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},b.prototype._boxProcessors.vtte=function(){}},5530:(et,we,C)=>{et.exports=C(6146).polyfill()},6146:function(et,we,C){et.exports=function(){function oe(Fe){return typeof Fe=="function"}var b=Array.isArray?Array.isArray:function(Fe){return Object.prototype.toString.call(Fe)==="[object Array]"},e=0,t=void 0,S=void 0,g=function(Fe,Xe){P[e]=Fe,P[e+1]=Xe,(e+=2)===2&&(S?S(F):I())},i=typeof window<"u"?window:void 0,h=i||{},_=h.MutationObserver||h.WebKitMutationObserver,n=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",l=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function d(){var Fe=setTimeout;return function(){return Fe(F,1)}}var P=new Array(1e3);function F(){for(var Fe=0;Fe<e;Fe+=2)(0,P[Fe])(P[Fe+1]),P[Fe]=void 0,P[Fe+1]=void 0;e=0}var j,U,W,D,I=void 0;function k(Fe,Xe){var ce=this,de=new this.constructor(Ne);de[J]===void 0&&Se(de);var je=ce._state;if(je){var f=arguments[je-1];g(function(){return ut(je,de,f,ce._result)})}else be(ce,de,Fe,Xe);return de}function $(Fe){if(Fe&&typeof Fe=="object"&&Fe.constructor===this)return Fe;var Xe=new this(Ne);return ot(Xe,Fe),Xe}I=n?function(){return process.nextTick(F)}:_?(U=0,W=new _(F),D=document.createTextNode(""),W.observe(D,{characterData:!0}),function(){D.data=U=++U%2}):l?((j=new MessageChannel).port1.onmessage=F,function(){return j.port2.postMessage(0)}):i===void 0?function(){try{var Fe=Function("return this")().require("vertx");return(t=Fe.runOnLoop||Fe.runOnContext)!==void 0?function(){t(F)}:d()}catch{return d()}}():d();var J=Math.random().toString(36).substring(2);function Ne(){}var Be=void 0;function te(Fe,Xe,ce){Xe.constructor===Fe.constructor&&ce===k&&Xe.constructor.resolve===$?function(de,je){je._state===1?ke(de,je._result):je._state===2?pe(de,je._result):be(je,void 0,function(f){return ot(de,f)},function(f){return pe(de,f)})}(Fe,Xe):ce===void 0?ke(Fe,Xe):oe(ce)?function(de,je,f){g(function(o){var v=!1,E=function(X,K,he,Ce){try{X.call(K,he,Ce)}catch(De){return De}}(f,je,function(X){v||(v=!0,je!==X?ot(o,X):ke(o,X))},function(X){v||(v=!0,pe(o,X))},o._label);!v&&E&&(v=!0,pe(o,E))},de)}(Fe,Xe,ce):ke(Fe,Xe)}function ot(Fe,Xe){if(Fe===Xe)pe(Fe,new TypeError("You cannot resolve a promise with itself"));else if(je=typeof(de=Xe),de===null||je!=="object"&&je!=="function")ke(Fe,Xe);else{var ce=void 0;try{ce=Xe.then}catch(f){return void pe(Fe,f)}te(Fe,Xe,ce)}var de,je}function Ae(Fe){Fe._onerror&&Fe._onerror(Fe._result),He(Fe)}function ke(Fe,Xe){Fe._state===Be&&(Fe._result=Xe,Fe._state=1,Fe._subscribers.length!==0&&g(He,Fe))}function pe(Fe,Xe){Fe._state===Be&&(Fe._state=2,Fe._result=Xe,g(Ae,Fe))}function be(Fe,Xe,ce,de){var je=Fe._subscribers,f=je.length;Fe._onerror=null,je[f]=Xe,je[f+1]=ce,je[f+2]=de,f===0&&Fe._state&&g(He,Fe)}function He(Fe){var Xe=Fe._subscribers,ce=Fe._state;if(Xe.length!==0){for(var de=void 0,je=void 0,f=Fe._result,o=0;o<Xe.length;o+=3)de=Xe[o],je=Xe[o+ce],de?ut(ce,de,je,f):je(f);Fe._subscribers.length=0}}function ut(Fe,Xe,ce,de){var je=oe(ce),f=void 0,o=void 0,v=!0;if(je){try{f=ce(de)}catch(E){v=!1,o=E}if(Xe===f)return void pe(Xe,new TypeError("A promises callback cannot return that same promise."))}else f=de;Xe._state!==Be||(je&&v?ot(Xe,f):v===!1?pe(Xe,o):Fe===1?ke(Xe,f):Fe===2&&pe(Xe,f))}var tt=0;function Se(Fe){Fe[J]=tt++,Fe._state=void 0,Fe._result=void 0,Fe._subscribers=[]}var We=function(){function Fe(Xe,ce){this._instanceConstructor=Xe,this.promise=new Xe(Ne),this.promise[J]||Se(this.promise),b(ce)?(this.length=ce.length,this._remaining=ce.length,this._result=new Array(this.length),this.length===0?ke(this.promise,this._result):(this.length=this.length||0,this._enumerate(ce),this._remaining===0&&ke(this.promise,this._result))):pe(this.promise,new Error("Array Methods must be provided an Array"))}return Fe.prototype._enumerate=function(Xe){for(var ce=0;this._state===Be&&ce<Xe.length;ce++)this._eachEntry(Xe[ce],ce)},Fe.prototype._eachEntry=function(Xe,ce){var de=this._instanceConstructor,je=de.resolve;if(je===$){var f=void 0,o=void 0,v=!1;try{f=Xe.then}catch(X){v=!0,o=X}if(f===k&&Xe._state!==Be)this._settledAt(Xe._state,ce,Xe._result);else if(typeof f!="function")this._remaining--,this._result[ce]=Xe;else if(de===lt){var E=new de(Ne);v?pe(E,o):te(E,Xe,f),this._willSettleAt(E,ce)}else this._willSettleAt(new de(function(X){return X(Xe)}),ce)}else this._willSettleAt(je(Xe),ce)},Fe.prototype._settledAt=function(Xe,ce,de){var je=this.promise;je._state===Be&&(this._remaining--,Xe===2?pe(je,de):this._result[ce]=de),this._remaining===0&&ke(je,this._result)},Fe.prototype._willSettleAt=function(Xe,ce){var de=this;be(Xe,void 0,function(je){return de._settledAt(1,ce,je)},function(je){return de._settledAt(2,ce,je)})},Fe}(),lt=function(){function Fe(Xe){this[J]=tt++,this._result=this._state=void 0,this._subscribers=[],Ne!==Xe&&(typeof Xe!="function"&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof Fe?function(ce,de){try{de(function(je){ot(ce,je)},function(je){pe(ce,je)})}catch(je){pe(ce,je)}}(this,Xe):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return Fe.prototype.catch=function(Xe){return this.then(null,Xe)},Fe.prototype.finally=function(Xe){var ce=this,de=ce.constructor;return oe(Xe)?ce.then(function(je){return de.resolve(Xe()).then(function(){return je})},function(je){return de.resolve(Xe()).then(function(){throw je})}):ce.then(Xe,Xe)},Fe}();return lt.prototype.then=k,lt.all=function(Fe){return new We(this,Fe).promise},lt.race=function(Fe){var Xe=this;return b(Fe)?new Xe(function(ce,de){for(var je=Fe.length,f=0;f<je;f++)Xe.resolve(Fe[f]).then(ce,de)}):new Xe(function(ce,de){return de(new TypeError("You must pass an array to race."))})},lt.resolve=$,lt.reject=function(Fe){var Xe=new this(Ne);return pe(Xe,Fe),Xe},lt._setScheduler=function(Fe){S=Fe},lt._setAsap=function(Fe){g=Fe},lt._asap=g,lt.polyfill=function(){var Fe=void 0;if(C.g!==void 0)Fe=C.g;else if(typeof self<"u")Fe=self;else try{Fe=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var Xe=Fe.Promise;if(Xe){var ce=null;try{ce=Object.prototype.toString.call(Xe.resolve())}catch{}if(ce==="[object Promise]"&&!Xe.cast)return}Fe.Promise=lt},lt.Promise=lt,lt}()},1159:et=>{var we,C=typeof Reflect=="object"?Reflect:null,oe=C&&typeof C.apply=="function"?C.apply:function(F,j,U){return Function.prototype.apply.call(F,j,U)};we=C&&typeof C.ownKeys=="function"?C.ownKeys:Object.getOwnPropertySymbols?function(F){return Object.getOwnPropertyNames(F).concat(Object.getOwnPropertySymbols(F))}:function(F){return Object.getOwnPropertyNames(F)};var b=Number.isNaN||function(F){return F!=F};function e(){e.init.call(this)}et.exports=e,et.exports.once=function(F,j){return new Promise(function(U,W){function D(k){F.removeListener(j,I),W(k)}function I(){typeof F.removeListener=="function"&&F.removeListener("error",D),U([].slice.call(arguments))}P(F,j,I,{once:!0}),j!=="error"&&function(k,$,J){typeof k.on=="function"&&P(k,"error",$,{once:!0})}(F,D)})},e.EventEmitter=e,e.prototype._events=void 0,e.prototype._eventsCount=0,e.prototype._maxListeners=void 0;var t=10;function S(F){if(typeof F!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof F)}function g(F){return F._maxListeners===void 0?e.defaultMaxListeners:F._maxListeners}function i(F,j,U,W){var D,I,k,$;if(S(U),(I=F._events)===void 0?(I=F._events=Object.create(null),F._eventsCount=0):(I.newListener!==void 0&&(F.emit("newListener",j,U.listener?U.listener:U),I=F._events),k=I[j]),k===void 0)k=I[j]=U,++F._eventsCount;else if(typeof k=="function"?k=I[j]=W?[U,k]:[k,U]:W?k.unshift(U):k.push(U),(D=g(F))>0&&k.length>D&&!k.warned){k.warned=!0;var J=new Error("Possible EventEmitter memory leak detected. "+k.length+" "+String(j)+" listeners added. Use emitter.setMaxListeners() to increase limit");J.name="MaxListenersExceededWarning",J.emitter=F,J.type=j,J.count=k.length,$=J,console&&console.warn&&console.warn($)}return F}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _(F,j,U){var W={fired:!1,wrapFn:void 0,target:F,type:j,listener:U},D=h.bind(W);return D.listener=U,W.wrapFn=D,D}function n(F,j,U){var W=F._events;if(W===void 0)return[];var D=W[j];return D===void 0?[]:typeof D=="function"?U?[D.listener||D]:[D]:U?function(I){for(var k=new Array(I.length),$=0;$<k.length;++$)k[$]=I[$].listener||I[$];return k}(D):d(D,D.length)}function l(F){var j=this._events;if(j!==void 0){var U=j[F];if(typeof U=="function")return 1;if(U!==void 0)return U.length}return 0}function d(F,j){for(var U=new Array(j),W=0;W<j;++W)U[W]=F[W];return U}function P(F,j,U,W){if(typeof F.on=="function")W.once?F.once(j,U):F.on(j,U);else{if(typeof F.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof F);F.addEventListener(j,function D(I){W.once&&F.removeEventListener(j,D),U(I)})}}Object.defineProperty(e,"defaultMaxListeners",{enumerable:!0,get:function(){return t},set:function(F){if(typeof F!="number"||F<0||b(F))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+F+".");t=F}}),e.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},e.prototype.setMaxListeners=function(F){if(typeof F!="number"||F<0||b(F))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+F+".");return this._maxListeners=F,this},e.prototype.getMaxListeners=function(){return g(this)},e.prototype.emit=function(F){for(var j=[],U=1;U<arguments.length;U++)j.push(arguments[U]);var W=F==="error",D=this._events;if(D!==void 0)W=W&&D.error===void 0;else if(!W)return!1;if(W){var I;if(j.length>0&&(I=j[0]),I instanceof Error)throw I;var k=new Error("Unhandled error."+(I?" ("+I.message+")":""));throw k.context=I,k}var $=D[F];if($===void 0)return!1;if(typeof $=="function")oe($,this,j);else{var J=$.length,Ne=d($,J);for(U=0;U<J;++U)oe(Ne[U],this,j)}return!0},e.prototype.addListener=function(F,j){return i(this,F,j,!1)},e.prototype.on=e.prototype.addListener,e.prototype.prependListener=function(F,j){return i(this,F,j,!0)},e.prototype.once=function(F,j){return S(j),this.on(F,_(this,F,j)),this},e.prototype.prependOnceListener=function(F,j){return S(j),this.prependListener(F,_(this,F,j)),this},e.prototype.removeListener=function(F,j){var U,W,D,I,k;if(S(j),(W=this._events)===void 0)return this;if((U=W[F])===void 0)return this;if(U===j||U.listener===j)--this._eventsCount==0?this._events=Object.create(null):(delete W[F],W.removeListener&&this.emit("removeListener",F,U.listener||j));else if(typeof U!="function"){for(D=-1,I=U.length-1;I>=0;I--)if(U[I]===j||U[I].listener===j){k=U[I].listener,D=I;break}if(D<0)return this;D===0?U.shift():function($,J){for(;J+1<$.length;J++)$[J]=$[J+1];$.pop()}(U,D),U.length===1&&(W[F]=U[0]),W.removeListener!==void 0&&this.emit("removeListener",F,k||j)}return this},e.prototype.off=e.prototype.removeListener,e.prototype.removeAllListeners=function(F){var j,U,W;if((U=this._events)===void 0)return this;if(U.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):U[F]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete U[F]),this;if(arguments.length===0){var D,I=Object.keys(U);for(W=0;W<I.length;++W)(D=I[W])!=="removeListener"&&this.removeAllListeners(D);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(j=U[F])=="function")this.removeListener(F,j);else if(j!==void 0)for(W=j.length-1;W>=0;W--)this.removeListener(F,j[W]);return this},e.prototype.listeners=function(F){return n(this,F,!0)},e.prototype.rawListeners=function(F){return n(this,F,!1)},e.listenerCount=function(F,j){return typeof F.listenerCount=="function"?F.listenerCount(j):l.call(F,j)},e.prototype.listenerCount=l,e.prototype.eventNames=function(){return this._eventsCount>0?we(this._events):[]}},3101:et=>{var we=Array.isArray,C=Object.keys,oe=Object.prototype.hasOwnProperty;et.exports=function b(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var S,g,i,h=we(e),_=we(t);if(h&&_){if((g=e.length)!=t.length)return!1;for(S=g;S--!=0;)if(!b(e[S],t[S]))return!1;return!0}if(h!=_)return!1;var n=e instanceof Date,l=t instanceof Date;if(n!=l)return!1;if(n&&l)return e.getTime()==t.getTime();var d=e instanceof RegExp,P=t instanceof RegExp;if(d!=P)return!1;if(d&&P)return e.toString()==t.toString();var F=C(e);if((g=F.length)!==C(t).length)return!1;for(S=g;S--!=0;)if(!oe.call(t,F[S]))return!1;for(S=g;S--!=0;)if(!b(e[i=F[S]],t[i]))return!1;return!0}return e!=e&&t!=t}},3362:(et,we,C)=>{(function(oe,b,e,t,S){function g(o){if("contents"in o)for(var v=("styleAttrs"in o)?o.styleAttrs[t.byName.ruby.qname]:null,E=o.kind==="span"&&(v==="container"||v==="textContainer"||v==="baseContainer"),X=o.contents.length-1;X>=0;X--)!E||"styleAttrs"in o.contents[X]&&t.byName.ruby.qname in o.contents[X].styleAttrs?g(o.contents[X]):delete o.contents[X]}function i(o,v,E,X){var K=X&&X.timeContainer==="seq",he=0;X&&(he=K&&E?E.end:X.begin),v.begin=v.explicit_begin?v.explicit_begin+he:he;var Ce=v.begin,De=null;if("sets"in v)for(var ve=0;ve<v.sets.length;ve++)i(o,v.sets[ve],De,v),Ce=v.timeContainer==="seq"?v.sets[ve].end:Math.max(Ce,v.sets[ve].end),De=v.sets[ve];if("contents"in v){if("contents"in v)for(var Le=0;Le<v.contents.length;Le++)i(o,v.contents[Le],De,v),Ce=v.timeContainer==="seq"?v.contents[Le].end:Math.max(Ce,v.contents[Le].end),De=v.contents[Le]}else Ce=K?v.begin:Number.POSITIVE_INFINITY;v.explicit_end!==null&&v.explicit_dur!==null?v.end=Math.min(v.begin+v.explicit_dur,he+v.explicit_end):v.explicit_end===null&&v.explicit_dur!==null?v.end=v.begin+v.explicit_dur:v.explicit_end!==null&&v.explicit_dur===null?v.end=he+v.explicit_end:v.end=Ce,delete v.explicit_begin,delete v.explicit_dur,delete v.explicit_end,o._registerEvent(v)}function h(o){this.node=o}function _(){this.events=[],this.head=new n,this.body=null}function n(){this.styling=new l,this.layout=new F}function l(){this.styles={},this.initials={}}function d(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function P(){this.styleAttrs=null}function F(){this.regions={}}function j(o,v){U.call(this,"image"),this.src=o,this.type=v}function U(o){this.kind=o}function W(o){this.id=o}function D(o){this.regionID=o}function I(o){this.styleAttrs=o}function k(o){this.sets=o}function $(o){this.contents=o}function J(o,v,E){this.explicit_begin=o,this.explicit_end=v,this.explicit_dur=E}function Ne(){U.call(this,"body")}function Be(){U.call(this,"div")}function te(){U.call(this,"p")}function ot(){U.call(this,"span")}function Ae(){U.call(this,"span")}function ke(){U.call(this,"br")}function pe(){}function be(){}function He(o){return o&&"xml:id"in o.attributes&&o.attributes["xml:id"].value||null}function ut(o){return o&&"style"in o.attributes?o.attributes.style.value.split(" "):[]}function tt(o,v){var E={};if(o!==null)for(var X in o.attributes){var K=o.attributes[X].uri+" "+o.attributes[X].local,he=t.byQName[K];if(he!==void 0){var Ce=he.parse(o.attributes[X].value);Ce!==null?(E[K]=Ce,he===t.byName.zIndex&&ce(v,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):de(v,"Cannot parse styling attribute "+K+" --> "+o.attributes[X].value)}}return E}function Se(o,v,E){for(var X in o.attributes)if(o.attributes[X].uri===v&&o.attributes[X].local===E)return o.attributes[X].value;return null}function We(o,v,E){var X,K=null;return(X=/^(\d+(?:\.\d+)?)f$/.exec(E))!==null?v!==null&&(K=parseFloat(X[1])/v):(X=/^(\d+(?:\.\d+)?)t$/.exec(E))!==null?o!==null&&(K=parseFloat(X[1])/o):(X=/^(\d+(?:\.\d+)?)ms$/.exec(E))!==null?K=parseFloat(X[1])/1e3:(X=/^(\d+(?:\.\d+)?)s$/.exec(E))!==null?K=parseFloat(X[1]):(X=/^(\d+(?:\.\d+)?)h$/.exec(E))!==null?K=3600*parseFloat(X[1]):(X=/^(\d+(?:\.\d+)?)m$/.exec(E))!==null?K=60*parseFloat(X[1]):(X=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(E))!==null?K=3600*parseInt(X[1])+60*parseInt(X[2])+parseFloat(X[3]):(X=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(E))!==null&&v!==null&&(K=3600*parseInt(X[1])+60*parseInt(X[2])+parseInt(X[3])+(X[4]===null?0:parseInt(X[4])/v)),K}function lt(o,v,E){for(;v.styleRefs.length>0;){var X=v.styleRefs.pop();X in o.styles?(lt(o,o.styles[X],E),Xe(o.styles[X].styleAttrs,v.styleAttrs)):de(E,"Non-existant style id referenced")}}function Fe(o,v,E,X){for(var K=v.length-1;K>=0;K--){var he=v[K];he in o.styles?Xe(o.styles[he].styleAttrs,E):de(X,"Non-existant style id referenced")}}function Xe(o,v){for(var E in o)o.hasOwnProperty(E)&&(E in v||(v[E]=o[E]))}function ce(o,v){if(o&&o.warn&&o.warn(v))throw v}function de(o,v){if(o&&o.error&&o.error(v))throw v}function je(o,v){throw o&&o.fatal&&o.fatal(v),v}function f(o,v){for(var E,X=0,K=o.length-1;X<=K;){var he=o[E=Math.floor((X+K)/2)];if(he<v)X=E+1;else{if(!(he>v))return{found:!0,index:E};K=E-1}}return{found:!1,index:X}}oe.fromXML=function(o,v,E){var X=b.parser(!0,{xmlns:!0}),K=[],he=[],Ce=[],De=0,ve=null;X.onclosetag=function(st){if(K[0]instanceof pe)ve.head!==null&&ve.head.styling!==null&&Fe(ve.head.styling,K[0].styleRefs,K[0].styleAttrs,v),delete K[0].styleRefs;else if(K[0]instanceof l)for(var wt in K[0].styles)K[0].styles.hasOwnProperty(wt)&&lt(K[0],K[0].styles[wt],v);else if(K[0]instanceof te||K[0]instanceof ot){if(K[0].contents.length>1){var Mt,xt=[K[0].contents[0]];for(Mt=1;Mt<K[0].contents.length;Mt++)K[0].contents[Mt]instanceof Ae&&xt[xt.length-1]instanceof Ae?xt[xt.length-1].text+=K[0].contents[Mt].text:xt.push(K[0].contents[Mt]);K[0].contents=xt}K[0]instanceof ot&&K[0].contents.length===1&&K[0].contents[0]instanceof Ae&&(K[0].text=K[0].contents[0].text,delete K[0].contents)}else K[0]instanceof h&&(K[0].node.uri===e.ns_tt&&K[0].node.local==="metadata"?De--:De>0&&E&&"onCloseTag"in E&&E.onCloseTag());Ce.shift(),he.shift(),K.shift()},X.ontext=function(st){if(K[0]!==void 0)if(K[0]instanceof ot||K[0]instanceof te){if(K[0]instanceof ot){var wt=K[0].styleAttrs[t.byName.ruby.qname];if(wt==="container"||wt==="textContainer"||wt==="baseContainer")return}var Mt=new Ae;Mt.initFromText(ve,K[0],st,he[0],Ce[0],v),K[0].contents.push(Mt)}else K[0]instanceof h&&De>0&&E&&"onText"in E&&E.onText(st)},X.onopentag=function(st){var wt=st.attributes["xml:space"];wt?Ce.unshift(wt.value):Ce.length===0?Ce.unshift("default"):Ce.unshift(Ce[0]);var Mt=st.attributes["xml:lang"];if(Mt?he.unshift(Mt.value):he.length===0?he.unshift(""):he.unshift(he[0]),st.uri===e.ns_tt)if(st.local==="tt")ve!==null&&je(v,"Two <tt> elements at ("+this.line+","+this.column+")"),(ve=new _).initFromNode(st,he[0],v),K.unshift(ve);else if(st.local==="head")K[0]instanceof _||je(v,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),K.unshift(ve.head);else if(st.local==="styling")K[0]instanceof n||je(v,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),K.unshift(ve.head.styling);else if(st.local==="style"){var xt;K[0]instanceof l?((xt=new d).initFromNode(st,v),xt.id?ve.head.styling.styles[xt.id]=xt:de(v,"<style> element missing @id attribute"),K.unshift(xt)):K[0]instanceof pe?((xt=new d).initFromNode(st,v),Xe(xt.styleAttrs,K[0].styleAttrs),K.unshift(xt)):je(v,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if(st.local==="initial"){var mn;if(K[0]instanceof l){for(var pn in(mn=new P).initFromNode(st,v),mn.styleAttrs)mn.styleAttrs.hasOwnProperty(pn)&&(ve.head.styling.initials[pn]=mn.styleAttrs[pn]);K.unshift(mn)}else je(v,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")")}else if(st.local==="layout")K[0]instanceof n||je(v,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),K.unshift(ve.head.layout);else if(st.local==="region"){K[0]instanceof F||je(v,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var hn=new pe;hn.initFromNode(ve,st,he[0],v),!hn.id||hn.id in ve.head.layout.regions?de(v,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):ve.head.layout.regions[hn.id]=hn,K.unshift(hn)}else if(st.local==="body"){K[0]instanceof _||je(v,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),ve.body!==null&&je(v,"Second <body> element at "+this.line+","+this.column+")");var Mn=new Ne;Mn.initFromNode(ve,st,he[0],v),ve.body=Mn,K.unshift(Mn)}else if(st.local==="div"){K[0]instanceof Be||K[0]instanceof Ne||je(v,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var Dn=new Be;Dn.initFromNode(ve,K[0],st,he[0],v);var vn=Dn.styleAttrs[t.byName.backgroundImage.qname];vn&&(Dn.contents.push(new j(vn)),delete Dn.styleAttrs[t.byName.backgroundImage.qname]),K[0].contents.push(Dn),K.unshift(Dn)}else if(st.local==="image"){K[0]instanceof Be||je(v,"Parent of <image> element is not <div> at "+this.line+","+this.column+")");var kn=new j;kn.initFromNode(ve,K[0],st,he[0],v),K[0].contents.push(kn),K.unshift(kn)}else if(st.local==="p"){K[0]instanceof Be||je(v,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var Zn=new te;Zn.initFromNode(ve,K[0],st,he[0],v),K[0].contents.push(Zn),K.unshift(Zn)}else if(st.local==="span"){K[0]instanceof ot||K[0]instanceof te||je(v,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var _n=new ot;_n.initFromNode(ve,K[0],st,he[0],Ce[0],v),K[0].contents.push(_n),K.unshift(_n)}else if(st.local==="br"){K[0]instanceof ot||K[0]instanceof te||je(v,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var qn=new ke;qn.initFromNode(ve,K[0],st,he[0],v),K[0].contents.push(qn),K.unshift(qn)}else if(st.local==="set"){K[0]instanceof ot||K[0]instanceof te||K[0]instanceof Be||K[0]instanceof Ne||K[0]instanceof pe||K[0]instanceof ke||je(v,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var Yn=new be;Yn.initFromNode(ve,K[0],st,v),K[0].sets.push(Yn),K.unshift(Yn)}else K.unshift(new h(st));else K.unshift(new h(st));if(K[0]instanceof h){if(st.uri===e.ns_tt&&st.local==="metadata")De++;else if(De>0&&E&&"onOpenTag"in E){var Vn=[];for(var Kn in st.attributes)Vn[st.attributes[Kn].uri+" "+st.attributes[Kn].local]={uri:st.attributes[Kn].uri,local:st.attributes[Kn].local,value:st.attributes[Kn].value};E.onOpenTag(st.uri,st.local,Vn)}}},X.write(o).close(),delete ve.head.styling.styles;var Le=!1;for(var Ze in ve.head.layout.regions)if(ve.head.layout.regions.hasOwnProperty(Ze)){Le=!0;break}if(!Le){var Je=pe.prototype.createDefaultRegion(ve.lang);ve.head.layout.regions[Je.id]=Je}for(var ht in ve.head.layout.regions)ve.head.layout.regions.hasOwnProperty(ht)&&i(ve,ve.head.layout.regions[ht],null,null);return ve.body&&i(ve,ve.body,null,null),ve.body&&g(ve.body),ve},_.prototype.initFromNode=function(o,v,E){var X=function(De,ve){var Le=Se(De,e.ns_ttp,"cellResolution"),Ze=15,Je=32;if(Le!==null){var ht=/(\d+) (\d+)/.exec(Le);ht!==null?(Je=parseInt(ht[1]),Ze=parseInt(ht[2])):ce(ve,"Malformed cellResolution value (using initial value instead)")}return{w:Je,h:Ze}}(o,E);this.cellLength={h:new S.ComputedLength(0,1/X.h),w:new S.ComputedLength(1/X.w,0)};var K=function(De,ve){var Le,Ze=Se(De,e.ns_ttp,"frameRate"),Je=30;Ze!==null&&((Le=/(\d+)/.exec(Ze))!==null?Je=parseInt(Le[1]):ce(ve,"Malformed frame rate attribute (using initial value instead)"));var ht=Se(De,e.ns_ttp,"frameRateMultiplier"),st=1;ht!==null&&((Le=/(\d+) (\d+)/.exec(ht))!==null?st=parseInt(Le[1])/parseInt(Le[2]):ce(ve,"Malformed frame rate multiplier attribute (using initial value instead)"));var wt=st*Je,Mt=1,xt=Se(De,e.ns_ttp,"tickRate");return xt===null?Ze!==null&&(Mt=wt):(Le=/(\d+)/.exec(xt))!==null?Mt=parseInt(Le[1]):ce(ve,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:wt,tickRate:Mt}}(o,E);this.effectiveFrameRate=K.effectiveFrameRate,this.tickRate=K.tickRate,this.aspectRatio=function(De,ve){var Le=Se(De,e.ns_ittp,"aspectRatio");Le===null&&(Le=Se(De,e.ns_ttp,"displayAspectRatio"));var Ze=null;if(Le!==null){var Je=/(\d+)\s+(\d+)/.exec(Le);if(Je!==null){var ht=parseInt(Je[1]),st=parseInt(Je[2]);ht!==0&&st!==0?Ze=ht/st:de(ve,"Illegal aspectRatio values (ignoring)")}else de(ve,"Malformed aspectRatio attribute (ignoring)")}return Ze}(o,E);var he=Se(o,e.ns_ttp,"timeBase");he!==null&&he!=="media"&&je(E,"Unsupported time base");var Ce=function(De,ve){var Le=Se(De,e.ns_tts,"extent");if(Le===null)return null;var Ze=Le.split(" ");if(Ze.length!==2)return ce(ve,"Malformed extent (ignoring)"),null;var Je=S.parseLength(Ze[0]),ht=S.parseLength(Ze[1]);return ht&&Je?{h:ht,w:Je}:(ce(ve,"Malformed extent values (ignoring)"),null)}(o,E);Ce===null?this.pxLength={h:null,w:null}:(Ce.h.unit==="px"&&Ce.w.unit==="px"||je(E,"Extent on TT must be in px or absent"),this.pxLength={h:new S.ComputedLength(0,1/Ce.h.value),w:new S.ComputedLength(1/Ce.w.value,0)}),this.dimensions={h:new S.ComputedLength(0,1),w:new S.ComputedLength(1,0)},this.lang=v},_.prototype._registerEvent=function(o){if(!(o.end<=o.begin)){var v=f(this.events,o.begin);if(v.found||this.events.splice(v.index,0,o.begin),o.end!==Number.POSITIVE_INFINITY){var E=f(this.events,o.end);E.found||this.events.splice(E.index,0,o.end)}}},_.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},_.prototype.getMediaTimeEvents=function(){return this.events},d.prototype.initFromNode=function(o,v){this.id=He(o),this.styleAttrs=tt(o,v),this.styleRefs=ut(o)},P.prototype.initFromNode=function(o,v){for(var E in this.styleAttrs={},o.attributes)if(o.attributes[E].uri===e.ns_itts||o.attributes[E].uri===e.ns_ebutts||o.attributes[E].uri===e.ns_tts){var X=o.attributes[E].uri+" "+o.attributes[E].local;this.styleAttrs[X]=o.attributes[E].value}},j.prototype.initFromNode=function(o,v,E,X,K){this.src="src"in E.attributes?E.attributes.src.value:null,this.src||de(K,"Invalid image@src attribute"),this.type="type"in E.attributes?E.attributes.type.value:null,this.type||de(K,"Invalid image@type attribute"),I.prototype.initFromNode.call(this,o,v,E,K),J.prototype.initFromNode.call(this,o,v,E,K),k.prototype.initFromNode.call(this,o,v,E,K),D.prototype.initFromNode.call(this,o,v,E,K),this.lang=X},W.prototype.initFromNode=function(o,v,E,X){this.id=He(E)},D.prototype.initFromNode=function(o,v,E,X){this.regionID=function(K){return K&&"region"in K.attributes?K.attributes.region.value:""}(E)},I.prototype.initFromNode=function(o,v,E,X){this.styleAttrs=tt(E,X),o.head!==null&&o.head.styling!==null&&Fe(o.head.styling,ut(E),this.styleAttrs,X)},k.prototype.initFromNode=function(o,v,E,X){this.sets=[]},$.prototype.initFromNode=function(o,v,E,X){this.contents=[]},J.prototype.initFromNode=function(o,v,E,X){var K=function(he,Ce,De,ve){var Le=null;De&&"begin"in De.attributes&&(Le=We(he.tickRate,he.effectiveFrameRate,De.attributes.begin.value))===null&&ce(ve,"Malformed begin value "+De.attributes.begin.value+" (using 0)");var Ze=null;De&&"dur"in De.attributes&&(Ze=We(he.tickRate,he.effectiveFrameRate,De.attributes.dur.value))===null&&ce(ve,"Malformed dur value "+De.attributes.dur.value+" (ignoring)");var Je=null;return De&&"end"in De.attributes&&(Je=We(he.tickRate,he.effectiveFrameRate,De.attributes.end.value))===null&&ce(ve,"Malformed end value (ignoring)"),{explicit_begin:Le,explicit_end:Je,explicit_dur:Ze}}(o,0,E,X);this.explicit_begin=K.explicit_begin,this.explicit_end=K.explicit_end,this.explicit_dur=K.explicit_dur,this.timeContainer=function(he,Ce){var De=he&&"timeContainer"in he.attributes?he.attributes.timeContainer.value:null;return De&&De!=="par"?De==="seq"?"seq":(de(Ce,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(E,X)},Ne.prototype.initFromNode=function(o,v,E,X){I.prototype.initFromNode.call(this,o,null,v,X),J.prototype.initFromNode.call(this,o,null,v,X),k.prototype.initFromNode.call(this,o,null,v,X),D.prototype.initFromNode.call(this,o,null,v,X),$.prototype.initFromNode.call(this,o,null,v,X),this.lang=E},Be.prototype.initFromNode=function(o,v,E,X,K){I.prototype.initFromNode.call(this,o,v,E,K),J.prototype.initFromNode.call(this,o,v,E,K),k.prototype.initFromNode.call(this,o,v,E,K),D.prototype.initFromNode.call(this,o,v,E,K),$.prototype.initFromNode.call(this,o,v,E,K),this.lang=X},te.prototype.initFromNode=function(o,v,E,X,K){I.prototype.initFromNode.call(this,o,v,E,K),J.prototype.initFromNode.call(this,o,v,E,K),k.prototype.initFromNode.call(this,o,v,E,K),D.prototype.initFromNode.call(this,o,v,E,K),$.prototype.initFromNode.call(this,o,v,E,K),this.lang=X},ot.prototype.initFromNode=function(o,v,E,X,K,he){I.prototype.initFromNode.call(this,o,v,E,he),J.prototype.initFromNode.call(this,o,v,E,he),k.prototype.initFromNode.call(this,o,v,E,he),D.prototype.initFromNode.call(this,o,v,E,he),$.prototype.initFromNode.call(this,o,v,E,he),this.space=K,this.lang=X},Ae.prototype.initFromText=function(o,v,E,X,K,he){J.prototype.initFromNode.call(this,o,v,null,he),this.text=E,this.space=K,this.lang=X},ke.prototype.initFromNode=function(o,v,E,X,K){D.prototype.initFromNode.call(this,o,v,E,K),J.prototype.initFromNode.call(this,o,v,E,K),this.lang=X},pe.prototype.createDefaultRegion=function(o){var v=new pe;return W.call(v,""),I.call(v,{}),k.call(v,[]),J.call(v,0,Number.POSITIVE_INFINITY,null),this.lang=o,v},pe.prototype.initFromNode=function(o,v,E,X){W.prototype.initFromNode.call(this,o,null,v,X),J.prototype.initFromNode.call(this,o,null,v,X),k.prototype.initFromNode.call(this,o,null,v,X),this.styleAttrs=tt(v,X),this.styleRefs=ut(v),this.lang=E},be.prototype.initFromNode=function(o,v,E,X){J.prototype.initFromNode.call(this,o,v,E,X);var K=tt(E,X);for(var he in this.qname=null,this.value=null,K)if(K.hasOwnProperty(he)){if(this.qname){de(X,"More than one style specified on set");break}this.qname=he,this.value=K[he]}}})(we,typeof sax>"u"?C(5378):sax,typeof imscNames>"u"?C(210):imscNames,typeof imscStyles>"u"?C(6811):imscStyles,typeof imscUtils>"u"?C(5926):imscUtils)},506:(et,we,C)=>{(function(oe,b,e){function t(I,k,$,J){var Ne;if($.kind==="region")(Ne=document.createElement("div")).style.position="absolute";else if($.kind==="body")Ne=document.createElement("div");else if($.kind==="div")Ne=document.createElement("div");else if($.kind==="image"){if(Ne=document.createElement("img"),I.imgResolver!==null&&$.src!==null){var Be=I.imgResolver($.src,Ne);Be&&(Ne.src=Be),Ne.height=I.regionH,Ne.width=I.regionW}}else if($.kind==="p")Ne=document.createElement("p");else if($.kind==="span")if($.styleAttrs[e.byName.ruby.qname]==="container")Ne=document.createElement("ruby"),I.ruby=!0;else if($.styleAttrs[e.byName.ruby.qname]==="base")Ne=document.createElement("rb");else if($.styleAttrs[e.byName.ruby.qname]==="text")Ne=document.createElement("rt");else if($.styleAttrs[e.byName.ruby.qname]==="baseContainer")Ne=document.createElement("rbc");else if($.styleAttrs[e.byName.ruby.qname]==="textContainer")Ne=document.createElement("rtc");else{if($.styleAttrs[e.byName.ruby.qname]==="delimiter")return;Ne=document.createElement("span")}else $.kind==="br"&&(Ne=document.createElement("br"));if(Ne){if($.lang&&($.kind!=="region"&&$.lang===J.lang||(Ne.lang=$.lang)),k.appendChild(Ne),Ne.style.margin="0",$.kind==="region"){var te=$.styleAttrs[e.byName.writingMode.qname];te==="lrtb"||te==="lr"?(I.ipd="lr",I.bpd="tb"):te==="rltb"||te==="rl"?(I.ipd="rl",I.bpd="tb"):te==="tblr"?(I.ipd="tb",I.bpd="lr"):te!=="tbrl"&&te!=="tb"||(I.ipd="tb",I.bpd="rl")}else if($.kind==="p"&&I.bpd==="tb"){var ot=$.styleAttrs[e.byName.direction.qname];I.ipd=ot==="ltr"?"lr":"rl"}for(var Ae=0;Ae<d.length;Ae++){var ke=d[Ae],pe=$.styleAttrs[ke.qname];pe!==void 0&&ke.map!==null&&ke.map(I,Ne,$,pe)}var be=Ne,He=$.styleAttrs[e.byName.linePadding.qname];if(He&&!He.isZero()){var ut=He.toUsedLength(I.w,I.h);if(ut>0){var tt=Math.ceil(ut)+"px";I.bpd==="tb"?(be.style.paddingLeft=tt,be.style.paddingRight=tt):(be.style.paddingTop=tt,be.style.paddingBottom=tt),I.lp=He}}var Se=$.styleAttrs[e.byName.multiRowAlign.qname];if(Se&&Se!=="auto"){var We=document.createElement("span");We.style.display="inline-block",We.style.textAlign=Se,Ne.appendChild(We),be=We,I.mra=Se}var lt=$.styleAttrs[e.byName.rubyReserve.qname];if(lt&&lt[0]!=="none"&&(I.rubyReserve=lt),$.styleAttrs[e.byName.fillLineGap.qname]&&(I.flg=!0),$.kind==="span"&&$.text){var Fe=$.styleAttrs[e.byName.textEmphasis.qname];if(Fe&&Fe.style!=="none"&&(I.textEmphasis=!0),e.byName.textCombine.qname in $.styleAttrs&&$.styleAttrs[e.byName.textCombine.qname]==="all")Ne.textContent=$.text,Fe&&n(I,Ne,0,Fe);else for(var Xe="",ce=0;ce<$.text.length;ce++){Xe+=$.text.charAt(ce);var de=$.text.charCodeAt(ce);if(de<55296||de>56319||ce===$.text.length-1){var je=document.createElement("span");je.textContent=Xe,Fe&&n(I,je,0,Fe),Ne.appendChild(je),Xe="",je._isd_element=$}}}if("contents"in $)for(var f=0;f<$.contents.length;f++)t(I,be,$.contents[f],$);var o=[];if($.kind==="p"&&(_(I,be,o,null),I.rubyReserve&&(function(he,Ce){for(var De=0;De<he.length;De++){var ve,Le,Ze=document.createElement("ruby"),Je=document.createElement("rb");Je.textContent="",Ze.appendChild(Je);var ht,st=Ce.rubyReserve[1].toUsedLength(Ce.w,Ce.h)+"px";Ce.rubyReserve[0]==="both"||Ce.rubyReserve[0]==="outside"&&he.length==1?((ve=document.createElement("rtc")).style[U]=j?"after":"under",ve.textContent="",ve.style.fontSize=st,(Le=document.createElement("rtc")).style[U]=j?"before":"over",Le.textContent="",Le.style.fontSize=st,Ze.appendChild(ve),Ze.appendChild(Le)):((ve=document.createElement("rtc")).textContent="",ve.style.fontSize=st,ht=Ce.rubyReserve[0]==="after"||Ce.rubyReserve[0]==="outside"&&De>0?j?"after":Ce.bpd==="tb"||Ce.bpd==="rl"?"under":"over":j?"before":Ce.bpd==="tb"||Ce.bpd==="rl"?"over":"under",ve.style[U]=ht,Ze.appendChild(ve));for(var wt=null,Mt=0;Mt<he[De].rbc.length;Mt++)if(he[De].rbc[Mt].localName==="ruby"){wt=he[De].rbc[Mt];for(var xt=0;xt<wt.style.length;xt++)Ze.style.setProperty(wt.style.item(xt),wt.style.getPropertyValue(wt.style.item(xt)));break}(wt=wt||he[De].elements[0].node).parentElement.insertBefore(Ze,wt)}}(o,I),I.rubyReserve=null),(I.ruby||I.rubyReserve)&&(function(he,Ce){for(var De=0;De<he.length;De++)for(var ve=0;ve<he[De].rbc.length;ve++){var Le;he[De].rbc[ve].style[U]||(Le=j?De===0?"before":"after":Ce.bpd==="tb"||Ce.bpd==="rl"?De===0?"over":"under":De===0?"under":"over",he[De].rbc[ve].style[U]=Le)}}(o,I),I.ruby=null),I.textEmphasis&&(function(he,Ce){for(var De=0;De<he.length;De++)for(var ve=0;ve<he[De].te.length;ve++){var Le;he[De].te[ve].style[D]&&he[De].te[ve].style[D]!=="none"||(Le=Ce.bpd==="tb"?De===0?"left over":"left under":Ce.bpd==="rl"?De===0?"right under":"left under":De===0?"left under":"right under",he[De].te[ve].style[D]=Le)}}(o,I),I.textEmphasis=null),I.mra&&(function(he){for(var Ce=0;Ce<he.length-1;Ce++){var De=he[Ce].elements.length;if(De!==0&&he[Ce].br===!1){var ve=document.createElement("br"),Le=he[Ce].elements[De-1].node;Le.parentElement.insertBefore(ve,Le.nextSibling)}}}(o),I.mra=null),I.lp&&(function(he,Ce,De){if(he!==null)for(var ve=0;ve<he.length;ve++){var Le=he[ve].elements.length,Ze=Math.ceil(Ce)+"px",Je="-"+Math.ceil(Ce)+"px";if(Le!==0){var ht=he[ve].elements[he[ve].start_elem],st=he[ve].elements[he[ve].end_elem];if(ht===st&&(elementBoundingRect=ht.node.getBoundingClientRect(),elementBoundingRect.width==0||elementBoundingRect.height==0))continue;De.ipd==="lr"?(ht.node.style.marginLeft=Je,ht.node.style.paddingLeft=Ze):De.ipd==="rl"?(ht.node.style.paddingRight=Ze,ht.node.style.marginRight=Je):De.ipd==="tb"&&(ht.node.style.paddingTop=Ze,ht.node.style.marginTop=Je),De.ipd==="lr"?(st.node.style.marginRight=Je,st.node.style.paddingRight=Ze):De.ipd==="rl"?(st.node.style.paddingLeft=Ze,st.node.style.marginLeft=Je):De.ipd==="tb"&&(st.node.style.paddingBottom=Ze,st.node.style.marginBottom=Je)}}}(o,I.lp.toUsedLength(I.w,I.h),I),I.lp=null),function(he){for(var Ce=0;Ce<he.length;Ce++)for(var De=he[Ce],ve=1;ve<De.elements.length;){var Le=De.elements[ve-1],Ze=De.elements[ve];g(Le.node,Ze.node)?De.elements.splice(ve,1):ve++}for(var Je,ht,st=[],wt=0;wt<he.length;wt++)for(var Mt=0;Mt<he[wt].elements.length;Mt++)(ht=S(Je=he[wt].elements[Mt].node,st,!1))&&(Je.style.backgroundColor=ht);for(var xt=0;xt<st.length;xt++)st[xt].style.backgroundColor=""}(o),I.flg)){var v=h(be.getBoundingClientRect(),I);(function(he,Ce,De,ve,Le){for(var Ze=Math.sign(De-Ce),Je=0;Je<=he.length;Je++){var ht,st,wt,Mt;if(ht=Je===0?Math.round(Ce):Je===he.length?Math.round(De):Math.round((he[Je-1].after+he[Je].before)/2),Je>0&&he[Je-1])for(wt=0;wt<he[Je-1].elements.length;wt++)st=Ze*(ht-(Mt=he[Je-1].elements[wt]).after)+"px",ve.bpd==="lr"?Mt.node.style.paddingRight=st:ve.bpd==="rl"?Mt.node.style.paddingLeft=st:ve.bpd==="tb"&&(Mt.node.style.paddingBottom=st);if(Je<he.length)for(wt=0;wt<he[Je].elements.length;wt++)st=Ze*((Mt=he[Je].elements[wt]).before-ht)+"px",ve.bpd==="lr"?Mt.node.style.paddingLeft=st:ve.bpd==="rl"?Mt.node.style.paddingRight=st:ve.bpd==="tb"&&(Mt.node.style.paddingTop=st)}})(o,v.before,v.after,I),I.flg=null}if($.kind==="region"&&I.bpd==="tb"&&I.enableRollUp&&$.contents.length>0&&$.styleAttrs[e.byName.displayAlign.qname]==="after"){_(I,be,o,null);var E=new i($.id===""?"_":$.id,o);if(I.currentISDState[E.id]=E,I.previousISDState&&E.id in I.previousISDState&&I.previousISDState[E.id].plist.length>0&&E.plist.length>1&&E.plist[E.plist.length-2].text===I.previousISDState[E.id].plist[I.previousISDState[E.id].plist.length-1].text){var X=Ne.firstElementChild,K=E.plist[E.plist.length-1].after-E.plist[E.plist.length-1].before;X.style.bottom="-"+K+"px",X.style.transition="transform 0.4s",X.style.position="relative",X.style.transform="translateY(-"+K+"px)"}}}else(function(he,Ce){if(he&&he.error&&he.error(Ce))throw Ce})(I.errorHandler,"Error processing ISD element kind: "+$.kind)}function S(I,k,$){return I.style.backgroundColor?($&&!k.includes(I)&&k.push(I),I.style.backgroundColor):I.parentElement.nodeName==="SPAN"?S(I.parentElement,k,!0):void 0}function g(I,k){if(I.tagName==="SPAN"&&k.tagName==="SPAN"&&I._isd_element===k._isd_element){I.textContent+=k.textContent;for(var $=0;$<k.style.length;$++){var J=k.style[$];(J.indexOf("border")>=0||J.indexOf("padding")>=0||J.indexOf("margin")>=0)&&(I.style[J]=k.style[J])}return k.parentElement.removeChild(k),!0}return!1}function i(I,k){this.id=I,this.plist=k}function h(I,k){var $={before:null,after:null,start:null,end:null};return k.bpd==="tb"?($.before=I.top,$.after=I.bottom,k.ipd==="lr"?($.start=I.left,$.end=I.right):($.start=I.right,$.end=I.left)):k.bpd==="lr"?($.before=I.left,$.after=I.right,$.start=I.top,$.end=I.bottom):k.bpd==="rl"&&($.before=I.right,$.after=I.left,$.start=I.top,$.end=I.bottom),$}function _(I,k,$,J){if(k.localName!=="rt"&&k.localName!=="rtc"){var Ne,Be,te,ot,Ae=k.style.backgroundColor||J;if(k.childElementCount===0)if(k.localName==="span"||k.localName==="rb"){var ke=h(k.getBoundingClientRect(),I);if($.length!==0&&(Ne=ke.before,Be=ke.after,te=$[$.length-1].before,Be<(ot=$[$.length-1].after)&&Ne>te||ot<=Be&&te>=Ne)){var pe=Math.sign(ke.after-ke.before),be=Math.sign(ke.end-ke.start);pe*(ke.before-$[$.length-1].before)<0&&($[$.length-1].before=ke.before),pe*(ke.after-$[$.length-1].after)>0&&($[$.length-1].after=ke.after),be*(ke.start-$[$.length-1].start)<0&&($[$.length-1].start=ke.start,$[$.length-1].start_elem=$[$.length-1].elements.length),be*(ke.end-$[$.length-1].end)>0&&($[$.length-1].end=ke.end,$[$.length-1].end_elem=$[$.length-1].elements.length)}else $.push({before:ke.before,after:ke.after,start:ke.start,end:ke.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1});$[$.length-1].text+=k.textContent,$[$.length-1].elements.push({node:k,bgcolor:Ae,before:ke.before,after:ke.after})}else k.localName==="br"&&$.length!==0&&($[$.length-1].br=!0);else for(var He=k.firstChild;He;)He.nodeType===Node.ELEMENT_NODE&&(_(I,He,$,Ae),He.localName==="ruby"||He.localName==="rtc"?$.length>0&&$[$.length-1].rbc.push(He):He.localName==="span"&&He.style[W]&&He.style[W]!=="none"&&$.length>0&&$[$.length-1].te.push(He)),He=He.nextSibling}}function n(I,k,$,J){var Ne;J.style!=="none"&&(J.style==="auto"?k.style[W]="filled":k.style[W]=J.style+" "+J.symbol,(J.position==="before"||J.position==="after")&&(Ne=I.bpd==="tb"?J.position==="before"?"left over":"left under":I.bpd==="rl"?J.position==="before"?"right under":"left under":J.position==="before"?"left under":"right under",k.style[D]=Ne))}function l(I,k){this.qname=I,this.map=k}oe.render=function(I,k,$,J,Ne,Be,te,ot,Ae){var ke=J||k.clientHeight,pe=Ne||k.clientWidth;if(I.aspectRatio!==null){var be=ke*I.aspectRatio;be>pe?ke=Math.round(pe/I.aspectRatio):pe=be}var He=document.createElement("div");He.style.position="relative",He.style.width=pe+"px",He.style.height=ke+"px",He.style.margin="auto",He.style.top=0,He.style.bottom=0,He.style.left=0,He.style.right=0,He.style.zIndex=0;var ut={h:ke,w:pe,regionH:null,regionW:null,imgResolver:$,displayForcedOnlyMode:Be||!1,isd:I,errorHandler:te,previousISDState:ot,enableRollUp:Ae||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};if(k.appendChild(He),"contents"in I)for(var tt=0;tt<I.contents.length;tt++)t(ut,He,I.contents[tt],I);return ut.currentISDState};for(var d=[new l("http://www.w3.org/ns/ttml#styling backgroundColor",function(I,k,$,J){J[3]!==0&&(k.style.backgroundColor="rgba("+J[0].toString()+","+J[1].toString()+","+J[2].toString()+","+(J[3]/255).toString()+")")}),new l("http://www.w3.org/ns/ttml#styling color",function(I,k,$,J){k.style.color="rgba("+J[0].toString()+","+J[1].toString()+","+J[2].toString()+","+(J[3]/255).toString()+")"}),new l("http://www.w3.org/ns/ttml#styling direction",function(I,k,$,J){k.style.direction=J}),new l("http://www.w3.org/ns/ttml#styling display",function(I,k,$,J){}),new l("http://www.w3.org/ns/ttml#styling displayAlign",function(I,k,$,J){k.style.display="flex",k.style.flexDirection="column",J==="before"?k.style.justifyContent="flex-start":J==="center"?k.style.justifyContent="center":J==="after"&&(k.style.justifyContent="flex-end")}),new l("http://www.w3.org/ns/ttml#styling extent",function(I,k,$,J){I.regionH=J.h.toUsedLength(I.w,I.h),I.regionW=J.w.toUsedLength(I.w,I.h);var Ne=0,Be=0,te=$.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];te&&(Ne=te[0].toUsedLength(I.w,I.h)+te[2].toUsedLength(I.w,I.h),Be=te[1].toUsedLength(I.w,I.h)+te[3].toUsedLength(I.w,I.h)),k.style.height=I.regionH-Ne+"px",k.style.width=I.regionW-Be+"px"}),new l("http://www.w3.org/ns/ttml#styling fontFamily",function(I,k,$,J){for(var Ne=[],Be=0;Be<J.length;Be++)J[Be]==="monospaceSerif"?(Ne.push("Courier New"),Ne.push('"Liberation Mono"'),Ne.push("Courier"),Ne.push("monospace")):J[Be]==="proportionalSansSerif"?(Ne.push("Arial"),Ne.push("Helvetica"),Ne.push('"Liberation Sans"'),Ne.push("sans-serif")):J[Be]==="monospace"?Ne.push("monospace"):J[Be]==="sansSerif"?Ne.push("sans-serif"):J[Be]==="serif"?Ne.push("serif"):J[Be]==="monospaceSansSerif"?(Ne.push("Consolas"),Ne.push("monospace")):J[Be]==="proportionalSerif"?Ne.push("serif"):Ne.push(J[Be]);if(Ne.length>0){for(var te=[Ne[0]],ot=1;ot<Ne.length;ot++)te.indexOf(Ne[ot])==-1&&te.push(Ne[ot]);Ne=te}k.style.fontFamily=Ne.join(",")}),new l("http://www.w3.org/ns/ttml#styling shear",function(I,k,$,J){if(J!==0){var Ne=-.9*J;I.bpd==="tb"?k.style.transform="skewX("+Ne+"deg)":k.style.transform="skewY("+Ne+"deg)"}}),new l("http://www.w3.org/ns/ttml#styling fontSize",function(I,k,$,J){k.style.fontSize=J.toUsedLength(I.w,I.h)+"px"}),new l("http://www.w3.org/ns/ttml#styling fontStyle",function(I,k,$,J){k.style.fontStyle=J}),new l("http://www.w3.org/ns/ttml#styling fontWeight",function(I,k,$,J){k.style.fontWeight=J}),new l("http://www.w3.org/ns/ttml#styling lineHeight",function(I,k,$,J){k.style.lineHeight=J==="normal"?"normal":J.toUsedLength(I.w,I.h)+"px"}),new l("http://www.w3.org/ns/ttml#styling opacity",function(I,k,$,J){k.style.opacity=J}),new l("http://www.w3.org/ns/ttml#styling origin",function(I,k,$,J){k.style.top=J.h.toUsedLength(I.w,I.h)+"px",k.style.left=J.w.toUsedLength(I.w,I.h)+"px"}),new l("http://www.w3.org/ns/ttml#styling overflow",function(I,k,$,J){k.style.overflow=J}),new l("http://www.w3.org/ns/ttml#styling padding",function(I,k,$,J){var Ne=[];Ne[0]=J[0].toUsedLength(I.w,I.h)+"px",Ne[1]=J[3].toUsedLength(I.w,I.h)+"px",Ne[2]=J[2].toUsedLength(I.w,I.h)+"px",Ne[3]=J[1].toUsedLength(I.w,I.h)+"px",k.style.padding=Ne.join(" ")}),new l("http://www.w3.org/ns/ttml#styling position",function(I,k,$,J){k.style.top=J.h.toUsedLength(I.w,I.h)+"px",k.style.left=J.w.toUsedLength(I.w,I.h)+"px"}),new l("http://www.w3.org/ns/ttml#styling rubyAlign",function(I,k,$,J){k.style.rubyAlign=J==="spaceAround"?"space-around":"center"}),new l("http://www.w3.org/ns/ttml#styling rubyPosition",function(I,k,$,J){var Ne;J!=="before"&&J!=="after"||(Ne=j?J:I.bpd==="tb"||I.bpd==="rl"?J==="before"?"over":"under":J==="before"?"under":"over",k.parentElement.style[U]=Ne)}),new l("http://www.w3.org/ns/ttml#styling showBackground",null),new l("http://www.w3.org/ns/ttml#styling textAlign",function(I,k,$,J){var Ne;Ne=J==="start"?I.ipd==="rl"?"right":"left":J==="end"?I.ipd==="rl"?"left":"right":J,k.style.textAlign=Ne}),new l("http://www.w3.org/ns/ttml#styling textDecoration",function(I,k,$,J){k.style.textDecoration=J.join(" ").replace("lineThrough","line-through")}),new l("http://www.w3.org/ns/ttml#styling textOutline",function(I,k,$,J){}),new l("http://www.w3.org/ns/ttml#styling textShadow",function(I,k,$,J){var Ne=$.styleAttrs[e.byName.textOutline.qname];if(J==="none"&&Ne==="none")k.style.textShadow="";else{var Be=[];if(Ne!=="none"){var te="rgba("+Ne.color[0].toString()+","+Ne.color[1].toString()+","+Ne.color[2].toString()+","+(Ne.color[3]/255).toString()+")";Be.push("1px 1px 1px "+te),Be.push("-1px 1px 1px "+te),Be.push("1px -1px 1px "+te),Be.push("-1px -1px 1px "+te)}if(J!=="none")for(var ot=0;ot<J.length;ot++)Be.push(J[ot].x_off.toUsedLength(I.w,I.h)+"px "+J[ot].y_off.toUsedLength(I.w,I.h)+"px "+J[ot].b_radius.toUsedLength(I.w,I.h)+"px rgba("+J[ot].color[0].toString()+","+J[ot].color[1].toString()+","+J[ot].color[2].toString()+","+(J[ot].color[3]/255).toString()+")");k.style.textShadow=Be.join(",")}}),new l("http://www.w3.org/ns/ttml#styling textCombine",function(I,k,$,J){k.style.textCombineUpright=J}),new l("http://www.w3.org/ns/ttml#styling textEmphasis",function(I,k,$,J){}),new l("http://www.w3.org/ns/ttml#styling unicodeBidi",function(I,k,$,J){var Ne;Ne=J==="bidiOverride"?"bidi-override":J,k.style.unicodeBidi=Ne}),new l("http://www.w3.org/ns/ttml#styling visibility",function(I,k,$,J){k.style.visibility=J}),new l("http://www.w3.org/ns/ttml#styling wrapOption",function(I,k,$,J){J==="wrap"?$.space==="preserve"?k.style.whiteSpace="pre-wrap":k.style.whiteSpace="normal":$.space==="preserve"?k.style.whiteSpace="pre":k.style.whiteSpace="noWrap"}),new l("http://www.w3.org/ns/ttml#styling writingMode",function(I,k,$,J){J==="lrtb"||J==="lr"||J==="rltb"||J==="rl"?k.style.writingMode="horizontal-tb":J==="tblr"?k.style.writingMode="vertical-lr":J!=="tbrl"&&J!=="tb"||(k.style.writingMode="vertical-rl")}),new l("http://www.w3.org/ns/ttml#styling zIndex",function(I,k,$,J){k.style.zIndex=J}),new l("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(I,k,$,J){I.displayForcedOnlyMode&&J===!1&&(k.style.visibility="hidden")})],P={},F=0;F<d.length;F++)P[d[F].qname]=d[F];var j="webkitRubyPosition"in window.getComputedStyle(document.documentElement),U=j?"webkitRubyPosition":"rubyPosition",W="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",D="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition"})(we,typeof imscNames>"u"?C(210):imscNames,typeof imscStyles>"u"?C(6811):imscStyles,typeof imscUtils>"u"?C(5926):imscUtils)},4080:(et,we,C)=>{(function(oe,b,e,t){oe.generateISD=function(d,P,F){var j,U=new _(d),W={},D={},I=d.head.styling.initials[e.byName.showBackground.qname],k=d.head.styling.initials[e.byName.backgroundColor.qname];for(var $ in d.head.layout.regions)if(d.head.layout.regions.hasOwnProperty($)){var J=d.head.layout.regions[$],Ne=J.styleAttrs[e.byName.showBackground.qname]||I,Be=J.styleAttrs[e.byName.backgroundColor.qname]||k;D[J.id]=(Ne==="always"||Ne===void 0)&&Be!==void 0&&!(P<J.begin||P>=J.end)}for(var te in d.body&&d.body.regionID&&(D[d.body.regionID]=!0),j=d.body!==null?function Ae(ke,pe){if(pe.contents){var be={};for(var He in pe)pe.hasOwnProperty(He)&&(be[He]=pe[He]);return be.contents=[],pe.contents.filter(function(ut){return!(ke<ut.begin||ke>=ut.end)}).forEach(function(ut){var tt=Ae(ke,ut);tt.regionID&&(D[tt.regionID]=!0),tt!==null&&be.contents.push(tt)}),be}return pe}(P,d.body):null,D[""]!==void 0&&(D[""]=!0),D)if(D[te]){var ot=g(d,P,d.head.layout.regions[te],j,null,"",d.head.layout.regions[te],F,W);ot!==null&&U.contents.push(ot.element)}return U};var S=[e.byName.color.qname,e.byName.textCombine.qname,e.byName.textDecoration.qname,e.byName.textEmphasis.qname,e.byName.textOutline.qname,e.byName.textShadow.qname];function g(d,P,F,j,U,W,D,I,k){if(P<D.begin||P>=D.end)return null;var $="regionID"in D&&D.regionID!==""?D.regionID:W;if(U!==null&&$!==F.id&&(!("contents"in D)||"contents"in D&&D.contents.length===0||$!==""))return null;var J=new n(D);if("sets"in D)for(var Ne=0;Ne<D.sets.length;Ne++)P<D.sets[Ne].begin||P>=D.sets[Ne].end||(J.styleAttrs[D.sets[Ne].qname]=D.sets[Ne].value);var Be={};for(var te in J.styleAttrs)if(J.styleAttrs.hasOwnProperty(te)&&(Be[te]=!0,J.kind==="region"&&te===e.byName.writingMode.qname&&!(e.byName.direction.qname in J.styleAttrs))){var ot=J.styleAttrs[te];ot==="lrtb"||ot==="lr"?J.styleAttrs[e.byName.direction.qname]="ltr":ot!=="rltb"&&ot!=="rl"||(J.styleAttrs[e.byName.direction.qname]="rtl")}if(U!==null)for(var Ae=0;Ae<e.all.length;Ae++){var ke=e.all[Ae];if(ke.qname===e.byName.textDecoration.qname){var pe=U.styleAttrs[ke.qname],be=J.styleAttrs[ke.qname],He=[];be===void 0?He=pe:be.indexOf("none")===-1?((be.indexOf("noUnderline")===-1&&pe.indexOf("underline")!==-1||be.indexOf("underline")!==-1)&&He.push("underline"),(be.indexOf("noLineThrough")===-1&&pe.indexOf("lineThrough")!==-1||be.indexOf("lineThrough")!==-1)&&He.push("lineThrough"),(be.indexOf("noOverline")===-1&&pe.indexOf("overline")!==-1||be.indexOf("overline")!==-1)&&He.push("overline")):He.push("none"),J.styleAttrs[ke.qname]=He}else if(ke.qname!==e.byName.fontSize.qname||ke.qname in J.styleAttrs||J.kind!=="span"||J.styleAttrs[e.byName.ruby.qname]!=="textContainer")if(ke.qname!==e.byName.fontSize.qname||ke.qname in J.styleAttrs||J.kind!=="span"||J.styleAttrs[e.byName.ruby.qname]!=="text")ke.inherit&&ke.qname in U.styleAttrs&&!(ke.qname in J.styleAttrs)&&(J.styleAttrs[ke.qname]=U.styleAttrs[ke.qname]);else{var ut=U.styleAttrs[e.byName.fontSize.qname];U.styleAttrs[e.byName.ruby.qname]==="textContainer"?J.styleAttrs[ke.qname]=ut:J.styleAttrs[ke.qname]=new t.ComputedLength(.5*ut.rw,.5*ut.rh)}else{var tt=U.styleAttrs[e.byName.fontSize.qname];J.styleAttrs[ke.qname]=new t.ComputedLength(.5*tt.rw,.5*tt.rh)}}for(var Se=0;Se<e.all.length;Se++){var We=e.all[Se];if(!(We.qname in J.styleAttrs)&&!(We.qname===e.byName.position.qname&&e.byName.origin.qname in J.styleAttrs||We.qname===e.byName.origin.qname&&e.byName.position.qname in J.styleAttrs)){var lt=d.head.styling.initials[We.qname]||We.initial;if(lt!==null&&(J.kind==="region"||We.inherit===!1&&lt!==null)){var Fe=We.parse(lt);Fe!==null?(J.styleAttrs[We.qname]=Fe,Be[We.qname]=!0):l(I,"Invalid initial value for '"+We.qname+"' on element '"+J.kind)}}}for(var Xe=0;Xe<e.all.length;Xe++){var ce=e.all[Xe];if(ce.qname in Be&&ce.compute!==null){var de=ce.compute(d,U,J,J.styleAttrs[ce.qname],k);de!==null?J.styleAttrs[ce.qname]=de:(J.styleAttrs[ce.qname]=ce.compute(d,U,J,ce.parse(ce.initial),k),l(I,"Style '"+ce.qname+"' on element '"+J.kind+"' cannot be computed"))}}if(J.styleAttrs[e.byName.display.qname]==="none")return null;var je=null;U===null?je=j===null?[]:[j]:"contents"in D&&(je=D.contents);for(var f=0;je!==null&&f<je.length;f++){var o=g(d,P,F,j,J,$,je[f],I,k);o!==null&&J.contents.push(o.element)}for(var v in J.styleAttrs)if(J.styleAttrs.hasOwnProperty(v)){var E=!1;if(J.kind==="span"){var X=J.styleAttrs[e.byName.ruby.qname];(E=(X==="container"||X==="textContainer"||X==="baseContainer")&&S.indexOf(v)!==-1)||(E=X!=="container"&&v===e.byName.rubyAlign.qname),E||(E=!(X==="textContainer"||X==="text")&&v===e.byName.rubyPosition.qname)}if(!E){var K=e.byQName[v];"applies"in K&&(E=K.applies.indexOf(J.kind)===-1)}E&&delete J.styleAttrs[v]}var he=J.styleAttrs[e.byName.ruby.qname];if(J.kind==="p"||J.kind==="span"&&(he==="textContainer"||he==="text")){var Ce=[];i(J,Ce),function(De){for(var ve,Le=0;Le<De.length;)if((ve=De[Le]).kind!=="br"&&ve.space!=="preserve"){var Ze=ve.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(Ze)&&(Le===0||(Je=De[Le-1]).kind==="br"||/[\r\n\t ]$/.test(Je.text))&&(Ze=Ze.substring(1)),ve.text=Ze,Ze.length===0?De.splice(Le,1):Le++}else Le++;var Je,ht;for(Le=0;Le<De.length;Le++)(ve=De[Le]).kind!=="br"&&ve.space!=="preserve"?/[ ]$/.test(ve.text)&&(Le===De.length-1||(ht=De[Le+1]).kind==="br"||ht.space==="preserve"&&/^[\r\n]/.test(ht.text))&&(ve.text=ve.text.slice(0,-1)):Le++}(Ce),h(J)}return J.kind==="div"&&e.byName.backgroundImage.qname in J.styleAttrs||J.kind==="br"||J.kind==="image"||"contents"in J&&J.contents.length>0||J.kind==="span"&&J.text!==null||J.kind==="region"&&J.styleAttrs[e.byName.showBackground.qname]==="always"?{region_id:$,element:J}:null}function i(d,P){if("contents"in d)for(var F=0;F<d.contents.length;F++){var j=d.contents[F],U=j.styleAttrs[e.byName.ruby.qname];(j.kind!=="span"||U!=="textContainer"&&U!=="text")&&("contents"in j?i(j,P):(j.kind==="span"&&j.text.length!==0||j.kind==="br")&&P.push(j))}}function h(d){if(d.kind==="br")return!1;if("text"in d)return d.text.length===0;if("contents"in d){for(var P=d.contents.length;P--;)h(d.contents[P])&&d.contents.splice(P,1);return d.contents.length===0}}function _(d){this.contents=[],this.aspectRatio=d.aspectRatio,this.lang=d.lang}function n(d){for(var P in this.kind=d.kind||"region",this.lang=d.lang,d.id&&(this.id=d.id),this.styleAttrs={},d.styleAttrs)d.styleAttrs.hasOwnProperty(P)&&(this.styleAttrs[P]=d.styleAttrs[P]);"src"in d&&(this.src=d.src),"type"in d&&(this.type=d.type),"text"in d?this.text=d.text:(this.kind==="region"||"contents"in d)&&(this.contents=[]),"space"in d&&(this.space=d.space)}function l(d,P){if(d&&d.error&&d.error(P))throw P}})(we,typeof imscNames>"u"?C(210):imscNames,typeof imscStyles>"u"?C(6811):imscStyles,typeof imscUtils>"u"?C(5926):imscUtils)},4403:(et,we,C)=>{we.generateISD=C(4080).generateISD,we.fromXML=C(3362).fromXML,we.renderHTML=C(506).render},210:(et,we)=>{(function(C){C.ns_tt="http://www.w3.org/ns/ttml",C.ns_tts="http://www.w3.org/ns/ttml#styling",C.ns_ttp="http://www.w3.org/ns/ttml#parameter",C.ns_xml="http://www.w3.org/XML/1998/namespace",C.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",C.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",C.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",C.ns_ebutts="urn:ebu:tt:style"})(we)},6811:(et,we,C)=>{(function(oe,b,e){function t(i,h,_,n,l,d,P,F){this.name=h,this.ns=i,this.qname=i+" "+h,this.inherit=l,this.animatable=d,this.initial=_,this.applies=n,this.parse=P,this.compute=F}for(var S in oe.all=[new t(b.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,e.parseColor,null),new t(b.ns_tts,"color","white",["span"],!0,!0,e.parseColor,null),new t(b.ns_tts,"direction","ltr",["p","span"],!0,!0,function(i){return i},null),new t(b.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(i){return i},null),new t(b.ns_tts,"displayAlign","before",["region"],!1,!0,function(i){return i},null),new t(b.ns_tts,"extent","auto",["tt","region"],!1,!0,function(i){if(i==="auto")return i;var h=i.split(" ");if(h.length!==2)return null;var _=e.parseLength(h[0]),n=e.parseLength(h[1]);return n&&_?{h:n,w:_}:null},function(i,h,_,n,l){var d,P;if(n==="auto")d=new e.ComputedLength(0,1);else if((d=e.toComputedLength(n.h.value,n.h.unit,null,i.dimensions.h,null,i.pxLength.h))===null)return null;if(n==="auto")P=new e.ComputedLength(1,0);else if((P=e.toComputedLength(n.w.value,n.w.unit,null,i.dimensions.w,null,i.pxLength.w))===null)return null;return{h:d,w:P}}),new t(b.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(i){for(var h=i.split(","),_=[],n=0;n<h.length;n++)h[n].charAt(0)!=="'"&&h[n].charAt(0)!=='"'&&h[n]==="default"?_.push("monospaceSerif"):_.push(h[n]);return _},null),new t(b.ns_tts,"shear","0%",["p"],!0,!0,e.parseLength,function(i,h,_,n){return n.unit!=="%"?null:Math.abs(n.value)>100?100*Math.sign(n.value):n.value}),new t(b.ns_tts,"fontSize","1c",["span","p"],!0,!0,e.parseLength,function(i,h,_,n,l){return e.toComputedLength(n.value,n.unit,h!==null?h.styleAttrs[oe.byName.fontSize.qname]:i.cellLength.h,h!==null?h.styleAttrs[oe.byName.fontSize.qname]:i.cellLength.h,i.cellLength.h,i.pxLength.h)}),new t(b.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(i){return i},null),new t(b.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(i){return i},null),new t(b.ns_tts,"lineHeight","normal",["p"],!0,!0,function(i){return i==="normal"?i:e.parseLength(i)},function(i,h,_,n,l){var d;if(n==="normal")d=n;else if((d=e.toComputedLength(n.value,n.unit,_.styleAttrs[oe.byName.fontSize.qname],_.styleAttrs[oe.byName.fontSize.qname],i.cellLength.h,i.pxLength.h))===null)return null;return d}),new t(b.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new t(b.ns_tts,"origin","auto",["region"],!1,!0,function(i){if(i==="auto")return i;var h=i.split(" ");if(h.length!==2)return null;var _=e.parseLength(h[0]),n=e.parseLength(h[1]);return n&&_?{h:n,w:_}:null},function(i,h,_,n,l){var d,P;if(n==="auto")d=new e.ComputedLength(0,0);else if((d=e.toComputedLength(n.h.value,n.h.unit,null,i.dimensions.h,null,i.pxLength.h))===null)return null;if(n==="auto")P=new e.ComputedLength(0,0);else if((P=e.toComputedLength(n.w.value,n.w.unit,null,i.dimensions.w,null,i.pxLength.w))===null)return null;return{h:d,w:P}}),new t(b.ns_tts,"overflow","hidden",["region"],!1,!0,function(i){return i},null),new t(b.ns_tts,"padding","0px",["region"],!1,!0,function(i){var h=i.split(" ");if(h.length>4)return null;for(var _=[],n=0;n<h.length;n++){var l=e.parseLength(h[n]);if(!l)return null;_.push(l)}return _},function(i,h,_,n,l){var d;if(n.length===1)d=[n[0],n[0],n[0],n[0]];else if(n.length===2)d=[n[0],n[1],n[0],n[1]];else if(n.length===3)d=[n[0],n[1],n[2],n[1]];else{if(n.length!==4)return null;d=[n[0],n[1],n[2],n[3]]}var P=_.styleAttrs[oe.byName.writingMode.qname];if(P==="lrtb"||P==="lr")d=[d[0],d[3],d[2],d[1]];else if(P==="rltb"||P==="rl")d=[d[0],d[1],d[2],d[3]];else if(P==="tblr")d=[d[3],d[0],d[1],d[2]];else{if(P!=="tbrl"&&P!=="tb")return null;d=[d[3],d[2],d[1],d[0]]}for(var F=[],j=0;j<d.length;j++)if(d[j].value===0)F[j]=new e.ComputedLength(0,0);else if(F[j]=e.toComputedLength(d[j].value,d[j].unit,_.styleAttrs[oe.byName.fontSize.qname],j===0||j===2?_.styleAttrs[oe.byName.extent.qname].h:_.styleAttrs[oe.byName.extent.qname].w,j===0||j===2?i.cellLength.h:i.cellLength.w,j===0||j===2?i.pxLength.h:i.pxLength.w),F[j]===null)return null;return F}),new t(b.ns_tts,"position","top left",["region"],!1,!0,function(i){return e.parsePosition(i)},function(i,h,_,n){var l,d;return(l=e.toComputedLength(n.v.offset.value,n.v.offset.unit,null,new e.ComputedLength(-_.styleAttrs[oe.byName.extent.qname].h.rw,i.dimensions.h.rh-_.styleAttrs[oe.byName.extent.qname].h.rh),null,i.pxLength.h))===null?null:(n.v.edge==="bottom"&&(l=new e.ComputedLength(-l.rw-_.styleAttrs[oe.byName.extent.qname].h.rw,i.dimensions.h.rh-l.rh-_.styleAttrs[oe.byName.extent.qname].h.rh)),d=e.toComputedLength(n.h.offset.value,n.h.offset.unit,null,new e.ComputedLength(i.dimensions.w.rw-_.styleAttrs[oe.byName.extent.qname].w.rw,-_.styleAttrs[oe.byName.extent.qname].w.rh),null,i.pxLength.w),l===null?null:(n.h.edge==="right"&&(d=new e.ComputedLength(i.dimensions.w.rw-d.rw-_.styleAttrs[oe.byName.extent.qname].w.rw,-d.rh-_.styleAttrs[oe.byName.extent.qname].w.rh)),{h:l,w:d}))}),new t(b.ns_tts,"ruby","none",["span"],!1,!0,function(i){return i},null),new t(b.ns_tts,"rubyAlign","center",["span"],!0,!0,function(i){return i!=="center"&&i!=="spaceAround"?null:i},null),new t(b.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(i){return i},null),new t(b.ns_tts,"rubyReserve","none",["p"],!0,!0,function(i){var h=i.split(" "),_=[null,null];if(h.length===0||h.length>2||h[0]!=="none"&&h[0]!=="both"&&h[0]!=="after"&&h[0]!=="before"&&h[0]!=="outside")return null;if(_[0]=h[0],h.length===2&&h[0]!=="none"){var n=e.parseLength(h[1]);if(!n)return null;_[1]=n}return _},function(i,h,_,n,l){if(n[0]==="none")return n;var d;return(d=n[1]===null?new e.ComputedLength(.5*_.styleAttrs[oe.byName.fontSize.qname].rw,.5*_.styleAttrs[oe.byName.fontSize.qname].rh):e.toComputedLength(n[1].value,n[1].unit,_.styleAttrs[oe.byName.fontSize.qname],_.styleAttrs[oe.byName.fontSize.qname],i.cellLength.h,i.pxLength.h))===null?null:[n[0],d]}),new t(b.ns_tts,"showBackground","always",["region"],!1,!0,function(i){return i},null),new t(b.ns_tts,"textAlign","start",["p"],!0,!0,function(i){return i},function(i,h,_,n,l){return n==="left"?"start":n==="right"?"end":n}),new t(b.ns_tts,"textCombine","none",["span"],!0,!0,function(i){return i==="none"||i==="all"?i:null},null),new t(b.ns_tts,"textDecoration","none",["span"],!0,!0,function(i){return i.split(" ")},null),new t(b.ns_tts,"textEmphasis","none",["span"],!0,!0,function(i){for(var h=i.split(" "),_={style:null,symbol:null,color:null,position:null},n=0;n<h.length;n++)if(h[n]==="none"||h[n]==="auto")_.style=h[n];else if(h[n]==="filled"||h[n]==="open")_.style=h[n];else if(h[n]==="circle"||h[n]==="dot"||h[n]==="sesame")_.symbol=h[n];else if(h[n]==="current")_.color=h[n];else if(h[n]==="outside"||h[n]==="before"||h[n]==="after")_.position=h[n];else if(_.color=e.parseColor(h[n]),_.color===null)return null;return _.style==null&&_.symbol==null?_.style="auto":(_.symbol=_.symbol||"circle",_.style=_.style||"filled"),_.position=_.position||"outside",_.color=_.color||"current",_},null),new t(b.ns_tts,"textOutline","none",["span"],!0,!0,function(i){if(i==="none")return i;var h={},_=i.split(" ");if(_.length===0||_.length>2)return null;var n=e.parseColor(_[0]);if(h.color=n,n!==null&&_.shift(),_.length!==1)return null;var l=e.parseLength(_[0]);return l?(h.thickness=l,h):null},function(i,h,_,n,l){if(n==="none")return n;var d={};return n.color===null?d.color=_.styleAttrs[oe.byName.color.qname]:d.color=n.color,d.thickness=e.toComputedLength(n.thickness.value,n.thickness.unit,_.styleAttrs[oe.byName.fontSize.qname],_.styleAttrs[oe.byName.fontSize.qname],i.cellLength.h,i.pxLength.h),d.thickness===null?null:d}),new t(b.ns_tts,"textShadow","none",["span"],!0,!0,e.parseTextShadow,function(i,h,_,n){if(n==="none")return n;for(var l=[],d=0;d<n.length;d++){var P={};if(P.x_off=e.toComputedLength(n[d][0].value,n[d][0].unit,null,_.styleAttrs[oe.byName.fontSize.qname],null,i.pxLength.w),P.x_off===null||(P.y_off=e.toComputedLength(n[d][1].value,n[d][1].unit,null,_.styleAttrs[oe.byName.fontSize.qname],null,i.pxLength.h),P.y_off===null))return null;if(n[d][2]===null)P.b_radius=0;else if(P.b_radius=e.toComputedLength(n[d][2].value,n[d][2].unit,null,_.styleAttrs[oe.byName.fontSize.qname],null,i.pxLength.h),P.b_radius===null)return null;n[d][3]===null?P.color=_.styleAttrs[oe.byName.color.qname]:P.color=n[d][3],l.push(P)}return l}),new t(b.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(i){return i},null),new t(b.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(i){return i},null),new t(b.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(i){return i},null),new t(b.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(i){return i},null),new t(b.ns_tts,"zIndex","auto",["region"],!1,!0,function(i){var h;return i==="auto"?h=i:(h=parseInt(i),isNaN(h)&&(h=null)),h},null),new t(b.ns_ebutts,"linePadding","0c",["p"],!0,!1,e.parseLength,function(i,h,_,n,l){return e.toComputedLength(n.value,n.unit,null,null,i.cellLength.w,null)}),new t(b.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(i){return i},null),new t(b.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(i){return i},null),new t(b.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(i){return i==="true"},null),new t(b.ns_itts,"fillLineGap","false",["p"],!0,!0,function(i){return i==="true"},null)],oe.byQName={},oe.all)oe.byQName[oe.all[S].qname]=oe.all[S];for(var g in oe.byName={},oe.all)oe.byName[oe.all[g].name]=oe.all[g]})(we,typeof imscNames>"u"?C(210):imscNames,typeof imscUtils>"u"?C(5926):imscUtils)},5926:(et,we)=>{(function(C){var oe=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,b=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,e=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,t={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};C.parseColor=function(g){var i,h=null,_=t[g.toLowerCase()];return _!==void 0?h=_:(i=oe.exec(g))!==null?h=[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16),i[4]!==void 0?parseInt(i[4],16):255]:(i=b.exec(g))!==null?h=[parseInt(i[1]),parseInt(i[2]),parseInt(i[3]),255]:(i=e.exec(g))!==null&&(h=[parseInt(i[1]),parseInt(i[2]),parseInt(i[3]),parseInt(i[4])]),h};var S=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;C.parseLength=function(g){var i,h=null;return(i=S.exec(g))!==null&&(h={value:parseFloat(i[1]),unit:i[2]}),h},C.parseTextShadow=function(g){for(var i=g.match(/([^\(,\)]|\([^\)]+\))+/g),h=[],_=0;_<i.length;_++){var n=i[_].split(" ");if(n.length===1&&n[0]==="none")return"none";if(n.length>1&&n.length<5){var l=[null,null,null,null],d=C.parseLength(n.shift());if(d===null||(l[0]=d,(d=C.parseLength(n.shift()))===null))return null;if(l[1]=d,n.length===0){h.push(l);continue}if((d=C.parseLength(n[0]))!==null&&(l[2]=d,n.shift()),n.length===0){h.push(l);continue}var P=C.parseColor(n[0]);if(P===null)return null;l[3]=P,h.push(l)}}return h},C.parsePosition=function(g){var i=g.split(" "),h=function(j){return j==="center"||j==="left"||j==="top"||j==="bottom"||j==="right"};if(i.length>4)return null;for(var _=0;_<i.length;_++)if(!h(i[_])){var n=C.parseLength(i[_]);if(n===null)return null;i[_]=n}for(var l={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},d=0;d<i.length;){var P=i[d++];if(h(P)){var F={value:0,unit:"%"};i.length!==2&&d<i.length&&!h(i[d])&&(F=i[d++]),P==="right"?(l.h.edge=P,l.h.offset=F):P==="bottom"?(l.v.edge=P,l.v.offset=F):P==="left"?l.h.offset=F:P==="top"&&(l.v.offset=F)}else{if(i.length!==1&&i.length!==2)return null;d===1?l.h.offset=P:l.v.offset=P}}return l},C.ComputedLength=function(g,i){this.rw=g,this.rh=i},C.ComputedLength.prototype.toUsedLength=function(g,i){return g*this.rw+i*this.rh},C.ComputedLength.prototype.isZero=function(){return this.rw===0&&this.rh===0},C.toComputedLength=function(g,i,h,_,n,l){return i==="%"&&_?new C.ComputedLength(_.rw*g/100,_.rh*g/100):i==="em"&&h?new C.ComputedLength(h.rw*g,h.rh*g):i==="c"&&n?new C.ComputedLength(g*n.rw,g*n.rh):i==="px"&&l?new C.ComputedLength(g*l.rw,g*l.rh):i==="rh"?new C.ComputedLength(0,g/100):i==="rw"?new C.ComputedLength(g/100,0):null}})(we)},3516:et=>{et.exports=function(we){var C=typeof we=="string"?we.charCodeAt(0):we;return C>=97&&C<=122||C>=65&&C<=90}},2219:(et,we,C)=>{var oe=C(3516),b=C(395);et.exports=function(e){return oe(e)||b(e)}},395:et=>{et.exports=function(we){var C=typeof we=="string"?we.charCodeAt(0):we;return C>=48&&C<=57}},3875:et=>{function we(b){if(typeof b!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(b))}function C(b,e){for(var t,S="",g=0,i=-1,h=0,_=0;_<=b.length;++_){if(_<b.length)t=b.charCodeAt(_);else{if(t===47)break;t=47}if(t===47){if(!(i===_-1||h===1))if(i!==_-1&&h===2){if(S.length<2||g!==2||S.charCodeAt(S.length-1)!==46||S.charCodeAt(S.length-2)!==46){if(S.length>2){var n=S.lastIndexOf("/");if(n!==S.length-1){n===-1?(S="",g=0):g=(S=S.slice(0,n)).length-1-S.lastIndexOf("/"),i=_,h=0;continue}}else if(S.length===2||S.length===1){S="",g=0,i=_,h=0;continue}}e&&(S.length>0?S+="/..":S="..",g=2)}else S.length>0?S+="/"+b.slice(i+1,_):S=b.slice(i+1,_),g=_-i-1;i=_,h=0}else t===46&&h!==-1?++h:h=-1}return S}var oe={resolve:function(){for(var b,e="",t=!1,S=arguments.length-1;S>=-1&&!t;S--){var g;S>=0?g=arguments[S]:(b===void 0&&(b=process.cwd()),g=b),we(g),g.length!==0&&(e=g+"/"+e,t=g.charCodeAt(0)===47)}return e=C(e,!t),t?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(b){if(we(b),b.length===0)return".";var e=b.charCodeAt(0)===47,t=b.charCodeAt(b.length-1)===47;return(b=C(b,!e)).length!==0||e||(b="."),b.length>0&&t&&(b+="/"),e?"/"+b:b},isAbsolute:function(b){return we(b),b.length>0&&b.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var b,e=0;e<arguments.length;++e){var t=arguments[e];we(t),t.length>0&&(b===void 0?b=t:b+="/"+t)}return b===void 0?".":oe.normalize(b)},relative:function(b,e){if(we(b),we(e),b===e||(b=oe.resolve(b))===(e=oe.resolve(e)))return"";for(var t=1;t<b.length&&b.charCodeAt(t)===47;++t);for(var S=b.length,g=S-t,i=1;i<e.length&&e.charCodeAt(i)===47;++i);for(var h=e.length-i,_=g<h?g:h,n=-1,l=0;l<=_;++l){if(l===_){if(h>_){if(e.charCodeAt(i+l)===47)return e.slice(i+l+1);if(l===0)return e.slice(i+l)}else g>_&&(b.charCodeAt(t+l)===47?n=l:l===0&&(n=0));break}var d=b.charCodeAt(t+l);if(d!==e.charCodeAt(i+l))break;d===47&&(n=l)}var P="";for(l=t+n+1;l<=S;++l)l!==S&&b.charCodeAt(l)!==47||(P.length===0?P+="..":P+="/..");return P.length>0?P+e.slice(i+n):(i+=n,e.charCodeAt(i)===47&&++i,e.slice(i))},_makeLong:function(b){return b},dirname:function(b){if(we(b),b.length===0)return".";for(var e=b.charCodeAt(0),t=e===47,S=-1,g=!0,i=b.length-1;i>=1;--i)if((e=b.charCodeAt(i))===47){if(!g){S=i;break}}else g=!1;return S===-1?t?"/":".":t&&S===1?"//":b.slice(0,S)},basename:function(b,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');we(b);var t,S=0,g=-1,i=!0;if(e!==void 0&&e.length>0&&e.length<=b.length){if(e.length===b.length&&e===b)return"";var h=e.length-1,_=-1;for(t=b.length-1;t>=0;--t){var n=b.charCodeAt(t);if(n===47){if(!i){S=t+1;break}}else _===-1&&(i=!1,_=t+1),h>=0&&(n===e.charCodeAt(h)?--h==-1&&(g=t):(h=-1,g=_))}return S===g?g=_:g===-1&&(g=b.length),b.slice(S,g)}for(t=b.length-1;t>=0;--t)if(b.charCodeAt(t)===47){if(!i){S=t+1;break}}else g===-1&&(i=!1,g=t+1);return g===-1?"":b.slice(S,g)},extname:function(b){we(b);for(var e=-1,t=0,S=-1,g=!0,i=0,h=b.length-1;h>=0;--h){var _=b.charCodeAt(h);if(_!==47)S===-1&&(g=!1,S=h+1),_===46?e===-1?e=h:i!==1&&(i=1):e!==-1&&(i=-1);else if(!g){t=h+1;break}}return e===-1||S===-1||i===0||i===1&&e===S-1&&e===t+1?"":b.slice(e,S)},format:function(b){if(b===null||typeof b!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof b);return function(e,t){var S=t.dir||t.root,g=t.base||(t.name||"")+(t.ext||"");return S?S===t.root?S+g:S+"/"+g:g}(0,b)},parse:function(b){we(b);var e={root:"",dir:"",base:"",ext:"",name:""};if(b.length===0)return e;var t,S=b.charCodeAt(0),g=S===47;g?(e.root="/",t=1):t=0;for(var i=-1,h=0,_=-1,n=!0,l=b.length-1,d=0;l>=t;--l)if((S=b.charCodeAt(l))!==47)_===-1&&(n=!1,_=l+1),S===46?i===-1?i=l:d!==1&&(d=1):i!==-1&&(d=-1);else if(!n){h=l+1;break}return i===-1||_===-1||d===0||d===1&&i===_-1&&i===h+1?_!==-1&&(e.base=e.name=h===0&&g?b.slice(1,_):b.slice(h,_)):(h===0&&g?(e.name=b.slice(1,i),e.base=b.slice(1,_)):(e.name=b.slice(h,i),e.base=b.slice(h,_)),e.ext=b.slice(i,_)),h>0?e.dir=b.slice(0,h-1):g&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};oe.posix=oe,et.exports=oe},8387:(et,we,C)=>{var oe=C(1549),b=oe.Buffer;function e(S,g){for(var i in S)g[i]=S[i]}function t(S,g,i){return b(S,g,i)}b.from&&b.alloc&&b.allocUnsafe&&b.allocUnsafeSlow?et.exports=oe:(e(oe,we),we.Buffer=t),e(b,t),t.from=function(S,g,i){if(typeof S=="number")throw new TypeError("Argument must not be a number");return b(S,g,i)},t.alloc=function(S,g,i){if(typeof S!="number")throw new TypeError("Argument must be a number");var h=b(S);return g!==void 0?typeof i=="string"?h.fill(g,i):h.fill(g):h.fill(0),h},t.allocUnsafe=function(S){if(typeof S!="number")throw new TypeError("Argument must be a number");return b(S)},t.allocUnsafeSlow=function(S){if(typeof S!="number")throw new TypeError("Argument must be a number");return oe.SlowBuffer(S)}},5378:(et,we,C)=>{(function(oe){oe.parser=function(f,o){return new t(f,o)},oe.SAXParser=t,oe.SAXStream=g,oe.createStream=function(f,o){return new g(f,o)},oe.MAX_BUFFER_LENGTH=65536;var b,e=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function t(f,o){if(!(this instanceof t))return new t(f,o);var v=this;(function(E){for(var X=0,K=e.length;X<K;X++)E[e[X]]=""})(v),v.q=v.c="",v.bufferCheckPosition=oe.MAX_BUFFER_LENGTH,v.opt=o||{},v.opt.lowercase=v.opt.lowercase||v.opt.lowercasetags,v.looseCase=v.opt.lowercase?"toLowerCase":"toUpperCase",v.tags=[],v.closed=v.closedRoot=v.sawRoot=!1,v.tag=v.error=null,v.strict=!!f,v.noscript=!(!f&&!v.opt.noscript),v.state=te.BEGIN,v.strictEntities=v.opt.strictEntities,v.ENTITIES=v.strictEntities?Object.create(oe.XML_ENTITIES):Object.create(oe.ENTITIES),v.attribList=[],v.opt.xmlns&&(v.ns=Object.create(F)),v.trackPosition=v.opt.position!==!1,v.trackPosition&&(v.position=v.line=v.column=0),Ae(v,"onready")}oe.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(f){function o(){}return o.prototype=f,new o}),Object.keys||(Object.keys=function(f){var o=[];for(var v in f)f.hasOwnProperty(v)&&o.push(v);return o}),t.prototype={end:function(){ut(this)},write:function(f){var o=this;if(this.error)throw this.error;if(o.closed)return He(o,"Cannot write after close. Assign an onready handler.");if(f===null)return ut(o);typeof f=="object"&&(f=f.toString());for(var v=0,E="";E=je(f,v++),o.c=E,E;)switch(o.trackPosition&&(o.position++,E===`
`?(o.line++,o.column=0):o.column++),o.state){case te.BEGIN:if(o.state=te.BEGIN_WHITESPACE,E==="\uFEFF")continue;de(o,E);continue;case te.BEGIN_WHITESPACE:de(o,E);continue;case te.TEXT:if(o.sawRoot&&!o.closedRoot){for(var X=v-1;E&&E!=="<"&&E!=="&";)(E=je(f,v++))&&o.trackPosition&&(o.position++,E===`
`?(o.line++,o.column=0):o.column++);o.textNode+=f.substring(X,v-1)}E!=="<"||o.sawRoot&&o.closedRoot&&!o.strict?(!$(i,E)||o.sawRoot&&!o.closedRoot||tt(o,"Text data outside of root node."),E==="&"?o.state=te.TEXT_ENTITY:o.textNode+=E):(o.state=te.OPEN_WAKA,o.startTagPosition=o.position);continue;case te.SCRIPT:E==="<"?o.state=te.SCRIPT_ENDING:o.script+=E;continue;case te.SCRIPT_ENDING:E==="/"?o.state=te.CLOSE_TAG:(o.script+="<"+E,o.state=te.SCRIPT);continue;case te.OPEN_WAKA:if(E==="!")o.state=te.SGML_DECL,o.sgmlDecl="";else if(!k(i,E))if(k(j,E))o.state=te.OPEN_TAG,o.tagName=E;else if(E==="/")o.state=te.CLOSE_TAG,o.tagName="";else if(E==="?")o.state=te.PROC_INST,o.procInstName=o.procInstBody="";else{if(tt(o,"Unencoded <"),o.startTagPosition+1<o.position){var K=o.position-o.startTagPosition;E=new Array(K).join(" ")+E}o.textNode+="<"+E,o.state=te.TEXT}continue;case te.SGML_DECL:(o.sgmlDecl+E).toUpperCase()==="[CDATA["?(ke(o,"onopencdata"),o.state=te.CDATA,o.sgmlDecl="",o.cdata=""):o.sgmlDecl+E==="--"?(o.state=te.COMMENT,o.comment="",o.sgmlDecl=""):(o.sgmlDecl+E).toUpperCase()==="DOCTYPE"?(o.state=te.DOCTYPE,(o.doctype||o.sawRoot)&&tt(o,"Inappropriately located doctype declaration"),o.doctype="",o.sgmlDecl=""):E===">"?(ke(o,"onsgmldeclaration",o.sgmlDecl),o.sgmlDecl="",o.state=te.TEXT):(k(n,E)&&(o.state=te.SGML_DECL_QUOTED),o.sgmlDecl+=E);continue;case te.SGML_DECL_QUOTED:E===o.q&&(o.state=te.SGML_DECL,o.q=""),o.sgmlDecl+=E;continue;case te.DOCTYPE:E===">"?(o.state=te.TEXT,ke(o,"ondoctype",o.doctype),o.doctype=!0):(o.doctype+=E,E==="["?o.state=te.DOCTYPE_DTD:k(n,E)&&(o.state=te.DOCTYPE_QUOTED,o.q=E));continue;case te.DOCTYPE_QUOTED:o.doctype+=E,E===o.q&&(o.q="",o.state=te.DOCTYPE);continue;case te.DOCTYPE_DTD:o.doctype+=E,E==="]"?o.state=te.DOCTYPE:k(n,E)&&(o.state=te.DOCTYPE_DTD_QUOTED,o.q=E);continue;case te.DOCTYPE_DTD_QUOTED:o.doctype+=E,E===o.q&&(o.state=te.DOCTYPE_DTD,o.q="");continue;case te.COMMENT:E==="-"?o.state=te.COMMENT_ENDING:o.comment+=E;continue;case te.COMMENT_ENDING:E==="-"?(o.state=te.COMMENT_ENDED,o.comment=be(o.opt,o.comment),o.comment&&ke(o,"oncomment",o.comment),o.comment=""):(o.comment+="-"+E,o.state=te.COMMENT);continue;case te.COMMENT_ENDED:E!==">"?(tt(o,"Malformed comment"),o.comment+="--"+E,o.state=te.COMMENT):o.state=te.TEXT;continue;case te.CDATA:E==="]"?o.state=te.CDATA_ENDING:o.cdata+=E;continue;case te.CDATA_ENDING:E==="]"?o.state=te.CDATA_ENDING_2:(o.cdata+="]"+E,o.state=te.CDATA);continue;case te.CDATA_ENDING_2:E===">"?(o.cdata&&ke(o,"oncdata",o.cdata),ke(o,"onclosecdata"),o.cdata="",o.state=te.TEXT):E==="]"?o.cdata+="]":(o.cdata+="]]"+E,o.state=te.CDATA);continue;case te.PROC_INST:E==="?"?o.state=te.PROC_INST_ENDING:k(i,E)?o.state=te.PROC_INST_BODY:o.procInstName+=E;continue;case te.PROC_INST_BODY:if(!o.procInstBody&&k(i,E))continue;E==="?"?o.state=te.PROC_INST_ENDING:o.procInstBody+=E;continue;case te.PROC_INST_ENDING:E===">"?(ke(o,"onprocessinginstruction",{name:o.procInstName,body:o.procInstBody}),o.procInstName=o.procInstBody="",o.state=te.TEXT):(o.procInstBody+="?"+E,o.state=te.PROC_INST_BODY);continue;case te.OPEN_TAG:k(U,E)?o.tagName+=E:(Se(o),E===">"?Fe(o):E==="/"?o.state=te.OPEN_TAG_SLASH:($(i,E)&&tt(o,"Invalid character in tag name"),o.state=te.ATTRIB));continue;case te.OPEN_TAG_SLASH:E===">"?(Fe(o,!0),Xe(o)):(tt(o,"Forward-slash in opening tag not followed by >"),o.state=te.ATTRIB);continue;case te.ATTRIB:if(k(i,E))continue;E===">"?Fe(o):E==="/"?o.state=te.OPEN_TAG_SLASH:k(j,E)?(o.attribName=E,o.attribValue="",o.state=te.ATTRIB_NAME):tt(o,"Invalid attribute name");continue;case te.ATTRIB_NAME:E==="="?o.state=te.ATTRIB_VALUE:E===">"?(tt(o,"Attribute without value"),o.attribValue=o.attribName,lt(o),Fe(o)):k(i,E)?o.state=te.ATTRIB_NAME_SAW_WHITE:k(U,E)?o.attribName+=E:tt(o,"Invalid attribute name");continue;case te.ATTRIB_NAME_SAW_WHITE:if(E==="=")o.state=te.ATTRIB_VALUE;else{if(k(i,E))continue;tt(o,"Attribute without value"),o.tag.attributes[o.attribName]="",o.attribValue="",ke(o,"onattribute",{name:o.attribName,value:""}),o.attribName="",E===">"?Fe(o):k(j,E)?(o.attribName=E,o.state=te.ATTRIB_NAME):(tt(o,"Invalid attribute name"),o.state=te.ATTRIB)}continue;case te.ATTRIB_VALUE:if(k(i,E))continue;k(n,E)?(o.q=E,o.state=te.ATTRIB_VALUE_QUOTED):(tt(o,"Unquoted attribute value"),o.state=te.ATTRIB_VALUE_UNQUOTED,o.attribValue=E);continue;case te.ATTRIB_VALUE_QUOTED:if(E!==o.q){E==="&"?o.state=te.ATTRIB_VALUE_ENTITY_Q:o.attribValue+=E;continue}lt(o),o.q="",o.state=te.ATTRIB_VALUE_CLOSED;continue;case te.ATTRIB_VALUE_CLOSED:k(i,E)?o.state=te.ATTRIB:E===">"?Fe(o):E==="/"?o.state=te.OPEN_TAG_SLASH:k(j,E)?(tt(o,"No whitespace between attributes"),o.attribName=E,o.attribValue="",o.state=te.ATTRIB_NAME):tt(o,"Invalid attribute name");continue;case te.ATTRIB_VALUE_UNQUOTED:if($(l,E)){E==="&"?o.state=te.ATTRIB_VALUE_ENTITY_U:o.attribValue+=E;continue}lt(o),E===">"?Fe(o):o.state=te.ATTRIB;continue;case te.CLOSE_TAG:if(o.tagName)E===">"?Xe(o):k(U,E)?o.tagName+=E:o.script?(o.script+="</"+o.tagName,o.tagName="",o.state=te.SCRIPT):($(i,E)&&tt(o,"Invalid tagname in closing tag"),o.state=te.CLOSE_TAG_SAW_WHITE);else{if(k(i,E))continue;$(j,E)?o.script?(o.script+="</"+E,o.state=te.SCRIPT):tt(o,"Invalid tagname in closing tag."):o.tagName=E}continue;case te.CLOSE_TAG_SAW_WHITE:if(k(i,E))continue;E===">"?Xe(o):tt(o,"Invalid characters in closing tag");continue;case te.TEXT_ENTITY:case te.ATTRIB_VALUE_ENTITY_Q:case te.ATTRIB_VALUE_ENTITY_U:var he,Ce;switch(o.state){case te.TEXT_ENTITY:he=te.TEXT,Ce="textNode";break;case te.ATTRIB_VALUE_ENTITY_Q:he=te.ATTRIB_VALUE_QUOTED,Ce="attribValue";break;case te.ATTRIB_VALUE_ENTITY_U:he=te.ATTRIB_VALUE_UNQUOTED,Ce="attribValue"}E===";"?(o[Ce]+=ce(o),o.entity="",o.state=he):k(o.entity.length?D:W,E)?o.entity+=E:(tt(o,"Invalid character in entity name"),o[Ce]+="&"+o.entity+E,o.entity="",o.state=he);continue;default:throw new Error(o,"Unknown state: "+o.state)}return o.position>=o.bufferCheckPosition&&function(De){for(var ve=Math.max(oe.MAX_BUFFER_LENGTH,10),Le=0,Ze=0,Je=e.length;Ze<Je;Ze++){var ht=De[e[Ze]].length;if(ht>ve)switch(e[Ze]){case"textNode":pe(De);break;case"cdata":ke(De,"oncdata",De.cdata),De.cdata="";break;case"script":ke(De,"onscript",De.script),De.script="";break;default:He(De,"Max buffer length exceeded: "+e[Ze])}Le=Math.max(Le,ht)}var st=oe.MAX_BUFFER_LENGTH-Le;De.bufferCheckPosition=st+De.position}(o),o},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var f;pe(f=this),f.cdata!==""&&(ke(f,"oncdata",f.cdata),f.cdata=""),f.script!==""&&(ke(f,"onscript",f.script),f.script="")}};try{b=C(182).Stream}catch{b=function(){}}var S=oe.EVENTS.filter(function(f){return f!=="error"&&f!=="end"});function g(f,o){if(!(this instanceof g))return new g(f,o);b.apply(this),this._parser=new t(f,o),this.writable=!0,this.readable=!0;var v=this;this._parser.onend=function(){v.emit("end")},this._parser.onerror=function(E){v.emit("error",E),v._parser.error=null},this._decoder=null,S.forEach(function(E){Object.defineProperty(v,"on"+E,{get:function(){return v._parser["on"+E]},set:function(X){if(!X)return v.removeAllListeners(E),v._parser["on"+E]=X,X;v.on(E,X)},enumerable:!0,configurable:!1})})}g.prototype=Object.create(b.prototype,{constructor:{value:g}}),g.prototype.write=function(f){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(f)){if(!this._decoder){var o=C(7503).s;this._decoder=new o("utf8")}f=this._decoder.write(f)}return this._parser.write(f.toString()),this.emit("data",f),!0},g.prototype.end=function(f){return f&&f.length&&this.write(f),this._parser.end(),!0},g.prototype.on=function(f,o){var v=this;return v._parser["on"+f]||S.indexOf(f)===-1||(v._parser["on"+f]=function(){var E=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);E.splice(0,0,f),v.emit.apply(v,E)}),b.prototype.on.call(v,f,o)};var i=`\r
	 `,h="0124356789",_="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=`'"`,l=i+">",d="http://www.w3.org/XML/1998/namespace",P="http://www.w3.org/2000/xmlns/",F={xml:d,xmlns:P};i=I(i),h=I(h),_=I(_);var j=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,U=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,W=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,D=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function I(f){return f.split("").reduce(function(o,v){return o[v]=!0,o},{})}function k(f,o){return function(v){return Object.prototype.toString.call(v)==="[object RegExp]"}(f)?!!o.match(f):f[o]}function $(f,o){return!k(f,o)}n=I(n),l=I(l);var J,Ne,Be,te=0;for(var ot in oe.STATE={BEGIN:te++,BEGIN_WHITESPACE:te++,TEXT:te++,TEXT_ENTITY:te++,OPEN_WAKA:te++,SGML_DECL:te++,SGML_DECL_QUOTED:te++,DOCTYPE:te++,DOCTYPE_QUOTED:te++,DOCTYPE_DTD:te++,DOCTYPE_DTD_QUOTED:te++,COMMENT_STARTING:te++,COMMENT:te++,COMMENT_ENDING:te++,COMMENT_ENDED:te++,CDATA:te++,CDATA_ENDING:te++,CDATA_ENDING_2:te++,PROC_INST:te++,PROC_INST_BODY:te++,PROC_INST_ENDING:te++,OPEN_TAG:te++,OPEN_TAG_SLASH:te++,ATTRIB:te++,ATTRIB_NAME:te++,ATTRIB_NAME_SAW_WHITE:te++,ATTRIB_VALUE:te++,ATTRIB_VALUE_QUOTED:te++,ATTRIB_VALUE_CLOSED:te++,ATTRIB_VALUE_UNQUOTED:te++,ATTRIB_VALUE_ENTITY_Q:te++,ATTRIB_VALUE_ENTITY_U:te++,CLOSE_TAG:te++,CLOSE_TAG_SAW_WHITE:te++,SCRIPT:te++,SCRIPT_ENDING:te++},oe.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},oe.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(oe.ENTITIES).forEach(function(f){var o=oe.ENTITIES[f],v=typeof o=="number"?String.fromCharCode(o):o;oe.ENTITIES[f]=v}),oe.STATE)oe.STATE[oe.STATE[ot]]=ot;function Ae(f,o,v){f[o]&&f[o](v)}function ke(f,o,v){f.textNode&&pe(f),Ae(f,o,v)}function pe(f){f.textNode=be(f.opt,f.textNode),f.textNode&&Ae(f,"ontext",f.textNode),f.textNode=""}function be(f,o){return f.trim&&(o=o.trim()),f.normalize&&(o=o.replace(/\s+/g," ")),o}function He(f,o){return pe(f),f.trackPosition&&(o+=`
Line: `+f.line+`
Column: `+f.column+`
Char: `+f.c),o=new Error(o),f.error=o,Ae(f,"onerror",o),f}function ut(f){return f.sawRoot&&!f.closedRoot&&tt(f,"Unclosed root tag"),f.state!==te.BEGIN&&f.state!==te.BEGIN_WHITESPACE&&f.state!==te.TEXT&&He(f,"Unexpected end"),pe(f),f.c="",f.closed=!0,Ae(f,"onend"),t.call(f,f.strict,f.opt),f}function tt(f,o){if(typeof f!="object"||!(f instanceof t))throw new Error("bad call to strictFail");f.strict&&He(f,o)}function Se(f){f.strict||(f.tagName=f.tagName[f.looseCase]());var o=f.tags[f.tags.length-1]||f,v=f.tag={name:f.tagName,attributes:{}};f.opt.xmlns&&(v.ns=o.ns),f.attribList.length=0,ke(f,"onopentagstart",v)}function We(f,o){var v=f.indexOf(":")<0?["",f]:f.split(":"),E=v[0],X=v[1];return o&&f==="xmlns"&&(E="xmlns",X=""),{prefix:E,local:X}}function lt(f){if(f.strict||(f.attribName=f.attribName[f.looseCase]()),f.attribList.indexOf(f.attribName)!==-1||f.tag.attributes.hasOwnProperty(f.attribName))f.attribName=f.attribValue="";else{if(f.opt.xmlns){var o=We(f.attribName,!0),v=o.prefix,E=o.local;if(v==="xmlns")if(E==="xml"&&f.attribValue!==d)tt(f,"xml: prefix must be bound to "+d+`
Actual: `+f.attribValue);else if(E==="xmlns"&&f.attribValue!==P)tt(f,"xmlns: prefix must be bound to "+P+`
Actual: `+f.attribValue);else{var X=f.tag,K=f.tags[f.tags.length-1]||f;X.ns===K.ns&&(X.ns=Object.create(K.ns)),X.ns[E]=f.attribValue}f.attribList.push([f.attribName,f.attribValue])}else f.tag.attributes[f.attribName]=f.attribValue,ke(f,"onattribute",{name:f.attribName,value:f.attribValue});f.attribName=f.attribValue=""}}function Fe(f,o){if(f.opt.xmlns){var v=f.tag,E=We(f.tagName);v.prefix=E.prefix,v.local=E.local,v.uri=v.ns[E.prefix]||"",v.prefix&&!v.uri&&(tt(f,"Unbound namespace prefix: "+JSON.stringify(f.tagName)),v.uri=E.prefix);var X=f.tags[f.tags.length-1]||f;v.ns&&X.ns!==v.ns&&Object.keys(v.ns).forEach(function(wt){ke(f,"onopennamespace",{prefix:wt,uri:v.ns[wt]})});for(var K=0,he=f.attribList.length;K<he;K++){var Ce=f.attribList[K],De=Ce[0],ve=Ce[1],Le=We(De,!0),Ze=Le.prefix,Je=Le.local,ht=Ze===""?"":v.ns[Ze]||"",st={name:De,value:ve,prefix:Ze,local:Je,uri:ht};Ze&&Ze!=="xmlns"&&!ht&&(tt(f,"Unbound namespace prefix: "+JSON.stringify(Ze)),st.uri=Ze),f.tag.attributes[De]=st,ke(f,"onattribute",st)}f.attribList.length=0}f.tag.isSelfClosing=!!o,f.sawRoot=!0,f.tags.push(f.tag),ke(f,"onopentag",f.tag),o||(f.noscript||f.tagName.toLowerCase()!=="script"?f.state=te.TEXT:f.state=te.SCRIPT,f.tag=null,f.tagName=""),f.attribName=f.attribValue="",f.attribList.length=0}function Xe(f){if(!f.tagName)return tt(f,"Weird empty close tag."),f.textNode+="</>",void(f.state=te.TEXT);if(f.script){if(f.tagName!=="script")return f.script+="</"+f.tagName+">",f.tagName="",void(f.state=te.SCRIPT);ke(f,"onscript",f.script),f.script=""}var o=f.tags.length,v=f.tagName;f.strict||(v=v[f.looseCase]());for(var E=v;o--&&f.tags[o].name!==E;)tt(f,"Unexpected close tag");if(o<0)return tt(f,"Unmatched closing tag: "+f.tagName),f.textNode+="</"+f.tagName+">",void(f.state=te.TEXT);f.tagName=v;for(var X=f.tags.length;X-- >o;){var K=f.tag=f.tags.pop();f.tagName=f.tag.name,ke(f,"onclosetag",f.tagName);var he={};for(var Ce in K.ns)he[Ce]=K.ns[Ce];var De=f.tags[f.tags.length-1]||f;f.opt.xmlns&&K.ns!==De.ns&&Object.keys(K.ns).forEach(function(ve){var Le=K.ns[ve];ke(f,"onclosenamespace",{prefix:ve,uri:Le})})}o===0&&(f.closedRoot=!0),f.tagName=f.attribValue=f.attribName="",f.attribList.length=0,f.state=te.TEXT}function ce(f){var o,v=f.entity,E=v.toLowerCase(),X="";return f.ENTITIES[v]?f.ENTITIES[v]:f.ENTITIES[E]?f.ENTITIES[E]:((v=E).charAt(0)==="#"&&(v.charAt(1)==="x"?(v=v.slice(2),X=(o=parseInt(v,16)).toString(16)):(v=v.slice(1),X=(o=parseInt(v,10)).toString(10))),v=v.replace(/^0+/,""),X.toLowerCase()!==v?(tt(f,"Invalid character entity"),"&"+f.entity+";"):String.fromCodePoint(o))}function de(f,o){o==="<"?(f.state=te.OPEN_WAKA,f.startTagPosition=f.position):$(i,o)&&(tt(f,"Non-whitespace before first tag."),f.textNode=o,f.state=te.TEXT)}function je(f,o){var v="";return o<f.length&&(v=f.charAt(o)),v}te=oe.STATE,String.fromCodePoint||(J=String.fromCharCode,Ne=Math.floor,Be=function(){var f,o,v=16384,E=[],X=-1,K=arguments.length;if(!K)return"";for(var he="";++X<K;){var Ce=Number(arguments[X]);if(!isFinite(Ce)||Ce<0||Ce>1114111||Ne(Ce)!==Ce)throw RangeError("Invalid code point: "+Ce);Ce<=65535?E.push(Ce):(f=55296+((Ce-=65536)>>10),o=Ce%1024+56320,E.push(f,o)),(X+1===K||E.length>v)&&(he+=J.apply(null,E),E.length=0)}return he},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:Be,configurable:!0,writable:!0}):String.fromCodePoint=Be)})(we)},182:(et,we,C)=>{et.exports=b;var oe=C(1159).EventEmitter;function b(){oe.call(this)}C(1765)(b,oe),b.Readable=C(2846),b.Writable=C(8318),b.Duplex=C(6138),b.Transform=C(9798),b.PassThrough=C(5472),b.finished=C(8800),b.pipeline=C(7295),b.Stream=b,b.prototype.pipe=function(e,t){var S=this;function g(P){e.writable&&e.write(P)===!1&&S.pause&&S.pause()}function i(){S.readable&&S.resume&&S.resume()}S.on("data",g),e.on("drain",i),e._isStdio||t&&t.end===!1||(S.on("end",_),S.on("close",n));var h=!1;function _(){h||(h=!0,e.end())}function n(){h||(h=!0,typeof e.destroy=="function"&&e.destroy())}function l(P){if(d(),oe.listenerCount(this,"error")===0)throw P}function d(){S.removeListener("data",g),e.removeListener("drain",i),S.removeListener("end",_),S.removeListener("close",n),S.removeListener("error",l),e.removeListener("error",l),S.removeListener("end",d),S.removeListener("close",d),e.removeListener("close",d)}return S.on("error",l),e.on("error",l),S.on("end",d),S.on("close",d),e.on("close",d),e.emit("pipe",S),e}},1765:et=>{typeof Object.create=="function"?et.exports=function(we,C){C&&(we.super_=C,we.prototype=Object.create(C.prototype,{constructor:{value:we,enumerable:!1,writable:!0,configurable:!0}}))}:et.exports=function(we,C){if(C){we.super_=C;var oe=function(){};oe.prototype=C.prototype,we.prototype=new oe,we.prototype.constructor=we}}},3690:et=>{var we={};function C(b,e,t){t||(t=Error);var S=function(g){var i,h;function _(n,l,d){return g.call(this,function(P,F,j){return typeof e=="string"?e:e(P,F,j)}(n,l,d))||this}return h=g,(i=_).prototype=Object.create(h.prototype),i.prototype.constructor=i,i.__proto__=h,_}(t);S.prototype.name=t.name,S.prototype.code=b,we[b]=S}function oe(b,e){if(Array.isArray(b)){var t=b.length;return b=b.map(function(S){return String(S)}),t>2?"one of ".concat(e," ").concat(b.slice(0,t-1).join(", "),", or ")+b[t-1]:t===2?"one of ".concat(e," ").concat(b[0]," or ").concat(b[1]):"of ".concat(e," ").concat(b[0])}return"of ".concat(e," ").concat(String(b))}C("ERR_INVALID_OPT_VALUE",function(b,e){return'The value "'+e+'" is invalid for option "'+b+'"'},TypeError),C("ERR_INVALID_ARG_TYPE",function(b,e,t){var S,g,i,h,_;if(typeof e=="string"&&(g="not ",e.substr(0,g.length)===g)?(S="must not be",e=e.replace(/^not /,"")):S="must be",function(l,d,P){return(P===void 0||P>l.length)&&(P=l.length),l.substring(P-d.length,P)===d}(b," argument"))i="The ".concat(b," ").concat(S," ").concat(oe(e,"type"));else{var n=(typeof _!="number"&&(_=0),_+1>(h=b).length||h.indexOf(".",_)===-1?"argument":"property");i='The "'.concat(b,'" ').concat(n," ").concat(S," ").concat(oe(e,"type"))}return i+". Received type ".concat(typeof t)},TypeError),C("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),C("ERR_METHOD_NOT_IMPLEMENTED",function(b){return"The "+b+" method is not implemented"}),C("ERR_STREAM_PREMATURE_CLOSE","Premature close"),C("ERR_STREAM_DESTROYED",function(b){return"Cannot call "+b+" after a stream was destroyed"}),C("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),C("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),C("ERR_STREAM_WRITE_AFTER_END","write after end"),C("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),C("ERR_UNKNOWN_ENCODING",function(b){return"Unknown encoding: "+b},TypeError),C("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),et.exports.q=we},6138:(et,we,C)=>{var oe=Object.keys||function(n){var l=[];for(var d in n)l.push(d);return l};et.exports=i;var b=C(2846),e=C(8318);C(1765)(i,b);for(var t=oe(e.prototype),S=0;S<t.length;S++){var g=t[S];i.prototype[g]||(i.prototype[g]=e.prototype[g])}function i(n){if(!(this instanceof i))return new i(n);b.call(this,n),e.call(this,n),this.allowHalfOpen=!0,n&&(n.readable===!1&&(this.readable=!1),n.writable===!1&&(this.writable=!1),n.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",h)))}function h(){this._writableState.ended||process.nextTick(_,this)}function _(n){n.end()}Object.defineProperty(i.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(i.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(i.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(i.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(n){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=n,this._writableState.destroyed=n)}})},5472:(et,we,C)=>{et.exports=b;var oe=C(9798);function b(e){if(!(this instanceof b))return new b(e);oe.call(this,e)}C(1765)(b,oe),b.prototype._transform=function(e,t,S){S(null,e)}},2846:(et,we,C)=>{var oe;et.exports=J,J.ReadableState=$,C(1159).EventEmitter;var b,e=function(ce,de){return ce.listeners(de).length},t=C(9299),S=C(1549).Buffer,g=C.g.Uint8Array||function(){},i=C(964);b=i&&i.debuglog?i.debuglog("stream"):function(){};var h,_,n,l=C(8393),d=C(6163),P=C(7269).getHighWaterMark,F=C(3690).q,j=F.ERR_INVALID_ARG_TYPE,U=F.ERR_STREAM_PUSH_AFTER_EOF,W=F.ERR_METHOD_NOT_IMPLEMENTED,D=F.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;C(1765)(J,t);var I=d.errorOrDestroy,k=["error","close","destroy","pause","resume"];function $(ce,de,je){oe=oe||C(6138),ce=ce||{},typeof je!="boolean"&&(je=de instanceof oe),this.objectMode=!!ce.objectMode,je&&(this.objectMode=this.objectMode||!!ce.readableObjectMode),this.highWaterMark=P(this,ce,"readableHighWaterMark",je),this.buffer=new l,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=ce.emitClose!==!1,this.autoDestroy=!!ce.autoDestroy,this.destroyed=!1,this.defaultEncoding=ce.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,ce.encoding&&(h||(h=C(7503).s),this.decoder=new h(ce.encoding),this.encoding=ce.encoding)}function J(ce){if(oe=oe||C(6138),!(this instanceof J))return new J(ce);var de=this instanceof oe;this._readableState=new $(ce,this,de),this.readable=!0,ce&&(typeof ce.read=="function"&&(this._read=ce.read),typeof ce.destroy=="function"&&(this._destroy=ce.destroy)),t.call(this)}function Ne(ce,de,je,f,o){b("readableAddChunk",de);var v,E=ce._readableState;if(de===null)E.reading=!1,function(X,K){if(b("onEofChunk"),!K.ended){if(K.decoder){var he=K.decoder.end();he&&he.length&&(K.buffer.push(he),K.length+=K.objectMode?1:he.length)}K.ended=!0,K.sync?Ae(X):(K.needReadable=!1,K.emittedReadable||(K.emittedReadable=!0,ke(X)))}}(ce,E);else if(o||(v=function(X,K){var he,Ce;return Ce=K,S.isBuffer(Ce)||Ce instanceof g||typeof K=="string"||K===void 0||X.objectMode||(he=new j("chunk",["string","Buffer","Uint8Array"],K)),he}(E,de)),v)I(ce,v);else if(E.objectMode||de&&de.length>0)if(typeof de=="string"||E.objectMode||Object.getPrototypeOf(de)===S.prototype||(de=function(X){return S.from(X)}(de)),f)E.endEmitted?I(ce,new D):Be(ce,E,de,!0);else if(E.ended)I(ce,new U);else{if(E.destroyed)return!1;E.reading=!1,E.decoder&&!je?(de=E.decoder.write(de),E.objectMode||de.length!==0?Be(ce,E,de,!1):pe(ce,E)):Be(ce,E,de,!1)}else f||(E.reading=!1,pe(ce,E));return!E.ended&&(E.length<E.highWaterMark||E.length===0)}function Be(ce,de,je,f){de.flowing&&de.length===0&&!de.sync?(de.awaitDrain=0,ce.emit("data",je)):(de.length+=de.objectMode?1:je.length,f?de.buffer.unshift(je):de.buffer.push(je),de.needReadable&&Ae(ce)),pe(ce,de)}Object.defineProperty(J.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(ce){this._readableState&&(this._readableState.destroyed=ce)}}),J.prototype.destroy=d.destroy,J.prototype._undestroy=d.undestroy,J.prototype._destroy=function(ce,de){de(ce)},J.prototype.push=function(ce,de){var je,f=this._readableState;return f.objectMode?je=!0:typeof ce=="string"&&((de=de||f.defaultEncoding)!==f.encoding&&(ce=S.from(ce,de),de=""),je=!0),Ne(this,ce,de,!1,je)},J.prototype.unshift=function(ce){return Ne(this,ce,null,!0,!1)},J.prototype.isPaused=function(){return this._readableState.flowing===!1},J.prototype.setEncoding=function(ce){h||(h=C(7503).s);var de=new h(ce);this._readableState.decoder=de,this._readableState.encoding=this._readableState.decoder.encoding;for(var je=this._readableState.buffer.head,f="";je!==null;)f+=de.write(je.data),je=je.next;return this._readableState.buffer.clear(),f!==""&&this._readableState.buffer.push(f),this._readableState.length=f.length,this};var te=1073741824;function ot(ce,de){return ce<=0||de.length===0&&de.ended?0:de.objectMode?1:ce!=ce?de.flowing&&de.length?de.buffer.head.data.length:de.length:(ce>de.highWaterMark&&(de.highWaterMark=function(je){return je>=te?je=te:(je--,je|=je>>>1,je|=je>>>2,je|=je>>>4,je|=je>>>8,je|=je>>>16,je++),je}(ce)),ce<=de.length?ce:de.ended?de.length:(de.needReadable=!0,0))}function Ae(ce){var de=ce._readableState;b("emitReadable",de.needReadable,de.emittedReadable),de.needReadable=!1,de.emittedReadable||(b("emitReadable",de.flowing),de.emittedReadable=!0,process.nextTick(ke,ce))}function ke(ce){var de=ce._readableState;b("emitReadable_",de.destroyed,de.length,de.ended),de.destroyed||!de.length&&!de.ended||(ce.emit("readable"),de.emittedReadable=!1),de.needReadable=!de.flowing&&!de.ended&&de.length<=de.highWaterMark,Se(ce)}function pe(ce,de){de.readingMore||(de.readingMore=!0,process.nextTick(be,ce,de))}function be(ce,de){for(;!de.reading&&!de.ended&&(de.length<de.highWaterMark||de.flowing&&de.length===0);){var je=de.length;if(b("maybeReadMore read 0"),ce.read(0),je===de.length)break}de.readingMore=!1}function He(ce){var de=ce._readableState;de.readableListening=ce.listenerCount("readable")>0,de.resumeScheduled&&!de.paused?de.flowing=!0:ce.listenerCount("data")>0&&ce.resume()}function ut(ce){b("readable nexttick read 0"),ce.read(0)}function tt(ce,de){b("resume",de.reading),de.reading||ce.read(0),de.resumeScheduled=!1,ce.emit("resume"),Se(ce),de.flowing&&!de.reading&&ce.read(0)}function Se(ce){var de=ce._readableState;for(b("flow",de.flowing);de.flowing&&ce.read()!==null;);}function We(ce,de){return de.length===0?null:(de.objectMode?je=de.buffer.shift():!ce||ce>=de.length?(je=de.decoder?de.buffer.join(""):de.buffer.length===1?de.buffer.first():de.buffer.concat(de.length),de.buffer.clear()):je=de.buffer.consume(ce,de.decoder),je);var je}function lt(ce){var de=ce._readableState;b("endReadable",de.endEmitted),de.endEmitted||(de.ended=!0,process.nextTick(Fe,de,ce))}function Fe(ce,de){if(b("endReadableNT",ce.endEmitted,ce.length),!ce.endEmitted&&ce.length===0&&(ce.endEmitted=!0,de.readable=!1,de.emit("end"),ce.autoDestroy)){var je=de._writableState;(!je||je.autoDestroy&&je.finished)&&de.destroy()}}function Xe(ce,de){for(var je=0,f=ce.length;je<f;je++)if(ce[je]===de)return je;return-1}J.prototype.read=function(ce){b("read",ce),ce=parseInt(ce,10);var de=this._readableState,je=ce;if(ce!==0&&(de.emittedReadable=!1),ce===0&&de.needReadable&&((de.highWaterMark!==0?de.length>=de.highWaterMark:de.length>0)||de.ended))return b("read: emitReadable",de.length,de.ended),de.length===0&&de.ended?lt(this):Ae(this),null;if((ce=ot(ce,de))===0&&de.ended)return de.length===0&&lt(this),null;var f,o=de.needReadable;return b("need readable",o),(de.length===0||de.length-ce<de.highWaterMark)&&b("length less than watermark",o=!0),de.ended||de.reading?b("reading or ended",o=!1):o&&(b("do read"),de.reading=!0,de.sync=!0,de.length===0&&(de.needReadable=!0),this._read(de.highWaterMark),de.sync=!1,de.reading||(ce=ot(je,de))),(f=ce>0?We(ce,de):null)===null?(de.needReadable=de.length<=de.highWaterMark,ce=0):(de.length-=ce,de.awaitDrain=0),de.length===0&&(de.ended||(de.needReadable=!0),je!==ce&&de.ended&&lt(this)),f!==null&&this.emit("data",f),f},J.prototype._read=function(ce){I(this,new W("_read()"))},J.prototype.pipe=function(ce,de){var je=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=ce;break;case 1:f.pipes=[f.pipes,ce];break;default:f.pipes.push(ce)}f.pipesCount+=1,b("pipe count=%d opts=%j",f.pipesCount,de);var o=de&&de.end===!1||ce===process.stdout||ce===process.stderr?ve:v;function v(){b("onend"),ce.end()}f.endEmitted?process.nextTick(o):je.once("end",o),ce.on("unpipe",function Le(Ze,Je){b("onunpipe"),Ze===je&&Je&&Je.hasUnpiped===!1&&(Je.hasUnpiped=!0,b("cleanup"),ce.removeListener("close",Ce),ce.removeListener("finish",De),ce.removeListener("drain",E),ce.removeListener("error",he),ce.removeListener("unpipe",Le),je.removeListener("end",v),je.removeListener("end",ve),je.removeListener("data",K),X=!0,!f.awaitDrain||ce._writableState&&!ce._writableState.needDrain||E())});var E=function(Le){return function(){var Ze=Le._readableState;b("pipeOnDrain",Ze.awaitDrain),Ze.awaitDrain&&Ze.awaitDrain--,Ze.awaitDrain===0&&e(Le,"data")&&(Ze.flowing=!0,Se(Le))}}(je);ce.on("drain",E);var X=!1;function K(Le){b("ondata");var Ze=ce.write(Le);b("dest.write",Ze),Ze===!1&&((f.pipesCount===1&&f.pipes===ce||f.pipesCount>1&&Xe(f.pipes,ce)!==-1)&&!X&&(b("false write response, pause",f.awaitDrain),f.awaitDrain++),je.pause())}function he(Le){b("onerror",Le),ve(),ce.removeListener("error",he),e(ce,"error")===0&&I(ce,Le)}function Ce(){ce.removeListener("finish",De),ve()}function De(){b("onfinish"),ce.removeListener("close",Ce),ve()}function ve(){b("unpipe"),je.unpipe(ce)}return je.on("data",K),function(Le,Ze,Je){if(typeof Le.prependListener=="function")return Le.prependListener(Ze,Je);Le._events&&Le._events[Ze]?Array.isArray(Le._events[Ze])?Le._events[Ze].unshift(Je):Le._events[Ze]=[Je,Le._events[Ze]]:Le.on(Ze,Je)}(ce,"error",he),ce.once("close",Ce),ce.once("finish",De),ce.emit("pipe",je),f.flowing||(b("pipe resume"),je.resume()),ce},J.prototype.unpipe=function(ce){var de=this._readableState,je={hasUnpiped:!1};if(de.pipesCount===0)return this;if(de.pipesCount===1)return ce&&ce!==de.pipes||(ce||(ce=de.pipes),de.pipes=null,de.pipesCount=0,de.flowing=!1,ce&&ce.emit("unpipe",this,je)),this;if(!ce){var f=de.pipes,o=de.pipesCount;de.pipes=null,de.pipesCount=0,de.flowing=!1;for(var v=0;v<o;v++)f[v].emit("unpipe",this,{hasUnpiped:!1});return this}var E=Xe(de.pipes,ce);return E===-1||(de.pipes.splice(E,1),de.pipesCount-=1,de.pipesCount===1&&(de.pipes=de.pipes[0]),ce.emit("unpipe",this,je)),this},J.prototype.on=function(ce,de){var je=t.prototype.on.call(this,ce,de),f=this._readableState;return ce==="data"?(f.readableListening=this.listenerCount("readable")>0,f.flowing!==!1&&this.resume()):ce==="readable"&&(f.endEmitted||f.readableListening||(f.readableListening=f.needReadable=!0,f.flowing=!1,f.emittedReadable=!1,b("on readable",f.length,f.reading),f.length?Ae(this):f.reading||process.nextTick(ut,this))),je},J.prototype.addListener=J.prototype.on,J.prototype.removeListener=function(ce,de){var je=t.prototype.removeListener.call(this,ce,de);return ce==="readable"&&process.nextTick(He,this),je},J.prototype.removeAllListeners=function(ce){var de=t.prototype.removeAllListeners.apply(this,arguments);return ce!=="readable"&&ce!==void 0||process.nextTick(He,this),de},J.prototype.resume=function(){var ce=this._readableState;return ce.flowing||(b("resume"),ce.flowing=!ce.readableListening,function(de,je){je.resumeScheduled||(je.resumeScheduled=!0,process.nextTick(tt,de,je))}(this,ce)),ce.paused=!1,this},J.prototype.pause=function(){return b("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(b("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},J.prototype.wrap=function(ce){var de=this,je=this._readableState,f=!1;for(var o in ce.on("end",function(){if(b("wrapped end"),je.decoder&&!je.ended){var E=je.decoder.end();E&&E.length&&de.push(E)}de.push(null)}),ce.on("data",function(E){b("wrapped data"),je.decoder&&(E=je.decoder.write(E)),je.objectMode&&E==null||(je.objectMode||E&&E.length)&&(de.push(E)||(f=!0,ce.pause()))}),ce)this[o]===void 0&&typeof ce[o]=="function"&&(this[o]=function(E){return function(){return ce[E].apply(ce,arguments)}}(o));for(var v=0;v<k.length;v++)ce.on(k[v],this.emit.bind(this,k[v]));return this._read=function(E){b("wrapped _read",E),f&&(f=!1,ce.resume())},this},typeof Symbol=="function"&&(J.prototype[Symbol.asyncIterator]=function(){return _===void 0&&(_=C(7299)),_(this)}),Object.defineProperty(J.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(J.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(J.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ce){this._readableState&&(this._readableState.flowing=ce)}}),J._fromList=We,Object.defineProperty(J.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(J.from=function(ce,de){return n===void 0&&(n=C(6233)),n(J,ce,de)})},9798:(et,we,C)=>{et.exports=h;var oe=C(3690).q,b=oe.ERR_METHOD_NOT_IMPLEMENTED,e=oe.ERR_MULTIPLE_CALLBACK,t=oe.ERR_TRANSFORM_ALREADY_TRANSFORMING,S=oe.ERR_TRANSFORM_WITH_LENGTH_0,g=C(6138);function i(l,d){var P=this._transformState;P.transforming=!1;var F=P.writecb;if(F===null)return this.emit("error",new e);P.writechunk=null,P.writecb=null,d!=null&&this.push(d),F(l);var j=this._readableState;j.reading=!1,(j.needReadable||j.length<j.highWaterMark)&&this._read(j.highWaterMark)}function h(l){if(!(this instanceof h))return new h(l);g.call(this,l),this._transformState={afterTransform:i.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,l&&(typeof l.transform=="function"&&(this._transform=l.transform),typeof l.flush=="function"&&(this._flush=l.flush)),this.on("prefinish",_)}function _(){var l=this;typeof this._flush!="function"||this._readableState.destroyed?n(this,null,null):this._flush(function(d,P){n(l,d,P)})}function n(l,d,P){if(d)return l.emit("error",d);if(P!=null&&l.push(P),l._writableState.length)throw new S;if(l._transformState.transforming)throw new t;return l.push(null)}C(1765)(h,g),h.prototype.push=function(l,d){return this._transformState.needTransform=!1,g.prototype.push.call(this,l,d)},h.prototype._transform=function(l,d,P){P(new b("_transform()"))},h.prototype._write=function(l,d,P){var F=this._transformState;if(F.writecb=P,F.writechunk=l,F.writeencoding=d,!F.transforming){var j=this._readableState;(F.needTransform||j.needReadable||j.length<j.highWaterMark)&&this._read(j.highWaterMark)}},h.prototype._read=function(l){var d=this._transformState;d.writechunk===null||d.transforming?d.needTransform=!0:(d.transforming=!0,this._transform(d.writechunk,d.writeencoding,d.afterTransform))},h.prototype._destroy=function(l,d){g.prototype._destroy.call(this,l,function(P){d(P)})}},8318:(et,we,C)=>{function oe(pe){var be=this;this.next=null,this.entry=null,this.finish=function(){(function(He,ut,tt){var Se=He.entry;for(He.entry=null;Se;){var We=Se.callback;ut.pendingcb--,We(void 0),Se=Se.next}ut.corkedRequestsFree.next=He})(be,pe)}}var b;et.exports=J,J.WritableState=$;var e,t={deprecate:C(7839)},S=C(9299),g=C(1549).Buffer,i=C.g.Uint8Array||function(){},h=C(6163),_=C(7269).getHighWaterMark,n=C(3690).q,l=n.ERR_INVALID_ARG_TYPE,d=n.ERR_METHOD_NOT_IMPLEMENTED,P=n.ERR_MULTIPLE_CALLBACK,F=n.ERR_STREAM_CANNOT_PIPE,j=n.ERR_STREAM_DESTROYED,U=n.ERR_STREAM_NULL_VALUES,W=n.ERR_STREAM_WRITE_AFTER_END,D=n.ERR_UNKNOWN_ENCODING,I=h.errorOrDestroy;function k(){}function $(pe,be,He){b=b||C(6138),pe=pe||{},typeof He!="boolean"&&(He=be instanceof b),this.objectMode=!!pe.objectMode,He&&(this.objectMode=this.objectMode||!!pe.writableObjectMode),this.highWaterMark=_(this,pe,"writableHighWaterMark",He),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ut=pe.decodeStrings===!1;this.decodeStrings=!ut,this.defaultEncoding=pe.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(tt){(function(Se,We){var lt=Se._writableState,Fe=lt.sync,Xe=lt.writecb;if(typeof Xe!="function")throw new P;if(function(de){de.writing=!1,de.writecb=null,de.length-=de.writelen,de.writelen=0}(lt),We)(function(de,je,f,o,v){--je.pendingcb,f?(process.nextTick(v,o),process.nextTick(ke,de,je),de._writableState.errorEmitted=!0,I(de,o)):(v(o),de._writableState.errorEmitted=!0,I(de,o),ke(de,je))})(Se,lt,Fe,We,Xe);else{var ce=ot(lt)||Se.destroyed;ce||lt.corked||lt.bufferProcessing||!lt.bufferedRequest||te(Se,lt),Fe?process.nextTick(Be,Se,lt,ce,Xe):Be(Se,lt,ce,Xe)}})(be,tt)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=pe.emitClose!==!1,this.autoDestroy=!!pe.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new oe(this)}function J(pe){var be=this instanceof(b=b||C(6138));if(!be&&!e.call(J,this))return new J(pe);this._writableState=new $(pe,this,be),this.writable=!0,pe&&(typeof pe.write=="function"&&(this._write=pe.write),typeof pe.writev=="function"&&(this._writev=pe.writev),typeof pe.destroy=="function"&&(this._destroy=pe.destroy),typeof pe.final=="function"&&(this._final=pe.final)),S.call(this)}function Ne(pe,be,He,ut,tt,Se,We){be.writelen=ut,be.writecb=We,be.writing=!0,be.sync=!0,be.destroyed?be.onwrite(new j("write")):He?pe._writev(tt,be.onwrite):pe._write(tt,Se,be.onwrite),be.sync=!1}function Be(pe,be,He,ut){He||function(tt,Se){Se.length===0&&Se.needDrain&&(Se.needDrain=!1,tt.emit("drain"))}(pe,be),be.pendingcb--,ut(),ke(pe,be)}function te(pe,be){be.bufferProcessing=!0;var He=be.bufferedRequest;if(pe._writev&&He&&He.next){var ut=be.bufferedRequestCount,tt=new Array(ut),Se=be.corkedRequestsFree;Se.entry=He;for(var We=0,lt=!0;He;)tt[We]=He,He.isBuf||(lt=!1),He=He.next,We+=1;tt.allBuffers=lt,Ne(pe,be,!0,be.length,tt,"",Se.finish),be.pendingcb++,be.lastBufferedRequest=null,Se.next?(be.corkedRequestsFree=Se.next,Se.next=null):be.corkedRequestsFree=new oe(be),be.bufferedRequestCount=0}else{for(;He;){var Fe=He.chunk,Xe=He.encoding,ce=He.callback;if(Ne(pe,be,!1,be.objectMode?1:Fe.length,Fe,Xe,ce),He=He.next,be.bufferedRequestCount--,be.writing)break}He===null&&(be.lastBufferedRequest=null)}be.bufferedRequest=He,be.bufferProcessing=!1}function ot(pe){return pe.ending&&pe.length===0&&pe.bufferedRequest===null&&!pe.finished&&!pe.writing}function Ae(pe,be){pe._final(function(He){be.pendingcb--,He&&I(pe,He),be.prefinished=!0,pe.emit("prefinish"),ke(pe,be)})}function ke(pe,be){var He=ot(be);if(He&&(function(tt,Se){Se.prefinished||Se.finalCalled||(typeof tt._final!="function"||Se.destroyed?(Se.prefinished=!0,tt.emit("prefinish")):(Se.pendingcb++,Se.finalCalled=!0,process.nextTick(Ae,tt,Se)))}(pe,be),be.pendingcb===0&&(be.finished=!0,pe.emit("finish"),be.autoDestroy))){var ut=pe._readableState;(!ut||ut.autoDestroy&&ut.endEmitted)&&pe.destroy()}return He}C(1765)(J,S),$.prototype.getBuffer=function(){for(var pe=this.bufferedRequest,be=[];pe;)be.push(pe),pe=pe.next;return be},function(){try{Object.defineProperty($.prototype,"buffer",{get:t.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(e=Function.prototype[Symbol.hasInstance],Object.defineProperty(J,Symbol.hasInstance,{value:function(pe){return!!e.call(this,pe)||this===J&&pe&&pe._writableState instanceof $}})):e=function(pe){return pe instanceof this},J.prototype.pipe=function(){I(this,new F)},J.prototype.write=function(pe,be,He){var ut,tt=this._writableState,Se=!1,We=!tt.objectMode&&(ut=pe,g.isBuffer(ut)||ut instanceof i);return We&&!g.isBuffer(pe)&&(pe=function(lt){return g.from(lt)}(pe)),typeof be=="function"&&(He=be,be=null),We?be="buffer":be||(be=tt.defaultEncoding),typeof He!="function"&&(He=k),tt.ending?function(lt,Fe){var Xe=new W;I(lt,Xe),process.nextTick(Fe,Xe)}(this,He):(We||function(lt,Fe,Xe,ce){var de;return Xe===null?de=new U:typeof Xe=="string"||Fe.objectMode||(de=new l("chunk",["string","Buffer"],Xe)),!de||(I(lt,de),process.nextTick(ce,de),!1)}(this,tt,pe,He))&&(tt.pendingcb++,Se=function(lt,Fe,Xe,ce,de,je){if(!Xe){var f=function(X,K,he){return X.objectMode||X.decodeStrings===!1||typeof K!="string"||(K=g.from(K,he)),K}(Fe,ce,de);ce!==f&&(Xe=!0,de="buffer",ce=f)}var o=Fe.objectMode?1:ce.length;Fe.length+=o;var v=Fe.length<Fe.highWaterMark;if(v||(Fe.needDrain=!0),Fe.writing||Fe.corked){var E=Fe.lastBufferedRequest;Fe.lastBufferedRequest={chunk:ce,encoding:de,isBuf:Xe,callback:je,next:null},E?E.next=Fe.lastBufferedRequest:Fe.bufferedRequest=Fe.lastBufferedRequest,Fe.bufferedRequestCount+=1}else Ne(lt,Fe,!1,o,ce,de,je);return v}(this,tt,We,pe,be,He)),Se},J.prototype.cork=function(){this._writableState.corked++},J.prototype.uncork=function(){var pe=this._writableState;pe.corked&&(pe.corked--,pe.writing||pe.corked||pe.bufferProcessing||!pe.bufferedRequest||te(this,pe))},J.prototype.setDefaultEncoding=function(pe){if(typeof pe=="string"&&(pe=pe.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((pe+"").toLowerCase())>-1))throw new D(pe);return this._writableState.defaultEncoding=pe,this},Object.defineProperty(J.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(J.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),J.prototype._write=function(pe,be,He){He(new d("_write()"))},J.prototype._writev=null,J.prototype.end=function(pe,be,He){var ut=this._writableState;return typeof pe=="function"?(He=pe,pe=null,be=null):typeof be=="function"&&(He=be,be=null),pe!=null&&this.write(pe,be),ut.corked&&(ut.corked=1,this.uncork()),ut.ending||function(tt,Se,We){Se.ending=!0,ke(tt,Se),We&&(Se.finished?process.nextTick(We):tt.once("finish",We)),Se.ended=!0,tt.writable=!1}(this,ut,He),this},Object.defineProperty(J.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(J.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(pe){this._writableState&&(this._writableState.destroyed=pe)}}),J.prototype.destroy=h.destroy,J.prototype._undestroy=h.undestroy,J.prototype._destroy=function(pe,be){be(pe)}},7299:(et,we,C)=>{var oe;function b(U,W,D){return W in U?Object.defineProperty(U,W,{value:D,enumerable:!0,configurable:!0,writable:!0}):U[W]=D,U}var e=C(8800),t=Symbol("lastResolve"),S=Symbol("lastReject"),g=Symbol("error"),i=Symbol("ended"),h=Symbol("lastPromise"),_=Symbol("handlePromise"),n=Symbol("stream");function l(U,W){return{value:U,done:W}}function d(U){var W=U[t];if(W!==null){var D=U[n].read();D!==null&&(U[h]=null,U[t]=null,U[S]=null,W(l(D,!1)))}}function P(U){process.nextTick(d,U)}var F=Object.getPrototypeOf(function(){}),j=Object.setPrototypeOf((b(oe={get stream(){return this[n]},next:function(){var U=this,W=this[g];if(W!==null)return Promise.reject(W);if(this[i])return Promise.resolve(l(void 0,!0));if(this[n].destroyed)return new Promise(function($,J){process.nextTick(function(){U[g]?J(U[g]):$(l(void 0,!0))})});var D,I=this[h];if(I)D=new Promise(function($,J){return function(Ne,Be){$.then(function(){J[i]?Ne(l(void 0,!0)):J[_](Ne,Be)},Be)}}(I,this));else{var k=this[n].read();if(k!==null)return Promise.resolve(l(k,!1));D=new Promise(this[_])}return this[h]=D,D}},Symbol.asyncIterator,function(){return this}),b(oe,"return",function(){var U=this;return new Promise(function(W,D){U[n].destroy(null,function(I){I?D(I):W(l(void 0,!0))})})}),oe),F);et.exports=function(U){var W,D=Object.create(j,(b(W={},n,{value:U,writable:!0}),b(W,t,{value:null,writable:!0}),b(W,S,{value:null,writable:!0}),b(W,g,{value:null,writable:!0}),b(W,i,{value:U._readableState.endEmitted,writable:!0}),b(W,_,{value:function(I,k){var $=D[n].read();$?(D[h]=null,D[t]=null,D[S]=null,I(l($,!1))):(D[t]=I,D[S]=k)},writable:!0}),W));return D[h]=null,e(U,function(I){if(I&&I.code!=="ERR_STREAM_PREMATURE_CLOSE"){var k=D[S];return k!==null&&(D[h]=null,D[t]=null,D[S]=null,k(I)),void(D[g]=I)}var $=D[t];$!==null&&(D[h]=null,D[t]=null,D[S]=null,$(l(void 0,!0))),D[i]=!0}),U.on("readable",P.bind(null,D)),D}},8393:(et,we,C)=>{function oe(i,h){var _=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);h&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(i,l).enumerable})),_.push.apply(_,n)}return _}function b(i,h,_){return h in i?Object.defineProperty(i,h,{value:_,enumerable:!0,configurable:!0,writable:!0}):i[h]=_,i}function e(i,h){for(var _=0;_<h.length;_++){var n=h[_];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}var t=C(1549).Buffer,S=C(9862).inspect,g=S&&S.custom||"inspect";et.exports=function(){function i(){(function(n,l){if(!(n instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.head=null,this.tail=null,this.length=0}var h,_;return h=i,_=[{key:"push",value:function(n){var l={data:n,next:null};this.length>0?this.tail.next=l:this.head=l,this.tail=l,++this.length}},{key:"unshift",value:function(n){var l={data:n,next:this.head};this.length===0&&(this.tail=l),this.head=l,++this.length}},{key:"shift",value:function(){if(this.length!==0){var n=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,n}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(n){if(this.length===0)return"";for(var l=this.head,d=""+l.data;l=l.next;)d+=n+l.data;return d}},{key:"concat",value:function(n){if(this.length===0)return t.alloc(0);for(var l,d,P,F=t.allocUnsafe(n>>>0),j=this.head,U=0;j;)l=j.data,d=F,P=U,t.prototype.copy.call(l,d,P),U+=j.data.length,j=j.next;return F}},{key:"consume",value:function(n,l){var d;return n<this.head.data.length?(d=this.head.data.slice(0,n),this.head.data=this.head.data.slice(n)):d=n===this.head.data.length?this.shift():l?this._getString(n):this._getBuffer(n),d}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(n){var l=this.head,d=1,P=l.data;for(n-=P.length;l=l.next;){var F=l.data,j=n>F.length?F.length:n;if(j===F.length?P+=F:P+=F.slice(0,n),(n-=j)==0){j===F.length?(++d,l.next?this.head=l.next:this.head=this.tail=null):(this.head=l,l.data=F.slice(j));break}++d}return this.length-=d,P}},{key:"_getBuffer",value:function(n){var l=t.allocUnsafe(n),d=this.head,P=1;for(d.data.copy(l),n-=d.data.length;d=d.next;){var F=d.data,j=n>F.length?F.length:n;if(F.copy(l,l.length-n,0,j),(n-=j)==0){j===F.length?(++P,d.next?this.head=d.next:this.head=this.tail=null):(this.head=d,d.data=F.slice(j));break}++P}return this.length-=P,l}},{key:g,value:function(n,l){return S(this,function(d){for(var P=1;P<arguments.length;P++){var F=arguments[P]!=null?arguments[P]:{};P%2?oe(Object(F),!0).forEach(function(j){b(d,j,F[j])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(F)):oe(Object(F)).forEach(function(j){Object.defineProperty(d,j,Object.getOwnPropertyDescriptor(F,j))})}return d}({},l,{depth:0,customInspect:!1}))}}],_&&e(h.prototype,_),i}()},6163:et=>{function we(b,e){oe(b,e),C(b)}function C(b){b._writableState&&!b._writableState.emitClose||b._readableState&&!b._readableState.emitClose||b.emit("close")}function oe(b,e){b.emit("error",e)}et.exports={destroy:function(b,e){var t=this,S=this._readableState&&this._readableState.destroyed,g=this._writableState&&this._writableState.destroyed;return S||g?(e?e(b):b&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(oe,this,b)):process.nextTick(oe,this,b)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(b||null,function(i){!e&&i?t._writableState?t._writableState.errorEmitted?process.nextTick(C,t):(t._writableState.errorEmitted=!0,process.nextTick(we,t,i)):process.nextTick(we,t,i):e?(process.nextTick(C,t),e(i)):process.nextTick(C,t)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(b,e){var t=b._readableState,S=b._writableState;t&&t.autoDestroy||S&&S.autoDestroy?b.destroy(e):b.emit("error",e)}}},8800:(et,we,C)=>{var oe=C(3690).q.ERR_STREAM_PREMATURE_CLOSE;function b(){}et.exports=function e(t,S,g){if(typeof S=="function")return e(t,null,S);S||(S={}),g=function(W){var D=!1;return function(){if(!D){D=!0;for(var I=arguments.length,k=new Array(I),$=0;$<I;$++)k[$]=arguments[$];W.apply(this,k)}}}(g||b);var i=S.readable||S.readable!==!1&&t.readable,h=S.writable||S.writable!==!1&&t.writable,_=function(){t.writable||l()},n=t._writableState&&t._writableState.finished,l=function(){h=!1,n=!0,i||g.call(t)},d=t._readableState&&t._readableState.endEmitted,P=function(){i=!1,d=!0,h||g.call(t)},F=function(W){g.call(t,W)},j=function(){var W;return i&&!d?(t._readableState&&t._readableState.ended||(W=new oe),g.call(t,W)):h&&!n?(t._writableState&&t._writableState.ended||(W=new oe),g.call(t,W)):void 0},U=function(){t.req.on("finish",l)};return function(W){return W.setHeader&&typeof W.abort=="function"}(t)?(t.on("complete",l),t.on("abort",j),t.req?U():t.on("request",U)):h&&!t._writableState&&(t.on("end",_),t.on("close",_)),t.on("end",P),t.on("finish",l),S.error!==!1&&t.on("error",F),t.on("close",j),function(){t.removeListener("complete",l),t.removeListener("abort",j),t.removeListener("request",U),t.req&&t.req.removeListener("finish",l),t.removeListener("end",_),t.removeListener("close",_),t.removeListener("finish",l),t.removeListener("end",P),t.removeListener("error",F),t.removeListener("close",j)}}},6233:et=>{et.exports=function(){throw new Error("Readable.from is not available in the browser")}},7295:(et,we,C)=>{var oe,b=C(3690).q,e=b.ERR_MISSING_ARGS,t=b.ERR_STREAM_DESTROYED;function S(n){if(n)throw n}function g(n,l,d,P){P=function(U){var W=!1;return function(){W||(W=!0,U.apply(void 0,arguments))}}(P);var F=!1;n.on("close",function(){F=!0}),oe===void 0&&(oe=C(8800)),oe(n,{readable:l,writable:d},function(U){if(U)return P(U);F=!0,P()});var j=!1;return function(U){if(!F&&!j)return j=!0,function(W){return W.setHeader&&typeof W.abort=="function"}(n)?n.abort():typeof n.destroy=="function"?n.destroy():void P(U||new t("pipe"))}}function i(n){n()}function h(n,l){return n.pipe(l)}function _(n){return n.length?typeof n[n.length-1]!="function"?S:n.pop():S}et.exports=function(){for(var n=arguments.length,l=new Array(n),d=0;d<n;d++)l[d]=arguments[d];var P,F=_(l);if(Array.isArray(l[0])&&(l=l[0]),l.length<2)throw new e("streams");var j=l.map(function(U,W){var D=W<l.length-1;return g(U,D,W>0,function(I){P||(P=I),I&&j.forEach(i),D||(j.forEach(i),F(P))})});return l.reduce(h)}},7269:(et,we,C)=>{var oe=C(3690).q.ERR_INVALID_OPT_VALUE;et.exports={getHighWaterMark:function(b,e,t,S){var g=function(i,h,_){return i.highWaterMark!=null?i.highWaterMark:h?i[_]:null}(e,S,t);if(g!=null){if(!isFinite(g)||Math.floor(g)!==g||g<0)throw new oe(S?t:"highWaterMark",g);return Math.floor(g)}return b.objectMode?16:16384}}},9299:(et,we,C)=>{et.exports=C(1159).EventEmitter},7503:(et,we,C)=>{var oe=C(8387).Buffer,b=oe.isEncoding||function(d){switch((d=""+d)&&d.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function e(d){var P;switch(this.encoding=function(F){var j=function(U){if(!U)return"utf8";for(var W;;)switch(U){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return U;default:if(W)return;U=(""+U).toLowerCase(),W=!0}}(F);if(typeof j!="string"&&(oe.isEncoding===b||!b(F)))throw new Error("Unknown encoding: "+F);return j||F}(d),this.encoding){case"utf16le":this.text=g,this.end=i,P=4;break;case"utf8":this.fillLast=S,P=4;break;case"base64":this.text=h,this.end=_,P=3;break;default:return this.write=n,void(this.end=l)}this.lastNeed=0,this.lastTotal=0,this.lastChar=oe.allocUnsafe(P)}function t(d){return d<=127?0:d>>5==6?2:d>>4==14?3:d>>3==30?4:d>>6==2?-1:-2}function S(d){var P=this.lastTotal-this.lastNeed,F=function(j,U,W){if((192&U[0])!=128)return j.lastNeed=0,"";if(j.lastNeed>1&&U.length>1){if((192&U[1])!=128)return j.lastNeed=1,"";if(j.lastNeed>2&&U.length>2&&(192&U[2])!=128)return j.lastNeed=2,""}}(this,d);return F!==void 0?F:this.lastNeed<=d.length?(d.copy(this.lastChar,P,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(d.copy(this.lastChar,P,0,d.length),void(this.lastNeed-=d.length))}function g(d,P){if((d.length-P)%2==0){var F=d.toString("utf16le",P);if(F){var j=F.charCodeAt(F.length-1);if(j>=55296&&j<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=d[d.length-2],this.lastChar[1]=d[d.length-1],F.slice(0,-1)}return F}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=d[d.length-1],d.toString("utf16le",P,d.length-1)}function i(d){var P=d&&d.length?this.write(d):"";if(this.lastNeed){var F=this.lastTotal-this.lastNeed;return P+this.lastChar.toString("utf16le",0,F)}return P}function h(d,P){var F=(d.length-P)%3;return F===0?d.toString("base64",P):(this.lastNeed=3-F,this.lastTotal=3,F===1?this.lastChar[0]=d[d.length-1]:(this.lastChar[0]=d[d.length-2],this.lastChar[1]=d[d.length-1]),d.toString("base64",P,d.length-F))}function _(d){var P=d&&d.length?this.write(d):"";return this.lastNeed?P+this.lastChar.toString("base64",0,3-this.lastNeed):P}function n(d){return d.toString(this.encoding)}function l(d){return d&&d.length?this.write(d):""}we.s=e,e.prototype.write=function(d){if(d.length===0)return"";var P,F;if(this.lastNeed){if((P=this.fillLast(d))===void 0)return"";F=this.lastNeed,this.lastNeed=0}else F=0;return F<d.length?P?P+this.text(d,F):this.text(d,F):P||""},e.prototype.end=function(d){var P=d&&d.length?this.write(d):"";return this.lastNeed?P+"":P},e.prototype.text=function(d,P){var F=function(U,W,D){var I=W.length-1;if(I<D)return 0;var k=t(W[I]);return k>=0?(k>0&&(U.lastNeed=k-1),k):--I<D||k===-2?0:(k=t(W[I]))>=0?(k>0&&(U.lastNeed=k-2),k):--I<D||k===-2?0:(k=t(W[I]))>=0?(k>0&&(k===2?k=0:U.lastNeed=k-3),k):0}(this,d,P);if(!this.lastNeed)return d.toString("utf8",P);this.lastTotal=F;var j=d.length-(F-this.lastNeed);return d.copy(this.lastChar,0,j),d.toString("utf8",P,j)},e.prototype.fillLast=function(d){if(this.lastNeed<=d.length)return d.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);d.copy(this.lastChar,this.lastTotal-this.lastNeed,0,d.length),this.lastNeed-=d.length}},1067:function(et,we,C){var oe;(function(b,e){var t="function",S="undefined",g="object",i="string",h="model",_="name",n="type",l="vendor",d="version",P="architecture",F="console",j="mobile",U="tablet",W="smarttv",D="wearable",I="embedded",k="Amazon",$="Apple",J="ASUS",Ne="BlackBerry",Be="Browser",te="Chrome",ot="Firefox",Ae="Google",ke="Huawei",pe="LG",be="Microsoft",He="Motorola",ut="Opera",tt="Samsung",Se="Sony",We="Xiaomi",lt="Zebra",Fe="Facebook",Xe=function(Ce){for(var De={},ve=0;ve<Ce.length;ve++)De[Ce[ve].toUpperCase()]=Ce[ve];return De},ce=function(Ce,De){return typeof Ce===i&&de(De).indexOf(de(Ce))!==-1},de=function(Ce){return Ce.toLowerCase()},je=function(Ce,De){if(typeof Ce===i)return Ce=Ce.replace(/^\s\s*/,"").replace(/\s\s*$/,""),typeof De===S?Ce:Ce.substring(0,255)},f=function(Ce,De){for(var ve,Le,Ze,Je,ht,st,wt=0;wt<De.length&&!ht;){var Mt=De[wt],xt=De[wt+1];for(ve=Le=0;ve<Mt.length&&!ht;)if(ht=Mt[ve++].exec(Ce))for(Ze=0;Ze<xt.length;Ze++)st=ht[++Le],typeof(Je=xt[Ze])===g&&Je.length>0?Je.length===2?typeof Je[1]==t?this[Je[0]]=Je[1].call(this,st):this[Je[0]]=Je[1]:Je.length===3?typeof Je[1]!==t||Je[1].exec&&Je[1].test?this[Je[0]]=st?st.replace(Je[1],Je[2]):e:this[Je[0]]=st?Je[1].call(this,st,Je[2]):e:Je.length===4&&(this[Je[0]]=st?Je[3].call(this,st.replace(Je[1],Je[2])):e):this[Je]=st||e;wt+=2}},o=function(Ce,De){for(var ve in De)if(typeof De[ve]===g&&De[ve].length>0){for(var Le=0;Le<De[ve].length;Le++)if(ce(De[ve][Le],Ce))return ve==="?"?e:ve}else if(ce(De[ve],Ce))return ve==="?"?e:ve;return Ce},v={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},E={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[d,[_,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[d,[_,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[_,d],[/opios[\/ ]+([\w\.]+)/i],[d,[_,ut+" Mini"]],[/\bopr\/([\w\.]+)/i],[d,[_,ut]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[_,d],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[d,[_,"UC"+Be]],[/\bqbcore\/([\w\.]+)/i],[d,[_,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[d,[_,"WeChat"]],[/konqueror\/([\w\.]+)/i],[d,[_,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[d,[_,"IE"]],[/yabrowser\/([\w\.]+)/i],[d,[_,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[_,/(.+)/,"$1 Secure "+Be],d],[/\bfocus\/([\w\.]+)/i],[d,[_,ot+" Focus"]],[/\bopt\/([\w\.]+)/i],[d,[_,ut+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[d,[_,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[d,[_,"Dolphin"]],[/coast\/([\w\.]+)/i],[d,[_,ut+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[d,[_,"MIUI "+Be]],[/fxios\/([-\w\.]+)/i],[d,[_,ot]],[/\bqihu|(qi?ho?o?|360)browser/i],[[_,"360 "+Be]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[_,/(.+)/,"$1 "+Be],d],[/(comodo_dragon)\/([\w\.]+)/i],[[_,/_/g," "],d],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[_,d],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[_],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[_,Fe],d],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[_,d],[/\bgsa\/([\w\.]+) .*safari\//i],[d,[_,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[d,[_,te+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[_,te+" WebView"],d],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[d,[_,"Android "+Be]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[_,d],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[d,[_,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[d,_],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[_,[d,o,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[_,d],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[_,"Netscape"],d],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[d,[_,ot+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[_,d]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[P,"amd64"]],[/(ia32(?=;))/i],[[P,de]],[/((?:i[346]|x)86)[;\)]/i],[[P,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[P,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[P,"armhf"]],[/windows (ce|mobile); ppc;/i],[[P,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[P,/ower/,"",de]],[/(sun4\w)[;\)]/i],[[P,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[P,de]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[h,[l,tt],[n,U]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[h,[l,tt],[n,j]],[/\((ip(?:hone|od)[\w ]*);/i],[h,[l,$],[n,j]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[h,[l,$],[n,U]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[h,[l,ke],[n,U]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[h,[l,ke],[n,j]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[h,/_/g," "],[l,We],[n,j]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[h,/_/g," "],[l,We],[n,U]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[h,[l,"OPPO"],[n,j]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[h,[l,"Vivo"],[n,j]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[h,[l,"Realme"],[n,j]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[h,[l,He],[n,j]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[h,[l,He],[n,U]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[h,[l,pe],[n,U]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[h,[l,pe],[n,j]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[h,[l,"Lenovo"],[n,U]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[h,/_/g," "],[l,"Nokia"],[n,j]],[/(pixel c)\b/i],[h,[l,Ae],[n,U]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[h,[l,Ae],[n,j]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[h,[l,Se],[n,j]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[h,"Xperia Tablet"],[l,Se],[n,U]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[h,[l,"OnePlus"],[n,j]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[h,[l,k],[n,U]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[h,/(.+)/g,"Fire Phone $1"],[l,k],[n,j]],[/(playbook);[-\w\),; ]+(rim)/i],[h,l,[n,U]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[h,[l,Ne],[n,j]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[h,[l,J],[n,U]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[h,[l,J],[n,j]],[/(nexus 9)/i],[h,[l,"HTC"],[n,U]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[l,[h,/_/g," "],[n,j]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[h,[l,"Acer"],[n,U]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[h,[l,"Meizu"],[n,j]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[h,[l,"Sharp"],[n,j]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[l,h,[n,j]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[l,h,[n,U]],[/(surface duo)/i],[h,[l,be],[n,U]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[h,[l,"Fairphone"],[n,j]],[/(u304aa)/i],[h,[l,"AT&T"],[n,j]],[/\bsie-(\w*)/i],[h,[l,"Siemens"],[n,j]],[/\b(rct\w+) b/i],[h,[l,"RCA"],[n,U]],[/\b(venue[\d ]{2,7}) b/i],[h,[l,"Dell"],[n,U]],[/\b(q(?:mv|ta)\w+) b/i],[h,[l,"Verizon"],[n,U]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[h,[l,"Barnes & Noble"],[n,U]],[/\b(tm\d{3}\w+) b/i],[h,[l,"NuVision"],[n,U]],[/\b(k88) b/i],[h,[l,"ZTE"],[n,U]],[/\b(nx\d{3}j) b/i],[h,[l,"ZTE"],[n,j]],[/\b(gen\d{3}) b.+49h/i],[h,[l,"Swiss"],[n,j]],[/\b(zur\d{3}) b/i],[h,[l,"Swiss"],[n,U]],[/\b((zeki)?tb.*\b) b/i],[h,[l,"Zeki"],[n,U]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[l,"Dragon Touch"],h,[n,U]],[/\b(ns-?\w{0,9}) b/i],[h,[l,"Insignia"],[n,U]],[/\b((nxa|next)-?\w{0,9}) b/i],[h,[l,"NextBook"],[n,U]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[l,"Voice"],h,[n,j]],[/\b(lvtel\-)?(v1[12]) b/i],[[l,"LvTel"],h,[n,j]],[/\b(ph-1) /i],[h,[l,"Essential"],[n,j]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[h,[l,"Envizen"],[n,U]],[/\b(trio[-\w\. ]+) b/i],[h,[l,"MachSpeed"],[n,U]],[/\btu_(1491) b/i],[h,[l,"Rotor"],[n,U]],[/(shield[\w ]+) b/i],[h,[l,"Nvidia"],[n,U]],[/(sprint) (\w+)/i],[l,h,[n,j]],[/(kin\.[onetw]{3})/i],[[h,/\./g," "],[l,be],[n,j]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[h,[l,lt],[n,U]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[h,[l,lt],[n,j]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[l,h,[n,F]],[/droid.+; (shield) bui/i],[h,[l,"Nvidia"],[n,F]],[/(playstation [345portablevi]+)/i],[h,[l,Se],[n,F]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[h,[l,be],[n,F]],[/smart-tv.+(samsung)/i],[l,[n,W]],[/hbbtv.+maple;(\d+)/i],[[h,/^/,"SmartTV"],[l,tt],[n,W]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[l,pe],[n,W]],[/(apple) ?tv/i],[l,[h,$+" TV"],[n,W]],[/crkey/i],[[h,te+"cast"],[l,Ae],[n,W]],[/droid.+aft(\w)( bui|\))/i],[h,[l,k],[n,W]],[/\(dtv[\);].+(aquos)/i],[h,[l,"Sharp"],[n,W]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[l,je],[h,je],[n,W]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[n,W]],[/((pebble))app/i],[l,h,[n,D]],[/droid.+; (glass) \d/i],[h,[l,Ae],[n,D]],[/droid.+; (wt63?0{2,3})\)/i],[h,[l,lt],[n,D]],[/(quest( 2)?)/i],[h,[l,Fe],[n,D]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[l,[n,I]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[h,[n,j]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[h,[n,U]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[n,U]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[n,j]],[/(android[-\w\. ]{0,9});.+buil/i],[h,[l,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[d,[_,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[d,[_,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[_,d],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[d,_]],os:[[/microsoft (windows) (vista|xp)/i],[_,d],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[_,[d,o,v]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[_,"Windows"],[d,o,v]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[d,/_/g,"."],[_,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[_,"Mac OS"],[d,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[d,_],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[_,d],[/\(bb(10);/i],[d,[_,Ne]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[d,[_,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[d,[_,ot+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[d,[_,"webOS"]],[/crkey\/([\d\.]+)/i],[d,[_,te+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[_,"Chromium OS"],d],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[_,d],[/(sunos) ?([\w\.\d]*)/i],[[_,"Solaris"],d],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[_,d]]},X=function(Ce,De){if(typeof Ce===g&&(De=Ce,Ce=e),!(this instanceof X))return new X(Ce,De).getResult();var ve=Ce||(typeof b!==S&&b.navigator&&b.navigator.userAgent?b.navigator.userAgent:""),Le=De?function(Ze,Je){var ht={};for(var st in Ze)Je[st]&&Je[st].length%2==0?ht[st]=Je[st].concat(Ze[st]):ht[st]=Ze[st];return ht}(E,De):E;return this.getBrowser=function(){var Ze,Je={};return Je[_]=e,Je[d]=e,f.call(Je,ve,Le.browser),Je.major=typeof(Ze=Je.version)===i?Ze.replace(/[^\d\.]/g,"").split(".")[0]:e,Je},this.getCPU=function(){var Ze={};return Ze[P]=e,f.call(Ze,ve,Le.cpu),Ze},this.getDevice=function(){var Ze={};return Ze[l]=e,Ze[h]=e,Ze[n]=e,f.call(Ze,ve,Le.device),Ze},this.getEngine=function(){var Ze={};return Ze[_]=e,Ze[d]=e,f.call(Ze,ve,Le.engine),Ze},this.getOS=function(){var Ze={};return Ze[_]=e,Ze[d]=e,f.call(Ze,ve,Le.os),Ze},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return ve},this.setUA=function(Ze){return ve=typeof Ze===i&&Ze.length>255?je(Ze,255):Ze,this},this.setUA(ve),this};X.VERSION="1.0.2",X.BROWSER=Xe([_,d,"major"]),X.CPU=Xe([P]),X.DEVICE=Xe([h,l,n,F,j,W,U,D,I]),X.ENGINE=X.OS=Xe([_,d]),typeof we!==S?(et.exports&&(we=et.exports=X),we.UAParser=X):C.amdO?(oe=function(){return X}.call(we,C,we,et))===e||(et.exports=oe):typeof b!==S&&(b.UAParser=X);var K=typeof b!==S&&(b.jQuery||b.Zepto);if(K&&!K.ua){var he=new X;K.ua=he.getResult(),K.ua.get=function(){return he.getUA()},K.ua.set=function(Ce){he.setUA(Ce);var De=he.getResult();for(var ve in De)K.ua[ve]=De[ve]}}})(typeof window=="object"?window:this)},7839:(et,we,C)=>{function oe(b){try{if(!C.g.localStorage)return!1}catch{return!1}var e=C.g.localStorage[b];return e!=null&&String(e).toLowerCase()==="true"}et.exports=function(b,e){if(oe("noDeprecation"))return b;var t=!1;return function(){if(!t){if(oe("throwDeprecation"))throw new Error(e);oe("traceDeprecation")?console.trace(e):console.warn(e),t=!0}return b.apply(this,arguments)}}},9862:()=>{},964:()=>{},3165:et=>{et.exports=JSON.parse('["mni-beng-in","mni-mtei-in","sat-deva-in","sat-olck-in","shi-latn-ma","shi-tfng-ma","vai-latn-lr","vai-vaii-lr","yue-hans-cn","yue-hant-hk","az-arab-ir","az-cyrl-az","az-latn-az","bm-nkoo-ml","bs-cyrl-ba","bs-latn-ba","en-dsrt-us","ff-adlm-gn","ff-latn-sn","ha-arab-ng","hi-latn-in","iu-latn-ca","ks-arab-in","ks-deva-in","mn-mong-cn","ms-arab-my","pa-arab-pk","pa-guru-in","sd-arab-pk","sd-deva-in","sr-cyrl-rs","sr-latn-rs","su-latn-id","uz-arab-af","uz-cyrl-uz","uz-latn-uz","zh-hans-cn","zh-hant-tw","mni-beng","sat-olck","shi-tfng","vai-vaii","yue-hant","az-latn","bs-latn","ff-latn","jbo-001","ks-arab","pa-guru","prg-001","sd-arab","sr-cyrl","su-latn","uz-latn","zh-hans","agq-cm","ar-001","arn-cl","asa-tz","ast-es","bas-cm","bem-zm","bez-tz","bgn-pk","blt-vn","brx-in","bss-cm","byn-er","cad-us","cch-ng","ccp-bd","ceb-ph","cgg-ug","chr-us","cic-us","ckb-iq","dav-ke","dje-ne","doi-in","dsb-de","dua-cm","dyo-sn","ebu-ke","eo-001","ewo-cm","fil-ph","fur-it","gaa-gh","gez-et","gsw-ch","guz-ke","haw-us","hsb-de","ia-001","ife-tg","io-001","jgo-cm","jmc-tz","kab-dz","kaj-ng","kam-ke","kcg-ng","kde-tz","kea-cv","ken-cm","khq-ml","kkj-cm","kln-ke","kok-in","kpe-lr","ksb-tz","ksf-cm","ksh-de","lag-tz","lkt-us","lrc-ir","luo-ke","luy-ke","mai-in","mas-ke","mer-ke","mfe-mu","mgh-mz","mgo-cm","moh-ca","mua-cm","mus-us","myv-ru","mzn-ir","naq-na","nds-de","nmg-cm","nnh-cm","nqo-gn","nso-za","nus-ss","nyn-ug","osa-us","pcm-ng","quc-gt","rof-tz","rwk-tz","sah-ru","saq-ke","sbp-tz","scn-it","sdh-ir","seh-mz","ses-ml","sid-et","sma-se","smj-se","smn-fi","sms-fi","ssy-er","syr-iq","szl-pl","teo-ug","tig-er","trv-tw","trw-pk","twq-ne","tzm-ma","vo-001","vun-tz","wae-ch","wal-et","wbp-au","xog-ug","yav-cm","yi-001","zgh-ma","aa-et","af-za","ak-gh","am-et","an-es","as-in","ba-ru","be-by","bg-bg","bm-ml","bn-bd","bo-cn","br-fr","ca-es","ce-ru","co-fr","cs-cz","cu-ru","cv-ru","cy-gb","da-dk","de-de","dv-mv","dz-bt","ee-gh","el-gr","en-us","es-es","et-ee","eu-es","fa-ir","fi-fi","fo-fo","fr-fr","fy-nl","ga-ie","gd-gb","gl-es","gn-py","gu-in","gv-im","ha-ng","he-il","hi-in","hr-hr","hu-hu","hy-am","id-id","ig-ng","ii-cn","is-is","it-it","iu-ca","ja-jp","jv-id","ka-ge","ki-ke","kk-kz","kl-gl","km-kh","kn-in","ko-kr","ku-tr","kw-gb","ky-kg","lb-lu","lg-ug","ln-cd","lo-la","lt-lt","lu-cd","lv-lv","mg-mg","mi-nz","mk-mk","ml-in","mn-mn","mr-in","ms-my","mt-mt","my-mm","nb-no","nd-zw","ne-np","nl-nl","nn-no","nr-za","nv-us","ny-mw","oc-fr","om-et","or-in","os-ge","pl-pl","ps-af","pt-br","qu-pe","rm-ch","rn-bi","ro-ro","ru-ru","rw-rw","sa-in","sc-it","se-no","sg-cf","si-lk","sk-sk","sl-si","sn-zw","so-so","sq-al","ss-za","st-za","sv-se","sw-tz","ta-in","te-in","tg-tj","th-th","ti-et","tk-tm","tn-za","to-to","tr-tr","ts-za","tt-ru","ug-cn","uk-ua","ur-pk","ve-za","vi-vn","wa-be","wo-sn","xh-za","yo-ng","zu-za"]')},5813:et=>{et.exports=JSON.parse('[{"from":{"field":"script","value":"qaai"},"to":{"field":"script","value":"zinh"}},{"from":{"field":"region","value":"bu"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"ct"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"dd"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"dy"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"fx"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"hv"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"jt"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"mi"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"nh"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"nq"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"pu"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"pz"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"qu"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"rh"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"tp"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"uk"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"vd"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"wk"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"yd"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"zr"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"230"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"280"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"736"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"886"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"958"},"to":{"field":"region","value":"aa"}},{"from":{"field":"region","value":"020"},"to":{"field":"region","value":"ad"}},{"from":{"field":"region","value":"784"},"to":{"field":"region","value":"ae"}},{"from":{"field":"region","value":"004"},"to":{"field":"region","value":"af"}},{"from":{"field":"region","value":"028"},"to":{"field":"region","value":"ag"}},{"from":{"field":"region","value":"660"},"to":{"field":"region","value":"ai"}},{"from":{"field":"region","value":"008"},"to":{"field":"region","value":"al"}},{"from":{"field":"region","value":"051"},"to":{"field":"region","value":"am"}},{"from":{"field":"region","value":"024"},"to":{"field":"region","value":"ao"}},{"from":{"field":"region","value":"010"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"032"},"to":{"field":"region","value":"ar"}},{"from":{"field":"region","value":"016"},"to":{"field":"region","value":"as"}},{"from":{"field":"region","value":"040"},"to":{"field":"region","value":"at"}},{"from":{"field":"region","value":"036"},"to":{"field":"region","value":"au"}},{"from":{"field":"region","value":"533"},"to":{"field":"region","value":"aw"}},{"from":{"field":"region","value":"248"},"to":{"field":"region","value":"ax"}},{"from":{"field":"region","value":"031"},"to":{"field":"region","value":"az"}},{"from":{"field":"region","value":"070"},"to":{"field":"region","value":"ba"}},{"from":{"field":"region","value":"052"},"to":{"field":"region","value":"bb"}},{"from":{"field":"region","value":"050"},"to":{"field":"region","value":"bd"}},{"from":{"field":"region","value":"056"},"to":{"field":"region","value":"be"}},{"from":{"field":"region","value":"854"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"100"},"to":{"field":"region","value":"bg"}},{"from":{"field":"region","value":"048"},"to":{"field":"region","value":"bh"}},{"from":{"field":"region","value":"108"},"to":{"field":"region","value":"bi"}},{"from":{"field":"region","value":"204"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"652"},"to":{"field":"region","value":"bl"}},{"from":{"field":"region","value":"060"},"to":{"field":"region","value":"bm"}},{"from":{"field":"region","value":"096"},"to":{"field":"region","value":"bn"}},{"from":{"field":"region","value":"068"},"to":{"field":"region","value":"bo"}},{"from":{"field":"region","value":"535"},"to":{"field":"region","value":"bq"}},{"from":{"field":"region","value":"076"},"to":{"field":"region","value":"br"}},{"from":{"field":"region","value":"044"},"to":{"field":"region","value":"bs"}},{"from":{"field":"region","value":"064"},"to":{"field":"region","value":"bt"}},{"from":{"field":"region","value":"104"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"074"},"to":{"field":"region","value":"bv"}},{"from":{"field":"region","value":"072"},"to":{"field":"region","value":"bw"}},{"from":{"field":"region","value":"112"},"to":{"field":"region","value":"by"}},{"from":{"field":"region","value":"084"},"to":{"field":"region","value":"bz"}},{"from":{"field":"region","value":"124"},"to":{"field":"region","value":"ca"}},{"from":{"field":"region","value":"166"},"to":{"field":"region","value":"cc"}},{"from":{"field":"region","value":"180"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"140"},"to":{"field":"region","value":"cf"}},{"from":{"field":"region","value":"178"},"to":{"field":"region","value":"cg"}},{"from":{"field":"region","value":"756"},"to":{"field":"region","value":"ch"}},{"from":{"field":"region","value":"384"},"to":{"field":"region","value":"ci"}},{"from":{"field":"region","value":"184"},"to":{"field":"region","value":"ck"}},{"from":{"field":"region","value":"152"},"to":{"field":"region","value":"cl"}},{"from":{"field":"region","value":"120"},"to":{"field":"region","value":"cm"}},{"from":{"field":"region","value":"156"},"to":{"field":"region","value":"cn"}},{"from":{"field":"region","value":"170"},"to":{"field":"region","value":"co"}},{"from":{"field":"region","value":"188"},"to":{"field":"region","value":"cr"}},{"from":{"field":"region","value":"192"},"to":{"field":"region","value":"cu"}},{"from":{"field":"region","value":"132"},"to":{"field":"region","value":"cv"}},{"from":{"field":"region","value":"531"},"to":{"field":"region","value":"cw"}},{"from":{"field":"region","value":"162"},"to":{"field":"region","value":"cx"}},{"from":{"field":"region","value":"196"},"to":{"field":"region","value":"cy"}},{"from":{"field":"region","value":"203"},"to":{"field":"region","value":"cz"}},{"from":{"field":"region","value":"278"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"276"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"262"},"to":{"field":"region","value":"dj"}},{"from":{"field":"region","value":"208"},"to":{"field":"region","value":"dk"}},{"from":{"field":"region","value":"212"},"to":{"field":"region","value":"dm"}},{"from":{"field":"region","value":"214"},"to":{"field":"region","value":"do"}},{"from":{"field":"region","value":"012"},"to":{"field":"region","value":"dz"}},{"from":{"field":"region","value":"218"},"to":{"field":"region","value":"ec"}},{"from":{"field":"region","value":"233"},"to":{"field":"region","value":"ee"}},{"from":{"field":"region","value":"818"},"to":{"field":"region","value":"eg"}},{"from":{"field":"region","value":"732"},"to":{"field":"region","value":"eh"}},{"from":{"field":"region","value":"232"},"to":{"field":"region","value":"er"}},{"from":{"field":"region","value":"724"},"to":{"field":"region","value":"es"}},{"from":{"field":"region","value":"231"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"246"},"to":{"field":"region","value":"fi"}},{"from":{"field":"region","value":"242"},"to":{"field":"region","value":"fj"}},{"from":{"field":"region","value":"238"},"to":{"field":"region","value":"fk"}},{"from":{"field":"region","value":"583"},"to":{"field":"region","value":"fm"}},{"from":{"field":"region","value":"234"},"to":{"field":"region","value":"fo"}},{"from":{"field":"region","value":"250"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"249"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"266"},"to":{"field":"region","value":"ga"}},{"from":{"field":"region","value":"826"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"308"},"to":{"field":"region","value":"gd"}},{"from":{"field":"region","value":"268"},"to":{"field":"region","value":"ge"}},{"from":{"field":"region","value":"254"},"to":{"field":"region","value":"gf"}},{"from":{"field":"region","value":"831"},"to":{"field":"region","value":"gg"}},{"from":{"field":"region","value":"288"},"to":{"field":"region","value":"gh"}},{"from":{"field":"region","value":"292"},"to":{"field":"region","value":"gi"}},{"from":{"field":"region","value":"304"},"to":{"field":"region","value":"gl"}},{"from":{"field":"region","value":"270"},"to":{"field":"region","value":"gm"}},{"from":{"field":"region","value":"324"},"to":{"field":"region","value":"gn"}},{"from":{"field":"region","value":"312"},"to":{"field":"region","value":"gp"}},{"from":{"field":"region","value":"226"},"to":{"field":"region","value":"gq"}},{"from":{"field":"region","value":"300"},"to":{"field":"region","value":"gr"}},{"from":{"field":"region","value":"239"},"to":{"field":"region","value":"gs"}},{"from":{"field":"region","value":"320"},"to":{"field":"region","value":"gt"}},{"from":{"field":"region","value":"316"},"to":{"field":"region","value":"gu"}},{"from":{"field":"region","value":"624"},"to":{"field":"region","value":"gw"}},{"from":{"field":"region","value":"328"},"to":{"field":"region","value":"gy"}},{"from":{"field":"region","value":"344"},"to":{"field":"region","value":"hk"}},{"from":{"field":"region","value":"334"},"to":{"field":"region","value":"hm"}},{"from":{"field":"region","value":"340"},"to":{"field":"region","value":"hn"}},{"from":{"field":"region","value":"191"},"to":{"field":"region","value":"hr"}},{"from":{"field":"region","value":"332"},"to":{"field":"region","value":"ht"}},{"from":{"field":"region","value":"348"},"to":{"field":"region","value":"hu"}},{"from":{"field":"region","value":"360"},"to":{"field":"region","value":"id"}},{"from":{"field":"region","value":"372"},"to":{"field":"region","value":"ie"}},{"from":{"field":"region","value":"376"},"to":{"field":"region","value":"il"}},{"from":{"field":"region","value":"833"},"to":{"field":"region","value":"im"}},{"from":{"field":"region","value":"356"},"to":{"field":"region","value":"in"}},{"from":{"field":"region","value":"086"},"to":{"field":"region","value":"io"}},{"from":{"field":"region","value":"368"},"to":{"field":"region","value":"iq"}},{"from":{"field":"region","value":"364"},"to":{"field":"region","value":"ir"}},{"from":{"field":"region","value":"352"},"to":{"field":"region","value":"is"}},{"from":{"field":"region","value":"380"},"to":{"field":"region","value":"it"}},{"from":{"field":"region","value":"832"},"to":{"field":"region","value":"je"}},{"from":{"field":"region","value":"388"},"to":{"field":"region","value":"jm"}},{"from":{"field":"region","value":"400"},"to":{"field":"region","value":"jo"}},{"from":{"field":"region","value":"392"},"to":{"field":"region","value":"jp"}},{"from":{"field":"region","value":"404"},"to":{"field":"region","value":"ke"}},{"from":{"field":"region","value":"417"},"to":{"field":"region","value":"kg"}},{"from":{"field":"region","value":"116"},"to":{"field":"region","value":"kh"}},{"from":{"field":"region","value":"296"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"174"},"to":{"field":"region","value":"km"}},{"from":{"field":"region","value":"659"},"to":{"field":"region","value":"kn"}},{"from":{"field":"region","value":"408"},"to":{"field":"region","value":"kp"}},{"from":{"field":"region","value":"410"},"to":{"field":"region","value":"kr"}},{"from":{"field":"region","value":"414"},"to":{"field":"region","value":"kw"}},{"from":{"field":"region","value":"136"},"to":{"field":"region","value":"ky"}},{"from":{"field":"region","value":"398"},"to":{"field":"region","value":"kz"}},{"from":{"field":"region","value":"418"},"to":{"field":"region","value":"la"}},{"from":{"field":"region","value":"422"},"to":{"field":"region","value":"lb"}},{"from":{"field":"region","value":"662"},"to":{"field":"region","value":"lc"}},{"from":{"field":"region","value":"438"},"to":{"field":"region","value":"li"}},{"from":{"field":"region","value":"144"},"to":{"field":"region","value":"lk"}},{"from":{"field":"region","value":"430"},"to":{"field":"region","value":"lr"}},{"from":{"field":"region","value":"426"},"to":{"field":"region","value":"ls"}},{"from":{"field":"region","value":"440"},"to":{"field":"region","value":"lt"}},{"from":{"field":"region","value":"442"},"to":{"field":"region","value":"lu"}},{"from":{"field":"region","value":"428"},"to":{"field":"region","value":"lv"}},{"from":{"field":"region","value":"434"},"to":{"field":"region","value":"ly"}},{"from":{"field":"region","value":"504"},"to":{"field":"region","value":"ma"}},{"from":{"field":"region","value":"492"},"to":{"field":"region","value":"mc"}},{"from":{"field":"region","value":"498"},"to":{"field":"region","value":"md"}},{"from":{"field":"region","value":"499"},"to":{"field":"region","value":"me"}},{"from":{"field":"region","value":"663"},"to":{"field":"region","value":"mf"}},{"from":{"field":"region","value":"450"},"to":{"field":"region","value":"mg"}},{"from":{"field":"region","value":"584"},"to":{"field":"region","value":"mh"}},{"from":{"field":"region","value":"807"},"to":{"field":"region","value":"mk"}},{"from":{"field":"region","value":"466"},"to":{"field":"region","value":"ml"}},{"from":{"field":"region","value":"496"},"to":{"field":"region","value":"mn"}},{"from":{"field":"region","value":"446"},"to":{"field":"region","value":"mo"}},{"from":{"field":"region","value":"580"},"to":{"field":"region","value":"mp"}},{"from":{"field":"region","value":"474"},"to":{"field":"region","value":"mq"}},{"from":{"field":"region","value":"478"},"to":{"field":"region","value":"mr"}},{"from":{"field":"region","value":"500"},"to":{"field":"region","value":"ms"}},{"from":{"field":"region","value":"470"},"to":{"field":"region","value":"mt"}},{"from":{"field":"region","value":"480"},"to":{"field":"region","value":"mu"}},{"from":{"field":"region","value":"462"},"to":{"field":"region","value":"mv"}},{"from":{"field":"region","value":"454"},"to":{"field":"region","value":"mw"}},{"from":{"field":"region","value":"484"},"to":{"field":"region","value":"mx"}},{"from":{"field":"region","value":"458"},"to":{"field":"region","value":"my"}},{"from":{"field":"region","value":"508"},"to":{"field":"region","value":"mz"}},{"from":{"field":"region","value":"516"},"to":{"field":"region","value":"na"}},{"from":{"field":"region","value":"540"},"to":{"field":"region","value":"nc"}},{"from":{"field":"region","value":"562"},"to":{"field":"region","value":"ne"}},{"from":{"field":"region","value":"574"},"to":{"field":"region","value":"nf"}},{"from":{"field":"region","value":"566"},"to":{"field":"region","value":"ng"}},{"from":{"field":"region","value":"558"},"to":{"field":"region","value":"ni"}},{"from":{"field":"region","value":"528"},"to":{"field":"region","value":"nl"}},{"from":{"field":"region","value":"578"},"to":{"field":"region","value":"no"}},{"from":{"field":"region","value":"524"},"to":{"field":"region","value":"np"}},{"from":{"field":"region","value":"520"},"to":{"field":"region","value":"nr"}},{"from":{"field":"region","value":"570"},"to":{"field":"region","value":"nu"}},{"from":{"field":"region","value":"554"},"to":{"field":"region","value":"nz"}},{"from":{"field":"region","value":"512"},"to":{"field":"region","value":"om"}},{"from":{"field":"region","value":"591"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"604"},"to":{"field":"region","value":"pe"}},{"from":{"field":"region","value":"258"},"to":{"field":"region","value":"pf"}},{"from":{"field":"region","value":"598"},"to":{"field":"region","value":"pg"}},{"from":{"field":"region","value":"608"},"to":{"field":"region","value":"ph"}},{"from":{"field":"region","value":"586"},"to":{"field":"region","value":"pk"}},{"from":{"field":"region","value":"616"},"to":{"field":"region","value":"pl"}},{"from":{"field":"region","value":"666"},"to":{"field":"region","value":"pm"}},{"from":{"field":"region","value":"612"},"to":{"field":"region","value":"pn"}},{"from":{"field":"region","value":"630"},"to":{"field":"region","value":"pr"}},{"from":{"field":"region","value":"275"},"to":{"field":"region","value":"ps"}},{"from":{"field":"region","value":"620"},"to":{"field":"region","value":"pt"}},{"from":{"field":"region","value":"585"},"to":{"field":"region","value":"pw"}},{"from":{"field":"region","value":"600"},"to":{"field":"region","value":"py"}},{"from":{"field":"region","value":"634"},"to":{"field":"region","value":"qa"}},{"from":{"field":"region","value":"959"},"to":{"field":"region","value":"qm"}},{"from":{"field":"region","value":"960"},"to":{"field":"region","value":"qn"}},{"from":{"field":"region","value":"962"},"to":{"field":"region","value":"qp"}},{"from":{"field":"region","value":"963"},"to":{"field":"region","value":"qq"}},{"from":{"field":"region","value":"964"},"to":{"field":"region","value":"qr"}},{"from":{"field":"region","value":"965"},"to":{"field":"region","value":"qs"}},{"from":{"field":"region","value":"966"},"to":{"field":"region","value":"qt"}},{"from":{"field":"region","value":"967"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"968"},"to":{"field":"region","value":"qv"}},{"from":{"field":"region","value":"969"},"to":{"field":"region","value":"qw"}},{"from":{"field":"region","value":"970"},"to":{"field":"region","value":"qx"}},{"from":{"field":"region","value":"971"},"to":{"field":"region","value":"qy"}},{"from":{"field":"region","value":"972"},"to":{"field":"region","value":"qz"}},{"from":{"field":"region","value":"638"},"to":{"field":"region","value":"re"}},{"from":{"field":"region","value":"642"},"to":{"field":"region","value":"ro"}},{"from":{"field":"region","value":"688"},"to":{"field":"region","value":"rs"}},{"from":{"field":"region","value":"643"},"to":{"field":"region","value":"ru"}},{"from":{"field":"region","value":"646"},"to":{"field":"region","value":"rw"}},{"from":{"field":"region","value":"682"},"to":{"field":"region","value":"sa"}},{"from":{"field":"region","value":"090"},"to":{"field":"region","value":"sb"}},{"from":{"field":"region","value":"690"},"to":{"field":"region","value":"sc"}},{"from":{"field":"region","value":"729"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"752"},"to":{"field":"region","value":"se"}},{"from":{"field":"region","value":"702"},"to":{"field":"region","value":"sg"}},{"from":{"field":"region","value":"654"},"to":{"field":"region","value":"sh"}},{"from":{"field":"region","value":"705"},"to":{"field":"region","value":"si"}},{"from":{"field":"region","value":"744"},"to":{"field":"region","value":"sj"}},{"from":{"field":"region","value":"703"},"to":{"field":"region","value":"sk"}},{"from":{"field":"region","value":"694"},"to":{"field":"region","value":"sl"}},{"from":{"field":"region","value":"674"},"to":{"field":"region","value":"sm"}},{"from":{"field":"region","value":"686"},"to":{"field":"region","value":"sn"}},{"from":{"field":"region","value":"706"},"to":{"field":"region","value":"so"}},{"from":{"field":"region","value":"740"},"to":{"field":"region","value":"sr"}},{"from":{"field":"region","value":"728"},"to":{"field":"region","value":"ss"}},{"from":{"field":"region","value":"678"},"to":{"field":"region","value":"st"}},{"from":{"field":"region","value":"222"},"to":{"field":"region","value":"sv"}},{"from":{"field":"region","value":"534"},"to":{"field":"region","value":"sx"}},{"from":{"field":"region","value":"760"},"to":{"field":"region","value":"sy"}},{"from":{"field":"region","value":"748"},"to":{"field":"region","value":"sz"}},{"from":{"field":"region","value":"796"},"to":{"field":"region","value":"tc"}},{"from":{"field":"region","value":"148"},"to":{"field":"region","value":"td"}},{"from":{"field":"region","value":"260"},"to":{"field":"region","value":"tf"}},{"from":{"field":"region","value":"768"},"to":{"field":"region","value":"tg"}},{"from":{"field":"region","value":"764"},"to":{"field":"region","value":"th"}},{"from":{"field":"region","value":"762"},"to":{"field":"region","value":"tj"}},{"from":{"field":"region","value":"772"},"to":{"field":"region","value":"tk"}},{"from":{"field":"region","value":"626"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"795"},"to":{"field":"region","value":"tm"}},{"from":{"field":"region","value":"788"},"to":{"field":"region","value":"tn"}},{"from":{"field":"region","value":"776"},"to":{"field":"region","value":"to"}},{"from":{"field":"region","value":"792"},"to":{"field":"region","value":"tr"}},{"from":{"field":"region","value":"780"},"to":{"field":"region","value":"tt"}},{"from":{"field":"region","value":"798"},"to":{"field":"region","value":"tv"}},{"from":{"field":"region","value":"158"},"to":{"field":"region","value":"tw"}},{"from":{"field":"region","value":"834"},"to":{"field":"region","value":"tz"}},{"from":{"field":"region","value":"804"},"to":{"field":"region","value":"ua"}},{"from":{"field":"region","value":"800"},"to":{"field":"region","value":"ug"}},{"from":{"field":"region","value":"581"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"840"},"to":{"field":"region","value":"us"}},{"from":{"field":"region","value":"858"},"to":{"field":"region","value":"uy"}},{"from":{"field":"region","value":"860"},"to":{"field":"region","value":"uz"}},{"from":{"field":"region","value":"336"},"to":{"field":"region","value":"va"}},{"from":{"field":"region","value":"670"},"to":{"field":"region","value":"vc"}},{"from":{"field":"region","value":"862"},"to":{"field":"region","value":"ve"}},{"from":{"field":"region","value":"092"},"to":{"field":"region","value":"vg"}},{"from":{"field":"region","value":"850"},"to":{"field":"region","value":"vi"}},{"from":{"field":"region","value":"704"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"548"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"876"},"to":{"field":"region","value":"wf"}},{"from":{"field":"region","value":"882"},"to":{"field":"region","value":"ws"}},{"from":{"field":"region","value":"973"},"to":{"field":"region","value":"xa"}},{"from":{"field":"region","value":"974"},"to":{"field":"region","value":"xb"}},{"from":{"field":"region","value":"975"},"to":{"field":"region","value":"xc"}},{"from":{"field":"region","value":"976"},"to":{"field":"region","value":"xd"}},{"from":{"field":"region","value":"977"},"to":{"field":"region","value":"xe"}},{"from":{"field":"region","value":"978"},"to":{"field":"region","value":"xf"}},{"from":{"field":"region","value":"979"},"to":{"field":"region","value":"xg"}},{"from":{"field":"region","value":"980"},"to":{"field":"region","value":"xh"}},{"from":{"field":"region","value":"981"},"to":{"field":"region","value":"xi"}},{"from":{"field":"region","value":"982"},"to":{"field":"region","value":"xj"}},{"from":{"field":"region","value":"983"},"to":{"field":"region","value":"xk"}},{"from":{"field":"region","value":"984"},"to":{"field":"region","value":"xl"}},{"from":{"field":"region","value":"985"},"to":{"field":"region","value":"xm"}},{"from":{"field":"region","value":"986"},"to":{"field":"region","value":"xn"}},{"from":{"field":"region","value":"987"},"to":{"field":"region","value":"xo"}},{"from":{"field":"region","value":"988"},"to":{"field":"region","value":"xp"}},{"from":{"field":"region","value":"989"},"to":{"field":"region","value":"xq"}},{"from":{"field":"region","value":"990"},"to":{"field":"region","value":"xr"}},{"from":{"field":"region","value":"991"},"to":{"field":"region","value":"xs"}},{"from":{"field":"region","value":"992"},"to":{"field":"region","value":"xt"}},{"from":{"field":"region","value":"993"},"to":{"field":"region","value":"xu"}},{"from":{"field":"region","value":"994"},"to":{"field":"region","value":"xv"}},{"from":{"field":"region","value":"995"},"to":{"field":"region","value":"xw"}},{"from":{"field":"region","value":"996"},"to":{"field":"region","value":"xx"}},{"from":{"field":"region","value":"997"},"to":{"field":"region","value":"xy"}},{"from":{"field":"region","value":"998"},"to":{"field":"region","value":"xz"}},{"from":{"field":"region","value":"720"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"887"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"175"},"to":{"field":"region","value":"yt"}},{"from":{"field":"region","value":"710"},"to":{"field":"region","value":"za"}},{"from":{"field":"region","value":"894"},"to":{"field":"region","value":"zm"}},{"from":{"field":"region","value":"716"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"999"},"to":{"field":"region","value":"zz"}},{"from":{"field":"variants","value":"aaland"},"to":{"field":"region","value":"ax"}},{"from":{"field":"variants","value":"polytoni"},"to":{"field":"variants","value":"polyton"}},{"from":{"field":"variants","value":"heploc"},"to":{"field":"variants","value":"alalc97"}},{"from":{"field":"variants","value":"arevela"},"to":{"field":"language","value":"hy"}},{"from":{"field":"variants","value":"arevmda"},"to":{"field":"language","value":"hyw"}}]')},9460:et=>{et.exports=JSON.parse('{"region":{"172":["ru","am","az","by","ge","kg","kz","md","tj","tm","ua","uz"],"200":["cz","sk"],"530":["cw","sx","bq"],"532":["cw","sx","bq"],"536":["sa","iq"],"582":["fm","mh","mp","pw"],"810":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"830":["je","gg"],"890":["rs","me","si","hr","mk","ba"],"891":["rs","me"],"an":["cw","sx","bq"],"cs":["rs","me"],"fq":["aq","tf"],"nt":["sa","iq"],"pc":["fm","mh","mp","pw"],"su":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yu":["rs","me"],"062":["034","143"],"ant":["cw","sx","bq"],"scg":["rs","me"],"ntz":["sa","iq"],"sun":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yug":["rs","me"]}}')},7778:et=>{et.exports=JSON.parse('[{"from":"in","to":"id"},{"from":"iw","to":"he"},{"from":"ji","to":"yi"},{"from":"jw","to":"jv"},{"from":"mo","to":"ro"},{"from":"scc","to":"sr"},{"from":"scr","to":"hr"},{"from":"aam","to":"aas"},{"from":"adp","to":"dz"},{"from":"aue","to":"ktz"},{"from":"ayx","to":"nun"},{"from":"bgm","to":"bcg"},{"from":"bjd","to":"drl"},{"from":"ccq","to":"rki"},{"from":"cjr","to":"mom"},{"from":"cka","to":"cmr"},{"from":"cmk","to":"xch"},{"from":"coy","to":"pij"},{"from":"cqu","to":"quh"},{"from":"drh","to":"mn"},{"from":"drw","to":"fa-af"},{"from":"gav","to":"dev"},{"from":"gfx","to":"vaj"},{"from":"ggn","to":"gvr"},{"from":"gti","to":"nyc"},{"from":"guv","to":"duz"},{"from":"hrr","to":"jal"},{"from":"ibi","to":"opa"},{"from":"ilw","to":"gal"},{"from":"jeg","to":"oyb"},{"from":"kgc","to":"tdf"},{"from":"kgh","to":"kml"},{"from":"koj","to":"kwv"},{"from":"krm","to":"bmf"},{"from":"ktr","to":"dtp"},{"from":"kvs","to":"gdj"},{"from":"kwq","to":"yam"},{"from":"kxe","to":"tvd"},{"from":"kzj","to":"dtp"},{"from":"kzt","to":"dtp"},{"from":"lii","to":"raq"},{"from":"lmm","to":"rmx"},{"from":"meg","to":"cir"},{"from":"mst","to":"mry"},{"from":"mwj","to":"vaj"},{"from":"myt","to":"mry"},{"from":"nad","to":"xny"},{"from":"ncp","to":"kdz"},{"from":"nnx","to":"ngv"},{"from":"nts","to":"pij"},{"from":"oun","to":"vaj"},{"from":"pcr","to":"adx"},{"from":"pmc","to":"huw"},{"from":"pmu","to":"phr"},{"from":"ppa","to":"bfy"},{"from":"ppr","to":"lcq"},{"from":"pry","to":"prt"},{"from":"puz","to":"pub"},{"from":"sca","to":"hle"},{"from":"skk","to":"oyb"},{"from":"tdu","to":"dtp"},{"from":"thc","to":"tpo"},{"from":"thx","to":"oyb"},{"from":"tie","to":"ras"},{"from":"tkk","to":"twm"},{"from":"tlw","to":"weo"},{"from":"tmp","to":"tyj"},{"from":"tne","to":"kak"},{"from":"tnf","to":"fa-af"},{"from":"tsf","to":"taj"},{"from":"uok","to":"ema"},{"from":"xba","to":"cax"},{"from":"xia","to":"acn"},{"from":"xkh","to":"waw"},{"from":"xsj","to":"suj"},{"from":"ybd","to":"rki"},{"from":"yma","to":"lrr"},{"from":"ymt","to":"mtm"},{"from":"yos","to":"zom"},{"from":"yuu","to":"yug"},{"from":"asd","to":"snz"},{"from":"dit","to":"dif"},{"from":"llo","to":"ngt"},{"from":"myd","to":"aog"},{"from":"nns","to":"nbr"},{"from":"sgn-br","to":"bzs"},{"from":"sgn-co","to":"csn"},{"from":"sgn-de","to":"gsg"},{"from":"sgn-dk","to":"dsl"},{"from":"sgn-fr","to":"fsl"},{"from":"sgn-gb","to":"bfi"},{"from":"sgn-gr","to":"gss"},{"from":"sgn-ie","to":"isg"},{"from":"sgn-it","to":"ise"},{"from":"sgn-jp","to":"jsl"},{"from":"sgn-mx","to":"mfs"},{"from":"sgn-ni","to":"ncs"},{"from":"sgn-nl","to":"dse"},{"from":"sgn-no","to":"nsi"},{"from":"sgn-pt","to":"psr"},{"from":"sgn-se","to":"swl"},{"from":"sgn-us","to":"ase"},{"from":"sgn-za","to":"sfs"},{"from":"no-bokmal","to":"nb"},{"from":"no-nynorsk","to":"nn"},{"from":"aa-saaho","to":"ssy"},{"from":"sh","to":"sr-latn"},{"from":"cnr","to":"sr-me"},{"from":"no","to":"nb"},{"from":"tl","to":"fil"},{"from":"az-az","to":"az-latn-az"},{"from":"bs-ba","to":"bs-latn-ba"},{"from":"ha-latn-gh","to":"ha-gh"},{"from":"ha-latn-ne","to":"ha-ne"},{"from":"ha-latn-ng","to":"ha-ng"},{"from":"kk-cyrl-kz","to":"kk-kz"},{"from":"ky-cyrl-kg","to":"ky-kg"},{"from":"ks-arab-in","to":"ks-in"},{"from":"mn-cyrl-mn","to":"mn-mn"},{"from":"ms-latn-bn","to":"ms-bn"},{"from":"ms-latn-my","to":"ms-my"},{"from":"ms-latn-sg","to":"ms-sg"},{"from":"pa-in","to":"pa-guru-in"},{"from":"pa-pk","to":"pa-arab-pk"},{"from":"shi-ma","to":"shi-tfng-ma"},{"from":"sr-ba","to":"sr-cyrl-ba"},{"from":"sr-me","to":"sr-latn-me"},{"from":"sr-rs","to":"sr-cyrl-rs"},{"from":"sr-xk","to":"sr-cyrl-xk"},{"from":"tzm-latn-ma","to":"tzm-ma"},{"from":"ug-arab-cn","to":"ug-cn"},{"from":"uz-af","to":"uz-arab-af"},{"from":"uz-uz","to":"uz-latn-uz"},{"from":"vai-lr","to":"vai-vaii-lr"},{"from":"yue-cn","to":"yue-hans-cn"},{"from":"yue-hk","to":"yue-hant-hk"},{"from":"zh-cn","to":"zh-hans-cn"},{"from":"zh-hk","to":"zh-hant-hk"},{"from":"zh-mo","to":"zh-hant-mo"},{"from":"zh-sg","to":"zh-hans-sg"},{"from":"zh-tw","to":"zh-hant-tw"},{"from":"aju","to":"jrb"},{"from":"als","to":"sq"},{"from":"arb","to":"ar"},{"from":"ayr","to":"ay"},{"from":"azj","to":"az"},{"from":"bcc","to":"bal"},{"from":"bcl","to":"bik"},{"from":"bxk","to":"luy"},{"from":"bxr","to":"bua"},{"from":"cld","to":"syr"},{"from":"cmn","to":"zh"},{"from":"cwd","to":"cr"},{"from":"dgo","to":"doi"},{"from":"dhd","to":"mwr"},{"from":"dik","to":"din"},{"from":"diq","to":"zza"},{"from":"lbk","to":"bnc"},{"from":"ekk","to":"et"},{"from":"emk","to":"man"},{"from":"esk","to":"ik"},{"from":"fat","to":"ak"},{"from":"fuc","to":"ff"},{"from":"gaz","to":"om"},{"from":"gbo","to":"grb"},{"from":"gno","to":"gon"},{"from":"gug","to":"gn"},{"from":"gya","to":"gba"},{"from":"hdn","to":"hai"},{"from":"hea","to":"hmn"},{"from":"ike","to":"iu"},{"from":"kmr","to":"ku"},{"from":"knc","to":"kr"},{"from":"kng","to":"kg"},{"from":"knn","to":"kok"},{"from":"kpv","to":"kv"},{"from":"lvs","to":"lv"},{"from":"mhr","to":"chm"},{"from":"mup","to":"raj"},{"from":"khk","to":"mn"},{"from":"npi","to":"ne"},{"from":"ojg","to":"oj"},{"from":"ory","to":"or"},{"from":"pbu","to":"ps"},{"from":"pes","to":"fa"},{"from":"plt","to":"mg"},{"from":"pnb","to":"lah"},{"from":"quz","to":"qu"},{"from":"rmy","to":"rom"},{"from":"spy","to":"kln"},{"from":"src","to":"sc"},{"from":"swh","to":"sw"},{"from":"ttq","to":"tmh"},{"from":"tw","to":"ak"},{"from":"umu","to":"del"},{"from":"uzn","to":"uz"},{"from":"xpe","to":"kpe"},{"from":"xsl","to":"den"},{"from":"ydd","to":"yi"},{"from":"zai","to":"zap"},{"from":"zsm","to":"ms"},{"from":"zyb","to":"za"},{"from":"him","to":"srx"},{"from":"mnk","to":"man"},{"from":"bh","to":"bho"},{"from":"prs","to":"fa-af"},{"from":"swc","to":"sw-cd"},{"from":"aar","to":"aa"},{"from":"abk","to":"ab"},{"from":"ave","to":"ae"},{"from":"afr","to":"af"},{"from":"aka","to":"ak"},{"from":"amh","to":"am"},{"from":"arg","to":"an"},{"from":"ara","to":"ar"},{"from":"asm","to":"as"},{"from":"ava","to":"av"},{"from":"aym","to":"ay"},{"from":"aze","to":"az"},{"from":"bak","to":"ba"},{"from":"bel","to":"be"},{"from":"bul","to":"bg"},{"from":"bih","to":"bho"},{"from":"bis","to":"bi"},{"from":"bam","to":"bm"},{"from":"ben","to":"bn"},{"from":"bod","to":"bo"},{"from":"bre","to":"br"},{"from":"bos","to":"bs"},{"from":"cat","to":"ca"},{"from":"che","to":"ce"},{"from":"cha","to":"ch"},{"from":"cos","to":"co"},{"from":"cre","to":"cr"},{"from":"ces","to":"cs"},{"from":"chu","to":"cu"},{"from":"chv","to":"cv"},{"from":"cym","to":"cy"},{"from":"dan","to":"da"},{"from":"deu","to":"de"},{"from":"div","to":"dv"},{"from":"dzo","to":"dz"},{"from":"ewe","to":"ee"},{"from":"ell","to":"el"},{"from":"eng","to":"en"},{"from":"epo","to":"eo"},{"from":"spa","to":"es"},{"from":"est","to":"et"},{"from":"eus","to":"eu"},{"from":"fas","to":"fa"},{"from":"ful","to":"ff"},{"from":"fin","to":"fi"},{"from":"fij","to":"fj"},{"from":"fao","to":"fo"},{"from":"fra","to":"fr"},{"from":"fry","to":"fy"},{"from":"gle","to":"ga"},{"from":"gla","to":"gd"},{"from":"glg","to":"gl"},{"from":"grn","to":"gn"},{"from":"guj","to":"gu"},{"from":"glv","to":"gv"},{"from":"hau","to":"ha"},{"from":"heb","to":"he"},{"from":"hin","to":"hi"},{"from":"hmo","to":"ho"},{"from":"hrv","to":"hr"},{"from":"hat","to":"ht"},{"from":"hun","to":"hu"},{"from":"hye","to":"hy"},{"from":"her","to":"hz"},{"from":"ina","to":"ia"},{"from":"ind","to":"id"},{"from":"ile","to":"ie"},{"from":"ibo","to":"ig"},{"from":"iii","to":"ii"},{"from":"ipk","to":"ik"},{"from":"ido","to":"io"},{"from":"isl","to":"is"},{"from":"ita","to":"it"},{"from":"iku","to":"iu"},{"from":"jpn","to":"ja"},{"from":"jav","to":"jv"},{"from":"kat","to":"ka"},{"from":"kon","to":"kg"},{"from":"kik","to":"ki"},{"from":"kua","to":"kj"},{"from":"kaz","to":"kk"},{"from":"kal","to":"kl"},{"from":"khm","to":"km"},{"from":"kan","to":"kn"},{"from":"kor","to":"ko"},{"from":"kau","to":"kr"},{"from":"kas","to":"ks"},{"from":"kur","to":"ku"},{"from":"kom","to":"kv"},{"from":"cor","to":"kw"},{"from":"kir","to":"ky"},{"from":"lat","to":"la"},{"from":"ltz","to":"lb"},{"from":"lug","to":"lg"},{"from":"lim","to":"li"},{"from":"lin","to":"ln"},{"from":"lao","to":"lo"},{"from":"lit","to":"lt"},{"from":"lub","to":"lu"},{"from":"lav","to":"lv"},{"from":"mlg","to":"mg"},{"from":"mah","to":"mh"},{"from":"mri","to":"mi"},{"from":"mkd","to":"mk"},{"from":"mal","to":"ml"},{"from":"mon","to":"mn"},{"from":"mol","to":"ro"},{"from":"mar","to":"mr"},{"from":"msa","to":"ms"},{"from":"mlt","to":"mt"},{"from":"mya","to":"my"},{"from":"nau","to":"na"},{"from":"nob","to":"nb"},{"from":"nde","to":"nd"},{"from":"nep","to":"ne"},{"from":"ndo","to":"ng"},{"from":"nld","to":"nl"},{"from":"nno","to":"nn"},{"from":"nor","to":"nb"},{"from":"nbl","to":"nr"},{"from":"nav","to":"nv"},{"from":"nya","to":"ny"},{"from":"oci","to":"oc"},{"from":"oji","to":"oj"},{"from":"orm","to":"om"},{"from":"ori","to":"or"},{"from":"oss","to":"os"},{"from":"pan","to":"pa"},{"from":"pli","to":"pi"},{"from":"pol","to":"pl"},{"from":"pus","to":"ps"},{"from":"por","to":"pt"},{"from":"que","to":"qu"},{"from":"roh","to":"rm"},{"from":"run","to":"rn"},{"from":"ron","to":"ro"},{"from":"rus","to":"ru"},{"from":"kin","to":"rw"},{"from":"san","to":"sa"},{"from":"srd","to":"sc"},{"from":"snd","to":"sd"},{"from":"sme","to":"se"},{"from":"sag","to":"sg"},{"from":"hbs","to":"sr-latn"},{"from":"sin","to":"si"},{"from":"slk","to":"sk"},{"from":"slv","to":"sl"},{"from":"smo","to":"sm"},{"from":"sna","to":"sn"},{"from":"som","to":"so"},{"from":"sqi","to":"sq"},{"from":"srp","to":"sr"},{"from":"ssw","to":"ss"},{"from":"sot","to":"st"},{"from":"sun","to":"su"},{"from":"swe","to":"sv"},{"from":"swa","to":"sw"},{"from":"tam","to":"ta"},{"from":"tel","to":"te"},{"from":"tgk","to":"tg"},{"from":"tha","to":"th"},{"from":"tir","to":"ti"},{"from":"tuk","to":"tk"},{"from":"tgl","to":"fil"},{"from":"tsn","to":"tn"},{"from":"ton","to":"to"},{"from":"tur","to":"tr"},{"from":"tso","to":"ts"},{"from":"tat","to":"tt"},{"from":"twi","to":"ak"},{"from":"tah","to":"ty"},{"from":"uig","to":"ug"},{"from":"ukr","to":"uk"},{"from":"urd","to":"ur"},{"from":"uzb","to":"uz"},{"from":"ven","to":"ve"},{"from":"vie","to":"vi"},{"from":"vol","to":"vo"},{"from":"wln","to":"wa"},{"from":"wol","to":"wo"},{"from":"xho","to":"xh"},{"from":"yid","to":"yi"},{"from":"yor","to":"yo"},{"from":"zha","to":"za"},{"from":"zho","to":"zh"},{"from":"zul","to":"zu"},{"from":"alb","to":"sq"},{"from":"arm","to":"hy"},{"from":"baq","to":"eu"},{"from":"bur","to":"my"},{"from":"chi","to":"zh"},{"from":"cze","to":"cs"},{"from":"dut","to":"nl"},{"from":"fre","to":"fr"},{"from":"geo","to":"ka"},{"from":"ger","to":"de"},{"from":"gre","to":"el"},{"from":"ice","to":"is"},{"from":"mac","to":"mk"},{"from":"mao","to":"mi"},{"from":"may","to":"ms"},{"from":"per","to":"fa"},{"from":"rum","to":"ro"},{"from":"slo","to":"sk"},{"from":"tib","to":"bo"},{"from":"wel","to":"cy"}]')},8589:et=>{et.exports=JSON.parse('{"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"}')},858:et=>{et.exports=JSON.parse('["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"]')}},Rr={};function Gn(et){var we=Rr[et];if(we!==void 0)return we.exports;var C=Rr[et]={exports:{}};return Or[et].call(C.exports,C,C.exports,Gn),C.exports}Gn.amdO={},Gn.n=et=>{var we=et&&et.__esModule?()=>et.default:()=>et;return Gn.d(we,{a:we}),we},Gn.d=(et,we)=>{for(var C in we)Gn.o(we,C)&&!Gn.o(et,C)&&Object.defineProperty(et,C,{enumerable:!0,get:we[C]})},Gn.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),Gn.o=(et,we)=>Object.prototype.hasOwnProperty.call(et,we);var Ur={};return(()=>{Gn.d(Ur,{default:()=>g}),Gn(8416);var et,we=Gn(1715),C=Gn(8080),oe=Gn(1737),b=Gn(7688),e=function(){var i,h="application/dash+xml";function _(l,d,P){if(!l||!/^VIDEO$/i.test(l.nodeName))return null;if(l._dashjs_player)return l._dashjs_player;var F,j=l.id||l.name||"video element";if(!(d=d||[].slice.call(l.querySelectorAll("source")).filter(function(U){return U.type==h})[0])&&l.src)(d=document.createElement("source")).src=l.src;else if(!d&&!l.src)return null;return P=P||{},(F=(0,b.Z)(P).create()).initialize(l,d.src,l.autoplay),i||(i=F.getDebug().getLogger()),i.debug("Converted "+j+" to dash.js player and added content: "+d.src),l._dashjs_player=F,F}function n(l){return/^VIDEO$/i.test(l.nodeName)?l:n(l.parentNode)}return{create:_,createAll:function(l,d){var P=[];l=l||"[data-dashjs-player]";for(var F=(d=d||document).querySelectorAll(l),j=0;j<F.length;j++){var U=_(F[j],null);P.push(U)}for(var W=d.querySelectorAll('source[type="'+h+'"]'),D=0;D<W.length;D++){var I=_(n(W[D]),null);P.push(I)}return P}}}();!(typeof window<"u"&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&typeof window<"u"&&window&&window.addEventListener&&(window.document.readyState==="complete"?window.dashjs?e.createAll():et=window.setInterval(function(){window.dashjs&&(window.clearInterval(et),e.createAll())},500):window.addEventListener("load",function i(){window.removeEventListener("load",i),e.createAll()}));const t=e;var S=Gn(6398);dashjs.Protection=oe.default,dashjs.MetricsReporting=C.default,dashjs.MediaPlayerFactory=t,dashjs.Debug=S.Z,dashjs.supportsMediaSource=we.B;const g=dashjs})(),Ur.default})())})(yo);var Ii=yo.exports;function gu(){const tr=yr.useContext(au),or=ou(e=>e.cuedMedia),Or=yr.useRef(null),Rr=su(Or),Gn=uu(Rr),Ur=lu(Rr),et=yr.useRef(),[we,C]=yr.useState(!1),oe=yr.useCallback(()=>{et.current&&(et.current.destroy(),et.current=void 0,C(!1))},[]),b=yr.useCallback(()=>{if(!Ii.supportsMediaSource()){tr.getState().emit("error");return}const e=Ii.MediaPlayer().create();e.on(Ii.MediaPlayer.events.ERROR,t=>{tr.getState().emit("error",{sourceEvent:t})}),e.on(Ii.MediaPlayer.events.PLAYBACK_METADATA_LOADED,()=>{const t=e.getBitrateInfoListFor("video");t!=null&&t.length&&(tr.getState().emit("playbackQualities",{qualities:["auto",...t.map(po)]}),tr.getState().emit("playbackQualityChange",{quality:"auto"}))}),e.initialize(Or.current,void 0,!1),et.current=e,C(!0)},[tr]);return yr.useEffect(()=>(b(),()=>{oe()}),[b,oe]),yr.useEffect(()=>{et.current&&(or!=null&&or.src)&&et.current.attachSource(or.src)},[or==null?void 0:or.src,we]),yr.useEffect(()=>{we&&tr.setState({providerApi:{...Ur,setPlaybackQuality:e=>{if(!et.current)return;const S=et.current.getBitrateInfoListFor("video").findIndex(g=>po(g)===e);et.current.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:S===-1}}}}),S>=0&&et.current.setQualityFor("video",S),tr.getState().emit("playbackQualityChange",{quality:e})}}})},[tr,Ur,we]),iu.jsx("video",{className:"w-full h-full",ref:Or,playsInline:!0,poster:or==null?void 0:or.poster,...Gn})}const po=tr=>tr===-1?"auto":`${tr.height}p`;export{gu as default};
//# sourceMappingURL=dash-provider-df3ec764.js.map
