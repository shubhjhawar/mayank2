import{r as pr,j as iu}from"./main-56ade259.js";import{bw as au,bx as ou,by as su,bz as uu,bA as lu}from"./user-profile-link-0fa7845c.js";import"./OpenInNew-0f1b690b.js";var yo={exports:{}};/*! For license information please see dash.all.min.js.LICENSE.txt */(function(er,sr){(function(Mr,Ir){er.exports=Ir()})(self,function(){return function(){var Mr={4593:function(et,Re){var D,oe,T,t,e,y=function(h){for(var E=[],n=0;n<h.length;++n){var c=h.charCodeAt(n);c<128?E.push(c):c<2048?(E.push(192|c>>6),E.push(128|63&c)):c<65536?(E.push(224|c>>12),E.push(128|63&c>>6),E.push(128|63&c)):(E.push(240|c>>18),E.push(128|63&c>>12),E.push(128|63&c>>6),E.push(128|63&c))}return E},p=function(h){for(var E=[],n=0;n<h.length;){var c=h[n++];c<128||(c<224?(c=(31&c)<<6,c|=63&h[n++]):c<240?(c=(15&c)<<12,c|=(63&h[n++])<<6,c|=63&h[n++]):(c=(7&c)<<18,c|=(63&h[n++])<<12,c|=(63&h[n++])<<6,c|=63&h[n++])),E.push(String.fromCharCode(c))}return E.join("")},u={};D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",oe=function(h){for(var E=0,n=[],c=0|h.length/3;0<c--;){var d=(h[E]<<16)+(h[E+1]<<8)+h[E+2];E+=3,n.push(D.charAt(63&d>>18)),n.push(D.charAt(63&d>>12)),n.push(D.charAt(63&d>>6)),n.push(D.charAt(63&d))}return h.length-E==2?(d=(h[E]<<16)+(h[E+1]<<8),n.push(D.charAt(63&d>>18)),n.push(D.charAt(63&d>>12)),n.push(D.charAt(63&d>>6)),n.push("=")):h.length-E==1&&(d=h[E]<<16,n.push(D.charAt(63&d>>18)),n.push(D.charAt(63&d>>12)),n.push("==")),n.join("")},T=function(){for(var h=[],E=0;E<D.length;++E)h[D.charCodeAt(E)]=E;return h["=".charCodeAt(0)]=0,h}(),t=function(h){for(var E=0,n=[],c=0|h.length/4;0<c--;){var d=(T[h.charCodeAt(E)]<<18)+(T[h.charCodeAt(E+1)]<<12)+(T[h.charCodeAt(E+2)]<<6)+T[h.charCodeAt(E+3)];n.push(255&d>>16),n.push(255&d>>8),n.push(255&d),E+=4}return n&&(h.charAt(E-2)=="="?(n.pop(),n.pop()):h.charAt(E-1)=="="&&n.pop()),n},e={encode:function(h){for(var E=[],n=0;n<h.length;++n)E.push(h.charCodeAt(n));return E},decode:function(h){for(var E=0;E<s.length;++E)a[E]=String.fromCharCode(a[E]);return a.join("")}},u.decodeArray=function(h){var E=t(h);return new Uint8Array(E)},u.encodeASCII=function(h){var E=e.encode(h);return oe(E)},u.decodeASCII=function(h){var E=t(h);return e.decode(E)},u.encode=function(h){var E=y(h);return oe(E)},u.decode=function(h){var E=t(h);return p(E)},Re.decode=u.decode,Re.decodeArray=u.decodeArray,Re.encode=u.encode,Re.encodeASCII=u.encodeASCII},452:function(et,Re){(function(D){var oe={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},T=function(O){var z=O;return oe.hasOwnProperty(O)&&(z=oe[O]),String.fromCharCode(z)},t=15,e=32,y={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},p={17:2,18:4,21:6,22:8,23:10,19:13,20:15},u={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},h={25:2,26:4,29:6,30:8,31:10,27:13,28:15},E=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],n={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(O){this.time=O},log:function(O,z){var te=this.verboseFilter[O];this.verboseLevel>=te&&console.log(this.time+" ["+O+"] "+z)}},c=function(O){for(var z=[],te=0;te<O.length;te++)z.push(O[te].toString(16));return z},d=function(O,z,te,V,ee){this.foreground=O||"white",this.underline=z||!1,this.italics=te||!1,this.background=V||"black",this.flash=ee||!1};d.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(O){for(var z=["foreground","underline","italics","background","flash"],te=0;te<z.length;te++){var V=z[te];O.hasOwnProperty(V)&&(this[V]=O[V])}},isDefault:function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},equals:function(O){return this.foreground===O.foreground&&this.underline===O.underline&&this.italics===O.italics&&this.background===O.background&&this.flash===O.flash},copy:function(O){this.foreground=O.foreground,this.underline=O.underline,this.italics=O.italics,this.background=O.background,this.flash=O.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var C=function(O,z,te,V,ee,ce){this.uchar=O||" ",this.penState=new d(z,te,V,ee,ce)};C.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(O,z){this.uchar=O,this.penState.copy(z)},setPenState:function(O){this.penState.copy(O)},equals:function(O){return this.uchar===O.uchar&&this.penState.equals(O.penState)},copy:function(O){this.uchar=O.uchar,this.penState.copy(O.penState)},isEmpty:function(){return this.uchar===" "&&this.penState.isDefault()}};var Z=function(){this.chars=[];for(var O=0;O<e;O++)this.chars.push(new C);this.pos=0,this.currPenState=new d};Z.prototype={equals:function(O){for(var z=!0,te=0;te<e;te++)if(!this.chars[te].equals(O.chars[te])){z=!1;break}return z},copy:function(O){for(var z=0;z<e;z++)this.chars[z].copy(O.chars[z])},isEmpty:function(){for(var O=!0,z=0;z<e;z++)if(!this.chars[z].isEmpty()){O=!1;break}return O},setCursor:function(O){this.pos!==O&&(this.pos=O),this.pos<0?(n.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>e&&(n.log("ERROR","Too large cursor position "+this.pos),this.pos=e)},moveCursor:function(O){var z=this.pos+O;if(O>1)for(var te=this.pos+1;te<z+1;te++)this.chars[te].setPenState(this.currPenState);this.setCursor(z)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(O){O>=144&&this.backSpace();var z=T(O);this.pos>=e?n.log("ERROR","Cannot insert "+O.toString(16)+" ("+z+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(z,this.currPenState),this.moveCursor(1))},clearFromPos:function(O){var z;for(z=O;z<e;z++)this.chars[z].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var O=[],z=!0,te=0;te<e;te++){var V=this.chars[te].uchar;V!==" "&&(z=!1),O.push(V)}return z?"":O.join("")},setPenStyles:function(O){this.currPenState.setStyles(O),this.chars[this.pos].setPenState(this.currPenState)}};var k=function(){this.rows=[];for(var O=0;O<t;O++)this.rows.push(new Z);this.currRow=14,this.nrRollUpRows=null,this.reset()};k.prototype={reset:function(){for(var O=0;O<t;O++)this.rows[O].clear();this.currRow=14},equals:function(O){for(var z=!0,te=0;te<t;te++)if(!this.rows[te].equals(O.rows[te])){z=!1;break}return z},copy:function(O){for(var z=0;z<t;z++)this.rows[z].copy(O.rows[z])},isEmpty:function(){for(var O=!0,z=0;z<t;z++)if(!this.rows[z].isEmpty()){O=!1;break}return O},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(O){this.rows[this.currRow].insertChar(O)},setPen:function(O){this.rows[this.currRow].setPenStyles(O)},moveCursor:function(O){this.rows[this.currRow].moveCursor(O)},setCursor:function(O){n.log("INFO","setCursor: "+O),this.rows[this.currRow].setCursor(O)},setPAC:function(O){n.log("INFO","pacData = "+JSON.stringify(O));var z=O.row-1;this.nrRollUpRows&&z<this.nrRollUpRows-1&&(z=this.nrRollUpRows-1),this.currRow=z;var te=this.rows[this.currRow];if(O.indent!==null){var V=O.indent,ee=Math.max(V-1,0);te.setCursor(O.indent),O.color=te.chars[ee].penState.foreground}var ce={foreground:O.color,underline:O.underline,italics:O.italics,background:"black",flash:!1};this.setPen(ce)},setBkgData:function(O){n.log("INFO","bkgData = "+JSON.stringify(O)),this.backSpace(),this.setPen(O),this.insertChar(32)},setRollUpRows:function(O){this.nrRollUpRows=O},rollUp:function(){if(this.nrRollUpRows!==null){n.log("TEXT",this.getDisplayText());var O=this.currRow+1-this.nrRollUpRows,z=this.rows.splice(O,1)[0];z.clear(),this.rows.splice(this.currRow,0,z),n.log("INFO","Rolling up")}else n.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(O){O=O||!1;for(var z=[],te="",V=-1,ee=0;ee<t;ee++){var ce=this.rows[ee].getTextString();ce&&(V=ee+1,O?z.push("Row "+V+': "'+ce+'"'):z.push(ce.trim()))}return z.length>0&&(te=O?"["+z.join(" | ")+"]":z.join(`
`)),te},getTextAndFormat:function(){return this.rows}};var x=function(O,z){this.chNr=O,this.outputFilter=z,this.mode=null,this.verbose=0,this.displayedMemory=new k,this.nonDisplayedMemory=new k,this.lastOutputScreen=new k,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};x.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(O){this.outputFilter=O},setPAC:function(O){this.writeScreen.setPAC(O)},setBkgData:function(O){this.writeScreen.setBkgData(O)},setMode:function(O){O!==this.mode&&(this.mode=O,n.log("INFO","MODE="+O),this.mode=="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=O)},insertChars:function(O){for(var z=0;z<O.length;z++)this.writeScreen.insertChar(O[z]);var te=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";n.log("INFO",te+": "+this.writeScreen.getDisplayText(!0)),this.mode!=="MODE_PAINT-ON"&&this.mode!=="MODE_ROLL-UP"||(n.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){n.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){n.log("INFO","BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){n.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(O){n.log("INFO","RU("+O+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(O)},cc_FON:function(){n.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){n.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){n.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){n.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){n.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){n.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){n.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(n.log("INFO","EOC - End Of Caption"),this.mode==="MODE_POP-ON"){var O=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=O,this.writeScreen=this.nonDisplayedMemory,n.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(O){n.log("INFO","TO("+O+") - Tab Offset"),this.writeScreen.moveCursor(O)},cc_MIDROW:function(O){var z={flash:!1};if(z.underline=O%2==1,z.italics=O>=46,z.italics)z.foreground="white";else{var te=Math.floor(O/2)-16;z.foreground=["white","green","blue","cyan","red","yellow","magenta"][te]}n.log("INFO","MIDROW: "+JSON.stringify(z)),this.writeScreen.setPen(z)},outputDataUpdate:function(){var O=n.time;O!==null&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(O,this.displayedMemory),this.cueStartTime!==null||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,O,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:O):this.cueStartTime=O,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(O){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,O,this.displayedMemory),this.cueStartTime=O))}};var ne=function(O,z,te){this.field=O||1,this.outputs=[z,te],this.channels=[new x(1,z),new x(2,te)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};ne.prototype={getHandler:function(O){return this.channels[O].getHandler()},setHandler:function(O,z){this.channels[O].setHandler(z)},addData:function(O,z){var te,V,ee,ce=!1;this.lastTime=O,n.setTime(O);for(var Ee=0;Ee<z.length;Ee+=2)V=127&z[Ee],ee=127&z[Ee+1],V>=16&&V<=31&&V===this.lastCmdA&&ee===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,n.log("DEBUG","Repeated command ("+c([V,ee])+") is dropped")):V!==0||ee!==0?(n.log("DATA","["+c([z[Ee],z[Ee+1]])+"] -> ("+c([V,ee])+")"),(te=this.parseCmd(V,ee))||(te=this.parseMidrow(V,ee)),te||(te=this.parsePAC(V,ee)),te||(te=this.parseBackgroundAttributes(V,ee)),te||(ce=this.parseChars(V,ee))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(ce):n.log("WARNING","No channel found yet. TEXT-MODE?")),te?this.dataCounters.cmd+=2:ce?this.dataCounters.char+=2:(this.dataCounters.other+=2,n.log("WARNING","Couldn't parse cleaned data "+c([V,ee])+" orig: "+c([z[Ee],z[Ee+1]])))):this.dataCounters.padding+=2},parseCmd:function(O,z){var te;if(!((O===20||O===21||O===28||O===29)&&32<=z&&z<=47||(O===23||O===31)&&33<=z&&z<=35))return!1;te=O===20||O===21||O===23?1:2;var V=this.channels[te-1];return O===20||O===21||O===28||O===29?z===32?V.cc_RCL():z===33?V.cc_BS():z===34?V.cc_AOF():z===35?V.cc_AON():z===36?V.cc_DER():z===37?V.cc_RU(2):z===38?V.cc_RU(3):z===39?V.cc_RU(4):z===40?V.cc_FON():z===41?V.cc_RDC():z===42?V.cc_TR():z===43?V.cc_RTD():z===44?V.cc_EDM():z===45?V.cc_CR():z===46?V.cc_ENM():z===47&&V.cc_EOC():V.cc_TO(z-32),this.lastCmdA=O,this.lastCmdB=z,this.currChNr=te,!0},parseMidrow:function(O,z){var te=null;if((O===17||O===25)&&32<=z&&z<=47){if((te=O===17?1:2)!==this.currChNr)return n.log("ERROR","Mismatch channel in midrow parsing"),!1;var V=this.channels[te-1];return V.insertChars([32]),V.cc_MIDROW(z),n.log("DEBUG","MIDROW ("+c([O,z])+")"),this.lastCmdA=O,this.lastCmdB=z,!0}return!1},parsePAC:function(O,z){var te,V;if(!((17<=O&&O<=23||25<=O&&O<=31)&&64<=z&&z<=127||(O===16||O===24)&&64<=z&&z<=95))return!1;te=O<=23?1:2,V=64<=z&&z<=95?te===1?y[O]:u[O]:te===1?p[O]:h[O];var ee=this.interpretPAC(V,z);return this.channels[te-1].setPAC(ee),this.lastCmdA=O,this.lastCmdB=z,this.currChNr=te,!0},interpretPAC:function(O,z){var te,V={color:null,italics:!1,indent:null,underline:!1,row:O};return te=z>95?z-96:z-64,V.underline=(1&te)==1,te<=13?V.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(te/2)]:te<=15?(V.italics=!0,V.color="white"):V.indent=4*Math.floor((te-16)/2),V},parseChars:function(O,z){var te=null,V=null,ee=null;if(O>=25?(te=2,ee=O-8):(te=1,ee=O),17<=ee&&ee<=19){var ce;ce=ee===17?z+80:ee===18?z+112:z+144,n.log("INFO","Special char '"+T(ce)+"' in channel "+te),V=[ce],this.lastCmdA=O,this.lastCmdB=z}else 32<=O&&O<=127&&(V=z===0?[O]:[O,z],this.lastCmdA=null,this.lastCmdB=null);if(V){var Ee=c(V);n.log("DEBUG","Char codes =  "+Ee.join(","))}return V},parseBackgroundAttributes:function(O,z){var te,V,ee;return((O===16||O===24)&&32<=z&&z<=47||(O===23||O===31)&&45<=z&&z<=47)&&(te={},O===16||O===24?(V=Math.floor((z-32)/2),te.background=E[V],z%2==1&&(te.background=te.background+"_semi")):z===45?te.background="transparent":(te.foreground="black",z===47&&(te.underline=!0)),ee=O<24?1:2,this.channels[ee-1].setBkgData(te),this.lastCmdA=O,this.lastCmdB=z,!0)},reset:function(){for(var O=0;O<this.channels.length;O++)this.channels[O]&&this.channels[O].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(O){for(var z=0;z<this.channels.length;z++)this.channels[z]&&this.channels[z].cueSplitAtTime(O)}},D.logger=n,D.PenState=d,D.CaptionScreen=k,D.Cea608Parser=ne,D.findCea608Nalus=function(O,z,te){for(var V=0,ee=z,ce=[],Ee=function(ye,ke,Ke,tt){if(ye!==4||ke<8)return null;var ve=Ke.getUint8(tt),Fe=Ke.getUint16(tt+1),pt=Ke.getUint32(tt+3),ft=Ke.getUint8(tt+7);return ve==181&&Fe==49&&pt==1195456820&&ft==3};ee<z+te;){if(V=O.getUint32(ee),(31&O.getUint8(ee+4))==6)for(var $=ee+5,Ie=-1;$<ee+4+V-1;){Ie=0;for(var Ze=255;Ze===255;)Ie+=Ze=O.getUint8($),$++;var Ve=0;for(Ze=255;Ze===255;)Ve+=Ze=O.getUint8($),$++;Ee(Ie,Ve,O,$)&&ce.push([$,Ve]),$+=Ve}ee+=V+4}return ce},D.extractCea608DataFromRange=function(O,z){var te=z[0],V=[[],[]];te+=8;var ee=31&O.getUint8(te);te+=2;for(var ce=0;ce<ee;ce++){var Ee=O.getUint8(te),$=4&Ee,Ie=3&Ee;te++;var Ze=O.getUint8(te);te++;var Ve=O.getUint8(te);te++,$&&(127&Ze)+(127&Ve)!=0&&(Ie===0?(V[0].push(Ze),V[0].push(Ve)):Ie===1&&(V[1].push(Ze),V[1].push(Ve)))}return V}})(Re)},8416:function(et,Re,D){var oe=D(7688),T=D(5448),t=D(6398),e=D(2032),y=(D(5530),typeof window<"u"&&window||D.g),p=y.dashjs;p||(p=y.dashjs={}),p.MediaPlayer=oe.Z,p.FactoryMaker=T.Z,p.Debug=t.Z,p.Version=(0,e.e)()},6398:function(et,Re,D){var oe=D(5595),T=D(8512),t=D(5448),e=1,y=2,p=3,u=4,h=5;function E(c){c=c||{};var d,C,Z,k,x=this.context,ne=(0,oe.Z)(x).getInstance(),O=c.settings,z=[];function te(Ze){return Ze&&Ze.bind?Ze.bind(window.console):window.console.log.bind(window.console)}function V(){for(var Ze=arguments.length,Ve=new Array(Ze),ye=0;ye<Ze;ye++)Ve[ye]=arguments[ye];Ie.apply(void 0,[e,this].concat(Ve))}function ee(){for(var Ze=arguments.length,Ve=new Array(Ze),ye=0;ye<Ze;ye++)Ve[ye]=arguments[ye];Ie.apply(void 0,[y,this].concat(Ve))}function ce(){for(var Ze=arguments.length,Ve=new Array(Ze),ye=0;ye<Ze;ye++)Ve[ye]=arguments[ye];Ie.apply(void 0,[p,this].concat(Ve))}function Ee(){for(var Ze=arguments.length,Ve=new Array(Ze),ye=0;ye<Ze;ye++)Ve[ye]=arguments[ye];Ie.apply(void 0,[u,this].concat(Ve))}function $(){for(var Ze=arguments.length,Ve=new Array(Ze),ye=0;ye<Ze;ye++)Ve[ye]=arguments[ye];Ie.apply(void 0,[h,this].concat(Ve))}function Ie(Ze,Ve){var ye="",ke=null;C&&(ke=new Date().getTime(),ye+="["+(ke-k)+"]"),Z&&Ve&&Ve.getClassName&&(ye+="["+Ve.getClassName()+"]",Ve.getType&&(ye+="["+Ve.getType()+"]")),ye.length>0&&(ye+=" ");for(var Ke=arguments.length,tt=new Array(Ke>2?Ke-2:0),ve=2;ve<Ke;ve++)tt[ve-2]=arguments[ve];Array.apply(null,tt).forEach(function(Fe){ye+=Fe+" "}),z[Ze]&&O&&O.get().debug.logLevel>=Ze&&z[Ze](ye),O&&O.get().debug.dispatchEvent&&ne.trigger(T.Z.LOG,{message:ye,level:Ze})}return d={getLogger:function(Ze){return{fatal:V.bind(Ze),error:ee.bind(Ze),warn:ce.bind(Ze),info:Ee.bind(Ze),debug:$.bind(Ze)}},setLogTimestampVisible:function(Ze){C=Ze},setCalleeNameVisible:function(Ze){Z=Ze}},C=!0,Z=!0,k=new Date().getTime(),typeof window<"u"&&window.console&&(z[e]=te(window.console.error),z[y]=te(window.console.error),z[p]=te(window.console.warn),z[u]=te(window.console.info),z[h]=te(window.console.debug)),d}E.__dashjs_factory_name="Debug";var n=t.Z.getSingletonFactory(E);n.LOG_LEVEL_NONE=0,n.LOG_LEVEL_FATAL=e,n.LOG_LEVEL_ERROR=y,n.LOG_LEVEL_WARNING=p,n.LOG_LEVEL_INFO=u,n.LOG_LEVEL_DEBUG=h,t.Z.updateSingletonFactory(E.__dashjs_factory_name,n),Re.Z=n},5595:function(et,Re,D){var oe=D(5448),T=D(8825);function t(){var y={};function p(h,E,n){var c=-1;return y[h]&&y[h].some(function(d,C){if(d&&d.callback===E&&(!n||n===d.scope))return c=C,!0}),c}var u={on:function(h,E,n){var c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(!h)throw new Error("event type cannot be null or undefined");if(!E||typeof E!="function")throw new Error("listener must be a function: "+E);var d=c.priority||0;if(!(p(h,E,n)>=0)){y[h]=y[h]||[];var C={callback:E,scope:n,priority:d};n&&n.getStreamId&&(C.streamId=n.getStreamId()),n&&n.getType&&(C.mediaType=n.getType()),c&&c.mode&&(C.mode=c.mode);var Z=y[h].some(function(k,x){if(k&&d>k.priority)return y[h].splice(x,0,C),!0});Z||y[h].push(C)}},off:function(h,E,n){if(h&&E&&y[h]){var c=p(h,E,n);c<0||(y[h][c]=null)}},trigger:function(h){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(h&&y[h]){if((E=E||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");E.type=h,n.streamId&&(E.streamId=n.streamId),n.mediaType&&(E.mediaType=n.mediaType),y[h].filter(function(c){return!(!c||n.streamId&&c.streamId&&c.streamId!==n.streamId||n.mediaType&&c.mediaType&&c.mediaType!==n.mediaType||n.mode&&c.mode&&c.mode!==n.mode||!c.mode&&n.mode&&n.mode===T.Z.EVENT_MODE_ON_RECEIVE)}).forEach(function(c){return c&&c.callback.call(c.scope,E)})}},reset:function(){y={}}};return u}t.__dashjs_factory_name="EventBus";var e=oe.Z.getSingletonFactory(t);e.EVENT_PRIORITY_LOW=0,e.EVENT_PRIORITY_HIGH=5e3,oe.Z.updateSingletonFactory(t.__dashjs_factory_name,e),Re.Z=e},5448:function(et,Re){var D=function(){var oe,T=[],t={},e={};function y(E,n){for(var c in T){var d=T[c];if(d.context===E&&d.name===n)return d.instance}return null}function p(E,n){return n[E]}function u(E,n,c){E in c&&(c[E]=n)}function h(E,n,c){var d,C=E.__dashjs_factory_name,Z=n[C];if(Z){var k=Z.instance;if(!Z.override)return k.apply({context:n,factory:oe},c);for(var x in d=E.apply({context:n},c),k=k.apply({context:n,factory:oe,parent:d},c))d.hasOwnProperty(x)&&(d[x]=k[x])}else d=E.apply({context:n},c);return d.getClassName=function(){return C},d}return oe={extend:function(E,n,c,d){!d[E]&&n&&(d[E]={instance:n,override:c})},getSingletonInstance:y,setSingletonInstance:function(E,n,c){for(var d in T){var C=T[d];if(C.context===E&&C.name===n)return void(T[d].instance=c)}T.push({name:n,context:E,instance:c})},deleteSingletonInstances:function(E){T=T.filter(function(n){return n.context!==E})},getSingletonFactory:function(E){var n=p(E.__dashjs_factory_name,t);return n||(n=function(c){var d;return c===void 0&&(c={}),{getInstance:function(){return d||(d=y(c,E.__dashjs_factory_name)),d||(d=h(E,c,arguments),T.push({name:E.__dashjs_factory_name,context:c,instance:d})),d}}},t[E.__dashjs_factory_name]=n),n},getSingletonFactoryByName:function(E){return p(E,t)},updateSingletonFactory:function(E,n){u(E,n,t)},getClassFactory:function(E){var n=p(E.__dashjs_factory_name,e);return n||(n=function(c){return c===void 0&&(c={}),{create:function(){return h(E,c,arguments)}}},e[E.__dashjs_factory_name]=n),n},getClassFactoryByName:function(E){return p(E,e)},updateClassFactory:function(E,n){u(E,n,e)}},oe}();Re.Z=D},1264:function(et,Re,D){var oe=D(5448),T=D(703),t=D(6398),e=D(3393),y=D(7855),p=D(5595),u=D(8512);function h(d){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},h(d)}function E(d,C,Z){return C in d?Object.defineProperty(d,C,{value:Z,enumerable:!0,configurable:!0,writable:!0}):d[C]=Z,d}function n(){var d,C,Z=this.context,k=(0,p.Z)(Z).getInstance(),x={"streaming.delay.liveDelay":u.Z.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":u.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":u.Z.SETTING_UPDATED_CATCHUP_ENABLED,"streaming.liveCatchup.playbackRate.min":u.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,"streaming.liveCatchup.playbackRate.max":u.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX},ne={debug:{logLevel:t.Z.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,applyContentSteering:!0,eventControllerRefreshDelay:100,enableManifestDurationMismatchFix:!0,parseInbandPrft:!1,enableManifestTimescaleMismatchFix:!1,capabilities:{filterUnsupportedEssentialProperties:!0,useMediaCapabilitiesApi:!1},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:!0,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,stableBufferTime:12,longFormContentDurationThreshold:600,stallThreshold:.3,useAppendWindow:!0,setStallState:!0,avoidCurrentTimeRangePruning:!1,useChangeTypeForTrackSwitch:!0,mediaSourceDurationInfinity:!0,resetSourceBuffersForTrackSwitch:!1},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0,extendSegmentedCues:!0,webvtt:{customRenderingEnabled:!1}},liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN},playbackBufferMin:.5,enabled:null,mode:e.Z.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},saveLastMediaSettingsForCurrentStreamingSession:!0,cacheLoadThresholds:{video:50,audio:5},trackSwitchMode:{audio:e.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:e.Z.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:e.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY,fragmentRequestTimeout:2e4,fragmentRequestProgressTimeout:-1,manifestRequestTimeout:1e4,retryIntervals:(d={},E(d,y.w.MPD_TYPE,500),E(d,y.w.XLINK_EXPANSION_TYPE,500),E(d,y.w.MEDIA_SEGMENT_TYPE,1e3),E(d,y.w.INIT_SEGMENT_TYPE,1e3),E(d,y.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),E(d,y.w.INDEX_SEGMENT_TYPE,1e3),E(d,y.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,1e3),E(d,y.w.LICENSE,1e3),E(d,y.w.OTHER_TYPE,1e3),E(d,"lowLatencyReductionFactor",10),d),retryAttempts:(C={},E(C,y.w.MPD_TYPE,3),E(C,y.w.XLINK_EXPANSION_TYPE,1),E(C,y.w.MEDIA_SEGMENT_TYPE,3),E(C,y.w.INIT_SEGMENT_TYPE,3),E(C,y.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),E(C,y.w.INDEX_SEGMENT_TYPE,3),E(C,y.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,3),E(C,y.w.LICENSE,3),E(C,y.w.OTHER_TYPE,3),E(C,"lowLatencyMultiplyFactor",5),C),abr:{movingAverageMethod:e.Z.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:e.Z.ABR_STRATEGY_DYNAMIC,additionalAbrRules:{insufficientBufferRule:!0,switchHistoryRule:!0,droppedFramesRule:!0,abandonRequestsRule:!0},abrRulesParameters:{abandonRequestsRule:{graceTimeThreshold:500,abandonMultiplier:1.8,minLengthToAverage:5}},bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0},fetchThroughputCalculationMode:e.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING},cmcd:{enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:e.Z.CMCD_MODE_QUERY,enabledKeys:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"]},cmsd:{enabled:!1,abr:{applyMb:!1,etpWeightRatio:0}}},errors:{recoverAttempts:{mediaErrorDecode:5}}},O=T.Z.clone(ne);function z(te,V,ee){for(var ce in te)te.hasOwnProperty(ce)&&(V.hasOwnProperty(ce)?h(te[ce])!=="object"||te[ce]instanceof Array||te[ce]===null?(V[ce]=T.Z.clone(te[ce]),x[ee+ce]&&k.trigger(x[ee+ce])):z(te[ce],V[ce],ee.slice()+ce+"."):console.error("Settings parameter "+ee+ce+" is not supported"))}return{get:function(){return O},update:function(te){h(te)==="object"&&z(te,O,"")},reset:function(){O=T.Z.clone(ne)}}}n.__dashjs_factory_name="Settings";var c=oe.Z.getSingletonFactory(n);Re.Z=c},703:function(et,Re,D){var oe=D(3875),T=D.n(oe),t=D(1067);function e(u){return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},e(u)}function y(u,h){for(var E=0;E<h.length;E++){var n=h[E];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(u,n.key,n)}}var p=function(){function u(){(function(n,c){if(!(n instanceof c))throw new TypeError("Cannot call a class as a function")})(this,u)}var h,E;return h=u,E=[{key:"mixin",value:function(n,c,d){var C,Z={};if(n)for(var k in c)c.hasOwnProperty(k)&&(C=c[k],k in n&&(n[k]===C||k in Z&&Z[k]===C)||(e(n[k])==="object"&&n[k]!==null?n[k]=u.mixin(n[k],C,d):n[k]=d(C)));return n}},{key:"clone",value:function(n){if(!n||e(n)!=="object")return n;var c;if(n instanceof Array){c=[];for(var d=0,C=n.length;d<C;++d)d in n&&c.push(u.clone(n[d]))}else c={};return u.mixin(c,n,u.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(n,c){try{if(!c||c.length===0)return n;var d=new URL(n);return c.forEach(function(C){C.key&&C.value&&d.searchParams.set(C.key,C.value)}),d.href}catch{return n}}},{key:"parseHttpHeaders",value:function(n){var c={};if(!n)return c;for(var d=n.trim().split(`\r
`),C=0,Z=d.length;C<Z;C++){var k=d[C],x=k.indexOf(": ");x>0&&(c[k.substring(0,x)]=k.substring(x+2))}return c}},{key:"generateUuid",value:function(){var n=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var d=(n+16*Math.random())%16|0;return n=Math.floor(n/16),(c=="x"?d:3&d|8).toString(16)})}},{key:"generateHashCode",value:function(n){var c=0;if(n.length===0)return c;for(var d=0;d<n.length;d++)c=(c<<5)-c+n.charCodeAt(d),c|=0;return c}},{key:"getRelativeUrl",value:function(n,c){try{var d=new URL(n),C=new URL(c);if(d.protocol=C.protocol,d.origin!==C.origin)return c;var Z=T().relative(d.pathname.substr(0,d.pathname.lastIndexOf("/")),C.pathname.substr(0,C.pathname.lastIndexOf("/"))),k=Z.length===0?1:0;return Z+=C.pathname.substr(C.pathname.lastIndexOf("/")+k,C.pathname.length-1),C.pathname.length<Z.length?C.pathname:Z}catch{return c}}},{key:"parseUserAgent",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{var c=n===null&&typeof navigator<"u"?navigator.userAgent.toLowerCase():"";return(0,t.UAParser)(c)}catch{return{}}}},{key:"stringHasProtocol",value:function(n){return/(http(s?)):\/\//i.test(n)}}],E&&y(h,E),u}();Re.Z=p},2032:function(et,Re,D){function oe(){return"4.7.3"}D.d(Re,{e:function(){return oe}})},2230:function(et,Re){function D(T,t){for(var e=0;e<t.length;e++){var y=t[e];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(T,y.key,y)}}var oe=function(){function T(){(function(y,p){if(!(y instanceof p))throw new TypeError("Cannot call a class as a function")})(this,T)}var t,e;return t=T,(e=[{key:"extend",value:function(y,p){if(y){var u=!!p&&p.override,h=!!p&&p.publicOnly;for(var E in y)!y.hasOwnProperty(E)||this[E]&&!u||h&&y[E].indexOf("public_")===-1||(this[E]=y[E])}}}])&&D(t.prototype,e),T}();Re.Z=oe},4351:function(et,Re,D){function oe(p){return oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},oe(p)}function T(p,u){return T=Object.setPrototypeOf||function(h,E){return h.__proto__=E,h},T(p,u)}function t(p,u){return!u||oe(u)!=="object"&&typeof u!="function"?function(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}(p):u}function e(p){return e=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)},e(p)}var y=function(p){(function(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&T(c,d)})(n,p);var u,h,E=(u=n,h=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var c,d=e(u);if(h){var C=e(this).constructor;c=Reflect.construct(d,arguments,C)}else c=d.apply(this,arguments);return t(this,c)});function n(){var c;return function(d,C){if(!(d instanceof C))throw new TypeError("Cannot call a class as a function")}(this,n),(c=E.call(this)).ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",c.BUFFERING_COMPLETED="bufferingCompleted",c.BUFFER_CLEARED="bufferCleared",c.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",c.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",c.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",c.CMSD_STATIC_HEADER="cmsdStaticHeader",c.CURRENT_TRACK_CHANGED="currentTrackChanged",c.DATA_UPDATE_COMPLETED="dataUpdateCompleted",c.INBAND_EVENTS="inbandEvents",c.INITIAL_STREAM_SWITCH="initialStreamSwitch",c.INIT_FRAGMENT_LOADED="initFragmentLoaded",c.INIT_FRAGMENT_NEEDED="initFragmentNeeded",c.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",c.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",c.LOADING_COMPLETED="loadingCompleted",c.LOADING_PROGRESS="loadingProgress",c.LOADING_DATA_PROGRESS="loadingDataProgress",c.LOADING_ABANDONED="loadingAborted",c.MANIFEST_UPDATED="manifestUpdated",c.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",c.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",c.QUOTA_EXCEEDED="quotaExceeded",c.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",c.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",c.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD="serviceLocationBlacklistAdd",c.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",c.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD="serviceLocationLocationBlacklistAdd",c.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED="serviceLocationLocationBlacklistChanged",c.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",c.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",c.SOURCE_BUFFER_ERROR="sourceBufferError",c.STREAMS_COMPOSED="streamsComposed",c.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",c.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",c.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",c.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",c.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",c.URL_RESOLUTION_FAILED="urlResolutionFailed",c.VIDEO_CHUNK_RECEIVED="videoChunkReceived",c.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",c.XLINK_ELEMENT_LOADED="xlinkElementLoaded",c.XLINK_READY="xlinkReady",c.SEEK_TARGET="seekTarget",c.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",c.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",c.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",c.SETTING_UPDATED_PLAYBACK_RATE_MIN="settingUpdatedPlaybackRateMin",c.SETTING_UPDATED_PLAYBACK_RATE_MAX="settingUpdatedPlaybackRateMax",c}return n}(D(8342).Z);Re.Z=y},8512:function(et,Re,D){function oe(h){return oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},oe(h)}function T(h,E){if(!(h instanceof E))throw new TypeError("Cannot call a class as a function")}function t(h,E){return t=Object.setPrototypeOf||function(n,c){return n.__proto__=c,n},t(h,E)}function e(h,E){return!E||oe(E)!=="object"&&typeof E!="function"?function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(h):E}function y(h){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(E){return E.__proto__||Object.getPrototypeOf(E)},y(h)}var p=function(h){(function(C,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Super expression must either be null or a function");C.prototype=Object.create(Z&&Z.prototype,{constructor:{value:C,writable:!0,configurable:!0}}),Z&&t(C,Z)})(d,h);var E,n,c=(E=d,n=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var C,Z=y(E);if(n){var k=y(this).constructor;C=Reflect.construct(Z,arguments,k)}else C=Z.apply(this,arguments);return e(this,C)});function d(){return T(this,d),c.apply(this,arguments)}return d}(D(4351).Z),u=new p;Re.Z=u},8342:function(et,Re){function D(T,t){for(var e=0;e<t.length;e++){var y=t[e];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(T,y.key,y)}}var oe=function(){function T(){(function(y,p){if(!(y instanceof p))throw new TypeError("Cannot call a class as a function")})(this,T)}var t,e;return t=T,(e=[{key:"extend",value:function(y,p){if(y){var u=!!p&&p.override,h=!!p&&p.publicOnly;for(var E in y)!y.hasOwnProperty(E)||this[E]&&!u||h&&y[E].indexOf("public_")===-1||(this[E]=y[E])}}}])&&D(t.prototype,e),T}();Re.Z=oe},9326:function(et,Re,D){var oe=D(3186),T=D(7855),t=D(5448),e=D(8825),y=D(7387),p=D(1553);function u(h){var E,n,c,d,C,Z=(h=h||{}).eventBus,k=h.debug,x=h.urlUtils,ne=h.type,O=h.streamInfo,z=h.segmentsController,te=h.timelineConverter,V=h.baseURLController;function ee(){return ne}function ce(){c=null}function Ee(ye,ke,Ke){var tt,ve,Fe=V.resolve(Ke.path),pt={};return Fe&&ke!==Fe.url&&x.isRelative(ke)?(tt=Fe.url,ve=Fe.serviceLocation,pt=Fe.queryParams,ke&&(tt=x.resolve(ke,tt))):tt=ke,!x.isRelative(tt)&&(ye.url=tt,ye.serviceLocation=ve,ye.queryParams=pt,!0)}function $(ye,ke){if(ke==null)return null;var Ke=new oe.Z,tt=ke.representation,ve=tt.adaptation.period.mpd.manifest.Period_asArray[tt.adaptation.period.index].AdaptationSet_asArray[tt.adaptation.index].Representation_asArray[tt.index].bandwidth,Fe=ke.media;return Fe=(0,y.vi)(Fe,"Number",ke.replacementNumber),Fe=(0,y.vi)(Fe,"Time",ke.replacementTime),Fe=(0,y.vi)(Fe,"Bandwidth",ve),Fe=(0,y.Aj)(Fe,tt.id),Fe=(0,y.eR)(Fe),Ke.mediaType=ee(),Ke.type=T.w.MEDIA_SEGMENT_TYPE,Ke.range=ke.mediaRange,Ke.startTime=ke.presentationStartTime,Ke.mediaStartTime=ke.mediaStartTime,Ke.duration=ke.duration,Ke.timescale=tt.timescale,Ke.availabilityStartTime=ke.availabilityStartTime,Ke.availabilityEndTime=ke.availabilityEndTime,Ke.availabilityTimeComplete=tt.availabilityTimeComplete,Ke.wallStartTime=ke.wallStartTime,Ke.quality=tt.index,Ke.index=ke.index,Ke.mediaInfo=ye,Ke.adaptationIndex=tt.adaptation.index,Ke.representationId=tt.id,Ee(Ke,Fe,tt)?Ke:void 0}function Ie(ye,ke,Ke){var tt=null;if(!ke||!ke.segmentInfoType)return tt;var ve=z.getSegmentByTime(ke,Ke);return ve&&(c=ve,n.debug("Index for time "+Ke+" is "+ve.index),tt=$(ye,ve)),tt}function Ze(ye,ke,Ke){var tt=null,ve=z.getSegmentByIndex(ke,Ke,c?c.mediaStartTime:-1);if(ve)tt=$(ye,ve),c=ve;else{if(d&&!C)return n.debug(ee()+" No segment found at index: "+Ke+". Wait for next loop"),null;C=!0}return tt}function Ve(){n.debug("Dynamic stream complete"),C=!0}return E={getCurrentIndex:function(){return c?c.index:-1},getInitRequest:function(ye,ke){return ke?function(Ke,tt,ve){var Fe=new oe.Z,pt=tt.adaptation.period,ft=pt.start;if(Fe.mediaType=ve,Fe.type=T.w.INIT_SEGMENT_TYPE,Fe.range=tt.range,Fe.availabilityStartTime=te.calcAvailabilityStartTimeFromPresentationTime(ft,tt,d),Fe.availabilityEndTime=te.calcAvailabilityEndTimeFromPresentationTime(ft+pt.duration,tt,d),Fe.quality=tt.index,Fe.mediaInfo=Ke,Fe.representationId=tt.id,Ee(Fe,tt.initialization,tt))return Fe.url=(0,y.vi)(Fe.url,"Bandwidth",tt.bandwidth),Fe}(ye,ke,ee()):null},getNextSegmentRequest:function(ye,ke){return ke&&ke.segmentInfoType?Ze(ye,ke,c?c.index+1:0):null},getNextSegmentRequestIdempotent:function(ye,ke){var Ke=c?c.index+1:0,tt=z.getSegmentByIndex(ke,Ke,c?c.mediaStartTime:-1);return tt?$(ye,tt):null},getSegmentRequestForTime:Ie,getStreamId:function(){return O.id},getStreamInfo:function(){return O},getType:ee,getValidTimeAheadOfTargetTime:function(ye,ke,Ke,tt){try{if(isNaN(ye)||!ke||!Ke)return NaN;if(ye<0&&(ye=0),isNaN(tt)&&(tt=.5),Ie(ke,Ke,ye))return ye;if(Ke.adaptation.period.start+Ke.adaptation.period.duration<ye)return NaN;for(var ve=isFinite(Ke.adaptation.period.duration)?Ke.adaptation.period.start+Ke.adaptation.period.duration:ye+30,Fe=Math.min(ye+tt,ve),pt=NaN,ft=null;Fe<=ve;){var qe=null;if(Fe<=ve&&(qe=Ie(ke,Ke,Fe)),qe){pt=Fe,ft=qe;break}Fe+=tt}if(ft){var Je=ft.startTime+ft.duration;return ye>ft.startTime&&Je-ye>tt?ye:!isNaN(ft.startTime)&&ye<ft.startTime&&pt>ft.startTime?ft.startTime+.001:Math.min(Je-tt,pt)}return pt}catch{return NaN}},initialize:function(ye){d=ye,C=!1,z.initialize(ye)},isLastSegmentRequested:function(ye,ke){return!ye||!c?!1:C?!0:!isFinite(ye.adaptation.period.duration)||c.presentationStartTime+c.duration>ke?!1:ye.mediaFinishedInformation&&!isNaN(ye.mediaFinishedInformation.numberOfSegments)&&!isNaN(c.index)&&c.index>=ye.mediaFinishedInformation.numberOfSegments-1&&(!d||ye.segmentInfoType===p.Z.SEGMENT_TEMPLATE||d&&ye.segmentInfoType===p.Z.SEGMENT_LIST&&ye.adaptation.period.nextPeriodId)?!0:!!(d&&ye.adaptation.period.nextPeriodId&&ye.segmentInfoType===p.Z.SEGMENT_TIMELINE&&ye.mediaFinishedInformation&&!isNaN(ye.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&c&&!isNaN(c.mediaStartTime)&&!isNaN(c.duration)&&c.mediaStartTime+c.duration>=ye.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},repeatSegmentRequest:function(ye,ke){return ke&&ke.segmentInfoType?Ze(ye,ke,c?c.index:0):null},reset:function(){ce(),Z.off(e.Z.DYNAMIC_TO_STATIC,Ve,E)}},n=k.getLogger(E),ce(),Z.on(e.Z.DYNAMIC_TO_STATIC,Ve,E),E}u.__dashjs_factory_name="DashHandler",Re.Z=t.Z.getClassFactory(u)},1553:function(et,Re){function D(T,t){for(var e=0;e<t.length;e++){var y=t[e];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(T,y.key,y)}}var oe=new(function(){function T(){(function(y,p){if(!(y instanceof p))throw new TypeError("Cannot call a class as a function")})(this,T),this.init()}var t,e;return t=T,(e=[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.SUPPLEMENTAL_PROPERTY_ASARRAY="SupplementalProperty_asArray",this.INBAND_EVENT_STREAM="InbandEventStream",this.PRODUCER_REFERENCE_TIME="ProducerReferenceTime",this.INBAND="inband",this.TYPE="type",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.VIEWPOINT_ASARRAY="Viewpoint_asArray",this.ROLE_ASARRAY="Role_asArray",this.REPRESENTATION_ASARRAY="Representation_asArray",this.PRODUCERREFERENCETIME_ASARRAY="ProducerReferenceTime_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate",this.SERVICE_DESCRIPTION_OPERATING_QUALITY="OperatingQuality",this.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH="OperatingBandwidth",this.PATCH_LOCATION="PatchLocation",this.PATCH_LOCATION_AS_ARRAY="PatchLocation_asArray",this.LOCATION="Location",this.LOCATION_AS_ARRAY="Location_asArray",this.PUBLISH_TIME="publishTime",this.ORIGINAL_PUBLISH_TIME="originalPublishTime",this.ORIGINAL_MPD_ID="mpdId",this.WALL_CLOCK_TIME="wallClockTime",this.PRESENTATION_TIME="presentationTime",this.LABEL="Label",this.GROUP_LABEL="GroupLabel",this.CONTENT_STEERING="ContentSteering",this.CONTENT_STEERING_AS_ARRAY="ContentSteering_asArray",this.DEFAULT_SERVICE_LOCATION="defaultServiceLocation",this.QUERY_BEFORE_START="queryBeforeStart",this.CLIENT_REQUIREMENT="clientRequirement",this.TTL="ttl",this.CONTENT_STEERING_RESPONSE={VERSION:"VERSION",TTL:"TTL",RELOAD_URI:"RELOAD-URI",PATHWAY_PRIORITY:"PATHWAY-PRIORITY",PATHWAY_CLONES:"PATHWAY-CLONES",BASE_ID:"BASE-ID",ID:"ID",URI_REPLACEMENT:"URI-REPLACEMENT",HOST:"HOST",PARAMS:"PARAMS"},this.PRODUCER_REFERENCE_TIME_TYPE={ENCODER:"encoder",CAPTURED:"captured",APPLICATION:"application"},this.SEGMENT_ALIGNMENT="segmentAlignment",this.SUB_SEGMENT_ALIGNMENT="subsegmentAlignment"}}])&&D(t.prototype,e),T}());Re.Z=oe},7802:function(et,Re,D){var oe=D(5448),T=D(1724),t=D(3636),e=D(1736),y=D(5246);function p(h){h=h||{};var E,n,c=this.context,d=h.dashConstants,C=h.type,Z=h.segmentBaseController;function k(x){return x?x.segments?n[d.SEGMENT_BASE]:n[x.segmentInfoType]:null}return E={initialize:function(x){n[d.SEGMENT_TIMELINE]=(0,T.Z)(c).create(h,x),n[d.SEGMENT_TEMPLATE]=(0,t.Z)(c).create(h,x),n[d.SEGMENT_LIST]=(0,e.Z)(c).create(h,x),n[d.SEGMENT_BASE]=(0,y.Z)(c).create(h,x)},updateInitData:function(x,ne){return ne?Promise.resolve():Z.getSegmentBaseInitSegment({representation:x,mediaType:C})},updateSegmentData:function(x,ne){return ne?Promise.resolve():Z.getSegmentList({mimeType:x.mimeType,representation:x,mediaType:C})},getSegmentByIndex:function(x,ne,O){var z=k(x);return z?z.getSegmentByIndex(x,ne,O):null},getSegmentByTime:function(x,ne){var O=k(x);return O?O.getSegmentByTime(x,ne):null},getMediaFinishedInformation:function(x){var ne=k(x);return ne?ne.getMediaFinishedInformation(x):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}},n={},E}p.__dashjs_factory_name="SegmentsController";var u=oe.Z.getClassFactory(p);Re.Z=u},1736:function(et,Re,D){var oe=D(5448),T=D(3393),t=D(7387);function e(p,u){var h=(p=p||{}).timelineConverter;function E(){if(!h||!h.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(T.Z.MISSING_CONFIG_ERROR)}function n(c,d){if(E(),!c)return null;var C=c.adaptation.period.mpd.manifest.Period_asArray[c.adaptation.period.index].AdaptationSet_asArray[c.adaptation.index].Representation_asArray[c.index].SegmentList,Z=C.SegmentURL_asArray.length,k=c&&!isNaN(c.startNumber)?c.startNumber:1,x=Math.max(k-1,0),ne=Math.max(d-x,0),O=null;if(ne<Z){var z=C.SegmentURL_asArray[ne];(O=(0,t.NF)(h,u,c,d))&&(O.replacementTime=(k+d-1)*c.segmentDuration,O.media=z.media?z.media:"",O.mediaRange=z.mediaRange,O.indexRange=z.indexRange)}return O}return{getSegmentByIndex:n,getSegmentByTime:function(c,d){if(E(),!c)return null;var C=c.segmentDuration;if(isNaN(C))return null;var Z=h.calcPeriodRelativeTimeFromMpdRelativeTime(c,d);return n(c,Math.floor(Z/C))},getMediaFinishedInformation:function(c){var d={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!c)return d;var C=c.adaptation.period.mpd.manifest.Period_asArray[c.adaptation.period.index].AdaptationSet_asArray[c.adaptation.index].Representation_asArray[c.index].SegmentList,Z=c&&!isNaN(c.startNumber)?c.startNumber:1,k=Math.max(Z-1,0);return d.numberOfSegments=k+C.SegmentURL_asArray.length,d}}}e.__dashjs_factory_name="ListSegmentsGetter";var y=oe.Z.getClassFactory(e);Re.Z=y},5246:function(et,Re,D){var oe=D(5448),T=D(3393);function t(y){var p=(y=y||{}).timelineConverter;function u(){if(!p||!p.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(T.Z.MISSING_CONFIG_ERROR)}function h(E,n){if(u(),!E)return null;var c,d=E.segments?E.segments.length:-1;if(n<d&&(c=E.segments[n])&&c.index===n)return c;for(var C=0;C<d;C++)if((c=E.segments[C])&&c.index===n)return c;return null}return{getSegmentByIndex:h,getSegmentByTime:function(E,n){u();var c=function(d,C){if(!d)return-1;var Z,k,x,ne,O,z=d.segments,te=z?z.length:null,V=-1;if(z&&te>0){for(O=0;O<te;O++)if(x=(k=z[O]).presentationStartTime,C+(Z=(ne=k.duration)/2)>=x&&C-Z<x+ne){V=k.index;break}}return V}(E,n);return h(E,c)},getMediaFinishedInformation:function(E){var n={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return E&&E.segments&&(n.numberOfSegments=E.segments.length),n}}}t.__dashjs_factory_name="SegmentBaseGetter";var e=oe.Z.getClassFactory(t);Re.Z=e},7387:function(et,Re,D){D.d(Re,{Aj:function(){return e},NF:function(){return h},TJ:function(){return E},eR:function(){return t},vi:function(){return y}});var oe=D(2011);function T(n,c){for(;n.length<c;)n="0"+n;return n}function t(n){return n&&n.split("$$").join("$")}function e(n,c){if(!c||!n||n.indexOf("$RepresentationID$")===-1)return n;var d=c.toString();return n.split("$RepresentationID$").join(d)}function y(n,c,d){var C,Z,k,x,ne,O,z=c.length,te=2;if(!n)return n;for(;;){if((C=n.indexOf("$"+c))<0||(Z=n.indexOf("$",C+z))<0)return n;if((k=n.indexOf("%0",C+z))>C&&k<Z)switch(x=n.charAt(Z-1),ne=parseInt(n.substring(k+te,Z-1),10),x){case"d":case"i":case"u":O=T(d.toString(),ne);break;case"x":O=T(d.toString(16),ne);break;case"X":O=T(d.toString(16),ne).toUpperCase();break;case"o":O=T(d.toString(8),ne);break;default:return n}else O=d;n=n.substring(0,C)+O+n.substring(Z+1)}}function p(n,c,d,C,Z,k,x,ne){var O,z=new oe.Z;return z.representation=n,z.duration=c,z.presentationStartTime=d,z.mediaStartTime=C,z.availabilityStartTime=Z.calcAvailabilityStartTimeFromPresentationTime(k,n,x),z.availabilityEndTime=Z.calcAvailabilityEndTimeFromPresentationTime(k+c,n,x),z.wallStartTime=Z.calcWallTimeForSegment(z,x),z.replacementNumber=(O=ne,z.representation.startNumber+O),z.index=ne,z}function u(n,c,d,C){var Z=c.adaptation.period;if(isFinite(Z.duration)&&Z.start+Z.duration<=d.presentationStartTime)return!1;if(C){if(c.availabilityTimeOffset==="INF")return!0;var k=n.getClientReferenceTime();return d.availabilityStartTime.getTime()<=k&&(!isFinite(d.availabilityEndTime)||d.availabilityEndTime.getTime()>=k)}return!0}function h(n,c,d,C){var Z,k,x;Z=d.segmentDuration,isNaN(Z)&&(Z=d.adaptation.period.duration),k=parseFloat((d.adaptation.period.start+C*Z).toFixed(5)),x=parseFloat((k+Z).toFixed(5));var ne=p(d,Z,k,n.calcMediaTimeFromPresentationTime(k,d),n,x,c,C);return u(n,d,ne,c)?ne:null}function E(n,c,d,C,Z,k,x,ne,O,z){var te,V,ee=C/k,ce=Z/k;return te=n.calcPresentationTimeFromMediaTime(ee,d),u(n,d,V=p(d,ce,te,ee,n,te+ce,c,O),c)?(V.replacementTime=z||C,x=y(x,"Number",V.replacementNumber),x=y(x,"Time",V.replacementTime),V.media=x,V.mediaRange=ne,V):null}},3636:function(et,Re,D){var oe=D(5448),T=D(3393),t=D(7387);function e(p,u){var h=(p=p||{}).timelineConverter;function E(){if(!h||!h.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(T.Z.MISSING_CONFIG_ERROR)}function n(c,d){if(E(),!c)return null;var C=c.adaptation.period.mpd.manifest.Period_asArray[c.adaptation.period.index].AdaptationSet_asArray[c.adaptation.index].Representation_asArray[c.index].SegmentTemplate;d=Math.max(d,0);var Z=(0,t.NF)(h,u,c,d);if(Z){Z.replacementTime=Math.round((d-1)*c.segmentDuration*c.timescale,10);var k=C.media;k=(0,t.vi)(k,"Number",Z.replacementNumber),k=(0,t.vi)(k,"Time",Z.replacementTime),Z.media=k}return Z}return{getSegmentByIndex:n,getSegmentByTime:function(c,d){if(E(),!c)return null;var C=c.segmentDuration;if(isNaN(C))return null;var Z=h.calcPeriodRelativeTimeFromMpdRelativeTime(c,d);return n(c,Math.floor(Z/C))},getMediaFinishedInformation:function(c){var d={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!c)return d;var C=c.segmentDuration;return isNaN(C)?d.numberOfSegments=1:d.numberOfSegments=Math.ceil(c.adaptation.period.duration/C),d}}}e.__dashjs_factory_name="TemplateSegmentsGetter";var y=oe.Z.getClassFactory(e);Re.Z=y},1724:function(et,Re,D){var oe=D(5448),T=D(3393),t=D(7387);function e(p,u){var h=(p=p||{}).timelineConverter,E=p.dashMetrics;function n(){if(!h)throw new Error(T.Z.MISSING_CONFIG_ERROR)}function c(C,Z){var k,x,ne,O,z,te,V,ee=C.adaptation.period.mpd.manifest.Period_asArray[C.adaptation.period.index].AdaptationSet_asArray[C.adaptation.index].Representation_asArray[C.index].SegmentTemplate||C.adaptation.period.mpd.manifest.Period_asArray[C.adaptation.period.index].AdaptationSet_asArray[C.adaptation.index].Representation_asArray[C.index].SegmentList,ce=ee.SegmentTimeline,Ee=ee.SegmentURL_asArray,$=0,Ie=-1;V=C.timescale;var Ze=!1;for(ne=0,O=(k=ce.S_asArray).length;ne<O&&!Ze;ne++)for(te=0,(x=k[ne]).hasOwnProperty("r")&&(te=x.r),x.hasOwnProperty("t")&&($=x.t),te<0&&(te=d(C,k[ne+1],x,V,$/V)),z=0;z<=te&&!Ze;z++)(Ze=Z($,ee,Ee,x,V,++Ie,ne))&&(C.segmentDuration=x.d/V),$+=x.d}function d(C,Z,k,x,ne){var O;if(Z&&Z.hasOwnProperty("t"))O=Z.t/x;else try{var z=0;if(isNaN(C.adaptation.period.start)||isNaN(C.adaptation.period.duration)||!isFinite(C.adaptation.period.duration)){var te=E.getCurrentDVRInfo();z=isNaN(te.end)?0:te.end}else z=C.adaptation.period.start+C.adaptation.period.duration;O=h.calcMediaTimeFromPresentationTime(z,C),C.segmentDuration=k.d/x}catch{O=0}return Math.max(Math.ceil((O-ne)/(k.d/x))-1,0)}return{getSegmentByIndex:function(C,Z,k){if(n(),!C)return null;var x=null,ne=!1;return c(C,function(O,z,te,V,ee,ce,Ee){if(ne||k<0){var $=z.media,Ie=V.mediaRange;return te&&($=te[Ee].media||"",Ie=te[Ee].mediaRange),x=(0,t.TJ)(h,u,C,O,V.d,ee,$,Ie,ce,V.tManifest),!0}return O>=k*ee-.5*V.d&&(ne=!0),!1}),x},getSegmentByTime:function(C,Z){if(n(),!C)return null;Z===void 0&&(Z=null);var k=null,x=h.calcMediaTimeFromPresentationTime(Z,C);return c(C,function(ne,O,z,te,V,ee,ce){var Ee=parseFloat((x*V).toPrecision(15));if(Ee<ne+te.d&&Ee>=ne){var $=O.media,Ie=te.mediaRange;return z&&($=z[ce].media||"",Ie=z[ce].mediaRange),k=(0,t.TJ)(h,u,C,ne,te.d,V,$,Ie,ee,te.tManifest),!0}return!1}),k},getMediaFinishedInformation:function(C){if(!C)return 0;var Z,k,x,ne,O,z,te,V=(C.adaptation.period.mpd.manifest.Period_asArray[C.adaptation.period.index].AdaptationSet_asArray[C.adaptation.index].Representation_asArray[C.index].SegmentTemplate||C.adaptation.period.mpd.manifest.Period_asArray[C.adaptation.period.index].AdaptationSet_asArray[C.adaptation.index].Representation_asArray[C.index].SegmentList).SegmentTimeline,ee=0,ce=0,Ee=0;for(te=C.timescale,ne=(Z=V.S_asArray).length,x=0;x<ne;x++)for(z=0,(k=Z[x]).hasOwnProperty("r")&&(z=k.r),k.hasOwnProperty("t")&&(ce=(ee=k.t)/te),z<0&&(z=d(C,Z[x+1],k,te,ce)),O=0;O<=z;O++)Ee++,ce=(ee+=k.d)/te;return{numberOfSegments:Ee,mediaTimeOfLastSignaledSegment:ce}}}}e.__dashjs_factory_name="TimelineSegmentsGetter";var y=oe.Z.getClassFactory(e);Re.Z=y},2011:function(et,Re){Re.Z=function D(){(function(oe,T){if(!(oe instanceof T))throw new TypeError("Cannot call a class as a function")})(this,D),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.wallStartTime=NaN,this.representation=null}},2610:function(et,Re){Re.Z=function D(){(function(oe,T){if(!(oe instanceof T))throw new TypeError("Cannot call a class as a function")})(this,D),this.schemeIdUri="",this.value=""}},7688:function(et,Re,D){D.d(Re,{Z:function(){return ru}});var oe=D(452),T=D.n(oe),t=D(3393),e=D(1553),y=D(3860),p=D(5595),u=D(8512),h=D(5448),E=D(6398),n=D(8825);function c(){var o,r,l,_,I,b,m,A,F,j,U,w,q,B,me,re,de,fe,G,ie,K,ue,g,M,L=this.context,N=(0,p.Z)(L).getInstance();function R(){X(),B=!1,j=0,U=0,re=0,ue=!1,de=!0,fe=!1,g=!1,G=NaN,m&&(N.off(u.Z.DATA_UPDATE_COMPLETED,ct,o),N.off(u.Z.LOADING_PROGRESS,Ut,o),N.off(u.Z.MANIFEST_UPDATED,Pe,o),N.off(u.Z.STREAMS_COMPOSED,rt,o),N.off(n.Z.PLAYBACK_ENDED,fn,o),N.off(n.Z.STREAM_INITIALIZING,Gt,o),N.off(n.Z.REPRESENTATION_SWITCH,Qe,o),N.off(n.Z.BUFFER_LEVEL_STATE_CHANGED,Ne,o),Be(),m.removeEventListener("canplay",le),m.removeEventListener("canplaythrough",Me),m.removeEventListener("play",xe),m.removeEventListener("waiting",lt),m.removeEventListener("playing",dt),m.removeEventListener("pause",At),m.removeEventListener("error",gt),m.removeEventListener("seeking",Pt),m.removeEventListener("seeked",Vt),m.removeEventListener("timeupdate",Wt),m.removeEventListener("progress",qt),m.removeEventListener("ratechange",Xt),m.removeEventListener("loadedmetadata",Ht),m.removeEventListener("loadeddata",tn),m.removeEventListener("stalled",Yt),m.removeEventListener("ended",un),m.removeEventListener("volumechange",sn)),F=null,m=null,w=null,q=null}function Q(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return parseFloat((Y(J)-Le()).toFixed(5))}function Y(J){var Ae=J||w;return Ae.start+Ae.duration}function ae(){var J=arguments.length>0&&arguments[0]!==void 0&&arguments[0];w&&m&&m.getElement()?(J&&q&&pe(Le()),m.play()):B=!0}function X(){w&&m&&m.pause()}function P(J){var Ae=arguments.length>1&&arguments[1]!==void 0&&arguments[1],ut=arguments.length>2&&arguments[2]!==void 0&&arguments[2],_t=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(w&&m&&m.getElement()){var xt=isNaN(G)?m.getTime():G;J!==xt&&((ie=ut===!0)||(G=J),r.info("Requesting seek to time: "+J+(ie?" (internal)":"")),q&&_t&&pe(J),m.setCurrentTime(J,Ae))}}function se(){if(w&&m&&q){var J=l&&l.hasVideoTrack()?t.Z.VIDEO:t.Z.AUDIO,Ae=I.getCurrentDVRInfo(J);return Ae&&Ae.range?Ae.range.end:0}}function pe(J){var Ae=new Date(A.getClientReferenceTime()),ut=b.getRegularPeriods()[0],_t=A.calcPresentationTimeFromWallTime(Ae,ut);j=_t-J}function Le(){return w&&m?m.getTime():null}function De(){return w&&m?m.isPaused():null}function Oe(){return w&&m?m.isSeeking():null}function we(){return w&&m?m.isStalled():null}function ot(){return w&&m?m.getPlaybackRate():null}function at(){return w&&m?m.getEnded():null}function Xe(){return q}function $e(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(!De()&&q&&m.getReadyState()!==0&&!Oe()&&!ue){J||(J=l.hasVideoTrack()?t.Z.VIDEO:t.Z.AUDIO);var Ae=Le(),ut=Dt(Ae,J),_t=!isNaN(ut)&&ut!==Ae;_t&&!Oe()&&(we()||K||m.getReadyState()===1)&&(r.debug("UpdateCurrentTime: Seek to actual time: ".concat(ut," from currentTime: ").concat(Ae)),P(ut,!1,!1))}}function Dt(J,Ae){var ut=I.getCurrentDVRInfo(Ae),_t=ut?ut.range:null;return _t?J>_t.end?Math.max(_t.end-j,_t.start):J>0&&J+.25<_t.start&&Math.abs(J-_t.start)<31536e4?fe?Math.max(_t.end-j,_t.start):_t.start:J:NaN}function _e(){F===null&&(F=setInterval(function(){var J;N.trigger(u.Z.WALLCLOCK_TIME_UPDATED,{isDynamic:q,time:new Date}),Xe()&&(l.addDVRMetric(),De()?(J=Date.now(),(!me||J>me+500)&&(me=J,Wt())):$e())},M.get().streaming.wallclockTimeUpdateInterval))}function Be(){clearInterval(F),F=null}function ct(J){var Ae=b.convertRepresentationToRepresentationInfo(J.currentRepresentation),ut=Ae?Ae.mediaInfo.streamInfo:null;ut!==null&&w.id===ut.id&&(w=ut)}function le(){N.trigger(u.Z.CAN_PLAY)}function Me(){N.trigger(u.Z.CAN_PLAY_THROUGH)}function Ne(J){J.streamId===l.getActiveStreamInfo().id&&(K=J.state===y.Z.BUFFER_EMPTY,M.get().streaming.buffer.setStallState&&m.setStallState(J.mediaType,J.state===y.Z.BUFFER_EMPTY))}function xe(){r.info("Native video element event: play"),$e(),_e(),N.trigger(u.Z.PLAYBACK_STARTED,{startTime:Le()})}function lt(){r.info("Native video element event: waiting"),N.trigger(u.Z.PLAYBACK_WAITING,{playingTime:Le()})}function dt(){r.info("Native video element event: playing"),ie=!1,N.trigger(u.Z.PLAYBACK_PLAYING,{playingTime:Le()})}function At(){r.info("Native video element event: pause"),N.trigger(u.Z.PLAYBACK_PAUSED,{ended:at()})}function Pt(){if(!ie){var J=Le();isNaN(G)||G===J||(J=G),G=NaN,r.info("Seeking to: "+J),_e(),N.trigger(u.Z.PLAYBACK_SEEKING,{seekTime:J,streamId:w.id})}}function Vt(){r.info("Native video element event: seeked"),ie=!1,N.trigger(u.Z.PLAYBACK_SEEKED)}function Wt(){w&&N.trigger(u.Z.PLAYBACK_TIME_UPDATED,{timeToEnd:Q(),time:Le(),streamId:w.id})}function qt(){N.trigger(u.Z.PLAYBACK_PROGRESS,{streamId:w.id})}function Xt(){var J=ot();r.info("Native video element event: ratechange: ",J),N.trigger(u.Z.PLAYBACK_RATE_CHANGED,{playbackRate:J})}function Ht(){r.info("Native video element event: loadedmetadata"),N.trigger(u.Z.PLAYBACK_METADATA_LOADED),_e()}function tn(){r.info("Native video element event: loadeddata"),N.trigger(u.Z.PLAYBACK_LOADED_DATA)}function un(){r.info("Native video element event: ended"),X(),Be();var J=l?l.getActiveStreamInfo():null;J&&N.trigger(u.Z.PLAYBACK_ENDED,{isLast:J.isLast})}function sn(){N.trigger(u.Z.PLAYBACK_VOLUME_CHANGED)}function fn(J){if(F&&J.isLast){r.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");var Ae=J.seekTime?J.seekTime:Y();m.setCurrentTime(Ae),X(),Be()}}function gt(J){var Ae=J.target||J.srcElement;N.trigger(u.Z.PLAYBACK_ERROR,{error:Ae.error})}function Zt(){q=!1}function Ut(J){if(J.stream===!1&&fe&&!isNaN(J.request.duration)){var Ae=1.2*J.request.duration;Ae>j&&(r.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",Ae.toFixed(2)),j=Ae,U=Ae)}}function Yt(J){N.trigger(u.Z.PLAYBACK_STALLED,{e:J})}function Gt(J){var Ae;(Ae=J.mediaInfo)&&Ae.supplementalProperties&&Ae.supplementalProperties[t.Z.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME]==="true"&&(r.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),fe=!0)}function Qe(J){var Ae=l.getActiveStreamInfo();J&&Ae&&J.currentRepresentation&&J.streamId&&J.streamId===Ae.id&&J.mediaType&&(J.mediaType===t.Z.VIDEO||J.mediaType===t.Z.AUDIO)&&(de=J.currentRepresentation.availabilityTimeComplete,(fe=!de)&&!g&&(g=!0))}function Pe(){ue=!0}function rt(){ue=!1}return o={initialize:function(J,Ae){w=J,Ae!==!0&&(m.addEventListener("canplay",le),m.addEventListener("canplaythrough",Me),m.addEventListener("play",xe),m.addEventListener("waiting",lt),m.addEventListener("playing",dt),m.addEventListener("pause",At),m.addEventListener("error",gt),m.addEventListener("seeking",Pt),m.addEventListener("seeked",Vt),m.addEventListener("timeupdate",Wt),m.addEventListener("progress",qt),m.addEventListener("ratechange",Xt),m.addEventListener("loadedmetadata",Ht),m.addEventListener("loadeddata",tn),m.addEventListener("stalled",Yt),m.addEventListener("ended",un),m.addEventListener("volumechange",sn),q=w.manifestInfo.isDynamic,K=!1,ie=!1,N.on(u.Z.DATA_UPDATE_COMPLETED,ct,o),N.on(u.Z.LOADING_PROGRESS,Ut,o),N.on(u.Z.MANIFEST_UPDATED,Pe,o),N.on(u.Z.STREAMS_COMPOSED,rt,o),N.on(n.Z.PLAYBACK_ENDED,fn,o,{priority:p.Z.EVENT_PRIORITY_HIGH}),N.on(n.Z.STREAM_INITIALIZING,Gt,o),N.on(n.Z.REPRESENTATION_SWITCH,Qe,o),N.on(n.Z.BUFFER_LEVEL_STATE_CHANGED,Ne,o),N.on(n.Z.DYNAMIC_TO_STATIC,Zt,o),B&&(B=!1,ae()))},setConfig:function(J){J&&(J.streamController&&(l=J.streamController),J.serviceDescriptionController&&(_=J.serviceDescriptionController),J.dashMetrics&&(I=J.dashMetrics),J.adapter&&(b=J.adapter),J.videoModel&&(m=J.videoModel),J.timelineConverter&&(A=J.timelineConverter),J.settings&&(M=J.settings))},getTimeToStreamEnd:Q,getBufferLevel:function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,Ae=null;return l.getActiveStreamProcessors().forEach(function(ut){if(!J||J.length===0||J.indexOf(ut.getType())===-1){var _t=ut.getBufferLevel();Ae=Ae===null?_t:Math.min(Ae,_t)}}),Ae},getPlaybackStalled:function(){return K},getTime:Le,getLowLatencyModeEnabled:function(){return fe},getInitialCatchupModeActivated:function(){return g},getIsManifestUpdateInProgress:function(){return ue},getPlaybackRate:ot,getPlayedRanges:function(){return w&&m?m.getPlayedRanges():null},getEnded:at,getIsDynamic:Xe,getStreamController:function(){return l},computeAndSetLiveDelay:function(J,Ae){var ut,_t,xt,an=!isNaN(J)&&isFinite(J)?J:NaN,Tn=b.getSuggestedPresentationDelay(),kn=_.getServiceDescriptionSettings();return ut=isNaN(M.get().streaming.delay.liveDelay)?M.get().streaming.delay.liveDelayFragmentCount===null||isNaN(M.get().streaming.delay.liveDelayFragmentCount)||isNaN(an)?kn&&!isNaN(kn.liveDelay)&&kn.liveDelay>0?kn.liveDelay:M.get().streaming.delay.useSuggestedPresentationDelay===!0&&Tn!==null&&!isNaN(Tn)&&Tn>0?Tn:isNaN(an)?Ae&&!isNaN(Ae.minBufferTime)?4*Ae.minBufferTime:4*w.manifestInfo.minBufferTime:4*an:an*M.get().streaming.delay.liveDelayFragmentCount:M.get().streaming.delay.liveDelay,(xt=b.getAvailabilityStartTime())!==null&&(re=xt),_t=Ae&&Ae.dvrWindowSize>0?Math.min(ut,Ae.dvrWindowSize):ut,j=_t,U=_t,_t},getLiveDelay:function(){return j},getOriginalLiveDelay:function(){return U},getCurrentLiveLatency:function(){if(!q||isNaN(re))return NaN;var J=Le();if(isNaN(J)||J===0)return 0;var Ae=new Date().getTime()+1e3*A.getClientTimeOffset();return Math.max(((Ae-re-1e3*J)/1e3).toFixed(3),0)},play:ae,isPaused:De,isStalled:we,pause:X,isSeeking:Oe,getStreamEndTime:Y,seek:P,seekToOriginalLive:function(){var J=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Ae=arguments.length>1&&arguments[1]!==void 0&&arguments[1],ut=arguments.length>2&&arguments[2]!==void 0&&arguments[2],_t=se();if(_t!==0){var xt=_t-(j=U);P(xt,J,Ae,ut)}},seekToCurrentLive:function(){var J=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Ae=arguments.length>1&&arguments[1]!==void 0&&arguments[1],ut=arguments.length>2&&arguments[2]!==void 0&&arguments[2],_t=se();if(_t!==0){var xt=_t-j;P(xt,J,Ae,ut)}},reset:R,updateCurrentTime:$e,getAvailabilityStartTime:function(){return re}},r=(0,E.Z)(L).getInstance().getLogger(o),R(),o}c.__dashjs_factory_name="PlaybackController";var d=h.Z.getSingletonFactory(c),C=D(3186),Z="loading",k="executed",x="failed";function ne(o){var r,l,_,I,b=(o=o||{}).eventBus,m=o.events,A=o.dashMetrics,F=o.fragmentLoader,j=o.debug,U=o.streamInfo,w=o.type;function q(g){var M;return!!g&&(M=!1,_.some(function(L){if(N=g,R=L,!isNaN(N.index)&&N.startTime===R.startTime&&N.adaptationIndex===R.adaptationIndex&&N.type===R.type||function(Q,Y){return isNaN(Q.index)&&isNaN(Y.index)&&Q.quality===Y.quality}(g,L)||function(Q,Y){return Q.action===C.Z.ACTION_COMPLETE&&Q.action===Y.action}(g,L))return M=!0;var N,R}),M)}function B(g){return isNaN(g.duration)?.25:Math.min(g.duration/8,.5)}function me(g){_=_.filter(function(M){var L=B(M);return isNaN(M.startTime)||g!==void 0&&M.startTime>=g-L})}function re(g,M){M<=g+.5||(_=_.filter(function(L){var N=B(L);return isNaN(L.startTime)||L.startTime>=M-N||isNaN(L.duration)||L.startTime+L.duration<=g+N}))}function de(g,M,L){for(var N=g.length-1;N>=0;N--){var R=g[N],Q=R.startTime,Y=Q+R.duration;if(L=isNaN(L)?B(R):L,!isNaN(Q)&&!isNaN(Y)&&M+L>=Q&&M-L<Y||isNaN(Q)&&isNaN(M))return R}return null}function fe(g,M){A.addSchedulingInfo(g,M),A.addRequestsQueue(g.mediaType,I,_)}function G(g){g.sender===F&&(I.splice(I.indexOf(g.request),1),g.response&&!g.error&&_.push(g.request),fe(g.request,g.error?x:k),b.trigger(m.FRAGMENT_LOADING_COMPLETED,{request:g.request,response:g.response,error:g.error,sender:this},{streamId:U.id,mediaType:w}))}function ie(g){g.sender===F&&b.trigger(m.FRAGMENT_LOADING_PROGRESS,{request:g.request,response:g.response,error:g.error,sender:this},{streamId:U.id,mediaType:w})}function K(g){g.sender===F&&b.trigger(m.FRAGMENT_LOADING_ABANDONED,{request:g.request},{streamId:U.id,mediaType:w})}function ue(){_=[],I=[]}return r={getStreamId:function(){return U.id},getType:function(){return w},getRequests:function(g){var M=g?g.state instanceof Array?g.state:[g.state]:[],L=[];return M.forEach(function(N){var R=function(Q){var Y;switch(Q){case Z:Y=I;break;case k:Y=_;break;default:Y=[]}return Y}(N);L=L.concat(function(Q,Y){return Y.hasOwnProperty("time")?[de(Q,Y.time,Y.threshold)]:Q.filter(function(ae){for(var X in Y)if(X!=="state"&&Y.hasOwnProperty(X)&&ae[X]!=Y[X])return!1;return!0})}(R,g))}),L},isFragmentLoaded:q,isFragmentLoadedOrPending:function(g){var M,L=!1,N=0;if(!(L=q(g)))for(N=0;N<I.length;N++)M=I[N],g.url===M.url&&g.startTime===M.startTime&&(L=!0);return L},removeExecutedRequestsBeforeTime:me,removeExecutedRequestsAfterTime:function(g){_=_.filter(function(M){return isNaN(M.startTime)||g!==void 0&&M.startTime<g})},syncExecutedRequestsWithBufferedRange:function(g,M){if(g&&g.length!==0){for(var L=0,N=0,R=g.length;N<R;N++)re(L,g.start(N)),L=g.end(N);M>0&&re(L,M)}else me()},abortRequests:function(){l.debug("abort requests"),F.abort(),I=[]},executeRequest:function(g){g.action===C.Z.ACTION_DOWNLOAD?(fe(g,Z),I.push(g),function(M){b.trigger(m.FRAGMENT_LOADING_STARTED,{request:M},{streamId:U.id,mediaType:w}),F.load(M)}(g)):l.warn("Unknown request action.")},reset:function(){b.off(m.LOADING_COMPLETED,G,this),b.off(m.LOADING_DATA_PROGRESS,ie,this),b.off(m.LOADING_ABANDONED,K,this),F&&F.reset(),ue()},resetInitialSettings:ue,addExecutedRequest:function(g){_.push(g)}},l=j.getLogger(r),ue(),b.on(m.LOADING_COMPLETED,G,r),b.on(m.LOADING_DATA_PROGRESS,ie,r),b.on(m.LOADING_ABANDONED,K,r),r}ne.__dashjs_factory_name="FragmentModel";var O=h.Z.getClassFactory(ne);O.FRAGMENT_MODEL_LOADING=Z,O.FRAGMENT_MODEL_EXECUTED=k,O.FRAGMENT_MODEL_CANCELED="canceled",O.FRAGMENT_MODEL_FAILED=x,h.Z.updateClassFactory(ne.__dashjs_factory_name,O);var z=O,te=D(5459);function V(o){return V=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},V(o)}function ee(o,r){return ee=Object.setPrototypeOf||function(l,_){return l.__proto__=_,l},ee(o,r)}function ce(o,r){return!r||V(r)!=="object"&&typeof r!="function"?function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(o):r}function Ee(o){return Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Ee(o)}var $=new(function(o){(function(b,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(m&&m.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),m&&ee(b,m)})(I,o);var r,l,_=(r=I,l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var b,m=Ee(r);if(l){var A=Ee(this).constructor;b=Reflect.construct(m,arguments,A)}else b=m.apply(this,arguments);return ce(this,b)});function I(){var b;return function(m,A){if(!(m instanceof A))throw new TypeError("Cannot call a class as a function")}(this,I),(b=_.call(this)).MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,b.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,b.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,b.SEGMENT_BASE_LOADER_ERROR_CODE=15,b.TIME_SYNC_FAILED_ERROR_CODE=16,b.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,b.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,b.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,b.APPEND_ERROR_CODE=20,b.REMOVE_ERROR_CODE=21,b.DATA_UPDATE_FAILED_ERROR_CODE=22,b.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,b.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,b.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,b.DOWNLOAD_ERROR_ID_SIDX_CODE=26,b.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,b.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,b.DOWNLOAD_ERROR_ID_XLINK_CODE=29,b.MANIFEST_ERROR_ID_PARSE_CODE=31,b.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,b.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,b.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,b.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,b.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",b.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",b.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",b.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",b.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",b.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",b.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",b.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",b.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",b.APPEND_ERROR_MESSAGE="chunk is not defined",b.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",b.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",b.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",b.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",b.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",b.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",b}return I}(D(2230).Z)),Ie=D(1264),Ze=D(7855);function Ve(o){var r,l,_,I,b,m,A=this.context,F=(0,Ie.Z)(A).getInstance(),j=o.textController,U=o.eventBus,w=[],q=[],B=!1,me=o.mediaSource,re=null;function de(R){return new Promise(function(Q){N(function(){I.changeType&&I.changeType(R),Q()})})}function fe(R){return I=j.getTextSourceBuffer(R),Promise.resolve()}function G(){if(typeof I.addEventListener=="function")try{I.addEventListener("updateend",M,!1),I.addEventListener("error",L,!1),I.addEventListener("abort",L,!1)}catch{m=setInterval(M,50)}else m=setInterval(M,50)}function ie(R){return new Promise(function(Q){I&&F.get().streaming.buffer.useAppendWindow?N(function(){try{if(!I)return void Q();var Y=me.duration,ae=0;R&&!isNaN(R.start)&&!isNaN(R.duration)&&isFinite(R.duration)&&(Y=R.start+R.duration),R&&!isNaN(R.start)&&(ae=R.start),I.appendWindowEnd===Y&&I.appendWindowStart===ae||(I.appendWindowStart=0,I.appendWindowEnd=Y+.01,I.appendWindowStart=Math.max(ae-.1,0),_.debug("Updated append window for ".concat(b.type,". Set start to ").concat(I.appendWindowStart," and end to ").concat(I.appendWindowEnd))),Q()}catch{_.warn("Failed to set append window"),Q()}}):Q()})}function K(R){return new Promise(function(Q){I?N(function(){try{I.timestampOffset===R||isNaN(R)||(I.timestampOffset=R,_.debug("Set MSE timestamp offset to ".concat(R))),Q()}catch{Q()}}):Q()})}function ue(){if(!B&&q.length>0){B=!0;var R=q[0];q.splice(0,1);var Q=function(){B=!1,q.length>0&&ue.call(this),R&&R.data&&R.data.segmentType&&R.data.segmentType!==Ze.w.INIT_SEGMENT_TYPE&&delete R.data.bytes,R.promise.resolve({chunk:R.data})};try{re=R.request,R.data.bytes.byteLength===0?Q.call(this):(I.appendBuffer?I.appendBuffer(R.data.bytes):I.append(R.data.bytes,R.data),N(Q.bind(this)))}catch(Y){_.fatal('SourceBuffer append failed "'+Y+'"'),q.length>0?ue():B=!1,delete R.data.bytes,R.promise.reject({chunk:R.data,error:new te.Z(Y.code,Y.message)})}}}function g(){w.length>0&&(I.updating||(w.shift()(),g()))}function M(){I.updating||g()}function L(R){var Q,Y,ae=R.target||{};Q=u.Z.SOURCE_BUFFER_ERROR,Y={error:ae,lastRequestAppended:re},U.trigger(Q,Y,{streamId:b.streamInfo.id,mediaType:l})}function N(R){w.push(R),I.updating||g()}return r={getType:function(){return l},getAllBufferRanges:function(){try{return I.buffered}catch(R){return _.error("getAllBufferRanges exception: "+R.message),null}},getBuffer:function(){return I},append:function(R){var Q=this,Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise(function(ae,X){R?(q.push({data:R,promise:{resolve:ae,reject:X},request:Y}),N(ue.bind(Q))):X({chunk:R,error:new te.Z($.APPEND_ERROR_CODE,$.APPEND_ERROR_MESSAGE)})})},remove:function(R){return new Promise(function(Q,Y){var ae=R.start,X=R.end;ae>=0&&X>ae?N(function(){try{I.remove(ae,X),N(function(){Q({from:ae,to:X,unintended:!1}),R.resolve&&R.resolve()})}catch(P){Y({from:ae,to:X,unintended:!1,error:new te.Z($.REMOVE_ERROR_CODE,$.REMOVE_ERROR_MESSAGE)}),R.reject&&R.reject(P)}}):Q()})},abort:function(){return new Promise(function(R){try{q=[],me.readyState==="open"?N(function(){try{I&&I.abort(),R()}catch{R()}}):(I&&I.setTextTrack&&me.readyState==="ended"&&I.abort(),R())}catch{R()}})},reset:function(){if(I){try{w=[],function(){try{typeof I.removeEventListener=="function"&&(I.removeEventListener("updateend",M,!1),I.removeEventListener("error",L,!1),I.removeEventListener("abort",L,!1)),clearInterval(m)}catch(R){_.error(R)}}(),B=!1,q=[],I.getClassName&&I.getClassName()==="TextSourceBuffer"||(_.debug("Removing sourcebuffer from media source"),me.removeSourceBuffer(I))}catch{}I=null}re=null},updateTimestampOffset:K,initializeForStreamSwitch:function(R,Q,Y){l=(b=R).type;var ae=b.codec;(function(P){I=P.getBuffer()})(Y),G();var X=[];return X.push(new Promise(function(P){N(function(){var se=I.appendWindowStart,pe=I.appendWindowEnd;I&&(I.abort(),I.appendWindowStart=se,I.appendWindowEnd=pe),P()})})),X.push(ie(b.streamInfo)),F.get().streaming.buffer.useChangeTypeForTrackSwitch&&X.push(de(ae)),Q&&Q.MSETimeOffset!==void 0&&X.push(K(Q.MSETimeOffset)),Promise.all(X)},initializeForFirstUse:function(R,Q,Y){l=(b=Q).type;var ae=b.codec;try{if(ae.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return fe(R);I=me.addSourceBuffer(ae),G();var X=[];return X.push(ie(b.streamInfo)),Y&&Y.MSETimeOffset!==void 0&&X.push(K(Y.MSETimeOffset)),Promise.all(X)}catch(P){return b.type==t.Z.TEXT&&!b.isFragmented||ae.indexOf('codecs="stpp')!==-1||ae.indexOf('codecs="vtt')!==-1||ae.indexOf("text/vtt")!==-1?fe(R):Promise.reject(P)}},updateAppendWindow:ie,changeType:de},_=(0,E.Z)(A).getInstance().getLogger(r),r}Ve.__dashjs_factory_name="SourceBufferSink";var ye=h.Z.getClassFactory(Ve);function ke(o){var r,l,_,I=this.context,b=[],m=o;function A(F,j){return b=b.filter(function(U){return!((isNaN(j)||U.start<j)&&(isNaN(F)||U.end>F))}),Promise.resolve()}return r={getAllBufferRanges:function(){for(var F=[],j=0;j<b.length;j++){var U=b[j];F.length===0||U.start>F[F.length-1].end?F.push({start:U.start,end:U.end}):F[F.length-1].end=U.end}var w={start:function(q){return F[q].start},end:function(q){return F[q].end}};return Object.defineProperty(w,"length",{get:function(){return F.length}}),w},append:function(F){return F.segmentType!=="InitializationSegment"?(b.push(F),b.sort(function(j,U){return j.start-U.start}),_=null):_=F,l.debug("PreBufferSink appended chunk s: "+F.start+"; e: "+F.end),m&&m({chunk:F}),Promise.resolve()},remove:A,abort:function(){return Promise.resolve()},discharge:function(F,j){var U=function(w,q){return b.filter(function(B){return(isNaN(q)||B.start<q)&&(isNaN(w)||B.end>w)})}(F,j);return _&&(U.push(_),_=null),A(F,j),U},reset:function(){b=[],_=null,m=null},updateTimestampOffset:function(){return Promise.resolve()},waitForUpdateEnd:function(F){F()},getBuffer:function(){return this}},l=(0,E.Z)(I).getInstance().getLogger(r),r}ke.__dashjs_factory_name="PreBufferSink";var Ke=h.Z.getClassFactory(ke);function tt(){var o={};return{save:function(r){var l=r.streamId,_=r.representationId;o[l]=o[l]||{},o[l][_]=r},extract:function(r,l){return o&&o[r]&&o[r][l]?o[r][l]:null},reset:function(){o={}}}}tt.__dashjs_factory_name="InitCache";var ve=h.Z.getSingletonFactory(tt),Fe=.01,pt="BufferController";function ft(o){o=o||{};var r,l,_,I,b,m,A,F,j,U,w,q,B,me,re,de,fe,G,ie,K,ue,g=this.context,M=(0,p.Z)(g).getInstance(),L=o.errHandler,N=o.fragmentModel,R=o.representationController,Q=o.adapter,Y=o.textController,ae=o.abrController,X=o.playbackController,P=o.streamInfo,se=o.type,pe=o.settings;function Le(Pe){var rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise(function(J,Ae){m=Pe,j&&rt&&typeof j.discharge=="function"?(U=j,Oe(rt).then(function(){J()}).catch(function(ut){Ae(ut)})):J()})}function De(Pe){return Q.convertRepresentationToRepresentationInfo(R.getRepresentationForQuality(Pe))}function Oe(Pe){var rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return new Promise(function(J,Ae){G&&Pe?m?(w=!1,ot(Pe,rt).then(function(ut){J(ut)}).catch(function(ut){Ae(ut)})):(w=!0,we().then(function(ut){J(ut)}).catch(function(ut){Ae(ut)})):J(null)})}function we(){var Pe=this;return new Promise(function(rt,J){var Ae=ae.getQualityFor(se,P.id);j=Ke(g).create(_e.bind(Pe)),tn(De(Ae)).then(function(){rt(j)}).catch(function(){J()})})}function ot(Pe,rt){return new Promise(function(J,Ae){var ut=ae.getQualityFor(se,P.id);j=ye(g).create({mediaSource:m,textController:Y,eventBus:M}),function(_t,xt,an){var Tn=De(an);return xt&&xt[se]&&(se===t.Z.VIDEO||se===t.Z.AUDIO)?j.initializeForStreamSwitch(_t,Tn,xt[se]):j.initializeForFirstUse(P,_t,Tn)}(Pe,rt,ut).then(function(){return tn(De(ut))}).then(function(){J(j)}).catch(function(_t){l.fatal("Caught error on create SourceBuffer: "+_t),L.error(new te.Z($.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,$.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+se)),Ae(_t)})})}function at(Pe){pe.get().streaming.cacheInitSegments&&(l.info("Init fragment finished loading saving to",se+"'s init cache"),G.save(Pe.chunk)),l.debug("Append Init fragment",se," with representationId:",Pe.chunk.representationId," and quality:",Pe.chunk.quality,", data size:",Pe.chunk.bytes.byteLength),$e(Pe.chunk)}function Xe(Pe){$e(Pe.chunk,Pe.request)}function $e(Pe){var rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;j&&(j.append(Pe,rt).then(function(J){_e(J)}).catch(function(J){_e(J)}),Pe.mediaInfo.type===t.Z.VIDEO&&Gt(u.Z.VIDEO_CHUNK_RECEIVED,{chunk:Pe}))}function Dt(Pe){if(Pe&&Pe.length>0)for(var rt=0,J=Pe.length;rt<J;rt++)l.debug("Buffered range: "+Pe.start(rt)+" - "+Pe.end(rt)+", currentTime = ",X.getTime())}function _e(Pe){if(Pe.error)return Pe.error.code===22&&function(){if(fe=!0,b=.8*Zt(),l.warn("Quota exceeded, Critical Buffer: "+b),b>0){var Ae=Math.max(.2*b,1),ut=b-Ae,_t=Math.min(pe.get().streaming.buffer.bufferTimeAtTopQuality,.9*ut),xt=Math.min(pe.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*ut),an={streaming:{buffer:{bufferToKeep:parseFloat(Ae.toFixed(5)),bufferTimeAtTopQuality:parseFloat(_t.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(xt.toFixed(5))}}};pe.update(an)}}(),void(Pe.error.code!==22&&Yt()||(l.warn("Clearing playback buffer to overcome quota exceed situation"),Gt(u.Z.QUOTA_EXCEEDED,{criticalBufferLevel:b,quotaExceededTime:Pe.chunk.start}),qt(Wt())));if(j&&(lt(),fe=!1,(me=Pe.chunk)&&me.endFragment)){me&&!isNaN(me.index)&&(A=Math.max(me.index,A),dt());var rt=j.getAllBufferRanges();me.segmentType===Ze.w.MEDIA_SEGMENT_TYPE&&(Dt(rt),le(),function(){if(!isNaN(ue)&&!w)if(se===t.Z.AUDIO||se===t.Z.VIDEO){var Ae=X.getTime(),ut=xe(Ae,0),_t=xe(ue,0);if(ut&&_t&&ut.start===_t.start)ue=NaN;else{var xt=R.getCurrentRepresentation().segmentDuration,an=xe(ue,xt);an&&(pe.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(Ae-ue)>xt?ue<=an.end&&X.seek(Math.max(ue,an.start),!1,!0):Ae<an.start&&X.seek(an.start,!1,!0))}}else ue=NaN}());var J=!1;q&&(q.indexOf(me)>0&&(J=!0),q=null),me&&!J&&Gt(u.Z.BYTES_APPENDED_END_FRAGMENT,{quality:me.quality,startTime:me.start,index:me.index,bufferedRanges:rt,segmentType:me.segmentType,mediaType:se})}}function Be(){return new Promise(function(Pe,rt){var J=ct();if(!J||J.length===0)return le(),void Pe();qt(J).then(function(){Pe()}).catch(function(Ae){rt(Ae)})})}function ct(Pe){var rt=[],J=j.getAllBufferRanges();if(!J||J.length===0)return rt;if(!Pe&&Pe!==0||isNaN(Pe))rt.push({start:J.start(0),end:J.end(J.length-1)+.5});else{var Ae=function(_t,xt){var an=pe.get().streaming.buffer.bufferToKeep,Tn=xt.start(0);if(_t-Tn>an){var kn=Math.max(0,_t-an),On=N.getRequests({state:z.FRAGMENT_MODEL_EXECUTED,time:_t,threshold:Fe})[0];if(On&&(kn=Math.min(On.startTime,kn)),kn>0)return{start:Tn,end:kn}}return null}(Pe,J),ut=function(_t,xt){var an=xt.end(xt.length-1)+.5,Tn=Ut(_t),kn=P.manifestInfo.duration>=pe.get().streaming.buffer.longFormContentDurationThreshold?pe.get().streaming.buffer.bufferTimeAtTopQualityLongForm:pe.get().streaming.buffer.bufferTimeAtTopQuality,On=isNaN(Tn)?_t:Math.min(Tn,_t+kn);if(On>=xt.end(xt.length-1))return null;var Jn=N.getRequests({state:z.FRAGMENT_MODEL_EXECUTED,time:_t,threshold:Fe})[0];if(Jn&&(On=Math.max(Jn.startTime+Jn.duration,On)),pe.get().streaming.buffer.avoidCurrentTimeRangePruning){for(var Bn=0;Bn<xt.length;Bn++)if(xt.start(Bn)<=_t&&_t<=xt.end(Bn)&&xt.start(Bn)<=On&&On<=xt.end(Bn)){var Sr=On;On=Bn+1<xt.length?xt.start(Bn+1):xt.end(Bn)+1,l.debug("Buffered range ["+xt.start(Bn)+", "+xt.end(Bn)+"] overlaps with targetTime "+_t+" and range to be pruned ["+Sr+", "+an+"], using ["+On+", "+an+"] instead"+(On<an?"":" (no actual pruning)"));break}}return On<xt.end(xt.length-1)?{start:On,end:an}:null}(Pe,J);Ae&&rt.push(Ae),ut&&rt.push(ut)}return rt}function le(){(!K||se===t.Z.TEXT&&Y.isTextEnabled())&&lt()}function Me(){At()}function Ne(){At(),ue=NaN}function xe(Pe,rt){if(!j)return null;var J,Ae,ut=j.getAllBufferRanges(),_t=0,xt=0,an=null,Tn=null,kn=0,On=isNaN(rt)?.15:rt;if(ut!=null){for(Ae=0,J=ut.length;Ae<J;Ae++)if(_t=ut.start(Ae),xt=ut.end(Ae),an===null)kn=Math.abs(_t-Pe),(Pe>=_t&&Pe<xt||kn<=On)&&(an=_t,Tn=xt);else{if(!((kn=_t-Tn)<=On))break;Tn=xt}if(an!==null)return{start:an,end:Tn}}return null}function lt(){if(X){var Pe=X.getTime()||0;w&&(Pe=isNaN(ue)?0:ue);var rt=pe.get().streaming.gaps.jumpGaps&&!isNaN(pe.get().streaming.gaps.smallGapLimit)?pe.get().streaming.gaps.smallGapLimit:NaN;I=Math.max(function(J,Ae){var ut;return pe.get().streaming.gaps.jumpGaps&&(Ae=pe.get().streaming.gaps.smallGapLimit),(ut=xe(J,Ae))===null?0:ut.end-J}(Pe,rt),0),Gt(u.Z.BUFFER_LEVEL_UPDATED,{mediaType:se,bufferLevel:I}),At()}}function dt(){var Pe=A>=F-1,rt=X.getTimeToStreamEnd(P)-I<1e-5;!Pe&&!rt||_||(gt(!0),l.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ".concat(P.id," and type ").concat(se)))}function At(){se!==t.Z.AUDIO&&se!==t.Z.VIDEO||((!X.getLowLatencyModeEnabled()&&I<pe.get().streaming.buffer.stallThreshold||I===0)&&!_?Pt(y.Z.BUFFER_EMPTY):(_||I>=pe.get().streaming.buffer.stallThreshold||X.getLowLatencyModeEnabled()&&I>0)&&Pt(y.Z.BUFFER_LOADED))}function Pt(Pe){B===Pe||Pe===y.Z.BUFFER_EMPTY&&X.getTime()===0||se===t.Z.TEXT&&!Y.isTextEnabled()||(B=Pe,Gt(u.Z.BUFFER_LEVEL_STATE_CHANGED,{state:Pe}),Gt(Pe===y.Z.BUFFER_LOADED?u.Z.BUFFER_LOADED:u.Z.BUFFER_EMPTY),l.debug(Pe===y.Z.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function Vt(){j&&se!==t.Z.TEXT&&(_||qt(Wt()))}function Wt(){var Pe=[],rt=j.getAllBufferRanges();if(!rt||rt.length===0)return Pe;var J=X.getTime(),Ae=Math.max(0,J-pe.get().streaming.buffer.bufferToKeep),ut=N.getRequests({state:z.FRAGMENT_MODEL_EXECUTED,time:J,threshold:Fe})[0];if(ut)Ae=Math.min(ut.startTime,Ae);else if(J===0&&X.getIsDynamic())return[];if(rt.start(0)<=Ae){for(var _t={start:0,end:Ae},xt=0;xt<rt.length&&rt.end(xt)<=Ae;xt++)_t.end=rt.end(xt);_t.start<_t.end&&Pe.push(_t)}return Pe}function qt(Pe){return new Promise(function(rt,J){if(Pe&&j&&Pe.length!==0){var Ae=[];Pe.forEach(function(ut){Ae.push(function(_t){return new Promise(function(xt,an){_t.resolve=xt,_t.reject=an,ie.push(_t)})}(ut))}),de||Xt(),Promise.all(Ae).then(function(){rt()}).catch(function(ut){J(ut)})}else rt()})}function Xt(){try{if(ie.length===0||!j)return l.debug("Nothing to prune, halt pruning"),ie=[],void(de=!1);var Pe=j.getBuffer();if(!Pe||!Pe.buffered||Pe.buffered.length===0)return l.debug("SourceBuffer is empty (or does not exist), halt pruning"),ie=[],void(de=!1);var rt=ie.shift();l.debug("".concat(se,": Removing buffer from: ").concat(rt.start," to ").concat(rt.end)),de=!0,X.getTime()<rt.end&&gt(!1),j.remove(rt).then(function(J){Ht(J)}).catch(function(J){Ht(J)})}catch{de=!1}}function Ht(Pe){l.debug("onRemoved buffer from:",Pe.from,"to",Pe.to),j&&(Dt(j.getAllBufferRanges()),ie.length===0&&(de=!1,lt()),Pe.unintended&&(l.warn("Detected unintended removal from:",Pe.from,"to",Pe.to,"setting streamprocessor time to",Pe.from),Gt(u.Z.SEEK_TARGET,{time:Pe.from})),de?Xt():(K?K=!1:lt(),Gt(u.Z.BUFFER_CLEARED,{from:Pe.from,to:Pe.to,unintended:Pe.unintended,hasEnoughSpaceToAppend:Yt(),quotaExceeded:fe})))}function tn(Pe){return new Promise(function(rt){Pe&&Pe.MSETimeOffset!==void 0&&j&&j.updateTimestampOffset?j.updateTimestampOffset(Pe.MSETimeOffset).then(function(){rt()}).catch(function(){rt()}):rt()})}function un(){return j&&!_?j.updateAppendWindow(P):Promise.resolve()}function sn(){++re*(pe.get().streaming.wallclockTimeUpdateInterval/1e3)>=pe.get().streaming.buffer.bufferPruningInterval&&(re=0,Vt())}function fn(){At()}function gt(Pe){(_=Pe)?Gt(u.Z.BUFFERING_COMPLETED):F=Number.POSITIVE_INFINITY}function Zt(){try{var Pe,rt,J=j.getAllBufferRanges(),Ae=0;if(!J)return Ae;for(rt=0,Pe=J.length;rt<Pe;rt++)Ae+=J.end(rt)-J.start(rt);return Ae}catch{return 0}}function Ut(Pe){try{var rt=Pe,J=j.getAllBufferRanges();if(!J||J.length===0)return NaN;for(var Ae=0;rt===Pe&&Ae<J.length;){var ut=J.start(Ae),_t=J.end(Ae);rt>=ut&&rt<=_t&&(rt=_t),Ae+=1}return rt===Pe?NaN:rt}catch{}}function Yt(){var Pe=Zt();return isNaN(Pe)||Pe<b}function Gt(Pe,rt){var J=rt||{};M.trigger(Pe,J,{streamId:P.id,mediaType:se})}function Qe(Pe,rt){if(b=Number.POSITIVE_INFINITY,B=void 0,F=Number.POSITIVE_INFINITY,A=0,me=null,_=!1,de=!1,fe=!1,I=0,re=0,ie=[],ue=NaN,w=!1,j){var J=j;j=null,Pe||rt||J.abort().then(function(){J.reset(rt),J=null})}K=!1}return r={initialize:function(Pe){Le(Pe),M.on(u.Z.INIT_FRAGMENT_LOADED,at,r),M.on(u.Z.MEDIA_FRAGMENT_LOADED,Xe,r),M.on(u.Z.WALLCLOCK_TIME_UPDATED,sn,r),M.on(n.Z.PLAYBACK_PLAYING,Ne,r),M.on(n.Z.PLAYBACK_PROGRESS,le,r),M.on(n.Z.PLAYBACK_TIME_UPDATED,le,r),M.on(n.Z.PLAYBACK_RATE_CHANGED,fn,r),M.on(n.Z.PLAYBACK_STALLED,Me,r)},getStreamId:function(){return P.id},getType:function(){return se},getBufferControllerType:function(){return pt},createBufferSink:Oe,dischargePreBuffer:function(){if(j&&U&&typeof U.discharge=="function"){var Pe=U.getAllBufferRanges();if(Pe.length>0){for(var rt="Beginning "+se+"PreBuffer discharge, adding buffer for:",J=0;J<Pe.length;J++)rt+=" start: "+Pe.start(J)+", end: "+Pe.end(J)+";";l.debug(rt)}else l.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");q=[];for(var Ae=U.discharge(),ut=null,_t=0;_t<Ae.length;_t++){var xt=Ae[_t];if(xt.segmentType!==Ze.w.INIT_SEGMENT_TYPE){var an=G.extract(xt.streamId,xt.representationId);an&&ut!==an&&(q.push(an),j.append(an),ut=an)}q.push(xt),j.append(xt)}U.reset(),U=null}},getBuffer:function(){return j},getBufferLevel:function(){return I},getRangeAt:xe,hasBufferAtTime:function(Pe){try{var rt=j.getAllBufferRanges();if(!rt||rt.length===0)return!1;for(var J=0;J<rt.length;){var Ae=rt.start(J),ut=rt.end(J);if(Pe>=Ae&&Pe<=ut)return!0;J+=1}return!1}catch(_t){return l.error(_t),!1}},pruneBuffer:Vt,setMediaSource:Le,getMediaSource:function(){return m},appendInitSegmentFromCache:function(Pe){var rt=G.extract(P.id,Pe);return!!rt&&(l.info("Append Init fragment",se," with representationId:",rt.representationId," and quality:",rt.quality,", data size:",rt.bytes.byteLength),$e(rt),!0)},getIsBufferingCompleted:function(){return _},setIsBufferingCompleted:gt,getIsPruningInProgress:function(){return de},reset:function(Pe,rt){M.off(u.Z.INIT_FRAGMENT_LOADED,at,this),M.off(u.Z.MEDIA_FRAGMENT_LOADED,Xe,this),M.off(u.Z.WALLCLOCK_TIME_UPDATED,sn,this),M.off(n.Z.PLAYBACK_PLAYING,Ne,this),M.off(n.Z.PLAYBACK_PROGRESS,le,this),M.off(n.Z.PLAYBACK_TIME_UPDATED,le,this),M.off(n.Z.PLAYBACK_RATE_CHANGED,fn,this),M.off(n.Z.PLAYBACK_STALLED,Me,this),Qe(Pe,rt)},prepareForPlaybackSeek:function(){return _&&gt(!1),j.abort()},prepareForReplacementTrackSwitch:function(Pe){return new Promise(function(rt,J){j.abort().then(function(){return un()}).then(function(){return pe.get().streaming.buffer.useChangeTypeForTrackSwitch?j.changeType(Pe):Promise.resolve()}).then(function(){return Be()}).then(function(){gt(!1),rt()}).catch(function(Ae){J(Ae)})})},prepareForNonReplacementTrackSwitch:function(Pe){return new Promise(function(rt,J){un().then(function(){return pe.get().streaming.buffer.useChangeTypeForTrackSwitch?j.changeType(Pe):Promise.resolve()}).then(function(){rt()}).catch(function(Ae){J(Ae)})})},prepareForForceReplacementQualitySwitch:function(Pe){return new Promise(function(rt,J){j.abort().then(function(){return un()}).then(function(){return Be()}).then(function(){return tn(Pe)}).then(function(){gt(!1),rt()}).catch(function(Ae){J(Ae)})})},updateAppendWindow:un,getAllRangesWithSafetyFactor:ct,getContinuousBufferTimeForTargetTime:Ut,clearBuffers:qt,pruneAllSafely:Be,updateBufferTimestampOffset:tn,setSeekTarget:function(Pe){ue=Pe},segmentRequestingCompleted:function(Pe){isNaN(Pe)||(F=Pe,dt())}},l=(0,E.Z)(g).getInstance().getLogger(r),G=ve(g).getInstance(),Qe(),r}ft.__dashjs_factory_name=pt;var qe=h.Z.getClassFactory(ft),Je="NotFragmentedTextBufferController";function ge(o){o=o||{};var r,l,_,I,b,m,A=this.context,F=(0,p.Z)(A).getInstance(),j=o.textController,U=o.errHandler,w=o.streamInfo,q=o.type;function B(de){I=de}function me(de){var fe,G;l!==de&&(l=de)&&(fe=u.Z.BUFFERING_COMPLETED,G={},F.trigger(fe,G,{streamId:w.id,mediaType:q}))}function re(de){de.chunk.bytes&&!l&&(m.save(de.chunk),b.append(de.chunk),me(!0))}return r={initialize:function(de){B(de)},getStreamId:function(){return w.id},getType:function(){return q},getBufferControllerType:function(){return Je},createBufferSink:function(de){return new Promise(function(fe,G){try{(b=ye(A).create({mediaSource:I,textController:j,eventBus:F})).initializeForFirstUse(w,de),_||(b.getBuffer()&&typeof b.getBuffer().initialize=="function"&&b.getBuffer().initialize(),_=!0),fe(b)}catch(ie){U.error(new te.Z($.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,$.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+q)),G(ie)}})},dischargePreBuffer:function(){},getBuffer:function(){return b},getBufferLevel:function(){return 0},getRangeAt:function(){return null},pruneBuffer:function(){},hasBufferAtTime:function(){return!0},getAllRangesWithSafetyFactor:function(){return[]},getContinuousBufferTimeForTargetTime:function(){return Number.POSITIVE_INFINITY},setMediaSource:B,getMediaSource:function(){return I},appendInitSegmentFromCache:function(de){return m.extract(w.id,de)!==null},getIsBufferingCompleted:function(){return l},setIsBufferingCompleted:me,getIsPruningInProgress:function(){return!1},reset:function(de){F.off(u.Z.INIT_FRAGMENT_LOADED,re,r),!de&&b&&(b.abort(),b.reset(),b=null)},clearBuffers:function(){return Promise.resolve()},prepareForPlaybackSeek:function(){return Promise.resolve()},prepareForReplacementTrackSwitch:function(){return l=!1,Promise.resolve()},setSeekTarget:function(){},updateAppendWindow:function(){return Promise.resolve()},pruneAllSafely:function(){return Promise.resolve()},updateBufferTimestampOffset:function(){return Promise.resolve()},segmentRequestingCompleted:function(){}},_=!1,I=null,l=!1,m=ve(A).getInstance(),F.on(u.Z.INIT_FRAGMENT_LOADED,re,r),r}ge.__dashjs_factory_name=Je;var he=h.Z.getClassFactory(ge);function Ye(o){o=o||{};var r,l,_,I,b,m,A,F,j,U,w,q,B,me=this.context,re=(0,p.Z)(me).getInstance(),de=o.dashMetrics,fe=o.mediaPlayerModel,G=o.fragmentModel,ie=o.abrController,K=o.playbackController,ue=o.textController,g=o.type,M=o.bufferController,L=o.representationController,N=o.settings;function R(){q=!0}function Q(){q=!1}function Y(ot){if(!M.getIsBufferingCompleted()){ae();var at=isNaN(ot)?0:ot;b=setTimeout(X,at)}}function ae(){b&&(clearTimeout(b),b=null)}function X(){try{if(function(){try{return g===t.Z.TEXT&&!ue.isTextEnabled()||K.isPaused()&&(!K.getStreamController().getInitialPlayback()||!K.getStreamController().getAutoPlay())&&!N.get().streaming.scheduling.scheduleWhilePaused}catch{return!1}}())return void ae();if(function(){try{return!!q&&L.getCurrentRepresentationInfo()&&(isNaN(j)||U||(Xe=l.id,$e=ie.getMaxAllowedIndexFor(g,Xe),!(!isNaN(F)&&F==$e||(_.info("Top quality "+g+" index has changed from "+F+" to "+$e),F=$e,0)))||function(){var Dt=L.getCurrentRepresentationInfo();return!g||!Dt||de.getCurrentBufferLevel(g)<P()}())}catch{return!1}var Xe,$e}()){var ot=!1;B&&(ot=ie.checkPlaybackQuality(g,l.id)),ot||(at=L.getCurrentRepresentationInfo(),w||at.quality!==j||U?(U?(_.debug("Switch track for "+g+", representation id = "+at.id),U=!1):_.debug("Quality has changed, get init request for representationid = "+at.id),re.trigger(u.Z.INIT_FRAGMENT_NEEDED,{representationId:at.id,sender:r},{streamId:l.id,mediaType:g}),B=!1,w=!1):(_.debug("Media segment needed for ".concat(g," and stream id ").concat(l.id)),re.trigger(u.Z.MEDIA_FRAGMENT_NEEDED,{},{streamId:l.id,mediaType:g}),B=!0))}else Y(K.getLowLatencyModeEnabled()?N.get().streaming.scheduling.lowLatencyTimeout:N.get().streaming.scheduling.defaultTimeout)}catch{Y(K.getLowLatencyModeEnabled()?N.get().streaming.scheduling.lowLatencyTimeout:N.get().streaming.scheduling.defaultTimeout)}var at}function P(){var ot=NaN,at=L.getCurrentRepresentationInfo();return g&&at&&(ot=g===t.Z.TEXT?function(){try{if(ue.isTextEnabled()){var Xe=L.getCurrentRepresentationInfo();if(isNaN(Xe.fragmentDuration)){var $e=de.getCurrentSchedulingInfo(y.Z.SCHEDULING_INFO);return $e?$e.duration:0}return Xe.fragmentDuration}return 0}catch{return 0}}():g===t.Z.AUDIO&&m?function(){try{var Xe=de.getCurrentBufferLevel(t.Z.VIDEO),$e=L.getCurrentRepresentationInfo();return isNaN($e.fragmentDuration)?Xe+1:Math.max(Xe+1,$e.fragmentDuration)}catch{return 0}}():function(){try{var Xe=L.getCurrentRepresentationInfo().mediaInfo.streamInfo;return ie.isPlayingAtTopQuality(Xe)?Xe.manifestInfo.duration>=N.get().streaming.buffer.longFormContentDurationThreshold?N.get().streaming.buffer.bufferTimeAtTopQualityLongForm:N.get().streaming.buffer.bufferTimeAtTopQuality:fe.getStableBufferTime()}catch{return fe.getStableBufferTime()}}()),ot}function se(){pe(!0)}function pe(ot){if(K&&G){var at=G.getRequests({state:z.FRAGMENT_MODEL_EXECUTED,time:K.getTime(),threshold:0})[0];at&&K.getTime()>=at.startTime&&((!A.mediaInfo||at.mediaInfo.type===A.mediaInfo.type&&at.mediaInfo.index!==A.mediaInfo.index)&&ot&&re.trigger(u.Z.TRACK_CHANGE_RENDERED,{mediaType:g,oldMediaInfo:A.mediaInfo,newMediaInfo:at.mediaInfo,streamId:l.id}),at.quality===A.quality&&at.adaptationIndex===A.adaptationIndex||!ot||(_.debug("Quality change rendered for streamId ".concat(l.id," and type ").concat(g)),re.trigger(u.Z.QUALITY_CHANGE_RENDERED,{mediaType:g,oldQuality:A.quality,newQuality:at.quality,streamId:l.id})),A={mediaInfo:at.mediaInfo,quality:at.quality,adaptationIndex:at.adaptationIndex})}}function Le(){G.abortRequests(),ae()}function De(){N.get().streaming.scheduling.scheduleWhilePaused||Y()}function Oe(ot){de.updatePlayListTraceMetrics({playbackspeed:ot.playbackRate.toString()})}function we(){B=!0,I=0,j=NaN,A={mediaInfo:void 0,quality:NaN,adaptationIndex:NaN},F=NaN,U=!1,w=!1,q=!0}return r={initialize:function(ot){m=ot,re.on(u.Z.URL_RESOLUTION_FAILED,Le,r),re.on(n.Z.PLAYBACK_STARTED,De,r),re.on(n.Z.PLAYBACK_RATE_CHANGED,Oe,r),re.on(n.Z.PLAYBACK_TIME_UPDATED,se,r),re.on(n.Z.MANAGED_MEDIA_SOURCE_START_STREAMING,R,r),re.on(n.Z.MANAGED_MEDIA_SOURCE_END_STREAMING,Q,r)},getType:function(){return g},getStreamId:function(){return l.id},setTimeToLoadDelay:function(ot){I=ot},getTimeToLoadDelay:function(){return I},setSwitchTrack:function(ot){U=ot},getSwitchTrack:function(){return U},startScheduleTimer:Y,clearScheduleTimer:ae,reset:function(){re.off(u.Z.URL_RESOLUTION_FAILED,Le,r),re.off(n.Z.PLAYBACK_STARTED,De,r),re.off(n.Z.PLAYBACK_RATE_CHANGED,Oe,r),re.off(n.Z.PLAYBACK_TIME_UPDATED,se,r),re.off(n.Z.MANAGED_MEDIA_SOURCE_START_STREAMING,R,r),re.off(n.Z.MANAGED_MEDIA_SOURCE_END_STREAMING,Q,r),ae(),pe(!1),we(),l=null},getBufferTarget:P,getPlaybackController:function(){return K},setCheckPlaybackQuality:function(ot){B=ot},setInitSegmentRequired:function(ot){w=ot},setLastInitializedQuality:function(ot){j=ot}},_=(0,E.Z)(me).getInstance().getLogger(r),we(),l=o.streamInfo,r}Ye.__dashjs_factory_name="ScheduleController";var f=h.Z.getClassFactory(Ye),i=D(7387);function v(o){var r,l,_,I,b,m,A=(o=o||{}).eventBus,F=o.events,j=o.abrController,U=o.dashMetrics,w=o.playbackController,q=o.timelineConverter,B=o.type,me=o.streamInfo,re=o.dashConstants,de=o.segmentsController,fe=o.isDynamic,G=o.adapter;function ie(){return B}function K(){return _}function ue(){return m}function g(){l=null,_=!0,I=[],b=null}function M(ae){return new Promise(function(X,P){var se=ae.hasInitialization(),pe=ae.hasSegments(),Le=[];Le.push(de.updateInitData(ae,se)),Le.push(de.updateSegmentData(ae,pe)),Promise.all(Le).then(function(De){var Oe;De[0]&&!De[0].error&&(ae=function(we,ot){return ot&&!ot.error&&ot.representation?ot.representation:we}(ae,De[0])),De[1]&&!De[1].error&&(ae=function(we,ot){if(ot&&!ot.error){var at,Xe,$e,Dt,_e=ot.segments,Be=[],ct=0;for(at=0,Xe=_e?_e.length:0;at<Xe;at++)$e=_e[at],(Dt=(0,i.TJ)(q,fe,we,$e.startTime,$e.duration,$e.timescale,$e.media,$e.mediaRange,ct))&&(Be.push(Dt),Dt=null,ct++);return Be.length>0&&(we.segments=Be),we}}(ae,De[1])),(Oe=ae).mediaFinishedInformation=de.getMediaFinishedInformation(Oe),function(we){if(K()){var ot,at,Xe=U.getCurrentManifestUpdate(),$e=!1;if(Xe){for(var Dt=0;Dt<Xe.representationInfo.length;Dt++)if((ot=Xe.representationInfo[Dt]).index===we.index&&ot.mediaType===ie()){$e=!0;break}$e||U.addManifestUpdateRepresentationInfo(we,ie())}if(function(){for(var Be=0,ct=I.length;Be<ct;Be++){var le=I[Be].segmentInfoType;if(!I[Be].hasInitialization()||(le===re.SEGMENT_BASE||le===re.BASE_URL)&&!I[Be].segments)return!1}return!0}()){j.setPlaybackQuality(B,me,(at=m,I.indexOf(at)));var _e=U.getCurrentDVRInfo(B);_e&&U.updateManifestUpdateInfo({latency:_e.range.end-w.getTime()}),U.getCurrentRepresentationSwitch(ue().adaptation.type)||L(),R()}}}(ae),X()}).catch(function(De){P(De)})})}function L(){(function(){if(!(j&&U&&w&&q))throw new Error(t.Z.MISSING_CONFIG_ERROR)})();var ae=new Date,X=ue(),P=1e3*w.getTime();X&&U.addRepresentationSwitch(X.adaptation.type,ae,P,X.id),A.trigger(n.Z.REPRESENTATION_SWITCH,{mediaType:B,streamId:me.id,currentRepresentation:X,numberOfRepresentations:I.length},{streamId:me.id,mediaType:B})}function N(ae){return ae==null||ae>=I.length?null:I[ae]}function R(ae){_=!1,A.trigger(F.DATA_UPDATE_COMPLETED,{data:l,currentRepresentation:m,error:ae},{streamId:me.id,mediaType:B})}function Q(ae){m=ae,b=G.convertRepresentationToRepresentationInfo(m)}function Y(ae){if(ae.newDuration){var X=ue();X&&X.adaptation.period&&(X.adaptation.period.duration=ae.newDuration)}}return r={getStreamId:function(){return me.id},getType:ie,getData:function(){return l},isUpdating:K,updateData:function(ae,X,P,se,pe){return new Promise(function(Le,De){if(_=!0,I=X,l=ae,Q(N(pe)),P!==t.Z.VIDEO&&P!==t.Z.AUDIO&&(P!==t.Z.TEXT||!se))return R(),void Le();for(var Oe=[],we=0,ot=I.length;we<ot;we++){var at=I[we];Oe.push(M(at))}Promise.all(Oe).then(function(){Q(N(pe)),Le()}).catch(function(Xe){De(Xe)})})},getCurrentRepresentation:ue,getCurrentRepresentationInfo:function(){return b},getRepresentationForQuality:N,prepareQualityChange:function(ae){Q(N(ae)),L()},reset:function(){A.off(n.Z.MANIFEST_VALIDITY_CHANGED,Y,r),g()}},g(),A.on(n.Z.MANIFEST_VALIDITY_CHANGED,Y,r),r}v.__dashjs_factory_name="RepresentationController";var S=h.Z.getClassFactory(v),W=D(3106),H=D(9326),Te=D(7473),Ge=D(2594);function Ce(o,r){if(!(o instanceof r))throw new TypeError("Cannot call a class as a function")}var be=function o(){Ce(this,o),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};be.INITIAL_PLAYOUT_START_REASON="initial_playout",be.SEEK_START_REASON="seek",be.RESUME_FROM_PAUSE_START_REASON="resume",be.METRICS_COLLECTION_START_REASON="metrics_collection_start";var Se=function o(){Ce(this,o),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};Se.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",Se.REBUFFERING_REASON="rebuffering",Se.USER_REQUEST_STOP_REASON="user_request",Se.END_OF_PERIOD_STOP_REASON="end_of_period",Se.END_OF_CONTENT_STOP_REASON="end_of_content",Se.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",Se.FAILURE_STOP_REASON="failure";var Ue=D(7802);function ze(){return{ntpToUTC:function(o){var r=new Date(Date.UTC(1900,0,1,0,0,0));return new Date(r.getTime()+o).getTime()}}}ze.__dashjs_factory_name="TimeUtils";var It=h.Z.getSingletonFactory(ze);function nt(o){o=o||{};var r,l,_,I,b,m,A,F,j,U,w,q,B,me,re,de=this.context,fe=(0,p.Z)(de).getInstance(),G=o.streamInfo,ie=o.type,K=o.errHandler,ue=o.mimeType,g=o.timelineConverter,M=o.adapter,L=o.manifestModel,N=o.mediaPlayerModel,R=o.fragmentModel,Q=o.abrController,Y=o.playbackController,ae=o.mediaController,X=o.textController,P=o.dashMetrics,se=o.settings,pe=o.boxParser,Le=o.segmentBlacklistController;function De(){return G.id}function Oe(){return ie}function we(){return M.getIsTextTrack(F.getData())}function ot(){b=[],I=null,me=0,j=!1,U=!1,w=!1,re=null}function at(Qe){return!isNaN(Qe)&&!isNaN(G.duration)&&isFinite(G.duration)&&Qe>=G.start+G.duration}function Xe(Qe){var Pe=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(Qe.sender){if(Y.getIsManifestUpdateInProgress())ct();else if((!we()||X.isTextEnabled())&&m&&Qe.representationId&&!m.appendInitSegmentFromCache(Qe.representationId)){var rt=F.getCurrentRepresentation();if(rt.range===0)return void $e();var J=q?q.getInitRequest(I,rt):null;J?R.executeRequest(J):Pe&&(A.setInitSegmentRequired(!0),ct())}}}function $e(Qe){var Pe=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(Y.getIsManifestUpdateInProgress()||m.getIsPruningInProgress())ct();else{var rt=Be();rt?(j=!1,U=!1,Dt(rt)):_e(Pe)}}function Dt(Qe){isNaN(Qe.startTime+Qe.duration)||(me=Qe.startTime+Qe.duration),Qe.delayLoadingTime=new Date().getTime()+A.getTimeToLoadDelay(),A.setTimeToLoadDelay(0),function(Pe){var rt=Pe.url;return Pe.range&&(rt=rt.concat("_",Pe.range)),Le.contains(rt)}(Qe)?(l.warn("Fragment request url ".concat(Qe.url," for stream id ").concat(G.id," and media type ").concat(ie," is on the ignore list and will be skipped")),ct()):(l.debug("Next fragment request url for stream id ".concat(G.id," and media type ").concat(ie," is ").concat(Qe.url)),R.executeRequest(Qe))}function _e(Qe){var Pe,rt=F.getCurrentRepresentation();if(!se.get().streaming.gaps.enableSeekFix||!j&&Y.getTime()!==0||(_?_&&rt.segmentInfoType===e.Z.SEGMENT_TIMELINE&&(Pe=q.getValidTimeAheadOfTargetTime(me,I,rt,se.get().streaming.gaps.threshold)):Pe=q.getValidTimeAheadOfTargetTime(me,I,rt,se.get().streaming.gaps.threshold),isNaN(Pe)||Pe===me)){if(q.isLastSegmentRequested(rt,me)){var J=q.getCurrentIndex();return l.debug("Segment requesting for stream ".concat(G.id," has finished")),fe.trigger(u.Z.STREAM_REQUESTING_COMPLETED,{segmentIndex:J},{streamId:G.id,mediaType:ie}),m.segmentRequestingCompleted(J),void A.clearScheduleTimer()}Qe&&ct()}else Y.isSeeking()||Y.getTime()===0?(l.warn("Adjusting playback time ".concat(Pe," because of gap in the manifest. Seeking by ").concat(Pe-me)),Y.seek(Pe,!1,!1)):(l.warn("Adjusting buffering time ".concat(Pe," because of gap in the manifest. Adjusting time by ").concat(Pe-me)),Gt(Pe),Qe&&ct())}function Be(){var Qe,Pe=un();if(isNaN(me)||Oe()===t.Z.TEXT&&!X.isTextEnabled())return null;if(q){var rt=F&&Pe?F.getRepresentationForQuality(Pe.quality):null;Qe=j?q.getSegmentRequestForTime(I,rt,me):U?q.repeatSegmentRequest(I,rt):q.getNextSegmentRequest(I,rt)}return Qe}function ct(){A.startScheduleTimer(Y.getLowLatencyModeEnabled()?se.get().streaming.scheduling.lowLatencyTimeout:se.get().streaming.scheduling.defaultTimeout)}function le(Qe){Qe.error||m.getIsBufferingCompleted()||m.updateBufferTimestampOffset(Qe.currentRepresentation)}function Me(Qe){P.addBufferState(ie,Qe.state,A.getBufferTarget()),Qe.state!==y.Z.BUFFER_EMPTY||Y.isSeeking()||(l.info("Buffer is empty! Stalling!"),P.pushPlayListTraceMetrics(new Date,Se.REBUFFERING_REASON))}function Ne(Qe){R.syncExecutedRequestsWithBufferedRange(m.getBuffer().getAllBufferRanges(),G.duration),Qe.quotaExceeded&&Qe.from>Y.getTime()&&Gt(Qe.from),Qe.hasEnoughSpaceToAppend&&Qe.quotaExceeded&&A.startScheduleTimer()}function xe(Qe){if(Qe&&Qe.lastRequestAppended&&Qe.lastRequestAppended.url){var Pe=Qe.lastRequestAppended.url;Qe.lastRequestAppended.range&&(Pe=Pe.concat("_",Qe.lastRequestAppended.range)),l.warn("Blacklisting segment with url ".concat(Pe)),Le.add(Pe)}}function lt(Qe){if(l.debug("Appended bytes for ".concat(Qe.mediaType," and stream id ").concat(Qe.streamId)),Qe.segmentType===Ze.w.INIT_SEGMENT_TYPE){var Pe=Qe.quality;A.setLastInitializedQuality(Pe),l.info("["+ie+"] lastInitializedRepresentationInfo changed to "+Qe.quality)}re?dt(re):A.startScheduleTimer(0)}function dt(Qe){var Pe=R.getRequests({state:z.FRAGMENT_MODEL_LOADING});if(Pe&&Pe.length>0)return l.debug("Preparing for default quality switch: Waiting for ongoing segment request to be finished before applying switch."),void(re=Qe);m.updateBufferTimestampOffset(Qe).then(function(){A.setCheckPlaybackQuality(!1),I.segmentAlignment||I.subSegmentAlignment?A.startScheduleTimer():Ut(),re=null,w=!1}).catch(function(){re=null,w=!1})}function At(Qe){l.info("onFragmentLoadingAbandoned request: "+Qe.request.url+" has been aborted"),Y.isSeeking()||A.getSwitchTrack()||w||(l.info("onFragmentLoadingAbandoned request: "+Qe.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),Qe.request&&Qe.request.isInitializationRequest()?A.setInitSegmentRequired(!0):Gt(Qe.request.startTime+Qe.request.duration/2),A.startScheduleTimer(0))}function Pt(Qe){l.info("OnFragmentLoadingCompleted for stream id "+G.id+" and media type "+ie+" - Url:",Qe.request?Qe.request.url:"undefined",Qe.request.range?", Range:"+Qe.request.range:""),we()&&A.startScheduleTimer(0),Qe.error&&Qe.request.serviceLocation&&function(Pe){l.info("Fragment loading completed with an error"),Pe&&Pe.request&&Pe.request.type&&(Pe.request.type===Ze.w.INIT_SEGMENT_TYPE?Xe({representationId:Pe.request.representationId,sender:{}},!1):Pe.request.type===Ze.w.MEDIA_SEGMENT_TYPE&&(Gt(Pe.request.startTime+Pe.request.duration/2),$e({},!1)))}(Qe)}function Vt(){Gt(Y.getTime()),tn().startScheduleTimer()}function Wt(Qe){var Pe=Qe.currentTrackInfo;if(Pe){var rt=b.find(function(J){return J.index===Pe.index&&J.lang===Pe.lang});rt&&Ht(rt).then(function(){m.setIsBufferingCompleted(!1),Gt(Y.getTime()),A.setInitSegmentRequired(!0),A.startScheduleTimer()})}}function qt(Qe){Gt(Qe.quotaExceededTime),A.clearScheduleTimer()}function Xt(){return m?m.getBuffer():null}function Ht(Qe){Qe===I||Qe&&I&&Qe.type!==I.type||(I=Qe);var Pe=M.getRealAdaptation(G,I),rt=M.getVoRepresentations(I);if(F){var J,Ae=F.getData(),ut=Q.getMaxAllowedIndexFor(ie,G.id),_t=Q.getMinAllowedIndexFor(ie,G.id),xt=null;return Ae!==null&&Ae.id===Pe.id||ie===t.Z.TEXT?J=Q.getQualityFor(ie,G.id):(xt=Q.getThroughputHistory().getAverageThroughput(ie,_)||Q.getInitialBitrateFor(ie,G.id),J=Q.getQualityForBitrate(I,xt,G.id)),_t!==void 0&&J<_t&&(J=_t),J>ut&&(J=ut),F.updateData(Pe,rt,ie,I.isFragmented,J)}return Promise.resolve()}function tn(){return A}function un(Qe){var Pe;return Qe!==void 0?((0,W.SE)(Qe),Pe=F?F.getRepresentationForQuality(Qe):null):Pe=F?F.getCurrentRepresentation():null,M.convertRepresentationToRepresentationInfo(Pe)}function sn(){return!!m&&m.getIsBufferingCompleted()}function fn(Qe){if(se.get().streaming.enableManifestTimescaleMismatchFix){var Pe=Qe.chunk,rt=Pe.bytes,J=un(Pe.quality),Ae=F&&J?F.getRepresentationForQuality(J.quality):null;J&&Ae&&(Ae.timescale=pe.getMediaTimescaleFromMoov(rt))}}function gt(Qe){var Pe=Qe.chunk,rt=Pe.bytes,J=Pe.quality,Ae=un(J),ut=F&&Ae?F.getRepresentationForQuality(Ae.quality):null;if(Ae&&ut){var _t;if(se.get().streaming.parseInbandPrft&&Qe.request.type===Ze.w.MEDIA_SEGMENT_TYPE){var xt=function(Jn,Bn){var Sr=Jn.getBoxes("prft"),Nr=[];return Sr.forEach(function(Cr){Nr.push(function(cr,hr){var $n="unknown";switch(cr.flags){case 0:$n=e.Z.PRODUCER_REFERENCE_TIME_TYPE.ENCODER;break;case 16:$n=e.Z.PRODUCER_REFERENCE_TIME_TYPE.APPLICATION;break;case 24:$n=e.Z.PRODUCER_REFERENCE_TIME_TYPE.CAPTURED}var br=1e3*cr.ntp_timestamp_sec+cr.ntp_timestamp_frac/Math.pow(2,32)*1e3;return{type:$n,ntpTimestamp:br=It(de).getInstance().ntpToUTC(br),mediaTime:cr.media_time/hr}}(Cr,Bn))}),Nr}(_t=_t||pe.parse(rt),ut.timescale);xt&&xt.length&&fe.trigger(n.Z.INBAND_PRFT,{data:xt},{streamId:G.id,mediaType:ie})}var an=M.getEventsFor(Ae.mediaInfo,null,G),Tn=M.getEventsFor(Ae,ut,G);if(an&&an.length>0||Tn&&Tn.length>0){var kn=R.getRequests({state:z.FRAGMENT_MODEL_EXECUTED,quality:J,index:Pe.index})[0],On=function(Jn,Bn,Sr,Nr){try{for(var Cr={},cr=[],hr=Sr.concat(Nr),$n=0,br=hr.length;$n<br;$n++)Cr[hr[$n].schemeIdUri+"/"+hr[$n].value]=hr[$n];var Dr=Jn.getBoxes("emsg");if(!Dr||Dr.length===0)return cr;for(var or=Jn.getBox("sidx"),Xr=!or||isNaN(or.earliest_presentation_time)||isNaN(or.timescale)?Bn&&!isNaN(Bn.mediaStartTime)?Bn.mediaStartTime:0:or.earliest_presentation_time/or.timescale,Si=Math.max(Xr,0),bi=F.getCurrentRepresentation(),Ar=0,Ai=Dr.length;Ar<Ai;Ar++){var Or=M.getEvent(Dr[Ar],Cr,Si,bi);Or&&cr.push(Or)}return cr}catch{return[]}}(_t=_t||pe.parse(rt),kn,an,Tn);fe.trigger(u.Z.INBAND_EVENTS,{events:On},{streamId:G.id})}}}function Zt(){var Qe=Y.getTime();se.get().streaming.buffer.flushBufferAtTrackSwitch&&Y.seek(Qe+.001,!1,!0),Gt(Qe),m.setSeekTarget(Qe),A.startScheduleTimer()}function Ut(){var Qe=Y.getTime(),Pe=m.getContinuousBufferTimeForTargetTime(Qe);Gt(isNaN(Pe)?Qe:Pe),A.startScheduleTimer()}function Yt(Qe){Qe&&!isNaN(Qe.time)&&(Gt(Qe.time),m.setSeekTarget(Qe.time))}function Gt(Qe){me=Qe,j=!0}return r={initialize:function(Qe,Pe,rt){B=(0,Ue.Z)(de).create({events:u.Z,eventBus:fe,streamInfo:G,timelineConverter:g,dashConstants:e.Z,segmentBaseController:o.segmentBaseController,type:ie}),q=(0,H.Z)(de).create({streamInfo:G,type:ie,timelineConverter:g,dashMetrics:P,mediaPlayerModel:N,baseURLController:o.baseURLController,errHandler:K,segmentsController:B,settings:se,boxParser:pe,events:u.Z,eventBus:fe,errors:$,debug:(0,E.Z)(de).getInstance(),requestModifier:(0,Te.Z)(de).getInstance(),dashConstants:e.Z,constants:t.Z,urlUtils:(0,Ge.Z)(de).getInstance()}),_=G.manifestInfo.isDynamic,q.initialize(_),Q.registerStreamType(ie,r),F=S(de).create({streamInfo:G,type:ie,abrController:Q,dashMetrics:P,playbackController:Y,timelineConverter:g,dashConstants:e.Z,events:u.Z,eventBus:fe,errors:$,isDynamic:_,adapter:M,segmentsController:B}),m=function(J,Ae){return J?J!==t.Z.TEXT||Ae?qe(de).create({streamInfo:G,type:J,mediaPlayerModel:N,manifestModel:L,fragmentModel:R,errHandler:K,mediaController:ae,representationController:F,adapter:M,textController:X,abrController:Q,playbackController:Y,settings:se}):he(de).create({streamInfo:G,type:J,mimeType:ue,fragmentModel:R,textController:X,errHandler:K,settings:se}):(K.error(new te.Z($.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,$.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null)}(ie,rt),m&&m.initialize(Qe),(A=f(de).create({streamInfo:G,type:ie,mimeType:ue,adapter:M,dashMetrics:P,mediaPlayerModel:N,fragmentModel:R,abrController:Q,playbackController:Y,textController:X,mediaController:ae,bufferController:m,representationController:F,settings:se})).initialize(Pe),me=0,j=!1,U=!1},getStreamId:De,getType:Oe,isUpdating:function(){return!!F&&F.isUpdating()},getBufferController:function(){return m},dischargePreBuffer:function(){m.dischargePreBuffer()},getFragmentModel:function(){return R},getScheduleController:tn,getRepresentationController:function(){return F},getRepresentationInfo:un,getBufferLevel:function(){return m?m.getBufferLevel():0},isBufferingCompleted:sn,createBufferSinks:function(Qe){var Pe=Xt();return Pe?Promise.resolve(Pe):m?m.createBufferSink(I,Qe):Promise.resolve(null)},updateStreamInfo:function(Qe){return G=Qe,sn()?Promise.resolve():m.updateAppendWindow()},getStreamInfo:function(){return G},selectMediaInfo:Ht,clearMediaInfoArray:function(){b=[]},addMediaInfo:function(Qe){b.indexOf(Qe)===-1&&b.push(Qe)},prepareTrackSwitch:function(){return new Promise(function(Qe){l.debug("Preparing track switch for type ".concat(ie));var Pe=ie===t.Z.TEXT||se.get().streaming.trackSwitchMode[ie]===t.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&Y.getTimeToStreamEnd(G)>se.get().streaming.buffer.stallThreshold;if(m.getIsBufferingCompleted()&&!Pe)return m.prepareForNonReplacementTrackSwitch(I.codec).then(function(){fe.trigger(u.Z.BUFFERING_COMPLETED,{},{streamId:G.id,mediaType:ie})}).catch(function(){fe.trigger(u.Z.BUFFERING_COMPLETED,{},{streamId:G.id,mediaType:ie})}),void Qe();A.clearScheduleTimer(),A.setSwitchTrack(!0),Pe?(fe.trigger(u.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:ie,streamId:G.id},{mediaType:ie,streamId:G.id}),R.abortRequests(),m.prepareForReplacementTrackSwitch(I.codec).then(function(){var rt=un();return m.updateBufferTimestampOffset(rt)}).then(function(){Zt(),Qe()}).catch(function(){Zt(),Qe()})):m.prepareForNonReplacementTrackSwitch(I.codec).then(function(){Ut(),Qe()}).catch(function(){Ut(),Qe()})})},prepareQualityChange:function(Qe){re&&l.warning("Canceling queued representation switch to ".concat(re.quality," for ").concat(ie)),l.debug("Preparing quality switch for type ".concat(ie));var Pe=Qe.newQuality;w=!0,A.clearScheduleTimer(),F.prepareQualityChange(Pe);var rt=un(Pe);Qe.reason&&Qe.reason.forceReplace?function(J){R.abortRequests(),fe.trigger(u.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:ie,streamId:G.id},{mediaType:ie,streamId:G.id}),A.setCheckPlaybackQuality(!1),m.prepareForForceReplacementQualitySwitch(J).then(function(){Zt(),re=null,w=!1}).catch(function(){Zt(),re=null,w=!1})}(rt):Qe&&Qe.reason&&Qe.reason.forceAbandon?function(J){m.updateBufferTimestampOffset(J).then(function(){R.abortRequests(),U=!0,A.setCheckPlaybackQuality(!1),A.startScheduleTimer(),w=!1,re=null}).catch(function(){re=null,w=!1})}(rt):se.get().streaming.buffer.fastSwitchEnabled?function(J){var Ae=Y.getTime(),ut=1.5*(isNaN(J.fragmentDuration)?1:J.fragmentDuration),_t=R.getRequests({state:z.FRAGMENT_MODEL_EXECUTED,time:Ae+ut,threshold:0})[0];if(_t&&!we()){var xt=m.getBufferLevel(),an=Q.getAbandonmentStateFor(G.id,ie);_t.quality<J.quality&&xt>=ut&&an!==y.Z.ABANDON_LOAD?m.updateBufferTimestampOffset(J).then(function(){R.abortRequests(),Gt(Ae+ut),A.setCheckPlaybackQuality(!1),A.startScheduleTimer(),w=!1}).catch(function(){w=!1}):dt(J)}else dt(J)}(rt):dt(rt),P.pushPlayListTraceMetrics(new Date,Se.REPRESENTATION_SWITCH_STOP_REASON),P.createPlaylistTraceMetrics(rt.id,1e3*Y.getTime(),Y.getPlaybackRate())},getMediaInfo:function(){return I},getMediaSource:function(){return m.getMediaSource()},setMediaSource:function(Qe){return m.setMediaSource(Qe,I)},getBuffer:Xt,setExplicitBufferingTime:Gt,finalisePlayList:function(Qe,Pe){P.pushPlayListTraceMetrics(Qe,Pe)},probeNextRequest:function(){var Qe=un(),Pe=F&&Qe?F.getRepresentationForQuality(Qe.quality):null;return q.getNextSegmentRequestIdempotent(I,Pe)},prepareInnerPeriodPlaybackSeeking:function(Qe){return new Promise(function(Pe){if(m.hasBufferAtTime(Qe.seekTime))return m.pruneBuffer(),at(m.getContinuousBufferTimeForTargetTime(Qe.seekTime))&&m.setIsBufferingCompleted(!0),void Pe();A.clearScheduleTimer(),R.abortRequests(),m.prepareForPlaybackSeek().then(function(){var rt=m.getAllRangesWithSafetyFactor(Qe.seekTime);return m.clearBuffers(rt)}).then(function(){var rt=m.getContinuousBufferTimeForTargetTime(Qe.seekTime);if(at(rt))m.setIsBufferingCompleted(!0),Pe();else{var J=isNaN(rt)?Qe.seekTime:rt;Gt(J),m.setSeekTarget(J);var Ae=[];Ae.push(m.updateAppendWindow());var ut=un();Ae.push(m.updateBufferTimestampOffset(ut)),Promise.all(Ae).then(function(){A.setInitSegmentRequired(!0),A.setCheckPlaybackQuality(!1),A.startScheduleTimer(),Pe()})}}).catch(function(rt){l.error(rt)})})},prepareOuterPeriodPlaybackSeeking:function(){return new Promise(function(Qe,Pe){try{A.clearScheduleTimer(),R.abortRequests(),m.prepareForPlaybackSeek().then(function(){return m.pruneAllSafely()}).then(function(){Qe()})}catch(rt){Pe(rt)}})},reset:function(Qe,Pe){q&&q.reset(),m&&(m.reset(Qe,Pe),m=null),A&&(A.reset(),A=null),F&&(F.reset(),F=null),B&&(B=null),Q&&Q.unRegisterStreamType(De(),ie),fe.off(u.Z.DATA_UPDATE_COMPLETED,le,r),fe.off(u.Z.INIT_FRAGMENT_NEEDED,Xe,r),fe.off(u.Z.MEDIA_FRAGMENT_NEEDED,$e,r),fe.off(u.Z.INIT_FRAGMENT_LOADED,fn,r),fe.off(u.Z.MEDIA_FRAGMENT_LOADED,gt,r),fe.off(u.Z.BUFFER_LEVEL_STATE_CHANGED,Me,r),fe.off(u.Z.BUFFER_CLEARED,Ne,r),fe.off(u.Z.SEEK_TARGET,Yt,r),fe.off(u.Z.FRAGMENT_LOADING_ABANDONED,At,r),fe.off(u.Z.FRAGMENT_LOADING_COMPLETED,Pt,r),fe.off(u.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,Vt,r),fe.off(u.Z.SET_NON_FRAGMENTED_TEXT,Wt,r),fe.off(u.Z.QUOTA_EXCEEDED,qt,r),fe.off(u.Z.SOURCE_BUFFER_ERROR,xe,r),fe.off(u.Z.BYTES_APPENDED_END_FRAGMENT,lt,r),ot(),ie=null,G=null}},l=(0,E.Z)(de).getInstance().getLogger(r),ot(),fe.on(u.Z.DATA_UPDATE_COMPLETED,le,r,{priority:p.Z.EVENT_PRIORITY_HIGH}),fe.on(u.Z.INIT_FRAGMENT_NEEDED,Xe,r),fe.on(u.Z.MEDIA_FRAGMENT_NEEDED,$e,r),fe.on(u.Z.INIT_FRAGMENT_LOADED,fn,r),fe.on(u.Z.MEDIA_FRAGMENT_LOADED,gt,r),fe.on(u.Z.BUFFER_LEVEL_STATE_CHANGED,Me,r),fe.on(u.Z.BUFFER_CLEARED,Ne,r),fe.on(u.Z.SEEK_TARGET,Yt,r),fe.on(u.Z.FRAGMENT_LOADING_ABANDONED,At,r),fe.on(u.Z.FRAGMENT_LOADING_COMPLETED,Pt,r),fe.on(u.Z.QUOTA_EXCEEDED,qt,r),fe.on(u.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,Vt,r),fe.on(u.Z.SET_NON_FRAGMENTED_TEXT,Wt,r),fe.on(u.Z.SOURCE_BUFFER_ERROR,xe,r),fe.on(u.Z.BYTES_APPENDED_END_FRAGMENT,lt,r),r}nt.__dashjs_factory_name="StreamProcessor";var Lt=h.Z.getClassFactory(nt),Ot=function o(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,o),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null},Mt=D(9032);function Jt(o,r){if(o){if(typeof o=="string")return dn(o,r);var l=Object.prototype.toString.call(o).slice(8,-1);return l==="Object"&&o.constructor&&(l=o.constructor.name),l==="Map"||l==="Set"?Array.from(o):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?dn(o,r):void 0}}function dn(o,r){(r==null||r>o.length)&&(r=o.length);for(var l=0,_=new Array(r);l<r;l++)_[l]=o[l];return _}function pn(o){o=o||{};var r,l,_=this.context,I=o.requestModifier,b=o.lowLatencyThroughputModel,m=o.boxParser,A=(0,Ie.Z)(_).getInstance();function F(w){var q,B=new Date,me=w.request,re=new Headers;if(me.range&&re.append("Range","bytes="+me.range),w.headers)for(var de in w.headers){var fe=w.headers[de];fe&&re.append(de,fe)}me.requestStartDate||(me.requestStartDate=B),I&&I.modifyRequestHeader&&I.modifyRequestHeader({setRequestHeader:function(g,M){re.append(g,M)}},{url:w.url}),typeof window.AbortController=="function"&&(q=new AbortController,w.abortController=q,q.signal.onabort=w.onabort);var G={method:w.method,headers:re,credentials:w.withCredentials?"include":void 0,signal:q?q.signal:void 0},ie=A.get().streaming.abr.fetchThroughputCalculationMode,K=Date.now(),ue=0;new Promise(function(g){if(ie===t.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&b&&(ue=b.getThroughputCapacityDelayMS(me,1e3*l.getCurrentBufferLevel(me.mediaType))))return setTimeout(g,ue);g()}).then(function(){var g=Date.now();fetch(w.url,G).then(function(M){w.response||(w.response={}),w.response.status=M.status,w.response.statusText=M.statusText,w.response.responseURL=M.url,M.ok||w.onerror();var L,N="",R=function(le,Me){var Ne;if(typeof Symbol>"u"||le[Symbol.iterator]==null){if(Array.isArray(le)||(Ne=Jt(le))){Ne&&(le=Ne);var xe=0,lt=function(){};return{s:lt,n:function(){return xe>=le.length?{done:!0}:{done:!1,value:le[xe++]}},e:function(Vt){throw Vt},f:lt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var dt,At=!0,Pt=!1;return{s:function(){Ne=le[Symbol.iterator]()},n:function(){var Vt=Ne.next();return At=Vt.done,Vt},e:function(Vt){Pt=!0,dt=Vt},f:function(){try{At||Ne.return==null||Ne.return()}finally{if(Pt)throw dt}}}}(M.headers.keys());try{for(R.s();!(L=R.n()).done;){var Q=L.value;N+=Q+": "+M.headers.get(Q)+`\r
`}}catch(le){R.e(le)}finally{R.f()}if(w.response.responseHeaders=N,!M.body)return M.arrayBuffer().then(function(le){w.response.response=le;var Me={loaded:le.byteLength,total:le.byteLength,stream:!1};w.progress(Me),w.onload(),w.onend()});var Y,ae,X,P,se=parseInt(M.headers.get("Content-Length"),10),pe=0,Le=!1,De=new Uint8Array,Oe=0;if(ie===t.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&b){var we=g,ot=0,at=(X=M.body.tee(),P=2,function(le){if(Array.isArray(le))return le}(X)||function(le,Me){if(typeof Symbol<"u"&&Symbol.iterator in Object(le)){var Ne=[],xe=!0,lt=!1,dt=void 0;try{for(var At,Pt=le[Symbol.iterator]();!(xe=(At=Pt.next()).done)&&(Ne.push(At.value),!Me||Ne.length!==Me);xe=!0);}catch(Vt){lt=!0,dt=Vt}finally{try{xe||Pt.return==null||Pt.return()}finally{if(lt)throw dt}}return Ne}}(X,P)||Jt(X,P)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()),Xe=at[0],$e=at[1];Y=Xe.getReader(),ae=[],Y.read().then(function le(Me){var Ne=Me.value,xe=Me.done;if(ot=Date.now(),Ne&&Ne.length){var lt=ot-we,dt=Ne.length;ae.push({chunkDownloadTimeRelativeMS:ot-g,chunkDownloadDurationMS:lt,chunkBytes:dt,kbps:Math.round(8*dt/(lt/1e3)),bufferLevel:l.getCurrentBufferLevel(me.mediaType)})}if(xe){var At=ot-g,Pt=ae.reduce(function(Vt,Wt){return Vt+Wt.chunkBytes},0);return b.addMeasurement(me,At,ae,K,ue,N),void w.progress({loaded:Pt,total:Pt,lengthComputable:!0,time:b.getEstimatedDownloadDurationMS(me),stream:!0})}return we=Date.now(),Y.read().then(le)}),w.reader=$e.getReader()}else w.reader=M.body.getReader();var Dt=[],_e=[],Be=[],ct=!0;j(w,function le(Me){var Ne=Me.value;if(Me.done){if(De){if(ie!==t.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST){var xe=null,lt=null;ie===t.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING?(xe=function(Vt,Wt){try{var qt,Xt;qt=Vt.filter(function(Zt,Ut){return Ut<Vt.length-1}),Xt=Wt.filter(function(Zt,Ut){return Ut<Wt.length-1});var Ht=[];if(qt.length>1){for(var tn=0,un=0,sn=0;sn<qt.length;sn++)if(qt[sn]&&Xt[sn]){var fn=Xt[sn].ts-qt[sn].ts;if(fn>1)Ht.push(8*Xt[sn].bytes/fn),un=0;else{un===0&&(un=qt[sn].ts,tn=0);var gt=Xt[sn].ts-un;gt>1?(tn+=Xt[sn].bytes,Ht.push(8*tn/gt),un=0):tn+=Xt[sn].bytes}}if(Ht.length>0)return Ht.reduce(function(Zt,Ut){return Zt+Ut},0)/Ht.length}return null}catch{return null}}(_e,Be),xe&&(lt=8*pe/xe)):ie===t.Z.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA&&(lt=U(Dt,pe)),w.progress({loaded:pe,total:isNaN(se)?pe:se,lengthComputable:!0,time:lt,stream:!0})}w.response.response=De.buffer}return w.onload(),void w.onend()}if(Ne&&Ne.length>0){De=function(Vt,Wt){if(Vt.length===0)return Wt;var qt=new Uint8Array(Vt.length+Wt.length);return qt.set(Vt),qt.set(Wt,Vt.length),qt}(De,Ne),pe+=Ne.length,Dt.push({ts:Date.now(),bytes:Ne.length}),ie===t.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&ct&&m.findLastTopIsoBoxCompleted(["moof"],De,Oe).found&&(ct=!1,_e.push({ts:performance.now(),bytes:Ne.length}));var dt=m.findLastTopIsoBoxCompleted(["moov","mdat"],De,Oe);if(dt.found){var At,Pt=dt.lastCompletedOffset+dt.size;ie!==t.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING||ct||(ct=!0,Be.push({ts:performance.now(),bytes:De.length})),Pt===De.length?(At=De,De=new Uint8Array):(At=new Uint8Array(De.subarray(0,Pt)),De=De.subarray(Pt)),w.progress({data:At.buffer,lengthComputable:!1,noTrace:!0}),Oe=0}else Oe=dt.lastCompletedOffset,Le||(w.progress({lengthComputable:!1,noTrace:!0}),Le=!0)}j(w,le)})}).catch(function(M){w.onerror&&w.onerror(M)})})}function j(w,q){w.reader.read().then(q).catch(function(B){w.onerror&&w.response.status===200&&w.onerror(B)})}function U(w,q){try{if((w=w.filter(function(re){return re.bytes>q/4/w.length})).length>1){var B=0,me=(w[w.length-1].ts-w[0].ts)/w.length;return w.forEach(function(re,de){var fe=w[de+1];if(fe){var G=fe.ts-re.ts;B+=G<me?G:0}}),B}return null}catch{return null}}return r={load:function(w){I&&I.modifyRequest?(0,Te.k)(w,I).then(function(){return F(w)}):F(w)},abort:function(w){if(w.abortController)w.abortController.abort();else if(w.reader)try{w.reader.cancel(),w.onabort()}catch{}},calculateDownloadedTime:U,setup:function(w){l=w.dashMetrics}},r}pn.__dashjs_factory_name="FetchLoader";var Gn=h.Z.getClassFactory(pn),_n=D(1180);function An(o,r){for(var l=0;l<r.length;l++){var _=r[l];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(o,_.key,_)}}var qn=function(){function o(){(function(_,I){if(!(_ instanceof I))throw new TypeError("Cannot call a class as a function")})(this,o),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.mimeType=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.frameRate=null}var r,l;return r=o,(l=[{key:"hasInitialization",value:function(){return this.initialization!==null||this.range!==null}},{key:"hasSegments",value:function(){return this.segmentInfoType!==e.Z.BASE_URL&&this.segmentInfoType!==e.Z.SEGMENT_BASE&&!this.indexRange}}])&&An(r.prototype,l),o}(),yn=function o(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,o),this.period=null,this.index=-1,this.type=null},Xn=function o(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,o),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null};Xn.DEFAULT_ID="defaultId";var xn=Xn,Hn=function o(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,o),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.publishTime=null,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN},tr=D(2610),Vn=function o(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,o),this.type="",this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN},rr=function o(r,l,_,I){(function(b,m){if(!(b instanceof m))throw new TypeError("Cannot call a class as a function")})(this,o),this.url=r||"",this.serviceLocation=l||r||"",this.dvb_priority=_||1,this.dvb_weight=I||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.queryParams={}};rr.DEFAULT_DVB_PRIORITY=1,rr.DEFAULT_DVB_WEIGHT=1;var ir=rr,Pr=function o(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,o),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0},vt=function o(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,o),this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null},mt=function o(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,o),this.defaultServiceLocation=null,this.defaultServiceLocationArray=[],this.queryBeforeStart=!1,this.serverUrl=null,this.clientRequirement=!0};function yt(o,r){for(var l=0;l<r.length;l++){var _=r[l];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(o,_.key,_)}}var je=function(){function o(){(function(_,I){if(!(_ instanceof I))throw new TypeError("Cannot call a class as a function")})(this,o),this.schemeIdUri=null,this.value=null,this.id=null}var r,l;return r=o,(l=[{key:"init",value:function(_){return _&&(this.schemeIdUri=_.schemeIdUri?_.schemeIdUri:null,this.value=_.value?_.value:null,this.id=_.id?_.id:null),this}}])&&yt(r.prototype,l),o}(),st=D(3101),He=D.n(st);function it(){return{areEqual:function(o,r){return He()(o,r)}}}it.__dashjs_factory_name="ObjectUtils";var Rt=h.Z.getSingletonFactory(it),wt=D(7803),Bt=function o(r,l){(function(_,I){if(!(_ instanceof I))throw new TypeError("Cannot call a class as a function")})(this,o),this.url=r||"",this.serviceLocation=l||null,this.queryParams={}},jt=function o(r,l,_){(function(I,b){if(!(I instanceof b))throw new TypeError("Cannot call a class as a function")})(this,o),this.url=r||"",this.serviceLocation=l||null,this.ttl=_||NaN,this.queryParams={}};function Ct(o,r){var l;if(typeof Symbol>"u"||o[Symbol.iterator]==null){if(Array.isArray(o)||(l=ht(o))||r&&o&&typeof o.length=="number"){l&&(o=l);var _=0,I=function(){};return{s:I,n:function(){return _>=o.length?{done:!0}:{done:!1,value:o[_++]}},e:function(F){throw F},f:I}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var b,m=!0,A=!1;return{s:function(){l=o[Symbol.iterator]()},n:function(){var F=l.next();return m=F.done,F},e:function(F){A=!0,b=F},f:function(){try{m||l.return==null||l.return()}finally{if(A)throw b}}}}function ht(o,r){if(o){if(typeof o=="string")return kt(o,r);var l=Object.prototype.toString.call(o).slice(8,-1);return l==="Object"&&o.constructor&&(l=o.constructor.name),l==="Map"||l==="Set"?Array.from(o):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?kt(o,r):void 0}}function kt(o,r){(r==null||r>o.length)&&(r=o.length);for(var l=0,_=new Array(r);l<r;l++)_[l]=o[l];return _}function Ft(){var o,r,l,_,I=this.context,b=(0,Ge.Z)(I).getInstance(),m=Number.isInteger||function(g){return typeof g=="number"&&isFinite(g)&&Math.floor(g)===g};function A(g,M){if(!g)throw new Error("adaptation is not defined");if(!M)throw new Error("type is not defined");if(g.Representation_asArray&&g.Representation_asArray.length){var L=de(g.Representation_asArray[0]);if(L&&L.length>0&&wt.Y.indexOf(L[0].schemeIdUri)>=0)return M===t.Z.IMAGE}if(g.ContentComponent_asArray&&g.ContentComponent_asArray.length>0){if(g.ContentComponent_asArray.length>1)return M===t.Z.MUXED;if(g.ContentComponent_asArray[0].contentType===M)return!0}var N=M===t.Z.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(M);if(g.Representation_asArray&&g.Representation_asArray.length){var R=g.Representation_asArray[0].codecs;if(N.test(R))return!0}if(g.hasOwnProperty(e.Z.MIME_TYPE))return N.test(g.mimeType);if(g.Representation_asArray){for(var Q,Y=0;Y<g.Representation_asArray.length;Y++)if((Q=g.Representation_asArray[Y]).hasOwnProperty(e.Z.MIME_TYPE))return N.test(Q.mimeType)}return!1}function F(g){if(!g)throw new Error("adaptation is not defined");if(g.hasOwnProperty(e.Z.SEGMENT_TEMPLATE)||g.hasOwnProperty(e.Z.SEGMENT_TIMELINE)||g.hasOwnProperty(e.Z.SEGMENT_LIST)||g.hasOwnProperty(e.Z.SEGMENT_BASE))return!0;if(g.Representation_asArray&&g.Representation_asArray.length>0){var M=g.Representation_asArray[0];if(M.hasOwnProperty(e.Z.SEGMENT_TEMPLATE)||M.hasOwnProperty(e.Z.SEGMENT_TIMELINE)||M.hasOwnProperty(e.Z.SEGMENT_LIST)||M.hasOwnProperty(e.Z.SEGMENT_BASE))return!0}return!1}function j(g){return A(g,t.Z.VIDEO)}function U(g){return A(g,t.Z.TEXT)}function w(g){return A(g,t.Z.IMAGE)}function q(g){return g&&Array.isArray(g.Representation_asArray)&&g.Representation_asArray.sort(function(M,L){return M.bandwidth-L.bandwidth}),g}function B(g,M){return g&&g.Period_asArray&&m(M)&&g.Period_asArray[M]?g.Period_asArray[M].AdaptationSet_asArray:[]}function me(g){return g&&g.Period_asArray?g.Period_asArray:[]}function re(g){var M=!1;return g&&g.hasOwnProperty("type")&&(M=g.type===e.Z.DYNAMIC),M}function de(g){return g&&g.EssentialProperty_asArray&&g.EssentialProperty_asArray.length?g.EssentialProperty_asArray.map(function(M){return{schemeIdUri:M.schemeIdUri,value:M.value}}):null}function fe(g){if(!g||!g.S_asArray)return NaN;var M=g.S_asArray[0],L=g.S_asArray[1];return M.hasOwnProperty("d")?M.d:L.t-M.t}function G(g,M){if(!g)throw new Error("Period cannot be null or undefined");var L=xn.DEFAULT_ID+"_"+M;return g.hasOwnProperty(e.Z.ID)&&g.id.length>0&&g.id!=="__proto__"&&(L=g.id),L}function ie(g,M,L){var N,R=[];if(!g)return R;for(N=0;N<g.length;N++){var Q=new Pr;if(Q.timescale=1,Q.representation=M,!g[N].hasOwnProperty(t.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");Q.schemeIdUri=g[N].schemeIdUri,g[N].hasOwnProperty(e.Z.TIMESCALE)&&(Q.timescale=g[N].timescale),g[N].hasOwnProperty(e.Z.VALUE)&&(Q.value=g[N].value),R.push(Q),Q.period=L}return R}function K(g){var M=[],L=g.BaseURL_asArray||[g.baseUri],N=!1;return L.some(function(R){if(R){var Q=new ir,Y=R.__text||R;return b.isRelative(Y)&&(N=!0,g.baseUri&&(Y=b.resolve(Y,g.baseUri))),Q.url=Y,R.hasOwnProperty(e.Z.SERVICE_LOCATION)&&R.serviceLocation.length?Q.serviceLocation=R.serviceLocation:Q.serviceLocation=Y,R.hasOwnProperty(e.Z.DVB_PRIORITY)&&(Q.dvb_priority=R[e.Z.DVB_PRIORITY]),R.hasOwnProperty(e.Z.DVB_WEIGHT)&&(Q.dvb_weight=R[e.Z.DVB_WEIGHT]),R.hasOwnProperty(e.Z.AVAILABILITY_TIME_OFFSET)&&(Q.availabilityTimeOffset=R[e.Z.AVAILABILITY_TIME_OFFSET]),R.hasOwnProperty(e.Z.AVAILABILITY_TIME_COMPLETE)&&(Q.availabilityTimeComplete=R[e.Z.AVAILABILITY_TIME_COMPLETE]!=="false"),M.push(Q),N}}),M}function ue(g){var M=new mt;return M.serverUrl=g.__text,g.hasOwnProperty(e.Z.DEFAULT_SERVICE_LOCATION)&&(M.defaultServiceLocation=g[e.Z.DEFAULT_SERVICE_LOCATION],M.defaultServiceLocationArray=M.defaultServiceLocation.split(" ")),g.hasOwnProperty(e.Z.QUERY_BEFORE_START)&&(M.queryBeforeStart=g[e.Z.QUERY_BEFORE_START].toLowerCase()==="true"),g.hasOwnProperty(e.Z.CLIENT_REQUIREMENT)&&(M.clientRequirement=g[e.Z.CLIENT_REQUIREMENT].toLowerCase()!=="false"),M}return o={getIsTypeOf:A,getIsText:U,getIsFragmented:F,getProducerReferenceTimesForAdaptation:function(g){var M=g&&g.hasOwnProperty(e.Z.PRODUCERREFERENCETIME_ASARRAY)?g[e.Z.PRODUCERREFERENCETIME_ASARRAY]:[];(g&&g.hasOwnProperty(e.Z.REPRESENTATION_ASARRAY)?g[e.Z.REPRESENTATION_ASARRAY]:[]).forEach(function(N){var R;N.hasOwnProperty(e.Z.PRODUCERREFERENCETIME_ASARRAY)&&M.push.apply(M,function(Q){if(Array.isArray(Q))return kt(Q)}(R=N[e.Z.PRODUCERREFERENCETIME_ASARRAY])||function(Q){if(typeof Symbol<"u"&&Symbol.iterator in Object(Q))return Array.from(Q)}(R)||ht(R)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}())});var L=[];return M.forEach(function(N){var R=new vt;N.hasOwnProperty(e.Z.ID)&&(R[e.Z.ID]=N[e.Z.ID],N.hasOwnProperty(e.Z.WALL_CLOCK_TIME)&&(R[e.Z.WALL_CLOCK_TIME]=N[e.Z.WALL_CLOCK_TIME],N.hasOwnProperty(e.Z.PRESENTATION_TIME)&&(R[e.Z.PRESENTATION_TIME]=N[e.Z.PRESENTATION_TIME],N.hasOwnProperty(e.Z.INBAND)&&(R[e.Z.INBAND]=N[e.Z.INBAND]!=="false"),N.hasOwnProperty(e.Z.TYPE)&&(R[e.Z.TYPE]=N[e.Z.TYPE]),L.push(R))))}),L},getLanguageForAdaptation:function(g){var M="";return g&&g.hasOwnProperty(e.Z.LANG)&&(M=g.lang),M},getViewpointForAdaptation:function(g){return g&&g.hasOwnProperty(e.Z.VIEWPOINT_ASARRAY)&&g[e.Z.VIEWPOINT_ASARRAY].length?g[e.Z.VIEWPOINT_ASARRAY].map(function(M){return new je().init(M)}):[]},getRolesForAdaptation:function(g){return g&&g.hasOwnProperty(e.Z.ROLE_ASARRAY)&&g[e.Z.ROLE_ASARRAY].length?g[e.Z.ROLE_ASARRAY].map(function(M){return new je().init(M)}):[]},getAccessibilityForAdaptation:function(g){return g&&g.hasOwnProperty(e.Z.ACCESSIBILITY_ASARRAY)&&g[e.Z.ACCESSIBILITY_ASARRAY].length?g[e.Z.ACCESSIBILITY_ASARRAY].map(function(M){return new je().init(M)}):[]},getAudioChannelConfigurationForAdaptation:function(g){return g&&g.hasOwnProperty(e.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&g[e.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?g[e.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(M){return new je().init(M)}):[]},getAudioChannelConfigurationForRepresentation:function(g){return g&&g.hasOwnProperty(e.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&g[e.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?g[e.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(M){return new je().init(M)}):[]},getAdaptationForIndex:function(g,M,L){var N=B(M,L);return N.length>0&&m(g)?N[g]:null},getIndexForAdaptation:function(g,M,L){if(!g)return-1;for(var N=B(M,L),R=0;R<N.length;R++)if(Rt(I).getInstance().areEqual(N[R],g))return R;return-1},getAdaptationForId:function(g,M,L){var N,R,Q=B(M,L);for(N=0,R=Q.length;N<R;N++)if(Q[N].hasOwnProperty(e.Z.ID)&&Q[N].id===g)return Q[N];return null},getAdaptationsForType:function(g,M,L){var N,R,Q=B(g,M),Y=[];for(N=0,R=Q.length;N<R;N++)A(Q[N],L)&&Y.push(q(Q[N]));return Y},getRealPeriods:me,getRealPeriodForIndex:function(g,M){var L=me(M);return L.length>0&&m(g)?L[g]:null},getCodec:function(g,M,L){var N=null;if(g&&g.Representation_asArray&&g.Representation_asArray.length>0){var R=m(M)&&M>=0&&M<g.Representation_asArray.length?g.Representation_asArray[M]:g.Representation_asArray[0];R&&(N=R.mimeType+';codecs="'+R.codecs+'"',L&&R.width!==void 0&&(N+=';width="'+R.width+'";height="'+R.height+'"'))}return N&&(N=N.replace(/\sprofiles=[^;]*/g,"")),N},getSelectionPriority:function(g){try{var M=g&&g.selectionPriority!==void 0?parseInt(g.selectionPriority):1;return isNaN(M)?1:M}catch{return 1}},getMimeType:function(g){return g&&g.Representation_asArray&&g.Representation_asArray.length>0?g.Representation_asArray[0].mimeType:null},getKID:function(g){return g&&g.hasOwnProperty(e.Z.CENC_DEFAULT_KID)?g[e.Z.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(g){if(!g||!Array.isArray(g.Label_asArray))return[];for(var M=[],L=0;L<g.Label_asArray.length;L++)M.push({lang:g.Label_asArray[L].lang,text:g.Label_asArray[L].__text||g.Label_asArray[L]});return M},getContentProtectionData:function(g){return g&&g.hasOwnProperty(e.Z.CONTENTPROTECTION_ASARRAY)&&g.ContentProtection_asArray.length!==0?g.ContentProtection_asArray:null},getIsDynamic:re,getId:function(g){return g&&g[e.Z.ID]||null},hasProfile:function(g,M){var L=!1;return g&&g.profiles&&g.profiles.length>0&&(L=g.profiles.indexOf(M)!==-1),L},getDuration:function(g){return g&&g.hasOwnProperty(e.Z.MEDIA_PRESENTATION_DURATION)?g.mediaPresentationDuration:g&&g.type=="dynamic"?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(g){return g&&g.bandwidth?g.bandwidth:NaN},getManifestUpdatePeriod:function(g){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,L=NaN;return g&&g.hasOwnProperty(e.Z.MINIMUM_UPDATE_PERIOD)&&(L=g.minimumUpdatePeriod),isNaN(L)?L:Math.max(L-M,1)},getPublishTime:function(g){return g&&g.hasOwnProperty(e.Z.PUBLISH_TIME)?new Date(g[e.Z.PUBLISH_TIME]):null},getRepresentationCount:function(g){return g&&Array.isArray(g.Representation_asArray)?g.Representation_asArray.length:0},getBitrateListForAdaptation:function(g){var M=q(g);return(M&&Array.isArray(M.Representation_asArray)?M.Representation_asArray:[]).map(function(L){return{bandwidth:L.bandwidth,width:L.width||0,height:L.height||0,scanType:L.scanType||null,id:L.id||null}})},getRepresentationFor:function(g,M){return M&&M.Representation_asArray&&M.Representation_asArray.length>0&&m(g)?M.Representation_asArray[g]:null},getRepresentationsForAdaptation:function(g){var M,L,N,R,Q=[],Y=function(De){if(De&&De.period&&m(De.period.index)){var Oe=De.period.mpd.manifest.Period_asArray[De.period.index];if(Oe&&Oe.AdaptationSet_asArray&&m(De.index))return q(Oe.AdaptationSet_asArray[De.index])}}(g);if(Y&&Y.Representation_asArray){if(g&&g.period&&m(g.period.index)){var ae=K(g.period.mpd.manifest);ae&&(L=ae[0])}for(var X=0,P=Y.Representation_asArray.length;X<P;++X){var se=Y.Representation_asArray[X],pe=new qn;if(pe.index=X,pe.adaptation=g,se.hasOwnProperty(e.Z.ID)&&(pe.id=se.id),se.hasOwnProperty(e.Z.CODECS)&&(pe.codecs=se.codecs),se.hasOwnProperty(e.Z.MIME_TYPE)&&(pe.mimeType=se[e.Z.MIME_TYPE]),se.hasOwnProperty(e.Z.CODEC_PRIVATE_DATA)&&(pe.codecPrivateData=se.codecPrivateData),se.hasOwnProperty(e.Z.BANDWITH)&&(pe.bandwidth=se.bandwidth),se.hasOwnProperty(e.Z.WIDTH)&&(pe.width=se.width),se.hasOwnProperty(e.Z.HEIGHT)&&(pe.height=se.height),se.hasOwnProperty(e.Z.SCAN_TYPE)&&(pe.scanType=se.scanType),se.hasOwnProperty(e.Z.MAX_PLAYOUT_RATE)&&(pe.maxPlayoutRate=se.maxPlayoutRate),se.hasOwnProperty(e.Z.SEGMENT_BASE)?(M=se.SegmentBase,pe.segmentInfoType=e.Z.SEGMENT_BASE):se.hasOwnProperty(e.Z.SEGMENT_LIST)?(M=se.SegmentList).hasOwnProperty(e.Z.SEGMENT_TIMELINE)?pe.segmentInfoType=e.Z.SEGMENT_TIMELINE:pe.segmentInfoType=e.Z.SEGMENT_LIST:se.hasOwnProperty(e.Z.SEGMENT_TEMPLATE)?((M=se.SegmentTemplate).hasOwnProperty(e.Z.SEGMENT_TIMELINE)?pe.segmentInfoType=e.Z.SEGMENT_TIMELINE:pe.segmentInfoType=e.Z.SEGMENT_TEMPLATE,M.hasOwnProperty(e.Z.INITIALIZATION_MINUS)&&(pe.initialization=M.initialization.split("$Bandwidth$").join(se.bandwidth).split("$RepresentationID$").join(se.id))):pe.segmentInfoType=e.Z.BASE_URL,pe.essentialProperties=de(se),M){if(M.hasOwnProperty(e.Z.INITIALIZATION)){var Le=M.Initialization;Le.hasOwnProperty(e.Z.SOURCE_URL)&&(pe.initialization=Le.sourceURL),Le.hasOwnProperty(e.Z.RANGE)&&(pe.range=Le.range)}else U(Y)&&F(Y)&&Y.mimeType&&Y.mimeType.indexOf("application/mp4")===-1&&(pe.range=0);M.hasOwnProperty(e.Z.TIMESCALE)&&(pe.timescale=M.timescale),M.hasOwnProperty(e.Z.DURATION)?pe.segmentDuration=M.duration/pe.timescale:se.hasOwnProperty(e.Z.SEGMENT_TEMPLATE)&&(M=se.SegmentTemplate).hasOwnProperty(e.Z.SEGMENT_TIMELINE)&&(pe.segmentDuration=fe(M.SegmentTimeline)/pe.timescale),M.hasOwnProperty(e.Z.MEDIA)&&(pe.media=M.media),M.hasOwnProperty(e.Z.START_NUMBER)&&(pe.startNumber=M.startNumber),M.hasOwnProperty(e.Z.INDEX_RANGE)&&(pe.indexRange=M.indexRange),M.hasOwnProperty(e.Z.PRESENTATION_TIME_OFFSET)&&(pe.presentationTimeOffset=M.presentationTimeOffset/pe.timescale),M.hasOwnProperty(e.Z.AVAILABILITY_TIME_OFFSET)?pe.availabilityTimeOffset=M.availabilityTimeOffset:L&&L.availabilityTimeOffset!==void 0&&(pe.availabilityTimeOffset=L.availabilityTimeOffset),M.hasOwnProperty(e.Z.AVAILABILITY_TIME_COMPLETE)?pe.availabilityTimeComplete=M.availabilityTimeComplete!=="false":L&&L.availabilityTimeComplete!==void 0&&(pe.availabilityTimeComplete=L.availabilityTimeComplete)}pe.MSETimeOffset=(R=(N=pe).presentationTimeOffset,N.adaptation.period.start-R),pe.path=[g.period.index,g.index,X],Q.push(pe)}}return Q},getAdaptationsForPeriod:function(g){var M,L,N,R=g&&m(g.index)?g.mpd.manifest.Period_asArray[g.index]:null,Q=[];if(R&&R.AdaptationSet_asArray)for(N=0;N<R.AdaptationSet_asArray.length;N++)L=R.AdaptationSet_asArray[N],M=new yn,L.hasOwnProperty(e.Z.ID)&&(M.id=L.id),M.index=N,M.period=g,A(L,t.Z.MUXED)?M.type=t.Z.MUXED:A(L,t.Z.AUDIO)?M.type=t.Z.AUDIO:j(L)?M.type=t.Z.VIDEO:U(L)?M.type=t.Z.TEXT:w(L)?M.type=t.Z.IMAGE:r.warn("Unknown Adaptation stream type"),Q.push(M);return Q},getRegularPeriods:function(g){var M,L,N=!!g&&re(g.manifest),R=[],Q=null,Y=null,ae=null,X=null;for(L=0,M=g&&g.manifest&&g.manifest.Period_asArray?g.manifest.Period_asArray.length:0;L<M;L++)(Y=g.manifest.Period_asArray[L]).hasOwnProperty(e.Z.START)?(X=new xn).start=Y.start:Q!==null&&Q.hasOwnProperty(e.Z.DURATION)&&ae!==null?(X=new xn).start=parseFloat((ae.start+ae.duration).toFixed(5)):L!==0||N||((X=new xn).start=0),ae!==null&&isNaN(ae.duration)&&(X!==null?ae.duration=parseFloat((X.start-ae.start).toFixed(5)):r.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),X!==null&&(X.id=G(Y,L),X.index=L,X.mpd=g,Y.hasOwnProperty(e.Z.DURATION)&&(X.duration=Y.duration),ae&&(ae.nextPeriodId=X.id),R.push(X),Q=Y,ae=X),Y=null,X=null;return R.length===0||ae!==null&&isNaN(ae.duration)&&(ae.duration=parseFloat((function(P){(function(){if(!l||!l.hasOwnProperty("error"))throw new Error(t.Z.MISSING_CONFIG_ERROR)})();var se,pe=re(P.mpd.manifest);return P.mpd.manifest.mediaPresentationDuration?se=P.mpd.manifest.mediaPresentationDuration:P.duration?se=P.duration:pe?se=Number.POSITIVE_INFINITY:l.error(new te.Z($.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",P)),se}(ae)-ae.start).toFixed(5))),R},getMpd:function(g){var M=new Hn;return g&&(M.manifest=g,g.hasOwnProperty(e.Z.AVAILABILITY_START_TIME)?M.availabilityStartTime=new Date(g.availabilityStartTime.getTime()):g.loadedTime&&(M.availabilityStartTime=new Date(g.loadedTime.getTime())),g.hasOwnProperty(e.Z.AVAILABILITY_END_TIME)&&(M.availabilityEndTime=new Date(g.availabilityEndTime.getTime())),g.hasOwnProperty(e.Z.MINIMUM_UPDATE_PERIOD)&&(M.minimumUpdatePeriod=g.minimumUpdatePeriod),g.hasOwnProperty(e.Z.MEDIA_PRESENTATION_DURATION)&&(M.mediaPresentationDuration=g.mediaPresentationDuration),g.hasOwnProperty(e.Z.SUGGESTED_PRESENTATION_DELAY)&&(M.suggestedPresentationDelay=g.suggestedPresentationDelay),g.hasOwnProperty(e.Z.TIMESHIFT_BUFFER_DEPTH)&&(M.timeShiftBufferDepth=g.timeShiftBufferDepth),g.hasOwnProperty(e.Z.MAX_SEGMENT_DURATION)&&(M.maxSegmentDuration=g.maxSegmentDuration),g.hasOwnProperty(e.Z.PUBLISH_TIME)&&(M.publishTime=new Date(g.publishTime))),M},getEventsForPeriod:function(g){var M,L,N=g&&g.mpd&&g.mpd.manifest?g.mpd.manifest:null,R=N?N.Period_asArray:null,Q=R&&g&&m(g.index)?R[g.index].EventStream_asArray:null,Y=[];if(Q)for(M=0;M<Q.length;M++){var ae=new Pr;if(ae.period=g,ae.timescale=1,!Q[M].hasOwnProperty(t.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(ae.schemeIdUri=Q[M][t.Z.SCHEME_ID_URI],Q[M].hasOwnProperty(e.Z.TIMESCALE)&&(ae.timescale=Q[M][e.Z.TIMESCALE]),Q[M].hasOwnProperty(e.Z.VALUE)&&(ae.value=Q[M][e.Z.VALUE]),Q[M].hasOwnProperty(e.Z.PRESENTATION_TIME_OFFSET)&&(ae.presentationTimeOffset=Q[M][e.Z.PRESENTATION_TIME_OFFSET]),L=0;Q[M].Event_asArray&&L<Q[M].Event_asArray.length;L++){var X=Q[M].Event_asArray[L],P=new Vn;P.presentationTime=0,P.eventStream=ae,X.hasOwnProperty(e.Z.PRESENTATION_TIME)&&(P.presentationTime=X.presentationTime);var se=ae.presentationTimeOffset?ae.presentationTimeOffset/ae.timescale:0;P.calculatedPresentationTime=P.presentationTime/ae.timescale+g.start-se,X.hasOwnProperty(e.Z.DURATION)&&(P.duration=X.duration/ae.timescale),X.hasOwnProperty(e.Z.ID)?P.id=X.id:P.id=null,X.Signal&&X.Signal.Binary?P.messageData=_.decodeArray(X.Signal.Binary.toString()):P.messageData=X.messageData||X.__cdata||X.__text,Y.push(P)}}return Y},getEssentialPropertiesForRepresentation:de,getEventStreamForAdaptationSet:function(g,M,L){var N,R,Q;return g&&g.Period_asArray&&M&&M.period&&m(M.period.index)&&(R=g.Period_asArray[M.period.index])&&R.AdaptationSet_asArray&&m(M.index)&&(Q=R.AdaptationSet_asArray[M.index])&&(N=Q.InbandEventStream_asArray),ie(N,null,L)},getEventStreamForRepresentation:function(g,M,L){var N,R,Q,Y;return g&&g.Period_asArray&&M&&M.adaptation&&M.adaptation.period&&m(M.adaptation.period.index)&&(R=g.Period_asArray[M.adaptation.period.index])&&R.AdaptationSet_asArray&&m(M.adaptation.index)&&(Q=R.AdaptationSet_asArray[M.adaptation.index])&&Q.Representation_asArray&&m(M.index)&&(Y=Q.Representation_asArray[M.index])&&(N=Y.InbandEventStream_asArray),ie(N,M,L)},getUTCTimingSources:function(g){var M=re(g),L=!!g&&g.hasOwnProperty(e.Z.AVAILABILITY_START_TIME),N=g?g.UTCTiming_asArray:null,R=[];return(M||L)&&N&&N.forEach(function(Q){var Y=new tr.Z;Q.hasOwnProperty(t.Z.SCHEME_ID_URI)&&(Y.schemeIdUri=Q.schemeIdUri,Q.hasOwnProperty(e.Z.VALUE)&&(Y.value=Q.value.toString(),R.push(Y)))}),R},getBaseURLsFromElement:K,getRepresentationSortFunction:function(){return function(g,M){return g.bandwidth-M.bandwidth}},getContentSteering:function(g){if(g&&g.hasOwnProperty(e.Z.CONTENT_STEERING_AS_ARRAY))return ue(g[e.Z.CONTENT_STEERING_AS_ARRAY][0])},getLocation:function(g){return g&&g.hasOwnProperty(e.Z.LOCATION_AS_ARRAY)?g[e.Z.LOCATION_AS_ARRAY].map(function(M){var L=M.__text||M,N=M.hasOwnProperty(e.Z.SERVICE_LOCATION)?M[e.Z.SERVICE_LOCATION]:null;return new Bt(L,N)}):[]},getPatchLocation:function(g){return g&&g.hasOwnProperty(e.Z.PATCH_LOCATION_AS_ARRAY)?g[e.Z.PATCH_LOCATION_AS_ARRAY].map(function(M){var L=M.__text||M,N=M.hasOwnProperty(e.Z.SERVICE_LOCATION)?M[e.Z.SERVICE_LOCATION]:null,R=M.hasOwnProperty(e.Z.TTL)?1e3*parseFloat(M[e.Z.TTL]):NaN;return new jt(L,N,R)}):[]},getSuggestedPresentationDelay:function(g){return g&&g.hasOwnProperty(e.Z.SUGGESTED_PRESENTATION_DELAY)?g.suggestedPresentationDelay:null},getAvailabilityStartTime:function(g){return g&&g.hasOwnProperty(e.Z.AVAILABILITY_START_TIME)&&g.availabilityStartTime!==null?g.availabilityStartTime.getTime():null},getServiceDescriptions:function(g){var M=[];if(g&&g.hasOwnProperty(e.Z.SERVICE_DESCRIPTION)){var L,N=Ct(g.ServiceDescription_asArray);try{for(N.s();!(L=N.n()).done;){var R=L.value,Q=null,Y=null,ae=null,X=null,P=null,se=null,pe=null;for(var Le in R)R.hasOwnProperty(Le)&&(Le===e.Z.ID?Q=R[Le]:Le===e.Z.SERVICE_DESCRIPTION_SCOPE?Y=R[Le].schemeIdUri:Le===e.Z.SERVICE_DESCRIPTION_LATENCY?ae={target:parseInt(R[Le].target),max:parseInt(R[Le].max),min:parseInt(R[Le].min),referenceId:parseInt(R[Le].referenceId)}:Le===e.Z.SERVICE_DESCRIPTION_PLAYBACK_RATE?X={max:parseFloat(R[Le].max),min:parseFloat(R[Le].min)}:Le===e.Z.SERVICE_DESCRIPTION_OPERATING_QUALITY?P={mediaType:R[Le].mediaType,max:parseInt(R[Le].max),min:parseInt(R[Le].min),target:parseInt(R[Le].target),type:R[Le].type,maxQualityDifference:parseInt(R[Le].maxQualityDifference)}:Le===e.Z.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH?se={mediaType:R[Le].mediaType,max:parseInt(R[Le].max),min:parseInt(R[Le].min),target:parseInt(R[Le].target)}:Le===e.Z.CONTENT_STEERING&&(pe=ue(R[Le])));M.push({id:Q,schemeIdUri:Y,latency:ae,playbackRate:X,operatingQuality:P,operatingBandwidth:se,contentSteering:pe})}}catch(De){N.e(De)}finally{N.f()}}return M},getSegmentAlignment:function(g){return!(!g||!g.hasOwnProperty(e.Z.SEGMENT_ALIGNMENT))&&g[e.Z.SEGMENT_ALIGNMENT]==="true"},getSubSegmentAlignment:function(g){return!(!g||!g.hasOwnProperty(e.Z.SUB_SEGMENT_ALIGNMENT))&&g[e.Z.SUB_SEGMENT_ALIGNMENT]==="true"},getSupplementalPropertiesForAdaptation:function(g){var M={};if(g&&g.hasOwnProperty(e.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var L,N=Ct(g.SupplementalProperty_asArray);try{for(N.s();!(L=N.n()).done;){var R=L.value;R.hasOwnProperty(t.Z.SCHEME_ID_URI)&&R.hasOwnProperty(e.Z.VALUE)&&(M[R[t.Z.SCHEME_ID_URI]]=R[e.Z.VALUE])}}catch(Q){N.e(Q)}finally{N.f()}}return M},getSupplementalPropertiesAsArrayForAdaptation:function(g){return g&&g.hasOwnProperty(e.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&g.SupplementalProperty_asArray.length?g.SupplementalProperty_asArray.map(function(M){return new je().init(M)}):[]},getSupplementalPropertiesForRepresentation:function(g){var M={};if(g&&g.hasOwnProperty(e.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var L,N=Ct(g.SupplementalProperty_asArray);try{for(N.s();!(L=N.n()).done;){var R=L.value;R.hasOwnProperty(t.Z.SCHEME_ID_URI)&&R.hasOwnProperty(e.Z.VALUE)&&(M[R[t.Z.SCHEME_ID_URI]]=R[e.Z.VALUE])}}catch(Q){N.e(Q)}finally{N.f()}}return M},getSupplementalPropertiesAsArrayForRepresentation:function(g){return g&&g.hasOwnProperty(e.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&g.SupplementalProperty_asArray.length?g.SupplementalProperty_asArray.map(function(M){return new je().init(M)}):[]},setConfig:function(g){g&&(g.errHandler&&(l=g.errHandler),g.BASE64&&(_=g.BASE64))}},r=(0,E.Z)(I).getInstance().getLogger(o),o}Ft.__dashjs_factory_name="DashManifestModel";var en=h.Z.getSingletonFactory(Ft),ln=D(703);function vn(o,r){var l;if(typeof Symbol>"u"||o[Symbol.iterator]==null){if(Array.isArray(o)||(l=function(F,j){if(F){if(typeof F=="string")return Qt(F,j);var U=Object.prototype.toString.call(F).slice(8,-1);return U==="Object"&&F.constructor&&(U=F.constructor.name),U==="Map"||U==="Set"?Array.from(F):U==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(U)?Qt(F,j):void 0}}(o))||r&&o&&typeof o.length=="number"){l&&(o=l);var _=0,I=function(){};return{s:I,n:function(){return _>=o.length?{done:!0}:{done:!1,value:o[_++]}},e:function(F){throw F},f:I}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var b,m=!0,A=!1;return{s:function(){l=o[Symbol.iterator]()},n:function(){var F=l.next();return m=F.done,F},e:function(F){A=!0,b=F},f:function(){try{m||l.return==null||l.return()}finally{if(A)throw b}}}}function Qt(o,r){(r==null||r>o.length)&&(r=o.length);for(var l=0,_=new Array(r);l<r;l++)_[l]=o[l];return _}function Et(){var o,r,l,_,I,b,m,A,F,j,U=this.context,w=(0,p.Z)(U).getInstance(),q=(0,Ie.Z)(U).getInstance();function B(){l={pr:1,nor:null,st:null,sf:null,sid:"".concat(ln.Z.generateUuid()),cid:null},F={},A={},j={},re()}function me(){re()}function re(){if(b){var R=b.getStreamController();if(R&&typeof R.getActiveStream=="function"){var Q=R.getActiveStream();Q&&(m=Q.getProcessors())}}}function de(R,Q){var Y,ae={},X=vn(Q);try{for(X.s();!(Y=X.n()).done;){var P=Y.value;R[P]&&(ae[P]=R[P])}}catch(se){X.e(se)}finally{X.f()}return ae}function fe(R){var Q=q.get().streaming.cmcd.enabledKeys;return R.filter(function(Y){return Q.includes(Y)})}function G(R){try{return R.type===Ze.w.MPD_TYPE?((Y=ie()).ot="m",Y):R.type===Ze.w.MEDIA_SEGMENT_TYPE?(Q=R.mediaType,j.hasOwnProperty(Q)||(j[Q]=!1),A.hasOwnProperty(Q)||(A[Q]=!1),F.hasOwnProperty(Q)||(F[Q]=!1),function(ae){var X,P=ie(),se=function($e){try{var Dt=$e.quality,_e=$e.mediaInfo.bitrateList;return parseInt(_e[Dt].bandwidth/1e3)}catch{return null}}(ae),pe=function($e){try{return isNaN($e.duration)?NaN:Math.round(1e3*$e.duration)}catch{return null}}(ae),Le=function($e){try{return 100*parseInt(_.getThroughputHistory().getSafeAverageThroughput($e)/100)}catch{return null}}(ae.mediaType),De=function($e){try{var Dt=l.pr,_e=I.getCurrentBufferLevel($e);return isNaN(Dt)||isNaN(_e)?null:100*parseInt(_e/Dt*10)}catch{return null}}(ae.mediaType),Oe=K(ae.mediaType),we=function($e){try{var Dt=_.getTopBitrateInfoFor($e);return Math.round(Dt.bitrate/1e3)}catch{return null}}(ae.mediaType),ot=l.pr,at=function($e){if(m&&m.length!==0){var Dt,_e=vn(m);try{for(_e.s();!(Dt=_e.n()).done;){var Be=Dt.value;if(Be.getType()===$e)return Be.probeNextRequest()}}catch(ct){_e.e(ct)}finally{_e.f()}}}(ae.mediaType);ae.mediaType===t.Z.VIDEO&&(X="v"),ae.mediaType===t.Z.AUDIO&&(X="a"),ae.mediaType===t.Z.TEXT&&(X=ae.mediaInfo.mimeType==="application/mp4"?"tt":"c");var Xe=q.get().streaming.cmcd.rtp;return Xe||(Xe=function($e){try{var Dt=b.getPlaybackRate();Dt||(Dt=1);var _e=$e.quality,Be=$e.mediaType,ct=$e.mediaInfo,le=$e.duration;if(!ct)return NaN;var Me=K(Be);Me===0&&(Me=500);var Ne=ct.bitrateList[_e].bandwidth*le/1e3/(Me/Dt/1e3),xe=q.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(q.get().streaming.cmcd.rtpSafetyFactor)?q.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(Ne*xe/100)+1)}catch{return NaN}}(ae)),isNaN(Xe)||(P.rtp=Xe),at&&(ae.url!==at.url?P.nor=encodeURIComponent(ln.Z.getRelativeUrl(ae.url,at.url)):at.range&&(P.nrr=at.range)),se&&(P.br=se),X&&(P.ot=X),isNaN(pe)||(P.d=pe),isNaN(Le)||(P.mtp=Le),isNaN(De)||(P.dl=De),isNaN(Oe)||(P.bl=Oe),isNaN(we)||(P.tb=we),isNaN(ot)||ot===1||(P.pr=ot),F[ae.mediaType]&&(P.bs=!0,F[ae.mediaType]=!1),!A[ae.mediaType]&&j[ae.mediaType]||(P.su=!0,A[ae.mediaType]=!1,j[ae.mediaType]=!0),P}(R)):R.type===Ze.w.INIT_SEGMENT_TYPE?function(){var ae=ie();return ae.ot="i",ae.su=!0,ae}():R.type===Ze.w.OTHER_TYPE||R.type===Ze.w.XLINK_EXPANSION_TYPE?function(){var ae=ie();return ae.ot="o",ae}():R.type===Ze.w.LICENSE?function(ae){var X=ie();return X.ot="k",X}():null}catch{return null}var Q,Y}function ie(){var R={},Q=q.get().streaming.cmcd.cid?q.get().streaming.cmcd.cid:l.cid;return R.v=1,R.sid=q.get().streaming.cmcd.sid?q.get().streaming.cmcd.sid:l.sid,R.sid="".concat(R.sid),Q&&(R.cid="".concat(Q)),isNaN(l.pr)||l.pr===1||l.pr===null||(R.pr=l.pr),l.st&&(R.st=l.st),l.sf&&(R.sf=l.sf),R}function K(R){try{var Q=I.getCurrentBufferLevel(R);return isNaN(Q)?null:100*parseInt(10*Q)}catch{return null}}function ue(R){try{l.pr=R.playbackRate}catch{}}function g(R){try{var Q=o.getIsDynamic(R.data)?"l":"v",Y=R.protocol&&R.protocol==="MSS"?"s":"d";l.st="".concat(Q),l.sf="".concat(Y)}catch{}}function M(R){try{R.state&&R.mediaType&&R.state===n.Z.BUFFER_EMPTY&&(F[R.mediaType]||(F[R.mediaType]=!0),A[R.mediaType]||(A[R.mediaType]=!0))}catch{}}function L(){for(var R in F)F.hasOwnProperty(R)&&(F[R]=!0);for(var Q in A)A.hasOwnProperty(Q)&&(A[Q]=!0)}function N(R){try{if(!R)return null;var Q=Object.keys(R).sort(function(X,P){return X.localeCompare(P)}),Y=Q.length,ae=Q.reduce(function(X,P,se){return P==="v"&&R[P]===1||(typeof R[P]=="string"&&P!=="ot"&&P!=="sf"&&P!=="st"?X+="".concat(P,"=").concat(JSON.stringify(R[P])):X+="".concat(P,"=").concat(R[P]),se<Y-1&&(X+=",")),X},"");return(ae=ae.replace(/=true/g,"")).replace(/,\s*$/,"")}catch{return null}}return r={getQueryParameter:function(R){try{if(q.get().streaming.cmcd&&q.get().streaming.cmcd.enabled){var Q=G(R),Y=function(X){try{var P=q.get().streaming.cmcd.enabledKeys;return Object.keys(X).filter(function(se){return P.includes(se)}).reduce(function(se,pe){return se[pe]=X[pe],se},{})}catch{return X}}(Q),ae=N(Y);return w.trigger(_n.Z.CMCD_DATA_GENERATED,{url:R.url,mediaType:R.mediaType,cmcdData:Q,cmcdString:ae}),{key:"CMCD",value:ae}}return null}catch{return null}},getHeaderParameters:function(R){try{if(q.get().streaming.cmcd&&q.get().streaming.cmcd.enabled){var Q=G(R),Y=de(Q,fe(["br","d","ot","tb"])),ae=de(Q,fe(["bl","dl","mtp","nor","nrr","su"])),X=de(Q,fe(["bs","rtp"])),P=de(Q,fe(["cid","pr","sf","sid","st","v"])),se={"CMCD-Object":N(Y),"CMCD-Request":N(ae),"CMCD-Status":N(X),"CMCD-Session":N(P)};return w.trigger(_n.Z.CMCD_DATA_GENERATED,{url:R.url,mediaType:R.mediaType,cmcdData:Q,headers:se}),se}return null}catch{return null}},setConfig:function(R){R&&(R.abrController&&(_=R.abrController),R.dashMetrics&&(I=R.dashMetrics),R.playbackController&&(b=R.playbackController))},reset:function(){w.off(n.Z.PLAYBACK_RATE_CHANGED,ue,this),w.off(n.Z.MANIFEST_LOADED,g,this),w.off(n.Z.BUFFER_LEVEL_STATE_CHANGED,M,r),w.off(n.Z.PLAYBACK_SEEKED,L,r),B()},initialize:function(){w.on(n.Z.PLAYBACK_RATE_CHANGED,ue,r),w.on(n.Z.MANIFEST_LOADED,g,r),w.on(n.Z.BUFFER_LEVEL_STATE_CHANGED,M,r),w.on(n.Z.PLAYBACK_SEEKED,L,r),w.on(n.Z.PERIOD_SWITCH_COMPLETED,me,r)}},o=en(U).getInstance(),B(),r}Et.__dashjs_factory_name="CmcdModel";var Tt=h.Z.getSingletonFactory(Et);function Nt(o){return Nt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Nt(o)}function $t(o,r){$t=function(A,F){return new b(A,void 0,F)};var l=mn(RegExp),_=RegExp.prototype,I=new WeakMap;function b(A,F,j){var U=l.call(this,A,F);return I.set(U,j||I.get(A)),U}function m(A,F){var j=I.get(F);return Object.keys(j).reduce(function(U,w){return U[w]=A[j[w]],U},Object.create(null))}return rn(b,l),b.prototype.exec=function(A){var F=_.exec.call(this,A);return F&&(F.groups=m(F,this)),F},b.prototype[Symbol.replace]=function(A,F){if(typeof F=="string"){var j=I.get(this);return _[Symbol.replace].call(this,A,F.replace(/\$<([^>]+)>/g,function(w,q){return"$"+j[q]}))}if(typeof F=="function"){var U=this;return _[Symbol.replace].call(this,A,function(){var w=[];return w.push.apply(w,arguments),Nt(w[w.length-1])!=="object"&&w.push(m(w,U)),F.apply(this,w)})}return _[Symbol.replace].call(this,A,F)},$t.apply(this,arguments)}function rn(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(r&&r.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),r&&Un(o,r)}function mn(o){var r=typeof Map=="function"?new Map:void 0;return mn=function(l){if(l===null||(_=l,Function.toString.call(_).indexOf("[native code]")===-1))return l;var _;if(typeof l!="function")throw new TypeError("Super expression must either be null or a function");if(r!==void 0){if(r.has(l))return r.get(l);r.set(l,I)}function I(){return En(l,arguments,Rn(this).constructor)}return I.prototype=Object.create(l.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),Un(I,l)},mn(o)}function En(o,r,l){return En=jn()?Reflect.construct:function(_,I,b){var m=[null];m.push.apply(m,I);var A=new(Function.bind.apply(_,m));return b&&Un(A,b.prototype),A},En.apply(null,arguments)}function jn(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Un(o,r){return Un=Object.setPrototypeOf||function(l,_){return l.__proto__=_,l},Un(o,r)}function Rn(o){return Rn=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Rn(o)}var Fn="static",Mn="dynamic",Kn="cmsd-",Rr=Kn+Fn,yr=Kn+Mn,ar="stream",Qn=["mb","st","sf","v"],Jr={video:"v",audio:"a",text:"tt",stream:ar},$r=/^[-0-9]/;function Br(){var o,r,l,_,I=this.context,b=(0,p.Z)(I).getInstance();function m(){l={},_={}}function A(B){B&&Object.keys(B).forEach(function(me){Qn.includes(me)||delete B[me]})}function F(B){return!B||B.toLowerCase()!=="false"&&($r.test(B)?parseInt(B,10):B.replace(/["]+/g,""))}function j(B){try{for(var me={},re=B.split(","),de=0;de<re.length;de++){var fe=re[de].split("="),G=fe[0],ie=F(fe[1]);me[G]=ie}return me}catch(K){r.error("Failed to parse CMSD-Static response header value:",K)}}function U(B){try{for(var me={},re=B.split(","),de=re[re.length-1].split(";"),fe=1;fe<de.length;fe++){var G=de[fe].split("="),ie=G[0],K=F(G[1]);me[ie]=K}return me}catch(ue){return r.error("Failed to parse CMSD-Dynamic response header value:",ue),[]}}function w(B){return Jr[B]||"o"}function q(B,me,re){var de=B===Fn?l:_,fe=de[me]||{},G=de[ar]||{};return fe[re]||G[re]}return o={setConfig:function(){},initialize:function(){},reset:function(){m()},parseResponseHeaders:function(B,me){for(var re=null,de=null,fe=B.split(`\r
`),G=fe.length-1;G>=0;G--){var ie=fe[G].match($t(/^((?:(?!:)[\s\S])*):[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(.*)$/,{key:1,value:2}));if(ie&&ie.groups){var K=ie.groups.key.toLowerCase(),ue=ie.groups.value;switch(K){case Rr:re=j(ue),b.trigger(u.Z.CMSD_STATIC_HEADER,re);break;case yr:de||(de=U(ue))}}}var g=ar;return re&&re.ot?g=re.ot:me&&(g=w(me)),A(l[g]),A(_[g]),re&&(l[g]=Object.assign(l[g]||{},re)),de&&(_[g]=Object.assign(_[g]||{},de)),{static:re,dynamic:de}},getMaxBitrate:function(B){var me=w(B);return q(Mn,me,"mb")||-1},getEstimatedThroughput:function(B){var me=w(B);return q(Mn,me,"etp")||null},getResponseDelay:function(B){var me=w(B);return q(Mn,me,"rd")||null},getRoundTripTime:function(B){var me=w(B);return q(Mn,me,"rtt")||null}},r=(0,E.Z)(I).getInstance().getLogger(o),m(),o}Br.__dashjs_factory_name="CmsdModel";var Gr=h.Z.getSingletonFactory(Br);function qr(){var o,r,l=this.context,_={};function I(){r=(0,E.Z)(l).getInstance().getLogger(o)}function b(A){for(var F={},j=0,U=0,w=0,q=0,B=A.length,me=0;me<B;++me)j+=A[me].chunkDownloadTimeRelativeMS,U+=A[me].bufferLevel,w+=A[me].chunkDownloadTimeRelativeMS*A[me].bufferLevel,q+=A[me].chunkDownloadTimeRelativeMS*A[me].chunkDownloadTimeRelativeMS;return F.m=(w-j*U/B)/(q-j*j/B),F.b=U/B-F.m*j/B,function(re){return F.m*re+F.b}}function m(A){var F,j=!0,U=A.reduce(function(w,q){return w+q.bufferLevelAtSegmentEnd},0)/A.length;return A.forEach(function(w){Math.abs(w.bufferLevelAtSegmentEnd/w.bufferLevelAtSegmentStart)<.95&&(j=!1),w.bufferLevelAtSegmentEnd/U<.8&&(j=!1),F?F>w.bitrate&&(j=!1):F=w.bitrate}),j}return o={setup:I,addMeasurement:function(A,F,j,U,w){A&&A.mediaType&&!_[A.mediaType]&&(_[A.mediaType]=[]);var q=A.mediaInfo.bitrateList.find(function(B){return B.id===A.representationId});_[A.mediaType].push({index:A.index,repId:A.representationId,mediaType:A.mediaType,requestTimeMS:U,adjustedAvailabilityStartTimeMS:A.availabilityStartTime.getTime(),segDurationMS:1e3*A.duration,chunksDurationMS:j.reduce(function(B,me){return B+me.chunkDownloadDurationMS},0),segmentBytes:j.reduce(function(B,me){return B+me.chunkBytes},0),bitrate:q&&q.bandwidth,bitrateList:A.mediaInfo.bitrateList,chunkMeasurements:j,fetchDownloadDurationMS:F,throughputCapacityDelayMS:w,getEstimatedBufferLevel:b(j.slice(1))}),_[A.mediaType].length>10&&_[A.mediaType].shift()},getThroughputCapacityDelayMS:function(A,F){var j=_[A.mediaType]&&_[A.mediaType].slice(-3);return!j||j.length<3?0:m(j)?F/4>250?250:F/4:0},getEstimatedDownloadDurationMS:function(A){var F=_[A.mediaType].slice(-1).pop(),j=_[A.mediaType].slice(-3),U=F.chunkMeasurements.slice(-1).pop().chunkDownloadTimeRelativeMS;F.bufferLevelAtSegmentStart=F.getEstimatedBufferLevel(U/2),F.bufferLevelAtSegmentEnd=F.getEstimatedBufferLevel(U);var w=m(j),q=w?.6:.8;if(F.isBufferStable&&1.05*F.segDurationMS<F.fetchDownloadDurationMS)return F.fetchDownloadDurationMS;if(!w||F.segDurationMS<F.fetchDownloadDurationMS||F.adjustedAvailabilityStartTimeMS<=F.requestTimeMS+F.throughputCapacityDelayMS-F.segDurationMS)return .8*F.fetchDownloadDurationMS;for(var B=F.requestTimeMS+F.throughputCapacityDelayMS-F.adjustedAvailabilityStartTimeMS,me=0,re=0,de=0,fe=0;fe<F.chunkMeasurements.length;fe++){var G=F.chunkMeasurements[fe];if(B<re+G.chunkDownloadDurationMS)break;re+=G.chunkDownloadDurationMS,me+=G.chunkBytes,de++}if(B<0&&r.warn("request time was before adjusted availibitly start time"),me&&re&&de>.2*F.chunkMeasurements.length){var ie=me/re,K=F.segmentBytes/ie;return F.fetchDownloadDurationMS<K?F.fetchDownloadDurationMS*q:K*q}var ue=F.bitrate;return F.bitrateList.some(function(g){if(g.bandwidth>F.bitrate)return ue=g.bandwidth,!0}),ue===F.bitrate?F.fetchDownloadDurationMS*q:q*F.segmentBytes*8*1e3/ue}},I(),o}qr.__dashjs_factory_name="LowLatencyThroughputModel";var Yr=h.Z.getSingletonFactory(qr),bt=D(5717);function zt(o,r,l){return r in o?Object.defineProperty(o,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[r]=l,o}function cn(o){o=o||{};var r,l,_,I,b,m,A,F,j,U,w,q=this.context,B=o.errHandler,me=o.dashMetrics,re=o.mediaPlayerModel,de=o.requestModifier,fe=o.boxParser,G=o.errors,ie=o.requestTimeout||0,K=(0,p.Z)(q).getInstance(),ue=(0,Ie.Z)(q).getInstance();function g(M,L){var N,R=M.request,Q=[],Y=!0,ae=!0,X=new Date,P=X,se=0,pe=null,Le=null;if(!de||!me||!B)throw new Error("config object is not correct or missing");var De,Oe=function(Me){R.requestStartDate=X,R.requestEndDate=new Date,R.firstByteDate=R.firstByteDate||X,R.fileLoaderType=Le;var Ne=N.response?N.response.responseURL:null,xe=N.response?N.response.status:null,lt=N.response&&N.response.getAllResponseHeaders?N.response.getAllResponseHeaders():N.response?N.response.responseHeaders:null,dt=lt&&ue.get().streaming.cmsd&&ue.get().streaming.cmsd.enabled?A.parseResponseHeaders(lt,R.mediaType):null;me.addHttpRequest(R,Ne,xe,lt,Me?Q:null,dt)},we=function(Me){ae=!1,Oe(Me),R.type===Ze.w.MPD_TYPE&&(me.addManifestUpdate(R),K.trigger(u.Z.MANIFEST_LOADING_FINISHED,{request:R}))},ot=function(){if(pe&&(clearTimeout(pe),pe=null),l.indexOf(N)!==-1&&(l.splice(l.indexOf(N),1),ae))if(we(!1),L>0){try{ue.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&R.type===Ze.w.MEDIA_SEGMENT_TYPE&&re.getRetryAttemptsForType(Ze.w.MEDIA_SEGMENT_TYPE)===L&&K.trigger(u.Z.ATTEMPT_BACKGROUND_SYNC)}catch{}L--;var Me={config:M};I.push(Me),Me.timeout=setTimeout(function(){I.indexOf(Me)!==-1&&(I.splice(I.indexOf(Me),1),g(M,L))},re.getRetryIntervalsForType(R.type))}else{if(R.type===Ze.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;B.error(new te.Z(b[R.type],R.url+" is not available",{request:R,response:N.response})),M.error&&M.error(R,"error",N.response.statusText,N.response),M.complete&&M.complete(R,N.response.statusText)}};R.hasOwnProperty("availabilityTimeComplete")&&R.availabilityTimeComplete===!1&&window.fetch&&R.responseType==="arraybuffer"&&R.type===Ze.w.MEDIA_SEGMENT_TYPE?((De=Gn(q).create({requestModifier:de,lowLatencyThroughputModel:j,boxParser:fe})).setup({dashMetrics:me}),Le=t.Z.FILE_LOADER_TYPES.FETCH):(De=(0,Mt.Z)(q).create({requestModifier:de}),Le=t.Z.FILE_LOADER_TYPES.XHR);var at=null,Xe=de.modifyRequestURL?de.modifyRequestURL(R.url):R.url;if(ue.get().streaming.cmcd&&ue.get().streaming.cmcd.enabled){var $e=ue.get().streaming.cmcd.mode;if($e===t.Z.CMCD_MODE_QUERY){var Dt=function(Me){try{var Ne=[],xe=m.getQueryParameter(Me);return xe&&Ne.push(xe),Ne}catch{return[]}}(R);Xe=ln.Z.addAditionalQueryParameterToUrl(Xe,Dt)}else $e===t.Z.CMCD_MODE_HEADER&&(at=m.getHeaderParameters(R))}var _e=F.getXHRWithCredentialsForType(R.type);if(R.queryParams){var Be=Object.keys(R.queryParams).map(function(Me){return{key:Me,value:R.queryParams[Me]}});Xe=ln.Z.addAditionalQueryParameterToUrl(Xe,Be)}R.url=Xe,N={url:Xe,method:Ze.w.GET,withCredentials:_e,request:R,onload:function(){N.response.status>=200&&N.response.status<=299&&(we(!0),M.success&&M.success(N.response.response,N.response.statusText,N.response.responseURL),M.complete&&M.complete(R,N.response.statusText))},onend:ot,onerror:ot,progress:function(Me){var Ne=new Date;Y&&(Y=!1,(!Me.lengthComputable||Me.lengthComputable&&Me.total!==Me.loaded)&&(R.firstByteDate=Ne)),Me.lengthComputable&&(R.bytesLoaded=Me.loaded,R.bytesTotal=Me.total),Me.noTrace||(Q.push({s:P,d:Me.time?Me.time:Ne.getTime()-P.getTime(),b:[Me.loaded?Me.loaded-se:0]}),P=Ne,se=Me.loaded),pe&&(clearTimeout(pe),pe=null),ue.get().streaming.fragmentRequestProgressTimeout>0&&(pe=setTimeout(function(){U.warn("Abort request "+N.url+" due to progress timeout"),N.response.onabort=null,N.loader.abort(N),ot()},ue.get().streaming.fragmentRequestProgressTimeout)),M.progress&&Me&&M.progress(Me)},onabort:function(){Oe(!0),pe&&(clearTimeout(pe),pe=null),M.abort&&M.abort(R)},ontimeout:function(Me){var Ne;if(Me.lengthComputable){var xe=Me.loaded/Me.total*100;Ne="Request timeout: loaded: "+Me.loaded+", out of: "+Me.total+" : "+xe.toFixed(3)+"% Completed"}else Ne="Request timeout: non-computable download size";U.warn(Ne)},loader:De,timeout:ie,headers:at};var ct=new Date().getTime();if(isNaN(R.delayLoadingTime)||ct>=R.delayLoadingTime)l.push(N),De.load(N);else{var le={httpRequest:N};_.push(le),le.delayTimeout=setTimeout(function(){if(_.indexOf(le)!==-1){_.splice(_.indexOf(le),1);try{X=new Date,P=X,l.push(le.httpRequest),De.load(le.httpRequest)}catch{le.httpRequest.onerror()}}},R.delayLoadingTime-ct)}}return r={load:function(M){M.request?g(M,re.getRetryAttemptsForType(M.request.type)):M.error&&M.error(M.request,"error")},abort:function(){I.forEach(function(M){clearTimeout(M.timeout),M.config.request&&M.config.abort&&M.config.abort(M.config.request)}),I=[],_.forEach(function(M){return clearTimeout(M.delayTimeout)}),_=[],l.forEach(function(M){M.request.type!==Ze.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(M.onloadend=M.onerror=M.onprogress=void 0,M.loader.abort(M))}),l=[]}},U=(0,E.Z)(q).getInstance().getLogger(r),l=[],_=[],I=[],m=Tt(q).getInstance(),A=Gr(q).getInstance(),j=Yr(q).getInstance(),F=(0,bt.Z)(q).getInstance(),zt(w={},Ze.w.MPD_TYPE,G.DOWNLOAD_ERROR_ID_MANIFEST_CODE),zt(w,Ze.w.XLINK_EXPANSION_TYPE,G.DOWNLOAD_ERROR_ID_XLINK_CODE),zt(w,Ze.w.INIT_SEGMENT_TYPE,G.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),zt(w,Ze.w.MEDIA_SEGMENT_TYPE,G.DOWNLOAD_ERROR_ID_CONTENT_CODE),zt(w,Ze.w.INDEX_SEGMENT_TYPE,G.DOWNLOAD_ERROR_ID_CONTENT_CODE),zt(w,Ze.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,G.DOWNLOAD_ERROR_ID_CONTENT_CODE),zt(w,Ze.w.OTHER_TYPE,G.DOWNLOAD_ERROR_ID_CONTENT_CODE),b=w,r}cn.__dashjs_factory_name="HTTPLoader";var Pn=h.Z.getClassFactory(cn);function Dn(){var o;function r(){o={}}function l(){r()}return l(),{getLoader:function(_){for(var I in o)if(o.hasOwnProperty(I)&&_.startsWith(I))return o[I];return Pn},registerLoader:function(_,I){o[_]=I},unregisterLoader:function(_){o[_]&&delete o[_]},unregisterAllLoader:r,reset:l}}Dn.__dashjs_factory_name="SchemeLoaderFactory";var Zn=h.Z.getSingletonFactory(Dn);function Sn(o){o=o||{};var r,l,_=this.context;return r=Zn(_).getInstance(),{load:function(I){if(!l){var b=r.getLoader(I&&I.request?I.request.url:null);l=b(_).create({errHandler:o.errHandler,mediaPlayerModel:o.mediaPlayerModel,requestModifier:o.requestModifier,dashMetrics:o.dashMetrics,boxParser:o.boxParser?o.boxParser:null,constants:o.constants?o.constants:null,dashConstants:o.dashConstants?o.dashConstants:null,urlUtils:o.urlUtils?o.urlUtils:null,requestTimeout:isNaN(o.requestTimeout)?0:o.requestTimeout,errors:o.errors})}l.load(I)},abort:function(){l&&l.abort()}}}Sn.__dashjs_factory_name="URLLoader";var zn=h.Z.getClassFactory(Sn);function Ln(o){return Ln=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ln(o)}function In(o,r){return In=Object.setPrototypeOf||function(l,_){return l.__proto__=_,l},In(o,r)}function ur(o,r){return!r||Ln(r)!=="object"&&typeof r!="function"?function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(o):r}function Wn(o){return Wn=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Wn(o)}var dr=function(o){(function(b,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(m&&m.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),m&&In(b,m)})(I,o);var r,l,_=(r=I,l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var b,m=Wn(r);if(l){var A=Wn(this).constructor;b=Reflect.construct(m,arguments,A)}else b=m.apply(this,arguments);return ur(this,b)});function I(b){var m;return function(A,F){if(!(A instanceof F))throw new TypeError("Cannot call a class as a function")}(this,I),(m=_.call(this,b)).checkForExistenceOnly=!0,m}return I}(C.Z);function nr(o){o=o||{};var r,l,_=this.context,I=o.eventBus,b=o.events,m=o.urlUtils,A=o.errors,F=o.streamId;return r={checkForExistence:function(j){var U=function(q){I.trigger(b.CHECK_FOR_EXISTENCE_COMPLETED,{request:j,exists:q})};if(j){var w=new dr(j.url);l.load({request:w,success:function(){U(!0)},error:function(){U(!1)}})}else U(!1)},load:function(j){var U=function(w,q){I.trigger(b.LOADING_COMPLETED,{request:j,response:w||null,error:q||null,sender:r})};j?l.load({request:j,progress:function(w){I.trigger(b.LOADING_PROGRESS,{request:j,stream:w.stream,streamId:F}),w.data&&I.trigger(b.LOADING_DATA_PROGRESS,{request:j,response:w.data||null,error:null,sender:r})},success:function(w){U(w)},error:function(w,q,B){U(void 0,new te.Z(A.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,B,q))},abort:function(w){w&&I.trigger(b.LOADING_ABANDONED,{mediaType:w.mediaType,request:w,sender:r})}}):U(void 0,new te.Z(A.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,A.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function(){l&&l.abort()},reset:function(){l&&(l.abort(),l=null)}},l=zn(_).create({errHandler:o.errHandler,errors:A,dashMetrics:o.dashMetrics,mediaPlayerModel:o.mediaPlayerModel,requestModifier:o.requestModifier,urlUtils:m,constants:t.Z,boxParser:o.boxParser,dashConstants:o.dashConstants,requestTimeout:o.settings.get().streaming.fragmentRequestTimeout}),r}nr.__dashjs_factory_name="FragmentLoader";var Er=h.Z.getClassFactory(nr);function gr(){return{modifyResponseAsync:function(o){return Promise.resolve(o)}}}gr.__dashjs_factory_name="SegmentResponseModifier";var ei=h.Z.getSingletonFactory(gr);function wr(o){o=o||{};var r,l,_,I=this.context,b=(0,p.Z)(I).getInstance(),m=o.errHandler,A=o.mediaPlayerModel,F=o.dashMetrics,j=(0,E.Z)(I).getInstance(),U=ei(I).getInstance(),w=o.streamInfo;function q(){return w.id}function B(){for(var re in _)_[re].reset();_={}}function me(re){if(re.sender){var de=re.request,fe=re.response,G=de.isInitializationRequest(),ie=de.mediaInfo.streamInfo;if(re.error&&(de.mediaType===t.Z.AUDIO||de.mediaType===t.Z.VIDEO||de.mediaType===t.Z.TEXT&&de.mediaInfo.isFragmented)&&b.trigger(u.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD,{entry:re.request.serviceLocation}),fe&&ie){var K=function(ue,g,M,L){var N=new Ot;return N.streamId=M,N.mediaInfo=g.mediaInfo,N.segmentType=g.type,N.start=g.startTime,N.duration=g.duration,N.end=N.start+N.duration,N.bytes=ue,N.index=g.index,N.quality=g.quality,N.representationId=g.representationId,N.endFragment=L,N}(fe,de,w.id,re.type!==u.Z.FRAGMENT_LOADING_PROGRESS);U.modifyResponseAsync(K).then(function(ue){b.trigger(G?u.Z.INIT_FRAGMENT_LOADED:u.Z.MEDIA_FRAGMENT_LOADED,{chunk:ue,request:de},{streamId:ie.id,mediaType:de.mediaType})}).catch(function(ue){l.error(ue),b.trigger(G?u.Z.INIT_FRAGMENT_LOADED:u.Z.MEDIA_FRAGMENT_LOADED,{chunk:K,request:de},{streamId:ie.id,mediaType:de.mediaType})})}else l.warn("No "+de.mediaType+" bytes to push or stream is inactive.")}}return r={getStreamId:q,getModel:function(re){var de=_[re];return de||(de=z(I).create({streamInfo:w,type:re,dashMetrics:F,fragmentLoader:Er(I).create({dashMetrics:F,mediaPlayerModel:A,errHandler:m,requestModifier:(0,Te.Z)(I).getInstance(),settings:o.settings,boxParser:o.boxParser,eventBus:b,events:u.Z,errors:$,dashConstants:o.dashConstants,urlUtils:o.urlUtils,streamId:q()}),debug:j,eventBus:b,events:u.Z}),_[re]=de),de},reset:function(){b.off(n.Z.FRAGMENT_LOADING_COMPLETED,me,this),b.off(n.Z.FRAGMENT_LOADING_PROGRESS,me,this),B()}},l=j.getLogger(r),B(),b.on(n.Z.FRAGMENT_LOADING_COMPLETED,me,r),b.on(n.Z.FRAGMENT_LOADING_PROGRESS,me,r),r}wr.__dashjs_factory_name="FragmentController";var jr=h.Z.getClassFactory(wr),ti=function o(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,o),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null},ni=function o(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,o),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN};function ri(o){var r,l,_=this.context,I=o.streamInfo;function b(A){l.setTrackByIndex(A)}function m(){l&&l.reset()}return r={getStreamId:function(){return I.id},initialize:function(){l.addTracks();var A=l.getTracks();A&&A.length>0&&b(0)},provide:function(A,F){if(typeof F=="function"){var j,U,w=l.getCurrentTrack();if(!w||w.segmentDuration<=0||A==null)F(null);else{(U=l.getThumbnailRequestForTime(A))&&(w.segmentDuration=U.duration),j=A%w.segmentDuration;var q=Math.floor(j*w.tilesHor*w.tilesVert/w.segmentDuration),B=new ti;if(B.width=Math.floor(w.widthPerTile),B.height=Math.floor(w.heightPerTile),B.x=Math.floor(q%w.tilesHor)*w.widthPerTile,B.y=Math.floor(q/w.tilesHor)*w.heightPerTile,"readThumbnail"in w)return w.readThumbnail(A,function(re){B.url=re,F(B)});if(U)B.url=U.url,w.segmentDuration=NaN;else{var me=Math.floor(A/w.segmentDuration);B.url=function(re,de){var fe=de+re.startNumber,G=(0,i.vi)(re.templateUrl,"Number",fe);return G=(0,i.vi)(G,"Time",(fe-1)*re.segmentDuration*re.timescale),G=(0,i.vi)(G,"Bandwidth",re.bandwidth),(0,i.eR)(G)}(w,me)}F(B)}}},setTrackByIndex:b,getCurrentTrackIndex:function(){return l.getCurrentTrackIndex()},getBitrateList:function(){var A=l.getTracks(),F=0;return A.map(function(j){var U=new ni;return U.mediaType=t.Z.IMAGE,U.qualityIndex=F++,U.bitrate=j.bitrate,U.width=j.width,U.height=j.height,U})},reset:m},m(),l=(0,wt.Z)(_).create({streamInfo:I,adapter:o.adapter,baseURLController:o.baseURLController,timelineConverter:o.timelineConverter,debug:o.debug,eventBus:o.eventBus,events:o.events,dashConstants:o.dashConstants,dashMetrics:o.dashMetrics,segmentBaseController:o.segmentBaseController}),r}ri.__dashjs_factory_name="ThumbnailController";var Ri=h.Z.getClassFactory(ri),Hr=D(7417);function ii(o){var r;o=o||{};var l=[],_=(0,p.Z)(this.context).getInstance(),I=o.updateEventName,b=o.addBlacklistEventName;function m(A){l.indexOf(A)===-1&&(l.push(A),_.trigger(I,{entry:A}))}return r={add:m,contains:function(A){return!!(l.length&&A&&A.length)&&l.indexOf(A)!==-1},reset:function(){l=[]}},b&&_.on(b,function(A){m(A.entry)},r),r}ii.__dashjs_factory_name="BlackListController";var Vr=h.Z.getClassFactory(ii),wi=[t.Z.VIDEO,t.Z.AUDIO,t.Z.TEXT,t.Z.MUXED,t.Z.IMAGE];function ai(o){o=o||{};var r,l,_,I,b,m,A,F,j,U,w,q,B,me,re,de,fe,G,ie=this.context,K=(0,p.Z)(ie).getInstance(),ue=(0,Ge.Z)(ie).getInstance(),g=o.manifestModel,M=o.mediaPlayerModel,L=o.dashMetrics,N=o.manifestUpdater,R=o.adapter,Q=o.timelineConverter,Y=o.capabilities,ae=o.errHandler,X=o.abrController,P=o.playbackController,se=o.eventController,pe=o.mediaController,Le=o.protectionController,De=o.textController,Oe=o.videoModel,we=o.streamInfo,ot=o.settings;function at(gt,Zt){return new Promise(function(Ut,Yt){Ne(),U=!0,lt();var Gt=Oe.getElement(),Qe=[];wi.forEach(function(Pe){(Pe!==t.Z.TEXT||gt)&&(Pe!==t.Z.VIDEO||!Gt||Gt&&/^VIDEO$/i.test(Gt.nodeName))&&Qe.push(Xe(Pe,gt))}),Promise.all(Qe).then(function(){return Pe=Zt,new Promise(function(rt){var J={},Ae=_.map(function(ut){return ut.createBufferSinks(Pe)});Promise.all(Ae).then(function(ut){ut.forEach(function(_t){_t&&(J[_t.getType()]=_t)}),rt(J)}).catch(function(){rt(J)})});var Pe}).then(function(Pe){if(U=!1,_.length===0){var rt="No streams to play.";ae.error(new te.Z($.MANIFEST_ERROR_ID_NOSTREAMS_CODE,rt,g.getValue())),l.fatal(rt)}else dt();gt&&De.createTracks(we),Ut(Pe)}).catch(function(Pe){Yt(Pe)})})}function Xe(gt,Zt){var Ut,Yt=R.getAllMediaInfoForType(we,gt),Gt=[],Qe=null;if(!Yt||Yt.length===0)return l.info("No "+gt+" data."),Promise.resolve();gt===t.Z.VIDEO&&(A=!0),gt===t.Z.AUDIO&&(F=!0);for(var Pe=0,rt=Yt.length;Pe<rt;Pe++)Qe=Yt[Pe],gt===t.Z.TEXT&&Qe.isEmbedded&&(De.addEmbeddedTrack(we,Qe),Gt.push(Qe)),$e(Qe)&&pe.addTrack(Qe);if(Gt.length>0&&(pe.setInitialMediaSettingsForType(gt,we),De.addMediaInfosToBuffer(we,gt,Gt)),Yt=Yt.filter(function(Ae){return!Ae.isEmbedded}),Yt.length===0)return Promise.resolve();if(gt===t.Z.IMAGE)return(q=Ri(ie).create({streamInfo:we,adapter:R,baseURLController:o.baseURLController,timelineConverter:o.timelineConverter,debug:de,eventBus:K,events:u.Z,dashConstants:e.Z,dashMetrics:o.dashMetrics,segmentBaseController:o.segmentBaseController})).initialize(),Promise.resolve();K.trigger(u.Z.STREAM_INITIALIZING,{streamInfo:we,mediaInfo:Qe}),pe.setInitialMediaSettingsForType(gt,we);var J=function(Ae,ut){var _t=Ae&&Ae.length>0?Ae[0]:null,xt=w.getModel(_t?_t.type:null),an=_t?_t.type:null,Tn=_t?_t.mimeType:null,kn=_t?_t.isFragmented:null,On=Lt(ie).create({streamInfo:we,type:an,mimeType:Tn,timelineConverter:Q,adapter:R,manifestModel:g,mediaPlayerModel:M,fragmentModel:xt,dashMetrics:o.dashMetrics,baseURLController:o.baseURLController,segmentBaseController:o.segmentBaseController,abrController:X,playbackController:P,mediaController:pe,textController:De,errHandler:ae,settings:ot,boxParser:re,segmentBlacklistController:B});On.initialize(ut,A,kn),_.push(On);for(var Jn=0;Jn<Ae.length;Jn++)On.addMediaInfo(Ae[Jn]);return an===t.Z.TEXT&&De.addMediaInfosToBuffer(we,an,Ae,xt),On}(Yt,Zt);return(Ut=pe.getCurrentTrackFor(gt,we.id))?(X.updateTopQualityIndex(Ut),J.selectMediaInfo(gt===t.Z.TEXT&&Ut.isEmbedded?Yt[0]:Ut)):Promise.resolve()}function $e(gt){var Zt,Ut=gt?gt.type:null;return Ut===t.Z.MUXED?(Zt="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",l.fatal(Zt),ae.error(new te.Z($.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,Zt,g.getValue())),!1):!(Ut!==t.Z.TEXT&&Ut!==t.Z.IMAGE&&gt.contentProtection&&!Y.supportsEncryptedMedia()&&(ae.error(new te.Z($.CAPABILITY_MEDIAKEYS_ERROR_CODE,$.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),1))}function Dt(gt){for(var Zt=_?_.length:0,Ut=0;Ut<Zt;Ut++){var Yt=_[Ut].getFragmentModel();Yt.abortRequests(),Yt.resetInitialSettings(),_[Ut].reset(!1,gt)}De&&De.deactivateStream(we),_=[],b=!1,m=!1,sn(!1),Be(!1),K.trigger(u.Z.STREAM_DEACTIVATED,{streamInfo:we})}function _e(gt){Dt(gt),I=!1,A=!1,F=!1,j={},U=!1,fe=!1,G=[]}function Be(gt){fe=gt}function ct(){return we?we.start:NaN}function le(){return we?we.id:null}function Me(){return we}function Ne(){if(!Oe||!X)throw new Error(t.Z.MISSING_CONFIG_ERROR)}function xe(gt){gt.error&&(ae.error(gt.error),l.fatal(gt.error.message))}function lt(){if(se){var gt=R.getEventsFor(we);gt&&gt.length>0&&se.addInlineEvents(gt,we.id)}}function dt(){for(var gt=_.length,Zt=j.audio||j.video?new te.Z($.DATA_UPDATE_FAILED_ERROR_CODE,$.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,Ut=0;Ut<gt;Ut++)if(_[Ut].isUpdating()||U)return;if(Le){Le.clearMediaInfoArray();for(var Yt=0;Yt<gt&&_[Yt];Yt++){var Gt=_[Yt].getType(),Qe=_[Yt].getMediaInfo();if(Gt===t.Z.AUDIO||Gt===t.Z.VIDEO||Gt===t.Z.TEXT&&Qe.isFragmented){var Pe=_[Yt].getMediaInfo();Pe&&Le.initializeForMedia(Pe)}}Le.handleKeySystemFromManifest()}Zt?ae.error(Zt):I||(I=!0,Oe.waitForReadyState(t.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){K.trigger(u.Z.STREAM_INITIALIZED,{streamInfo:we})}))}function At(){var gt=Xt(),Zt=gt.length;if(Zt!==0){for(var Ut=0;Ut<Zt;Ut++)if(!gt[Ut].isBufferingCompleted()&&(gt[Ut].getType()===t.Z.AUDIO||gt[Ut].getType()===t.Z.VIDEO))return void l.debug("onBufferingCompleted - One streamProcessor has finished but",gt[Ut].getType(),"one is not buffering completed");l.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),m=!0,K.trigger(u.Z.STREAM_BUFFERING_COMPLETED,{streamInfo:we},{streamInfo:we})}else l.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function Pt(gt){j[gt.mediaType]=gt.error,dt()}function Vt(gt){se&&se.addInbandEvents(gt.events,we.id)}function Wt(gt){return gt&&gt.type?qt(gt.type):null}function qt(gt){return gt?Xt().filter(function(Zt){return Zt.getType()===gt})[0]:null}function Xt(){for(var gt,Zt,Ut=[],Yt=0;Yt<_.length;Yt++)(gt=(Zt=_[Yt]).getType())!==t.Z.AUDIO&&gt!==t.Z.VIDEO&&gt!==t.Z.TEXT||Ut.push(Zt);return Ut}function Ht(gt,Zt){var Ut=Me(),Yt=Zt.getStreamInfo();if(!Yt||!Ut)return!0;var Gt=R.getAdaptationForType(Yt.index,gt,Yt),Qe=R.getAdaptationForType(Ut.index,gt,Ut);return Gt&&Qe?!(!tn(Qe)&&tn(Gt)):!Gt&&!Qe}function tn(gt){return!!gt&&!!(gt.ContentProtection||gt.Representation_asArray&&gt.Representation_asArray.length>0&&gt.Representation_asArray[0].ContentProtection)}function un(gt,Zt){var Ut=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!gt||!gt.hasOwnProperty("getStreamInfo"))return!1;var Yt=gt.getStreamInfo(),Gt=Ut?Ut.getStreamInfo():Me();if(!Yt||!Gt)return!1;var Qe=R.getAdaptationForType(Yt.index,Zt,Yt),Pe=R.getAdaptationForType(Gt.index,Zt,Gt);if(!Qe||!Pe)return!Qe&&!Pe;var rt=Qe&&Pe&&Qe.mimeType===Pe.mimeType,J=Pe.Representation_asArray.map(function(xt){return xt.codecs}),Ae=Qe.Representation_asArray.map(function(xt){return xt.codecs}),ut=Ae.some(function(xt){return J.indexOf(xt)>-1}),_t=Ae.some(function(xt){return J.some(function(an){return Y.codecRootCompatibleWithCodec(an,xt)})});return ut||_t&&rt}function sn(gt){me=gt}function fn(){return me}return r={initialize:function(){K.on(u.Z.BUFFERING_COMPLETED,At,r),K.on(u.Z.DATA_UPDATE_COMPLETED,Pt,r),K.on(u.Z.INBAND_EVENTS,Vt,r),Le&&(K.on(u.Z.KEY_ERROR,xe,r),K.on(u.Z.SERVER_CERTIFICATE_UPDATED,xe,r),K.on(u.Z.LICENSE_REQUEST_COMPLETE,xe,r),K.on(u.Z.KEY_SYSTEM_SELECTED,xe,r),K.on(u.Z.KEY_SESSION_CREATED,xe,r),K.on(u.Z.KEY_STATUSES_CHANGED,xe,r)),De.initializeForStream(we),K.trigger(u.Z.STREAM_UPDATED,{streamInfo:we})},getStreamId:function(){return we?we.id:null},activate:function(gt,Zt){return new Promise(function(Ut,Yt){if(!b)return fn()?(b=!0,K.trigger(u.Z.STREAM_ACTIVATED,{streamInfo:we}),void Ut(Zt)):void function(Gt,Qe){return at(Gt,Qe)}(gt,Zt).then(function(Gt){b=!0,K.trigger(u.Z.STREAM_ACTIVATED,{streamInfo:we}),Ut(Gt)}).catch(function(Gt){Yt(Gt)});Ut(Zt)})},deactivate:Dt,getIsActive:function(){return b},getDuration:function(){return we?we.duration:NaN},getStartTime:ct,getId:le,getStreamInfo:Me,getHasAudioTrack:function(){return F},getHasVideoTrack:function(){return A},startPreloading:function(gt,Zt){return new Promise(function(Ut,Yt){fn()?Yt():(l.info("[startPreloading] Preloading next stream with id ".concat(le())),sn(!0),at(gt,Zt).then(function(){for(var Gt=0;Gt<_.length&&_[Gt];Gt++)_[Gt].setExplicitBufferingTime(ct()),_[Gt].getScheduleController().startScheduleTimer();Ut()}).catch(function(){sn(!1),Yt()}))})},initializeForTextWithMediaSource:function(gt){return new Promise(function(Zt,Ut){Xe(t.Z.TEXT,gt).then(function(){return(Yt=qt(t.Z.TEXT))?Yt.createBufferSinks():Promise.resolve();var Yt}).then(function(){De.createTracks(we),Zt()}).catch(function(Yt){Ut(Yt)})})},getThumbnailController:function(){return q},getBitrateListFor:function(gt){if(Ne(),gt===t.Z.IMAGE)return q?q.getBitrateList():[];var Zt=function(Ut){for(var Yt=null,Gt=0;Gt<_.length;Gt++)if((Yt=_[Gt]).getType()===Ut)return Yt.getMediaInfo();return null}(gt);return X.getBitrateList(Zt)},updateData:function(gt){return new Promise(function(Zt){U=!0,we=gt,se&&lt();for(var Ut=[],Yt=0,Gt=_.length;Yt<Gt;Yt++){var Qe=_[Yt],Pe=Qe.getMediaInfo();Ut.push(Qe.updateStreamInfo(we));var rt=R.getAllMediaInfoForType(we,Qe.getType());if(rt=rt.filter(function(ut){return!ut.isEmbedded})){Qe.clearMediaInfoArray();for(var J=0;J<rt.length;J++){var Ae=rt[J];Qe.addMediaInfo(rt[J]),R.areMediaInfosEqual(Pe,Ae)&&(X.updateTopQualityIndex(Ae),Ut.push(Qe.selectMediaInfo(Ae)))}}}Promise.all(Ut).then(function(){for(Ut=[];G.length>0;){var ut=G.pop(),_t=ut.newMediaInfo,xt=Wt(ut.oldMediaInfo);if(!xt)return;Ut.push(xt.prepareTrackSwitch()),Ut.push(xt.selectMediaInfo(_t))}return Promise.all(Ut)}).then(function(){U=!1,dt(),K.trigger(u.Z.STREAM_UPDATED,{streamInfo:we}),Zt()})})},reset:function(gt){w&&(w.reset(),w=null),X&&we&&X.clearDataForStream(we.id),B&&(B.reset(),B=null),_e(gt),we=null,K.off(u.Z.DATA_UPDATE_COMPLETED,Pt,r),K.off(u.Z.BUFFERING_COMPLETED,At,r),K.off(u.Z.INBAND_EVENTS,Vt,r),Le&&(K.off(u.Z.KEY_ERROR,xe,r),K.off(u.Z.SERVER_CERTIFICATE_UPDATED,xe,r),K.off(u.Z.LICENSE_REQUEST_COMPLETE,xe,r),K.off(u.Z.KEY_SYSTEM_SELECTED,xe,r),K.off(u.Z.KEY_SESSION_CREATED,xe,r),K.off(u.Z.KEY_STATUSES_CHANGED,xe,r))},getProcessors:Xt,setMediaSource:function(gt){return new Promise(function(Zt,Ut){for(var Yt=[],Gt=0;Gt<_.length;)$e(_[Gt].getMediaInfo())?(Yt.push(_[Gt].setMediaSource(gt)),Gt++):(_[Gt].reset(),_.splice(Gt,1));Promise.all(Yt).then(function(){for(var Qe=0;Qe<_.length;Qe++)_[Qe].dischargePreBuffer();if(_.length===0){var Pe="No streams to play.";ae.error(new te.Z($.MANIFEST_ERROR_ID_NOSTREAMS_CODE,Pe+"nostreams",g.getValue())),l.fatal(Pe)}Zt()}).catch(function(Qe){l.error(Qe),Ut(Qe)})})},isMediaCodecCompatible:function(gt){var Zt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return un(gt,t.Z.VIDEO,Zt)&&un(gt,t.Z.AUDIO,Zt)},isProtectionCompatible:function(gt){return!gt||Ht(t.Z.VIDEO,gt)&&Ht(t.Z.AUDIO,gt)},getPreloaded:fn,getIsEndedEventSignaled:function(){return fe},setIsEndedEventSignaled:Be,getAdapter:function(){return R},getHasFinishedBuffering:function(){return m},setPreloaded:sn,startScheduleControllers:function(){for(var gt=_.length,Zt=0;Zt<gt&&_[Zt];Zt++)_[Zt].getScheduleController().startScheduleTimer()},prepareTrackChange:function(gt){if(b&&we){m=!1;var Zt=gt.newMediaInfo,Ut=g.getValue();R.setCurrentMediaInfo(we.id,Zt.type,Zt);var Yt=Wt(Zt);if(Yt){var Gt=P.getTime();l.info("Stream -  Process track changed at current time "+Gt),Ut.refreshManifestOnSwitchTrack?(G.push(gt),N.getIsUpdating()||(l.debug("Stream -  Refreshing manifest for switch track"),N.refreshManifest())):Yt.selectMediaInfo(Zt).then(function(){Zt.type!==t.Z.VIDEO&&Zt.type!==t.Z.AUDIO||X.updateTopQualityIndex(Zt),Yt.prepareTrackSwitch()})}}},prepareQualityChange:function(gt){var Zt=qt(gt.mediaType);Zt&&Zt.prepareQualityChange(gt)}},function(){try{de=(0,E.Z)(ie).getInstance(),l=de.getLogger(r),_e(),re=(0,Hr.Z)(ie).getInstance(),B=Vr(ie).create({updateEventName:u.Z.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:u.Z.SEGMENT_LOCATION_BLACKLIST_ADD}),w=jr(ie).create({streamInfo:we,mediaPlayerModel:M,dashMetrics:L,errHandler:ae,settings:ot,boxParser:re,dashConstants:e.Z,urlUtils:ue})}catch(gt){throw gt}}(),r}ai.__dashjs_factory_name="Stream";var oi=h.Z.getClassFactory(ai),Ni=function o(r){(function(l,_){if(!(l instanceof _))throw new TypeError("Cannot call a class as a function")})(this,o),this.url=r||null,this.type=Ze.w.CONTENT_STEERING_TYPE,this.responseType="json"},wn=function o(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,o),this.version=null,this.ttl=300,this.reloadUri=null,this.pathwayPriority=[],this.pathwayClones=[]};function vr(){var o,r,l,_,I,b,m,A,F,j,U,w,q,B,me,re=this.context,de=(0,Ge.Z)(re).getInstance();function fe(X){g(X,"baseUrl")}function G(X){g(X,"location")}function ie(X){if(X&&X.request&&X.request.serviceLocation&&X.request.requestStartDate&&X.request.requestEndDate&&!isNaN(X.request.bytesTotal)){var P=X.request.serviceLocation,se=X.request.requestEndDate.getTime()-X.request.requestStartDate.getTime();ue(P,parseInt(8*X.request.bytesTotal/se*1e3))}}function K(X){X&&X.httpRequest&&X.httpRequest._serviceLocation&&!isNaN(X.throughput)&&ue(X.httpRequest._serviceLocation,1e3*X.throughput)}function ue(X,P){I[X]||(I[X]=[]),I[X].push(P),I[X].length>4&&I[X].shift()}function g(X,P){if(X&&X.request&&X.request.serviceLocation){var se=X.request.serviceLocation;_[P].all.indexOf(se)===-1&&_[P].all.push(se),_[P].current=se}}function M(){var X=U.getValue(),P=me.getContentSteering(X);return P||(P=q.getServiceDescriptionSettings().contentSteering),P}function L(){return new Promise(function(X){try{var P=M();if(!P||!P.serverUrl)return void X();var se=function(Le){var De=Le.serverUrl;l&&l.reloadUri&&(De=de.isRelative(l.reloadUri)?de.resolve(l.reloadUri,Le.serverUrl):l.reloadUri);var Oe=[],we=_.baseUrl.all.concat(_.location.all);if(we.length>0){var ot=we.map(function($e){var Dt=function(_e){if(!_e||!I[_e]||I[_e].length===0)return-1;var Be=I[_e].reduce(function(ct,le){return ct+le})/I[_e].length;return parseInt(Be)}($e);return{serviceLocation:$e,throughput:Dt}});ot.sort(function($e,Dt){return Dt.throughput-$e.throughput});var at="",Xe="";ot.forEach(function($e,Dt){Dt!==0&&(at="".concat(at,","),$e.throughput>-1&&(Xe="".concat(Xe,","))),at="".concat(at).concat($e.serviceLocation),$e.throughput>-1&&(Xe="".concat(Xe).concat($e.throughput))}),Oe.push({key:"_DASH_pathway",value:'"'.concat(at,'"')}),Oe.push({key:"_DASH_throughput",value:Xe})}return De=ln.Z.addAditionalQueryParameterToUrl(De,Oe)}(P),pe=new Ni(se);m.load({request:pe,success:function(Le){(function(De){De&&De[e.Z.CONTENT_STEERING_RESPONSE.VERSION]&&parseInt(De[e.Z.CONTENT_STEERING_RESPONSE.VERSION])===1&&((l=new wn).version=De[e.Z.CONTENT_STEERING_RESPONSE.VERSION],De[e.Z.CONTENT_STEERING_RESPONSE.TTL]&&!isNaN(De[e.Z.CONTENT_STEERING_RESPONSE.TTL])&&(l.ttl=De[e.Z.CONTENT_STEERING_RESPONSE.TTL]),De[e.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]&&(l.reloadUri=De[e.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]),De[e.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]&&(l.pathwayPriority=De[e.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]),De[e.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES]&&(l.pathwayClones=De[e.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES],l.pathwayClones=l.pathwayClones.filter(function(Oe){return function(we){return we[e.Z.CONTENT_STEERING_RESPONSE.BASE_ID]&&we[e.Z.CONTENT_STEERING_RESPONSE.ID]&&we[e.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT]&&we[e.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][e.Z.CONTENT_STEERING_RESPONSE.HOST]}(Oe)})),Q())})(Le),B.trigger(n.Z.CONTENT_STEERING_REQUEST_COMPLETED,{currentSteeringResponseData:l,url:se}),X()},error:function(Le,De,Oe,we){(function(ot,at){try{switch(r.warn("Error fetching data from content steering server",ot),at.status){case 410:break;case 429:var Xe=at&&at.getResponseHeader?at.getResponseHeader("retry-after"):null;Xe!==null&&(l||(l={}),l.ttl=parseInt(Xe)),Q();break;default:Q()}}catch($e){r.error($e)}})(Le,we),X(Le)},complete:function(){_.baseUrl.all=N(_.baseUrl),_.location.all=N(_.location)}})}catch(Le){X(Le)}})}function N(X){return X.all&&X.all.length!==0&&X.current?X.all.filter(function(P){return P===X.current}):[]}function R(X){try{var P=[];return X&&X.length!==0&&l&&l.pathwayClones&&l.pathwayClones.length!==0&&l.pathwayClones.forEach(function(se){var pe=X.filter(function(ot){return se[e.Z.CONTENT_STEERING_RESPONSE.BASE_ID]===ot.serviceLocation}),Le=null;if(pe&&pe.length>0&&(Le=pe[0]),Le){var De=new URL(Le.url),Oe=se[e.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][e.Z.CONTENT_STEERING_RESPONSE.HOST];Oe=ln.Z.stringHasProtocol(Oe)?Oe:"".concat(De.protocol,"//").concat(Oe);var we={synthesizedUrl:"".concat(Oe).concat(De.pathname),serviceLocation:se[e.Z.CONTENT_STEERING_RESPONSE.ID],queryParams:se[e.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][e.Z.CONTENT_STEERING_RESPONSE.PARAMS],reference:Le};P.push(we)}}),P}catch(se){return r.error(se),[]}}function Q(){l&&l.ttl&&!isNaN(l.ttl)&&(b&&clearTimeout(b),b=setTimeout(function(){L()},1e3*l.ttl))}function Y(){b&&clearTimeout(b),b=null}function ae(){l=null,I={},_={baseUrl:{current:null,all:[]},location:{current:null,all:[]}},Y()}return o={reset:function(){ae(),B.off(n.Z.FRAGMENT_LOADING_STARTED,fe,o),B.off(n.Z.MANIFEST_LOADING_STARTED,G,o),B.off(n.Z.MANIFEST_LOADING_FINISHED,ie,o),B.off(n.Z.THROUGHPUT_MEASUREMENT_STORED,K,o)},setConfig:function(X){X&&(X.adapter&&(me=X.adapter),X.errHandler&&(A=X.errHandler),X.dashMetrics&&(F=X.dashMetrics),X.mediaPlayerModel&&(j=X.mediaPlayerModel),X.requestModifier&&(w=X.requestModifier),X.manifestModel&&(U=X.manifestModel),X.serviceDescriptionController&&(q=X.serviceDescriptionController),X.eventBus&&(B=X.eventBus))},loadSteeringData:L,getCurrentSteeringResponseData:function(){return l},shouldQueryBeforeStart:function(){var X=M();return!!X&&X.queryBeforeStart},getSteeringDataFromManifest:M,stopSteeringRequestTimer:Y,getSynthesizedBaseUrlElements:function(X){try{return R(X).map(function(P){var se=new ir(P.synthesizedUrl,P.serviceLocation);return se.queryParams=P.queryParams,se.dvb_priority=P.reference.dvb_priority,se.dvb_weight=P.reference.dvb_weight,se.availabilityTimeOffset=P.reference.availabilityTimeOffset,se.availabilityTimeComplete=P.reference.availabilityTimeComplete,se})}catch(P){return r.error(P),[]}},getSynthesizedLocationElements:function(X){try{return R(X).map(function(P){var se=new Bt(P.synthesizedUrl,P.serviceLocation);return se.queryParams=P.queryParams,se})}catch(P){return r.error(P),[]}},initialize:function(){m=zn(re).create({errHandler:A,dashMetrics:F,mediaPlayerModel:j,requestModifier:w,errors:$}),B.on(n.Z.FRAGMENT_LOADING_STARTED,fe,o),B.on(n.Z.MANIFEST_LOADING_STARTED,G,o),B.on(n.Z.MANIFEST_LOADING_FINISHED,ie,o),B.on(n.Z.THROUGHPUT_MEASUREMENT_STORED,K,o)}},r=(0,E.Z)(re).getInstance().getLogger(o),ae(),o}vr.__dashjs_factory_name="ContentSteeringController";var _r=h.Z.getSingletonFactory(vr);function Tr(){var o,r,l,_=this.context,I=(0,Ie.Z)(_).getInstance();return o={select:function(b){if(!b||b.length===0)return null;var m=null;return I.get().streaming.applyContentSteering&&(m=function(A){var F=l.getCurrentSteeringResponseData();return F&&F.pathwayPriority&&F.pathwayPriority.length>0?function(){for(var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],w=0,q=null,B=function(){var me=j[w],re=U.findIndex(function(de){return de.serviceLocation&&de.serviceLocation===me});if(re!==-1&&!r.contains(U[re].serviceLocation))return q=U[re],"break";w+=1};w<j.length&&B()!=="break";);return q}(F.pathwayPriority,A):null}(b)),m||(m=function(A){return A[0]}(b)),m},setConfig:function(b){b.blacklistController&&(r=b.blacklistController),b.contentSteeringController&&(l=b.contentSteeringController)},reset:function(){r.reset()}},r=Vr(_).create({updateEventName:u.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:u.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD}),l=_r(_).getInstance(),o}Tr.__dashjs_factory_name="LocationSelector";var Ci=h.Z.getClassFactory(Tr);function lr(){var o,r,l,_,I,b,m,A,F,j,U,w,q,B,me=this.context,re=(0,p.Z)(me).getInstance(),de=(0,Ge.Z)(me).getInstance();function fe(){l=NaN,m=!1,I=!0,b=!1,G()}function G(){_!==null&&(clearTimeout(_),_=null)}function ie(Y){G(),b||(isNaN(Y)&&!isNaN(l)&&(Y=1e3*l),isNaN(Y)||(r.debug("Refresh manifest in "+Y+" milliseconds."),_=setTimeout(M,Y)))}function K(){var Y=arguments.length>0&&arguments[0]!==void 0&&arguments[0];m=!0;var ae=F.getValue(),X=ae.url,P=null,se=U.getPatchLocation(ae),pe=j.select(se),Le=null;if(pe&&!Y)X=pe.url,P=pe.serviceLocation,Le=pe.queryParams;else{var De=ue(ae),Oe=j.select(De);Oe&&(X=Oe.url,P=Oe.serviceLocation,Le=Oe.queryParams)}de.isRelative(X)&&(X=de.resolve(X,ae.url)),A.load(X,P,Le)}function ue(Y){var ae=U.getLocation(Y),X=q.getSynthesizedLocationElements(ae);return ae.concat(X)}function g(Y){if(Y){if(U.getIsPatch(Y)){var ae=Y;Y=F.getValue();var X=U.isPatchValid(Y,ae),P=X;if(X){var se=U.getPublishTime(Y);P=U.applyPatchToManifest(Y,ae);var pe=U.getPublishTime(Y);P=se.getTime()!=pe.getTime()}if(!P)return r.debug("Patch provided is invalid, performing full manifest refresh"),void K(!0);Y.loadedTime=new Date}}else(Y=F.getValue()).loadedTime=new Date;if(F.getValue()&&F.getValue().type===e.Z.DYNAMIC&&Y.type===e.Z.STATIC)return re.trigger(u.Z.DYNAMIC_TO_STATIC),m=!1,void(b=!0);F.setValue(Y);var Le=new Date,De=(Le.getTime()-Y.loadedTime.getTime())/1e3;1e3*(l=U.getManifestUpdatePeriod(Y,De))>2147483647&&(l=2147483647e-3),re.trigger(u.Z.MANIFEST_UPDATED,{manifest:Y}),r.info("Manifest has been refreshed at "+Le+"["+Le.getTime()/1e3+"] "),I||ie()}function M(){I||(m?ie(B.get().streaming.manifestUpdateRetryInterval):K())}function L(Y){Y.error?Y.error.code===$.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&w.error(Y.error):g(Y.manifest)}function N(){I=!1,ie()}function R(){(I=!B.get().streaming.scheduling.scheduleWhilePaused)&&G()}function Q(){m=!1}return o={initialize:function(){fe(),re.on(u.Z.STREAMS_COMPOSED,Q,this),re.on(n.Z.PLAYBACK_STARTED,N,this),re.on(n.Z.PLAYBACK_PAUSED,R,this),re.on(u.Z.INTERNAL_MANIFEST_LOADED,L,this)},setManifest:function(Y){g(Y)},refreshManifest:K,getIsUpdating:function(){return m},setConfig:function(Y){Y&&(Y.manifestModel&&(F=Y.manifestModel),Y.adapter&&(U=Y.adapter),Y.manifestLoader&&(A=Y.manifestLoader),Y.errHandler&&(w=Y.errHandler),Y.locationSelector&&(j=Y.locationSelector),Y.settings&&(B=Y.settings),Y.contentSteeringController&&(q=Y.contentSteeringController))},reset:function(){re.off(n.Z.PLAYBACK_STARTED,N,this),re.off(n.Z.PLAYBACK_PAUSED,R,this),re.off(u.Z.STREAMS_COMPOSED,Q,this),re.off(u.Z.INTERNAL_MANIFEST_LOADED,L,this),fe()}},r=(0,E.Z)(me).getInstance().getLogger(o),j=Ci(me).create(),o}lr.__dashjs_factory_name="ManifestUpdater";var si=h.Z.getClassFactory(lr);function fr(){var o,r,l,_,I,b,m,A,F,j,U,w,q,B,me,re,de=this.context,fe=(0,p.Z)(de).getInstance(),G=(0,Ge.Z)(de).getInstance();function ie(){A=[],F=[],j=null,U=null,q=null,w=NaN,l=!1,_=!1,B=I.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function K(){I.get().streaming.utcSynchronization.enabled&&!l&&!_&&q&&q.value&&q.schemeIdUri&&!isNaN(w)&&!isNaN(I.get().streaming.utcSynchronization.backgroundAttempts)&&(U&&(Date.now()-U)/1e3<30||(A=[],_=!0,ue(isNaN(I.get().streaming.utcSynchronization.backgroundAttempts)?2:I.get().streaming.utcSynchronization.backgroundAttempts)))}function ue(Oe){try{if(Oe<=0)return void Le();var we=Date.now();b[q.schemeIdUri](q.value,function(ot){var at=Date.now(),Xe=M(we,at,ot);A.push(Xe),ue(Oe-1)},function(){Le()})}catch{Le()}}function g(){var Oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,we=Oe||0;if(!F||F.length===0||we>=F.length)L();else{var ot=F[we];if(ot)if(b.hasOwnProperty(ot.schemeIdUri)){var at=new Date().getTime();b[ot.schemeIdUri](ot.value,function(Xe){var $e=new Date().getTime(),Dt=M(at,$e,Xe);q=ot,L(Dt)},function(){g(we+1)})}else g(we+1);else L()}}function M(Oe,we,ot){return ot-(we-(we-Oe)/2)}function L(){var Oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN,we=isNaN(Oe);we&&I.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?se():pe(we,Oe)}function N(Oe){var we=Date.parse(Oe);return isNaN(we)&&(we=function(ot){var at,Xe,$e=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(ot);return at=Date.UTC(parseInt($e[1],10),parseInt($e[2],10)-1,parseInt($e[3],10),parseInt($e[4],10),parseInt($e[5],10),$e[6]&&(parseInt($e[6],10)||0),$e[7]&&1e3*parseFloat($e[7])||0),$e[9]&&$e[10]&&(Xe=60*parseInt($e[9],10)+parseInt($e[10],10),at+=($e[8]==="+"?-1:1)*Xe*60*1e3),new Date(at).getTime()}(Oe)),we}function R(Oe){return Date.parse(Oe)}function Q(Oe){return Date.parse(Oe)}function Y(Oe,we,ot){ot()}function ae(Oe,we,ot){var at=N(Oe);isNaN(at)?ot():we(at)}function X(Oe,we,ot,at,Xe){var $e,Dt,_e=!1,Be=new XMLHttpRequest,ct=Xe?Ze.w.HEAD:Ze.w.GET,le=we.match(/\S+/g);if(we=le.shift(),$e=function(){_e||(_e=!0,le.length?X(Oe,le.join(" "),ot,at,Xe):at())},Dt=function(){var Ne,xe;Be.status===200&&(Ne=Xe?Be.getResponseHeader("Date"):Be.response,xe=Oe(Ne),isNaN(xe)||(ot(xe),_e=!0))},G.isRelative(we)){var Me=re.resolve();Me&&(we=G.resolve(we,Me.url))}Be.open(ct,we),Be.timeout=5e3,Be.onload=Dt,Be.onloadend=$e,Be.send()}function P(Oe,we,ot){X(Q,Oe,we,ot,!0)}function se(){var Oe=m.getLatestMPDRequestHeaderValueByID("Date"),we=Oe!==null?new Date(Oe).getTime():Number.NaN;isNaN(we)?pe(!0):pe(!1,we-Date.now())}function pe(Oe,we){if(isNaN(w)||isNaN(we)||Oe||function(at){try{var Xe,$e=De(at),Dt=isNaN(B)?30:B,_e=isNaN(I.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:I.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,Be=isNaN(I.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:I.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,ct=isNaN(I.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:I.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;$e?(Xe=Math.min(Dt*_e,Be),r.debug("Increasing timeBetweenSyncAttempts to ".concat(Xe))):(Xe=Math.max(Dt/_e,ct),r.debug("Decreasing timeBetweenSyncAttempts to ".concat(Xe))),B=Xe}catch{}}(we),!Oe&&!isNaN(we)){j=Date.now(),l=!1;var ot=isNaN(w);w=we,ot&&K(),r.debug("Completed UTC sync. Setting client - server offset to ".concat(we))}Oe&&(q=null,l=!1,me.error(new te.Z($.TIME_SYNC_FAILED_ERROR_CODE,$.TIME_SYNC_FAILED_ERROR_MESSAGE))),fe.trigger(u.Z.UPDATE_TIME_SYNC_OFFSET,{offset:we}),fe.trigger(u.Z.TIME_SYNCHRONIZATION_COMPLETED)}function Le(){if(A&&A.length!==0){var Oe=A.reduce(function(we,ot){return we+ot},0)/A.length;De(Oe)?r.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(r.debug("Completed background UTC sync. Setting client - server offset to ".concat(Oe)),w=Oe,fe.trigger(u.Z.UPDATE_TIME_SYNC_OFFSET,{offset:w})),_=!1,U=Date.now()}}function De(Oe){try{if(isNaN(w))return!0;var we=I.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(I.get().streaming.utcSynchronization.maximumAllowedDrift)?I.get().streaming.utcSynchronization.maximumAllowedDrift:100;return Oe>=w-we&&Oe<=w+we}catch{return!0}}return o={initialize:function(){ie(),b={"urn:mpeg:dash:utc:http-head:2014":P,"urn:mpeg:dash:utc:http-xsdate:2014":X.bind(null,N),"urn:mpeg:dash:utc:http-iso:2014":X.bind(null,R),"urn:mpeg:dash:utc:direct:2014":ae,"urn:mpeg:dash:utc:http-head:2012":P,"urn:mpeg:dash:utc:http-xsdate:2012":X.bind(null,N),"urn:mpeg:dash:utc:http-iso:2012":X.bind(null,R),"urn:mpeg:dash:utc:direct:2012":ae,"urn:mpeg:dash:utc:http-ntp:2014":Y,"urn:mpeg:dash:utc:ntp:2014":Y,"urn:mpeg:dash:utc:sntp:2014":Y}},attemptSync:function(Oe,we){F=Oe,l||(function(ot){try{if(!ot||!I.get().streaming.utcSynchronization.enabled)return!1;var at=isNaN(B)?30:B;return!(j&&at&&!isNaN(at))||(Date.now()-j)/1e3>=at}catch{return!0}}(we)?(l=!0,g()):fe.trigger(u.Z.TIME_SYNCHRONIZATION_COMPLETED))},setConfig:function(Oe){Oe&&(Oe.dashMetrics&&(m=Oe.dashMetrics),Oe.baseURLController&&(re=Oe.baseURLController),Oe.errHandler&&(me=Oe.errHandler),Oe.settings&&(I=Oe.settings))},reset:function(){ie(),fe.off(u.Z.ATTEMPT_BACKGROUND_SYNC,K,o)}},r=(0,E.Z)(de).getInstance().getLogger(o),fe.on(u.Z.ATTEMPT_BACKGROUND_SYNC,K,o),o}fr.__dashjs_factory_name="TimeSyncController";var Kr=h.Z.getSingletonFactory(fr);Kr.HTTP_TIMEOUT_MS=5e3,h.Z.updateSingletonFactory(fr.__dashjs_factory_name,Kr);var Eo=Kr;function ia(){var o,r,l,_,I,b=this.context,m=(0,p.Z)(b).getInstance();return o={attachMediaSource:function(A){var F=window.URL.createObjectURL(r);return A.setSource(F),_==="managedMediaSource"&&(A.setDisableRemotePlayback(!0),r.addEventListener("startstreaming",function(){m.trigger(n.Z.MANAGED_MEDIA_SOURCE_START_STREAMING)}),r.addEventListener("endstreaming",function(){m.trigger(n.Z.MANAGED_MEDIA_SOURCE_END_STREAMING)})),F},createMediaSource:function(){var A="WebKitMediaSource"in window,F="MediaSource"in window;return"ManagedMediaSource"in window?(r=new ManagedMediaSource,_="managedMediaSource",I.info("Created ManagedMediaSource")):F?(r=new MediaSource,_="mediaSource",I.info("Created MediaSource")):A&&(r=new WebKitMediaSource,I.info("Created WebkitMediaSource")),r},detachMediaSource:function(A){A.setSource(null)},setConfig:function(A){A&&A.settings&&(l=A.settings)},setDuration:function A(F){r&&r.readyState==="open"&&(F===null&&isNaN(F)||r.duration!==F&&(F!==1/0||l.get().streaming.buffer.mediaSourceDurationInfinity||(F=Math.pow(2,32)),function(j){for(var U=j.sourceBuffers,w=0;w<U.length;w++)if(U[w].updating)return!0;return!1}(r)?setTimeout(A.bind(null,F),50):(I.info("Set MediaSource duration:"+F),r.duration=F)))},setSeekable:function(A,F){r&&typeof r.setLiveSeekableRange=="function"&&typeof r.clearLiveSeekableRange=="function"&&r.readyState==="open"&&A>=0&&A<F&&(r.clearLiveSeekableRange(),r.setLiveSeekableRange(A,F))},signalEndOfStream:function(A){if(A&&A.readyState==="open"){for(var F=A.sourceBuffers,j=0;j<F.length;j++)if(F[j].updating||F[j].buffered.length===0)return;I.info("call to mediaSource endOfStream"),A.endOfStream()}}},I=(0,E.Z)(b).getInstance().getLogger(o),o}ia.__dashjs_factory_name="MediaSourceController";var vo=h.Z.getSingletonFactory(ia);function aa(){var o,r,l,_,I,b,m,A,F,j,U,w="urn:mpeg:dash:event:2012",q="discarded",B="updated",me="added",re=this.context,de=(0,p.Z)(re).getInstance();function fe(){if(!m||!A)throw new Error("setConfig function has to be called previously")}function G(){U=!1,l={},_={},I=null,j=!1,b=Date.now()/1e3}function ie(){try{if(!j){j=!0;var Y=A.getTime(),ae=Y-b;ae=b>0?Math.max(0,ae):0,K(_,ae,Y),K(l,ae,Y),ue(_),ue(l),b=Y,j=!1}}catch(X){j=!1,r.error(X)}}function K(Y,ae,X){try{N(Y,function(P){if(P!==void 0){var se=isNaN(P.duration)?0:P.duration;P.calculatedPresentationTime<=X&&P.calculatedPresentationTime+ae+se>=X?Q(P,n.Z.EVENT_MODE_ON_START):(R(X,se+ae,P.calculatedPresentationTime)||function(pe){try{var Le=pe.eventStream.period.start+pe.eventStream.period.duration;return pe.calculatedPresentationTime>Le}catch(De){return r.error(De),!1}}(P))&&(r.debug("Removing event ".concat(P.id," from period ").concat(P.eventStream.period.id," as it is expired or invalid")),function(pe,Le){try{var De=Le.eventStream.schemeIdUri,Oe=Le.eventStream.period.id,we=Le.eventStream.value,ot=Le.id;pe[Oe][De]=pe[Oe][De].filter(function(at){return we&&at.eventStream.value&&at.eventStream.value!==we||at.id!==ot}),pe[Oe][De].length===0&&delete pe[Oe][De]}catch(at){r.error(at)}}(Y,P))}})}catch(P){r.error(P)}}function ue(Y){try{for(var ae in Y)Y.hasOwnProperty(ae)&&Object.keys(Y[ae]).length===0&&delete Y[ae]}catch(X){r.error(X)}}function g(Y,ae){var X=arguments.length>2&&arguments[2]!==void 0&&arguments[2],P=Y.eventStream.schemeIdUri,se=Y.eventStream.value,pe=Y.id,Le=q;ae[P]||(ae[P]=[]);var De=ae[P].findIndex(function(we){return(!se||we.eventStream.value&&we.eventStream.value===se)&&we.id===pe});if(De===-1)ae[P].push(Y),Y.triggeredReceivedEvent=!1,Y.triggeredStartEvent=!1,Le=me;else if(X){var Oe=ae[P][De];Y.triggeredReceivedEvent=Oe.triggeredReceivedEvent,Y.triggeredStartEvent=Oe.triggeredStartEvent,ae[P][De]=Y,Le=B}return Le}function M(Y){try{if(Y.eventStream.value==1){var ae,X=Y.calculatedPresentationTime;ae=Y.calculatedPresentationTime==4294967295?NaN:Y.calculatedPresentationTime+Y.duration,de.trigger(n.Z.MANIFEST_VALIDITY_CHANGED,{id:Y.id,validUntil:X,newDuration:ae,newManifestValidAfter:NaN},{mode:n.Z.EVENT_MODE_ON_START})}}catch(P){r.error(P)}}function L(Y){try{var ae=A.getTime();N(Y,function(X){var P=X.eventStream&&X.eventStream.period&&!isNaN(X.eventStream.period.duration)?X.eventStream.period.duration:NaN,se=X.eventStream&&X.eventStream.period&&!isNaN(X.eventStream.period.start)?X.eventStream.period.start:NaN;if(!isNaN(P)&&!isNaN(se)){var pe=X.calculatedPresentationTime;Math.abs(pe-ae)<300&&Q(X,n.Z.EVENT_MODE_ON_START)}})}catch(X){r.error(X)}}function N(Y,ae){try{if(Y)for(var X=Object.keys(Y),P=0;P<X.length;P++)for(var se=Y[X[P]],pe=Object.keys(se),Le=0;Le<pe.length;Le++)se[pe[Le]].forEach(function(De){De!==void 0&&ae(De)})}catch(De){r.error(De)}}function R(Y,ae,X){try{return Y-ae>X}catch(P){return r.error(P),!1}}function Q(Y,ae){try{var X=A.getTime(),P=Y.id;if(ae===n.Z.EVENT_MODE_ON_RECEIVE&&!Y.triggeredReceivedEvent)return r.debug("Received event ".concat(P)),Y.triggeredReceivedEvent=!0,void de.trigger(Y.eventStream.schemeIdUri,{event:Y},{mode:ae});Y.triggeredStartEvent||(Y.eventStream.schemeIdUri===w&&Y.eventStream.value==1?Y.duration===0&&Y.presentationTimeDelta===0||(r.debug("Starting manifest refresh event ".concat(P," at ").concat(X)),function(){try{fe(),m.refreshManifest()}catch(se){r.error(se)}}()):Y.eventStream.schemeIdUri==="urn:mpeg:dash:event:callback:2015"&&Y.eventStream.value==1?(r.debug("Starting callback event ".concat(P," at ").concat(X)),function(se){try{(0,Mt.Z)(re).create({}).load({method:"get",url:se,request:{responseType:"arraybuffer"}})}catch(pe){r.error(pe)}}(Y.messageData)):(r.debug("Starting event ".concat(P," from period ").concat(Y.eventStream.period.id," at ").concat(X)),de.trigger(Y.eventStream.schemeIdUri,{event:Y},{mode:ae})),Y.triggeredStartEvent=!0)}catch(se){r.error(se)}}return o={addInlineEvents:function(Y,ae){try{if(fe(),l[ae]||(l[ae]={}),Y)for(var X=0;X<Y.length;X++){var P=Y[X];if(!R(A.getTime(),isNaN(P.duration)?0:P.duration,P.calculatedPresentationTime)){var se=g(P,l[ae],!0);se===me?(r.debug("Added inline event with id ".concat(P.id," from period ").concat(ae)),Q(P,n.Z.EVENT_MODE_ON_RECEIVE)):se===B&&r.debug("Updated inline event with id ".concat(P.id," from period ").concat(ae))}}}catch(pe){throw pe}},addInbandEvents:function(Y,ae){try{fe(),_[ae]||(_[ae]={});for(var X=0;X<Y.length;X++){var P=Y[X];R(A.getTime(),isNaN(P.duration)?0:P.duration,P.calculatedPresentationTime)||(g(P,_[ae],!1)===me?(P.eventStream.schemeIdUri===w&&M(P),r.debug("Added inband event with id ".concat(P.id," from period ").concat(ae)),Q(P,n.Z.EVENT_MODE_ON_RECEIVE)):r.debug("Inband event with scheme_id_uri ".concat(P.eventStream.schemeIdUri,", value ").concat(P.eventStream.value,", period id ").concat(ae," and event id ").concat(P.id," was ignored because it has been added before.")))}ie()}catch(se){throw se}},getInbandEvents:function(){return _},getInlineEvents:function(){return l},start:function(){try{fe(),r.debug("Start Event Controller");var Y=F.get().streaming.eventControllerRefreshDelay;U||isNaN(Y)||(U=!0,I=setInterval(ie,Y))}catch(ae){throw ae}},setConfig:function(Y){try{if(!Y)return;Y.manifestUpdater&&(m=Y.manifestUpdater),Y.playbackController&&(A=Y.playbackController),Y.settings&&(F=Y.settings)}catch(ae){throw ae}},reset:function(){(function(){try{I!==null&&U&&(clearInterval(I),I=null,U=!1,function(){try{L(_),L(l)}catch(Y){r.error(Y)}}())}catch(Y){throw Y}})(),G()}},r=(0,E.Z)(re).getInstance().getLogger(o),G(),o}aa.__dashjs_factory_name="EventController";var _o=h.Z.getSingletonFactory(aa),Lr={LEVELS:{SUGGESTION:"Suggestion",WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}};function Di(o,r){(r==null||r>o.length)&&(r=o.length);for(var l=0,_=new Array(r);l<r;l++)_[l]=o[l];return _}function oa(){var o,r,l,_,I,b,m,A,F,j,U,w,q,B,me,re,de,fe,G,ie,K,ue,g,M,L,N,R,Q,Y,ae,X,P,se,pe,Le,De,Oe,we,ot,at,Xe,$e,Dt,_e,Be,ct,le,Me,Ne=this.context,xe=(0,p.Z)(Ne).getInstance();function lt(){if(!(b&&b.hasOwnProperty("load")&&K&&K.hasOwnProperty("initialize")&&K.hasOwnProperty("reset")&&K.hasOwnProperty("getClientTimeOffset")&&m&&ie&&F&&se))throw new Error(t.Z.MISSING_CONFIG_ERROR)}function dt(){if(!I||!I.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}function At(){(function(){try{var We=A.getStreamsInfo();if(!g&&We.length===0)throw new Error("There are no periods in the MPD");g&&We.length>0&&F.updateManifestUpdateInfo({currentTime:se.getTime(),buffered:P.getBufferRange(),presentationStartTime:We[0].start,clientTimeOffset:K.getClientTimeOffset()}),ue.length>0&&function(hn){hn.length!==0?ue=ue.filter(function(on){var Cn=hn.filter(function(bn){return bn.id===on.getId()}).length>0||on.getId()===g.getId();return Cn||(r.debug("Removing stream ".concat(on.getId())),on.reset(!0)),Cn}):r.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects.")}(We);for(var St=[],Kt=0,nn=We.length;Kt<nn;Kt++){var gn=We[Kt];St.push(Vt(gn)),F.addManifestUpdateStreamInfo(gn)}Promise.all(St).then(function(){return new Promise(function(hn,on){g?hn():Wt(We,hn,on)})}).then(function(){xe.trigger(u.Z.STREAMS_COMPOSED),xt()}).catch(function(hn){throw hn})}catch(hn){ie.error(new te.Z($.MANIFEST_ERROR_ID_NOSTREAMS_CODE,hn.message+" nostreamscomposed",m.getValue())),ae=!0,Ar()}})()}function Pt(){Be=!0}function Vt(We){var St=Xr(We.id);return St?St.updateData(We):(St=oi(Ne).create({manifestModel:m,mediaPlayerModel:Le,dashMetrics:F,manifestUpdater:I,adapter:A,timelineConverter:K,capabilities:l,capabilitiesFilter:_,errHandler:ie,baseURLController:q,segmentBaseController:B,textController:L,abrController:re,playbackController:se,eventController:fe,mediaController:de,protectionController:M,videoModel:P,streamInfo:We,settings:_e}),ue.push(St),St.initialize(),Promise.resolve())}function Wt(We,St,Kt){try{Gt();var nn=F.getCurrentDVRInfo().range;if(nn.end<nn.start){ct&&clearTimeout(ct);var gn=Math.min(1e3*(-1*(nn.end-nn.start)+2),2147483647);return r.debug("Waiting for ".concat(gn," ms before playback can start")),xe.trigger(u.Z.AST_IN_FUTURE,{delay:gn}),void(ct=setTimeout(function(){Wt(We,St,Kt)},gn))}_e.get().streaming.applyProducerReferenceTime&&pe.calculateProducerReferenceTimeOffsets(We);var hn=We[0].manifestInfo;if(_e.get().streaming.applyServiceDescription&&pe.applyServiceDescription(hn),A.getIsDynamic()){var on=Nr(We,hn);se.computeAndSetLiveDelay(on,hn)}(_e.get().streaming.applyContentSteering&&w.shouldQueryBeforeStart()?w.loadSteeringData():Promise.resolve()).then(function(){var Cn=m.getValue();Cn&&q.update(Cn),qt(),St()}).catch(function(Cn){r.error(Cn),qt(),St()})}catch(Cn){Kt(Cn)}}function qt(){var We=function(){var nn;if(A.getIsDynamic()){var gn=F.getCurrentDVRInfo();nn=(gn&&gn.range?gn.range.end:0)-se.getOriginalLiveDelay();var hn=gn?gn.range:null;if(hn){if(isNaN(le)&&le.toString().indexOf("posix:")===-1){var on=Jn(!0);isNaN(on)||(r.info("Start time from URI parameters: ".concat(on)),nn=Math.min(nn,on))}else{r.info("Start time provided by the app: ".concat(le));var Cn=Bn(!0,le);isNaN(Cn)||(nn=Math.min(nn,Cn))}var bn=_e.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;nn=Math.max(nn,hn.start+bn)}}else if(nn=Or()[0].getStreamInfo().start,isNaN(le)){var mr=Jn(!1);isNaN(mr)||(r.info("Start time from URI parameters: ".concat(mr)),nn=Math.max(nn,mr))}else{r.info("Start time provided by the app: ".concat(le));var Zr=Bn(!1,le);isNaN(Zr)||(nn=Math.max(nn,Zr))}return nn}(),St=Yt(We),Kt=St!==null?St:ue[0];xe.trigger(u.Z.INITIAL_STREAM_SWITCH,{startTime:We}),Xt(Kt,null,We),at||(at=setInterval(function(){!Q&&se.getTimeToStreamEnd()<=0&&!se.isSeeking()&&xe.trigger(u.Z.PLAYBACK_ENDED,{isLast:or().isLast})},200))}function Xt(We,St,Kt){try{if(Q||!We||St===We&&We.getIsActive())return;Q=!0,xe.trigger(u.Z.PERIOD_SWITCH_STARTED,{fromStreamInfo:St?St.getStreamInfo():null,toStreamInfo:We.getStreamInfo()});var nn=!1;g=We,St&&(nn=Zt(We,St),St.deactivate(nn)),Kt=isNaN(Kt)?!nn&&St?We.getStreamInfo().start:NaN:Kt,r.info("Switch to stream ".concat(We.getId(),". Seektime is ").concat(Kt,", current playback time is ").concat(se.getTime(),". Seamless period switch is set to ").concat(nn)),$e=$e.filter(function(gn){return gn.getId()!==g.getId()}),se.initialize(or(),!!St),P.getElement()?Ht(Kt,nn,!1):tn(Kt,nn)}catch{Q=!1}}function Ht(We,St){var Kt,nn=arguments.length>2&&arguments[2]!==void 0&&arguments[2];function gn(){if(X&&X.readyState==="open"){r.debug("MediaSource is open!"),window.URL.revokeObjectURL(Kt),X.removeEventListener("sourceopen",gn),X.removeEventListener("webkitsourceopen",gn),On();var on=F.getCurrentDVRInfo();j.setSeekable(on.range.start,on.range.end),nn?(isNaN(We)||se.seek(We,!0,!0),g.setMediaSource(X).then(function(){g.initializeForTextWithMediaSource(X)})):tn(We,St)}}function hn(){X.addEventListener("sourceopen",gn,!1),X.addEventListener("webkitsourceopen",gn,!1),Kt=j.attachMediaSource(P),r.debug("MediaSource attached to element.  Waiting on open...")}X?St?tn(We,St):(j.detachMediaSource(P),hn()):(X=j.createMediaSource(),hn())}function tn(We,St){g.activate(X,St?Xe:void 0,We).then(function(Kt){if(Kt){var nn=Object.keys(Kt);nn.length>0&&Kt[nn[0]].getBuffer().changeType&&(Dt=!0),Xe=Kt}isNaN(We)||(xe.trigger(u.Z.SEEK_TARGET,{time:We},{streamId:g.getId()}),se.seek(We,!1,!0),g.startScheduleControllers()),Q=!1,xe.trigger(u.Z.PERIOD_SWITCH_COMPLETED,{toStreamInfo:or()})})}function un(We){var St=Yt(We.seekTime);St&&St!==g?St&&St!==g&&(sn(),function(Kt,nn){var gn=Kt&&!isNaN(Kt.seekTime)?Kt.seekTime:NaN,hn=g.getProcessors().map(function(on){return on.prepareOuterPeriodPlaybackSeeking(Kt)});Promise.all(hn).then(function(){Xt(nn,g,gn)}).catch(function(on){ie.error(on)})}(We,St)):(sn(),function(Kt){g.getProcessors().forEach(function(nn){return nn.prepareInnerPeriodPlaybackSeeking(Kt)}),$n(Se.USER_REQUEST_STOP_REASON)}(We)),br(be.SEEK_START_REASON)}function sn(){fn()}function fn(){$e&&$e.length>0&&($e.forEach(function(We){We.deactivate(!0)}),$e=[])}function gt(We){if(We.newMediaInfo.streamInfo.id===g.getId()){if(fn(),_e.get().streaming.buffer.resetSourceBuffersForTrackSwitch&&We.oldMediaInfo&&We.oldMediaInfo.codec!==We.newMediaInfo.codec){var St=se.getTime();return g.deactivate(!1),void Ht(St,!1,!1)}g.prepareTrackChange(We)}}function Zt(We,St){try{return _e.get().streaming.buffer.reuseExistingSourceBuffers&&(St.isProtectionCompatible(We)||Be)&&(Dt&&_e.get().streaming.buffer.useChangeTypeForTrackSwitch||St.isMediaCodecCompatible(We,St))}catch{return!1}}function Ut(We){var St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(X&&!We.getPreloaded()){var Kt=Zt(We,St);Kt&&We.startPreloading(X,Xe).then(function(){$e.push(We)})}}function Yt(We){if(isNaN(We))return null;for(var St=ue.length,Kt=0;Kt<St;Kt++){var nn=ue[Kt];if(We<parseFloat((nn.getStartTime()+nn.getDuration()).toFixed(5)))return nn}return null}function Gt(){try{var We=A.getIsDynamic(),St=A.getStreamsInfo()[0].manifestInfo,Kt=se.getTime(),nn=K.calcTimeShiftBufferWindow(ue,We),gn=Tn();if(nn.start===void 0||nn.end===void 0)return;gn&&gn.length!==0?gn.forEach(function(hn){F.addDVRInfo(hn.getType(),Kt,St,nn)}):F.addDVRInfo(t.Z.VIDEO,Kt,St,nn)}catch{}}function Qe(We){if(we&&R){var St=Le.getInitialBufferLevel(),Kt=[t.Z.TEXT];(isNaN(St)||St<=se.getBufferLevel(Kt)||A.getIsDynamic()&&St>se.getLiveDelay())&&(we=!1,br(be.INITIAL_PLAYOUT_START_REASON),se.play())}We&&We.mediaType&&F.addBufferLevel(We.mediaType,new Date,1e3*We.bufferLevel)}function Pe(We){We.streamInfo.id===g.getId()&&We.reason&&We.reason.forceReplace&&fn(),Xr(We.streamInfo.id).prepareQualityChange(We)}function rt(){if(A.getIsDynamic()&&se.getOriginalLiveDelay()!==0&&g){var We=A.getStreamsInfo();if(We.length>0){var St=We[0].manifestInfo,Kt=Nr(We,St);se.computeAndSetLiveDelay(Kt,St)}}}function J(){if(cr()){var We=P.getPlaybackQuality();We&&F.addDroppedFrames(We)}}function Ae(){r.debug("[onPlaybackStarted]"),!we&&Oe&&br(be.RESUME_FROM_PAUSE_START_REASON),we&&(we=!1),ot&&(ot=!1,_e.get().streaming.applyContentSteering&&!w.shouldQueryBeforeStart()&&w.loadSteeringData()),Oe=!1}function ut(We){r.debug("[onPlaybackPaused]"),We.ended||(Oe=!0,$n(Se.USER_REQUEST_STOP_REASON))}function _t(We){r.debug("Stream with id ".concat(We.streamInfo.id," finished buffering"));var St=We.streamInfo.isLast;X&&St?(r.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),j.signalEndOfStream(X)):xt()}function xt(){if(g&&g.getHasFinishedBuffering())for(var We=function(){var gn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{var hn=gn||g||null;if(hn){var on=hn.getStreamInfo();return ue.filter(function(Cn){var bn=Cn.getStreamInfo();return bn.start>on.start&&on.id!==bn.id})}}catch{return[]}}(g),St=0;St<We.length;){var Kt=We[St],nn=St===0?g:We[St-1];!Kt.getPreloaded()&&nn.getHasFinishedBuffering()&&X&&Ut(Kt,nn),St+=1}}function an(){at&&(clearInterval(at),at=null)}function Tn(){return g?g.getProcessors():[]}function kn(We){if(g&&!g.getIsEndedEventSignaled()){g.setIsEndedEventSignaled(!0);var St=function(){var Kt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,nn=Kt||g||null;if(!nn)return null;for(var gn=nn.getStreamInfo(),hn=gn.start,on=0,Cn=-1,bn=NaN;on<ue.length;){var mr=ue[on].getStreamInfo(),Zr=mr.start-hn;Zr>0&&(isNaN(bn)||Zr<bn)&&gn.id!==mr.id&&(bn=Zr,Cn=on),on+=1}return Cn>=0?ue[Cn]:null}();St?(r.debug("StreamController onEnded, found next stream with id ".concat(St.getStreamInfo().id,". Switching from ").concat(g.getStreamInfo().id," to ").concat(St.getStreamInfo().id)),Xt(St,g,NaN)):(r.debug("StreamController no next stream found"),g.setIsEndedEventSignaled(!1)),$n(St?Se.END_OF_PERIOD_STOP_REASON:Se.END_OF_CONTENT_STOP_REASON)}We&&We.isLast&&(an(),w.stopSteeringRequestTimer())}function On(We){var St=We||or().manifestInfo.duration;j.setDuration(St)}function Jn(We){var St=me.getURIFragmentData();if(!St||!St.t)return NaN;var Kt=Or()[0].getStreamInfo().start;return St.t=St.t.split(",")[0],Sr(We,St.t,Kt)}function Bn(We,St){var Kt=0;return We||(Kt=Or()[0].getStreamInfo().start),Sr(We,St,Kt)}function Sr(We,St,Kt){var nn=A.getRegularPeriods()[0],gn=St.toString(),hn=gn.indexOf("posix:")!==-1?gn.substring(6)==="now"?Date.now()/1e3:parseFloat(gn.substring(6)):NaN;return We&&!isNaN(hn)?K.calcPresentationTimeFromWallTime(new Date(1e3*hn),nn):parseFloat(gn)+Kt}function Nr(We,St){try{var Kt=NaN;if(St&&!isNaN(St.maxFragmentDuration)&&isFinite(St.maxFragmentDuration))return St.maxFragmentDuration;if(We&&We.length===1){var nn=We[0],gn=[t.Z.VIDEO,t.Z.AUDIO,t.Z.TEXT].reduce(function(on,Cn){var bn=A.getMediaInfoForType(nn,Cn);return bn&&bn.isFragmented!==!1&&on.push(bn),on},[]).reduce(function(on,Cn){var bn=A.getVoRepresentations(Cn);return bn&&bn.length>0&&bn.forEach(function(mr){mr&&on.push(mr)}),on},[]).reduce(function(on,Cn){var bn=A.convertRepresentationToRepresentationInfo(Cn);return bn&&bn.fragmentDuration&&!isNaN(bn.fragmentDuration)&&on.push(bn.fragmentDuration),on},[]);Kt=Math.max.apply(Math,function(on){if(Array.isArray(on))return Di(on)}(hn=gn)||function(on){if(typeof Symbol<"u"&&Symbol.iterator in Object(on))return Array.from(on)}(hn)||function(on,Cn){if(on){if(typeof on=="string")return Di(on,Cn);var bn=Object.prototype.toString.call(on).slice(8,-1);return bn==="Object"&&on.constructor&&(bn=on.constructor.name),bn==="Map"||bn==="Set"?Array.from(on):bn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(bn)?Di(on,Cn):void 0}}(hn)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}())}return isFinite(Kt)?Kt:NaN}catch{return NaN}var hn}function Cr(We){if(We.error)ae=!0,Ar();else{r.info("Manifest updated... updating data system wide.");var St=We.manifest;A.updatePeriods(St);var Kt=A.getUTCTimingSources();!A.getIsDynamic()||Kt&&Kt.length!==0||xe.trigger(n.Z.CONFORMANCE_VIOLATION,{level:Lr.LEVELS.WARNING,event:Lr.EVENTS.NO_UTC_TIMING_ELEMENT});var nn=A.getIsDynamic()?Kt.concat(De.getUTCTimingSources()):Kt;_.filterUnsupportedFeatures(St).then(function(){q.initialize(St),U.attemptSync(nn,A.getIsDynamic())})}}function cr(){return!!g&&g.getHasVideoTrack()}function hr(){return!!g&&g.getHasAudioTrack()}function $n(We,St){St=St||new Date,Tn().forEach(function(Kt){Kt.finalisePlayList(St,We)}),F.addPlayList()}function br(We){F.createPlaylistMetrics(1e3*se.getTime(),We)}function Dr(We){if(We.error){var St="";switch(We.error.code){case 1:St="MEDIA_ERR_ABORTED";break;case 2:St="MEDIA_ERR_NETWORK";break;case 3:St="MEDIA_ERR_DECODE",Me.counts.mediaErrorDecode+=1;break;case 4:St="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:St="MEDIA_ERR_ENCRYPTED";break;default:St="UNKNOWN"}St==="MEDIA_ERR_DECODE"&&_e.get().errors.recoverAttempts.mediaErrorDecode>=Me.counts.mediaErrorDecode?function(){r.warn("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");var Kt=se.getTime();g.deactivate(!1),r.warn("MediaSource has been resetted. Resuming playback from time ".concat(Kt)),Ht(Kt,!1,!1)}():(Y=!0,We.error.message&&(St+=" ("+We.error.message+")"),We.error.msExtendedCode&&(St+=" (0x"+(We.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),r.fatal("Video Element Error: "+St),We.error&&r.fatal(We.error),ie.error(new te.Z(We.error.code,St)),Ar())}}function or(){return g?g.getStreamInfo():null}function Xr(We){for(var St=0,Kt=ue.length;St<Kt;St++)if(ue[St].getId()===We)return ue[St];return null}function Si(We){isNaN(We.newDuration)||On(We.newDuration)}function bi(){ue=[],le=NaN,M=null,Q=!1,g=null,Y=!1,ae=!1,we=!0,ot=!0,Oe=!1,R=!0,at=null,Be=!1,Dt=!1,$e=[],ct=null,Me={counts:{mediaErrorDecode:0}}}function Ar(){lt(),U.reset(),$n(Y||ae?Se.FAILURE_STOP_REASON:Se.USER_REQUEST_STOP_REASON);for(var We=0,St=ue?ue.length:0;We<St;We++)ue[We].reset(Y);xe.off(n.Z.PLAYBACK_TIME_UPDATED,J,o),xe.off(n.Z.PLAYBACK_SEEKING,un,o),xe.off(n.Z.PLAYBACK_ERROR,Dr,o),xe.off(n.Z.PLAYBACK_STARTED,Ae,o),xe.off(n.Z.PLAYBACK_PAUSED,ut,o),xe.off(n.Z.PLAYBACK_ENDED,kn,o),xe.off(n.Z.METRIC_ADDED,Ai,o),xe.off(n.Z.MANIFEST_VALIDITY_CHANGED,Si,o),xe.off(n.Z.BUFFER_LEVEL_UPDATED,Qe,o),xe.off(n.Z.QUALITY_CHANGE_REQUESTED,Pe,o),u.Z.KEY_SESSION_UPDATED&&xe.off(u.Z.KEY_SESSION_UPDATED,Pt,o),xe.off(u.Z.MANIFEST_UPDATED,Cr,o),xe.off(u.Z.STREAM_BUFFERING_COMPLETED,_t,o),xe.off(u.Z.TIME_SYNCHRONIZATION_COMPLETED,At,o),xe.off(u.Z.CURRENT_TRACK_CHANGED,gt,o),xe.off(u.Z.SETTING_UPDATED_LIVE_DELAY,rt,o),xe.off(u.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,rt,o),q.reset(),I.reset(),fe.reset(),F.clearAllCurrentMetrics(),m.setValue(null),b.reset(),K.reset(),G.reset(),X&&(j.detachMediaSource(P),X=null),P=null,M&&(M=null,N=null,m.getValue()&&xe.trigger(u.Z.PROTECTION_DESTROYED,{data:m.getValue().url})),an(),xe.trigger(u.Z.STREAM_TEARDOWN_COMPLETE),bi()}function Ai(We){if(We.metric===y.Z.DVR_INFO){var St=hr()?t.Z.AUDIO:t.Z.VIDEO;We.mediaType===St&&j.setSeekable(We.value.range.start,We.value.range.end)}}function Or(){return ue}return o={initialize:function(We,St){lt(),R=We,N=St,K.initialize(),(I=si(Ne).create()).setConfig({manifestModel:m,adapter:A,manifestLoader:b,errHandler:ie,settings:_e,contentSteeringController:w}),I.initialize(),(fe=_o(Ne).getInstance()).setConfig({manifestUpdater:I,playbackController:se,settings:_e}),fe.start(),U.setConfig({dashMetrics:F,baseURLController:q,errHandler:ie,settings:_e}),U.initialize(),j.setConfig({settings:_e}),M&&(xe.trigger(u.Z.PROTECTION_CREATED,{controller:M}),M.setMediaElement(P.getElement()),N&&M.setProtectionData(N)),xe.on(n.Z.PLAYBACK_TIME_UPDATED,J,o),xe.on(n.Z.PLAYBACK_SEEKING,un,o),xe.on(n.Z.PLAYBACK_ERROR,Dr,o),xe.on(n.Z.PLAYBACK_STARTED,Ae,o),xe.on(n.Z.PLAYBACK_PAUSED,ut,o),xe.on(n.Z.PLAYBACK_ENDED,kn,o),xe.on(n.Z.METRIC_ADDED,Ai,o),xe.on(n.Z.MANIFEST_VALIDITY_CHANGED,Si,o),xe.on(n.Z.BUFFER_LEVEL_UPDATED,Qe,o),xe.on(n.Z.QUALITY_CHANGE_REQUESTED,Pe,o),u.Z.KEY_SESSION_UPDATED&&xe.on(u.Z.KEY_SESSION_UPDATED,Pt,o),xe.on(u.Z.MANIFEST_UPDATED,Cr,o),xe.on(u.Z.STREAM_BUFFERING_COMPLETED,_t,o),xe.on(u.Z.TIME_SYNCHRONIZATION_COMPLETED,At,o),xe.on(u.Z.CURRENT_TRACK_CHANGED,gt,o),xe.on(u.Z.SETTING_UPDATED_LIVE_DELAY,rt,o),xe.on(u.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,rt,o)},getActiveStreamInfo:or,addDVRMetric:Gt,hasVideoTrack:cr,hasAudioTrack:hr,getStreamById:Xr,getStreamForTime:Yt,getTimeRelativeToStreamId:function(We,St){for(var Kt=null,nn=0,gn=0,hn=null,on=0;on<ue.length;on++){if(gn=(Kt=ue[on]).getStartTime(),hn=Kt.getDuration(),Number.isFinite(gn)&&(nn=gn),Kt.getId()===St)return We-nn;Number.isFinite(hn)&&(nn+=hn)}return null},load:function(We){var St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;lt(),le=St,b.load(We)},loadWithManifest:function(We){var St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;dt(),le=St,I.setManifest(We)},getActiveStreamProcessors:Tn,setConfig:function(We){We&&(We.capabilities&&(l=We.capabilities),We.capabilitiesFilter&&(_=We.capabilitiesFilter),We.manifestLoader&&(b=We.manifestLoader),We.manifestModel&&(m=We.manifestModel),We.mediaPlayerModel&&(Le=We.mediaPlayerModel),We.customParametersModel&&(De=We.customParametersModel),We.protectionController&&(M=We.protectionController),We.adapter&&(A=We.adapter),We.dashMetrics&&(F=We.dashMetrics),We.errHandler&&(ie=We.errHandler),We.timelineConverter&&(K=We.timelineConverter),We.videoModel&&(P=We.videoModel),We.playbackController&&(se=We.playbackController),We.serviceDescriptionController&&(pe=We.serviceDescriptionController),We.contentSteeringController&&(w=We.contentSteeringController),We.textController&&(L=We.textController),We.abrController&&(re=We.abrController),We.mediaController&&(de=We.mediaController),We.settings&&(_e=We.settings),We.baseURLController&&(q=We.baseURLController),We.uriFragmentModel&&(me=We.uriFragmentModel),We.segmentBaseController&&(B=We.segmentBaseController))},setProtectionData:function(We){N=We,M&&M.setProtectionData(N)},getIsStreamSwitchInProgress:function(){return Q},switchToVideoElement:function(We){g&&(se.initialize(or()),Ht(We,!1,!0))},getHasMediaOrInitialisationError:function(){return Y||ae},getStreams:Or,getActiveStream:function(){return g},getInitialPlayback:function(){return we},getAutoPlay:function(){return R},reset:Ar},r=(0,E.Z)(Ne).getInstance().getLogger(o),U=Eo(Ne).getInstance(),j=vo(Ne).getInstance(),G=ve(Ne).getInstance(),bi(),o}oa.__dashjs_factory_name="StreamController";var sa=h.Z.getSingletonFactory(oa);function ua(){var o,r,l,_,I,b,m,A,F,j,U,w,q=this.context,B=(0,p.Z)(q).getInstance();function me(){w.debug("Stopping the gap controller"),I&&(clearInterval(I),I=null),function(){B.off(u.Z.WALLCLOCK_TIME_UPDATED,ie,this),B.off(u.Z.INITIAL_STREAM_SWITCH,G,this),B.off(u.Z.PLAYBACK_SEEKING,re,this),B.off(u.Z.BUFFER_REPLACEMENT_STARTED,de,o),B.off(u.Z.TRACK_CHANGE_RENDERED,fe,o)}(),I=null,b=NaN,_=0,j=null,U={}}function re(){j&&(clearTimeout(j),j=null)}function de(N){try{if(N.streamId!==A.getActiveStreamInfo().id||N.mediaType!==t.Z.VIDEO&&N.mediaType!==t.Z.AUDIO)return;N.streamId===A.getActiveStreamInfo().id&&(U[N.mediaType]=!0)}catch(R){w.error(R)}}function fe(N){N&&N.mediaType&&(U[N.mediaType]=!1)}function G(){I||function(){try{I||(w.debug("Starting the gap controller"),I=setInterval(function(){K()&&L(m.getTime())},100))}catch{}}()}function ie(){if(K(l.get().streaming.gaps.enableSeekFix)&&++_>=10){var N=m.getTime();r===N?L(N,!0):(r=N,b=NaN),_=0}}function K(){var N=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!A.getActiveStream())return!1;var R=Object.keys(U).some(function(Y){return U[Y]}),Q=!!N&&ue();return!R&&l.get().streaming.gaps.jumpGaps&&A.getActiveStreamProcessors().length>0&&(!m.isSeeking()||Q)&&!m.isPaused()&&!A.getIsStreamSwitchInProgress()&&!A.getHasMediaOrInitialisationError()}function ue(){var N=A.getActiveStream(),R=parseFloat((N.getStartTime()+N.getDuration()).toFixed(5));return m.getTime()+l.get().streaming.gaps.threshold>=R}function g(N,R){try{if(!N||N.length<=1&&R>0)return NaN;for(var Q=NaN,Y=0;isNaN(Q)&&Y<N.length;){var ae=Y>0?N.end(Y-1):0;R<N.start(Y)&&ae-R<l.get().streaming.gaps.threshold&&(Q=Y),Y+=1}return Q}catch{return null}}function M(N,R){for(var Q=0,Y=N.length;Q<Y;Q++)if(R>=N.start(Q)&&R<=N.end(Q))return!0;return!1}function L(N){var R,Q=arguments.length>1&&arguments[1]!==void 0&&arguments[1],Y=l.get().streaming.gaps.enableStallFix,ae=l.get().streaming.gaps.stallSeek,X=l.get().streaming.gaps.smallGapLimit,P=l.get().streaming.gaps.jumpLargeGaps,se=F.getBufferRange(),pe=NaN,Le=!1;if(R=g(se,N),!isNaN(R)){var De=se.start(R),Oe=De-N;Oe>0&&(Oe<=X||P)&&(pe=De)}var we=m.getTimeToStreamEnd();if(isNaN(pe)&&Q&&isFinite(we)&&!isNaN(we)&&we<X&&(pe=parseFloat(m.getStreamEndTime().toFixed(5)),Le=!0),Y&&isNaN(pe)&&Q&&isNaN(R)&&M(se,N)&&(ae===0?(w.warn("Toggle play pause to break stall"),F.pause(),F.play()):(w.warn("Jumping ".concat(ae,"s to break stall")),pe=N+ae)),pe>0&&b!==pe&&pe>N&&!j){var ot=pe-N;if(Le){var at=A.getStreamForTime(pe),Xe=at&&!!at.getPreloaded();w.warn("Jumping to end of stream because of gap from ".concat(N," to ").concat(pe,". Gap duration: ").concat(ot)),m.seek(pe,!0,Xe)}else{var $e=m.getIsDynamic(),Dt=R>0?se.end(R-1):N,_e=$e?1e3*Math.max(0,ot-.1):0;j=window.setTimeout(function(){m.seek(pe,!0,!0),w.warn("Jumping gap occuring in period ".concat(A.getActiveStream().getStreamId()," starting at ").concat(Dt," and ending at ").concat(pe,". Jumping by: ").concat(pe-Dt)),j=null},_e)}b=pe}}return o={reset:me,setConfig:function(N){N&&(N.settings&&(l=N.settings),N.playbackController&&(m=N.playbackController),N.streamController&&(A=N.streamController),N.videoModel&&(F=N.videoModel))},initialize:function(){(function(){B.on(u.Z.WALLCLOCK_TIME_UPDATED,ie,this),B.on(u.Z.INITIAL_STREAM_SWITCH,G,this),B.on(u.Z.PLAYBACK_SEEKING,re,this),B.on(u.Z.BUFFER_REPLACEMENT_STARTED,de,o),B.on(u.Z.TRACK_CHANGE_RENDERED,fe,o)})()}},w=(0,E.Z)(q).getInstance().getLogger(o),me(),o}ua.__dashjs_factory_name="GapController";var To=h.Z.getSingletonFactory(ua);function la(){var o,r,l,_,I,b,m,A,F,j,U=this.context,w=(0,p.Z)(U).getInstance();function q(){r=!1;var ue=ln.Z.parseUserAgent();l=ue&&ue.browser&&ue.browser.name&&ue.browser.name.toLowerCase()==="safari"}function B(){r=!1}function me(ue){if(ue.streamId===b.getActiveStreamInfo().id&&F){var g=m.getLiveDelay();m.getBufferLevel()>g/2&&(F=!1)}}function re(ue){ue.streamId===b.getActiveStreamInfo().id&&(F=ue.state===y.Z.BUFFER_EMPTY)}function de(){A.getCatchupModeEnabled()||_.setPlaybackRate(1)}function fe(){m.getIsDynamic()&&A.getCatchupModeEnabled()&&(A.getCatchupPlaybackRates().max>0||A.getCatchupPlaybackRates().min<0)&&!m.isPaused()&&!m.isSeeking()&&function(){try{return!(!m.getTime()>0||r)&&(ie()===t.Z.LIVE_CATCHUP_MODE_LOLP?function(ue,g){try{return Math.abs(G())>0||ue<g}catch{return!1}}(m.getBufferLevel(),I.get().streaming.liveCatchup.playbackBufferMin):function(){try{return Math.abs(G())>0}catch{return!1}}())}catch{return!1}}()&&function(){if(!r&&_){var ue,g=_.getPlaybackRate(),M=A.getCatchupPlaybackRates(),L=m.getBufferLevel(),N=G(),R=A.getCatchupMaxDrift();if(!isNaN(R)&&R>0&&N>R)j.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),r=!0,m.seekToCurrentLive(!0,!1);else{var Q=m.getCurrentLiveLatency(),Y=m.getLiveDelay();ue=ie()===t.Z.LIVE_CATCHUP_MODE_LOLP?function(X,P,se,pe,Le){var De;if(Le<pe){var Oe=Math.abs(X.min),we=5*(Le-pe);De=1-Oe+2*Oe/(1+Math.pow(Math.E,-we)),j.debug("[LoL+ playback control_buffer-based] bufferLevel: "+Le+", newRate: "+De)}else{if(Math.abs(P-se)<=.02*se)De=1;else{var ot=P-se,at=ot<0?Math.abs(X.min):X.max,Xe=5*ot;De=1-at+2*at/(1+Math.pow(Math.E,-Xe))}j.debug("[LoL+ playback control_latency-based] latency: "+P+", newRate: "+De)}return De}(M,Q,Y,I.get().streaming.liveCatchup.playbackBufferMin,L):function(X,P,se,pe){if(F)return 1;var Le=P-se,De=Le<0?Math.abs(X.min):X.max,Oe=5*Le,we=1-De+2*De/(1+Math.pow(Math.E,-Oe));return m.getPlaybackStalled()&&pe<=se/2&&Le>0&&(we=1),we}(M,Q,Y,L);var ae=l?.25:.02/(.5/M.max);ue&&Math.abs(g-ue)>=ae&&(j.debug("[CatchupController]: Setting playback rate to ".concat(ue)),_.setPlaybackRate(ue))}}}()}function G(){return m.getCurrentLiveLatency()-m.getLiveDelay()}function ie(){var ue=I.get().streaming.liveCatchup.playbackBufferMin;return I.get().streaming.liveCatchup.mode!==t.Z.LIVE_CATCHUP_MODE_LOLP||ue===null||isNaN(ue)?t.Z.LIVE_CATCHUP_MODE_DEFAULT:t.Z.LIVE_CATCHUP_MODE_LOLP}function K(){A.getCatchupPlaybackRates(!0)}return o={reset:function(){w.off(n.Z.BUFFER_LEVEL_UPDATED,me,o),w.off(n.Z.BUFFER_LEVEL_STATE_CHANGED,re,o),w.off(n.Z.PLAYBACK_PROGRESS,fe,o),w.off(n.Z.PLAYBACK_TIME_UPDATED,fe,o),w.off(n.Z.PLAYBACK_SEEKED,B,o),w.off(u.Z.SETTING_UPDATED_CATCHUP_ENABLED,de,o),w.off(u.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,K,o),w.off(u.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,K,o),w.off(n.Z.STREAM_INITIALIZED,K,o),q(),_.setPlaybackRate(1,!0)},setConfig:function(ue){ue&&(ue.settings&&(I=ue.settings),ue.videoModel&&(_=ue.videoModel),ue.streamController&&(b=ue.streamController),ue.playbackController&&(m=ue.playbackController),ue.mediaPlayerModel&&(A=ue.mediaPlayerModel))},initialize:function(){w.on(n.Z.BUFFER_LEVEL_UPDATED,me,o),w.on(n.Z.BUFFER_LEVEL_STATE_CHANGED,re,o),w.on(n.Z.PLAYBACK_PROGRESS,fe,o),w.on(n.Z.PLAYBACK_TIME_UPDATED,fe,o),w.on(n.Z.PLAYBACK_SEEKED,B,o),w.on(u.Z.SETTING_UPDATED_CATCHUP_ENABLED,de,o),w.on(u.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,K,o),w.on(u.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,K,o),w.on(n.Z.STREAM_INITIALIZED,K,o),K()}},j=(0,E.Z)(U).getInstance().getLogger(o),q(),o}la.__dashjs_factory_name="CatchupController";var So=h.Z.getSingletonFactory(la),bo=[t.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME],ca="video",fa="audio";function da(){var o,r,l,_,I,b=this.context;function m(){r={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN}},minBitrate:{},maxBitrate:{},initialBitrate:{},contentSteering:null},l=[]}function A(F,j,U){try{r[F][j]=U/1e3}catch(w){_.error(w)}}return o={getServiceDescriptionSettings:function(){return r},getProducerReferenceTimeOffsets:function(){return l},calculateProducerReferenceTimeOffsets:function(F){try{var j=[];if(F&&F.length>0){var U=[t.Z.VIDEO,t.Z.AUDIO,t.Z.TEXT],w=I.getAvailabilityStartTime()/1e3;F.forEach(function(q){var B=U.reduce(function(me,re){return me.concat(I.getAllMediaInfoForType(q,re))},[]).reduce(function(me,re){return I.getProducerReferenceTimes(q,re).forEach(function(de){var fe=I.getVoRepresentations(re);if(fe&&fe.length>0&&fe[0].adaptation&&fe[0].segmentInfoType===e.Z.SEGMENT_TEMPLATE){var G=fe[0],ie=new Date(de[e.Z.WALL_CLOCK_TIME]).getTime()/1e3-(de[e.Z.PRESENTATION_TIME]/G[e.Z.TIMESCALE]-G[e.Z.PRESENTATION_TIME_OFFSET]+q.start),K=w-ie;me.push({id:de[e.Z.ID],to:K})}}),me},[]);j=j.concat(B)})}l=j}catch(q){_.error(q),l=[]}},applyServiceDescription:function(F){if(F&&F.serviceDescriptions){var j=F.serviceDescriptions.filter(function(q){return bo.includes(q.schemeIdUri)}),U=F.serviceDescriptions.filter(function(q){return q.schemeIdUri==null}),w=j.length>0?j[j.length-1]:U[U.length-1];w&&(w.latency&&w.latency.target>0&&function(q){var B;if(q.schemeIdUri,t.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME,B=function(fe){return{liveDelay:fe.latency.target/1e3,maxDrift:!isNaN(fe.latency.max)&&fe.latency.max>fe.latency.target?(fe.latency.max-fe.latency.target+500)/1e3:NaN,referenceId:fe.latency.referenceId||NaN}}(q),l.length>0){var me=function(fe){var G,ie=0,K=l.filter(function(ue){return ue.id===fe.referenceId});return K.length===0?(ie=l.length>0?l[0].to:0,G=l[0].id||NaN):(ie=K[0].to||0,G=K[0].id||NaN),{to:ie,id:G}}(B),re=me.to,de=me.id;r.liveDelay=B.liveDelay-re,r.liveCatchup.maxDrift=B.maxDrift,_.debug(`
                Found latency properties coming from service description. Applied time offset of `.concat(re," from ProducerReferenceTime element with id ").concat(de,`.
                Live Delay: `).concat(B.liveDelay-re,", Live catchup max drift: ").concat(B.maxDrift,`
            `))}else r.liveDelay=B.liveDelay,r.liveCatchup.maxDrift=B.maxDrift,_.debug("Found latency properties coming from service description: Live Delay: ".concat(B.liveDelay,", Live catchup max drift: ").concat(B.maxDrift))}(w),w.playbackRate&&function(q){var B=q.playbackRate.min?Math.round(1e3*(q.playbackRate.min-1))/1e3:NaN,me=q.playbackRate.max?Math.round(1e3*(q.playbackRate.max-1))/1e3:NaN;r.liveCatchup.playbackRate.min=B,r.liveCatchup.playbackRate.max=me,_.debug("Found latency properties coming from service description: Live catchup min playback rate: ".concat(B)),_.debug("Found latency properties coming from service description: Live catchup max playback rate: ".concat(me))}(w),w.operatingQuality,w.operatingBandwidth&&function(q){if(q&&q.operatingBandwidth&&q.operatingBandwidth.mediaType&&q.operatingBandwidth.mediaType!=="all"){var B={};B.minBandwidth=q.operatingBandwidth.min,B.maxBandwidth=q.operatingBandwidth.max,B.targetBandwidth=q.operatingBandwidth.target;var me=[];q.operatingBandwidth.mediaType===ca||q.operatingBandwidth.mediaType===fa?me.push(q.operatingBandwidth.mediaType):q.operatingBandwidth.mediaType==="any"&&(me.push(fa),me.push(ca)),me.forEach(function(re){isNaN(B.minBandwidth)||A("minBitrate",re,B.minBandwidth),isNaN(B.maxBandwidth)||A("maxBitrate",re,B.maxBandwidth),isNaN(B.targetBandwidth)||A("initialBitrate",re,B.targetBandwidth)})}}(w),w.contentSteering&&function(q){r.contentSteering=q.contentSteering}(w))}},reset:function(){m()},setConfig:function(F){F&&F.adapter&&(I=F.adapter)}},_=(0,E.Z)(b).getInstance().getLogger(o),m(),o}da.__dashjs_factory_name="ServiceDescriptionController";var Ao=h.Z.getSingletonFactory(da),Io=D(3973),ui=D.n(Io),ga=D(3039);function Oi(){var o,r,l,_,I,b,m,A,F=this.context,j=(0,p.Z)(F).getInstance();function U(P,se){return P&&l[se]&&l[se][P]?l[se][P].list:[]}function w(P,se){return P&&l[se]&&l[se][P]?l[se][P].current:null}function q(P){var se=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(P&&P.streamInfo){var pe=P.type,Le=P.streamInfo,De=Le.id,Oe=w(pe,De);if(l[De]&&l[De][pe]&&(l[De][pe].current=P,l[De][pe].current&&(pe!==t.Z.TEXT&&!re(P,Oe)||pe===t.Z.TEXT&&P.isFragmented)&&j.trigger(u.Z.CURRENT_TRACK_CHANGED,{oldMediaInfo:Oe,newMediaInfo:P,switchMode:_.get().streaming.trackSwitchMode[pe]},{streamId:De}),!se)){var we=fe(P);if(!we||!l[De][pe].storeLastSettings)return;we.roles&&(we.role=we.roles[0],delete we.roles),we.accessibility&&(we.accessibility=we.accessibility[0]),we.audioChannelConfiguration&&(we.audioChannelConfiguration=we.audioChannelConfiguration[0]),b[pe]=we,A.setSavedMediaSettings(pe,we)}}}function B(P,se){P&&se&&(I[P]=se)}function me(P){return P?I[P]:null}function re(P,se){if(!P&&!se)return!0;if(!P||!se)return!1;var pe=P.id===se.id,Le=P.viewpoint===se.viewpoint,De=JSON.stringify(P.viewpointsWithSchemeIdUri)===JSON.stringify(se.viewpointsWithSchemeIdUri),Oe=P.lang===se.lang,we=P.codec===se.codec,ot=P.roles.toString()===se.roles.toString(),at=JSON.stringify(P.rolesWithSchemeIdUri)===JSON.stringify(se.rolesWithSchemeIdUri),Xe=P.accessibility.toString()===se.accessibility.toString(),$e=JSON.stringify(P.accessibilitiesWithSchemeIdUri)===JSON.stringify(se.accessibilitiesWithSchemeIdUri),Dt=P.audioChannelConfiguration.toString()===se.audioChannelConfiguration.toString(),_e=JSON.stringify(P.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(se.audioChannelConfigurationsWithSchemeIdUri);return pe&&we&&Le&&De&&Oe&&ot&&at&&Xe&&$e&&Dt&&_e}function de(){l={},b={},I={audio:null,video:null,text:null}}function fe(P){var se={lang:P.lang,viewpoint:P.viewpoint,roles:P.roles,accessibility:P.accessibility,audioChannelConfiguration:P.audioChannelConfiguration,codec:P.codec};return se.lang||se.viewpoint||se.role&&se.role.length>0||se.accessibility&&se.accessibility.length>0||se.audioChannelConfiguration&&se.audioChannelConfiguration.length>0?se:null}function G(P,se,pe){var Le=[];return P.forEach(function(De){se(pe,De)&&Le.push(De)}),Le.length!==0?Le:P}function ie(P,se){return!P.lang||P.lang instanceof RegExp?se.lang.match(P.lang):se.lang!==""&&(0,ga.extendedFilter)(se.lang,ui()(P.lang)).length>0}function K(P,se){return P.index===void 0||P.index===null||se.index===P.index}function ue(P,se){return!P.viewpoint||P.viewpoint===se.viewpoint}function g(P,se){var pe=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Le=!P.role||!!se.roles.filter(function(De){return De===P.role})[0];return Le||se.type===t.Z.AUDIO&&pe}function M(P,se){return P.accessibility?!!se.accessibility.filter(function(pe){return pe===P.accessibility})[0]:!se.accessibility.length}function L(P,se){return!P.audioChannelConfiguration||!!se.audioChannelConfiguration.filter(function(pe){return pe===P.audioChannelConfiguration})[0]}function N(P,se){return!P.codec||P.codec===se.codec}function R(P){var se,pe=0,Le=[];return P.forEach(function(De){(se=Math.max.apply(Math,De.bitrateList.map(function(Oe){return Oe.bandwidth})))>pe?(pe=se,Le=[De]):se===pe&&Le.push(De)}),Le}function Q(P){var se,pe=1/0,Le=[];return P.forEach(function(De){var Oe=De.bitrateList.reduce(function(we,ot){var at=Math.max(1,ot.width*ot.height);return we+ot.bandwidth/at},0);(se=Oe/De.bitrateList.length)<pe?(pe=se,Le=[De]):se===pe&&Le.push(De)}),Le}function Y(P){var se,pe=0,Le=[];return P.forEach(function(De){(se=De.representationCount)>pe?(pe=se,Le=[De]):se===pe&&Le.push(De)}),Le}function ae(P,se){if(P===t.Z.TEXT)return se[0];var pe,Le=_.get().streaming.selectionModeForInitialTrack,De=m.getCustomInitialTrackSelectionFunction();if(De&&typeof De=="function")pe=De(se);else switch(Le){case t.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY:pe=function(Oe){var we,ot,at=(we=0,ot=[],Oe.forEach(function(Xe){isNaN(Xe.selectionPriority)||(Xe.selectionPriority>we?(we=Xe.selectionPriority,ot=[Xe]):Xe.selectionPriority===we&&ot.push(Xe))}),ot);return at.length>1&&(at=R(at)),at.length>1&&(at=Y(at)),at}(se);break;case t.Z.TRACK_SELECTION_MODE_HIGHEST_BITRATE:pe=function(Oe){var we=R(Oe);return we.length>1&&(we=Y(we)),we}(se);break;case t.Z.TRACK_SELECTION_MODE_FIRST_TRACK:pe=X(se);break;case t.Z.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:pe=function(Oe){var we=Q(Oe);return we.length>1&&(we=R(we)),we}(se);break;case t.Z.TRACK_SELECTION_MODE_WIDEST_RANGE:pe=function(Oe){var we=Y(Oe);return we.length>1&&(we=R(Oe)),we}(se);break;default:r.warn("Track selection mode ".concat(Le," is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK")),pe=X(se)}return pe.length>0?pe[0]:se[0]}function X(P){return P[0]}return o={setInitialMediaSettingsForType:function(P,se){var pe=b[P]||me(P),Le=U(P,se.id),De=[];pe||((pe=A.getSavedMediaSettings(P))&&delete pe.codec,B(P,pe)),Le&&Le.length!==0&&(pe&&(De=G(De=Array.from(Le),ie,pe),De=G(De,K,pe),De=G(De,ue,pe),P===t.Z.AUDIO&&b[P]||(De=G(De,g,pe)),De=G(De,M,pe),De=G(De,L,pe),De=G(De,N,pe)),De.length===0?q(ae(P,Le),!0):De.length>1?q(ae(P,De)):q(De[0]))},addTrack:function(P){if(P){var se=P.type;if((pe=se)===t.Z.AUDIO||pe===t.Z.VIDEO||pe===t.Z.TEXT||pe===t.Z.IMAGE){var pe,Le,De=P.streamInfo.id;l[De]||(l[De]={audio:{list:[],storeLastSettings:Le=_.get().streaming.saveLastMediaSettingsForCurrentStreamingSession,current:null},video:{list:[],storeLastSettings:Le,current:null},text:{list:[],storeLastSettings:Le,current:null},image:{list:[],storeLastSettings:Le,current:null}});for(var Oe=l[De][se].list,we=0,ot=Oe.length;we<ot;++we)if(re(Oe[we],P))return;Oe.push(P)}}},getTracksFor:U,getCurrentTrackFor:w,isCurrentTrack:function(P){if(!P)return!1;var se=P.type,pe=P.streamInfo.id;return l[pe]&&l[pe][se]&&re(l[pe][se].current,P)},setTrack:q,selectInitialTrack:ae,setInitialSettings:B,getInitialSettings:me,getTracksWithHighestBitrate:R,getTracksWithHighestEfficiency:Q,getTracksWithWidestRange:Y,isTracksEqual:re,matchSettings:function(P,se){var pe=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{var Le=!1;if(P.lang){if(P.lang instanceof RegExp)Le=se.lang.match(P.lang);else if(se.lang!==""){var De=ui()(P.lang);De&&(Le=(0,ga.extendedFilter)(se.lang,De).length>0)}}else Le=!0;var Oe=P.index===void 0||P.index===null||se.index===P.index,we=!P.viewpoint||P.viewpoint===se.viewpoint,ot=!P.role||!!se.roles.filter(function($e){return $e===P.role})[0],at=!P.accessibility||!!se.accessibility.filter(function($e){return $e===P.accessibility})[0],Xe=!P.audioChannelConfiguration||!!se.audioChannelConfiguration.filter(function($e){return $e===P.audioChannelConfiguration})[0];return Le&&Oe&&we&&(ot||se.type===t.Z.AUDIO&&pe)&&at&&Xe}catch{return!1}},matchSettingsLang:ie,matchSettingsIndex:K,matchSettingsViewPoint:ue,matchSettingsRole:g,matchSettingsAccessibility:M,matchSettingsAudioChannelConfig:L,saveTextSettingsDisabled:function(){A.setSavedMediaSettings(t.Z.TEXT,null)},setConfig:function(P){P&&(P.domStorage&&(A=P.domStorage),P.settings&&(_=P.settings),P.customParametersModel&&(m=P.customParametersModel))},reset:de},r=(0,E.Z)(F).getInstance().getLogger(o),de(),o}Oi.__dashjs_factory_name="MediaController";var ha=h.Z.getSingletonFactory(Oi);h.Z.updateSingletonFactory(Oi.__dashjs_factory_name,ha);var Ro=ha,li=NaN,ma=function o(r,l){(function(_,I){if(!(_ instanceof I))throw new TypeError("Cannot call a class as a function")})(this,o),this.data={baseUrls:r||null,selectedIdx:l||li},this.children=[]};function pa(){var o,r,l,_,I=this.context,b=Rt(I).getInstance();function m(U,w,q){var B=A(q);U[w]?b.areEqual(B,U[w].data.baseUrls)||(U[w].data.baseUrls=B,U[w].data.selectedIdx=li):U[w]=new ma(B)}function A(U){var w=l.getBaseURLsFromElement(U),q=_.getSynthesizedBaseUrlElements(w);return q&&q.length>0&&(w=w.concat(q)),w}function F(U,w){var q=w||r;U(q.data),q.children&&q.children.forEach(function(B){return F(U,B)})}function j(){r=new ma}return o={reset:j,update:function(U){(function(w){(function(){if(!l||!l.hasOwnProperty("getBaseURLsFromElement")||!l.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")})();var q=A(w);b.areEqual(q,r.data.baseUrls)||(r.data.baseUrls=q,r.data.selectedIdx=li),w&&w.Period_asArray&&w.Period_asArray.forEach(function(B,me){m(r.children,me,B),B.AdaptationSet_asArray&&B.AdaptationSet_asArray.forEach(function(re,de){m(r.children[me].children,de,re),re.Representation_asArray&&re.Representation_asArray.sort(l.getRepresentationSortFunction()).forEach(function(fe,G){m(r.children[me].children[de].children,G,fe)})})})})(U)},getForPath:function(U){var w=r,q=[w.data];return U&&U.forEach(function(B){(w=w.children[B])&&q.push(w.data)}),q.filter(function(B){return B.baseUrls.length})},invalidateSelectedIndexes:function(U){F(function(w){isNaN(w.selectedIdx)||U===w.baseUrls[w.selectedIdx].serviceLocation&&(w.selectedIdx=li)})},setConfig:function(U){U.adapter&&(l=U.adapter),U.contentSteeringController&&(_=U.contentSteeringController)},getBaseUrls:function(U){return A(U)}},j(),o}pa.__dashjs_factory_name="BaseURLTreeModel";var wo=h.Z.getClassFactory(pa);function ya(o){var r=(o=o||{}).blacklistController;return{select:function(l){return l&&function(I){var b,m,A=0,F=[],j=0;if((m=I.sort(function(U,w){var q=U.dvb_priority-w.dvb_priority;return isNaN(q)?0:q}).filter(function(U,w,q){return!w||q[0].dvb_priority&&U.dvb_priority&&q[0].dvb_priority===U.dvb_priority})).length)return m.length>1&&(m.forEach(function(U){A+=U.dvb_weight,F.push(A)}),b=Math.floor(Math.random()*(A-1)),F.every(function(U,w){return j=w,!(b<U)})),m[j]}((_=[],l.filter(function(I){return!r.contains(I.serviceLocation)||(I.dvb_priority&&_.push(I.dvb_priority),!1)}).filter(function(I){return!_.length||!I.dvb_priority||_.indexOf(I.dvb_priority)===-1})));var _}}}ya.__dashjs_factory_name="DVBSelector";var No=h.Z.getClassFactory(ya);function Ea(o){var r=(o=o||{}).blacklistController;return{select:function(l){var _,I=0;return l&&l.some(function(b,m){return I=m,!r.contains(b.serviceLocation)})&&(_=l[I]),_}}}Ea.__dashjs_factory_name="BasicSelector";var Co=h.Z.getClassFactory(Ea);function va(){var o,r,l,_=this.context;function I(){for(var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],A=0,F=NaN,j=function(){var w=b[A],q=m.findIndex(function(B){return B.serviceLocation&&B.serviceLocation===w});if(q!==-1&&!l.contains(m[q].serviceLocation))return F=q,"break";A+=1};A<b.length;){var U=j();if(U==="break")break}return F}return o={selectBaseUrlIndex:function(b){var m=NaN;if(isNaN(b.selectedIdx)){var A=r.getSteeringDataFromManifest();A&&A.defaultServiceLocationArray.length>0&&(m=I(A.defaultServiceLocationArray,b.baseUrls))}var F=r.getCurrentSteeringResponseData();return b.baseUrls&&b.baseUrls.length&&F&&F.pathwayPriority&&F.pathwayPriority.length&&(m=I(F.pathwayPriority,b.baseUrls)),m},setConfig:function(b){b.blacklistController&&(l=b.blacklistController),b.contentSteeringController&&(r=b.contentSteeringController)}},r=_r(_).getInstance(),o}va.__dashjs_factory_name="ContentSteeringSelector";var Do=h.Z.getClassFactory(va);function _a(){var o,r,l,_,I,b,m=this.context,A=(0,p.Z)(m).getInstance(),F=(0,Ie.Z)(m).getInstance();function j(){r.reset()}return o={chooseSelector:function(U){(0,W.PS)(U,"boolean"),b=U?_:l},select:function(U){if(U){if(F.get().streaming.applyContentSteering){var w=I.selectBaseUrlIndex(U);isNaN(w)||w===-1||(U.selectedIdx=w)}if(!isNaN(U.selectedIdx))return U.baseUrls[U.selectedIdx];var q=b.select(U.baseUrls);return q?(U.selectedIdx=U.baseUrls.indexOf(q),q):(A.trigger(u.Z.URL_RESOLUTION_FAILED,{error:new te.Z($.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,$.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(b===l&&j()))}},reset:j,setConfig:function(U){U.selector&&(b=U.selector),U.contentSteeringSelector&&(I=U.contentSteeringSelector)}},r=Vr(m).create({updateEventName:u.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,addBlacklistEventName:u.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),l=Co(m).create({blacklistController:r}),_=No(m).create({blacklistController:r}),(I=Do(m).create()).setConfig({blacklistController:r}),b=l,o}_a.__dashjs_factory_name="BaseURLSelector";var Oo=h.Z.getClassFactory(_a);function Ta(){var o,r,l,_,I,b=this.context,m=(0,p.Z)(b).getInstance(),A=(0,Ge.Z)(b).getInstance();function F(U){l.update(U),_.chooseSelector(r.getIsDVB(U)),m.trigger(n.Z.BASE_URLS_UPDATED,{baseUrls:j(U)})}function j(U){return l.getBaseUrls(U)}return o={reset:function(){l.reset(),_.reset()},initialize:function(U){l.setConfig({adapter:r,contentSteeringController:I}),F(U)},resolve:function(U){var w=l.getForPath(U).reduce(function(q,B){var me=_.select(B);return me?(A.isRelative(me.url)?q.url=A.resolve(me.url,q.url):(q.url=me.url,q.serviceLocation=me.serviceLocation),q.availabilityTimeOffset=me.availabilityTimeOffset,q.availabilityTimeComplete=me.availabilityTimeComplete,q.queryParams=me.queryParams,q):new ir},new ir);if(!A.isRelative(w.url))return w},setConfig:function(U){U.baseURLTreeModel&&(l=U.baseURLTreeModel),U.baseURLSelector&&(_=U.baseURLSelector),U.adapter&&(r=U.adapter),U.contentSteeringController&&(I=U.contentSteeringController)},getBaseUrls:j,update:F},l=wo(b).create(),_=Oo(b).create(),m.on(u.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,function(U){l.invalidateSelectedIndexes(U.entry)},o),o}Ta.__dashjs_factory_name="BaseURLController";var Mo=h.Z.getClassFactory(Ta);function Mi(o){return Mi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Mi(o)}function Pi(o,r){return Pi=Object.setPrototypeOf||function(l,_){return l.__proto__=_,l},Pi(o,r)}function Po(o,r){return!r||Mi(r)!=="object"&&typeof r!="function"?function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(o):r}function ci(o){return ci=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},ci(o)}var Sa=function(o){(function(b,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(m&&m.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),m&&Pi(b,m)})(I,o);var r,l,_=(r=I,l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var b,m=ci(r);if(l){var A=ci(this).constructor;b=Reflect.construct(m,arguments,A)}else b=m.apply(this,arguments);return Po(this,b)});function I(b,m){var A;return function(F,j){if(!(F instanceof j))throw new TypeError("Cannot call a class as a function")}(this,I),(A=_.call(this)).url=b||null,A.type=m||null,A.mediaType=t.Z.STREAM,A.responseType="",A}return I}(C.Z);function ba(o){o=o||{};var r=this.context,l=(0,p.Z)(r).getInstance(),_=zn(r).create({errHandler:o.errHandler,dashMetrics:o.dashMetrics,mediaPlayerModel:o.mediaPlayerModel,requestModifier:o.requestModifier,errors:$});return{load:function(I,b,m){var A=function(j,U){b.resolved=!0,b.resolvedContent=j||null,l.trigger(u.Z.XLINK_ELEMENT_LOADED,{element:b,resolveObject:m,error:j||U?null:new te.Z($.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,$.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+I)})};if(I==="urn:mpeg:dash:resolve-to-zero:2013")A(null,!0);else{var F=new Sa(I,Ze.w.XLINK_EXPANSION_TYPE);_.load({request:F,success:function(j){A(j)},error:function(){A(null)}})}},reset:function(){_&&(_.abort(),_=null)}}}ba.__dashjs_factory_name="XlinkLoader";var Lo=h.Z.getClassFactory(ba),Aa=function(o){(o=o||{}).escapeMode===void 0&&(o.escapeMode=!0),o.attributePrefix===void 0&&(o.attributePrefix="_"),o.arrayAccessForm=o.arrayAccessForm||"none",o.emptyNodeForm=o.emptyNodeForm||"text",o.enableToStringFunc===void 0&&(o.enableToStringFunc=!0),o.arrayAccessFormPaths=o.arrayAccessFormPaths||[],o.skipEmptyTextNodesForObj===void 0&&(o.skipEmptyTextNodesForObj=!0),o.stripWhitespaces===void 0&&(o.stripWhitespaces=!0),o.datetimeAccessFormPaths=o.datetimeAccessFormPaths||[],o.useDoubleQuotes===void 0&&(o.useDoubleQuotes=!1),o.xmlElementsFilter=o.xmlElementsFilter||[],o.jsonPropertiesFilter=o.jsonPropertiesFilter||[],o.keepCData===void 0&&(o.keepCData=!1),o.ignoreRoot===void 0&&(o.ignoreRoot=!1);function r(G){var ie=G.localName;return ie==null&&(ie=G.baseName),ie!=null&&ie!=""||(ie=G.nodeName),ie}function l(G){return typeof G=="string"?G.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):G}function _(G,ie,K,ue){for(var g=0;g<G.length;g++){var M=G[g];if(typeof M=="string"){if(M==ue)break}else if(M instanceof RegExp){if(M.test(ue))break}else if(typeof M=="function"&&M(ie,K,ue))break}return g!=G.length}function I(G,ie,K){o.arrayAccessForm==="property"&&(G[ie]instanceof Array?G[ie+"_asArray"]=G[ie]:G[ie+"_asArray"]=[G[ie]]),!(G[ie]instanceof Array)&&o.arrayAccessFormPaths.length>0&&_(o.arrayAccessFormPaths,G,ie,K)&&(G[ie]=[G[ie]])}function b(G){var ie=G.split(/[-T:+Z]/g),K=new Date(ie[0],ie[1]-1,ie[2]),ue=ie[5].split(".");if(K.setHours(ie[3],ie[4],ue[0]),ue.length>1&&K.setMilliseconds(ue[1]),ie[6]&&ie[7]){var g=60*ie[6]+Number(ie[7]);g=0+((/\d\d-\d\d:\d\d$/.test(G)?"-":"+")=="-"?-1*g:g),K.setMinutes(K.getMinutes()-g-K.getTimezoneOffset())}else G.indexOf("Z",G.length-1)!==-1&&(K=new Date(Date.UTC(K.getFullYear(),K.getMonth(),K.getDate(),K.getHours(),K.getMinutes(),K.getSeconds(),K.getMilliseconds())));return K}function m(G,ie,K,ue){return!(ie==1&&o.xmlElementsFilter.length>0)||_(o.xmlElementsFilter,G,K,ue)}function A(G,ie){if(G.nodeType==9){for(var K=new Object,ue=G.childNodes,g=0;g<ue.length;g++)(L=ue[g]).nodeType==1&&(o.ignoreRoot?K=A(L):(K={})[N=r(L)]=A(L));return K}if(G.nodeType==1){(K=new Object).__cnt=0;var M=[];for(ue=G.childNodes,g=0;g<ue.length;g++){var L,N=r(L=ue[g]);if(L.nodeType!=8){var R=ie+"."+N;if(m(K,L.nodeType,N,R))if(K.__cnt++,K[N]==null){var Q=A(L,R);(N!="#text"||/[^\s]/.test(Q))&&((Y={})[N]=Q,M.push(Y)),K[N]=Q,I(K,N,R)}else{var Y;K[N]!=null&&(K[N]instanceof Array||(K[N]=[K[N]],I(K,N,R))),Q=A(L,R),(N!="#text"||/[^\s]/.test(Q))&&((Y={})[N]=Q,M.push(Y)),K[N][K[N].length]=Q}}}K.__children=M;for(var ae=r(G),X=0;X<G.attributes.length;X++){var P=G.attributes[X];K.__cnt++;for(var se=P.value,pe=0,Le=o.matchers.length;pe<Le;pe++){var De=o.matchers[pe];De.test(P,ae)&&(se=De.converter(P.value))}K[o.attributePrefix+P.name]=se}var Oe=function(we){return we.prefix}(G);return Oe!=null&&Oe!=""&&(K.__cnt++,K.__prefix=Oe),K["#text"]!=null&&(K.__text=K["#text"],K.__text instanceof Array&&(K.__text=K.__text.join(`
`)),o.stripWhitespaces&&(K.__text=K.__text.trim()),delete K["#text"],o.arrayAccessForm=="property"&&delete K["#text_asArray"],K.__text=function(we,ot,at){if(o.datetimeAccessFormPaths.length>0){var Xe=at.split(".#")[0];return _(o.datetimeAccessFormPaths,we,ot,Xe)?b(we):we}return we}(K.__text,N,ie+"."+N)),K["#cdata-section"]!=null&&(K.__cdata=K["#cdata-section"],delete K["#cdata-section"],o.arrayAccessForm=="property"&&delete K["#cdata-section_asArray"]),K.__cnt==0&&o.emptyNodeForm=="text"?K="":K.__cnt==1&&K.__text!=null?K=K.__text:K.__cnt!=1||K.__cdata==null||o.keepCData?K.__cnt>1&&K.__text!=null&&o.skipEmptyTextNodesForObj&&(o.stripWhitespaces&&K.__text==""||K.__text.trim()=="")&&delete K.__text:K=K.__cdata,delete K.__cnt,!o.enableToStringFunc||K.__text==null&&K.__cdata==null||(K.toString=function(){return(this.__text!=null?this.__text:"")+(this.__cdata!=null?this.__cdata:"")}),K}if(G.nodeType==3||G.nodeType==4)return G.nodeValue}function F(G,ie,K,ue){var g="<"+(G!=null&&G.__prefix!=null?G.__prefix+":":"")+ie;if(K!=null)for(var M=0;M<K.length;M++){var L=K[M],N=G[L];o.escapeMode&&(N=l(N)),g+=" "+L.substr(o.attributePrefix.length)+"=",o.useDoubleQuotes?g+='"'+N+'"':g+="'"+N+"'"}return g+(ue?"/>":">")}function j(G,ie){return"</"+(G.__prefix!=null?G.__prefix+":":"")+ie+">"}function U(G,ie){return o.arrayAccessForm=="property"&&(ue="_asArray",(K=ie.toString()).indexOf(ue,K.length-ue.length)!==-1)||ie.toString().indexOf(o.attributePrefix)==0||ie.toString().indexOf("__")==0||G[ie]instanceof Function;var K,ue}function w(G){var ie=0;if(G instanceof Object)for(var K in G)U(G,K)||ie++;return ie}function q(G,ie,K){return o.jsonPropertiesFilter.length==0||K==""||_(o.jsonPropertiesFilter,G,ie,K)}function B(G){var ie=[];if(G instanceof Object)for(var K in G)K.toString().indexOf("__")==-1&&K.toString().indexOf(o.attributePrefix)==0&&ie.push(K);return ie}function me(G){var ie="";return G instanceof Object?ie+=function(K){var ue="";return K.__cdata!=null&&(ue+="<![CDATA["+K.__cdata+"]]>"),K.__text!=null&&(o.escapeMode?ue+=l(K.__text):ue+=K.__text),ue}(G):G!=null&&(o.escapeMode?ie+=l(G):ie+=G),ie}function re(G,ie){return G===""?ie:G+"."+ie}function de(G,ie,K,ue){var g="";if(G.length==0)g+=F(G,ie,K,!0);else for(var M=0;M<G.length;M++)g+=F(G[M],ie,B(G[M]),!1),g+=fe(G[M],re(ue,ie)),g+=j(G[M],ie);return g}function fe(G,ie){var K="";if(w(G)>0){for(var ue in G)if(!U(G,ue)&&(ie==""||q(G,ue,re(ie,ue)))){var g=G[ue],M=B(g);g==null||g==null?K+=F(g,ue,M,!0):g instanceof Object?g instanceof Array?K+=de(g,ue,M,ie):g instanceof Date?(K+=F(g,ue,M,!1),K+=g.toISOString(),K+=j(g,ue)):w(g)>0||g.__text!=null||g.__cdata!=null?(K+=F(g,ue,M,!1),K+=fe(g,re(ie,ue)),K+=j(g,ue)):K+=F(g,ue,M,!0):(K+=F(g,ue,M,!1),K+=me(g),K+=j(g,ue))}}return K+me(G)}this.parseXmlString=function(G){var ie;if(G===void 0)return null;if(window.DOMParser){var K=new window.DOMParser;try{(ie=K.parseFromString(G,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(ie=null)}catch{ie=null}}else G.indexOf("<?")==0&&(G=G.substr(G.indexOf("?>")+2)),(ie=new ActiveXObject("Microsoft.XMLDOM")).async="false",ie.loadXML(G);return ie},this.asArray=function(G){return G===void 0||G==null?[]:G instanceof Array?G:[G]},this.toXmlDateTime=function(G){return G instanceof Date?G.toISOString():typeof G=="number"?new Date(G).toISOString():null},this.asDateTime=function(G){return typeof G=="string"?b(G):G},this.xml2json=function(G){return A(G)},this.xml_str2json=function(G){var ie=this.parseXmlString(G);return ie!=null?this.xml2json(ie):null},this.json2xml_str=function(G){return fe(G,"")},this.json2xml=function(G){var ie=this.json2xml_str(G);return this.parseXmlString(ie)},this.getVersion=function(){return"1.2.0"}},xr="onLoad";function Ia(o){o=o||{};var r,l,_,I,b,m,A=this.context,F=(0,p.Z)(A).getInstance(),j=(0,Ge.Z)(A).getInstance();function U(re,de,fe){var G,ie,K={};K.elements=re,K.type=de,K.resolveType=fe,K.elements.length===0&&q(K);for(var ue=0;ue<K.elements.length;ue++)G=K.elements[ue],ie=j.isHTTPURL(G.url)?G.url:G.originalContent.BaseURL+G.url,m.load(ie,G,K)}function w(re){var de,fe,G="";if(de=re.element,fe=re.resolveObject,de.resolvedContent){var ie=0;de.resolvedContent.indexOf("<?xml")===0&&(ie=de.resolvedContent.indexOf("?>")+2),G=de.resolvedContent.substr(0,ie)+"<response>"+de.resolvedContent.substr(ie)+"</response>",de.resolvedContent=b.xml_str2json(G)}(function(K){var ue;for(ue=0;ue<K.elements.length;ue++)if(K.elements[ue].resolved===!1)return!1;return!0})(fe)&&q(fe)}function q(re){var de,fe,G=[];if(function(ie){var K,ue,g,M,L,N,R=[];for(M=ie.elements.length-1;M>=0;M--){if(ue=(K=ie.elements[M]).type+"_asArray",K.resolvedContent){if(K.resolvedContent)for(L=0;L<K.resolvedContent[ue].length;L++)g=K.resolvedContent[ue][L],R.push(g)}else delete K.originalContent["xlink:actuate"],delete K.originalContent["xlink:href"],R.push(K.originalContent);for(K.parentElement[ue].splice(K.index,1),N=0;N<R.length;N++)K.parentElement[ue].splice(K.index+N,0,R[N]);R=[]}ie.elements.length>0&&_.run(I)}(re),re.resolveType==="onActuate"&&F.trigger(u.Z.XLINK_READY,{manifest:I}),re.resolveType===xr)switch(re.type){case e.Z.PERIOD:for(de=0;de<I[e.Z.PERIOD+"_asArray"].length;de++)(fe=I[e.Z.PERIOD+"_asArray"][de]).hasOwnProperty(e.Z.ADAPTATION_SET+"_asArray")&&(G=G.concat(B(fe[e.Z.ADAPTATION_SET+"_asArray"],fe,e.Z.ADAPTATION_SET,xr))),fe.hasOwnProperty(e.Z.EVENT_STREAM+"_asArray")&&(G=G.concat(B(fe[e.Z.EVENT_STREAM+"_asArray"],fe,e.Z.EVENT_STREAM,xr)));U(G,e.Z.ADAPTATION_SET,xr);break;case e.Z.ADAPTATION_SET:F.trigger(u.Z.XLINK_READY,{manifest:I})}}function B(re,de,fe,G){var ie,K,ue,g=[];for(K=re.length-1;K>=0;K--)(ie=re[K]).hasOwnProperty("xlink:href")&&ie["xlink:href"]==="urn:mpeg:dash:resolve-to-zero:2013"&&re.splice(K,1);for(K=0;K<re.length;K++)(ie=re[K]).hasOwnProperty("xlink:href")&&ie.hasOwnProperty("xlink:actuate")&&ie["xlink:actuate"]===G&&(ue=me(ie["xlink:href"],de,fe,K,G,ie),g.push(ue));return g}function me(re,de,fe,G,ie,K){return{url:re,parentElement:de,type:fe,index:G,resolveType:ie,originalContent:K,resolvedContent:null,resolved:!1}}return r={resolveManifestOnLoad:function(re){b=new Aa({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:l}),(I=re).Period_asArray?U(B(I.Period_asArray,I,e.Z.PERIOD,xr),e.Z.PERIOD,xr):F.trigger(u.Z.XLINK_READY,{manifest:I})},setMatchers:function(re){re&&(l=re)},setIron:function(re){re&&(_=re)},reset:function(){F.off(u.Z.XLINK_ELEMENT_LOADED,w,r),m&&(m.reset(),m=null)}},F.on(u.Z.XLINK_ELEMENT_LOADED,w,r),m=Lo(A).create({errHandler:o.errHandler,dashMetrics:o.dashMetrics,mediaPlayerModel:o.mediaPlayerModel,requestModifier:o.requestModifier,settings:o.settings}),r}Ia.__dashjs_factory_name="XlinkController";var xo=h.Z.getClassFactory(Ia);function zr(o){return zr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},zr(o)}function Ra(o){function r(I,b){for(var m in I)b.hasOwnProperty(m)||(b[m]=I[m])}function l(I,b,m){for(var A=0,F=I.length;A<F;++A){var j=I[A];if(b[j.name])if(m[j.name]){if(j.merge){var U=b[j.name],w=m[j.name];zr(U)==="object"&&zr(w)==="object"?r(U,w):m[j.name]=U+w}}else m[j.name]=b[j.name]}}function _(I,b){for(var m=0,A=I.children.length;m<A;++m){var F=I.children[m],j=b[F.name+"_asArray"];if(j)for(var U=0,w=j.length;U<w;++U){var q=j[U];l(I.properties,b,q),_(F,q)}}}return{run:function(I){if(I===null||zr(I)!=="object")return I;if(I.Period_asArray&&"period"in o)for(var b=o.period,m=I.Period_asArray,A=0,F=m.length;A<F;++A){var j=m[A];if(_(b,j),"adaptationset"in o){var U=j.AdaptationSet_asArray;if(U)for(var w=o.adaptationset,q=0,B=U.length;q<B;++q)_(w,U[q])}}return I}}}Ra.__dashjs_factory_name="ObjectIron";var Fo=h.Z.getClassFactory(Ra);function ko(o,r){for(var l=0;l<r.length;l++){var _=r[l];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(o,_.key,_)}}var Wr=function(){function o(_,I){(function(b,m){if(!(b instanceof m))throw new TypeError("Cannot call a class as a function")})(this,o),this._test=_,this._converter=I}var r,l;return r=o,(l=[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}])&&ko(r.prototype,l),o}();function Li(o){return Li=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Li(o)}function Nn(o,r,l){return r in o?Object.defineProperty(o,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[r]=l,o}function xi(o,r){return xi=Object.setPrototypeOf||function(l,_){return l.__proto__=_,l},xi(o,r)}function Zo(o,r){return!r||Li(r)!=="object"&&typeof r!="function"?function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(o):r}function fi(o){return fi=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},fi(o)}var Uo=function(o){(function(b,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(m&&m.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),m&&xi(b,m)})(I,o);var r,l,_=(r=I,l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var b,m=fi(r);if(l){var A=fi(this).constructor;b=Reflect.construct(m,arguments,A)}else b=m.apply(this,arguments);return Zo(this,b)});function I(){return function(b,m){if(!(b instanceof m))throw new TypeError("Cannot call a class as a function")}(this,I),_.call(this,function(b,m){var A,F=(Nn(A={},e.Z.MPD,[e.Z.ID,e.Z.PROFILES]),Nn(A,e.Z.PERIOD,[e.Z.ID]),Nn(A,e.Z.BASE_URL,[e.Z.SERVICE_LOCATION,e.Z.BYTE_RANGE]),Nn(A,e.Z.SEGMENT_BASE,[e.Z.INDEX_RANGE]),Nn(A,e.Z.INITIALIZATION,[e.Z.RANGE]),Nn(A,e.Z.REPRESENTATION_INDEX,[e.Z.RANGE]),Nn(A,e.Z.SEGMENT_LIST,[e.Z.INDEX_RANGE]),Nn(A,e.Z.BITSTREAM_SWITCHING,[e.Z.RANGE]),Nn(A,e.Z.SEGMENT_URL,[e.Z.MEDIA_RANGE,e.Z.INDEX_RANGE]),Nn(A,e.Z.SEGMENT_TEMPLATE,[e.Z.INDEX_RANGE,e.Z.MEDIA,e.Z.INDEX,e.Z.INITIALIZATION_MINUS,e.Z.BITSTREAM_SWITCHING_MINUS]),Nn(A,e.Z.ASSET_IDENTIFIER,[e.Z.VALUE,e.Z.ID]),Nn(A,e.Z.EVENT_STREAM,[e.Z.VALUE]),Nn(A,e.Z.ADAPTATION_SET,[e.Z.PROFILES,e.Z.MIME_TYPE,e.Z.SEGMENT_PROFILES,e.Z.CODECS,e.Z.CONTENT_TYPE]),Nn(A,e.Z.FRAME_PACKING,[e.Z.VALUE,e.Z.ID]),Nn(A,e.Z.AUDIO_CHANNEL_CONFIGURATION,[e.Z.VALUE,e.Z.ID]),Nn(A,e.Z.CONTENT_PROTECTION,[e.Z.VALUE,e.Z.ID]),Nn(A,e.Z.ESSENTIAL_PROPERTY,[e.Z.VALUE,e.Z.ID]),Nn(A,e.Z.SUPPLEMENTAL_PROPERTY,[e.Z.VALUE,e.Z.ID]),Nn(A,e.Z.INBAND_EVENT_STREAM,[e.Z.VALUE,e.Z.ID]),Nn(A,e.Z.ACCESSIBILITY,[e.Z.VALUE,e.Z.ID]),Nn(A,e.Z.ROLE,[e.Z.VALUE,e.Z.ID]),Nn(A,e.Z.RATING,[e.Z.VALUE,e.Z.ID]),Nn(A,e.Z.VIEWPOINT,[e.Z.VALUE,e.Z.ID]),Nn(A,e.Z.CONTENT_COMPONENT,[e.Z.CONTENT_TYPE]),Nn(A,e.Z.REPRESENTATION,[e.Z.ID,e.Z.DEPENDENCY_ID,e.Z.MEDIA_STREAM_STRUCTURE_ID]),Nn(A,e.Z.SUBSET,[e.Z.ID]),Nn(A,e.Z.METRICS,[e.Z.METRICS_MINUS]),Nn(A,e.Z.REPORTING,[e.Z.VALUE,e.Z.ID]),A);if(F.hasOwnProperty(m)){var j=F[m];return j!==void 0&&j.indexOf(b.name)>=0}return!1},function(b){return String(b)})}return I}(Wr);function Fi(o){return Fi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Fi(o)}function ki(o,r){return ki=Object.setPrototypeOf||function(l,_){return l.__proto__=_,l},ki(o,r)}function Bo(o,r){return!r||Fi(r)!=="object"&&typeof r!="function"?function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(o):r}function di(o){return di=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},di(o)}var wa=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,Go=function(o){(function(b,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(m&&m.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),m&&ki(b,m)})(I,o);var r,l,_=(r=I,l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var b,m=di(r);if(l){var A=di(this).constructor;b=Reflect.construct(m,arguments,A)}else b=m.apply(this,arguments);return Bo(this,b)});function I(){return function(b,m){if(!(b instanceof m))throw new TypeError("Cannot call a class as a function")}(this,I),_.call(this,function(b){for(var m=[e.Z.MIN_BUFFER_TIME,e.Z.MEDIA_PRESENTATION_DURATION,e.Z.MINIMUM_UPDATE_PERIOD,e.Z.TIMESHIFT_BUFFER_DEPTH,e.Z.MAX_SEGMENT_DURATION,e.Z.MAX_SUBSEGMENT_DURATION,e.Z.SUGGESTED_PRESENTATION_DELAY,e.Z.START,t.Z.START_TIME,e.Z.DURATION],A=m.length,F=0;F<A;F++)if(b.nodeName===m[F])return wa.test(b.value);return!1},function(b){var m=wa.exec(b),A=31536e3*parseFloat(m[3]||0)+2592e3*parseFloat(m[5]||0)+86400*parseFloat(m[7]||0)+3600*parseFloat(m[9]||0)+60*parseFloat(m[11]||0)+parseFloat(m[13]||0);return m[1]!==void 0&&(A=-A),A})}return I}(Wr);function Zi(o){return Zi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Zi(o)}function Ui(o,r){return Ui=Object.setPrototypeOf||function(l,_){return l.__proto__=_,l},Ui(o,r)}function qo(o,r){return!r||Zi(r)!=="object"&&typeof r!="function"?function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(o):r}function gi(o){return gi=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},gi(o)}var Na=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,Yo=function(o){(function(b,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(m&&m.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),m&&Ui(b,m)})(I,o);var r,l,_=(r=I,l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var b,m=gi(r);if(l){var A=gi(this).constructor;b=Reflect.construct(m,arguments,A)}else b=m.apply(this,arguments);return qo(this,b)});function I(){return function(b,m){if(!(b instanceof m))throw new TypeError("Cannot call a class as a function")}(this,I),_.call(this,function(b){return Na.test(b.value)},function(b){var m,A=Na.exec(b);if(m=Date.UTC(parseInt(A[1],10),parseInt(A[2],10)-1,parseInt(A[3],10),parseInt(A[4],10),parseInt(A[5],10),A[6]&&parseInt(A[6],10)||0,A[7]&&1e3*parseFloat(A[7])||0),A[9]&&A[10]){var F=60*parseInt(A[9],10)+parseInt(A[10],10);m+=(A[8]==="+"?-1:1)*F*60*1e3}return new Date(m)})}return I}(Wr);function Bi(o){return Bi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Bi(o)}function Gi(o,r){return Gi=Object.setPrototypeOf||function(l,_){return l.__proto__=_,l},Gi(o,r)}function jo(o,r){return!r||Bi(r)!=="object"&&typeof r!="function"?function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(o):r}function hi(o){return hi=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},hi(o)}var Ho=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,Vo=function(o){(function(b,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(m&&m.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),m&&Gi(b,m)})(I,o);var r,l,_=(r=I,l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var b,m=hi(r);if(l){var A=hi(this).constructor;b=Reflect.construct(m,arguments,A)}else b=m.apply(this,arguments);return jo(this,b)});function I(){return function(b,m){if(!(b instanceof m))throw new TypeError("Cannot call a class as a function")}(this,I),_.call(this,function(b){return Ho.test(b.value)},function(b){return parseFloat(b)})}return I}(Wr);function qi(o){return qi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},qi(o)}function Qr(o,r,l){return r in o?Object.defineProperty(o,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[r]=l,o}function Yi(o,r){return Yi=Object.setPrototypeOf||function(l,_){return l.__proto__=_,l},Yi(o,r)}function Ko(o,r){return!r||qi(r)!=="object"&&typeof r!="function"?function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(o):r}function mi(o){return mi=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},mi(o)}var zo=function(o){(function(b,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(m&&m.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),m&&Yi(b,m)})(I,o);var r,l,_=(r=I,l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var b,m=mi(r);if(l){var A=mi(this).constructor;b=Reflect.construct(m,arguments,A)}else b=m.apply(this,arguments);return Ko(this,b)});function I(){return function(b,m){if(!(b instanceof m))throw new TypeError("Cannot call a class as a function")}(this,I),_.call(this,function(b,m){var A,F=(Qr(A={},e.Z.ADAPTATION_SET,[e.Z.LANG]),Qr(A,e.Z.REPRESENTATION,[e.Z.LANG]),Qr(A,e.Z.CONTENT_COMPONENT,[e.Z.LANG]),Qr(A,e.Z.LABEL,[e.Z.LANG]),Qr(A,e.Z.GROUP_LABEL,[e.Z.LANG]),A);if(F.hasOwnProperty(m)){var j=F[m];return j!==void 0&&j.indexOf(b.name)>=0}return!1},function(b){return ui()(b)||String(b)})}return I}(Wr);function Wo(o,r){for(var l=0;l<r.length;l++){var _=r[l];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(o,_.key,_)}}var Qo=function(){function o(_){var I;(function(b,m){if(!(b instanceof m))throw new TypeError("Cannot call a class as a function")})(this,o),this._name=_,this._merge=(I=_)&&I.length&&I.charAt(0)===I.charAt(0).toUpperCase()}var r,l;return r=o,(l=[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}])&&Wo(r.prototype,l),o}();function Xo(o,r){for(var l=0;l<r.length;l++){var _=r[l];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(o,_.key,_)}}var Fr=function(){function o(_,I,b){var m=this;(function(A,F){if(!(A instanceof F))throw new TypeError("Cannot call a class as a function")})(this,o),this._name=_||"",this._properties=[],this._children=b||[],Array.isArray(I)&&I.forEach(function(A){m._properties.push(new Qo(A))})}var r,l;return r=o,(l=[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}])&&Xo(r.prototype,l),o}();function ji(o){return ji=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ji(o)}function Hi(o,r){return Hi=Object.setPrototypeOf||function(l,_){return l.__proto__=_,l},Hi(o,r)}function Jo(o,r){return!r||ji(r)!=="object"&&typeof r!="function"?function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(o):r}function pi(o){return pi=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},pi(o)}var $o=function(o){(function(b,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(m&&m.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),m&&Hi(b,m)})(I,o);var r,l,_=(r=I,l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var b,m=pi(r);if(l){var A=pi(this).constructor;b=Reflect.construct(m,arguments,A)}else b=m.apply(this,arguments);return Jo(this,b)});function I(){(function(m,A){if(!(m instanceof A))throw new TypeError("Cannot call a class as a function")})(this,I);var b=[e.Z.PROFILES,e.Z.WIDTH,e.Z.HEIGHT,e.Z.SAR,e.Z.FRAMERATE,e.Z.AUDIO_SAMPLING_RATE,e.Z.MIME_TYPE,e.Z.SEGMENT_PROFILES,e.Z.CODECS,e.Z.MAXIMUM_SAP_PERIOD,e.Z.START_WITH_SAP,e.Z.MAX_PLAYOUT_RATE,e.Z.CODING_DEPENDENCY,e.Z.SCAN_TYPE,e.Z.FRAME_PACKING,e.Z.AUDIO_CHANNEL_CONFIGURATION,e.Z.CONTENT_PROTECTION,e.Z.ESSENTIAL_PROPERTY,e.Z.ESSENTIAL_PROPERTY+"_asArray",e.Z.SUPPLEMENTAL_PROPERTY,e.Z.INBAND_EVENT_STREAM];return _.call(this,e.Z.ADAPTATION_SET,b,[new Fr(e.Z.REPRESENTATION,b,[new Fr(e.Z.SUB_REPRESENTATION,b)])])}return I}(Fr);function Vi(o){return Vi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Vi(o)}function Ki(o,r){return Ki=Object.setPrototypeOf||function(l,_){return l.__proto__=_,l},Ki(o,r)}function es(o,r){return!r||Vi(r)!=="object"&&typeof r!="function"?function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(o):r}function yi(o){return yi=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},yi(o)}var ts=function(o){(function(b,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(m&&m.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),m&&Ki(b,m)})(I,o);var r,l,_=(r=I,l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var b,m=yi(r);if(l){var A=yi(this).constructor;b=Reflect.construct(m,arguments,A)}else b=m.apply(this,arguments);return es(this,b)});function I(){(function(m,A){if(!(m instanceof A))throw new TypeError("Cannot call a class as a function")})(this,I);var b=[e.Z.SEGMENT_BASE,e.Z.SEGMENT_TEMPLATE,e.Z.SEGMENT_LIST];return _.call(this,e.Z.PERIOD,b,[new Fr(e.Z.ADAPTATION_SET,b,[new Fr(e.Z.REPRESENTATION,b)])])}return I}(Fr);function Ca(o){o=o||{};var r,l,_,I,b,m=this.context,A=o.debug;return r={parse:function(F){var j,U=window.performance.now();if(!(j=I.xml_str2json(F)))throw new Error("parsing the manifest failed");var w=window.performance.now();j.Patch?((j=j.Patch).add_asArray&&j.add_asArray.forEach(function(B){return b.run(B)}),j.replace_asArray&&j.replace_asArray.forEach(function(B){return b.run(B)})):(j=j.MPD,b.run(j));var q=window.performance.now();return l.info("Parsing complete: ( xml2json: "+(w-U).toPrecision(3)+"ms, objectiron: "+(q-w).toPrecision(3)+"ms, total: "+((q-U)/1e3).toPrecision(3)+"s)"),j.protocol="DASH",j},getMatchers:function(){return _},getIron:function(){return b}},l=A.getLogger(r),_=[new Go,new Yo,new Vo,new zo,new Uo],I=new Aa({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!1,matchers:_}),b=Fo(m).create({adaptationset:new $o,period:new ts}),r}Ca.__dashjs_factory_name="DashParser";var ns=h.Z.getClassFactory(Ca);function Da(o){o=o||{};var r,l,_,I,b,m=this.context,A=o.debug,F=o.settings,j=(0,p.Z)(m).getInstance(),U=(0,Ge.Z)(m).getInstance(),w=o.mssHandler,q=o.errHandler;function B(re){j.trigger(u.Z.INTERNAL_MANIFEST_LOADED,{manifest:re.manifest})}function me(re){var de=null;return re.indexOf("SmoothStreamingMedia")>-1?(w&&(de=w.createMssParser(),w.createMssFragmentProcessor(),w.registerEvents()),de):re.indexOf("MPD")>-1||re.indexOf("Patch")>-1?ns(m).create({debug:A}):de}return r={load:function(re){var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,fe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,G=new Date,ie=new Sa(re,Ze.w.MPD_TYPE);de&&(ie.serviceLocation=de),fe&&(ie.queryParams=fe),ie.requestStartDate||(ie.requestStartDate=G),j.trigger(u.Z.MANIFEST_LOADING_STARTED,{request:ie}),_.load({request:ie,success:function(K,ue,g){var M,L,N;if(I)if(g&&g!==re?(L=U.parseBaseUrl(g),M=g):(U.isRelative(re)&&(re=U.resolve(re,window.location.href)),L=U.parseBaseUrl(re)),ue!="No Content")if(b===null&&(b=me(K)),b!==null){I.setMatchers(b.getMatchers()),I.setIron(b.getIron());try{N=b.parse(K)}catch{return void j.trigger(u.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new te.Z($.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,$.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(re))})}if(N){if(N.url=M||re,N.originalUrl||(N.originalUrl=N.url),F&&F.get().streaming.enableManifestDurationMismatchFix&&N.mediaPresentationDuration&&N.Period_asArray.length>1){var R=N.Period_asArray.reduce(function(Q,Y){return Q+Y.duration},0);!isNaN(R)&&N.mediaPresentationDuration>R&&(l.warn("Media presentation duration greater than duration of all periods. Setting duration to total period duration"),N.mediaPresentationDuration=R)}N.baseUri=L,N.loadedTime=new Date,I.resolveManifestOnLoad(N),j.trigger(u.Z.ORIGINAL_MANIFEST_LOADED,{originalManifest:K})}else j.trigger(u.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new te.Z($.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,$.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(re))})}else j.trigger(u.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new te.Z($.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,$.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(re))});else j.trigger(u.Z.INTERNAL_MANIFEST_LOADED,{manifest:null})},error:function(K,ue,g){j.trigger(u.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new te.Z($.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,$.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+"".concat(re,", ").concat(g))})}})},reset:function(){j.off(u.Z.XLINK_READY,B,r),w&&w.reset(),I&&(I.reset(),I=null),_&&(_.abort(),_=null)}},l=A.getLogger(r),j.on(u.Z.XLINK_READY,B,r),_=zn(m).create({errHandler:o.errHandler,dashMetrics:o.dashMetrics,mediaPlayerModel:o.mediaPlayerModel,requestModifier:o.requestModifier,urlUtils:U,constants:t.Z,dashConstants:e.Z,errors:$,requestTimeout:o.settings.get().streaming.manifestRequestTimeout}),I=xo(m).create({errHandler:q,dashMetrics:o.dashMetrics,mediaPlayerModel:o.mediaPlayerModel,requestModifier:o.requestModifier,settings:o.settings}),b=null,r}Da.__dashjs_factory_name="ManifestLoader";var rs=h.Z.getClassFactory(Da);function Oa(){var o=this.context,r=(0,p.Z)(o).getInstance();return{error:function(l){r.trigger(u.Z.ERROR,{error:l})}}}Oa.__dashjs_factory_name="ErrorHandler";var is=h.Z.getSingletonFactory(Oa),Ma=D(1715);function Pa(){var o,r,l,_,I,b,m=this.context,A=(0,p.Z)(m).getInstance();function F(j,U){if(!U||!U.Period_asArray||U.Period_asArray.length===0)return Promise.resolve();var w=[];return U.Period_asArray.forEach(function(q){w.push(function(B,me){return new Promise(function(re){if(B&&B.AdaptationSet_asArray&&B.AdaptationSet_asArray.length!==0){var de=[];B.AdaptationSet_asArray.forEach(function(fe){r.getIsTypeOf(fe,me)&&de.push(function(G,ie){return new Promise(function(K){if(G.Representation_asArray&&G.Representation_asArray.length!==0){var ue=[],g=[];G.Representation_asArray.forEach(function(M,L){var N=r.getCodec(G,L,!1),R=function(Q,Y,ae){switch(Q){case t.Z.VIDEO:return function(X,P){return{codec:P,width:X.width||null,height:X.height||null,framerate:X.frameRate||null,bitrate:X.bandwidth||null}}(Y,ae);case t.Z.AUDIO:return function(X,P){var se=X.audioSamplingRate||null;return{codec:P,bitrate:X.bandwidth||null,samplerate:se}}(Y,ae);default:return null}}(ie,M,N);g.push(R),ue.push(l.supportsCodec(R,ie))}),Promise.all(ue).then(function(M){G.Representation_asArray=G.Representation_asArray.filter(function(L,N){return M[N]||b.debug("[Stream] Codec ".concat(g[N].codec," not supported ")),M[N]}),K()}).catch(function(){K()})}else K()})}(fe,me))}),Promise.all(de).then(function(){B.AdaptationSet_asArray=B.AdaptationSet_asArray.filter(function(fe){var G=fe.Representation_asArray&&fe.Representation_asArray.length>0;return G||(A.trigger(u.Z.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:fe}),b.warn("AdaptationSet has been removed because of no supported Representation")),G}),re()}).catch(function(){re()})}else re()})}(q,j))}),Promise.all(w)}return o={setConfig:function(j){j&&(j.adapter&&(r=j.adapter),j.capabilities&&(l=j.capabilities),j.settings&&(_=j.settings),j.customParametersModel&&(I=j.customParametersModel))},filterUnsupportedFeatures:function(j){return new Promise(function(U){var w=[];w.push(F(t.Z.VIDEO,j)),w.push(F(t.Z.AUDIO,j)),Promise.all(w).then(function(){_.get().streaming.capabilities.filterUnsupportedEssentialProperties&&function(q){q&&q.Period_asArray&&q.Period_asArray.length!==0&&q.Period_asArray.forEach(function(B){B.AdaptationSet_asArray=B.AdaptationSet_asArray.filter(function(me){return!me.Representation_asArray||me.Representation_asArray.length===0||(me.Representation_asArray=me.Representation_asArray.filter(function(re){var de=r.getEssentialPropertiesForRepresentation(re);if(de&&de.length>0)for(var fe=0;fe<de.length;){if(!l.supportsEssentialProperty(de[fe]))return b.debug("[Stream] EssentialProperty not supported: "+de[fe].schemeIdUri),!1;fe+=1}return!0}),me.Representation_asArray&&me.Representation_asArray.length>0)})})}(j),function(q){var B=I.getCustomCapabilitiesFilters();B&&B.length!==0&&q&&q.Period_asArray&&q.Period_asArray.length!==0&&q.Period_asArray.forEach(function(me){me.AdaptationSet_asArray=me.AdaptationSet_asArray.filter(function(re){return!re.Representation_asArray||re.Representation_asArray.length===0||(re.Representation_asArray=re.Representation_asArray.filter(function(de){return!B.some(function(fe){return!fe(de)})}),re.Representation_asArray&&re.Representation_asArray.length>0)})})}(j),U()}).catch(function(){U()})})}},b=(0,E.Z)(m).getInstance().getLogger(o),o}Pa.__dashjs_factory_name="CapabilitiesFilter";var as=h.Z.getSingletonFactory(Pa),os=function o(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,o),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null};function La(){var o;return{initialize:function(r){if(o=new os,!r)return null;var l=r.indexOf("#");if(l!==-1)for(var _=r.substr(l+1).split("&"),I=0,b=_.length;I<b;++I){var m=_[I],A=m.indexOf("=");if(A!==-1){var F=m.substring(0,A);o.hasOwnProperty(F)&&(o[F]=m.substr(A+1))}}},getURIFragmentData:function(){return o}}}La.__dashjs_factory_name="URIFragmentModel";var ss=h.Z.getSingletonFactory(La);function xa(){var o,r=this.context,l=(0,p.Z)(r).getInstance();return{getValue:function(){return o},setValue:function(_){o=_,_&&l.trigger(u.Z.MANIFEST_LOADED,{data:_})}}}xa.__dashjs_factory_name="ManifestModel";var us=h.Z.getSingletonFactory(xa),zi=-.5;function Fa(){var o,r,l,_,I=this.context,b=(0,Ie.Z)(I).getInstance();function m(j,U){return isNaN(j)?0:j>0?(U&&r.warn("Supplied minimum playback rate is a positive value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):j<zi?(U&&r.warn("Supplied minimum playback rate is out of range and will be limited to ".concat(zi,": ").concat(-50,"% playback speed.")),zi):j}function A(j,U){return isNaN(j)?0:j<0?(U&&r.warn("Supplied maximum playback rate is a negative value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):j>1?(U&&r.warn("Supplied maximum playback rate is out of range and will be limited to ".concat(1,": ").concat(200,"% playback speed.")),1):j}function F(){var j=b.get().streaming.buffer.stableBufferTime>0?b.get().streaming.buffer.stableBufferTime:b.get().streaming.buffer.fastSwitchEnabled?20:12,U=l.getLiveDelay();return!isNaN(U)&&U>0?Math.min(j,U):j}return o={getCatchupMaxDrift:function(){if(!isNaN(b.get().streaming.liveCatchup.maxDrift)&&b.get().streaming.liveCatchup.maxDrift>0)return b.get().streaming.liveCatchup.maxDrift;var j=_.getServiceDescriptionSettings();return j&&j.liveCatchup&&!isNaN(j.liveCatchup.maxDrift)&&j.liveCatchup.maxDrift>0?j.liveCatchup.maxDrift:12},getCatchupModeEnabled:function(){return b.get().streaming.liveCatchup.enabled!==null?b.get().streaming.liveCatchup.enabled:l.getInitialCatchupModeActivated()},getStableBufferTime:F,getInitialBufferLevel:function(){var j=b.get().streaming.buffer.initialBufferLevel;return isNaN(j)||j<0?0:Math.min(F(),j)},getRetryAttemptsForType:function(j){var U=isNaN(b.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:b.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return l.getLowLatencyModeEnabled()?b.get().streaming.retryAttempts[j]*U:b.get().streaming.retryAttempts[j]},getRetryIntervalsForType:function(j){var U=isNaN(b.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:b.get().streaming.retryIntervals.lowLatencyReductionFactor;return l.getLowLatencyModeEnabled()?b.get().streaming.retryIntervals[j]/U:b.get().streaming.retryIntervals[j]},getCatchupPlaybackRates:function(j){var U=b.get().streaming.liveCatchup.playbackRate;if(!isNaN(U.min)||!isNaN(U.max))return{min:m(U.min,j),max:A(U.max,j)};var w=_.getServiceDescriptionSettings();if(w&&w.liveCatchup&&(!isNaN(w.liveCatchup.playbackRate.min)||!isNaN(w.liveCatchup.playbackRate.max))){var q=w.liveCatchup.playbackRate;return{min:m(q.min,j),max:A(q.max,j)}}return{min:-.5,max:.5}},getAbrBitrateParameter:function(j,U){try{var w=b.get().streaming.abr[j][U];if(!isNaN(w)&&w!==-1)return w;var q=_.getServiceDescriptionSettings();return q&&q[j]&&!isNaN(q[j][U])?q[j][U]:-1}catch{return-1}},setConfig:function(j){j.playbackController&&(l=j.playbackController),j.serviceDescriptionController&&(_=j.serviceDescriptionController)},reset:function(){}},r=(0,E.Z)(I).getInstance().getLogger(o),o}Fa.__dashjs_factory_name="MediaPlayerModel";var ls=h.Z.getSingletonFactory(Fa),cs=D(1767);function ka(o){var r=(o=o||{}).abrController,l=o.switchHistory,_=o.droppedFramesHistory,I=o.currentRequest,b=o.useBufferOccupancyABR,m=o.useL2AABR,A=o.useLoLPABR,F=o.streamProcessor?o.streamProcessor.getScheduleController():null,j=o.streamProcessor?o.streamProcessor.getRepresentationInfo():null,U=o.videoModel?o.videoModel:null;function w(){return j?j.mediaInfo:null}return{getMediaType:function(){var q=w();return q?q.type:null},getMediaInfo:w,getDroppedFramesHistory:function(){return _},getCurrentRequest:function(){return I},getSwitchHistory:function(){return l},getStreamInfo:function(){var q=w();return q?q.streamInfo:null},getScheduleController:function(){return F},getAbrController:function(){return r},getRepresentationInfo:function(){return j},useBufferOccupancyABR:function(){return b},useL2AABR:function(){return m},useLoLPABR:function(){return A},getVideoModel:function(){return U}}}ka.__dashjs_factory_name="RulesContext";var Za=h.Z.getClassFactory(ka),Ei=D(2068);function Ua(){var o=[],r=[];return{push:function(l){l.newValue===Ei.Z.NO_CHANGE&&(l.newValue=l.oldValue),o[l.oldValue]||(o[l.oldValue]={noDrops:0,drops:0,dropSize:0});var _=l.newValue-l.oldValue,I=_<0?1:0,b=I?-_:0,m=I?0:1;if(o[l.oldValue].drops+=I,o[l.oldValue].dropSize+=b,o[l.oldValue].noDrops+=m,r.push({idx:l.oldValue,noDrop:m,drop:I,dropSize:b}),r.length>8){var A=r.shift();o[A.idx].drops-=A.drop,o[A.idx].dropSize-=A.dropSize,o[A.idx].noDrops-=A.noDrop}},getSwitchRequests:function(){return o},reset:function(){o=[],r=[]}}}Ua.__dashjs_factory_name="SwitchRequestHistory";var fs=h.Z.getClassFactory(Ua);function Ba(){var o={},r={},l={};return{push:function(_,I,b){if(I){o[_]||(o[_]=[],r[_]=0,l[_]=0);var m=b&&b.droppedVideoFrames?b.droppedVideoFrames:0,A=b&&b.totalVideoFrames?b.totalVideoFrames:0,F=m-r[_];r[_]=m;var j=A-l[_];l[_]=A;var U=o[_];isNaN(I)||(U[I]?(U[I].droppedVideoFrames+=F,U[I].totalVideoFrames+=j):U[I]={droppedVideoFrames:F,totalVideoFrames:j})}},getFrameHistory:function(_){return o[_]},clearForStream:function(_){try{delete o[_],delete r[_],delete l[_]}catch{}},reset:function(){o={},r={},l={}}}}Ba.__dashjs_factory_name="DroppedFramesHistory";var ds=h.Z.getClassFactory(Ba);function Ga(o){var r,l,_,I,b,m=this.context,A=(o=o||{}).settings,F=(0,p.Z)(m).getInstance();function j(re,de,fe,G){var ie=Math.pow(.5,fe/G.fast);re.fastEstimate=(1-ie)*de+ie*re.fastEstimate;var K=Math.pow(.5,fe/G.slow);re.slowEstimate=(1-K)*de+K*re.slowEstimate,re.totalWeight+=fe}function U(re,de,fe){return A.get().streaming.abr.movingAverageMethod!==t.Z.MOVING_AVERAGE_SLIDING_WINDOW?function(G,ie){var K=G?b.throughputHalfLife:b.latencyHalfLife,ue=G?_[ie]:I[ie];if(!ue||ue.totalWeight<=0)return NaN;var g=ue.fastEstimate/(1-Math.pow(.5,ue.totalWeight/K.fast)),M=ue.slowEstimate/(1-Math.pow(.5,ue.totalWeight/K.slow));return G?Math.min(g,M):Math.max(g,M)}(re,de):function(G,ie,K){var ue=function(M,L,N){var R,Q;if(M?(R=r[L],Q=N?3:4):(R=l[L],Q=4),R){if(Q>=R.length)Q=R.length;else if(M)for(var Y=1;Y<Q;++Y){var ae=R[R.length-Y]/R[R.length-Y-1];if((ae>=1.3||ae<=.7692307692307692)&&(Q+=1)===R.length)break}}else Q=0;return Q}(G,ie,K),g=(G?r:l)[ie];return ue!==0&&g&&g.length!==0?(g=g.slice(-ue)).reduce(function(M,L){return M+L})/g.length:NaN}(re,de,fe)}function w(re,de){return U(!0,re,de)}function q(re){r[re]=r[re]||[],l[re]=l[re]||[],_[re]=_[re]||{fastEstimate:0,slowEstimate:0,totalWeight:0},I[re]=I[re]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function B(){r={},l={},_={},I={}}var me={push:function(re,de,fe){if(de.trace&&de.trace.length){var G,ie=de.tresponse.getTime()-de.trequest.getTime()||1,K=de._tfinish.getTime()-de.tresponse.getTime()||1,ue=de.trace.reduce(function(N,R){return N+R.b[0]},0),g=0;if((G=de._fileLoaderType&&de._fileLoaderType===t.Z.FILE_LOADER_TYPES.FETCH?de.trace.reduce(function(N,R){return N+R.d},0):fe?K:ie+K)!==0&&(g=Math.round(8*ue/G)),de.cmsd){var M=de.cmsd.dynamic&&de.cmsd.dynamic.etp?de.cmsd.dynamic.etp:null;if(M){var L=A.get().streaming.cmsd.abr.etpWeightRatio;L>0&&L<=1&&(g=g*(1-L)+M*L)}}if(q(re),function(N,R,Q){return N===t.Z.VIDEO?Q<A.get().streaming.cacheLoadThresholds[t.Z.VIDEO]:N===t.Z.AUDIO?Q<A.get().streaming.cacheLoadThresholds[t.Z.AUDIO]:void 0}(re,0,K)){if(r[re].length>0&&!r[re].hasCachedEntries)return;r[re].hasCachedEntries=!0}else r[re]&&r[re].hasCachedEntries&&function(N){delete r[N],delete l[N],delete _[N],delete I[N],q(N)}(re);r[re].push(g),F.trigger(n.Z.THROUGHPUT_MEASUREMENT_STORED,{throughput:g,mediaType:re,httpRequest:de}),r[re].length>20&&r[re].shift(),l[re].push(ie),l[re].length>20&&l[re].shift(),j(_[re],g,.001*K,b.throughputHalfLife),j(I[re],ie,1,b.latencyHalfLife)}},getAverageThroughput:w,getSafeAverageThroughput:function(re,de){var fe=w(re,de);return isNaN(fe)||(fe*=A.get().streaming.abr.bandwidthSafetyFactor),fe},getAverageLatency:function(re){return U(!1,re)},reset:B};return b={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},B(),me}Ga.__dashjs_factory_name="ThroughputHistory";var gs=h.Z.getClassFactory(Ga);function Wi(){var o,r,l,_,I,b,m,A,F,j,U,w,q,B,me,re,de,fe,G,ie,K,ue,g,M,L,N,R,Q=this.context,Y=(0,E.Z)(Q).getInstance(),ae=(0,p.Z)(Q).getInstance();function X(){I={},b={},A={},m={},ie={},g={},M={},L={},j===void 0&&(j=!1),K&&K.reset(),G=void 0,K=void 0,ue=void 0,clearTimeout(F),F=null}function P(_e){var Be=_e.request.mediaType,ct=_e.streamId;if(Be&&ct&&m[ct]&&R.get().streaming.abr.autoSwitchBitrate[Be]){var le=m[ct][Be];if(le){var Me=Za(Q).create({abrController:o,streamProcessor:le,currentRequest:_e.request,useBufferOccupancyABR:g[Be],useL2AABR:M[Be],useLoLPABR:L[Be],videoModel:B}),Ne=l.shouldAbandonFragment(Me,ct);Ne.quality>Ei.Z.NO_CHANGE&&le.getFragmentModel().getRequests({state:z.FRAGMENT_MODEL_LOADING,index:_e.request.index})[0]&&(A[ct][Be].state=y.Z.ABANDON_LOAD,ie[ct][Be].reset(),ie[ct][Be].push({oldValue:Oe(Be,ct),newValue:Ne.quality,confidence:1,reason:Ne.reason}),we(Be,_.getActiveStreamInfo(),Ne.quality,Ne.reason),clearTimeout(F),F=setTimeout(function(){A[ct][Be].state=y.Z.ALLOW_LOAD,F=null},R.get().streaming.abandonLoadTimeout))}}}function se(_e){_e.mediaType===t.Z.VIDEO&&(G!==void 0&&K.push(_e.streamId,G,B.getPlaybackQuality()),G=_e.newQuality)}function pe(_e){var Be,ct;_e.metric!==y.Z.HTTP_REQUEST||!_e.value||_e.value.type!==Ze.w.MEDIA_SEGMENT_TYPE||_e.mediaType!==t.Z.AUDIO&&_e.mediaType!==t.Z.VIDEO||ue.push(_e.mediaType,_e.value,R.get().streaming.abr.useDeadTimeLatency),_e.metric!==y.Z.BUFFER_LEVEL||_e.mediaType!==t.Z.AUDIO&&_e.mediaType!==t.Z.VIDEO||(Be=_e.mediaType,ct=.001*_e.value.level,R.get().streaming.abr.ABRStrategy===t.Z.ABR_STRATEGY_DYNAMIC&&function(le,Me){try{var Ne=me.getStableBufferTime(),xe=Ne,lt=.5*Ne,dt=g[le],At=Me>(dt?lt:xe);g[le]=At,At!==dt&&(At?r.info("["+le+"] switching from throughput to buffer occupancy ABR rule (buffer: "+Me.toFixed(3)+")."):r.info("["+le+"] switching from buffer occupancy to throughput ABR rule (buffer: "+Me.toFixed(3)+")."))}catch(Pt){r.error(Pt)}}(Be,ct))}function Le(_e,Be){try{var ct;return I[Be]=I[Be]||{},I[Be].hasOwnProperty(_e)||(I[Be][_e]=0),ct=function(le,Me){var Ne=I[Me][le],xe=Ne;if(!m[Me]||!m[Me][le])return xe;var lt=De(le,Me);lt!==void 0&&(xe=Math.max(Ne,lt));var dt=function(At,Pt){try{var Vt=me.getAbrBitrateParameter("maxBitrate",At);return Vt>-1?Xe(m[Pt][At].getMediaInfo(),Vt,Pt):void 0}catch{return}}(le,Me);return dt!==void 0&&(xe=Math.min(xe,dt)),xe}(_e,Be),ct=function(le,Me,Ne){var xe=I[Ne][Me],lt=R.get().streaming.abr.maxRepresentationRatio[Me];return isNaN(lt)||lt>=1||lt<0?le:Math.min(le,Math.round(xe*lt))}(ct,_e,Be),ct=function(le,Me,Ne){if(Me!==t.Z.VIDEO||!R.get().streaming.abr.limitBitrateByPortal||!m[Ne]||!m[Ne][Me])return le;j||Dt();var xe=m[Ne][Me].getStreamInfo(),lt=q.getAdaptationForType(xe.index,Me,xe).Representation_asArray,dt=le;if(U>0&&w>0){for(;dt>0&&lt[dt]&&U<lt[dt].width&&U-lt[dt-1].width<lt[dt].width-U;)dt-=1;for(;dt<lt.length-1&&lt[dt].width===lt[dt+1].width;)dt+=1}return dt}(ct,_e,Be),R.get().streaming.cmsd.enabled&&R.get().streaming.cmsd.abr.applyMb&&(ct=function(le,Me,Ne){if(Me!=="video")return le;var xe=de.getMaxBitrate(Me);if(xe<0)return le;var lt=at(Ne,"audio",Oe("audio",Ne));xe-=lt?lt.bitrate/1e3:0;var dt=Xe(m[Ne][Me].getMediaInfo(),xe,Ne);return r.debug("Stream ID: "+Ne+" ["+Me+"] Apply max bit rate from CMSD: "+xe),Math.min(le,dt)}(ct,_e,Be)),ct}catch{return}}function De(_e,Be){try{return function(ct,le){try{var Me=me.getAbrBitrateParameter("minBitrate",ct);if(Me>-1){var Ne=m[le][ct].getMediaInfo(),xe=$e(Ne),lt=Xe(Ne,Me,le);return xe[lt]&&lt<xe.length-1&&xe[lt].bitrate<1e3*Me&&lt++,lt}return}catch{return}}(_e,Be)}catch{return}}function Oe(_e){var Be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;try{return Be||(Be=_.getActiveStreamInfo().id),_e&&m[Be]&&m[Be][_e]&&Be?(b[Be]=b[Be]||{},b[Be].hasOwnProperty(_e)||(b[Be][_e]=0),b[Be][_e]):0}catch{return 0}}function we(_e,Be,ct){var le=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(Be&&Be.id&&_e){var Me=Be.id,Ne=Oe(_e,Me);(0,W.SE)(ct);var xe=Le(_e,Me);ct!==Ne&&ct>=0&&ct<=xe&&ot(_e,Ne,ct,xe,le,Me)}}function ot(_e,Be,ct,le,Me,Ne){if(_e&&m[Ne]&&m[Ne][_e]){var xe=m[Ne][_e].getStreamInfo(),lt=xe&&xe.manifestInfo&&xe.manifestInfo.isDynamic,dt=N.getCurrentBufferLevel(_e);r.info("Stream ID: "+Ne+" ["+_e+"] switch from "+Be+" to "+ct+"/"+le+" (buffer: "+dt+") "+(Me?JSON.stringify(Me):".")),b[Ne]=b[Ne]||{},b[Ne][_e]=ct;var At=at(Ne,_e,ct);ae.trigger(u.Z.QUALITY_CHANGE_REQUESTED,{oldQuality:Be,newQuality:ct,reason:Me,streamInfo:xe,bitrateInfo:At,maxIdx:le,mediaType:_e},{streamId:xe.id,mediaType:_e});var Pt=ue.getAverageThroughput(_e,lt);isNaN(Pt)||fe.setSavedBitrateSettings(_e,Pt)}}function at(_e,Be,ct){if(Be&&m&&m[_e]&&m[_e][Be]){var le=$e(m[_e][Be].getMediaInfo());return le[ct]?le[ct]:null}return null}function Xe(_e,Be,ct){var le=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,Me=_e&&_e.type?m[ct][_e.type].getRepresentationInfo():null;if(R.get().streaming.abr.useDeadTimeLatency&&le&&Me&&Me.fragmentDuration){le/=1e3;var Ne=Me.fragmentDuration;if(le>Ne)return 0;var xe=le/Ne;Be*=1-xe}for(var lt=$e(_e),dt=lt.length-1;dt>=0;dt--){var At=lt[dt];if(1e3*Be>=At.bitrate)return dt}return 0}function $e(_e){var Be=[];if(!_e||!_e.bitrateList)return Be;for(var ct,le=_e.bitrateList,Me=_e.type,Ne=0,xe=le.length;Ne<xe;Ne++)(ct=new ni).mediaType=Me,ct.qualityIndex=Ne,ct.bitrate=le[Ne].bandwidth,ct.width=le[Ne].width,ct.height=le[Ne].height,ct.scanType=le[Ne].scanType,Be.push(ct);return Be}function Dt(){if(B){var _e=R.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;U=B.getClientWidth()*_e,w=B.getClientHeight()*_e}}return o={initialize:function(){K=ds(Q).create(),ue=gs(Q).create({settings:R}),(l=(0,cs.Z)(Q).create({dashMetrics:N,customParametersModel:re,mediaPlayerModel:me,settings:R})).initialize(),ae.on(n.Z.QUALITY_CHANGE_RENDERED,se,o),ae.on(n.Z.METRIC_ADDED,pe,o),ae.on(u.Z.LOADING_PROGRESS,P,o)},isPlayingAtTopQuality:function(_e){var Be=_e?_e.id:null,ct=Oe(t.Z.AUDIO,Be),le=Oe(t.Z.VIDEO,Be);return ct===Le(t.Z.AUDIO,Be)&&le===Le(t.Z.VIDEO,Be)},updateTopQualityIndex:function(_e){var Be=_e.type,ct=_e.streamInfo.id,le=_e.representationCount-1;return I[ct]=I[ct]||{},I[ct][Be]=le,le},clearDataForStream:function(_e){K&&K.clearForStream(_e),m[_e]&&delete m[_e],ie[_e]&&delete ie[_e],A[_e]&&delete A[_e]},getThroughputHistory:function(){return ue},getBitrateList:$e,getQualityForBitrate:Xe,getTopBitrateInfoFor:function(_e){var Be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(Be||(Be=_.getActiveStreamInfo().id),_e&&m&&m[Be]&&m[Be][_e]){var ct=Le(_e,Be),le=$e(m[Be][_e].getMediaInfo());return le[ct]?le[ct]:null}return null},getMinAllowedIndexFor:De,getMaxAllowedIndexFor:Le,getInitialBitrateFor:function(_e,Be){if(function(){if(!fe||!fe.hasOwnProperty("getSavedBitrateSettings"))throw new Error(t.Z.MISSING_CONFIG_ERROR)}(),_e===t.Z.TEXT)return NaN;var ct=fe.getSavedBitrateSettings(_e),le=me.getAbrBitrateParameter("initialBitrate",_e),Me=R.get().streaming.abr.initialRepresentationRatio[_e];if(le===-1)if(Me>-1){var Ne=m[Be][_e].getStreamInfo(),xe=q.getAdaptationForType(Ne.index,_e,Ne).Representation_asArray;le=Array.isArray(xe)?xe[Math.max(Math.round(xe.length*Me)-1,0)].bandwidth/1e3:0}else le=isNaN(ct)?_e===t.Z.VIDEO?1e3:100:ct;return le},getQualityFor:Oe,getAbandonmentStateFor:function(_e,Be){return A[_e]&&A[_e][Be]?A[_e][Be].state:null},setPlaybackQuality:we,checkPlaybackQuality:function(_e,Be){try{if(!(_e&&m&&m[Be]&&m[Be][_e]))return!1;if(K){var ct=B.getPlaybackQuality();ct&&K.push(Be,G,ct)}if(!R.get().streaming.abr.autoSwitchBitrate[_e])return!1;var le=Oe(_e,Be),Me=Za(Q).create({abrController:o,switchHistory:ie[Be][_e],droppedFramesHistory:K,streamProcessor:m[Be][_e],currentValue:le,useBufferOccupancyABR:g[_e],useL2AABR:M[_e],useLoLPABR:L[_e],videoModel:B}),Ne=De(_e,Be),xe=Le(_e,Be),lt=l.getMaxQuality(Me),dt=lt.quality;return Ne!==void 0&&(dt>Ei.Z.NO_CHANGE?dt:le)<Ne&&(dt=Ne),dt>xe&&(dt=xe),ie[Be][_e].push({oldValue:le,newValue:dt}),dt>Ei.Z.NO_CHANGE&&dt!==le&&(A[Be][_e].state===y.Z.ALLOW_LOAD||dt<le)&&(ot(_e,le,dt,xe,lt.reason,Be),!0)}catch{return!1}},setElementSize:Dt,setWindowResizeEventCalled:function(_e){j=_e},registerStreamType:function(_e,Be){var ct=Be.getStreamInfo().id;m[ct]||(m[ct]={}),ie[ct]||(ie[ct]={}),A[ct]||(A[ct]={}),ie[ct][_e]=fs(Q).create(),m[ct][_e]=Be,A[ct][_e]={},A[ct][_e].state=y.Z.ALLOW_LOAD,function(le){var Me=R.get().streaming.abr.ABRStrategy;Me===t.Z.ABR_STRATEGY_L2A?(g[le]=!1,L[le]=!1,M[le]=!0):Me===t.Z.ABR_STRATEGY_LoLP?(g[le]=!1,L[le]=!0,M[le]=!1):Me===t.Z.ABR_STRATEGY_BOLA?(g[le]=!0,L[le]=!1,M[le]=!1):Me===t.Z.ABR_STRATEGY_THROUGHPUT?(g[le]=!1,L[le]=!1,M[le]=!1):Me===t.Z.ABR_STRATEGY_DYNAMIC&&(g[le]=!(!g||!g[le])&&g[le],L[le]=!1,M[le]=!1)}(_e),_e===t.Z.VIDEO&&Dt()},unRegisterStreamType:function(_e,Be){try{m[_e]&&m[_e][Be]&&delete m[_e][Be],ie[_e]&&ie[_e][Be]&&delete ie[_e][Be],A[_e]&&A[_e][Be]&&delete A[_e][Be]}catch{}},setConfig:function(_e){_e&&(_e.streamController&&(_=_e.streamController),_e.domStorage&&(fe=_e.domStorage),_e.mediaPlayerModel&&(me=_e.mediaPlayerModel),_e.customParametersModel&&(re=_e.customParametersModel),_e.cmsdModel&&(de=_e.cmsdModel),_e.dashMetrics&&(N=_e.dashMetrics),_e.adapter&&(q=_e.adapter),_e.videoModel&&(B=_e.videoModel),_e.settings&&(R=_e.settings))},reset:function(){X(),ae.off(u.Z.LOADING_PROGRESS,P,o),ae.off(n.Z.QUALITY_CHANGE_RENDERED,se,o),ae.off(n.Z.METRIC_ADDED,pe,o),l&&l.reset()}},r=Y.getLogger(o),X(),o}Wi.__dashjs_factory_name="AbrController";var Qi=h.Z.getSingletonFactory(Wi);Qi.QUALITY_DEFAULT=0,h.Z.updateSingletonFactory(Wi.__dashjs_factory_name,Qi);var hs=Qi,ms=new Map([[t.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[t.Z.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[t.Z.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[t.Z.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function qa(){var o,r,l,_,I,b,m,A,F=this.context,j=(0,p.Z)(F).getInstance(),U=[];function w(){l&&(l.playbackRate=1,l.removeEventListener("canplay",w))}function q(){return U.length>0}function B(){if(l&&q()&&l.playbackRate===0){var K=document.createEvent("Event");K.initEvent("waiting",!0,!1),l.dispatchEvent(K)}}function me(K,ue){l&&l.addEventListener(K,ue)}function re(K,ue){l&&l.removeEventListener(K,ue)}function de(){return l?l.readyState:NaN}function fe(){return l?l.buffered:null}function G(K,ue,g,M,L){if(l){for(var N=0;N<l.textTracks.length;N++)if(l.textTracks[N].kind===K&&(!ue||l.textTracks[N].label==ue)&&l.textTracks[N].language===g&&l.textTracks[N].isTTML===M&&l.textTracks[N].isEmbedded===L)return l.textTracks[N]}return null}function ie(K,ue){return K===t.Z.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||de()>=K?(ue(),null):function(g,M){var L=function N(){re(g,N),M(g)};return me(g,L),{func:L,event:g}}(ms.get(K),ue)}return o={addEventListener:me,addTextTrack:function(K,ue,g,M,L){if(!l)return null;var N=G(K,ue,g,M,L);return N||((N=l.addTextTrack(K,ue,g)).isEmbedded=L,N.isTTML=M),N},appendChild:function(K){l&&(l.appendChild(K),K.isTTML!==void 0&&(l.textTracks[l.textTracks.length-1].isTTML=K.isTTML,l.textTracks[l.textTracks.length-1].isEmbedded=K.isEmbedded))},getBufferRange:fe,getClientHeight:function(){return l?l.clientHeight:NaN},getClientWidth:function(){return l?l.clientWidth:NaN},getElement:function(){return l},getEnded:function(){return l?l.ended:null},getPlaybackQuality:function(){if(!l)return null;var K="webkitDroppedFrameCount"in l&&"webkitDecodedFrameCount"in l,ue=null;return"getVideoPlaybackQuality"in l?ue=l.getVideoPlaybackQuality():K&&(ue={droppedVideoFrames:l.webkitDroppedFrameCount,totalVideoFrames:l.webkitDroppedFrameCount+l.webkitDecodedFrameCount,creationTime:new Date}),ue},getPlaybackRate:function(){return l?l.playbackRate:null},getPlayedRanges:function(){return l?l.played:null},getReadyState:de,getSource:function(){return l?l.src:null},getTTMLRenderingDiv:function(){return b},getTextTrack:G,getTextTracks:function(){return l?l.textTracks:[]},getTime:function(){return l?isNaN(_)?l.currentTime:_:null},getVideoHeight:function(){return l?l.videoHeight:NaN},getVideoRelativeOffsetLeft:function(){if(l){var K=l.parentNode.host||l.parentNode;return K?l.getBoundingClientRect().left-K.getBoundingClientRect().left:NaN}return NaN},getVideoRelativeOffsetTop:function(){if(l){var K=l.parentNode.host||l.parentNode;return K?l.getBoundingClientRect().top-K.getBoundingClientRect().top:NaN}return NaN},getVideoWidth:function(){return l?l.videoWidth:NaN},getVttRenderingDiv:function(){return m},initialize:function(){j.on(u.Z.PLAYBACK_PLAYING,B,this)},isPaused:function(){return l?l.paused:null},isSeeking:function(){return l?l.seeking||!isNaN(_):null},isStalled:q,pause:function(){l&&(l.pause(),l.autoplay=!1)},play:function(){if(l){l.autoplay=!0;var K=l.play();K&&K.catch&&typeof Promise<"u"&&K.catch(function(ue){ue.name==="NotAllowedError"&&j.trigger(u.Z.PLAYBACK_NOT_ALLOWED),r.warn("Caught pending play exception - continuing (".concat(ue,")"))})}},removeChild:function(K){l&&l.removeChild(K)},removeEventListener:re,reset:function(){clearTimeout(A),j.off(u.Z.PLAYBACK_PLAYING,B,this)},setCurrentTime:function(K,ue){l&&(I&&I.func&&I.event&&re(I.event,I.func),_=K,I=ie(t.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){if(l)if(l.currentTime!==_)try{_=ue?function(g){var M=fe(),L=g,N=9999999999;if(M)for(var R=0;R<M.length;R++){var Q=M.start(R),Y=M.end(R),ae=Math.abs(Q-g),X=Math.abs(Y-g);if(g>=Q&&g<=Y)return g;ae<N&&(N=ae,L=Q),X<N&&(N=X,L=Y)}return L}(_):_,isNaN(_)||(l.currentTime=_),_=NaN}catch(g){l.readyState===0&&g.code===g.INVALID_STATE_ERR&&(A=setTimeout(function(){l.currentTime=_,_=NaN},400))}else _=NaN}))},setElement:function(K){if(!(K==null||K&&/^(VIDEO|AUDIO)$/i.test(K.nodeName)))throw"element is not video or audio DOM type!";(l=K)&&(l.preload="auto")},setPlaybackRate:function(K){var ue=arguments.length>1&&arguments[1]!==void 0&&arguments[1];l&&(!ue&&l.readyState<=2&&K>0?l.addEventListener("canplay",w):l.playbackRate=K)},setSource:function(K){l&&(K?l.src=K:(l.removeAttribute("src"),l.load()))},setStallState:function(K,ue){(function(g,M){M?function(L){L!==null&&l&&!l.seeking&&U.indexOf(L)===-1&&U.push(L)}(g):function(L){var N=U.indexOf(L);L!==null&&N!==-1&&U.splice(N,1)}(g)})(K,ue)},setTTMLRenderingDiv:function(K){(b=K).style.position="absolute",b.style.display="flex",b.style.overflow="hidden",b.style.pointerEvents="none",b.style.top=0,b.style.left=0},setVttRenderingDiv:function(K){m=K},waitForReadyState:ie,setDisableRemotePlayback:function(K){l&&(l.disableRemotePlayback=K)}},r=(0,E.Z)(F).getInstance().getLogger(o),_=NaN,o}qa.__dashjs_factory_name="VideoModel";var ps=h.Z.getSingletonFactory(qa),ys=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],Ya="dashjs_?_bitrate",ja="dashjs_?_settings",kr="localStorage",Ha="lastBitrate",Va="lastMediaSettings";function Ka(o){o=o||{};var r,l,_,I=this.context,b=o.settings;function m(U){if(_!==void 0)return _;var w;_=!1;try{typeof window<"u"&&(w=window[U])}catch(q){return l.warn("DOMStorage access denied: "+q.message),_}if(!w||U!==kr&&U!=="sessionStorage")return _;try{w.setItem("1","1"),w.removeItem("1"),_=!0}catch(q){l.warn("DOMStorage is supported, but cannot be used: "+q.message)}return _}function A(){var U=6e5;return Math.round(new Date().getTime()/U)*U}function F(U,w){return m(U)&&b.get().streaming[w+"CachingInfo"].enabled}function j(){if(!b)throw new Error(t.Z.MISSING_CONFIG_ERROR)}return r={getSavedBitrateSettings:function(U){if(j(),!b.get().streaming.lastBitrateCachingInfo.enabled)return NaN;var w=NaN;if(F(kr,Ha)){var q=Ya.replace(/\?/,U);try{var B=JSON.parse(localStorage.getItem(q))||{},me=new Date().getTime()-parseInt(B.timestamp,10)>=b.get().streaming.lastBitrateCachingInfo.ttl||!1,re=parseFloat(B.bitrate);isNaN(re)||me?me&&localStorage.removeItem(q):(w=re,l.debug("Last saved bitrate for "+U+" was "+re))}catch{return null}}return w},setSavedBitrateSettings:function(U,w){if(F(kr,Ha)&&w){var q=Ya.replace(/\?/,U);try{localStorage.setItem(q,JSON.stringify({bitrate:w.toFixed(3),timestamp:A()}))}catch(B){l.error(B.message)}}},getSavedMediaSettings:function(U){if(j(),!b.get().streaming.lastMediaSettingsCachingInfo.enabled)return null;var w=null;if(F(kr,Va)){var q=ja.replace(/\?/,U);try{var B=JSON.parse(localStorage.getItem(q))||{},me=new Date().getTime()-parseInt(B.timestamp,10)>=b.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;w=B.settings,me&&(localStorage.removeItem(q),w=null)}catch{return null}}return w},setSavedMediaSettings:function(U,w){if(F(kr,Va)){var q=ja.replace(/\?/,U);try{localStorage.setItem(q,JSON.stringify({settings:w,timestamp:A()}))}catch(B){l.error(B.message)}}}},l=(0,E.Z)(I).getInstance().getLogger(r),m(kr)&&ys.forEach(function(U){var w=localStorage.getItem(U.oldKey);if(w){localStorage.removeItem(U.oldKey);try{localStorage.setItem(U.newKey,w)}catch(q){l.error(q.message)}}}),r}Ka.__dashjs_factory_name="DOMStorage";var Es=h.Z.getSingletonFactory(Ka),vs=D(2032),za=D(2011);function Wa(){var o,r,l,_,I,b,m,A,F,j,U,w,q,B=this.context;function me(G,ie,K,ue){var g=null,M=G?q.resolve(G.path):null,L=ue||{init:!0,url:M?M.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:ie};r.debug("Start searching for initialization.");var N=fe(L);A.load({request:N,success:function(R){if(L.bytesLoaded=L.range.end,!(g=_.findInitRange(R)))return L.range.end=L.bytesLoaded+L.bytesToLoad,me(G,ie,K,L);G.range=g,K(G)},error:function(){K(G)}}),r.debug("Perform init search: "+L.url)}function re(G,ie,K,ue,g,M){if(K&&(K.start===void 0||K.end===void 0)){var L=K?K.toString().split("-"):null;K=L?{start:parseFloat(L[0]),end:parseFloat(L[1])}:null}g=g||de;var N=null,R=null,Q=!!K,Y=G?q.resolve(G.path):null,ae={init:!1,url:Y?Y.url:void 0,range:Q?K:{start:0,end:1500},searching:!Q,bytesLoaded:M?M.bytesLoaded:0,bytesToLoad:1500,mediaType:ie},X=fe(ae);A.load({request:X,success:function(P){var se=ae.bytesToLoad,pe=P.byteLength;if(ae.bytesLoaded=ae.range.end-ae.range.start,N=_.parse(P),(R=N.getBox("sidx"))&&R.isComplete){var Le,De,Oe=R.references;if(Oe!=null&&Oe.length>0&&(Le=Oe[0].reference_type===1),Le){var we,ot,at,Xe;r.debug("Initiate multiple SIDX load."),ae.range.end=ae.range.start+R.size;var $e=[],Dt=0,_e=(R.offset||ae.range.start)+R.size,Be=function(le){le?($e=$e.concat(le),++Dt>=ot&&($e.sort(function(Me,Ne){return Me.startTime-Ne.startTime<0?-1:0}),g($e,G,ue))):g(null,G,ue)};for(we=0,ot=Oe.length;we<ot;we++)at=_e,Xe=_e+Oe[we].referenced_size-1,_e+=Oe[we].referenced_size,re(G,ie,{start:at,end:Xe},ue,Be,ae)}else r.debug("Parsing segments from SIDX. representation "+ie+" - id: "+G.id+" for range : "+ae.range.start+" - "+ae.range.end),De=function(le,Me){for(var Ne,xe,lt,dt,At=le.references,Pt=At.length,Vt=le.timescale,Wt=le.earliest_presentation_time,qt=Me.range.start+le.offset+le.first_offset+le.size,Xt=[],Ht=0;Ht<Pt;Ht++)lt=At[Ht].subsegment_duration,dt=At[Ht].referenced_size,(Ne=new za.Z).duration=lt,Ne.startTime=Wt,Ne.timescale=Vt,xe=qt+dt-1,Ne.mediaRange=qt+"-"+xe,Xt.push(Ne),Wt+=lt,qt+=dt;return Xt}(R,ae),g(De,G,ue)}else{if(R)ae.range.start=R.offset||ae.range.start,ae.range.end=ae.range.start+(R.size||se);else{if(pe<ae.bytesLoaded)return void g(null,G,ue);var ct=N.getLastBox();ct&&ct.size?(ae.range.start=ct.offset+ct.size,ae.range.end=ae.range.start+se):ae.range.end+=se}re(G,ie,ae.range,ue,null,ae)}},error:function(){g(null,G,ue)}}),r.debug("Perform SIDX load for type ".concat(ie," : ").concat(ae.url," with range ").concat(ae.range.start," - ").concat(ae.range.end))}function de(G,ie,K){K({segments:G,representation:ie,error:G?void 0:new te.Z(F.SEGMENT_BASE_LOADER_ERROR_CODE,F.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function fe(G){if(G.url){var ie=new C.Z;return ie.setInfo(G),ie}}return o={setConfig:function(G){G.baseURLController&&(q=G.baseURLController),G.dashMetrics&&(b=G.dashMetrics),G.mediaPlayerModel&&(m=G.mediaPlayerModel),G.errHandler&&(l=G.errHandler),G.boxParser&&(_=G.boxParser),G.debug&&(r=G.debug.getLogger(o)),G.requestModifier&&(I=G.requestModifier),G.errors&&(F=G.errors),G.urlUtils&&(w=G.urlUtils),G.constants&&(j=G.constants),G.dashConstants&&(U=G.dashConstants)},initialize:function(){A=zn(B).create({errHandler:l,dashMetrics:b,mediaPlayerModel:m,requestModifier:I,boxParser:_,errors:F,urlUtils:w,constants:j,dashConstants:U})},loadInitialization:function(G,ie){return new Promise(function(K){me(G,ie,K)})},loadSegments:function(G,ie,K){return new Promise(function(ue){re(G,ie,K,ue)})},reset:function(){A&&(A.abort(),A=null)}}}Wa.__dashjs_factory_name="SegmentBaseLoader";var _s=h.Z.getSingletonFactory(Wa);function Qa(o){var r;o=o||{};var l=new DataView(o.data),_=0;function I(m,A){var F=!0,j=0;if(A===void 0&&(A=!1),m.tag>16777215?(l.getUint32(_)!==m.tag&&(F=!1),j=4):m.tag>65535?(256*l.getUint16(_)+l.getUint8(_+2)!==m.tag&&(F=!1),j=3):m.tag>255?(l.getUint16(_)!==m.tag&&(F=!1),j=2):(l.getUint8(_)!==m.tag&&(F=!1),j=1),!F&&m.required&&!A)throw new Error("required tag not found");return F&&(_+=j),F}function b(m){var A=1,F=128,j=-1,U=0,w=l.getUint8(_),q=0;for(q=0;q<8;q+=1){if((w&F)===F){U=m===void 0?w&~F:w,j=q;break}F>>=1}for(q=0;q<j;q+=1,A+=1)U=U<<8|255&l.getUint8(_+A);return _+=A,U}return r={getPos:function(){return _},setPos:function(m){_=m},consumeTag:I,consumeTagAndSize:function(m,A){var F=I(m,A);return F&&b(),F},parseTag:function(m){var A;return I(m),A=b(),r[m.parse](A)},skipOverElement:function(m,A){var F,j=I(m,A);return j&&(F=b(),_+=F),j},getMatroskaCodedNum:b,getMatroskaFloat:function(m){var A;switch(m){case 4:A=l.getFloat32(_),_+=4;break;case 8:A=l.getFloat64(_),_+=8}return A},getMatroskaUint:function(m){if(m>4)return function(j){for(var U=Math.floor(Number.MAX_SAFE_INTEGER/256),w=0,q=0;q<j;q+=1){if(w>U)throw new Error("Value exceeds safe integer limit");w*=256;var B=l.getUint8(_+q);if(w>Number.MAX_SAFE_INTEGER-B)throw new Error("Value exceeds safe integer limit");w+=B}return _+=j,w}(m);for(var A=0,F=0;F<m;F+=1)A<<=8,A|=255&l.getUint8(_+F);return _+=m,A>>>0},moreData:function(){return _<l.byteLength}}}Qa.__dashjs_factory_name="EBMLParser";var Xa=h.Z.getClassFactory(Qa);function Ja(){var o,r,l,_,I,b,m,A,F,j,U=this.context;function w(q){var B=new C.Z;return B.setInfo(q),B}return o={setConfig:function(q){if(!(q.baseURLController&&q.dashMetrics&&q.mediaPlayerModel&&q.errHandler))throw new Error(t.Z.MISSING_CONFIG_ERROR);j=q.baseURLController,b=q.dashMetrics,m=q.mediaPlayerModel,_=q.errHandler,F=q.errors,r=q.debug.getLogger(o),I=q.requestModifier},initialize:function(){A=zn(U).create({errHandler:_,dashMetrics:b,mediaPlayerModel:m,requestModifier:I,errors:F})},loadInitialization:function(q,B){return new Promise(function(me){var re=null,de=q?j.resolve(q.path):null,fe=q?q.range.split("-"):null,G={range:{start:fe?parseFloat(fe[0]):null,end:fe?parseFloat(fe[1]):null},request:re,url:de?de.url:void 0,init:!0,mediaType:B};r.info("Start loading initialization."),re=w(G),A.load({request:re,success:function(){me(q)},error:function(){me(q)}}),r.debug("Perform init load: "+G.url)})},loadSegments:function(q,B,me){return new Promise(function(re){var de=null,fe=q?j.resolve(q.path):null,G=fe?fe.url:void 0;de=w({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:de,url:G,init:!1,mediaType:B}),r.debug("Parsing ebml header"),A.load({request:de,success:function(ie){(function(K,ue,g,M){if(K&&K.byteLength!==0){var L,N,R,Q,Y=Xa(U).create({data:K}),ae=g?g.split("-"):null,X=null,P={url:ue,range:{start:ae?parseFloat(ae[0]):null,end:ae?parseFloat(ae[1]):null},request:X};for(r.debug("Parse EBML header: "+P.url),Y.skipOverElement(l.EBML),Y.consumeTag(l.Segment),R=Y.getMatroskaCodedNum(),R+=Y.getPos(),Q=Y.getPos();Y.moreData()&&!Y.consumeTagAndSize(l.Segment.Info,!0);)if(!(Y.skipOverElement(l.Segment.SeekHead,!0)||Y.skipOverElement(l.Segment.Tracks,!0)||Y.skipOverElement(l.Segment.Cues,!0)||Y.skipOverElement(l.Void,!0)))throw new Error("no valid top level element found");for(;L===void 0;){var se=Y.getMatroskaCodedNum(!0),pe=Y.getMatroskaCodedNum();se===l.Segment.Info.Duration.tag?L=Y[l.Segment.Info.Duration.parse](pe):Y.setPos(Y.getPos()+pe)}X=w(P),A.load({request:X,success:function(Le){N=function(De,Oe,we,ot){var at,Xe,$e,Dt,_e,Be,ct,le;for($e=[],_e=0,Be=(Xe=function(Me){var Ne,xe,lt=[],dt=Xa(U).create({data:Me});for(dt.consumeTagAndSize(l.Segment.Cues);dt.moreData()&&dt.consumeTagAndSize(l.Segment.Cues.CuePoint,!0);){for((Ne={}).CueTime=dt.parseTag(l.Segment.Cues.CuePoint.CueTime),Ne.CueTracks=[];dt.moreData()&&dt.consumeTag(l.Segment.Cues.CuePoint.CueTrackPositions,!0);){var At=dt.getMatroskaCodedNum(),Pt=dt.getPos();if((xe={}).Track=dt.parseTag(l.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),xe.Track===0)throw new Error("Cue track cannot be 0");xe.ClusterPosition=dt.parseTag(l.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),Ne.CueTracks.push(xe),dt.setPos(Pt+At)}if(Ne.CueTracks.length===0)throw new Error("Mandatory cuetrack not found");lt.push(Ne)}if(lt.length===0)throw new Error("mandatory cuepoint not found");return lt}(De)).length;_e<Be;_e+=1)Dt=new za.Z,at=_e<Xe.length-1?Xe[_e+1].CueTime-Xe[_e].CueTime:ot-Xe[_e].CueTime,Dt.duration=at,Dt.startTime=Xe[_e].CueTime,Dt.timescale=1e3,ct=Xe[_e].CueTracks[0].ClusterPosition+Oe,le=_e<Xe.length-1?Xe[_e+1].CueTracks[0].ClusterPosition+Oe-1:we-1,Dt.mediaRange=ct+"-"+le,$e.push(Dt);return r.debug("Parsed cues: "+$e.length+" cues."),$e}(Le,Q,R,L),M(N)},error:function(){r.error("Download Error: Cues "+P.url),M(null)}}),r.debug("Perform cues load: "+P.url+" bytes="+P.range.start+"-"+P.range.end)}else M(null)})(ie,G,me,function(K){re({segments:K,representation:q,error:K?void 0:new te.Z(F.SEGMENT_BASE_LOADER_ERROR_CODE,F.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})})},error:function(){re({representation:q,error:new te.Z(F.SEGMENT_BASE_LOADER_ERROR_CODE,F.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})})},reset:function(){A&&(A.abort(),A=null)}},l={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},o}Ja.__dashjs_factory_name="WebmSegmentBaseLoader";var Ts=h.Z.getSingletonFactory(Ja);function $a(o){o=o||{};var r,l,_,I=this.context,b=o.eventBus,m=o.events,A=o.dashMetrics,F=o.mediaPlayerModel,j=o.errHandler,U=o.baseURLController,w=o.debug,q=o.boxParser,B=o.requestModifier,me=o.errors;function re(de){return(de?de.split("/")[1]:"").toLowerCase()==="webm"}return r={initialize:function(){l.initialize(),_.initialize()},getSegmentBaseInitSegment:function(de){return re(de.representation.mimeType)?_.loadInitialization(de.representation,de.mediaType):l.loadInitialization(de.representation,de.mediaType)},getSegmentList:function(de){return re(de.mimeType)?_.loadSegments(de.representation,de.mediaType,de.representation?de.representation.indexRange:null):l.loadSegments(de.representation,de.mediaType,de.representation?de.representation.indexRange:null)},reset:function(){l.reset(),_.reset()}},l=_s(I).getInstance(),_=Ts(I).getInstance(),l.setConfig({baseURLController:U,dashMetrics:A,mediaPlayerModel:F,errHandler:j,eventBus:b,events:m,errors:me,debug:w,boxParser:q,requestModifier:B}),_.setConfig({baseURLController:U,dashMetrics:A,mediaPlayerModel:F,errHandler:j,eventBus:b,events:m,errors:me,debug:w,requestModifier:B}),r}$a.__dashjs_factory_name="SegmentBaseController";var Ss=h.Z.getSingletonFactory($a),eo=function o(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,o),this.id=null,this.quality=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null},Xi=function o(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,o),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.labels=null,this.lang=null,this.viewpoint=null,this.viewpointsWithSchemeIdUri=null,this.accessibility=null,this.accessibilitiesWithSchemeIdUri=null,this.audioChannelConfiguration=null,this.audioChannelConfigurationsWithSchemeIdUri=null,this.roles=null,this.rolesWithSchemeIdUri=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null,this.isFragmented=null,this.isEmbedded=null,this.selectionPriority=1,this.supplementalProperties={},this.supplementalPropertiesAsArray=[],this.segmentAlignment=!1,this.subSegmentAlignment=!1},to=function o(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,o),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0},bs=function o(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,o),this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null,this.serviceDescriptions=[],this.protocol=null};function As(o,r){for(var l=0;l<r.length;l++){var _=r[l];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(o,_.key,_)}}var Is=function(){function o(_){var I=this;(function(b,m){if(!(b instanceof m))throw new TypeError("Cannot call a class as a function")})(this,o),this.valid=_[0]=="/",this.path=_.split("/").filter(function(b){return b.length!==0}).map(function(b){var m={name:b},A=b.indexOf("[");if(A!=-1){m.name=b.substring(0,A);var F=b.substring(A+1,b.length-1);I.valid=I.valid&&F.indexOf("[")==-1;var j=F.indexOf("=");j!=-1?(m.attribute={name:F.substring(1,j),value:F.substring(j+1)},["'",'"'].indexOf(m.attribute.value[0])!=-1&&(m.attribute.value=m.attribute.value.substring(1,m.attribute.value.length-1))):m.position=parseInt(F,10)-1}return m})}var r,l;return r=o,(l=[{key:"isValid",value:function(){return this.valid}},{key:"findsElement",value:function(){return!this.findsAttribute()}},{key:"findsAttribute",value:function(){return this.path[this.path.length-1].name.startsWith("@")}},{key:"findsTextReplace",value:function(){return this.path[this.path.length-1].name==="text()"}},{key:"getMpdTarget",value:function(_,I){for(var b=null,m=_,A=1,F="MPD";A<this.path.length&&m!==null;){b=m;var j=this.path[A];if(F=j.name,A!==this.path.length-1||!F.startsWith("@")&&F!=="text()"){var U=b[F+"_asArray"]||[];U.length===0&&b[F]&&U.push(b[F]),j.position?m=U[j.position]||null:j.attribute?function(){var w=j.attribute;m=U.filter(function(q){return q[w.name]==w.value})[0]||null}():m=U[0]||null}A++}return m===null?null:F.startsWith("@")?{name:F.substring(1),leaf:m,target:m}:F==="text()"?{name:"__text",leaf:m,target:m}:{name:F,leaf:m,target:I?b:m}}}])&&As(r.prototype,l),o}();function Rs(o,r){for(var l=0;l<r.length;l++){var _=r[l];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(o,_.key,_)}}var ws=function(){function o(_,I,b){(function(m,A){if(!(m instanceof A))throw new TypeError("Cannot call a class as a function")})(this,o),this.action=_,this.xpath=I,this.value=b,this.position=null}var r,l;return r=o,(l=[{key:"getMpdTarget",value:function(_){var I=this.action==="remove"||this.action==="replace"||this.position==="before"||this.position==="after";return this.xpath.getMpdTarget(_,I)}}])&&Rs(r.prototype,l),o}();function no(){var o,r,l=this.context;return o={getIsPatch:function(_){return _&&_.hasOwnProperty(e.Z.ORIGINAL_MPD_ID)||!1},getPublishTime:function(_){return _&&_.hasOwnProperty(e.Z.PUBLISH_TIME)?new Date(_[e.Z.PUBLISH_TIME]):null},getOriginalPublishTime:function(_){return _&&_.hasOwnProperty(e.Z.ORIGINAL_PUBLISH_TIME)?new Date(_[e.Z.ORIGINAL_PUBLISH_TIME]):null},getMpdId:function(_){return _&&_[e.Z.ORIGINAL_MPD_ID]||null},getPatchOperations:function(_){return _?(_.__children||[]).map(function(I){var b=Object.keys(I)[0];if(b!=="add"&&b!=="remove"&&b!=="replace")return r.warn("Ignoring node of invalid action: ".concat(b)),null;var m=I[b],A=m.sel;if(b==="add"&&m.type){if(!m.type.startsWith("@"))return r.warn("Ignoring add action for prefixed namespace declaration: ".concat(m.type,"=").concat(m.__text)),null;A="".concat(A,"/").concat(m.type)}var F=new Is(A);if(!F.isValid())return r.warn("Ignoring action with invalid selector: ".concat(b," - ").concat(A)),null;var j=null;F.findsAttribute()||F.findsTextReplace()?j=m.__text||"":b!=="remove"&&(j=m.__children.reduce(function(w,q){var B=Object.keys(q)[0];return B!=="#text"&&(w[B]=w[B]||[],w[B].push(q[B])),w},{}));var U=new ws(b,F,j);return b==="add"&&(U.position=m.pos),U}).filter(function(I){return!!I}):[]}},r=(0,E.Z)(l).getInstance().getLogger(o),o}no.__dashjs_factory_name="PatchManifestModel";var Ns=h.Z.getSingletonFactory(no);function ro(){var o,r,l,_,I,b,m,A=this.context;function F(L,N,R){var Q,Y=r.getAdaptationsForType(_[0].mpd.manifest,L,N);if(!Y||Y.length===0)return null;if(Y.length>1&&R){var ae=w(R,N);if(I[R.id]&&I[R.id][N]){for(var X=0,P=Y.length;X<P;X++)if(j(I[R.id][N],ae[X]))return Y[X]}for(var se=0,pe=Y.length;se<pe;se++)if(Q=Y[se],r.getRolesForAdaptation(Q).filter(function(Le){return Le.value===e.Z.MAIN})[0])return Y[se]}return Y[0]}function j(L,N){if(!L||!N)return!1;var R=L.id===N.id,Q=L.codec===N.codec,Y=L.viewpoint===N.viewpoint,ae=JSON.stringify(L.viewpointsWithSchemeIdUri)===JSON.stringify(N.viewpointsWithSchemeIdUri),X=L.lang===N.lang,P=L.roles.toString()===N.roles.toString(),se=JSON.stringify(L.rolesWithSchemeIdUri)===JSON.stringify(N.rolesWithSchemeIdUri),pe=L.accessibility.toString()===N.accessibility.toString(),Le=JSON.stringify(L.accessibilitiesWithSchemeIdUri)===JSON.stringify(N.accessibilitiesWithSchemeIdUri),De=L.audioChannelConfiguration.toString()===N.audioChannelConfiguration.toString(),Oe=JSON.stringify(L.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(N.audioChannelConfigurationsWithSchemeIdUri);return R&&Q&&Y&&ae&&X&&P&&se&&pe&&Le&&De&&Oe}function U(L,N,R,Q,Y,ae){var X,P,se,pe,Le,De,Oe=[];if(!Q||Q.length===0)return[];var we=r.getAdaptationsForPeriod(N);for(pe=0,De=Q.length;pe<De;pe++)if(X=Q[pe],P=G(we[se=r.getIndexForAdaptation(X,L,R.index)]),ae){var ot=P.accessibility.length;for(Le=0;Le<ot;Le++)if(P){var at=P.accessibility[Le];if(at.indexOf("cea-608:")===0){var Xe=at.substring(8).split(";");if(Xe[0].substring(0,2)==="CC")for(Le=0;Le<Xe.length;Le++)P||(P=G.call(this,we[se])),ie(P,Xe[Le].substring(0,3),Xe[Le].substring(4)),Oe.push(P),P=null;else for(Le=0;Le<Xe.length;Le++)P||(P=G.call(this,we[se])),ie(P,"CC"+(Le+1),Xe[Le]),Oe.push(P),P=null}else at.indexOf("cea-608")===0&&(ie(P,b.CC1,"eng"),Oe.push(P),P=null)}}else Y===b.IMAGE?(P.type=b.IMAGE,Oe.push(P),P=null):P&&Oe.push(P);return Oe}function w(L,N,R){var Q=_,Y=R,ae=[];if(Y)ue(),Q=q(Y);else{if(!(_.length>0))return ae;Y=_[0].mpd.manifest}var X=fe(L,Q),P=r.getAdaptationsForType(Y,L?L.index:null,N);return ae=U(Y,X,L,P,N),N===b.TEXT&&(P=r.getAdaptationsForType(Y,L?L.index:null,b.VIDEO),ae=ae.concat(U(Y,X,L,P,N,!0))),ae}function q(L){var N=B(L);return r.getRegularPeriods(N)}function B(L){var N=re(L);return r.getMpd(N)}function me(){_=[],I={}}function re(L){return L||(_.length>0?_[0].mpd.manifest:null)}function de(L){try{var N=fe(L.streamInfo,_),R=r.getAdaptationsForPeriod(N);return L&&L.streamInfo&&L.streamInfo.id!==void 0&&R?R[L.index]:null}catch{return null}}function fe(L,N){for(var R=N.length,Q=0;Q<R;Q++){var Y=N[Q];if(L&&L.id===Y.id)return Y}return null}function G(L){if(!L)return null;var N,R,Q,Y,ae,X=new Xi,P=L.period.mpd.manifest.Period_asArray[L.period.index].AdaptationSet_asArray[L.index];if(X.id=L.id,X.index=L.index,X.type=L.type,X.streamInfo=K(L.period),X.representationCount=r.getRepresentationCount(P),X.labels=r.getLabelsForAdaptation(P),X.lang=r.getLanguageForAdaptation(P),X.segmentAlignment=r.getSegmentAlignment(P),X.subSegmentAlignment=r.getSubSegmentAlignment(P),N=r.getViewpointForAdaptation(P),X.viewpoint=N.length?N[0].value:void 0,X.viewpointsWithSchemeIdUri=N,ae=r.getAccessibilityForAdaptation(P),X.accessibility=ae.map(function(Oe){var we=Oe.value,ot=we;return Oe.schemeIdUri&&Oe.schemeIdUri.search("cea-608")>=0&&m!==void 0&&(ot=we?"cea-608:"+we:"cea-608",X.embeddedCaptions=!0),ot}),X.accessibilitiesWithSchemeIdUri=ae,R=r.getAudioChannelConfigurationForAdaptation(P),X.audioChannelConfiguration=R.map(function(Oe){return Oe.value}),X.audioChannelConfigurationsWithSchemeIdUri=R,X.audioChannelConfiguration.length===0&&Array.isArray(P.Representation_asArray)&&P.Representation_asArray.length>0&&(Q=r.getAudioChannelConfigurationForRepresentation(P.Representation_asArray[0]),X.audioChannelConfiguration=Q.map(function(Oe){return Oe.value}),X.audioChannelConfigurationsWithSchemeIdUri=Q),Y=r.getRolesForAdaptation(P),X.roles=Y.map(function(Oe){return Oe.value}),X.rolesWithSchemeIdUri=Y,X.codec=r.getCodec(P),X.mimeType=r.getMimeType(P),X.contentProtection=r.getContentProtectionData(P),X.bitrateList=r.getBitrateListForAdaptation(P),X.selectionPriority=r.getSelectionPriority(P),X.contentProtection){var se=X.contentProtection.map(function(Oe){return r.getKID(Oe)}).filter(function(Oe){return Oe!==null});if(se.length){var pe=se[0];X.contentProtection.forEach(function(Oe){Oe.keyId=pe})}}if(X.isText=r.getIsText(P),X.supplementalProperties=r.getSupplementalPropertiesForAdaptation(P),(!X.supplementalProperties||Object.keys(X.supplementalProperties).length===0)&&Array.isArray(P.Representation_asArray)&&P.Representation_asArray.length>0){var Le=P.Representation_asArray.map(function(Oe){return r.getSupplementalPropertiesForRepresentation(Oe)});Le.every(function(Oe){return JSON.stringify(Oe)===JSON.stringify(Le[0])})&&(X.supplementalProperties=Le[0])}if(X.supplementalPropertiesAsArray=r.getSupplementalPropertiesAsArrayForAdaptation(P),(!X.supplementalPropertiesAsArray||X.supplementalPropertiesAsArray.length===0)&&Array.isArray(P.Representation_asArray)&&P.Representation_asArray.length>0){var De=P.Representation_asArray.map(function(Oe){return r.getSupplementalPropertiesAsArrayForRepresentation(Oe)});De.every(function(Oe){return JSON.stringify(Oe)===JSON.stringify(De[0])})&&(X.supplementalPropertiesAsArray=De[0])}return X.isFragmented=r.getIsFragmented(P),X.isEmbedded=!1,X}function ie(L,N,R){L.id=N,L.index=100+parseInt(N.substring(2,3)),L.type=b.TEXT,L.codec="cea-608-in-SEI",L.isEmbedded=!0,L.isFragmented=!1;var Q=ui()(R);L.lang=Q||R,L.roles=["caption"],L.rolesWithSchemeIdUri=[{schemeIdUri:"urn:mpeg:dash:role:2011",value:"caption"}]}function K(L){var N,R,Q=new to;return Q.id=L.id,Q.index=L.index,Q.start=L.start,Q.duration=L.duration,Q.manifestInfo=(N=L.mpd,(R=new bs).dvrWindowSize=N.timeShiftBufferDepth,R.loadedTime=N.manifest.loadedTime,R.availableFrom=N.availabilityStartTime,R.minBufferTime=N.manifest.minBufferTime,R.maxFragmentDuration=N.maxSegmentDuration,R.duration=r.getDuration(N.manifest),R.isDynamic=r.getIsDynamic(N.manifest),R.serviceDescriptions=r.getServiceDescriptions(N.manifest),R.protocol=N.manifest.protocol,R),Q.isLast=L.mpd.manifest.Period_asArray.length===1||Math.abs(Q.start+Q.duration-Q.manifestInfo.duration)<1,Q}function ue(){if(!b)throw new Error("setConfig function has to be called previously")}function g(L){return _.length>0?_[0].mpd.manifest.Period_asArray[L]:null}function M(L,N,R){var Q,Y,ae,X,P;if(L){for(Q=L.AdaptationSet_asArray,X=0;X<Q.length;X+=1)for(ae=Q[X].Representation_asArray,P=0;P<ae.length;P+=1)if(N===(Y=ae[P]).id)return R?P:Y}return null}return o={getBandwidthForRepresentation:function(L,N){var R;return(R=M(g(N),L))?R.bandwidth:null},getIndexForRepresentation:function(L,N){return function(R,Q){var Y=M(R,Q,!0);return Y!==null?Y:-1}(g(N),L)},getMaxIndexForBufferType:function(L,N){return function(R,Q){var Y,ae,X,P;if(!R||!Q)return-1;for(ae=R.AdaptationSet_asArray,P=0;P<ae.length;P+=1)if(X=(Y=ae[P]).Representation_asArray,r.getIsTypeOf(Y,Q))return X.length;return-1}(g(N),L)},convertRepresentationToRepresentationInfo:function(L){if(L){var N=new eo,R=L.adaptation.period.mpd.manifest.Period_asArray[L.adaptation.period.index].AdaptationSet_asArray[L.adaptation.index],Q=r.getRepresentationFor(L.index,R);return N.id=L.id,N.quality=L.index,N.bandwidth=r.getBandwidth(Q),N.fragmentDuration=L.segmentDuration||(L.segments&&L.segments.length>0?L.segments[0].duration:NaN),N.MSETimeOffset=L.MSETimeOffset,N.mediaInfo=G(L.adaptation),N}return null},getStreamsInfo:function(L,N){var R=[],Q=_;if(L&&(ue(),Q=q(L)),Q.length>0){(!N||N>Q.length)&&(N=Q.length);for(var Y=0;Y<N;Y++)R.push(K(Q[Y]))}return R},getMediaInfoForType:function(L,N){if(_.length===0||!L)return null;var R=fe(L,_);if(!R)return null;var Q=r.getAdaptationsForPeriod(R),Y=F(L.index,N,L);return Y?G(Q[r.getIndexForAdaptation(Y,_[0].mpd.manifest,L.index)]):null},getAllMediaInfoForType:w,getAdaptationForType:F,getRealAdaptation:function(L,N){var R,Q,Y=fe(L,_);return R=N?N.id:null,_.length>0&&Y&&(Q=R?r.getAdaptationForId(R,_[0].mpd.manifest,Y.index):r.getAdaptationForIndex(N?N.index:null,_[0].mpd.manifest,Y.index)),Q},getProducerReferenceTimes:function(L,N){var R,Q,Y=fe(L,_);return R=N?N.id:null,_.length>0&&Y&&(Q=R?r.getAdaptationForId(R,_[0].mpd.manifest,Y.index):r.getAdaptationForIndex(N?N.index:null,_[0].mpd.manifest,Y.index)),Q?r.getProducerReferenceTimesForAdaptation(Q):[]},getRealPeriodByIndex:function(L){return r.getRealPeriodForIndex(L,_[0].mpd.manifest)},getEssentialPropertiesForRepresentation:function(L){try{return r.getEssentialPropertiesForRepresentation(L)}catch{return[]}},getVoRepresentations:function(L){var N=de(L);return r.getRepresentationsForAdaptation(N)},getEventsFor:function(L,N,R){var Q=[];if(_.length>0){var Y=_[0].mpd.manifest;if(L instanceof to){var ae=fe(L,_);Q=r.getEventsForPeriod(ae)}else if(L instanceof Xi){var X=fe(R,_);Q=r.getEventStreamForAdaptationSet(Y,de(L),X)}else if(L instanceof eo){var P=fe(R,_);Q=r.getEventStreamForRepresentation(Y,N,P)}}return Q},getEvent:function(L,N,R,Q){try{if(!L||!N||isNaN(R)||!Q)return null;var Y=L.scheme_id_uri,ae=L.value;if(!N[Y+"/"+ae])return null;var X,P=new Vn,se=L.timescale||1,pe=Q.adaptation.period.start,Le=N[Y+"/"+ae],De=isNaN(Q.presentationTimeOffset)?isNaN(Le.presentationTimeOffset)?0:Le.presentationTimeOffset:Q.presentationTimeOffset,Oe=L.presentation_time_delta/se;X=L.version===0?pe+R-De+Oe:pe-De+Oe;var we=L.event_duration/se,ot=L.id,at=L.message_data;return P.eventStream=Le,P.eventStream.value=ae,P.eventStream.timescale=se,P.duration=we,P.id=ot,P.calculatedPresentationTime=X,P.messageData=at,P.presentationTimeDelta=Oe,P}catch{return null}},getMpd:B,setConfig:function(L){L&&(L.constants&&(b=L.constants),L.cea608parser&&(m=L.cea608parser),L.errHandler&&r.setConfig({errHandler:L.errHandler}),L.BASE64&&r.setConfig({BASE64:L.BASE64}))},updatePeriods:function(L){if(!L)return null;ue(),_=q(L)},getIsTextTrack:function(L){return r.getIsText(L)},getUTCTimingSources:function(){var L=re();return r.getUTCTimingSources(L)},getSuggestedPresentationDelay:function(){var L=_.length>0?_[0].mpd:null;return r.getSuggestedPresentationDelay(L)},getAvailabilityStartTime:function(L){var N=B(L);return r.getAvailabilityStartTime(N)},getIsTypeOf:function(L,N){return r.getIsTypeOf(L,N)},getIsDynamic:function(L){var N=re(L);return r.getIsDynamic(N)},getDuration:function(L){var N=re(L);return r.getDuration(N)},getRegularPeriods:q,getContentSteering:function(L){return r.getContentSteering(L)},getLocation:function(L){return r.getLocation(L)},getPatchLocation:function(L){var N=r.getPatchLocation(L),R=r.getPublishTime(L);return N&&N.length!==0&&R?N.filter(function(Q){return isNaN(Q.ttl)||R.getTime()+Q.ttl>new Date().getTime()}):[]},getManifestUpdatePeriod:function(L){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return r.getManifestUpdatePeriod(L,N)},getPublishTime:function(L){return r.getPublishTime(L)},getIsDVB:function(L){return r.hasProfile(L,"urn:dvb:dash:profile:dvb-dash:2014")},getIsPatch:function(L){return l.getIsPatch(L)},getBaseURLsFromElement:function(L){return r.getBaseURLsFromElement(L)},getRepresentationSortFunction:function(){return r.getRepresentationSortFunction()},getCodec:function(L,N,R){return r.getCodec(L,N,R)},getPeriodById:function(L){if(!L||_.length===0)return null;var N=_.filter(function(R){return R.id===L});return N&&N.length>0?N[0]:null},setCurrentMediaInfo:function(L,N,R){I[L]=I[L]||{},I[L][N]=I[L][N]||{},I[L][N]=R},isPatchValid:function(L,N){var R=r.getId(L),Q=l.getMpdId(N),Y=r.getPublishTime(L),ae=l.getPublishTime(N),X=l.getOriginalPublishTime(N);return!!(R&&Q&&R==Q&&Y&&X&&Y.getTime()==X.getTime()&&ae&&Y.getTime()<ae.getTime())},applyPatchToManifest:function(L,N){l.getPatchOperations(N).forEach(function(R){var Q=R.getMpdTarget(L);if(Q!==null){var Y=Q.name,ae=Q.target,X=Q.leaf;if(R.xpath.findsAttribute()||Y==="__text")switch(R.action){case"add":case"replace":ae[Y]=R.value;break;case"remove":delete ae[Y]}else{var P=(ae[Y+"_asArray"]||[]).indexOf(X),se=R.position==="prepend"||R.position==="before";if((R.action==="remove"||R.action==="replace")&&(delete ae[Y],P!=-1)){var pe=ae[Y+"_asArray"];pe.splice(P,1),pe.length>1?ae[Y]=pe:pe.length==1?ae[Y]=pe[0]:delete ae[Y+"_asArray"]}R.action!=="add"&&R.action!=="replace"||Object.keys(R.value).forEach(function(Le){var De=R.value[Le],Oe=ae[Le+"_asArray"]||[];if(Oe.length===0&&ae[Le]&&Oe.push(ae[Le]),Oe.length===0)Oe=De;else{var we=Oe.length;we=Le==Y&&P!=-1?P+(se?0:1)+(R.action=="replace"?-1:0):se?0:Oe.length,Oe.splice.apply(Oe,[we,0].concat(De))}ae[Le+"_asArray"]=Oe,ae[Le]=Oe.length==1?Oe[0]:Oe})}}})},areMediaInfosEqual:j,reset:me},r=en(A).getInstance(),l=Ns(A).getInstance(),me(),o}ro.__dashjs_factory_name="DashAdapter";var Cs=h.Z.getSingletonFactory(ro);function Ds(o,r){for(var l=0;l<r.length;l++){var _=r[l];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(o,_.key,_)}}var Os=function(){function o(){(function(_,I){if(!(_ instanceof I))throw new TypeError("Cannot call a class as a function")})(this,o)}var r,l;return r=o,l=[{key:"round10",value:function(_,I){return function(b,m,A){return A===void 0||+A==0?Math[b](m):(A=+A,(m=+m)===null||isNaN(m)||typeof A!="number"||A%1!=0?NaN:(m=m.toString().split("e"),+((m=(m=Math[b](+(m[0]+"e"+(m[1]?+m[1]-A:-A)))).toString().split("e"))[0]+"e"+(m[1]?+m[1]+A:A))))}("round",_,I)}}],l&&Ds(r,l),o}(),Ms=function o(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,o),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]},Ps=function o(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,o),this.t=null,this.mt=null,this.to=null,this.lto=null},Ls=function o(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,o),this.t=null,this.level=null},xs=function o(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,o),this.target=null,this.state=y.Z.BUFFER_EMPTY},Fs=function o(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,o),this.time=null,this.range=null,this.manifestInfo=null},ks=function o(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,o),this.time=null,this.droppedFrames=null};function Ji(o,r){if(!(o instanceof r))throw new TypeError("Cannot call a class as a function")}var Zs=function o(){Ji(this,o),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},Us=function o(){Ji(this,o),this.id=null,this.index=null,this.start=null,this.duration=null},Bs=function o(){Ji(this,o),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null},Gs=function o(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,o),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null},qs=function o(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,o),this.loadingRequests=[],this.executedRequests=[]};function io(o){var r,l,_=(o=o||{}).settings,I=this.context,b=(0,p.Z)(I).getInstance();function m(){b.trigger(u.Z.METRICS_CHANGED)}function A(B){b.trigger(u.Z.METRIC_CHANGED,{mediaType:B}),m()}function F(B,me,re){b.trigger(u.Z.METRIC_UPDATED,{mediaType:B,metric:me,value:re}),A(B)}function j(B,me,re){b.trigger(u.Z.METRIC_ADDED,{mediaType:B,metric:me,value:re}),A(B)}function U(B,me){var re=null;return B&&(l.hasOwnProperty(B)?re=l[B]:me||(re=new Ms,l[B]=re)),re}function w(B,me,re){var de=U(B);de!==null&&(de[me].push(re),de[me].length>_.get().streaming.metrics.maxListDepth&&de[me].shift())}function q(B,me,re){w(B,me,re),j(B,me,re)}return r={clearCurrentMetricsForType:function(B){delete l[B],A(B)},clearAllCurrentMetrics:function(){l={},m()},getMetricsFor:U,addHttpRequest:function B(me,re,de,fe,G,ie,K,ue,g,M,L,N,R,Q,Y,ae,X){var P=new Ze.w;ie&&ie!==fe&&(B(me,null,de,fe,G,null,null,ue,g,null,null,null,R,null,null,ae,X),P.actualurl=ie),P.tcpid=re,P.type=de,P.url=fe,P.range=ue,P.trequest=g,P.tresponse=M,P.responsecode=N,P.cmsd=X,P._tfinish=L,P._stream=me,P._mediaduration=R,P._quality=G,P._responseHeaders=Q,P._serviceLocation=K,P._fileLoaderType=ae,Y?Y.forEach(function(se){(function(pe,Le,De,Oe){var we=new Ze.O;we.s=Le,we.d=De,we.b=Oe,pe.trace.push(we),pe.interval||(pe.interval=0),pe.interval+=De})(P,se.s,se.d,se.b)}):(delete P.interval,delete P.trace),q(me,y.Z.HTTP_REQUEST,P)},addRepresentationSwitch:function(B,me,re,de,fe){var G=new Ps;G.t=me,G.mt=re,G.to=de,fe?G.lto=fe:delete G.lto,q(B,y.Z.TRACK_SWITCH,G)},addBufferLevel:function(B,me,re){var de=new Ls;de.t=me,de.level=re,q(B,y.Z.BUFFER_LEVEL,de)},addBufferState:function(B,me,re){var de=new xs;de.target=re,de.state=me,q(B,y.Z.BUFFER_STATE,de)},addDVRInfo:function(B,me,re,de){var fe=new Fs;fe.time=me,fe.range=de,fe.manifestInfo=re,q(B,y.Z.DVR_INFO,fe)},addDroppedFrames:function(B,me){var re=new ks,de=U(B).DroppedFrames;me&&(re.time=me.creationTime,re.droppedFrames=me.droppedVideoFrames,de.length>0&&de[de.length-1]==re||q(B,y.Z.DROPPED_FRAMES,re))},addSchedulingInfo:function(B,me,re,de,fe,G,ie,K,ue){var g=new Gs;g.mediaType=B,g.t=me,g.type=re,g.startTime=de,g.availabilityStartTime=fe,g.duration=G,g.quality=ie,g.range=K,g.state=ue,q(B,y.Z.SCHEDULING_INFO,g)},addRequestsQueue:function(B,me,re){var de=new qs;de.loadingRequests=me,de.executedRequests=re,U(B).RequestsQueue=de,j(B,y.Z.REQUESTS_QUEUE,de)},addManifestUpdate:function(B,me,re,de,fe,G,ie,K,ue,g){var M=new Zs;M.mediaType=B,M.type=me,M.requestTime=re,M.fetchTime=de,M.availabilityStartTime=fe,M.presentationStartTime=G,M.clientTimeOffset=ie,M.currentTime=K,M.buffered=ue,M.latency=g,w(t.Z.STREAM,y.Z.MANIFEST_UPDATE,M),j(B,y.Z.MANIFEST_UPDATE,M)},updateManifestUpdateInfo:function(B,me){if(B){for(var re in me)B[re]=me[re];F(B.mediaType,y.Z.MANIFEST_UPDATE,B)}},addManifestUpdateStreamInfo:function(B,me,re,de,fe){if(B){var G=new Us;G.id=me,G.index=re,G.start=de,G.duration=fe,B.streamInfo.push(G),F(B.mediaType,y.Z.MANIFEST_UPDATE_STREAM_INFO,B)}},addManifestUpdateRepresentationInfo:function(B,me,re,de,fe,G,ie,K){if(B&&B.representationInfo){var ue=new Bs;ue.id=me,ue.index=re,ue.streamIndex=de,ue.mediaType=fe,ue.startNumber=ie,ue.fragmentInfoType=K,ue.presentationTimeOffset=G,B.representationInfo.push(ue),F(B.mediaType,y.Z.MANIFEST_UPDATE_TRACK_INFO,B)}},addPlayList:function(B){B.trace&&Array.isArray(B.trace)?B.trace.forEach(function(me){me.hasOwnProperty("subreplevel")&&!me.subreplevel&&delete me.subreplevel}):delete B.trace,q(t.Z.STREAM,y.Z.PLAY_LIST,B)},addDVBErrors:function(B){q(t.Z.STREAM,y.Z.DVB_ERRORS,B)}},l={},r}io.__dashjs_factory_name="MetricsModel";var Ys=h.Z.getSingletonFactory(io);function ao(o){o=o||{};var r,l,_,I,b=this.context,m=o.metricsModel;function A(U){var w=m.getMetricsFor(U,!0);if(!w)return null;var q,B=w.HttpList,me=null;if(!B||B.length<=0)return null;for(q=B.length-1;q>=0;){if(B[q].responsecode){me=B[q];break}q--}return me}function F(U){var w=m.getMetricsFor(U,!0);return w&&w.HttpList?w.HttpList:[]}function j(U,w){if(!U)return null;var q=U[w];return q&&q.length!==0?q[q.length-1]:null}return r={getCurrentRepresentationSwitch:function(U){return j(m.getMetricsFor(U,!0),y.Z.TRACK_SWITCH)},getCurrentBufferState:function(U){return j(m.getMetricsFor(U,!0),y.Z.BUFFER_STATE)},getCurrentBufferLevel:function(U){var w=j(m.getMetricsFor(U,!0),y.Z.BUFFER_LEVEL);return w?Os.round10(w.level/1e3,-3):0},getCurrentHttpRequest:A,getHttpRequests:F,getCurrentDroppedFrames:function(){return j(m.getMetricsFor(t.Z.VIDEO,!0),y.Z.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(U){return j(m.getMetricsFor(U,!0),y.Z.SCHEDULING_INFO)},getCurrentDVRInfo:function(U){return j(U?m.getMetricsFor(U,!0):m.getMetricsFor(t.Z.VIDEO,!0)||m.getMetricsFor(t.Z.AUDIO,!0),y.Z.DVR_INFO)},getCurrentManifestUpdate:function(){return j(m.getMetricsFor(t.Z.STREAM),y.Z.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(U,w){if(!w)return null;var q={},B=A(U);B&&(q=ln.Z.parseHttpHeaders(B._responseHeaders));var me=q[w.toLowerCase()];return me===void 0?null:me},getLatestMPDRequestHeaderValueByID:function(U){if(!U)return null;var w,q,B,me={};for(B=(w=F(t.Z.STREAM)).length-1;B>=0;B--)if((q=w[B]).type===Ze.w.MPD_TYPE){me=ln.Z.parseHttpHeaders(q._responseHeaders);break}var re=me[U.toLowerCase()];return re===void 0?null:re},addRepresentationSwitch:function(U,w,q,B,me){m.addRepresentationSwitch(U,w,q,B,me)},addDVRInfo:function(U,w,q,B){m.addDVRInfo(U,w,q,B)},updateManifestUpdateInfo:function(U){var w=this.getCurrentManifestUpdate();m.updateManifestUpdateInfo(w,U)},addManifestUpdateStreamInfo:function(U){if(U){var w=this.getCurrentManifestUpdate();m.addManifestUpdateStreamInfo(w,U.id,U.index,U.start,U.duration)}},addManifestUpdateRepresentationInfo:function(U,w){if(U){var q=this.getCurrentManifestUpdate();m.addManifestUpdateRepresentationInfo(q,U.id,U.index,U.streamIndex,w,U.presentationTimeOffset,U.startNumber,U.fragmentInfoType)}},addManifestUpdate:function(U){m.addManifestUpdate(t.Z.STREAM,U.type,U.requestStartDate,U.requestEndDate)},addHttpRequest:function(U,w,q,B,me,re){m.addHttpRequest(U.mediaType,null,U.type,U.url,U.quality,w,U.serviceLocation||null,U.range||null,U.requestStartDate,U.firstByteDate,U.requestEndDate,q,U.duration,B,me,U.fileLoaderType,re)},addSchedulingInfo:function(U,w){m.addSchedulingInfo(U.mediaType,new Date,U.type,U.startTime,U.availabilityStartTime,U.duration,U.quality,U.range,w)},addRequestsQueue:function(U,w,q){m.addRequestsQueue(U,w,q)},addBufferLevel:function(U,w,q){m.addBufferLevel(U,w,q)},addBufferState:function(U,w,q){m.addBufferState(U,w,q)},addDroppedFrames:function(U){m.addDroppedFrames(t.Z.VIDEO,U)},addPlayList:function(){I&&(m.addPlayList(I),I=null)},addDVBErrors:function(U){m.addDVBErrors(U)},createPlaylistMetrics:function(U,w){(I=new be).start=new Date,I.mstart=U,I.starttype=w},createPlaylistTraceMetrics:function(U,w,q){l===!0&&(l=!1,(_=new Se).representationid=U,_.start=new Date,_.mstart=w,_.playbackspeed=q!==null?q.toString():null)},updatePlayListTraceMetrics:function(U){if(_)for(var w in _)_[w]=U[w]},pushPlayListTraceMetrics:function(U,w){if(l===!1&&I&&_&&_.start){var q=_.start,B=U.getTime()-q.getTime();_.duration=B,_.stopreason=w,I.trace.push(_),l=!0}},clearAllCurrentMetrics:function(){m.clearAllCurrentMetrics()}},m=m||Ys(b).getInstance({settings:o.settings}),l=!0,_=null,I=null,r}ao.__dashjs_factory_name="DashMetrics";var js=h.Z.getSingletonFactory(ao);function oo(){var o,r,l,_,I=this.context,b=(0,p.Z)(I).getInstance(),m=(0,Ie.Z)(I).getInstance();function A(fe){_=fe}function F(fe,G,ie,K){var ue,g=G.adaptation.period.mpd,M=g.availabilityStartTime;if(K)ue=ie&&g.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(M.getTime()+1e3*(fe+g.timeShiftBufferDepth)):g.availabilityEndTime;else if(ie){var L=G.availabilityTimeOffset;ue=new Date(M.getTime()+1e3*(fe-L))}else ue=M;return ue}function j(fe,G){return(fe.getTime()-G.mpd.availabilityStartTime.getTime()+1e3*_)/1e3}function U(fe,G){return fe+(G.adaptation.period.start-G.presentationTimeOffset)}function w(fe){var G={start:NaN,end:NaN},ie=fe[0].getAdapter().getRegularPeriods()[0],K=j(new Date,ie);if(!fe||fe.length===0)return{range:G,now:K};fe.forEach(function(g){var M=g.getAdapter(),L=M.getMediaInfoForType(g.getStreamInfo(),t.Z.VIDEO)||M.getMediaInfoForType(g.getStreamInfo(),t.Z.AUDIO),N=M.getVoRepresentations(L)[0],R={start:NaN,end:NaN};if(N)if(N.segmentInfoType===e.Z.SEGMENT_TIMELINE)R=function(Y){var ae,X,P,se,pe=Y.adaptation.period.mpd.manifest.Period_asArray[Y.adaptation.period.index].AdaptationSet_asArray[Y.adaptation.index],Le=r.getRepresentationFor(Y.index,pe),De=Le.SegmentTemplate||Le.SegmentList,Oe=De.SegmentTimeline,we=De.timescale,ot=Oe.S_asArray,at={start:0,end:0},Xe=ot[0].t,$e=!isNaN(Xe),Dt=$e?Xe:0,_e=0;for($e&&(at.start=U(Dt/we,Y)),P=0,se=ot.length;P<se;P++)X=0,(ae=ot[P]).hasOwnProperty("r")&&(X=ae.r),_e+=ae.d*(1+X);return at.end=U((Dt+_e)/we,Y),at}(N);else{var Q=N.adaptation.period;R.start=Q.start,R.end=Math.max(K,Q.start+Q.duration)}!isNaN(R.start)&&(isNaN(G.start)||G.start>R.start)&&(G.start=R.start),!isNaN(R.end)&&(isNaN(G.end)||G.end<R.end)&&(G.end=R.end)}),G.end=Math.min(K,G.end);var ue=B(fe,G.end,!0);return G.end=isNaN(ue)?G.end:ue,G.start=ie&&ie.mpd&&ie.mpd.timeShiftBufferDepth&&!isNaN(ie.mpd.timeShiftBufferDepth)&&!isNaN(G.end)?Math.max(G.end-ie.mpd.timeShiftBufferDepth,G.start):G.start,G.start=B(fe,G.start),{range:G,now:K}}function q(fe,G){l=fe-G.end}function B(fe,G){var ie=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{for(var K=0,ue=!1,g=NaN;!ue&&K<fe.length;){var M=fe[K].getStreamInfo();M.start<=G&&(!isFinite(M.duration)||M.start+M.duration>=G)?(g=G,ue=!0):!ie&&M.start>G&&(isNaN(g)||M.start<g)?g=M.start:ie&&M.start+M.duration<G&&(isNaN(g)||M.start+M.duration>g)&&(g=M.start+M.duration),K+=1}return g}catch{return G}}function me(fe){fe.offset===void 0||isNaN(fe.offset)||A(fe.offset/1e3)}function re(){_=0,l=0}function de(){b.off(u.Z.UPDATE_TIME_SYNC_OFFSET,me,this),re()}return o={initialize:function(){re(),b.on(u.Z.UPDATE_TIME_SYNC_OFFSET,me,this)},getClientTimeOffset:function(){return _},setClientTimeOffset:A,getClientReferenceTime:function(){return Date.now()-1e3*l+1e3*_},calcAvailabilityStartTimeFromPresentationTime:function(fe,G,ie){return F(fe,G,ie)},calcAvailabilityEndTimeFromPresentationTime:function(fe,G,ie){return F(fe,G,ie,!0)},calcPresentationTimeFromWallTime:j,calcPresentationTimeFromMediaTime:U,calcPeriodRelativeTimeFromMpdRelativeTime:function(fe,G){return G-fe.adaptation.period.start},calcMediaTimeFromPresentationTime:function(fe,G){return fe-G.adaptation.period.start+G.presentationTimeOffset},calcWallTimeForSegment:function(fe,G){var ie,K,ue;return G&&(ie=fe.representation.adaptation.period.mpd.suggestedPresentationDelay,K=fe.presentationStartTime+ie,ue=new Date(fe.availabilityStartTime.getTime()+1e3*K)),ue},calcTimeShiftBufferWindow:function(fe,G){if(!G)return function(K){var ue={start:NaN,end:NaN},g=0,M=NaN;return K.forEach(function(L){var N=L.getStreamInfo();g+=N.duration,(isNaN(M)||N.start<M)&&(M=N.start)}),ue.start=M,ue.end=M+g,ue}(fe);if(m.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){var ie=w(fe);return q(ie.now,ie.range),ie.range}return function(K){var ue={start:NaN,end:NaN};if(!K||K.length===0)return ue;var g=K[0].getAdapter().getRegularPeriods()[0],M=j(new Date,g),L=g.mpd.timeShiftBufferDepth,N=isNaN(L)?0:M-L;if(ue.start=B(K,N),ue.end=!isNaN(ue.start)&&M<ue.start?M:B(K,M,!0),!isNaN(L)&&ue.end<M-L&&(ue.end=NaN),m.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){var R=w(K);if(R.range.end<ue.start)return b.trigger(n.Z.CONFORMANCE_VIOLATION,{level:Lr.LEVELS.WARNING,event:Lr.EVENTS.INVALID_DVR_WINDOW}),q(R.now,R.range),R.range}return ue}(fe)},reset:de},r=en(I).getInstance(),de(),o}oo.__dashjs_factory_name="TimelineConverter";var Hs=h.Z.getSingletonFactory(oo),$i=D(4593),vi=D(6934);function ea(o){return ea=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ea(o)}function ta(o,r){return ta=Object.setPrototypeOf||function(l,_){return l.__proto__=_,l},ta(o,r)}function Vs(o,r){return!r||ea(r)!=="object"&&typeof r!="function"?function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(o):r}function _i(o){return _i=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},_i(o)}var Ks=function(o){(function(b,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(m&&m.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),m&&ta(b,m)})(I,o);var r,l,_=(r=I,l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var b,m=_i(r);if(l){var A=_i(this).constructor;b=Reflect.construct(m,arguments,A)}else b=m.apply(this,arguments);return Vs(this,b)});function I(){var b;return function(m,A){if(!(m instanceof A))throw new TypeError("Cannot call a class as a function")}(this,I),(b=_.call(this)).captionData=null,b.label=null,b.defaultTrack=!1,b.kind=null,b.isFragmented=!1,b.isEmbedded=!1,b.isTTML=null,b}return I}(Xi),zs=D(2295);function so(){var o=0;function r(A){for(var F="",j=0;j<A.length;++j)F+=A[j].uchar;return F.length-F.replace(/^\s+/,"").length}function l(A){return"left: "+3.125*A.x+"%; top: "+6.66*A.y1+"%; width: "+(100-3.125*A.x)+"%; height: "+6.66*Math.max(A.y2-1-A.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function _(A){return A==="red"?"rgb(255, 0, 0)":A==="green"?"rgb(0, 255, 0)":A==="blue"?"rgb(0, 0, 255)":A==="cyan"?"rgb(0, 255, 255)":A==="magenta"?"rgb(255, 0, 255)":A==="yellow"?"rgb(255, 255, 0)":A==="white"?"rgb(255, 255, 255)":A==="black"?"rgb(0, 0, 0)":A}function I(A,F){var j=A.videoHeight/15;return F?"font-size: "+j+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(F.foreground?_(F.foreground):"rgb(255, 255, 255)")+"; font-style: "+(F.italics?"italic":"normal")+"; text-decoration: "+(F.underline?"underline":"none")+"; white-space: pre; background-color: "+(F.background?_(F.background):"transparent")+";":"font-size: "+j+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function b(A){return A.replace(/^\s+/g,"")}function m(A){return A.replace(/\s+$/g,"")}return{createHTMLCaptionsFromScreen:function(A,F,j,U){var w,q,B=null,me=!1,re=-1,de={start:F,end:j,spans:[]},fe="style_cea608_white_black",G={},ie={},K=[];for(w=0;w<15;++w){var ue=U.rows[w],g="",M=null;if(ue.isEmpty()===!1){var L=r(ue.chars);B===null&&(B={x:L,y1:w,y2:w+1,p:[]}),L!==re&&me&&(B.p.push(de),de={start:F,end:j,spans:[]},B.y2=w,B.name="region_"+B.x+"_"+B.y1+"_"+B.y2,G.hasOwnProperty(B.name)===!1?(K.push(B),G[B.name]=B):G[B.name].p.contat(B.p),B={x:L,y1:w,y2:w+1,p:[]});for(var N=0;N<ue.chars.length;++N){var R=ue.chars[N],Q=R.penState;if(M===null||!Q.equals(M)){g.trim().length>0&&(de.spans.push({name:fe,line:g,row:w}),g="");var Y="style_cea608_"+Q.foreground+"_"+Q.background;Q.underline&&(Y+="_underline"),Q.italics&&(Y+="_italics"),ie.hasOwnProperty(Y)||(ie[Y]=JSON.parse(JSON.stringify(Q))),M=Q,fe=Y}g+=R.uchar}g.trim().length>0&&de.spans.push({name:fe,line:g,row:w}),me=!0,re=L}else me=!1,re=-1,B&&(B.p.push(de),de={start:F,end:j,spans:[]},B.y2=w,B.name="region_"+B.x+"_"+B.y1+"_"+B.y2,G.hasOwnProperty(B.name)===!1?(K.push(B),G[B.name]=B):G[B.name].p.contat(B.p),B=null)}B&&(B.p.push(de),B.y2=w+1,B.name="region_"+B.x+"_"+B.y1+"_"+B.y2,G.hasOwnProperty(B.name)===!1?(K.push(B),G[B.name]=B):G[B.name].p.contat(B.p),B=null);var ae=[];for(w=0;w<K.length;++w){var X=K[w],P="sub_cea608_"+o++,se=document.createElement("div");se.id=P;var pe=l(X);se.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+pe;var Le=document.createElement("div");Le.className="paragraph bodyStyle",Le.style.cssText=I(A);var De=document.createElement("div");De.className="cueUniWrapper",De.style.cssText="unicode-bidi: normal; direction: ltr;";for(var Oe=0;Oe<X.p.length;++Oe){var we=X.p[Oe],ot=0;for(q=0;q<we.spans.length;++q){var at=we.spans[q];if(at.line.length>0){if(q!==0&&ot!=at.row){var Xe=document.createElement("br");Xe.className="lineBreak",De.appendChild(Xe)}var $e=!1;ot===at.row&&($e=!0),ot=at.row;var Dt=ie[at.name],_e=document.createElement("span");_e.className="spanPadding "+at.name+" customSpanColor",_e.style.cssText=I(A,Dt),q!==0&&$e?q===we.spans.length-1?_e.textContent=m(at.line):_e.textContent=at.line:we.spans.length>1&&q<we.spans.length-1&&at.row===we.spans[q+1].row?_e.textContent=b(at.line):_e.textContent=at.line.trim(),De.appendChild(_e)}}}Le.appendChild(De),se.appendChild(Le);var Be={bodyStyle:["%",90]};for(var ct in ie)ie.hasOwnProperty(ct)&&(Be[ct]=["%",90]);ae.push({type:"html",start:F,end:j,cueHTMLElement:se,cueID:P,cellResolution:[32,15],isFromCEA608:!0,fontSize:Be,lineHeight:{},linePadding:{}})}return ae}}}so.__dashjs_factory_name="EmbeddedTextHtmlRender";var Ws=h.Z.getSingletonFactory(so);function uo(o){var r,l,_,I,b,m,A,F,j,U,w,q,B,me,re,de,fe,G=o.errHandler,ie=o.manifestModel,K=o.mediaController,ue=o.videoModel,g=o.textTracks,M=o.vttParser,L=o.vttCustomRenderingParser,N=o.ttmlParser,R=o.streamInfo,Q=o.settings,Y=this.context,ae=(0,p.Z)(Y).getInstance(),X=!1;function P(){m=null,F=NaN,j=[],U=null,A=!1,b=[],I=null}function se(Xe){var $e=new Ks;for(var Dt in Xe)$e[Dt]=Xe[Dt];$e.labels=Xe.labels,$e.defaultTrack=function(_e){var Be=!1;return q.length>1&&_e.isEmbedded?Be=_e.id&&_e.id===t.Z.CC1:q.length===1?_e.id&&typeof _e.id=="string"&&_e.id.substring(0,2)==="CC"&&(Be=!0):q.length===0&&(Be=_e.index===b[0].index),Be}(Xe),$e.isFragmented=Xe.isFragmented,$e.isEmbedded=!!Xe.isEmbedded,$e.isTTML=function(_e){return _e.codec&&_e.codec.search(t.Z.STPP)>=0||_e.mimeType&&_e.mimeType.search(t.Z.TTML)>=0}(Xe),$e.kind=function(_e,Be){var ct=_e.roles&&_e.roles.length>0?Be[_e.roles[0]]:Be.caption;return ct=ct===Be.caption||ct===Be.subtitle?ct:Be.caption}(Xe,{subtitle:"subtitles",caption:"captions"}),g.addTextTrack($e)}function pe(Xe){var $e=Xe.chunk;$e.mediaInfo.embeddedCaptions&&De($e.bytes,$e)}function Le(Xe){w=Xe}function De(Xe,$e){var Dt=$e.mediaInfo,_e=Dt.type,Be=Dt.mimeType,ct=Dt.codec||Be;ct?Dt.codec.indexOf("application/mp4")!==-1?function(le,Me,Ne){var xe;if(Me.segmentType==="InitializationSegment")A=!0,F=_.getMediaTimescaleFromMoov(le);else{if(!A)return;(xe=_.getSamplesInfo(le).sampleList).length>0&&(U=xe[0].cts-Me.start*F),Ne.search(t.Z.STPP)>=0?function(lt,dt,At){var Pt,Vt;for(I=I!==null?I:ot(At),Pt=0;Pt<dt.length;Pt++){var Wt=dt[Pt],qt=Wt.cts,Xt=we(),Ht=Xt+qt/F,tn=Ht+Wt.duration/F;r.buffered.add(Ht,tn);var un=new DataView(lt,Wt.offset,Wt.subSizes[0]),sn=vi.Utils.dataViewToString(un,t.Z.UTF8),fn=[],gt=Wt.offset+Wt.subSizes[0];for(Vt=1;Vt<Wt.subSizes.length;Vt++){var Zt=new Uint8Array(lt,gt,Wt.subSizes[Vt]),Ut=String.fromCharCode.apply(null,Zt);fn.push(Ut),gt+=Wt.subSizes[Vt]}try{var Yt=ie.getValue().ttmlTimeIsRelative?qt/F:0,Gt=I.parse(sn,Yt,qt/F,(qt+Wt.duration)/F,fn);g.addCaptions(w,Xt,Gt)}catch(Qe){m.removeExecutedRequestsBeforeTime(),this.remove(),l.error("TTML parser error: "+Qe.message)}}}(le,xe,Ne):function(lt,dt){var At,Pt,Vt,Wt=[];for(At=0;At<dt.length;At++){var qt=dt[At];qt.cts-=U;var Xt=we()+qt.cts/F,Ht=Xt+qt.duration/F;r.buffered.add(Xt,Ht);var tn=lt.slice(qt.offset,qt.offset+qt.size),un=vi.parseBuffer(tn);for(Pt=0;Pt<un.boxes.length;Pt++){var sn=un.boxes[Pt];if(l.debug("VTT box1: "+sn.type),sn.type!=="vtte"&&sn.type==="vttc"){l.debug("VTT vttc boxes.length = "+sn.boxes.length);var fn={styles:{}};for(Vt=0;Vt<sn.boxes.length;Vt++){var gt=sn.boxes[Vt];if(l.debug("VTT box2: "+gt.type),gt.type==="payl")fn.start=qt.cts/F,fn.end=(qt.cts+qt.duration)/F,fn.data=gt.cue_text;else if(gt.type==="sttg"&&gt.settings&&gt.settings!=="")try{var Zt=gt.settings.split(" ");fn.styles=M.getCaptionStyles(Zt)}catch{}}fn&&fn.data&&(Wt.push(fn),l.debug("VTT  ".concat(fn.start," - ").concat(fn.end," :  ").concat(fn.data)))}}}Wt.length>0&&g.addCaptions(w,0,Wt)}(le,xe)}}(Xe,$e,ct):_e===t.Z.VIDEO?function(le,Me){var Ne,xe;if(Me.segmentType===Ze.w.INIT_SEGMENT_TYPE)B===0&&(B=_.getMediaTimescaleFromMoov(le));else if(Me.segmentType===Ze.w.MEDIA_SEGMENT_TYPE){if(B===0)return void l.warn("CEA-608: No timescale for embeddedTextTrack yet");var lt=(xe=_.getSamplesInfo(le)).lastSequenceNumber,dt=Math.trunc(Me.start),At=Math.trunc(Me.end);if(de[0]||de[1]||function(){for(var Xt,Ht=0;Ht<q.length;Ht++){if((Xt=g.getTrackIdxForId(q[Ht].id))===-1)return void l.warn("CEA-608: data before track is ready.");var tn=Oe(Xt);de[Ht]=new(T()).Cea608Parser(Ht+1,{newCue:tn},null)}}(),B){if(function(Xt,Ht,tn,un,sn){return Xt!==null&&Ht!==null&&un!==null&&sn!==null&&(Ht===Xt?un!==sn:Ht!==Xt+tn)}(me,lt,xe.numSequences,re,dt))for(Ne=0;Ne<de.length;Ne++)de[Ne]&&de[Ne].reset();for(var Pt=function(Xt,Ht){if(Ht.length===0)return null;for(var tn={splits:[],fields:[[],[]]},un=new DataView(Xt),sn=0;sn<Ht.length;sn++)for(var fn=Ht[sn],gt=T().findCea608Nalus(un,fn.offset,fn.size),Zt=null,Ut=0,Yt=0;Yt<gt.length;Yt++)for(var Gt=T().extractCea608DataFromRange(un,gt[Yt]),Qe=0;Qe<2;Qe++)if(Gt[Qe].length>0){fn.cts!==Zt?Ut=0:Ut+=1;var Pe=we();tn.fields[Qe].push([fn.cts+Pe*B,Gt[Qe],Ut]),Zt=fn.cts}return tn.fields.forEach(function(rt){rt.sort(function(J,Ae){return J[0]===Ae[0]?J[2]-Ae[2]:J[0]-Ae[0]})}),tn}(le,xe.sampleList),Vt=0;Vt<de.length;Vt++){var Wt=Pt.fields[Vt],qt=de[Vt];if(qt)for(Ne=0;Ne<Wt.length;Ne++)qt.addData(Wt[Ne][0]/B,Wt[Ne][1])}me=lt,re=At}}}(Xe,$e):function(le,Me,Ne){var xe,lt,dt=new DataView(le,0,le.byteLength);lt=vi.Utils.dataViewToString(dt,t.Z.UTF8);try{xe=ot(Ne).parse(lt,0),g.addCaptions(g.getCurrentTrackIdx(),0,xe),r.buffered&&r.buffered.add(Me.start,Me.end)}catch(At){G.error(new te.Z($.TIMED_TEXT_ERROR_ID_PARSE_CODE,$.TIMED_TEXT_ERROR_MESSAGE_PARSE+At.message,lt))}}(Xe,$e,ct):l.error("No text type defined")}function Oe(Xe){return function($e,Dt,_e){var Be;(Be=ue.getTTMLRenderingDiv()?fe.createHTMLCaptionsFromScreen(ue.getElement(),$e,Dt,_e):[{start:$e,end:Dt,data:_e.getDisplayText(),styles:{}}])&&g.addCaptions(Xe,0,Be)}}function we(){return isNaN(r.timestampOffset)?0:r.timestampOffset}function ot(Xe){var $e;return Xe.search(t.Z.VTT)>=0?$e=Q.get().streaming.text.webvtt.customRenderingEnabled&&L?L:M:(Xe.search(t.Z.TTML)>=0||Xe.search(t.Z.STPP)>=0)&&($e=N),$e}function at(Xe){q.forEach(function($e){var Dt=g.getTrackIdxForId($e.id);Dt>=0&&g.deleteCuesFromTrackIdx(Dt,Xe.from,Xe.to)})}return r={initialize:function(){X||(q=[],w=null,B=0,de=[],me=null,re=null,X=!0,fe=Ws(Y).getInstance(),ae.on(u.Z.VIDEO_CHUNK_RECEIVED,pe,r),ae.on(u.Z.BUFFER_CLEARED,at,r))},addMediaInfos:function(Xe,$e,Dt){if(b=b.concat($e),Xe===t.Z.TEXT&&$e[0].isFragmented&&!$e[0].isEmbedded){m=Dt,r.buffered=(0,zs.Z)(Y).create(),j=K.getTracksFor(t.Z.TEXT,R.id).filter(function(le){return le.isFragmented});for(var _e=K.getCurrentTrackFor(t.Z.TEXT,R.id),Be=0;Be<j.length;Be++)if(j[Be]===_e){Le(Be);break}}for(var ct=0;ct<$e.length;ct++)se($e[ct])},resetMediaInfos:function(){b=[]},getStreamId:function(){return R.id},append:De,abort:function(){},addEmbeddedTrack:function(Xe){if(X&&Xe)if(Xe.id===t.Z.CC1||Xe.id===t.Z.CC3){for(var $e=0;$e<q.length;$e++)if(q[$e].id===Xe.id)return;q.push(Xe)}else l.warn("Embedded track "+Xe.id+" not supported!")},resetEmbedded:function(){ae.off(u.Z.VIDEO_CHUNK_RECEIVED,pe,r),ae.off(u.Z.BUFFER_CLEARED,at,r),g&&g.deleteAllTextTracks(),X=!1,q=[],de=[null,null],me=null,re=null},getConfig:function(){return{fragmentModel:m,fragmentedTracks:j,videoModel:ue}},setCurrentFragmentedTrackIdx:Le,remove:function(Xe,$e){Xe===void 0&&Xe===$e&&(Xe=r.buffered.start(0),$e=r.buffered.end(r.buffered.length-1)),r.buffered.remove(Xe,$e),g.deleteCuesFromTrackIdx(w,Xe,$e)},reset:function(){P(),b=[],_=null}},l=(0,E.Z)(Y).getInstance().getLogger(r),_=(0,Hr.Z)(Y).getInstance(),P(),r}uo.__dashjs_factory_name="TextSourceBuffer";var Qs=h.Z.getClassFactory(uo),na=D(4403);function lo(o,r){(r==null||r>o.length)&&(r=o.length);for(var l=0,_=new Array(r);l<r;l++)_[l]=o[l];return _}var Xs=["text","align","fontSize","id","isd","line","lineAlign","lineHeight","linePadding","position","positionAlign","region","size","snapToLines","vertical"];function co(o){var r,l,_,I,b,m,A,F,j,U,w,q,B,me,re,de,fe,G,ie=this.context,K=(0,p.Z)(ie).getInstance(),ue=o.videoModel,g=o.streamInfo,M=o.settings;function L(le,Me,Ne,xe,lt,dt){var At=0,Pt=0;le/Me>Ne/xe?At=(Pt=Me)/xe*Ne:Pt=(At=le)/Ne*xe;var Vt,Wt,qt=0,Xt=0;return At/Pt>lt?(Xt=Pt,qt=Pt*lt):(qt=At,Xt=At/lt),Vt=(le-qt)/2,Wt=(Me-Xt)/2,dt?{x:Vt+.1*qt,y:Wt+.1*Xt,w:.8*qt,h:.8*Xt}:{x:Vt,y:Wt,w:qt,h:Xt}}function N(le,Me){var Ne=ue.getClientWidth(),xe=ue.getClientHeight(),lt=ue.getVideoWidth(),dt=ue.getVideoHeight(),At=ue.getVideoRelativeOffsetTop(),Pt=ue.getVideoRelativeOffsetLeft();if(lt!==0&&dt!==0){var Vt=lt/dt,Wt=!1;le.isFromCEA608&&(Vt=1.1666666666666667,Wt=!0);var qt=L.call(this,Ne,xe,lt,dt,Vt,Wt),Xt=qt.w,Ht=qt.h,tn=qt.x,un=qt.y;if(Xt!=j||Ht!=U||tn!=A||un!=F||Me){if(A=tn+Pt,F=un+At,j=Xt,U=Ht,w){var sn=w.style;sn&&(sn.left=A+"px",sn.top=F+"px",sn.width=j+"px",sn.height=U+"px",sn.zIndex=me&&document[me]||re?fe:null,K.trigger(n.Z.CAPTION_CONTAINER_RESIZE))}var fn=le.activeCues;if(fn)for(var gt=fn.length,Zt=0;Zt<gt;++Zt){var Ut=fn[Zt];Ut.scaleCue(Ut)}}}}function R(le){var Me,Ne,xe,lt,dt,At=j,Pt=U;if(le.cellResolution){var Vt=[At/le.cellResolution[0],Pt/le.cellResolution[1]];if(le.linePadding){for(Me in le.linePadding)if(le.linePadding.hasOwnProperty(Me)){Ne=(le.linePadding[Me]*Vt[0]).toString();for(var Wt=document.getElementsByClassName("spanPadding"),qt=0;qt<Wt.length;qt++)Wt[qt].style.cssText=Wt[qt].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Ne),Wt[qt].style.cssText=Wt[qt].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Ne)}}if(le.fontSize){for(Me in le.fontSize)if(le.fontSize.hasOwnProperty(Me)){le.fontSize[Me][0]==="%"?xe=le.fontSize[Me][1]/100:le.fontSize[Me][0]==="c"&&(xe=le.fontSize[Me][1]),Ne=(xe*Vt[1]).toString(),dt=Me!=="defaultFontSize"?document.getElementsByClassName(Me):document.getElementsByClassName("paragraph");for(var Xt=0;Xt<dt.length;Xt++)dt[Xt].style.cssText=dt[Xt].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Ne)}if(le.lineHeight){for(Me in le.lineHeight)if(le.lineHeight.hasOwnProperty(Me)){le.lineHeight[Me][0]==="%"?lt=le.lineHeight[Me][1]/100:le.fontSize[Me][0]==="c"&&(lt=le.lineHeight[Me][1]),Ne=(lt*Vt[1]).toString(),dt=document.getElementsByClassName(Me);for(var Ht=0;Ht<dt.length;Ht++)dt[Ht].style.cssText=dt[Ht].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Ne)}}}}if(le.isd){var tn=document.getElementById(le.cueID);tn&&w.removeChild(tn),Y(le)}}function Q(le,Me){var Ne=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,xe=/^#(.*)$/;if(Ne.test(Me)){var lt=Ne.exec(Me),dt=parseInt(lt[4],10)-1;return"data:image/png;base64,"+btoa(le.images[dt])}if(xe.test(Me)){var At=xe.exec(Me)[1];return"data:image/png;base64,"+le.embeddedImages[At]}return Me}function Y(le){if(w){var Me=document.createElement("div");w.appendChild(Me),de=(0,na.renderHTML)(le.isd,Me,function(Ne){return Q(le,Ne)},w.clientHeight,w.clientWidth,!1,function(Ne){l.info("renderCaption :",Ne)},de,!0),Me.id=le.cueID,K.trigger(n.Z.CAPTION_RENDERED,{captionDiv:Me,currentTrackIdx:m})}}function ae(le,Me){if(!M.get().streaming.text.extendSegmentedCues||!Me.cues||Me.cues.length===0)return!1;var Ne=Me.cues[Me.cues.length-1];return!(Ne.endTime<le.startTime||!function(xe,lt,dt){for(var At=0;At<dt.length;At++){var Pt=dt[At];if(JSON.stringify(xe[Pt])!==JSON.stringify(lt[Pt]))return!1}return!0}(Ne,le,Xs)||(Ne.endTime=Math.max(Ne.endTime,le.endTime),0))}function X(le,Me){Me&&Me.forEach(function(Ne){Ne.kind&&Ne.kind==="image"&&(Ne.src=Q(le,Ne.src)),X(le,Ne.contents)})}function P(le,Me,Ne){var xe=Oe(le);if(xe&&Array.isArray(Ne)&&Ne.length!==0)for(var lt=0;lt<Ne.length;lt++){var dt=void 0,At=Ne[lt];xe.cellResolution=At.cellResolution,xe.isFromCEA608=At.isFromCEA608,isNaN(At.start)||isNaN(At.end)||(dt=At.type==="html"&&w?se(At,Me,xe):At.data?pe(At,Me,xe):null);try{if(dt){at(xe,dt)||(M.get().streaming.text.webvtt.customRenderingEnabled?(xe.manualCueList||(xe.manualCueList=[]),xe.manualCueList.push(dt)):ae(dt,xe)||xe.addCue(dt));var Pt=M.get().streaming.buffer.bufferToKeep;$e(xe,0,ue.getTime()-Pt)}else l.error("Impossible to display subtitles. You might have missed setting a TTML rendering div via player.attachTTMLRenderingDiv(TTMLRenderingDiv)")}catch(Vt){throw Dt(xe),xe.addCue(dt),Vt}}}function se(le,Me,Ne){var xe=this,lt=new _(le.start+Me,le.end+Me,"");return lt.cueHTMLElement=le.cueHTMLElement,lt.isd=le.isd,lt.images=le.images,lt.embeddedImages=le.embeddedImages,lt.cueID=le.cueID,lt.scaleCue=R.bind(xe),lt.cellResolution=le.cellResolution,lt.lineHeight=le.lineHeight,lt.linePadding=le.linePadding,lt.fontSize=le.fontSize,w.style.left=A+"px",w.style.top=F+"px",w.style.width=j+"px",w.style.height=U+"px",lt.isd&&X(lt,lt.isd.contents),lt.onenter=function(){Ne.mode===t.Z.TEXT_SHOWING&&(this.isd?(Y(this),l.debug("Cue enter id:"+this.cueID)):(w.appendChild(this.cueHTMLElement),R.call(xe,this),K.trigger(n.Z.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:m})))},lt.onexit=function(){if(w)for(var dt=w.childNodes,At=0;At<dt.length;++At)dt[At].id===this.cueID&&(l.debug("Cue exit id:"+dt[At].id),w.removeChild(dt[At]),--At)},lt}function pe(le,Me,Ne){var xe=new _(le.start-Me,le.end-Me,le.data);if(xe.cueID="".concat(xe.startTime,"_").concat(xe.endTime),xe.isActive=!1,le.styles)try{le.styles.align!==void 0&&"align"in xe&&(xe.align=le.styles.align),le.styles.line!==void 0&&"line"in xe&&(xe.line=le.styles.line),le.styles.snapToLines!==void 0&&"snapToLines"in xe&&(xe.snapToLines=le.styles.snapToLines),le.styles.position!==void 0&&"position"in xe&&(xe.position=le.styles.position),le.styles.size!==void 0&&"size"in xe&&(xe.size=le.styles.size)}catch(lt){l.error(lt)}return xe.onenter=function(){Ne.mode===t.Z.TEXT_SHOWING&&K.trigger(n.Z.CAPTION_RENDERED,{currentTrackIdx:m})},xe}function Le(le){if(q)for(var Me=q.childNodes,Ne=0;Ne<Me.length;++Ne)Me[Ne].id===le.cueID&&(q.removeChild(Me[Ne]),--Ne)}function De(){var le,Me=[],Ne=function(lt,dt){var At;if(typeof Symbol>"u"||lt[Symbol.iterator]==null){if(Array.isArray(lt)||(At=function(Ht,tn){if(Ht){if(typeof Ht=="string")return lo(Ht,tn);var un=Object.prototype.toString.call(Ht).slice(8,-1);return un==="Object"&&Ht.constructor&&(un=Ht.constructor.name),un==="Map"||un==="Set"?Array.from(Ht):un==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(un)?lo(Ht,tn):void 0}}(lt))||dt&&lt&&typeof lt.length=="number"){At&&(lt=At);var Pt=0,Vt=function(){};return{s:Vt,n:function(){return Pt>=lt.length?{done:!0}:{done:!1,value:lt[Pt++]}},e:function(Ht){throw Ht},f:Vt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Wt,qt=!0,Xt=!1;return{s:function(){At=lt[Symbol.iterator]()},n:function(){var Ht=At.next();return qt=Ht.done,Ht},e:function(Ht){Xt=!0,Wt=Ht},f:function(){try{qt||At.return==null||At.return()}finally{if(Xt)throw Wt}}}}(ue.getTextTracks());try{for(Ne.s();!(le=Ne.n()).done;){var xe=le.value;xe.manualMode===t.Z.TEXT_SHOWING&&Me.push(xe)}}catch(lt){Ne.e(lt)}finally{Ne.f()}return Me}function Oe(le){return le>=0&&I[le]?ue.getTextTrack(I[le].kind,I[le].id,I[le].lang,I[le].isTTML,I[le].isEmbedded):null}function we(le){var Me=this;if(le!==m){var Ne=Oe(m=le);ot.call(this,Ne),B&&(clearInterval(B),B=null),Ne&&Ne.renderingType==="html"&&(N.call(this,Ne,!0),window.ResizeObserver?(G=new window.ResizeObserver(function(){N.call(Me,Ne,!0)})).observe(ue.getElement()):B=setInterval(N.bind(this,Ne),500))}}function ot(le){ct.call(this),le&&le.renderingType==="html"?_e.call(this):Be.call(this)}function at(le,Me){if(!le.cues)return!1;for(var Ne=0;Ne<le.cues.length;Ne++)if(le.cues[Ne].startTime===Me.startTime&&le.cues[Ne].endTime===Me.endTime)return!0;return!1}function Xe(le,Me,Ne){var xe=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return!!le&&(isNaN(Me)||(xe?le.startTime:le.endTime)>=Me)&&(isNaN(Ne)||(xe?le.endTime:le.startTime)<=Ne)}function $e(le,Me,Ne){var xe,lt;if(!(Ne<Me)&&le&&(le.cues||le.manualCueList)){var dt=le.cues&&le.cues.length>0?"native":"custom",At=dt==="native"?le.cues:le.manualCueList;if(!At||At.length===0)return;for(var Pt=At.length-1;Pt>=0;Pt--)!Xe(At[Pt],Me,Ne,!0)||(xe=At[Pt],lt=ue.getTime(),xe.startTime>=lt&&xe.endTime<=lt)||(dt==="native"?le.removeCue(At[Pt]):(Le(At[Pt]),delete le.manualCueList[Pt]))}}function Dt(le,Me,Ne){var xe=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];if(le&&(le.cues||le.manualCueList)){var lt=le.cues&&le.cues.length>0?"native":"custom",dt=lt==="native"?le.cues:le.manualCueList;if(!dt||dt.length===0)return;for(var At=dt.length-1,Pt=At;Pt>=0;Pt--)Xe(dt[Pt],Me,Ne,xe)&&(lt==="native"?(dt[Pt].onexit&&dt[Pt].onexit(),le.removeCue(dt[Pt])):(Le(dt[Pt]),delete le.manualCueList[Pt]))}}function _e(){var le=document.getElementById("native-cue-style");if(!le){(le=document.createElement("style")).id="native-cue-style",document.head.appendChild(le);var Me=le.sheet,Ne=ue.getElement();try{Ne&&(Ne.id?Me.insertRule("#"+Ne.id+"::cue {background: transparent}",0):Ne.classList.length!==0?Me.insertRule("."+Ne.className+"::cue {background: transparent}",0):Me.insertRule("video::cue {background: transparent}",0))}catch(xe){l.info(""+xe.message)}}}function Be(){var le=document.getElementById("native-cue-style");le&&document.head.removeChild(le)}function ct(){if(w)for(;w.firstChild;)w.removeChild(w.firstChild)}return r={initialize:function(){typeof window<"u"&&typeof navigator<"u"&&(_=window.VTTCue||window.TextTrackCue,I=[],b=[],m=-1,A=0,F=0,j=0,U=0,w=null,q=null,B=null,re=!1,fe=2147483647,de=null,document.fullscreenElement!==void 0?me="fullscreenElement":document.webkitIsFullScreen!==void 0?me="webkitIsFullScreen":document.msFullscreenElement?me="msFullscreenElement":document.mozFullScreen&&(me="mozFullScreen"))},getStreamId:function(){return g.id},addTextTrack:function(le){I.push(le)},addCaptions:P,createTracks:function(){I.sort(function(Ht,tn){return Ht.index-tn.index}),w=ue.getTTMLRenderingDiv(),q=ue.getVttRenderingDiv();for(var le,Me,Ne,xe,lt,dt,At=-1,Pt=0;Pt<I.length;Pt++){var Vt=(Me=(le=I[Pt]).kind,Ne=le.id!==void 0?le.id:le.lang,xe=le.lang,lt=le.isTTML,dt=le.isEmbedded,ue.addTextTrack(Me,Ne,xe,lt,dt));b.push(Vt),I[Pt].defaultTrack&&(Vt.default=!0,At=Pt);var Wt=Oe(Pt);Wt&&(Wt.mode=t.Z.TEXT_SHOWING,w&&(I[Pt].isTTML||I[Pt].isEmbedded)?Wt.renderingType="html":Wt.renderingType="default"),P(Pt,0,I[Pt].captionData),K.trigger(n.Z.TEXT_TRACK_ADDED)}if(we.call(this,At),At>=0){K.on(n.Z.PLAYBACK_METADATA_LOADED,function Ht(){var tn=Oe(At);tn&&tn.renderingType==="html"&&N.call(this,tn,!0),K.off(n.Z.PLAYBACK_METADATA_LOADED,Ht,this)},this);for(var qt=0;qt<I.length;qt++){var Xt=Oe(qt);Xt&&(Xt.mode=qt===At?t.Z.TEXT_SHOWING:t.Z.TEXT_HIDDEN,Xt.manualMode=qt===At?t.Z.TEXT_SHOWING:t.Z.TEXT_HIDDEN)}}K.trigger(u.Z.TEXT_TRACKS_QUEUE_INITIALIZED,{index:m,tracks:I,streamId:g.id})},getCurrentTrackIdx:function(){return m},setCurrentTrackIdx:we,getTrackIdxForId:function(le){for(var Me=-1,Ne=0;Ne<I.length;Ne++)if(I[Ne].id===le){Me=Ne;break}return Me},getCurrentTrackInfo:function(){return I[m]},setModeForTrackIdx:function(le,Me){var Ne=Oe(le);Ne&&Ne.mode!==Me&&(Ne.mode=Me),Ne&&Ne.manualMode!==Me&&(Ne.manualMode=Me)},deleteCuesFromTrackIdx:function(le,Me,Ne){var xe=Oe(le);xe&&Dt(xe,Me,Ne)},deleteAllTextTracks:function(){for(var le=b?b.length:0,Me=0;Me<le;Me++){var Ne=Oe(Me);Ne&&Dt.call(this,Ne,g.start,g.start+g.duration,!1)}b=[],I=[],B&&(clearInterval(B),B=null),G&&ue&&(G.unobserve(ue.getElement()),G=null),m=-1,ct.call(this)},deleteTextTrack:function(le){ue.removeChild(b[le]),b.splice(le,1)},manualCueProcessing:function(le){var Me=De();if(Me&&Me.length>0){var Ne=Me[0].manualCueList;Ne&&Ne.length>0&&Ne.forEach(function(xe){xe.startTime<=le&&xe.endTime>=le&&!xe.isActive?(xe.isActive=!0,WebVTT.processCues(window,[xe],q,xe.cueID)):xe.isActive&&(xe.startTime>le||xe.endTime<le)&&(xe.isActive=!1,Le(xe))})}},disableManualTracks:function(){var le=De();if(le&&le.length>0){var Me=le[0].manualCueList;Me&&Me.length>0&&Me.forEach(function(Ne){if(Ne.isActive&&(Ne.isActive=!1,q))for(var xe=q.childNodes,lt=0;lt<xe.length;++lt)xe[lt].id===Ne.cueID&&(q.removeChild(xe[lt]),--lt)})}}},l=(0,E.Z)(ie).getInstance().getLogger(r),r}co.__dashjs_factory_name="TextTracks";var Js=h.Z.getClassFactory(co);function fo(){var o,r,l,_,I,b,m=this.context;function A(w){var q=w.split(":"),B=q.length-1;return w=60*parseInt(q[B-1],10)+parseFloat(q[B]),B===2&&(w+=3600*parseInt(q[0],10)),w}function F(w){var q=w.split(_),B=q[1].split(b);return B.shift(),q[1]=B[0],B.shift(),{cuePoints:q,styles:j(B)}}function j(w){var q={};return w.forEach(function(B){if(B.split(/:/).length>1){var me=B.split(/:/)[1],re=!1;me&&me.search(/%/)!=-1&&(re=!0,me=parseInt(me.replace(/%/,""),10)),(B.match(/align/)||B.match(/A/))&&(q.align=me),(B.match(/line/)||B.match(/L/))&&(q.line=me==="auto"?me:parseInt(me,10),re&&(q.snapToLines=!1)),(B.match(/position/)||B.match(/P/))&&(q.position=me),(B.match(/size/)||B.match(/S/))&&(q.size=me)}}),q}function U(w,q){for(var B,me=q,re="",de="";w[me]!==""&&me<w.length;)me++;if((B=me-q)>1)for(var fe=0;fe<B;fe++){if((de=w[q+fe]).match(_)){re="";break}re+=de,fe!==B-1&&(re+=`
`)}else(de=w[q]).match(_)||(re=de);return re}return o={parse:function(w){var q,B,me=[];if(!w)return me;q=(w=w.split(l)).length,B=-1;for(var re=0;re<q;re++){var de=w[re];if(de.length>0&&de!=="WEBVTT"&&de.match(_)){var fe=F(de),G=fe.cuePoints,ie=fe.styles,K=U(w,re+1),ue=A(G[0].replace(I,"")),g=A(G[1].replace(I,""));!isNaN(ue)&&!isNaN(g)&&ue>=B&&g>ue?K!==""?(B=ue,me.push({start:ue,end:g,data:K,styles:ie})):r.error("Skipping cue due to empty/malformed cue text"):r.error("Skipping cue due to incorrect cue timing")}}return me},getCaptionStyles:j},r=(0,E.Z)(m).getInstance().getLogger(o),l=/(?:\r\n|\r|\n)/gm,_=/-->/,I=/(^[\s]+|[\s]+$)/g,b=/\s\b/g,o}fo.__dashjs_factory_name="VTTParser";var $s=h.Z.getSingletonFactory(fo);function go(){var o,r;return o={parse:function(l){var _=[];return r.oncue=function(I){I.start=I.startTime,I.end=I.endTime,I.data=I.text,I.styles={align:I.align,line:I.line,position:I.position,size:I.size},_.push(I)},r.parse(l),_}},function(){try{window&&window.WebVTT&&window.WebVTT.Parser&&(r=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()))}catch{}}(),o}go.__dashjs_factory_name="VttCustomRenderingParser";var eu=h.Z.getSingletonFactory(go);function ho(){var o,r,l=this.context,_=(0,p.Z)(l).getInstance(),I=0;return o={parse:function(b,m,A,F,j){var U,w,q,B="",me=[],re={},de={},fe="",G="",ie={onOpenTag:function(L,N,R){if(R[" imagetype"]&&!R[" imageType"]&&(_.trigger(n.Z.CONFORMANCE_VIOLATION,{level:Lr.LEVELS.ERROR,event:Lr.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),R[" imageType"]=R[" imagetype"]),N==="image"&&(L==="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"||L==="http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt")){if(!R[" imageType"]||R[" imageType"].value!=="PNG")return void r.warn("smpte-tt imageType != PNG. Discarded");fe=R["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){fe&&(de[fe]=G.trim()),G="",fe=""},onText:function(L){fe&&(G+=L)}};if(!b)throw B="no ttml data to parse",new Error(B);re.data=b,_.trigger(u.Z.TTML_TO_PARSE,re);var K=(0,na.fromXML)(re.data,function(L){B=L},ie);_.trigger(u.Z.TTML_PARSED,{ttmlString:re.data,ttmlDoc:K});var ue,g=K.getMediaTimeEvents();for(q=0;q<g.length;q++){var M=(0,na.generateISD)(K,g[q],function(L){B=L});M.contents.some(function(L){return L.contents.length})&&(U=g[q]+m)<(w=g[q+1]+m)&&me.push({start:U,end:w,type:"html",cueID:(ue="cue_TTML_"+I,I++,ue),isd:M,images:j,embeddedImages:de})}if(B!=="")throw r.error(B),new Error(B);return me}},r=(0,E.Z)(l).getInstance().getLogger(o),o}ho.__dashjs_factory_name="TTMLParser";var tu=h.Z.getSingletonFactory(ho);function mo(o){var r,l,_,I,b,m,A,F,j,U,w,q,B=this.context,me=o.adapter,re=o.errHandler,de=o.manifestModel,fe=o.mediaController,G=o.videoModel,ie=o.settings;function K(Q){var Y=Q.tracks,ae=Q.index,X=Q.streamId;if(ie.get().streaming.text.defaultEnabled===!1&&!M()||q)L(X,-1);else{var P=fe.getCurrentTrackFor(t.Z.TEXT,X);if(P){var se={lang:P.lang,role:P.roles[0],index:P.index,codec:P.codec,accessibility:P.accessibility[0]};Y.some(function(pe,Le){if(fe.matchSettings(se,pe))return L(X,Le),ae=Le,!0})}j=!1}l[X].lastEnabledIndex=ae,F.trigger(n.Z.TEXT_TRACKS_ADDED,{enabled:M(),index:ae,tracks:Y,streamId:X}),w=!0}function ue(Q){try{var Y=Q.streamId;if(!I[Y]||isNaN(Q.time))return;I[Y].manualCueProcessing(Q.time)}catch{}}function g(Q){try{var Y=Q.streamId;if(!I[Y])return;I[Y].disableManualTracks()}catch{}}function M(){var Q=!0;return j&&!U&&(Q=!1),Q}function L(Q,Y){(j=Y===-1)&&fe&&fe.saveTextSettingsDisabled();var ae=N(Q);if(ae!==Y&&I[Q]){I[Q].disableManualTracks(),I[Q].setModeForTrackIdx(ae,t.Z.TEXT_HIDDEN),I[Q].setCurrentTrackIdx(Y),I[Q].setModeForTrackIdx(Y,t.Z.TEXT_SHOWING);var X=I[Q].getCurrentTrackInfo();X&&X.isFragmented&&!X.isEmbedded?function(P,se,pe){if(_[P])for(var Le=_[P].getConfig().fragmentedTracks,De=0;De<Le.length;De++){var Oe=Le[De];if(se.lang===Oe.lang&&(Oe.id?se.id===Oe.id:se.index===Oe.index)){var we=fe.getCurrentTrackFor(t.Z.TEXT,P);(Oe.id?we.id!==Oe.id:we.index!==Oe.index)?(I[P].deleteCuesFromTrackIdx(pe),_[P].setCurrentFragmentedTrackIdx(De)):pe===-1&&F.trigger(u.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:P,mediaType:t.Z.TEXT})}}}(Q,X,ae):X&&!X.isFragmented&&function(P,se){F.trigger(u.Z.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:se},{streamId:P,mediaType:t.Z.TEXT})}(Q,X),fe.setTrack(X)}}function N(Q){return I[Q].getCurrentTrackIdx()}function R(){_={},I={},l={},j=!0,w=!1,q=!1}return r={deactivateStream:function(Q){if(Q){var Y=Q.id;_[Y]&&_[Y].resetMediaInfos(),I[Y]&&I[Y].deleteAllTextTracks()}},initialize:function(){F.on(u.Z.TEXT_TRACKS_QUEUE_INITIALIZED,K,r),ie.get().streaming.text.webvtt.customRenderingEnabled&&(F.on(u.Z.PLAYBACK_TIME_UPDATED,ue,r),F.on(u.Z.PLAYBACK_SEEKING,g,r))},initializeForStream:function(Q){var Y=Q.id,ae=Js(B).create({videoModel:G,settings:ie,streamInfo:Q});ae.initialize(),I[Y]=ae;var X=Qs(B).create({errHandler:re,adapter:me,manifestModel:de,mediaController:fe,videoModel:G,textTracks:ae,vttParser:b,vttCustomRenderingParser:m,ttmlParser:A,streamInfo:Q,settings:ie});X.initialize(),_[Y]=X,l[Y]={},l[Y].lastEnabledIndex=-1},createTracks:function(Q){var Y=Q.id;I[Y]&&I[Y].createTracks()},getTextSourceBuffer:function(Q){var Y=Q.id;if(_&&_[Y])return _[Y]},getAllTracksAreDisabled:function(){return j},addEmbeddedTrack:function(Q,Y){var ae=Q.id;_[ae]&&_[ae].addEmbeddedTrack(Y)},enableText:function(Q,Y){return(0,W.PS)(Y,"boolean"),M()!==Y&&(Y&&L(Q,l[Q].lastEnabledIndex),Y||(l[Q].lastEnabledIndex=N(Q),w?L(Q,-1):q=!0)),!0},isTextEnabled:M,setTextTrack:L,getCurrentTrackIdx:N,enableForcedTextStreaming:function(Q){return(0,W.PS)(Q,"boolean"),U=Q,!0},addMediaInfosToBuffer:function(Q,Y,ae){var X=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,P=Q.id;_[P]&&_[P].addMediaInfos(Y,ae,X)},reset:function(){R(),F.off(u.Z.TEXT_TRACKS_QUEUE_INITIALIZED,K,r),ie.get().streaming.text.webvtt.customRenderingEnabled&&(F.off(u.Z.PLAYBACK_TIME_UPDATED,ue,r),F.off(u.Z.PLAYBACK_SEEKING,g,r)),Object.keys(_).forEach(function(Q){_[Q].resetEmbedded(),_[Q].reset()})}},U=!1,w=!1,q=!1,b=$s(B).getInstance(),m=eu(B).getInstance(),A=tu(B).getInstance(),F=(0,p.Z)(B).getInstance(),R(),r}mo.__dashjs_factory_name="TextController";var nu=h.Z.getClassFactory(mo);function ra(){var o,r,l,_,I,b,m,A,F,j,U,w,q,B,me,re,de,fe,G,ie,K,ue,g,M,L,N,R,Q,Y,ae,X,P,se,pe,Le,De,Oe,we,ot,at="You must first call initialize() and set a source before calling this method",Xe="You must first call initialize() and set a valid source and view before calling this method",$e="You must first call attachView() to set the video element before calling this method",Dt="You must first call attachSource() with a valid source before calling this method",_e="MediaPlayer not initialized!",Be=this.context,ct=(0,p.Z)(Be).getInstance(),le=(0,Ie.Z)(Be).getInstance(),Me=(0,E.Z)(Be).getInstance({settings:le});function Ne(){fn(null),un(null),_=null,B&&(B.reset(),B=null),me&&(me.reset(),me=null),ie&&ie.reset(),le.reset(),de&&(de.reset(),de=null)}function xe(){return!!l&&!!De.getElement()}function lt(){return(0,vs.e)()}function dt(){if(!m)throw Xe;return Q.isPaused()}function At(){if(!m)throw Xe;return Q.getIsDynamic()}function Pt(J){var Ae=L&&L.hasVideoTrack()?t.Z.VIDEO:t.Z.AUDIO,ut=P.getCurrentDVRInfo(Ae);if(!ut)return 0;var _t=Q.getOriginalLiveDelay(),xt=ut.range.start+J;return xt>ut.range.end-_t&&(xt=ut.range.end-_t),xt}function Vt(J){if(!m)throw Xe;var Ae=tn().currentTime;if(J!==void 0)Ae=L.getTimeRelativeToStreamId(Ae,J);else if(Q.getIsDynamic()){var ut=L&&L.hasVideoTrack()?t.Z.VIDEO:t.Z.AUDIO,_t=P.getCurrentDVRInfo(ut);Ae=_t===null||Ae===0?0:Math.max(0,Ae-_t.range.start)}return Ae}function Wt(){if(!m)throw Xe;var J=tn().duration;if(Q.getIsDynamic()){var Ae=L&&L.hasVideoTrack()?t.Z.VIDEO:t.Z.AUDIO,ut=P.getCurrentDVRInfo(Ae);J=ut?ut.range.end-ut.range.start:0}return J}function qt(J){(0,W.PS)(J,"boolean"),A=J}function Xt(){ie.restoreDefaultUTCTimingSources()}function Ht(){return P}function tn(){if(!De.getElement())throw $e;return De.getElement()}function un(J){if(!I)throw _e;De.setElement(J),J&&(Gt(),function(){if(!me){var Ae=dashjs.MetricsReporting;if(typeof Ae=="function"){var ut=Ae(Be).create();me=ut.createMetricsReporting({debug:Me,eventBus:ct,mediaElement:tn(),adapter:fe,dashMetrics:P,mediaPlayerModel:G,events:u.Z,constants:t.Z,metricsConstants:y.Z})}}}(),function(){if(!re){var Ae=dashjs.MssHandler;typeof Ae=="function"&&($.extend(Ae.errors),re=Ae(Be).create({eventBus:ct,mediaPlayerModel:G,dashMetrics:P,manifestModel:se,playbackController:Q,streamController:L,protectionController:B,baseURLController:ue,errHandler:K,events:u.Z,constants:t.Z,debug:Me,initSegmentType:Ze.w.INIT_SEGMENT_TYPE,BASE64:$i,ISOBoxer:vi,settings:le}))}}(),L&&L.switchToVideoElement(F)),m&&Zt(),rt(F)}function sn(J){if(!b)throw at;var Ae=L.getActiveStreamInfo();return Ae?q.getTracksFor(J,Ae.id):[]}function fn(J){var Ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;if(!I)throw _e;typeof J=="string"&&Oe.initialize(J),Ae==null&&(Ae=NaN),isNaN(Ae)||(Ae=Math.max(0,Ae)),F=Ae,l=J,(b||m)&&Zt(),xe()&&rt(F)}function gt(){if(!b)throw at;var J=L.getActiveStreamInfo();return J?L.getStreamById(J.id):null}function Zt(){m=!1,b=!1,fe.reset(),L.reset(),R.reset(),X.reset(),Q.reset(),Y.reset(),ae.reset(),j.reset(),q.reset(),ot.reset(),B&&(le.get().streaming.protection.keepProtectionMediaKeys?B.stop():(B.reset(),B=null,Gt())),N.reset(),pe.reset(),Le.reset()}function Ut(){var J=Yt();L||(L=sa(Be).getInstance()),N||(N=nu(Be).create({errHandler:K,manifestModel:se,adapter:fe,mediaController:q,videoModel:De,settings:le})),M.setConfig({capabilities:g,customParametersModel:ie,adapter:fe,settings:le,manifestModel:se,errHandler:K}),L.setConfig({capabilities:g,capabilitiesFilter:M,manifestLoader:J,manifestModel:se,mediaPlayerModel:G,customParametersModel:ie,protectionController:B,textController:N,adapter:fe,dashMetrics:P,errHandler:K,timelineConverter:w,videoModel:De,playbackController:Q,serviceDescriptionController:Y,contentSteeringController:ae,abrController:j,mediaController:q,settings:le,baseURLController:ue,uriFragmentModel:Oe,segmentBaseController:ot}),R.setConfig({settings:le,playbackController:Q,streamController:L,videoModel:De,timelineConverter:w,adapter:fe}),Q.setConfig({streamController:L,serviceDescriptionController:Y,dashMetrics:P,adapter:fe,videoModel:De,timelineConverter:w,settings:le}),X.setConfig({streamController:L,playbackController:Q,mediaPlayerModel:G,videoModel:De,settings:le}),j.setConfig({streamController:L,domStorage:we,mediaPlayerModel:G,customParametersModel:ie,cmsdModel:Le,dashMetrics:P,adapter:fe,videoModel:De,settings:le}),pe.setConfig({abrController:j,dashMetrics:P,playbackController:Q}),Le.setConfig({}),j.initialize(),L.initialize(A,_),N.initialize(),R.initialize(),X.initialize(),pe.initialize(),Le.initialize(),ae.initialize(),ot.initialize()}function Yt(){return rs(Be).create({debug:Me,errHandler:K,dashMetrics:P,mediaPlayerModel:G,requestModifier:(0,Te.Z)(Be).getInstance(),mssHandler:re,settings:le})}function Gt(){if(B)return B;var J=dashjs.Protection;if(typeof J=="function"){var Ae=J(Be).create();return u.Z.extend(J.events),n.Z.extend(J.events,{publicOnly:!0}),$.extend(J.errors),g||(g=(0,Ma.Z)(Be).getInstance()),B=Ae.createProtectionSystem({debug:Me,errHandler:K,videoModel:De,customParametersModel:ie,capabilities:g,eventBus:ct,events:u.Z,BASE64:$i,constants:t.Z,cmcdModel:pe,settings:le})}return null}function Qe(){if(!I)throw _e;if(de)return de;var J=dashjs.OfflineController;if(typeof J=="function"){u.Z.extend(J.events),n.Z.extend(J.events,{publicOnly:!0}),$.extend(J.errors);var Ae=Yt(),ut=si(Be).create();return ut.setConfig({manifestModel:se,adapter:fe,manifestLoader:Ae,errHandler:K,contentSteeringController:ae}),de=J(Be).create({debug:Me,manifestUpdater:ut,baseURLController:ue,manifestLoader:Ae,manifestModel:se,mediaPlayerModel:G,abrController:j,playbackController:Q,adapter:fe,errHandler:K,dashMetrics:P,timelineConverter:w,segmentBaseController:ot,schemeLoaderFactory:U,eventBus:ct,events:u.Z,errors:$,constants:t.Z,settings:le,dashConstants:e.Z,urlUtils:(0,Ge.Z)(Be).getInstance()})}return null}function Pe(J){var Ae=L&&L.hasVideoTrack()?t.Z.VIDEO:t.Z.AUDIO,ut=P.getCurrentDVRInfo(Ae);return ut?J+(ut.manifestInfo.availableFrom.getTime()/1e3+ut.range.start):0}function rt(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN;de&&de.resetRecords(),!b&&l&&(b=!0,r.info("Streaming Initialized"),Ut(),typeof l=="string"?L.load(l,J):L.loadWithManifest(l,J)),!m&&xe()&&(m=!0,r.info("Playback Initialized"))}return o={initialize:function(J,Ae,ut){var _t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:NaN;g||(g=(0,Ma.Z)(Be).getInstance()).setConfig({settings:le}),K||(K=is(Be).getInstance()),g.supportsMediaSource()?(I||(I=!0,w=Hs(Be).getInstance(),j||(j=hs(Be).getInstance()).setConfig({settings:le}),U||(U=Zn(Be).getInstance()),Q||(Q=d(Be).getInstance()),q||(q=Ro(Be).getInstance()),L||(L=sa(Be).getInstance()),R||(R=To(Be).getInstance()),X||(X=So(Be).getInstance()),Y||(Y=Ao(Be).getInstance()),ae||(ae=_r(Be).getInstance()),M||(M=as(Be).getInstance()),fe=Cs(Be).getInstance(),se=us(Be).getInstance(),pe=Tt(Be).getInstance(),Le=Gr(Be).getInstance(),P=js(Be).getInstance({settings:le}),we=Es(Be).getInstance({settings:le}),fe.setConfig({constants:t.Z,cea608parser:T(),errHandler:K,BASE64:$i}),ue||(ue=Mo(Be).create()),ue.setConfig({adapter:fe,contentSteeringController:ae}),Y.setConfig({adapter:fe}),ot||(ot=Ss(Be).getInstance({dashMetrics:P,mediaPlayerModel:G,errHandler:K,baseURLController:ue,events:u.Z,eventBus:ct,debug:Me,boxParser:(0,Hr.Z)(Be).getInstance(),requestModifier:(0,Te.Z)(Be).getInstance(),errors:$})),q.setConfig({domStorage:we,settings:le,customParametersModel:ie}),G.setConfig({playbackController:Q,serviceDescriptionController:Y}),ae.setConfig({adapter:fe,errHandler:K,dashMetrics:P,mediaPlayerModel:G,manifestModel:se,serviceDescriptionController:Y,eventBus:ct,requestModifier:(0,Te.Z)(Be).getInstance()}),Xt(),qt(ut===void 0||ut),Qe()),J&&un(J),Ae&&fn(Ae,_t),r.info("[dash.js "+lt()+"] MediaPlayer has been initialized")):K.error(new te.Z($.CAPABILITY_MEDIASOURCE_ERROR_CODE,$.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function(J){J&&(J.capabilities&&(g=J.capabilities),J.capabilitiesFilter&&(M=J.capabilitiesFilter),J.streamController&&(L=J.streamController),J.textController&&(N=J.textController),J.gapController&&(R=J.gapController),J.playbackController&&(Q=J.playbackController),J.serviceDescriptionController&&(Y=J.serviceDescriptionController),J.contentSteeringController&&(ae=J.contentSteeringController),J.catchupController&&(X=J.catchupController),J.mediaPlayerModel&&(G=J.mediaPlayerModel),J.customParametersModel&&(ie=J.customParametersModel),J.abrController&&(j=J.abrController),J.schemeLoaderFactory&&(U=J.schemeLoaderFactory),J.mediaController&&(q=J.mediaController),J.settings&&(le=J.settings))},on:function(J,Ae,ut,_t){ct.on(J,Ae,ut,_t)},off:function(J,Ae,ut){ct.off(J,Ae,ut)},extend:function(J,Ae,ut){h.Z.extend(J,Ae,ut,Be)},attachView:un,attachSource:fn,isReady:xe,preload:function(){if(!De.getElement()&&!b){if(!l)throw Dt;rt(F)}},play:function(){if(!m)throw Xe;(!A||dt()&&m)&&Q.play(!0)},isPaused:dt,pause:function(){if(!m)throw Xe;Q.pause()},isSeeking:function(){if(!m)throw Xe;return Q.isSeeking()},isDynamic:At,getLowLatencyModeEnabled:function(){if(!m)throw Xe;return Q.getLowLatencyModeEnabled()},seek:function(J){if(!m)throw Xe;if((0,W.PS)(J,"number"),isNaN(J))throw t.Z.BAD_ARGUMENT_ERROR;J<0&&(J=0);var Ae=Q.getIsDynamic()?Pt(J):J,ut=tn();!Q.getIsDynamic()&&ut.duration&&(Ae=Math.min(ut.duration,Ae)),Q.seek(Ae,!1,!1,!0)},seekToOriginalLive:function(){m&&At()&&Q.seekToOriginalLive()},setPlaybackRate:function(J){tn().playbackRate=J},getPlaybackRate:function(){return tn().playbackRate},setMute:function(J){(0,W.PS)(J,"boolean"),tn().muted=J},isMuted:function(){return tn().muted},setVolume:function(J){if(typeof J!="number"||isNaN(J)||J<0||J>1)throw t.Z.BAD_ARGUMENT_ERROR;tn().volume=J},getVolume:function(){return tn().volume},time:Vt,duration:Wt,timeAsUTC:function(){if(!m)throw Xe;return Vt()<0?NaN:Pe(Vt())},durationAsUTC:function(){if(!m)throw Xe;return Pe(Wt())},getActiveStream:gt,getDVRWindowSize:function(){var J=L&&L.hasVideoTrack()?t.Z.VIDEO:t.Z.AUDIO,Ae=P.getCurrentDVRInfo(J);return Ae?Ae.manifestInfo.dvrWindowSize:0},getDVRSeekOffset:Pt,getAvailableBaseUrls:function(){var J=se.getValue();return J?ue.getBaseUrls(J):[]},getAvailableLocations:function(){var J=se.getValue();if(!J)return[];var Ae=fe.getLocation(J),ut=ae.getSynthesizedLocationElements(Ae);return Ae.concat(ut)},getTargetLiveDelay:function(){if(!m)throw Xe;return Q.getOriginalLiveDelay()},convertToTimeCode:function(J){J=Math.max(J,0);var Ae=Math.floor(J/3600),ut=Math.floor(J%3600/60),_t=Math.floor(J%3600%60);return(Ae===0?"":Ae<10?"0"+Ae.toString()+":":Ae.toString()+":")+(ut<10?"0"+ut.toString():ut.toString())+":"+(_t<10?"0"+_t.toString():_t.toString())},formatUTC:function(J,Ae,ut){var _t=arguments.length>3&&arguments[3]!==void 0&&arguments[3],xt=new Date(1e3*J),an=xt.toLocaleDateString(Ae),Tn=xt.toLocaleTimeString(Ae,{hour12:ut});return _t?Tn+" "+an:Tn},getVersion:lt,getDebug:function(){return Me},getBufferLength:function(J){var Ae=[t.Z.VIDEO,t.Z.AUDIO,t.Z.TEXT];if(J)return Ae.indexOf(J)!==-1?Ht().getCurrentBufferLevel(J)||NaN:(r.warn("getBufferLength requested for invalid type"),NaN);var ut=Ae.map(function(_t){return sn(_t).length>0?Ht().getCurrentBufferLevel(_t):Number.MAX_VALUE}).reduce(function(_t,xt){return Math.min(_t,xt)});return ut===Number.MAX_VALUE?NaN:ut},getTTMLRenderingDiv:function(){return De?De.getTTMLRenderingDiv():null},getVideoElement:tn,getSource:function(){if(!l)throw Dt;return l},updateSource:function(J){l=J,L.load(l)},getCurrentLiveLatency:function(){if(!I)throw _e;return m?Q.getCurrentLiveLatency():NaN},getTopBitrateInfoFor:function(J){if(!b)throw at;return j.getTopBitrateInfoFor(J)},setAutoPlay:qt,getAutoPlay:function(){return A},getDashMetrics:Ht,getQualityFor:function(J){if(!b)throw at;if(J===t.Z.IMAGE){var Ae=gt();if(!Ae)return-1;var ut=Ae.getThumbnailController();return ut?ut.getCurrentTrackIndex():-1}return j.getQualityFor(J)},setQualityFor:function(J,Ae){var ut=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!b)throw at;if(J===t.Z.IMAGE){var _t=gt();if(!_t)return;var xt=_t.getThumbnailController();xt&&xt.setTrackByIndex(Ae)}j.setPlaybackQuality(J,L.getActiveStreamInfo(),Ae,{forceReplace:ut})},updatePortalSize:function(){j.setElementSize(),j.setWindowResizeEventCalled(!0)},enableText:function(J){var Ae=L.getActiveStreamInfo();return!(!Ae||!N)&&N.enableText(Ae.id,J)},enableForcedTextStreaming:function(J){return!(!L.getActiveStreamInfo()||!N)&&N.enableForcedTextStreaming(J)},isTextEnabled:function(){var J=L.getActiveStreamInfo();return!(!J||!N)&&N.isTextEnabled(J)},setTextTrack:function(J){if(!m)throw Xe;var Ae=L.getActiveStreamInfo();Ae&&N&&N.setTextTrack(Ae.id,J)},getBitrateInfoListFor:function(J){if(!b)throw at;var Ae=gt();return Ae?Ae.getBitrateListFor(J):[]},getStreamsFromManifest:function(J){if(!b)throw at;return fe.getStreamsInfo(J)},getTracksFor:sn,getTracksForTypeFromManifest:function(J,Ae,ut){if(!b)throw at;return(ut=ut||fe.getStreamsInfo(Ae,1)[0])?fe.getAllMediaInfoForType(ut,J,Ae):[]},getCurrentTrackFor:function(J){if(!b)throw at;var Ae=L.getActiveStreamInfo();return q.getCurrentTrackFor(J,Ae.id)},setInitialMediaSettingsFor:function(J,Ae){if(!I)throw _e;q.setInitialSettings(J,Ae)},getInitialMediaSettingsFor:function(J){if(!I)throw _e;return q.getInitialSettings(J)},setCurrentTrack:function(J){var Ae=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!b)throw at;q.setTrack(J,Ae)},addABRCustomRule:function(J,Ae,ut){ie.addAbrCustomRule(J,Ae,ut)},removeABRCustomRule:function(J){ie.removeAbrCustomRule(J)},removeAllABRCustomRule:function(){ie.removeAllAbrCustomRule()},getABRCustomRules:function(){return ie.getAbrCustomRules()},getAverageThroughput:function(J){var Ae=j.getThroughputHistory(),ut=Q.getIsDynamic();return Ae?Ae.getAverageThroughput(J,ut):0},retrieveManifest:function(J,Ae){var ut=Yt(),_t=this;ct.on(u.Z.INTERNAL_MANIFEST_LOADED,function xt(an){an.error?Ae(null,an.error):Ae(an.manifest),ct.off(u.Z.INTERNAL_MANIFEST_LOADED,xt,_t),ut.reset()},_t),Oe.initialize(J),ut.load(J)},addUTCTimingSource:function(J,Ae){ie.addUTCTimingSource(J,Ae)},removeUTCTimingSource:function(J,Ae){ie.removeUTCTimingSource(J,Ae)},clearDefaultUTCTimingSources:function(){ie.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:Xt,setXHRWithCredentialsForType:function(J,Ae){ie.setXHRWithCredentialsForType(J,Ae)},getXHRWithCredentialsForType:function(J){return ie.getXHRWithCredentialsForType(J)},getProtectionController:function(){return Gt()},attachProtectionController:function(J){B=J},setProtectionData:function(J){_=J,L&&L.setProtectionData(_)},registerLicenseRequestFilter:function(J){ie.registerLicenseRequestFilter(J)},registerLicenseResponseFilter:function(J){ie.registerLicenseResponseFilter(J)},unregisterLicenseRequestFilter:function(J){ie.unregisterLicenseRequestFilter(J)},unregisterLicenseResponseFilter:function(J){ie.unregisterLicenseResponseFilter(J)},registerCustomCapabilitiesFilter:function(J){ie.registerCustomCapabilitiesFilter(J)},unregisterCustomCapabilitiesFilter:function(J){ie.unregisterCustomCapabilitiesFilter(J)},setCustomInitialTrackSelectionFunction:function(J){ie.setCustomInitialTrackSelectionFunction(J)},resetCustomInitialTrackSelectionFunction:function(){ie.resetCustomInitialTrackSelectionFunction(null)},attachTTMLRenderingDiv:function(J){if(!De.getElement())throw $e;De.setTTMLRenderingDiv(J)},attachVttRenderingDiv:function(J){if(!De.getElement())throw $e;De.setVttRenderingDiv(J)},getCurrentTextTrackIndex:function(){var J=L.getActiveStreamInfo();if(J&&N)return N.getCurrentTrackIdx(J.id)},provideThumbnail:function(J,Ae){if(typeof Ae=="function")if(J<0)Ae(null);else{var ut=Q.getIsDynamic()?Pt(J):J,_t=L.getStreamForTime(ut);if(_t!==null){var xt=_t.getThumbnailController();if(xt)return xt.provide(ut,Ae);Ae(null)}else Ae(null)}},getDashAdapter:function(){return fe},getOfflineController:function(){return Qe()},triggerSteeringRequest:function(){if(ae)return ae.loadSteeringData()},getCurrentSteeringResponseData:function(){if(ae)return ae.getCurrentSteeringResponseData()},getSettings:function(){return le.get()},updateSettings:function(J){le.update(J)},resetSettings:function(){le.reset()},reset:Ne,destroy:function(){Ne(),h.Z.deleteSingletonInstances(Be)}},r=Me.getLogger(o),I=!1,m=!1,b=!1,A=!0,F=NaN,B=null,de=null,_=null,fe=null,ot=null,u.Z.extend(n.Z),G=ls(Be).getInstance(),ie=(0,bt.Z)(Be).getInstance(),De=ps(Be).getInstance(),Oe=ss(Be).getInstance(),o}ra.__dashjs_factory_name="MediaPlayer";var Ti=h.Z.getClassFactory(ra);Ti.events=n.Z,Ti.errors=$,h.Z.updateClassFactory(ra.__dashjs_factory_name,Ti);var ru=Ti},8825:function(et,Re,D){function oe(p){return oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},oe(p)}function T(p,u){return T=Object.setPrototypeOf||function(h,E){return h.__proto__=E,h},T(p,u)}function t(p,u){return!u||oe(u)!=="object"&&typeof u!="function"?function(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}(p):u}function e(p){return e=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)},e(p)}var y=new(function(p){(function(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&T(c,d)})(n,p);var u,h,E=(u=n,h=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var c,d=e(u);if(h){var C=e(this).constructor;c=Reflect.construct(d,arguments,C)}else c=d.apply(this,arguments);return t(this,c)});function n(){var c;return function(d,C){if(!(d instanceof C))throw new TypeError("Cannot call a class as a function")}(this,n),(c=E.call(this)).AST_IN_FUTURE="astInFuture",c.BASE_URLS_UPDATED="baseUrlsUpdated",c.BUFFER_EMPTY="bufferStalled",c.BUFFER_LOADED="bufferLoaded",c.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",c.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",c.DYNAMIC_TO_STATIC="dynamicToStatic",c.ERROR="error",c.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",c.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",c.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",c.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",c.LOG="log",c.MANIFEST_LOADING_STARTED="manifestLoadingStarted",c.MANIFEST_LOADING_FINISHED="manifestLoadingFinished",c.MANIFEST_LOADED="manifestLoaded",c.METRICS_CHANGED="metricsChanged",c.METRIC_CHANGED="metricChanged",c.METRIC_ADDED="metricAdded",c.METRIC_UPDATED="metricUpdated",c.PERIOD_SWITCH_STARTED="periodSwitchStarted",c.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",c.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",c.QUALITY_CHANGE_RENDERED="qualityChangeRendered",c.TRACK_CHANGE_RENDERED="trackChangeRendered",c.STREAM_INITIALIZING="streamInitializing",c.STREAM_UPDATED="streamUpdated",c.STREAM_ACTIVATED="streamActivated",c.STREAM_DEACTIVATED="streamDeactivated",c.STREAM_INITIALIZED="streamInitialized",c.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",c.TEXT_TRACKS_ADDED="allTextTracksAdded",c.TEXT_TRACK_ADDED="textTrackAdded",c.THROUGHPUT_MEASUREMENT_STORED="throughputMeasurementStored",c.TTML_PARSED="ttmlParsed",c.TTML_TO_PARSE="ttmlToParse",c.CAPTION_RENDERED="captionRendered",c.CAPTION_CONTAINER_RESIZE="captionContainerResize",c.CAN_PLAY="canPlay",c.CAN_PLAY_THROUGH="canPlayThrough",c.PLAYBACK_ENDED="playbackEnded",c.PLAYBACK_ERROR="playbackError",c.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",c.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",c.PLAYBACK_LOADED_DATA="playbackLoadedData",c.PLAYBACK_PAUSED="playbackPaused",c.PLAYBACK_PLAYING="playbackPlaying",c.PLAYBACK_PROGRESS="playbackProgress",c.PLAYBACK_RATE_CHANGED="playbackRateChanged",c.PLAYBACK_SEEKED="playbackSeeked",c.PLAYBACK_SEEKING="playbackSeeking",c.PLAYBACK_STALLED="playbackStalled",c.PLAYBACK_STARTED="playbackStarted",c.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",c.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",c.PLAYBACK_WAITING="playbackWaiting",c.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",c.EVENT_MODE_ON_START="eventModeOnStart",c.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",c.CONFORMANCE_VIOLATION="conformanceViolation",c.REPRESENTATION_SWITCH="representationSwitch",c.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",c.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",c.INBAND_PRFT="inbandPrft",c.MANAGED_MEDIA_SOURCE_START_STREAMING="managedMediaSourceStartStreaming",c.MANAGED_MEDIA_SOURCE_END_STREAMING="managedMediaSourceEndStreaming",c}return n}(D(8342).Z));Re.Z=y},3393:function(et,Re){function D(T,t){for(var e=0;e<t.length;e++){var y=t[e];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(T,y.key,y)}}var oe=new(function(){function T(){(function(y,p){if(!(y instanceof p))throw new TypeError("Cannot call a class as a function")})(this,T),this.init()}var t,e;return t=T,(e=[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.CONTENT_STEERING="contentSteering",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_L2A="abrL2A",this.ABR_STRATEGY_LoLP="abrLoLP",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA="abrFetchThroughputCalculationDownloadedData",this.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING="abrFetchThroughputCalculationMoofParsing",this.ABR_FETCH_THROUGHPUT_CALCULATION_AAST="abrFetchThroughputCalculationAAST",this.LIVE_CATCHUP_MODE_DEFAULT="liveCatchupModeDefault",this.LIVE_CATCHUP_MODE_LOLP="liveCatchupModeLoLP",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",this.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",this.TRACK_SELECTION_MODE_FIRST_TRACK="firstTrack",this.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",this.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY="highestEfficiency",this.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",this.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY="highestSelectionPriority",this.CMCD_MODE_QUERY="query",this.CMCD_MODE_HEADER="header",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer",this.DVB_REPORTING_URL="dvb:reportingUrl",this.DVB_PROBABILITY="dvb:probability",this.VIDEO_ELEMENT_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},this.FILE_LOADER_TYPES={FETCH:"fetch_loader",XHR:"xhr_loader"}}}])&&D(t.prototype,e),T}());Re.Z=oe},3860:function(et,Re){function D(T,t){for(var e=0;e<t.length;e++){var y=t[e];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(T,y.key,y)}}var oe=new(function(){function T(){(function(y,p){if(!(y instanceof p))throw new TypeError("Cannot call a class as a function")})(this,T),this.init()}var t,e;return t=T,(e=[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors",this.HTTP_REQUEST_DVB_REPORTING_TYPE="DVBReporting"}}])&&D(t.prototype,e),T}());Re.Z=oe},8080:function(et,Re,D){D.d(Re,{default:function(){return v}});var oe=function S(){(function(W,H){if(!(W instanceof H))throw new TypeError("Cannot call a class as a function")})(this,S),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};oe.SSL_CONNECTION_FAILED_PREFIX="SSL",oe.DNS_RESOLUTION_FAILED="C00",oe.HOST_UNREACHABLE="C01",oe.CONNECTION_REFUSED="C02",oe.CONNECTION_ERROR="C03",oe.CORRUPT_MEDIA_ISOBMFF="M00",oe.CORRUPT_MEDIA_OTHER="M01",oe.BASE_URL_CHANGED="F00",oe.BECAME_REPORTER="S00";var T=oe,t=D(1180);function e(S){var W,H,Te=(S=S||{}).eventBus,Ge=S.dashMetrics,Ce=S.metricsConstants,be=S.events;function Se(Ot){var Mt=new T;if(H){for(var Jt in Ot)Ot.hasOwnProperty(Jt)&&(Mt[Jt]=Ot[Jt]);Mt.mpdurl||(Mt.mpdurl=H.originalUrl||H.url),Mt.terror||(Mt.terror=new Date),Ge.addDVBErrors(Mt)}}function Ue(Ot){Ot.error||(H=Ot.manifest)}function ze(Ot){Se({errorcode:T.BASE_URL_CHANGED,servicelocation:Ot.entry})}function It(){Se({errorcode:T.BECAME_REPORTER})}function nt(Ot){var Mt;Ot.metric===Ce.HTTP_REQUEST&&((Mt=Ot.value).responsecode===0||Mt.responsecode==null||Mt.responsecode>=400||Mt.responsecode<100||Mt.responsecode>=600)&&Se({errorcode:Mt.responsecode||T.CONNECTION_ERROR,url:Mt.url,terror:Mt.tresponse,servicelocation:Mt._serviceLocation})}function Lt(Ot){var Mt;switch(Ot.error?Ot.error.code:0){case MediaError.MEDIA_ERR_NETWORK:Mt=T.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:Mt=T.CORRUPT_MEDIA_OTHER;break;default:return}Se({errorcode:Mt})}return W={initialize:function(){Te.on(be.MANIFEST_UPDATED,Ue,W),Te.on(be.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,ze,W),Te.on(be.METRIC_ADDED,nt,W),Te.on(be.METRIC_UPDATED,nt,W),Te.on(be.PLAYBACK_ERROR,Lt,W),Te.on(t.Z.BECAME_REPORTING_PLAYER,It,W)},reset:function(){Te.off(be.MANIFEST_UPDATED,Ue,W),Te.off(be.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,ze,W),Te.off(be.METRIC_ADDED,nt,W),Te.off(be.METRIC_UPDATED,nt,W),Te.off(be.PLAYBACK_ERROR,Lt,W),Te.off(t.Z.BECAME_REPORTING_PLAYER,It,W)}}}e.__dashjs_factory_name="DVBErrorsTranslator";var y=dashjs.FactoryMaker.getSingletonFactory(e),p=D(2295);function u(S){S=S||{};var W,H,Te=!1,Ge=this.context,Ce=S.mediaElement;return W={initialize:function(be){be&&be.length&&(be.forEach(function(Se){var Ue=Se.starttime,ze=Ue+Se.duration;H.add(Ue,ze)}),Te=!!be[0]._useWallClockTime)},reset:function(){H.clear()},isEnabled:function(){var be,Se=H.length;if(!Se)return!0;be=Te?new Date().getTime()/1e3:Ce.currentTime;for(var Ue=0;Ue<Se;Ue+=1){var ze=H.start(Ue),It=H.end(Ue);if(ze<=be&&be<It)return!0}return!1}},H=(0,p.Z)(Ge).create(),W}u.__dashjs_factory_name="RangeController";var h=dashjs.FactoryMaker.getClassFactory(u);function E(){return{serialise:function S(W){var H,Te,Ge=[],Ce=[];for(H in W)if(W.hasOwnProperty(H)&&H.indexOf("_")!==0){if((Te=W[H])==null&&(Te=""),Array.isArray(Te)){if(!Te.length)continue;Ce=[],Te.forEach(function(be){var Se=Object.prototype.toString.call(be).slice(8,-1)!=="Object";Ce.push(Se?be:S(be))}),Te=Ce.map(encodeURIComponent).join(",")}else typeof Te=="string"?Te=encodeURIComponent(Te):Te instanceof Date?Te=Te.toISOString():typeof Te=="number"&&(Te=Math.round(Te));Ge.push(H+"="+Te)}return Ge.join("&")}}}E.__dashjs_factory_name="MetricSerialiser";var n=dashjs.FactoryMaker.getSingletonFactory(E);function c(){var S,W,H,Te=window.crypto||window.msCrypto,Ge=Uint32Array,Ce=Math.pow(2,8*Ge.BYTES_PER_ELEMENT)-1;function be(){Te&&(S||(S=new Ge(10)),Te.getRandomValues(S),W=0)}return H={random:function(Se,Ue){var ze;return Se||(Se=0),Ue||(Ue=1),Te?(W===S.length&&be(),ze=S[W]/Ce,W+=1):ze=Math.random(),ze*(Ue-Se)+Se}},be(),H}c.__dashjs_factory_name="RNG";var d=dashjs.FactoryMaker.getSingletonFactory(c),C=D(5717);function Z(S){var W;S=S||{};var H,Te,Ge,Ce,be,Se,Ue,ze=this.context,It=[],nt=S.metricsConstants;function Lt(){Ce=!1,be=!1,Se=null,Ue=null}return W={report:function(Ot,Mt){Array.isArray(Mt)||(Mt=[Mt]),be&&Ue.isEnabled()&&Mt.forEach(function(Jt){var dn=H.serialise(Jt);Ot!==nt.DVB_ERRORS&&(dn="metricname=".concat(Ot,"&").concat(dn)),function(pn,Gn,_n){var An=new XMLHttpRequest;An.withCredentials=Te.getXHRWithCredentialsForType(nt.HTTP_REQUEST_DVB_REPORTING_TYPE);var qn=function(){var yn=It.indexOf(An);yn!==-1&&(It.splice(yn,1),!(An.status>=200&&An.status<300)&&_n&&_n())};It.push(An);try{An.open("GET",pn),An.onloadend=qn,An.onerror=qn,An.send()}catch{An.onerror()}}(dn="".concat(Se,"?").concat(dn),0,function(){be=!1})})},initialize:function(Ot,Mt){var Jt;if(Ue=Mt,!(Se=Ot.dvb_reportingUrl))throw new Error("required parameter missing (dvb:reportingUrl)");Ce||((Jt=Ot.dvb_probability)&&(Jt===1e3||Jt/1e3>=Ge.random())&&(be=!0),Ce=!0)},reset:function(){Lt()}},H=n(ze).getInstance(),Ge=d(ze).getInstance(),Te=(0,C.Z)(ze).getInstance(),Lt(),W}Z.__dashjs_factory_name="DVBReporting";var k=dashjs.FactoryMaker.getClassFactory(Z);function x(S){S=S||{};var W,H={"urn:dvb:dash:reporting:2014":k},Te=this.context,Ge=S.debug?S.debug.getLogger(W):{},Ce=S.metricsConstants,be=S.mediaPlayerModel||{};return{create:function(Se,Ue){var ze;try{(ze=H[Se.schemeIdUri](Te).create({metricsConstants:Ce,mediaPlayerModel:be})).initialize(Se,Ue)}catch(It){ze=null,Ge.error("ReportingFactory: could not create Reporting with schemeIdUri ".concat(Se.schemeIdUri," (").concat(It.message,")"))}return ze},register:function(Se,Ue){H[Se]=Ue},unregister:function(Se){delete H[Se]}}}x.__dashjs_factory_name="ReportingFactory";var ne=dashjs.FactoryMaker.getSingletonFactory(x);function O(S){var W=[],H=ne(this.context).getInstance(S);return{initialize:function(Te,Ge){Te.some(function(Ce){var be=H.create(Ce,Ge);if(be)return W.push(be),!0})},reset:function(){W.forEach(function(Te){return Te.reset()}),W=[]},report:function(Te,Ge){W.forEach(function(Ce){return Ce.report(Te,Ge)})}}}O.__dashjs_factory_name="ReportingController";var z=dashjs.FactoryMaker.getClassFactory(O);function te(){return{reconstructFullMetricName:function(S,W,H){var Te=S;return W&&(Te+="("+W,H&&H.length&&(Te+=","+H),Te+=")"),Te},validateN:function(S){if(!S)throw new Error("missing n");if(isNaN(S))throw new Error("n is NaN");if(S<0)throw new Error("n must be positive");return S}}}te.__dashjs_factory_name="HandlerHelpers";var V=dashjs.FactoryMaker.getSingletonFactory(te);function ee(S){var W,H,Te,Ge,Ce;S=S||{};var be=this.context,Se=V(be).getInstance(),Ue=[],ze=S.metricsConstants;function It(){var nt=function(){try{return Object.keys(Ue).map(function(Lt){return Ue[Lt]}).reduce(function(Lt,Ot){return Lt.level<Ot.level?Lt:Ot})}catch{return}}();nt&&Ce!==nt.t&&(Ce=nt.t,W.report(Te,nt))}return{initialize:function(nt,Lt,Ot){Lt&&(H=Se.validateN(Ot),W=Lt,Te=Se.reconstructFullMetricName(nt,Ot),Ge=setInterval(It,H))},reset:function(){clearInterval(Ge),Ge=null,H=0,W=null,Ce=null},handleNewMetric:function(nt,Lt,Ot){nt===ze.BUFFER_LEVEL&&(Ue[Ot]=Lt)}}}ee.__dashjs_factory_name="BufferLevelHandler";var ce=dashjs.FactoryMaker.getClassFactory(ee),Ee=dashjs.FactoryMaker.getClassFactory(function(S){var W,H=(S=S||{}).eventBus,Te=S.metricsConstants;function Ge(){H.off(t.Z.METRICS_INITIALISATION_COMPLETE,Ge,this),H.trigger(t.Z.BECAME_REPORTING_PLAYER)}return{initialize:function(Ce,be){be&&(W=be,H.on(t.Z.METRICS_INITIALISATION_COMPLETE,Ge,this))},reset:function(){W=null},handleNewMetric:function(Ce,be){Ce===Te.DVB_ERRORS&&W&&W.report(Ce,be)}}});function $(S){var W,H,Te,Ge,Ce;S=S||{};var be=[],Se=V(this.context).getInstance(),Ue=S.metricsConstants;function ze(){var It=be;It.length&&W&&W.report(Ge,It),be=[]}return{initialize:function(It,nt,Lt,Ot){nt&&(H=Se.validateN(Lt),W=nt,Ot&&Ot.length&&(Te=Ot),Ge=Se.reconstructFullMetricName(It,Lt,Ot),Ce=setInterval(ze,H))},reset:function(){clearInterval(Ce),Ce=null,H=null,Te=null,be=[],W=null},handleNewMetric:function(It,nt){It===Ue.HTTP_REQUEST&&(Te&&Te!==nt.type||be.push(nt))}}}$.__dashjs_factory_name="HttpListHandler";var Ie=dashjs.FactoryMaker.getClassFactory($);function Ze(){var S,W;return{initialize:function(H,Te){S=H,W=Te},reset:function(){W=null,S=void 0},handleNewMetric:function(H,Te){H===S&&W&&W.report(S,Te)}}}Ze.__dashjs_factory_name="GenericMetricHandler";var Ve=dashjs.FactoryMaker.getClassFactory(Ze);function ye(S){var W,H=(S=S||{}).debug?S.debug.getLogger(W):{},Te=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,Ge=this.context,Ce={BufferLevel:ce,DVBErrors:Ee,HttpList:Ie,PlayList:Ve,RepSwitchList:Ve,TcpList:Ve};return{create:function(be,Se){var Ue,ze=be.match(Te);if(ze){try{(Ue=Ce[ze[1]](Ge).create({eventBus:S.eventBus,metricsConstants:S.metricsConstants})).initialize(ze[1],Se,ze[3],ze[5])}catch(It){Ue=null,H.error("MetricsHandlerFactory: Could not create handler for type ".concat(ze[1]," with args ").concat(ze[3],", ").concat(ze[5]," (").concat(It.message,")"))}return Ue}},register:function(be,Se){Ce[be]=Se},unregister:function(be){delete Ce[be]}}}ye.__dashjs_factory_name="MetricsHandlerFactory";var ke=dashjs.FactoryMaker.getSingletonFactory(ye);function Ke(S){S=S||{};var W,H=[],Te=this.context,Ge=S.eventBus,Ce=S.events,be=ke(Te).getInstance({debug:S.debug,eventBus:S.eventBus,metricsConstants:S.metricsConstants});function Se(Ue){H.forEach(function(ze){ze.handleNewMetric(Ue.metric,Ue.value,Ue.mediaType)})}return W={initialize:function(Ue,ze){Ue.split(",").forEach(function(It,nt,Lt){var Ot;if(It.indexOf("(")!==-1&&It.indexOf(")")===-1){var Mt=Lt[nt+1];Mt&&Mt.indexOf("(")===-1&&Mt.indexOf(")")!==-1&&(It+=","+Mt,delete Lt[nt+1])}(Ot=be.create(It,ze))&&H.push(Ot)}),Ge.on(Ce.METRIC_ADDED,Se,W),Ge.on(Ce.METRIC_UPDATED,Se,W)},reset:function(){Ge.off(Ce.METRIC_ADDED,Se,W),Ge.off(Ce.METRIC_UPDATED,Se,W),H.forEach(function(Ue){return Ue.reset()}),H=[]}}}Ke.__dashjs_factory_name="MetricsHandlersController";var tt=dashjs.FactoryMaker.getClassFactory(Ke);function ve(S){var W,H,Te;S=S||{};var Ge=this.context;function Ce(){W&&W.reset(),H&&H.reset(),Te&&Te.reset()}return{initialize:function(be){try{(Te=h(Ge).create({mediaElement:S.mediaElement})).initialize(be.Range),(H=z(Ge).create({debug:S.debug,metricsConstants:S.metricsConstants,mediaPlayerModel:S.mediaPlayerModel})).initialize(be.Reporting,Te),(W=tt(Ge).create({debug:S.debug,eventBus:S.eventBus,metricsConstants:S.metricsConstants,events:S.events})).initialize(be.metrics,H)}catch(Se){throw Ce(),Se}},reset:Ce}}ve.__dashjs_factory_name="MetricsController";var Fe=dashjs.FactoryMaker.getClassFactory(ve),pt=function S(){(function(W,H){if(!(W instanceof H))throw new TypeError("Cannot call a class as a function")})(this,S),this.metrics="",this.Range=[],this.Reporting=[]},ft=function S(){(function(W,H){if(!(W instanceof H))throw new TypeError("Cannot call a class as a function")})(this,S),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1},qe=function S(){(function(W,H){if(!(W instanceof H))throw new TypeError("Cannot call a class as a function")})(this,S),this.schemeIdUri="",this.value="",this.dvb_reportingUrl="",this.dvb_probability=1e3};function Je(S){var W=(S=S||{}).adapter,H=S.constants;return{getMetrics:function(Te){var Ge=[];return Te&&Te.Metrics_asArray&&Te.Metrics_asArray.forEach(function(Ce){var be=new pt,Se=W.getIsDynamic(Te);Ce.hasOwnProperty("metrics")&&(be.metrics=Ce.metrics,Ce.Range_asArray&&Ce.Range_asArray.forEach(function(Ue){var ze=new ft;ze.starttime=function(It,nt,Lt){var Ot,Mt,Jt=0;return nt?Jt=W.getAvailabilityStartTime(It)/1e3:(Ot=W.getRegularPeriods(It)).length&&(Jt=Ot[0].start),Mt=Jt,Lt&&Lt.hasOwnProperty(H.START_TIME)&&(Mt+=Lt.starttime),Mt}(Te,Se,Ue),Ue.hasOwnProperty("duration")?ze.duration=Ue.duration:ze.duration=W.getDuration(Te),ze._useWallClockTime=Se,be.Range.push(ze)}),Ce.Reporting_asArray&&(Ce.Reporting_asArray.forEach(function(Ue){var ze=new qe;Ue.hasOwnProperty(H.SCHEME_ID_URI)&&(ze.schemeIdUri=Ue.schemeIdUri,Ue.hasOwnProperty("value")&&(ze.value=Ue.value),Ue.hasOwnProperty(H.DVB_REPORTING_URL)&&(ze.dvb_reportingUrl=Ue[H.DVB_REPORTING_URL]),Ue.hasOwnProperty(H.DVB_PROBABILITY)&&(ze.dvb_probability=Ue[H.DVB_PROBABILITY]),be.Reporting.push(ze))}),Ge.push(be)))}),Ge}}}Je.__dashjs_factory_name="ManifestParsing";var ge=dashjs.FactoryMaker.getSingletonFactory(Je);function he(S){var W;S=S||{};var H={},Te=this.context,Ge=S.eventBus,Ce=S.events;function be(Ue){if(!Ue.error){var ze=Object.keys(H);ge(Te).getInstance({adapter:S.adapter,constants:S.constants}).getMetrics(Ue.manifest).forEach(function(It){var nt=JSON.stringify(It);if(H.hasOwnProperty(nt))ze.splice(nt,1);else try{var Lt=Fe(Te).create(S);Lt.initialize(It),H[nt]=Lt}catch{}}),ze.forEach(function(It){H[It].reset(),delete H[It]}),Ge.trigger(t.Z.METRICS_INITIALISATION_COMPLETE)}}function Se(){Object.keys(H).forEach(function(Ue){H[Ue].reset()}),H={}}return W={reset:function(){Ge.off(Ce.MANIFEST_UPDATED,be,W),Ge.off(Ce.STREAM_TEARDOWN_COMPLETE,Se,W)}},Ge.on(Ce.MANIFEST_UPDATED,be,W),Ge.on(Ce.STREAM_TEARDOWN_COMPLETE,Se,W),W}he.__dashjs_factory_name="MetricsCollectionController";var Ye=dashjs.FactoryMaker.getClassFactory(he);function f(){var S=this.context;return{createMetricsReporting:function(W){return y(S).getInstance({eventBus:W.eventBus,dashMetrics:W.dashMetrics,metricsConstants:W.metricsConstants,events:W.events}).initialize(),Ye(S).create(W)},getReportingFactory:function(){return ne(S).getInstance()},getMetricsHandlerFactory:function(){return ke(S).getInstance()}}}f.__dashjs_factory_name="MetricsReporting";var i=dashjs.FactoryMaker.getClassFactory(f);i.events=t.Z,dashjs.FactoryMaker.updateClassFactory(f.__dashjs_factory_name,i);var v=i},1180:function(et,Re,D){function oe(p){return oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},oe(p)}function T(p,u){return T=Object.setPrototypeOf||function(h,E){return h.__proto__=E,h},T(p,u)}function t(p,u){return!u||oe(u)!=="object"&&typeof u!="function"?function(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}(p):u}function e(p){return e=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)},e(p)}var y=new(function(p){(function(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&T(c,d)})(n,p);var u,h,E=(u=n,h=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var c,d=e(u);if(h){var C=e(this).constructor;c=Reflect.construct(d,arguments,C)}else c=d.apply(this,arguments);return t(this,c)});function n(){var c;return function(d,C){if(!(d instanceof C))throw new TypeError("Cannot call a class as a function")}(this,n),(c=E.call(this)).METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",c.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",c.CMCD_DATA_GENERATED="cmcdDataGenerated",c}return n}(D(8342).Z));Re.Z=y},5717:function(et,Re,D){var oe=D(2610),T=D(5448),t=D(1264),e=D(3106),y=D(1767),p=D(3393);function u(){var h,E,n,c,d,C,Z,k,x=this.context,ne=(0,t.Z)(x).getInstance();function O(){c=[],d=[],C=[],k=[],Z=null,E=[]}function z(ce,Ee){var $=-1;ce.some(function(Ie,Ze){if(Ie===Ee)return $=Ze,!0}),$<0||ce.splice($,1)}function te(ce){var Ee;for(Ee=0;Ee<k.length;Ee++)if(k[Ee].rulename===ce)return Ee;return-1}function V(ce,Ee){ee(ce,Ee);var $=new oe.Z;$.schemeIdUri=ce,$.value=Ee,E.push($)}function ee(ce,Ee){(0,e.PS)(ce,"string"),(0,e.PS)(Ee,"string"),E.forEach(function($,Ie){$.schemeIdUri===ce&&$.value===Ee&&E.splice(Ie,1)})}return h={getCustomInitialTrackSelectionFunction:function(){return Z},setCustomInitialTrackSelectionFunction:function(ce){Z=ce},resetCustomInitialTrackSelectionFunction:function(){Z=null},getLicenseResponseFilters:function(){return d},getLicenseRequestFilters:function(){return c},getCustomCapabilitiesFilters:function(){return C},registerCustomCapabilitiesFilter:function(ce){C.push(ce)},registerLicenseResponseFilter:function(ce){d.push(ce)},registerLicenseRequestFilter:function(ce){c.push(ce)},unregisterCustomCapabilitiesFilter:function(ce){z(C,ce)},unregisterLicenseResponseFilter:function(ce){z(d,ce)},unregisterLicenseRequestFilter:function(ce){z(c,ce)},addAbrCustomRule:function(ce,Ee,$){if(typeof ce!="string"||ce!==y.Z.ABANDON_FRAGMENT_RULES&&ce!==y.Z.QUALITY_SWITCH_RULES||typeof Ee!="string")throw p.Z.BAD_ARGUMENT_ERROR;var Ie=te(Ee);Ie===-1?k.push({type:ce,rulename:Ee,rule:$}):(k[Ie].type=ce,k[Ie].rule=$)},removeAllAbrCustomRule:function(){k=[]},removeAbrCustomRule:function(ce){if(ce){var Ee=te(ce);Ee!==-1&&k.splice(Ee,1)}else k=[]},getAbrCustomRules:function(){return k},addUTCTimingSource:V,removeUTCTimingSource:ee,getUTCTimingSources:function(){return E},clearDefaultUTCTimingSources:function(){E=[]},restoreDefaultUTCTimingSources:function(){var ce=ne.get().streaming.utcSynchronization.defaultTimingSource;V(ce.scheme,ce.value)},setXHRWithCredentialsForType:function ce(Ee,$){Ee?n[Ee]=!!$:Object.keys(n).forEach(function(Ie){ce(Ie,$)})},getXHRWithCredentialsForType:function(ce){var Ee=n[ce];return Ee===void 0?n.default:Ee},setConfig:function(){},reset:function(){O()}},n={default:!1},O(),h}u.__dashjs_factory_name="CustomParametersModel",Re.Z=T.Z.getSingletonFactory(u)},9032:function(et,Re,D){var oe=D(5448),T=D(7473);function t(y){var p=(y=y||{}).requestModifier;function u(h){var E=new Date,n=h.request,c=new XMLHttpRequest;if(c.open(h.method,h.url,!0),n.responseType&&(c.responseType=n.responseType),n.range&&c.setRequestHeader("Range","bytes="+n.range),n.requestStartDate||(n.requestStartDate=E),p&&p.modifyRequestHeader&&(c=p.modifyRequestHeader(c,{url:h.url})),h.headers)for(var d in h.headers){var C=h.headers[d];C&&c.setRequestHeader(d,C)}c.withCredentials=h.withCredentials,c.onload=h.onload,c.onloadend=h.onend,c.onerror=h.onerror,c.onprogress=h.progress,c.onabort=h.onabort,c.ontimeout=h.ontimeout,c.timeout=h.timeout,c.send(),h.response=c}return{load:function(h){p&&p.modifyRequest?(0,T.k)(h,p).then(function(){return u(h)}):u(h)},abort:function(h){var E=h.response;E.onloadend=E.onerror=E.onprogress=void 0,E.abort()}}}t.__dashjs_factory_name="XHRLoader";var e=oe.Z.getClassFactory(t);Re.Z=e},1737:function(et,Re,D){function oe(vt,mt){for(var yt=0;yt<mt.length;yt++){var je=mt[yt];je.enumerable=je.enumerable||!1,je.configurable=!0,"value"in je&&(je.writable=!0),Object.defineProperty(vt,je.key,je)}}D.d(Re,{default:function(){return Pr}});var T={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]},t=function(){function vt(){(function(je,st){if(!(je instanceof st))throw new TypeError("Cannot call a class as a function")})(this,vt)}var mt,yt;return mt=vt,yt=[{key:"findCencContentProtection",value:function(je){for(var st=null,He=0;He<je.length;++He){var it=je[He];it.schemeIdUri.toLowerCase()!=="urn:mpeg:dash:mp4protection:2011"||it.value.toLowerCase()!=="cenc"&&it.value.toLowerCase()!=="cbcs"||(st=it)}return st}},{key:"getPSSHData",value:function(je){var st=8,He=new DataView(je),it=He.getUint8(st);return st+=20,it>0&&(st+=4+16*He.getUint32(st)),st+=4,je.slice(st)}},{key:"getPSSHForKeySystem",value:function(je,st){var He=vt.parsePSSHList(st);return je&&He.hasOwnProperty(je.uuid.toLowerCase())?He[je.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(je,st){return"pssh"in je?(je.pssh.__text=je.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),st.decodeArray(je.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(je){if(je==null)return[];for(var st=new DataView(je.buffer||je),He={},it=0;;){var Rt,wt,Bt=void 0,jt=it;if(it>=st.buffer.byteLength)break;if(Rt=it+st.getUint32(it),it+=4,st.getUint32(it)===1886614376)if(it+=4,(wt=st.getUint8(it))===0||wt===1){it++,it+=3,Bt="";var Ct=void 0,ht=void 0;for(Ct=0;Ct<4;Ct++)Bt+=(ht=st.getUint8(it+Ct).toString(16)).length===1?"0"+ht:ht;for(it+=4,Bt+="-",Ct=0;Ct<2;Ct++)Bt+=(ht=st.getUint8(it+Ct).toString(16)).length===1?"0"+ht:ht;for(it+=2,Bt+="-",Ct=0;Ct<2;Ct++)Bt+=(ht=st.getUint8(it+Ct).toString(16)).length===1?"0"+ht:ht;for(it+=2,Bt+="-",Ct=0;Ct<2;Ct++)Bt+=(ht=st.getUint8(it+Ct).toString(16)).length===1?"0"+ht:ht;for(it+=2,Bt+="-",Ct=0;Ct<6;Ct++)Bt+=(ht=st.getUint8(it+Ct).toString(16)).length===1?"0"+ht:ht;it+=6,it+=4,He[Bt=Bt.toLowerCase()]=st.buffer.slice(jt,Rt),it=Rt}else it=Rt;else it=Rt}return He}},{key:"getLicenseServerUrlFromMediaInfo",value:function(je,st){try{if(!je||je.length===0)return null;for(var He=0,it=null;He<je.length&&!it;){var Rt=je[He];if(Rt&&Rt.contentProtection&&Rt.contentProtection.length>0){var wt=Rt.contentProtection.filter(function(en){return en.schemeIdUri&&en.schemeIdUri===st});if(wt&&wt.length>0)for(var Bt=0;Bt<wt.length&&!it;){for(var jt=wt[Bt],Ct=0;Ct<T.attributes.length&&!it;){for(var ht=0,kt=T.attributes[Ct];ht<T.prefixes.length&&!it;){var Ft=T.prefixes[ht];jt[kt]&&jt[kt].__prefix&&jt[kt].__prefix===Ft&&jt[kt].__text&&(it=jt[kt].__text),ht+=1}Ct+=1}Bt+=1}}He+=1}return it}catch{return null}}}],yt&&oe(mt,yt),vt}(),e=function vt(mt,yt){(function(je,st){if(!(je instanceof st))throw new TypeError("Cannot call a class as a function")})(this,vt),this.contentType=mt,this.robustness=yt},y=function vt(mt,yt,je,st,He){(function(it,Rt){if(!(it instanceof Rt))throw new TypeError("Cannot call a class as a function")})(this,vt),this.initDataTypes=["cenc"],mt&&mt.length&&(this.audioCapabilities=mt),yt&&yt.length&&(this.videoCapabilities=yt),this.distinctiveIdentifier=je,this.persistentState=st,this.sessionTypes=He};function p(vt){return p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(mt){return typeof mt}:function(mt){return mt&&typeof Symbol=="function"&&mt.constructor===Symbol&&mt!==Symbol.prototype?"symbol":typeof mt},p(vt)}function u(vt,mt){return u=Object.setPrototypeOf||function(yt,je){return yt.__proto__=je,yt},u(vt,mt)}function h(vt,mt){return!mt||p(mt)!=="object"&&typeof mt!="function"?function(yt){if(yt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return yt}(vt):mt}function E(vt){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(mt){return mt.__proto__||Object.getPrototypeOf(mt)},E(vt)}var n=new(function(vt){(function(He,it){if(typeof it!="function"&&it!==null)throw new TypeError("Super expression must either be null or a function");He.prototype=Object.create(it&&it.prototype,{constructor:{value:He,writable:!0,configurable:!0}}),it&&u(He,it)})(st,vt);var mt,yt,je=(mt=st,yt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var He,it=E(mt);if(yt){var Rt=E(this).constructor;He=Reflect.construct(it,arguments,Rt)}else He=it.apply(this,arguments);return h(this,He)});function st(){var He;return function(it,Rt){if(!(it instanceof Rt))throw new TypeError("Cannot call a class as a function")}(this,st),(He=je.call(this)).MEDIA_KEYERR_CODE=100,He.MEDIA_KEYERR_UNKNOWN_CODE=101,He.MEDIA_KEYERR_CLIENT_CODE=102,He.MEDIA_KEYERR_SERVICE_CODE=103,He.MEDIA_KEYERR_OUTPUT_CODE=104,He.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,He.MEDIA_KEYERR_DOMAIN_CODE=106,He.MEDIA_KEY_MESSAGE_ERROR_CODE=107,He.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,He.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,He.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,He.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,He.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,He.KEY_SESSION_CREATED_ERROR_CODE=113,He.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,He.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",He.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",He.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",He.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",He.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",He.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",He.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",He.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",He.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",He.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",He.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",He.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",He.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",He.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --",He}return st}(D(2230).Z)),c=D(5459),d=function vt(mt,yt,je,st,He,it,Rt,wt){(function(Bt,jt){if(!(Bt instanceof jt))throw new TypeError("Cannot call a class as a function")})(this,vt),this.url=mt,this.method=yt,this.responseType=je,this.headers=st,this.withCredentials=He,this.messageType=it,this.sessionId=Rt,this.data=wt},C=function vt(mt,yt,je){(function(st,He){if(!(st instanceof He))throw new TypeError("Cannot call a class as a function")})(this,vt),this.url=mt,this.headers=yt,this.data=je},Z=D(7855),k=D(703),x=D(3393),ne=D(5448);function O(vt){return O=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(mt){return typeof mt}:function(mt){return mt&&typeof Symbol=="function"&&mt.constructor===Symbol&&mt!==Symbol.prototype?"symbol":typeof mt},O(vt)}function z(vt){var mt,yt,je,st,He,it,Rt,wt,Bt,jt,Ct,ht=(vt=vt||{}).protectionKeyController,kt=vt.protectionModel,Ft=vt.eventBus,en=vt.events,ln=vt.debug,vn=vt.BASE64,Qt=vt.constants,Et=[],Tt=vt.cmcdModel,Nt=vt.settings,$t=vt.customParametersModel;function rn(){if(!(Ft&&Ft.hasOwnProperty("on")&&ht&&ht.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function mn(bt,zt){wt||Bt?wt&&En():function(cn,Pn){if(!Bt){Bt=!0;var Dn,Zn=[];cn=cn.sort(function(Ln,In){return(He&&He[Ln.ks.systemString]&&He[Ln.ks.systemString].priority>=0?He[Ln.ks.systemString].priority:cn.length)-(He&&He[In.ks.systemString]&&He[In.ks.systemString].priority>=0?He[In.ks.systemString].priority:cn.length)});for(var Sn=0;Sn<cn.length;Sn++){var zn=Rr(cn[Sn]);Zn.push({ks:cn[Sn].ks,configs:[zn],protData:cn[Sn].protData})}kt.requestKeySystemAccess(Zn).then(function(Ln){var In=(Dn=Ln.data).mksa&&Dn.mksa.selectedSystemString?Dn.mksa.selectedSystemString:Dn.keySystem.systemString;return yt.info("DRM: KeySystem Access Granted for system string ("+In+")!  Selecting key system..."),kt.selectKeySystem(Dn)}).then(function(Ln){if(wt=Ln,Bt=!1,kt){Ft.trigger(en.KEY_SYSTEM_SELECTED,{data:Dn});var In=Fn(wt);In&&In.serverCertificate&&In.serverCertificate.length>0&&kt.setServerCertificate(vn.decodeArray(In.serverCertificate).buffer),En()}}).catch(function(Ln){wt=null,Bt=!1,Pn||Ft.trigger(en.KEY_SYSTEM_SELECTED,{data:null,error:new c.Z(n.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,n.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+Ln.error)})})}}(bt,zt)}function En(){for(var bt,zt=0;zt<je.length;zt++)for(bt=0;bt<je[zt].length;bt++)if(wt===je[zt][bt].ks){jn(je[zt][bt]);break}je=[]}function jn(bt){if(ht.isClearKey(wt)&&bt.protData&&bt.protData.hasOwnProperty("clearkeys")&&Object.keys(bt.protData.clearkeys).length!==0){var zt={kids:Object.keys(bt.protData.clearkeys)};bt.initData=new TextEncoder().encode(JSON.stringify(zt))}bt.sessionId?Un(bt):bt.initData!==null&&Rn(bt)}function Un(bt){rn(),kt.loadKeySession(bt)}function Rn(bt){var zt=t.getPSSHForKeySystem(wt,bt?bt.initData:null);if(zt){if(function(cn){if(!cn)return!1;try{for(var Pn=kt.getSessions(),Dn=0;Dn<Pn.length;Dn++)if(Pn[Dn].getKeyId()===cn)return!0;return!1}catch{return!1}}(bt.keyId)||Mn(zt))return;try{bt.initData=zt,kt.createKeySession(bt)}catch(cn){Ft.trigger(en.KEY_SESSION_CREATED,{data:null,error:new c.Z(n.KEY_SESSION_CREATED_ERROR_CODE,n.KEY_SESSION_CREATED_ERROR_MESSAGE+cn.message)})}}else bt&&bt.initData?kt.createKeySession(bt):Ft.trigger(en.KEY_SESSION_CREATED,{data:null,error:new c.Z(n.KEY_SESSION_CREATED_ERROR_CODE,n.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(wt?wt.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function Fn(bt){if(bt){var zt=bt.systemString;if(He)return zt in He?He[zt]:null}return null}function Mn(bt){if(!bt)return!1;try{for(var zt=kt.getAllInitData(),cn=0;cn<zt.length;cn++)if(ht.initDataEquals(bt,zt[cn]))return yt.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch{return!1}}function Kn(bt){rn(),bt?(kt.setMediaElement(bt),Ft.on(en.NEED_KEY,Yr,mt)):bt===null&&(kt.setMediaElement(bt),Ft.off(en.NEED_KEY,Yr,mt))}function Rr(bt){var zt=bt.protData,cn=[],Pn=[],Dn=zt&&zt.audioRobustness&&zt.audioRobustness.length>0?zt.audioRobustness:Rt,Zn=zt&&zt.videoRobustness&&zt.videoRobustness.length>0?zt.videoRobustness:Rt,Sn=bt.sessionType,zn=zt&&zt.distinctiveIdentifier?zt.distinctiveIdentifier:"optional",Ln=zt&&zt.persistentState?zt.persistentState:Sn==="temporary"?"optional":"required";return st.forEach(function(In){In.type===Qt.AUDIO?cn.push(new e(In.codec,Dn)):In.type===Qt.VIDEO&&Pn.push(new e(In.codec,Zn))}),new y(cn,Pn,zn,Ln,[Sn])}function yr(bt){bt.error?Ft.trigger(en.KEY_STATUSES_CHANGED,{data:null,error:bt.error}):yt.debug("DRM: key status = "+bt.status)}function ar(bt){yt.debug("DRM: onKeyMessage");var zt=bt.data;Ft.trigger(en.KEY_MESSAGE,{data:zt});var cn=zt.messageType?zt.messageType:"license-request",Pn=zt.message,Dn=zt.sessionToken,Zn=Fn(wt),Sn=ht.getLicenseServerModelInstance(wt,Zn,cn),zn={sessionToken:Dn,messageType:cn};if(Pn&&Pn.byteLength!==0){if(!Sn)return yt.debug("DRM: License server request not required for this message (type = "+bt.data.messageType+").  Session ID = "+Dn.getSessionId()),void Qn(zn);if(ht.isClearKey(wt)){var Ln=ht.processClearKeyLicenseRequest(wt,Zn,Pn);if(Ln&&Ln.keyPairs&&Ln.keyPairs.length>0)return yt.debug("DRM: ClearKey license request handled by application!"),Qn(zn),void kt.updateKeySession(Dn,Ln)}(function(In,ur,Wn){var dr=In.sessionToken,nr=In.messageType?In.messageType:"license-request",Er={sessionToken:dr,messageType:nr},gr=wt?wt.systemString:null,ei=function(wn,vr,_r,Tr,Ci){var lr=null,si=Tr.message;if(wn&&wn.serverURL){var fr=wn.serverURL;typeof fr=="string"&&fr!==""?lr=fr:O(fr)==="object"&&fr.hasOwnProperty(vr)&&(lr=fr[vr])}else if(wn&&wn.laURL&&wn.laURL!=="")lr=wn.laURL;else if(!(lr=t.getLicenseServerUrlFromMediaInfo(st,wt.schemeIdURI))&&!ht.isClearKey(wt)){var Kr=t.getPSSHData(_r.initData);(lr=wt.getLicenseServerURLFromInitData(Kr))||(lr=Tr.laURL)}return lr=Ci.getServerURLFromMessage(lr,si,vr)}(Wn,nr,dr,In,ur);if(ei){var wr={},jr=!1;Wn&&Br(wr,Wn.httpRequestHeaders);var ti=In.message;Br(wr,wt.getRequestHeadersFromMessage(ti)),Object.keys(wr).forEach(function(wn){wn.toLowerCase()==="authorization"&&(jr=!0)}),Wn&&typeof Wn.withCredentials=="boolean"&&(jr=Wn.withCredentials);var ni=function(wn){if(kt)if(wn.status>=200&&wn.status<=299){var vr=k.Z.parseHttpHeaders(wn.getAllResponseHeaders?wn.getAllResponseHeaders():null),_r=new C(wn.responseURL,vr,wn.response);qr($t.getLicenseResponseFilters(),_r).then(function(){var Tr=ur.getLicenseMessage(_r.data,gr,nr);Tr!==null?(Qn(Er),kt.updateKeySession(dr,Tr)):Gr(wn,Er,gr,nr,ur)})}else Gr(wn,Er,gr,nr,ur)},ri=function(wn){Qn(Er,new c.Z(n.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,n.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+gr+' update, XHR aborted. status is "'+wn.statusText+'" ('+wn.status+"), readyState is "+wn.readyState))},Ri=function(wn){Qn(Er,new c.Z(n.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,n.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+gr+' update, XHR error. status is "'+wn.statusText+'" ('+wn.status+"), readyState is "+wn.readyState))},Hr=wt.getLicenseRequestFromMessage(ti),ii=ur.getHTTPMethod(nr),Vr=ur.getResponseType(gr,nr),wi=Wn&&!isNaN(Wn.httpTimeout)?Wn.httpTimeout:8e3,ai=dr.getSessionId()||null,oi=new d(ei,ii,Vr,wr,jr,nr,ai,Hr),Ni=isNaN(Nt.get().streaming.retryAttempts[Z.w.LICENSE])?3:Nt.get().streaming.retryAttempts[Z.w.LICENSE];qr($t.getLicenseRequestFilters(),oi).then(function(){Jr(oi,Ni,wi,ni,ri,Ri)})}else Qn(Er,new c.Z(n.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,n.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))})(zt,Sn,Zn)}else Qn(zn,new c.Z(n.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,n.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function Qn(bt,zt){Ft.trigger(en.LICENSE_REQUEST_COMPLETE,{data:bt,error:zt})}function Jr(bt,zt,cn,Pn,Dn,Zn){var Sn=new XMLHttpRequest;if(Nt.get().streaming.cmcd&&Nt.get().streaming.cmcd.enabled&&Nt.get().streaming.cmcd.mode===x.Z.CMCD_MODE_QUERY){var zn=Tt.getQueryParameter({url:bt.url,type:Z.w.LICENSE});zn&&(bt.url=k.Z.addAditionalQueryParameterToUrl(bt.url,[zn]))}for(var Ln in Sn.open(bt.method,bt.url,!0),Sn.responseType=bt.responseType,Sn.withCredentials=bt.withCredentials,cn>0&&(Sn.timeout=cn),bt.headers)Sn.setRequestHeader(Ln,bt.headers[Ln]);if(Nt.get().streaming.cmcd&&Nt.get().streaming.cmcd.enabled&&Nt.get().streaming.cmcd.mode===x.Z.CMCD_MODE_HEADER){var In=Tt.getHeaderParameters({url:bt.url,type:Z.w.LICENSE});if(In)for(var ur in In){var Wn=In[ur];Wn&&Sn.setRequestHeader(ur,Wn)}}var dr=function(){zt--;var nr=isNaN(Nt.get().streaming.retryIntervals[Z.w.LICENSE])?1e3:Nt.get().streaming.retryIntervals[Z.w.LICENSE];Ct=setTimeout(function(){Jr(bt,zt,cn,Pn,Dn,Zn)},nr)};Sn.onload=function(){jt=null,this.status>=200&&this.status<=299||zt<=0?Pn(this):(yt.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+zt),dr())},Sn.ontimeout=Sn.onerror=function(){jt=null,zt<=0?Zn(this):(yt.warn("License request network request failed . Retrying it... Pending retries: "+zt),dr())},Sn.onabort=function(){Dn(this)},Ft.trigger(en.LICENSE_REQUEST_SENDING,{url:bt.url,headers:bt.headers,payload:bt.data,sessionId:bt.sessionId}),jt=Sn,Sn.send(bt.data)}function $r(){jt&&(jt.onloadend=jt.onerror=jt.onprogress=void 0,jt.abort(),jt=null),Ct&&(clearTimeout(Ct),Ct=null)}function Br(bt,zt){if(zt)for(var cn in zt)bt[cn]=zt[cn]}function Gr(bt,zt,cn,Pn,Dn){var Zn="NONE",Sn=null;bt.response&&(Zn=Dn.getErrorResponse(bt.response,cn,Pn),Sn={serverResponse:bt.response||null,responseCode:bt.status||null,responseText:bt.statusText||null}),Qn(zt,new c.Z(n.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,n.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+cn+' update, XHR complete. status is "'+bt.statusText+'" ('+bt.status+"), readyState is "+bt.readyState+".  Response is "+Zn,Sn))}function qr(bt,zt){return bt?bt.reduce(function(cn,Pn){return cn.then(function(){return Pn(zt)})},Promise.resolve()):Promise.resolve()}function Yr(bt,zt){if(!Nt.get().streaming.protection.ignoreEmeEncryptedEvent){if(yt.debug("DRM: onNeedKey"),bt.key.initDataType!=="cenc")return void yt.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+bt.key.initDataType);if(st.length===0&&(yt.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(zt=zt===void 0?1:zt+1)<5))return void Et.push(setTimeout(function(){Yr(bt,zt)},500));var cn=bt.key.initData;if(ArrayBuffer.isView(cn)&&(cn=cn.buffer),wt){var Pn=t.getPSSHForKeySystem(wt,cn);if(Pn&&Mn(Pn))return}yt.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(cn)));var Dn=ht.getSupportedKeySystemsFromSegmentPssh(cn,He,it);if(Dn.length===0)return void yt.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!");(function(Zn){je.push(Zn),mn(Zn,!1)})(Dn)}}return mt={initializeForMedia:function(bt){if(!bt)throw new Error("mediaInfo can not be null or undefined");rn(),st.push(bt)},clearMediaInfoArray:function(){st=[]},handleKeySystemFromManifest:function(){if(st&&st.length!==0){var bt=[];st.forEach(function(zt){var cn=ht.getSupportedKeySystemsFromContentProtection(zt.contentProtection,He,it);cn.length>0&&(bt.length===0&&(bt=cn),je.push(cn))}),bt&&bt.length>0&&mn(bt,!0)}},createKeySession:Rn,loadKeySession:Un,removeKeySession:function(bt){rn(),kt.removeKeySession(bt)},closeKeySession:function(bt){rn(),kt.closeKeySession(bt)},setServerCertificate:function(bt){rn(),kt.setServerCertificate(bt)},setMediaElement:Kn,setSessionType:function(bt){it=bt},setRobustnessLevel:function(bt){Rt=bt},setProtectionData:function(bt){He=bt,ht.setProtectionData(bt)},getSupportedKeySystemsFromContentProtection:function(bt){return rn(),ht.getSupportedKeySystemsFromContentProtection(bt,He,it)},getKeySystems:function(){return ht?ht.getKeySystems():[]},setKeySystems:function(bt){ht&&ht.setKeySystems(bt)},stop:function(){$r(),kt&&kt.stop()},reset:function(){Ft.off(en.INTERNAL_KEY_MESSAGE,ar,mt),Ft.off(en.INTERNAL_KEY_STATUS_CHANGED,yr,mt),rn(),$r(),Kn(null),wt=null,Bt=!1,kt&&(kt.reset(),kt=null),Et.forEach(function(bt){return clearTimeout(bt)}),Et=[],st=[],je=[]}},yt=ln.getLogger(mt),je=[],st=[],it="temporary",Rt="",jt=null,Ct=null,Ft.on(en.INTERNAL_KEY_MESSAGE,ar,mt),Ft.on(en.INTERNAL_KEY_STATUS_CHANGED,yr,mt),mt}z.__dashjs_factory_name="ProtectionController";var te=ne.Z.getClassFactory(z),V=function vt(mt,yt){(function(je,st){if(!(je instanceof st))throw new TypeError("Cannot call a class as a function")})(this,vt),this.keyID=mt,this.key=yt};function ee(vt,mt){for(var yt=0;yt<mt.length;yt++){var je=mt[yt];je.enumerable=je.enumerable||!1,je.configurable=!0,"value"in je&&(je.writable=!0),Object.defineProperty(vt,je.key,je)}}var ce=function(){function vt(je,st){if(function(He,it){if(!(He instanceof it))throw new TypeError("Cannot call a class as a function")}(this,vt),st&&st!=="persistent"&&st!=="temporary")throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=je,this.type=st}var mt,yt;return mt=vt,(yt=[{key:"toJWK",value:function(){var je,st=this.keyPairs.length,He={keys:[]};for(je=0;je<st;je++){var it={kty:"oct",alg:"A128KW",kid:this.keyPairs[je].keyID,k:this.keyPairs[je].key};He.keys.push(it)}this.type&&(He.type=this.type);var Rt=JSON.stringify(He),wt=Rt.length,Bt=new ArrayBuffer(wt),jt=new Uint8Array(Bt);for(je=0;je<wt;je++)jt[je]=Rt.charCodeAt(je);return Bt}}])&&ee(mt.prototype,yt),vt}();function Ee(vt,mt){for(var yt=0;yt<mt.length;yt++){var je=mt[yt];je.enumerable=je.enumerable||!1,je.configurable=!0,"value"in je&&(je.writable=!0),Object.defineProperty(vt,je.key,je)}}var $=new(function(){function vt(){(function(je,st){if(!(je instanceof st))throw new TypeError("Cannot call a class as a function")})(this,vt),this.init()}var mt,yt;return mt=vt,(yt=[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready",this.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING="com.microsoft.playready.recommendation",this.INITIALIZATION_DATA_TYPE_CENC="cenc",this.INITIALIZATION_DATA_TYPE_KEYIDS="keyids",this.INITIALIZATION_DATA_TYPE_WEBM="webm"}}])&&Ee(mt.prototype,yt),vt}()),Ie="e2719d58-a985-b3c9-781a-b030af78d30e",Ze=$.CLEARKEY_KEYSTEM_STRING,Ve="urn:uuid:"+Ie;function ye(vt){var mt=(vt=vt||{}).BASE64;return{uuid:Ie,schemeIdURI:Ve,systemString:Ze,getInitData:function(yt,je){try{var st=t.parseInitDataFromContentProtection(yt,mt);if(!st&&je){var He={kids:[function(it){try{var Rt=it.replace(/-/g,"");return(Rt=btoa(Rt.match(/\w{2}/g).map(function(wt){return String.fromCharCode(parseInt(wt,16))}).join(""))).replace(/=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}catch{return null}}(je["cenc:default_KID"])]};st=new TextEncoder().encode(JSON.stringify(He))}return st}catch{return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(yt){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(yt))))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(yt,je){var st=null;if(yt){for(var He=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(je))),it=[],Rt=0;Rt<He.kids.length;Rt++){var wt=He.kids[Rt],Bt=yt.clearkeys&&yt.clearkeys.hasOwnProperty(wt)?yt.clearkeys[wt]:null;if(!Bt)throw new Error("DRM: ClearKey keyID ("+wt+") is not known!");it.push(new V(wt,Bt))}st=new ce(it)}return st}}}ye.__dashjs_factory_name="KeySystemClearKey";var ke=dashjs.FactoryMaker.getSingletonFactory(ye),Ke="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",tt=$.CLEARKEY_KEYSTEM_STRING,ve="urn:uuid:"+Ke;function Fe(vt){var mt,yt=vt.BASE64,je=vt.debug.getLogger(mt);return{uuid:Ke,schemeIdURI:ve,systemString:tt,getInitData:function(st){return t.parseInitDataFromContentProtection(st,yt)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(st){return new Uint8Array(st)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(st,He){var it=null;if(st){for(var Rt=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(He))),wt=[],Bt=0;Bt<Rt.kids.length;Bt++){var jt=Rt.kids[Bt],Ct=st.clearkeys&&st.clearkeys.hasOwnProperty(jt)?st.clearkeys[jt]:null;if(!Ct)throw new Error("DRM: ClearKey keyID ("+jt+") is not known!");wt.push(new V(jt,Ct))}it=new ce(wt),je.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return it}}}Fe.__dashjs_factory_name="KeySystemW3CClearKey";var pt=dashjs.FactoryMaker.getSingletonFactory(Fe),ft="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",qe=$.WIDEVINE_KEYSTEM_STRING,Je="urn:uuid:"+ft;function ge(vt){var mt=(vt=vt||{}).BASE64;return{uuid:ft,schemeIdURI:Je,systemString:qe,getInitData:function(yt){return t.parseInitDataFromContentProtection(yt,mt)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(yt){return new Uint8Array(yt)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}}}ge.__dashjs_factory_name="KeySystemWidevine";var he=dashjs.FactoryMaker.getSingletonFactory(ge),Ye="9a04f079-9840-4286-ab92-e65be0885f95",f=$.PLAYREADY_KEYSTEM_STRING,i="urn:uuid:"+Ye;function v(vt){var mt="utf-16",yt=(vt=vt||{}).BASE64,je=vt.settings;function st(){if(!yt||!yt.hasOwnProperty("decodeArray")||!yt.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:Ye,schemeIdURI:i,systemString:f,getInitData:function(He){var it,Rt,wt,Bt,jt,Ct=new Uint8Array([112,115,115,104,0,0,0,0]),ht=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),kt=0,Ft=null;if(st(),!He)return null;if("pssh"in He)return t.parseInitDataFromContentProtection(He,yt);if("pro"in He)Ft=yt.decodeArray(He.pro.__text);else{if(!("prheader"in He))return null;Ft=yt.decodeArray(He.prheader.__text)}return it=Ft.length,Rt=4+Ct.length+ht.length+4+it,wt=new ArrayBuffer(Rt),Bt=new Uint8Array(wt),(jt=new DataView(wt)).setUint32(kt,Rt),kt+=4,Bt.set(Ct,kt),kt+=Ct.length,Bt.set(ht,kt),kt+=ht.length,jt.setUint32(kt,it),kt+=4,Bt.set(Ft,kt),kt+=it,Bt.buffer},getRequestHeadersFromMessage:function(He){var it,Rt,wt={},Bt=new DOMParser;if(je&&je.get().streaming.protection.detectPlayreadyMessageFormat&&mt==="utf-16"&&He&&He.byteLength%2==1)return wt["Content-Type"]="text/xml; charset=utf-8",wt;var jt=mt==="utf-16"?new Uint16Array(He):new Uint8Array(He);it=String.fromCharCode.apply(null,jt);for(var Ct=(Rt=Bt.parseFromString(it,"application/xml")).getElementsByTagName("name"),ht=Rt.getElementsByTagName("value"),kt=0;kt<Ct.length;kt++)wt[Ct[kt].childNodes[0].nodeValue]=ht[kt].childNodes[0].nodeValue;return wt.hasOwnProperty("Content")&&(wt["Content-Type"]=wt.Content,delete wt.Content),wt.hasOwnProperty("Content-Type")||(wt["Content-Type"]="text/xml; charset=utf-8"),wt},getLicenseRequestFromMessage:function(He){var it=null,Rt=new DOMParser;if(je&&je.get().streaming.protection.detectPlayreadyMessageFormat&&mt==="utf-16"&&He&&He.byteLength%2==1)return He;var wt=mt==="utf-16"?new Uint16Array(He):new Uint8Array(He);st();var Bt=String.fromCharCode.apply(null,wt),jt=Rt.parseFromString(Bt,"application/xml");if(!jt.getElementsByTagName("PlayReadyKeyMessage")[0])return He;var Ct=jt.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;return Ct&&(it=yt.decode(Ct)),it},getLicenseServerURLFromInitData:function(He){if(He)for(var it=new DataView(He),Rt=it.getUint16(4,!0),wt=6,Bt=new DOMParser,jt=0;jt<Rt;jt++){var Ct=it.getUint16(wt,!0);wt+=2;var ht=it.getUint16(wt,!0);if(wt+=2,Ct===1){var kt=He.slice(wt,wt+ht),Ft=String.fromCharCode.apply(null,new Uint16Array(kt)),en=Bt.parseFromString(Ft,"application/xml");if(en.getElementsByTagName("LA_URL")[0]){var ln=en.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(ln)return ln}if(en.getElementsByTagName("LUI_URL")[0]){var vn=en.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(vn)return vn}}else wt+=ht}return null},getCDMData:function(He){var it,Rt,wt,Bt;if(st(),!He)return null;for(it=[],Bt=0;Bt<He.length;++Bt)it.push(He.charCodeAt(Bt)),it.push(0);for(it=String.fromCharCode.apply(null,it),it=yt.encode(it),Rt='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",it),wt=[],Bt=0;Bt<Rt.length;++Bt)wt.push(Rt.charCodeAt(Bt)),wt.push(0);return new Uint8Array(wt).buffer},setPlayReadyMessageFormat:function(He){if(He!=="utf-8"&&He!=="utf-16")throw new Error('Specified message format is not one of "utf-8" or "utf-16"');mt=He}}}v.__dashjs_factory_name="KeySystemPlayReady";var S=dashjs.FactoryMaker.getSingletonFactory(v);function W(vt){var mt=(vt=vt||{}).BASE64,yt={};return yt[$.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(je){return mt.decodeArray(je.license)},getErrorResponse:function(je){return je}},yt[$.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(je){return je},getErrorResponse:function(je){return String.fromCharCode.apply(null,new Uint8Array(je))}},{getServerURLFromMessage:function(je){return je},getHTTPMethod:function(){return"POST"},getResponseType:function(je){return yt[je].responseType},getLicenseMessage:function(je,st){return function(){if(!mt||!mt.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),yt[st].getLicenseMessage(je)},getErrorResponse:function(je,st){return yt[st].getErrorResponse(je)}}}W.__dashjs_factory_name="DRMToday";var H=dashjs.FactoryMaker.getSingletonFactory(W);function Te(){var vt="http://schemas.xmlsoap.org/soap/envelope/";function mt(st){var He=String.fromCharCode.apply(null,new Uint8Array(st));return decodeURIComponent(escape(He))}function yt(st){if(window.DOMParser){var He=mt(st),it=new window.DOMParser().parseFromString(He,"text/xml"),Rt=it?it.getElementsByTagNameNS(vt,"Envelope")[0]:null,wt=Rt?Rt.getElementsByTagNameNS(vt,"Body")[0]:null;if(wt&&wt.getElementsByTagNameNS(vt,"Fault")[0])return null}return st}function je(st){var He="",it="",Rt="",wt=-1,Bt=-1;if(window.DOMParser){var jt=mt(st),Ct=new window.DOMParser().parseFromString(jt,"text/xml"),ht=Ct?Ct.getElementsByTagNameNS(vt,"Envelope")[0]:null,kt=ht?ht.getElementsByTagNameNS(vt,"Body")[0]:null,Ft=kt?kt.getElementsByTagNameNS(vt,"Fault")[0]:null,en=Ft?Ft.getElementsByTagName("detail")[0]:null,ln=en?en.getElementsByTagName("Exception")[0]:null,vn=null;if(Ft===null)return jt;He=(vn=Ft.getElementsByTagName("faultstring")[0].firstChild)?vn.nodeValue:null,ln!==null&&(it=(vn=ln.getElementsByTagName("StatusCode")[0])?vn.firstChild.nodeValue:null,wt=(Rt=(vn=ln.getElementsByTagName("Message")[0])?vn.firstChild.nodeValue:null)?Rt.lastIndexOf("[")+1:-1,Bt=Rt?Rt.indexOf("]"):-1,Rt=Rt?Rt.substring(wt,Bt):"")}var Qt="code: ".concat(it,", name: ").concat(He);return Rt&&(Qt+=", message: ".concat(Rt)),Qt}return{getServerURLFromMessage:function(st){return st},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(st){return yt.call(this,st)},getErrorResponse:function(st){return je.call(this,st)}}}Te.__dashjs_factory_name="PlayReady";var Ge=ne.Z.getSingletonFactory(Te);function Ce(){return{getServerURLFromMessage:function(vt){return vt},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(vt){return vt},getErrorResponse:function(vt){return String.fromCharCode.apply(null,new Uint8Array(vt))}}}Ce.__dashjs_factory_name="Widevine";var be=dashjs.FactoryMaker.getSingletonFactory(Ce);function Se(){return{getServerURLFromMessage:function(vt){return vt},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(vt){if(!vt.hasOwnProperty("keys"))return null;for(var mt=[],yt=0;yt<vt.keys.length;yt++){var je=vt.keys[yt],st=je.kid.replace(/=/g,""),He=je.k.replace(/=/g,"");mt.push(new V(st,He))}return new ce(mt)},getErrorResponse:function(vt){return String.fromCharCode.apply(null,new Uint8Array(vt))}}}Se.__dashjs_factory_name="ClearKey";var Ue=dashjs.FactoryMaker.getSingletonFactory(Se);function ze(){var vt,mt,yt,je,st,He,it,Rt,wt=this.context;function Bt(ht,kt){return kt&&ht in kt?kt[ht]:null}function jt(ht,kt){return ht&&ht.sessionId?ht.sessionId:kt&&kt.sessionId?kt.sessionId:null}function Ct(ht,kt){return ht&&ht.sessionType?ht.sessionType:kt}return vt={initialize:function(){var ht;je=[],ht=S(wt).getInstance({BASE64:st,settings:He}),je.push(ht),ht=he(wt).getInstance({BASE64:st}),je.push(ht),ht=ke(wt).getInstance({BASE64:st}),je.push(ht),it=ht,ht=pt(wt).getInstance({BASE64:st,debug:mt}),je.push(ht),Rt=ht},setProtectionData:function(ht){for(var kt,Ft,en=0;en<je.length;en++){var ln=je[en];ln.hasOwnProperty("init")&&ln.init((kt=ln.systemString,Ft=void 0,Ft=null,ht&&(Ft=kt in ht?ht[kt]:null),Ft))}},isClearKey:function(ht){return ht===it||ht===Rt},initDataEquals:function(ht,kt){if(ht.byteLength===kt.byteLength){for(var Ft=new Uint8Array(ht),en=new Uint8Array(kt),ln=0;ln<Ft.length;ln++)if(Ft[ln]!==en[ln])return!1;return!0}return!1},getKeySystems:function(){return je},setKeySystems:function(ht){je=ht},getKeySystemBySystemString:function(ht){for(var kt=0;kt<je.length;kt++)if(je[kt].systemString===ht)return je[kt];return null},getSupportedKeySystemsFromContentProtection:function(ht,kt,Ft){var en,ln,vn,Qt,Et=[];if(ht){var Tt=t.findCencContentProtection(ht);for(vn=0;vn<je.length;++vn){var Nt=Bt((ln=je[vn]).systemString,kt);for(Qt=0;Qt<ht.length;++Qt)if((en=ht[Qt]).schemeIdUri.toLowerCase()===ln.schemeIdURI){var $t=ln.getInitData(en,Tt);Et.push({ks:je[vn],keyId:en.keyId,initData:$t,protData:Nt,cdmData:ln.getCDMData(Nt?Nt.cdmData:null),sessionId:jt(Nt,en),sessionType:Ct(Nt,Ft)})}}}return Et},getSupportedKeySystemsFromSegmentPssh:function(ht,kt,Ft){for(var en,ln=[],vn=t.parsePSSHList(ht),Qt=0;Qt<je.length;++Qt){var Et=Bt((en=je[Qt]).systemString,kt);en.uuid in vn&&ln.push({ks:en,initData:vn[en.uuid],protData:Et,cdmData:en.getCDMData(Et?Et.cdmData:null),sessionId:jt(Et),sessionType:Ct(Et,Ft)})}return ln},getLicenseServerModelInstance:function(ht,kt,Ft){if(Ft==="license-release"||Ft==="individualization-request")return null;var en=null;return kt&&kt.hasOwnProperty("drmtoday")?en=H(wt).getInstance({BASE64:st}):ht.systemString===$.WIDEVINE_KEYSTEM_STRING?en=be(wt).getInstance():ht.systemString===$.PLAYREADY_KEYSTEM_STRING?en=Ge(wt).getInstance():ht.systemString===$.CLEARKEY_KEYSTEM_STRING&&(en=Ue(wt).getInstance()),en},processClearKeyLicenseRequest:function(ht,kt,Ft){try{return ht.getClearKeysFromProtectionData(kt,Ft)}catch{return yt.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(ht){ht&&(ht.debug&&(mt=ht.debug,yt=mt.getLogger(vt)),ht.BASE64&&(st=ht.BASE64),ht.settings&&(He=ht.settings))}},vt}ze.__dashjs_factory_name="ProtectionKeyController";var It=dashjs.FactoryMaker.getSingletonFactory(ze);function nt(vt){return nt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(mt){return typeof mt}:function(mt){return mt&&typeof Symbol=="function"&&mt.constructor===Symbol&&mt!==Symbol.prototype?"symbol":typeof mt},nt(vt)}function Lt(vt,mt){return Lt=Object.setPrototypeOf||function(yt,je){return yt.__proto__=je,yt},Lt(vt,mt)}function Ot(vt,mt){return!mt||nt(mt)!=="object"&&typeof mt!="function"?function(yt){if(yt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return yt}(vt):mt}function Mt(vt){return Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(mt){return mt.__proto__||Object.getPrototypeOf(mt)},Mt(vt)}var Jt=new(function(vt){(function(He,it){if(typeof it!="function"&&it!==null)throw new TypeError("Super expression must either be null or a function");He.prototype=Object.create(it&&it.prototype,{constructor:{value:He,writable:!0,configurable:!0}}),it&&Lt(He,it)})(st,vt);var mt,yt,je=(mt=st,yt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var He,it=Mt(mt);if(yt){var Rt=Mt(this).constructor;He=Reflect.construct(it,arguments,Rt)}else He=it.apply(this,arguments);return Ot(this,He)});function st(){var He;return function(it,Rt){if(!(it instanceof Rt))throw new TypeError("Cannot call a class as a function")}(this,st),(He=je.call(this)).INTERNAL_KEY_MESSAGE="internalKeyMessage",He.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",He.KEY_ADDED="public_keyAdded",He.KEY_ERROR="public_keyError",He.KEY_MESSAGE="public_keyMessage",He.KEY_SESSION_CLOSED="public_keySessionClosed",He.KEY_SESSION_CREATED="public_keySessionCreated",He.KEY_SESSION_REMOVED="public_keySessionRemoved",He.KEY_STATUSES_CHANGED="public_keyStatusesChanged",He.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",He.KEY_SYSTEM_SELECTED="public_keySystemSelected",He.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",He.LICENSE_REQUEST_SENDING="public_licenseRequestSending",He.NEED_KEY="needkey",He.PROTECTION_CREATED="public_protectioncreated",He.PROTECTION_DESTROYED="public_protectiondestroyed",He.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",He.TEARDOWN_COMPLETE="protectionTeardownComplete",He.VIDEO_ELEMENT_SELECTED="videoElementSelected",He.KEY_SESSION_UPDATED="public_keySessionUpdated",He}return st}(D(8342).Z)),dn=function vt(mt,yt){(function(je,st){if(!(je instanceof st))throw new TypeError("Cannot call a class as a function")})(this,vt),this.initData=mt,this.initDataType=yt},pn=function vt(mt,yt,je,st){(function(He,it){if(!(He instanceof it))throw new TypeError("Cannot call a class as a function")})(this,vt),this.sessionToken=mt,this.message=yt,this.defaultURL=je,this.messageType=st||"license-request"},Gn=function vt(mt,yt){(function(je,st){if(!(je instanceof st))throw new TypeError("Cannot call a class as a function")})(this,vt),this.keySystem=mt,this.ksConfiguration=yt},_n={};function An(vt){vt=vt||{};var mt,yt,je,st,He,it,Rt,wt,Bt=this.context,jt=vt.eventBus,Ct=vt.events,ht=vt.debug;function kt(Et,Tt,Nt,$t){if(navigator.requestMediaKeySystemAccess===void 0||typeof navigator.requestMediaKeySystemAccess!="function"){var rn="Insecure origins are not allowed";return jt.trigger(Ct.KEY_SYSTEM_ACCESS_COMPLETE,{error:rn}),void $t({error:rn})}var mn=Et[Tt].protData&&Et[Tt].protData.systemStringPriority?Et[Tt].protData.systemStringPriority:null,En=Et[Tt].configs,jn=Et[Tt].ks,Un=jn.systemString;(function(Rn,Fn){return new Promise(function(Mn,Kn){Ft(Rn,Fn,0,Mn,Kn)})})(mn||(_n[Un]?_n[Un]:[Un]),En).then(function(Rn){var Fn=typeof Rn.getConfiguration=="function"?Rn.getConfiguration():null,Mn=new Gn(jn,Fn);Mn.mksa=Rn,jt.trigger(Ct.KEY_SYSTEM_ACCESS_COMPLETE,{data:Mn}),Nt({data:Mn})}).catch(function(Rn){if(Tt+1<Et.length)kt(Et,Tt+1,Nt,$t);else{var Fn="Key system access denied! ";jt.trigger(Ct.KEY_SYSTEM_ACCESS_COMPLETE,{error:Fn+Rn.message}),$t({error:Fn+Rn.message})}})}function Ft(Et,Tt,Nt,$t,rn){var mn=Et[Nt];yt.debug("Requesting key system access for system string ".concat(mn)),navigator.requestMediaKeySystemAccess(mn,Tt).then(function(En){En.selectedSystemString=mn,$t(En)}).catch(function(En){Nt+1<Et.length?Ft(Et,Tt,Nt+1,$t,rn):rn(En)})}function en(Et){if(!Et||!Et.session)return Promise.resolve;var Tt=Et.session;return Tt.removeEventListener("keystatuseschange",Et),Tt.removeEventListener("message",Et),Tt.close()}function ln(Et){for(var Tt=0;Tt<it.length;Tt++)if(it[Tt]===Et){it.splice(Tt,1);break}}function vn(Et){var Tt,Nt;return Et&&Et.length>0&&(Et[0]&&(typeof Et[0]=="string"?Tt=Et[0]:Nt=Et[0]),Et[1]&&(typeof Et[1]=="string"?Tt=Et[1]:Nt=Et[1])),{status:Tt,keyId:Nt}}function Qt(Et,Tt){var Nt={session:Et,keyId:Tt.keyId,initData:Tt.initData,sessionId:Tt.sessionId,sessionType:Tt.sessionType,handleEvent:function($t){switch($t.type){case"keystatuseschange":jt.trigger(Ct.KEY_STATUSES_CHANGED,{data:this}),$t.target.keyStatuses.forEach(function(){var mn=vn(arguments);mn.status==="expired"?jt.trigger(Ct.INTERNAL_KEY_STATUS_CHANGED,{error:new c.Z(n.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,n.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)}):jt.trigger(Ct.INTERNAL_KEY_STATUS_CHANGED,mn)});break;case"message":var rn=ArrayBuffer.isView($t.message)?$t.message.buffer:$t.message;jt.trigger(Ct.INTERNAL_KEY_MESSAGE,{data:new pn(this,rn,void 0,$t.messageType)})}},getKeyId:function(){return this.keyId},getSessionId:function(){return Et.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return Et.expiration},getKeyStatuses:function(){return Et.keyStatuses},getUsable:function(){var $t=!1;return Et.keyStatuses.forEach(function(){var rn=vn(arguments);rn.status==="usable"&&($t=!0)}),$t}};return Et.addEventListener("keystatuseschange",Nt),Et.addEventListener("message",Nt),Et.closed.then(function(){ln(Nt),yt.debug("DRM: Session closed.  SessionID = "+Nt.getSessionId()),jt.trigger(Ct.KEY_SESSION_CLOSED,{data:Nt.getSessionId()})}),it.push(Nt),Nt}return mt={getAllInitData:function(){for(var Et=[],Tt=0;Tt<it.length;Tt++)it[Tt].initData&&Et.push(it[Tt].initData);return Et},getSessions:function(){return it},requestKeySystemAccess:function(Et){return new Promise(function(Tt,Nt){kt(Et,0,Tt,Nt)})},selectKeySystem:function(Et){return new Promise(function(Tt,Nt){Et.mksa.createMediaKeys().then(function($t){return je=Et.keySystem,He=$t,st?st.setMediaKeys(He):Promise.resolve()}).then(function(){Tt(je)}).catch(function(){Nt({error:"Error selecting keys system ("+Et.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})})},setMediaElement:function(Et){st!==Et&&(st&&(st.removeEventListener("encrypted",Rt),st.setMediaKeys&&st.setMediaKeys(null)),(st=Et)&&(st.addEventListener("encrypted",Rt),st.setMediaKeys&&He&&st.setMediaKeys(He)))},setServerCertificate:function(Et){if(!je||!He)throw new Error("Can not set server certificate until you have selected a key system");He.setServerCertificate(Et).then(function(){yt.info("DRM: License server certificate successfully updated."),jt.trigger(Ct.SERVER_CERTIFICATE_UPDATED)}).catch(function(Tt){jt.trigger(Ct.SERVER_CERTIFICATE_UPDATED,{error:new c.Z(n.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,n.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+Tt.name)})})},createKeySession:function(Et){if(!je||!He)throw new Error("Can not create sessions until you have selected a key system");var Tt=He.createSession(Et.sessionType),Nt=Qt(Tt,Et),$t=je.systemString===$.CLEARKEY_KEYSTEM_STRING&&(Et.initData||Et.protData&&Et.protData.clearkeys)?$.INITIALIZATION_DATA_TYPE_KEYIDS:$.INITIALIZATION_DATA_TYPE_CENC;Tt.generateRequest($t,Et.initData).then(function(){yt.debug("DRM: Session created.  SessionID = "+Nt.getSessionId()),jt.trigger(Ct.KEY_SESSION_CREATED,{data:Nt})}).catch(function(rn){ln(Nt),jt.trigger(Ct.KEY_SESSION_CREATED,{data:null,error:new c.Z(n.KEY_SESSION_CREATED_ERROR_CODE,n.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+rn.name)})})},updateKeySession:function(Et,Tt){var Nt=Et.session;wt.isClearKey(je)&&(Tt=Tt.toJWK()),Nt.update(Tt).then(function(){jt.trigger(Ct.KEY_SESSION_UPDATED)}).catch(function($t){jt.trigger(Ct.KEY_ERROR,{error:new c.Z(n.MEDIA_KEYERR_CODE,"Error sending update() message! "+$t.name,Et)})})},loadKeySession:function(Et){if(!je||!He)throw new Error("Can not load sessions until you have selected a key system");for(var Tt=Et.sessionId,Nt=0;Nt<it.length;Nt++)if(Tt===it[Nt].sessionId)return void yt.warn("DRM: Ignoring session ID because we have already seen it!");var $t=He.createSession(Et.sessionType),rn=Qt($t,Et);$t.load(Tt).then(function(mn){mn?(yt.debug("DRM: Session loaded.  SessionID = "+rn.getSessionId()),jt.trigger(Ct.KEY_SESSION_CREATED,{data:rn})):(ln(rn),jt.trigger(Ct.KEY_SESSION_CREATED,{data:null,error:new c.Z(n.KEY_SESSION_CREATED_ERROR_CODE,n.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+Tt+")")}))}).catch(function(mn){ln(rn),jt.trigger(Ct.KEY_SESSION_CREATED,{data:null,error:new c.Z(n.KEY_SESSION_CREATED_ERROR_CODE,n.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+Tt+")! "+mn.name)})})},removeKeySession:function(Et){Et.session.remove().then(function(){yt.debug("DRM: Session removed.  SessionID = "+Et.getSessionId()),jt.trigger(Ct.KEY_SESSION_REMOVED,{data:Et.getSessionId()})},function(Tt){jt.trigger(Ct.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+Et.getSessionId()+"). "+Tt.name})})},closeKeySession:function(Et){en(Et).catch(function(Tt){ln(Et),jt.trigger(Ct.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+Et.getSessionId()+") "+Tt.name})})},stop:function(){for(var Et,Tt=0;Tt<it.length;Tt++)(Et=it[Tt]).getUsable()||(en(Et),ln(Et))},reset:function(){var Et,Tt=it.length;Tt!==0?function(){for(var Nt=function(rn){ln(rn),it.length===0&&(st?(st.removeEventListener("encrypted",Rt),st.setMediaKeys(null).then(function(){jt.trigger(Ct.TEARDOWN_COMPLETE)})):jt.trigger(Ct.TEARDOWN_COMPLETE))},$t=0;$t<Tt;$t++)(function(rn){en(Et),Nt(rn)})(Et=it[$t])}():jt.trigger(Ct.TEARDOWN_COMPLETE)}},yt=ht.getLogger(mt),je=null,st=null,He=null,it=[],wt=It(Bt).getInstance(),Rt={handleEvent:function(Et){if(Et.type==="encrypted"&&Et.initData){var Tt=ArrayBuffer.isView(Et.initData)?Et.initData.buffer:Et.initData;jt.trigger(Ct.NEED_KEY,{key:new dn(Tt,Et.initDataType)})}}},mt}_n[$.PLAYREADY_KEYSTEM_STRING]=[$.PLAYREADY_KEYSTEM_STRING,$.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],_n[$.WIDEVINE_KEYSTEM_STRING]=[$.WIDEVINE_KEYSTEM_STRING],_n[$.CLEARKEY_KEYSTEM_STRING]=[$.CLEARKEY_KEYSTEM_STRING],An.__dashjs_factory_name="ProtectionModel_21Jan2015";var qn=dashjs.FactoryMaker.getClassFactory(An);function yn(vt){vt=vt||{};var mt,yt,je,st,He,it,Rt,wt,Bt,jt=this.context,Ct=vt.eventBus,ht=vt.events,kt=vt.debug,Ft=vt.api;function en(){try{for(var Qt=0;Qt<Rt.length;Qt++)ln(Rt[Qt]);je&&je.removeEventListener(Ft.needkey,wt),Ct.trigger(ht.TEARDOWN_COMPLETE)}catch(Et){Ct.trigger(ht.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+Et.message})}}function ln(Qt){var Et=Qt.session;Et.removeEventListener(Ft.error,Qt),Et.removeEventListener(Ft.message,Qt),Et.removeEventListener(Ft.ready,Qt),Et.removeEventListener(Ft.close,Qt);for(var Tt=0;Tt<Rt.length;Tt++)if(Rt[Tt]===Qt){Rt.splice(Tt,1);break}Et[Ft.release]()}function vn(){var Qt=null,Et=function(){je.removeEventListener("loadedmetadata",Qt),je[Ft.setMediaKeys](He),Ct.trigger(ht.VIDEO_ELEMENT_SELECTED)};je.readyState>=1?Et():(Qt=Et.bind(this),je.addEventListener("loadedmetadata",Qt))}return mt={getAllInitData:function(){for(var Qt=[],Et=0;Et<Rt.length;Et++)Qt.push(Rt[Et].initData);return Qt},getSessions:function(){return Rt},requestKeySystemAccess:function(Qt){return new Promise(function(Et,Tt){for(var Nt=!1,$t=0;$t<Qt.length;$t++)for(var rn=Qt[$t].ks.systemString,mn=Qt[$t].configs,En=null,jn=null,Un=0;Un<mn.length;Un++){var Rn=mn[Un].audioCapabilities,Fn=mn[Un].videoCapabilities;if(Rn&&Rn.length!==0){En=[];for(var Mn=0;Mn<Rn.length;Mn++)window[Ft.MediaKeys].isTypeSupported(rn,Rn[Mn].contentType)&&En.push(Rn[Mn])}if(Fn&&Fn.length!==0){jn=[];for(var Kn=0;Kn<Fn.length;Kn++)window[Ft.MediaKeys].isTypeSupported(rn,Fn[Kn].contentType)&&jn.push(Fn[Kn])}if(!(!En&&!jn||En&&En.length===0||jn&&jn.length===0)){Nt=!0;var Rr=new y(En,jn),yr=Bt.getKeySystemBySystemString(rn),ar=new Gn(yr,Rr);Ct.trigger(ht.KEY_SYSTEM_ACCESS_COMPLETE,{data:ar}),Et({data:ar});break}}if(!Nt){var Qn="Key system access denied! -- No valid audio/video content configurations detected!";Ct.trigger(ht.KEY_SYSTEM_ACCESS_COMPLETE,{error:Qn}),Tt({error:Qn})}})},selectKeySystem:function(Qt){return new Promise(function(Et,Tt){try{He=Qt.mediaKeys=new window[Ft.MediaKeys](Qt.keySystem.systemString),st=Qt.keySystem,it=Qt,je&&vn(),Et(st)}catch{Tt({error:"Error selecting keys system ("+st.systemString+")! Could not create MediaKeys -- TODO"})}})},setMediaElement:function(Qt){je!==Qt&&(je&&je.removeEventListener(Ft.needkey,wt),(je=Qt)&&(je.addEventListener(Ft.needkey,wt),He&&vn()))},createKeySession:function(Qt){if(!st||!He||!it)throw new Error("Can not create sessions until you have selected a key system");var Et=null;if(it.ksConfiguration.videoCapabilities&&it.ksConfiguration.videoCapabilities.length>0&&(Et=it.ksConfiguration.videoCapabilities[0]),Et===null&&it.ksConfiguration.audioCapabilities&&it.ksConfiguration.audioCapabilities.length>0&&(Et=it.ksConfiguration.audioCapabilities[0]),Et===null)throw new Error("Can not create sessions for unknown content types.");var Tt=Et.contentType,Nt=He.createSession(Tt,new Uint8Array(Qt.initData),Qt.cdmData?new Uint8Array(Qt.cdmData):null),$t=function(rn,mn){return{session:rn,keyId:mn.keyId,initData:mn.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(En){switch(En.type){case Ft.error:Ct.trigger(ht.KEY_ERROR,{error:new c.Z(n.MEDIA_KEYERR_CODE,"KeyError",this)});break;case Ft.message:var jn=ArrayBuffer.isView(En.message)?En.message.buffer:En.message;Ct.trigger(ht.INTERNAL_KEY_MESSAGE,{data:new pn(this,jn,En.destinationURL)});break;case Ft.ready:yt.debug("DRM: Key added."),Ct.trigger(ht.KEY_ADDED);break;case Ft.close:yt.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),Ct.trigger(ht.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}}}(Nt,Qt);Nt.addEventListener(Ft.error,$t),Nt.addEventListener(Ft.message,$t),Nt.addEventListener(Ft.ready,$t),Nt.addEventListener(Ft.close,$t),Rt.push($t),yt.debug("DRM: Session created.  SessionID = "+$t.getSessionId()),Ct.trigger(ht.KEY_SESSION_CREATED,{data:$t})},updateKeySession:function(Qt,Et){var Tt=Qt.session;Bt.isClearKey(st)?Tt.update(new Uint8Array(Et.toJWK())):Tt.update(new Uint8Array(Et)),Ct.trigger(ht.KEY_SESSION_UPDATED)},closeKeySession:ln,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:en,reset:en},yt=kt.getLogger(mt),je=null,st=null,He=null,it=null,Rt=[],Bt=It(jt).getInstance(),wt={handleEvent:function(Qt){if(Qt.type===Ft.needkey&&Qt.initData){var Et=ArrayBuffer.isView(Qt.initData)?Qt.initData.buffer:Qt.initData;Ct.trigger(ht.NEED_KEY,{key:new dn(Et,"cenc")})}}},mt}yn.__dashjs_factory_name="ProtectionModel_3Feb2014";var Xn=dashjs.FactoryMaker.getClassFactory(yn);function xn(vt){vt=vt||{};var mt,yt,je,st,He,it,Rt,wt,Bt,jt=this.context,Ct=vt.eventBus,ht=vt.events,kt=vt.debug,Ft=vt.api,en=vt.errHandler;function ln(){je&&Et();for(var Tt=0;Tt<Rt.length;Tt++)vn(Rt[Tt]);Ct.trigger(ht.TEARDOWN_COMPLETE)}function vn(Tt){try{je[Ft.cancelKeyRequest](st.systemString,Tt.sessionId)}catch(Nt){Ct.trigger(ht.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+Tt.sessionId+") "+Nt.message})}}function Qt(Tt,Nt){if(Nt&&Tt){for(var $t=Tt.length,rn=0;rn<$t;rn++)if(Tt[rn].sessionId==Nt)return Tt[rn];return null}return null}function Et(){je.removeEventListener(Ft.keyerror,Bt),je.removeEventListener(Ft.needkey,Bt),je.removeEventListener(Ft.keymessage,Bt),je.removeEventListener(Ft.keyadded,Bt)}return mt={getAllInitData:function(){for(var Tt=[],Nt=0;Nt<it.length;Nt++)Tt.push(it[Nt].initData);for(var $t=0;$t<Rt.length;$t++)Tt.push(Rt[$t].initData);return Tt},getSessions:function(){return Rt.concat(it)},requestKeySystemAccess:function(Tt){return new Promise(function(Nt,$t){var rn=je;rn||(rn=document.createElement("video"));for(var mn=!1,En=0;En<Tt.length;En++)for(var jn=Tt[En].ks.systemString,Un=Tt[En].configs,Rn=null,Fn=0;Fn<Un.length;Fn++){var Mn=Un[Fn].videoCapabilities;if(Mn&&Mn.length!==0){Rn=[];for(var Kn=0;Kn<Mn.length;Kn++)rn.canPlayType(Mn[Kn].contentType,jn)!==""&&Rn.push(Mn[Kn])}if(Rn&&(!Rn||Rn.length!==0)){mn=!0;var Rr=new y(null,Rn),yr=He.getKeySystemBySystemString(jn),ar=new Gn(yr,Rr);Ct.trigger(ht.KEY_SYSTEM_ACCESS_COMPLETE,{data:ar}),Nt({data:ar});break}}if(!mn){var Qn="Key system access denied! -- No valid audio/video content configurations detected!";Ct.trigger(ht.KEY_SYSTEM_ACCESS_COMPLETE,{error:Qn}),$t({error:Qn})}})},selectKeySystem:function(Tt){return st=Tt.keySystem,Promise.resolve(st)},setMediaElement:function(Tt){if(je!==Tt){if(je){Et();for(var Nt=0;Nt<Rt.length;Nt++)vn(Rt[Nt]);Rt=[]}(je=Tt)&&(je.addEventListener(Ft.keyerror,Bt),je.addEventListener(Ft.needkey,Bt),je.addEventListener(Ft.keymessage,Bt),je.addEventListener(Ft.keyadded,Bt),Ct.trigger(ht.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(Tt){if(!st)throw new Error("Can not create sessions until you have selected a key system");if(wt||Rt.length===0){var Nt={sessionId:null,keyId:Tt.keyId,initData:Tt.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return it.push(Nt),je[Ft.generateKeyRequest](st.systemString,new Uint8Array(Tt.initData)),Nt}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(Tt,Nt){var $t=Tt.sessionId;if(He.isClearKey(st))for(var rn=0;rn<Nt.keyPairs.length;rn++)je[Ft.addKey](st.systemString,Nt.keyPairs[rn].key,Nt.keyPairs[rn].keyID,$t);else je[Ft.addKey](st.systemString,new Uint8Array(Nt),new Uint8Array(Tt.initData),$t);Ct.trigger(ht.KEY_SESSION_UPDATED)},closeKeySession:vn,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:ln,reset:ln},yt=kt.getLogger(mt),je=null,st=null,it=[],Rt=[],He=It(jt).getInstance(),Bt={handleEvent:function(Tt){var Nt=null;switch(Tt.type){case Ft.needkey:var $t=ArrayBuffer.isView(Tt.initData)?Tt.initData.buffer:Tt.initData;Ct.trigger(ht.NEED_KEY,{key:new dn($t,"cenc")});break;case Ft.keyerror:if((Nt=Qt(Rt,Tt.sessionId))||(Nt=Qt(it,Tt.sessionId)),Nt){var rn=n.MEDIA_KEYERR_CODE,mn="";switch(Tt.errorCode.code){case 1:rn=n.MEDIA_KEYERR_UNKNOWN_CODE,mn+="MEDIA_KEYERR_UNKNOWN - "+n.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:rn=n.MEDIA_KEYERR_CLIENT_CODE,mn+="MEDIA_KEYERR_CLIENT - "+n.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:rn=n.MEDIA_KEYERR_SERVICE_CODE,mn+="MEDIA_KEYERR_SERVICE - "+n.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:rn=n.MEDIA_KEYERR_OUTPUT_CODE,mn+="MEDIA_KEYERR_OUTPUT - "+n.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:rn=n.MEDIA_KEYERR_HARDWARECHANGE_CODE,mn+="MEDIA_KEYERR_HARDWARECHANGE - "+n.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:rn=n.MEDIA_KEYERR_DOMAIN_CODE,mn+="MEDIA_KEYERR_DOMAIN - "+n.MEDIA_KEYERR_DOMAIN_MESSAGE}mn+="  System Code = "+Tt.systemCode,Ct.trigger(ht.KEY_ERROR,{error:new c.Z(rn,mn,Nt)})}else yt.error("No session token found for key error");break;case Ft.keyadded:(Nt=Qt(Rt,Tt.sessionId))||(Nt=Qt(it,Tt.sessionId)),Nt?(yt.debug("DRM: Key added."),Ct.trigger(ht.KEY_ADDED,{data:Nt})):yt.debug("No session token found for key added");break;case Ft.keymessage:if((wt=Tt.sessionId!==null&&Tt.sessionId!==void 0)?!(Nt=Qt(Rt,Tt.sessionId))&&it.length>0&&(Nt=it.shift(),Rt.push(Nt),Nt.sessionId=Tt.sessionId,Ct.trigger(ht.KEY_SESSION_CREATED,{data:Nt})):it.length>0&&(Nt=it.shift(),Rt.push(Nt),it.length!==0&&en.error(new c.Z(n.MEDIA_KEY_MESSAGE_ERROR_CODE,n.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),Nt){var En=ArrayBuffer.isView(Tt.message)?Tt.message.buffer:Tt.message;Nt.keyMessage=En,Ct.trigger(ht.INTERNAL_KEY_MESSAGE,{data:new pn(Nt,En,Tt.defaultURL)})}else yt.warn("No session token found for key message")}}},mt}xn.__dashjs_factory_name="ProtectionModel_01b";var Hn=dashjs.FactoryMaker.getClassFactory(xn),tr=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],Vn=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function rr(){var vt,mt=this.context;function yt(je,st){for(var He=0;He<st.length;He++){var it=st[He];if(typeof je[it[Object.keys(it)[0]]]=="function")return it}return null}return vt={createProtectionSystem:function(je){var st=null,He=It(mt).getInstance();He.setConfig({debug:je.debug,BASE64:je.BASE64,settings:je.settings}),He.initialize();var it=function(Rt){var wt=Rt.debug,Bt=wt.getLogger(vt),jt=Rt.eventBus,Ct=Rt.errHandler,ht=Rt.videoModel?Rt.videoModel.getElement():null;return ht&&ht.onencrypted===void 0||ht&&ht.mediaKeys===void 0?yt(ht,Vn)?(Bt.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),Xn(mt).create({debug:wt,eventBus:jt,events:Rt.events,api:yt(ht,Vn)})):yt(ht,tr)?(Bt.info("EME detected on this user agent! (ProtectionModel_01b)"),Hn(mt).create({debug:wt,eventBus:jt,errHandler:Ct,events:Rt.events,api:yt(ht,tr)})):(Bt.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(Bt.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),qn(mt).create({debug:wt,eventBus:jt,events:Rt.events}))}(je);return!st&&it&&(st=te(mt).create({protectionModel:it,protectionKeyController:He,eventBus:je.eventBus,debug:je.debug,events:je.events,BASE64:je.BASE64,constants:je.constants,cmcdModel:je.cmcdModel,customParametersModel:je.customParametersModel,settings:je.settings}),je.capabilities.setEncryptedMediaSupported(!0)),st}}}rr.__dashjs_factory_name="Protection";var ir=dashjs.FactoryMaker.getClassFactory(rr);ir.events=Jt,ir.errors=n,dashjs.FactoryMaker.updateClassFactory(rr.__dashjs_factory_name,ir);var Pr=ir},2068:function(et,Re,D){var oe=D(5448),T={DEFAULT:.5,STRONG:1,WEAK:0};function t(y,p,u){var h,E;return h=y===void 0?-1:y,E=function(n){var c=T.DEFAULT;return n!==T.DEFAULT&&n!==T.STRONG&&n!==T.WEAK||(c=n),c}(u),{quality:h,reason:p===void 0?null:p,priority:E}}t.__dashjs_factory_name="SwitchRequest";var e=oe.Z.getClassFactory(t);e.NO_CHANGE=-1,e.PRIORITY=T,oe.Z.updateClassFactory(t.__dashjs_factory_name,e),Re.Z=e},1767:function(et,Re,D){var oe=D(5628),T=D(6535),t=D(7423),e=D(895),y=D(6070),p=D(3112),u=D(1914),h=D(5435),E=D(5448),n=D(2068),c=D(3393),d="qualitySwitchRules",C="abandonFragmentRules";function Z(x){x=x||{};var ne,O,z=this.context,te=x.mediaPlayerModel,V=x.customParametersModel,ee=x.dashMetrics,ce=x.settings;function Ee(Ie){return Ie.filter(function(Ze){return Ze.quality>n.Z.NO_CHANGE})}function $(Ie){var Ze,Ve,ye,ke,Ke,tt={},ve=null;if(Ie.length!==0){for(tt[n.Z.PRIORITY.STRONG]={quality:n.Z.NO_CHANGE,reason:null},tt[n.Z.PRIORITY.WEAK]={quality:n.Z.NO_CHANGE,reason:null},tt[n.Z.PRIORITY.DEFAULT]={quality:n.Z.NO_CHANGE,reason:null},Ze=0,Ve=Ie.length;Ze<Ve;Ze+=1)(ye=Ie[Ze]).quality!==n.Z.NO_CHANGE&&(tt[ye.priority].quality===n.Z.NO_CHANGE||tt[ye.priority].quality>ye.quality)&&(tt[ye.priority].quality=ye.quality,tt[ye.priority].reason=ye.reason||null);return tt[n.Z.PRIORITY.WEAK].quality!==n.Z.NO_CHANGE&&(ve=tt[n.Z.PRIORITY.WEAK]),tt[n.Z.PRIORITY.DEFAULT].quality!==n.Z.NO_CHANGE&&(ve=tt[n.Z.PRIORITY.DEFAULT]),tt[n.Z.PRIORITY.STRONG].quality!==n.Z.NO_CHANGE&&(ve=tt[n.Z.PRIORITY.STRONG]),ve&&(ke=ve.quality,Ke=ve.reason),(0,n.Z)(z).create(ke,Ke)}}return{initialize:function(){ne=[],O=[],ce.get().streaming.abr.useDefaultABRRules&&(ce.get().streaming.abr.ABRStrategy===c.Z.ABR_STRATEGY_L2A?ne.push((0,u.Z)(z).create({dashMetrics:ee,settings:ce})):ce.get().streaming.abr.ABRStrategy===c.Z.ABR_STRATEGY_LoLP?ne.push((0,h.Z)(z).create({dashMetrics:ee})):(ne.push((0,p.Z)(z).create({dashMetrics:ee,mediaPlayerModel:te,settings:ce})),ne.push((0,oe.Z)(z).create({dashMetrics:ee})),ce.get().streaming.abr.additionalAbrRules.insufficientBufferRule&&ne.push((0,T.Z)(z).create({dashMetrics:ee,settings:ce})),ce.get().streaming.abr.additionalAbrRules.switchHistoryRule&&ne.push((0,y.Z)(z).create()),ce.get().streaming.abr.additionalAbrRules.droppedFramesRule&&ne.push((0,e.Z)(z).create()),ce.get().streaming.abr.additionalAbrRules.abandonRequestsRule&&O.push((0,t.Z)(z).create({dashMetrics:ee,mediaPlayerModel:te,settings:ce})))),V.getAbrCustomRules().forEach(function(Ie){Ie.type===d&&ne.push(Ie.rule(z).create()),Ie.type===C&&O.push(Ie.rule(z).create())})},reset:function(){[ne,O].forEach(function(Ie){Ie&&Ie.length&&Ie.forEach(function(Ze){return Ze.reset&&Ze.reset()})}),ne=[],O=[]},getMaxQuality:function(Ie){return $(Ee(ne.map(function(Ze){return Ze.getMaxIndex(Ie)})))||(0,n.Z)(z).create()},getMinSwitchRequest:$,shouldAbandonFragment:function(Ie,Ze){var Ve=$(Ee(O.map(function(ye){return ye.shouldAbandon(Ie,Ze)})));return Ve&&(Ve.reason.forceAbandon=!0),Ve||(0,n.Z)(z).create()},getQualitySwitchRules:function(){return ne}}}Z.__dashjs_factory_name="ABRRulesCollection";var k=E.Z.getClassFactory(Z);k.QUALITY_SWITCH_RULES=d,k.ABANDON_FRAGMENT_RULES=C,E.Z.updateSingletonFactory(Z.__dashjs_factory_name,k),Re.Z=k},7423:function(et,Re,D){var oe=D(2068),T=D(5448),t=D(6398);function e(y){y=y||{};var p,u,h,E,n,c=this.context,d=y.mediaPlayerModel,C=y.dashMetrics,Z=y.settings;function k(){h={},E={},n=[]}return p={shouldAbandon:function(x){var ne=(0,oe.Z)(c).create(oe.Z.NO_CHANGE,{name:e.__dashjs_factory_name});if(!(x&&x.hasOwnProperty("getMediaInfo")&&x.hasOwnProperty("getMediaType")&&x.hasOwnProperty("getCurrentRequest")&&x.hasOwnProperty("getRepresentationInfo")&&x.hasOwnProperty("getAbrController")))return ne;var O,z,te=x.getMediaInfo(),V=x.getMediaType(),ee=x.getStreamInfo(),ce=ee?ee.id:null,Ee=x.getCurrentRequest();if(!isNaN(Ee.index)){O=V,z=Ee.index,h[O]=h[O]||{},h[O][z]=h[O][z]||{};var $=d.getStableBufferTime();if(C.getCurrentBufferLevel(V)>$)return ne;var Ie=h[V][Ee.index];if(Ie===null||Ee.firstByteDate===null||E.hasOwnProperty(Ie.id))return ne;if(Ie.firstByteTime===void 0&&(n[V]=[],Ie.firstByteTime=Ee.firstByteDate.getTime(),Ie.segmentDuration=Ee.duration,Ie.bytesTotal=Ee.bytesTotal,Ie.id=Ee.index),Ie.bytesLoaded=Ee.bytesLoaded,Ie.elapsedTime=new Date().getTime()-Ie.firstByteTime,Ie.bytesLoaded>0&&Ie.elapsedTime>0&&function(Fe,pt){n[Fe]=n[Fe]||[],n[Fe].push(pt)}(V,Math.round(8*Ie.bytesLoaded/Ie.elapsedTime)),n[V].length>=Z.get().streaming.abr.abrRulesParameters.abandonRequestsRule.minLengthToAverage&&Ie.elapsedTime>Z.get().streaming.abr.abrRulesParameters.abandonRequestsRule.graceTimeThreshold&&Ie.bytesLoaded<Ie.bytesTotal){var Ze=n[V].reduce(function(Fe,pt){return Fe+pt},0);if(Ie.measuredBandwidthInKbps=Math.round(Ze/n[V].length),Ie.estimatedTimeOfDownload=+(8*Ie.bytesTotal/Ie.measuredBandwidthInKbps/1e3).toFixed(2),Ie.estimatedTimeOfDownload<Ie.segmentDuration*Z.get().streaming.abr.abrRulesParameters.abandonRequestsRule.abandonMultiplier||x.getRepresentationInfo().quality===0)return ne;if(!E.hasOwnProperty(Ie.id)){var Ve=x.getAbrController(),ye=Ie.bytesTotal-Ie.bytesLoaded,ke=Ve.getBitrateList(te),Ke=Ve.getQualityForBitrate(te,Ie.measuredBandwidthInKbps*Z.get().streaming.abr.bandwidthSafetyFactor,ce),tt=Ve.getMinAllowedIndexFor(V,ce),ve=tt!==void 0?Math.max(tt,Ke):Ke;ye>Ie.bytesTotal*ke[ve].bitrate/ke[Ve.getQualityFor(V,ce)].bitrate&&(ne.quality=ve,ne.reason.throughput=Ie.measuredBandwidthInKbps,ne.reason.fragmentID=Ie.id,ne.reason.rule=this.getClassName(),E[Ie.id]=Ie,u.debug("["+V+"] frag id",Ie.id," is asking to abandon and switch to quality to ",ve," measured bandwidth was",Ie.measuredBandwidthInKbps),delete h[V][Ie.id])}}else Ie.bytesLoaded===Ie.bytesTotal&&delete h[V][Ie.id]}return ne},reset:k},u=(0,t.Z)(c).getInstance().getLogger(p),k(),p}e.__dashjs_factory_name="AbandonRequestsRule",Re.Z=T.Z.getClassFactory(e)},3112:function(et,Re,D){var oe=D(3860),T=D(2068),t=D(5448),e=D(7855),y=D(5595),p=D(8512),u=D(6398),h=D(8825),E=D(3393),n=10;function c(d){d=d||{};var C,Z,k,x=this.context,ne=d.dashMetrics,O=d.mediaPlayerModel,z=(0,y.Z)(x).getInstance();function te(ve,Fe,pt){var ft=pt.reduce(function(ge,he,Ye){return he>pt[ge]?Ye:ge},0);if(ft===0)return null;var qe=Math.max(ve,n+2*Fe.length),Je=(pt[ft]-1)/(qe/n-1);return{gp:Je,Vp:n/Je}}function V(ve){ve.placeholderBuffer=0,ve.mostAdvancedSegmentStart=NaN,ve.lastSegmentWasReplacement=!1,ve.lastSegmentStart=NaN,ve.lastSegmentDurationS=NaN,ve.lastSegmentRequestTimeMs=NaN,ve.lastSegmentFinishTimeMs=NaN}function ee(ve,Fe){var pt=O.getStableBufferTime();if(ve.stableBufferTime!==pt){var ft=te(pt,ve.bitrates,ve.utilities);if(ft.Vp!==ve.Vp||ft.gp!==ve.gp){var qe=ne.getCurrentBufferLevel(Fe),Je=qe+ve.placeholderBuffer;Je-=n,Je*=ft.Vp/ve.Vp,Je+=n,ve.stableBufferTime=pt,ve.Vp=ft.Vp,ve.gp=ft.gp,ve.placeholderBuffer=Math.max(0,Je-qe)}}}function ce(ve,Fe){return ve.Vp*(ve.utilities[Fe]+ve.gp)}function Ee(ve,Fe){for(var pt=ve.bitrates[Fe],ft=ve.utilities[Fe],qe=0,Je=Fe-1;Je>=0;--Je)if(ve.utilities[Je]<ve.utilities[Fe]){var ge=ve.bitrates[Je],he=ve.utilities[Je],Ye=ve.Vp*(ve.gp+(pt*he-ge*ft)/(pt-ge));qe=Math.max(qe,Ye)}return qe}function $(ve){var Fe=ve.mediaType===E.Z.AUDIO?[E.Z.AUDIO]:k;for(var pt in Fe)k.hasOwnProperty(pt)&&k[pt].state===2&&(k[pt].placeholderBuffer=0)}function Ie(){for(var ve in k)if(k.hasOwnProperty(ve)){var Fe=k[ve];Fe.state!==0&&(Fe.state=1,V(Fe))}}function Ze(ve){if(ve&&ve.chunk&&ve.chunk.mediaInfo){var Fe=k[ve.chunk.mediaInfo.type];if(Fe&&Fe.state!==0){var pt=ve.chunk.start;isNaN(Fe.mostAdvancedSegmentStart)||pt>Fe.mostAdvancedSegmentStart?(Fe.mostAdvancedSegmentStart=pt,Fe.lastSegmentWasReplacement=!1):Fe.lastSegmentWasReplacement=!0,Fe.lastSegmentStart=pt,Fe.lastSegmentDurationS=ve.chunk.duration,Fe.lastQuality=ve.chunk.quality,ye(Fe,ve.chunk.mediaInfo.type)}}}function Ve(ve){if(ve&&ve.metric===oe.Z.HTTP_REQUEST&&ve.value&&ve.value.type===e.w.MEDIA_SEGMENT_TYPE&&ve.value.trace&&ve.value.trace.length){var Fe=k[ve.mediaType];Fe&&Fe.state!==0&&(Fe.lastSegmentRequestTimeMs=ve.value.trequest.getTime(),Fe.lastSegmentFinishTimeMs=ve.value._tfinish.getTime(),ye(Fe,ve.mediaType))}}function ye(ve,Fe){if(!isNaN(ve.lastSegmentStart)&&!isNaN(ve.lastSegmentRequestTimeMs)&&!isNaN(ve.placeholderBuffer)){if(ve.placeholderBuffer*=.99,!isNaN(ve.lastSegmentFinishTimeMs)){var pt=ne.getCurrentBufferLevel(Fe)+.001*(ve.lastSegmentFinishTimeMs-ve.lastSegmentRequestTimeMs),ft=ce(ve,ve.lastQuality),qe=Math.max(0,ft-pt);ve.placeholderBuffer=Math.min(qe,ve.placeholderBuffer)}ve.lastSegmentWasReplacement&&!isNaN(ve.lastSegmentDurationS)&&(ve.placeholderBuffer+=ve.lastSegmentDurationS),ve.lastSegmentStart=NaN,ve.lastSegmentRequestTimeMs=NaN}}function ke(ve){if(ve){var Fe=k[ve.mediaType];Fe&&Fe.state!==0&&(Fe.abrQuality=ve.newQuality)}}function Ke(ve){if(ve){var Fe=k[ve.mediaType];if(Fe&&Fe.state!==0){var pt,ft=ne.getCurrentBufferLevel(ve.mediaType);pt=Fe.abrQuality>0?Ee(Fe,Fe.abrQuality):n;var qe=Math.max(0,pt-ft);Fe.placeholderBuffer=Math.min(Fe.placeholderBuffer,qe)}}}function tt(){k={}}return C={getMaxIndex:function(ve){var Fe=(0,T.Z)(x).create();if(!(ve&&ve.hasOwnProperty("getMediaInfo")&&ve.hasOwnProperty("getMediaType")&&ve.hasOwnProperty("getScheduleController")&&ve.hasOwnProperty("getStreamInfo")&&ve.hasOwnProperty("getAbrController")&&ve.hasOwnProperty("useBufferOccupancyABR")))return Fe;var pt=ve.getMediaInfo(),ft=ve.getMediaType(),qe=ve.getScheduleController(),Je=ve.getStreamInfo(),ge=ve.getAbrController(),he=ge.getThroughputHistory(),Ye=Je?Je.id:null,f=Je&&Je.manifestInfo&&Je.manifestInfo.isDynamic,i=ve.useBufferOccupancyABR();if(Fe.reason=Fe.reason||{},!i)return Fe;qe.setTimeToLoadDelay(0);var v=function(Se){var Ue=Se.getMediaType(),ze=k[Ue];return ze?ze.state!==0&&ee(ze,Ue):(ze=function(It){var nt={},Lt=It.getMediaInfo().bitrateList.map(function(dn){return dn.bandwidth}),Ot=function(dn){return dn.map(function(pn){return Math.log(pn)})}(Lt);Ot=Ot.map(function(dn){return dn-Ot[0]+1});var Mt=O.getStableBufferTime(),Jt=te(Mt,Lt,Ot);return Jt?(nt.state=1,nt.bitrates=Lt,nt.utilities=Ot,nt.stableBufferTime=Mt,nt.Vp=Jt.Vp,nt.gp=Jt.gp,nt.lastQuality=0,V(nt)):nt.state=0,nt}(Se),k[Ue]=ze),ze}(ve);if(v.state===0)return Fe;var S,W=ne.getCurrentBufferLevel(ft),H=he.getAverageThroughput(ft,f),Te=he.getSafeAverageThroughput(ft,f),Ge=he.getAverageLatency(ft);if(Fe.reason.state=v.state,Fe.reason.throughput=H,Fe.reason.latency=Ge,isNaN(H))return Fe;switch(v.state){case 1:S=ge.getQualityForBitrate(pt,Te,Ye,Ge),Fe.quality=S,Fe.reason.throughput=Te,v.placeholderBuffer=Math.max(0,Ee(v,S)-W),v.lastQuality=S,!isNaN(v.lastSegmentDurationS)&&W>=v.lastSegmentDurationS&&(v.state=2);break;case 2:(function(Se,Ue){var ze=Date.now();if(isNaN(Se.lastSegmentFinishTimeMs)){if(!isNaN(Se.lastCallTimeMs)){var It=.001*(ze-Se.lastCallTimeMs);Se.placeholderBuffer+=Math.max(0,It)}}else{var nt=.001*(ze-Se.lastSegmentFinishTimeMs);Se.placeholderBuffer+=Math.max(0,nt)}Se.lastCallTimeMs=ze,Se.lastSegmentStart=NaN,Se.lastSegmentRequestTimeMs=NaN,Se.lastSegmentFinishTimeMs=NaN,ee(Se,Ue)})(v,ft),S=function(Se,Ue){for(var ze=Se.bitrates.length,It=NaN,nt=NaN,Lt=0;Lt<ze;++Lt){var Ot=(Se.Vp*(Se.utilities[Lt]+Se.gp)-Ue)/Se.bitrates[Lt];(isNaN(nt)||Ot>=nt)&&(nt=Ot,It=Lt)}return It}(v,W+v.placeholderBuffer);var Ce=ge.getQualityForBitrate(pt,Te,Ye,Ge);S>v.lastQuality&&S>Ce&&(S=Math.max(Ce,v.lastQuality));var be=Math.max(0,W+v.placeholderBuffer-ce(v,S));be<=v.placeholderBuffer?(v.placeholderBuffer-=be,be=0):(be-=v.placeholderBuffer,v.placeholderBuffer=0,S<ge.getMaxAllowedIndexFor(ft,Ye)?qe.setTimeToLoadDelay(1e3*be):be=0),Fe.quality=S,Fe.reason.throughput=H,Fe.reason.latency=Ge,Fe.reason.bufferLevel=W,Fe.reason.placeholderBuffer=v.placeholderBuffer,Fe.reason.delay=be,v.lastQuality=S;break;default:Z.debug("BOLA ABR rule invoked in bad state."),Fe.quality=ge.getQualityForBitrate(pt,Te,Ye,Ge),Fe.reason.state=v.state,Fe.reason.throughput=Te,Fe.reason.latency=Ge,v.state=1,V(v)}return Fe},reset:function(){tt(),z.off(h.Z.BUFFER_EMPTY,$,C),z.off(h.Z.PLAYBACK_SEEKING,Ie,C),z.off(h.Z.METRIC_ADDED,Ve,C),z.off(h.Z.QUALITY_CHANGE_REQUESTED,ke,C),z.off(h.Z.FRAGMENT_LOADING_ABANDONED,Ke,C),z.off(p.Z.MEDIA_FRAGMENT_LOADED,Ze,C)}},Z=(0,u.Z)(x).getInstance().getLogger(C),tt(),z.on(h.Z.BUFFER_EMPTY,$,C),z.on(h.Z.PLAYBACK_SEEKING,Ie,C),z.on(h.Z.METRIC_ADDED,Ve,C),z.on(h.Z.QUALITY_CHANGE_REQUESTED,ke,C),z.on(h.Z.FRAGMENT_LOADING_ABANDONED,Ke,C),z.on(p.Z.MEDIA_FRAGMENT_LOADED,Ze,C),C}c.__dashjs_factory_name="BolaRule",Re.Z=t.Z.getClassFactory(c)},895:function(et,Re,D){var oe=D(5448),T=D(2068),t=D(6398);function e(){var y,p,u=this.context;return y={getMaxIndex:function(h){var E=(0,T.Z)(u).create();if(!h||!h.hasOwnProperty("getDroppedFramesHistory"))return E;var n=h.getDroppedFramesHistory(),c=h.getStreamInfo().id;if(n){var d=n.getFrameHistory(c);if(!d||d.length===0)return E;for(var C=0,Z=0,k=T.Z.NO_CHANGE,x=1;x<d.length;x++)if(d[x]&&(C=d[x].droppedVideoFrames,(Z=d[x].totalVideoFrames)>375&&C/Z>.15)){k=x-1,p.debug("index: "+k+" Dropped Frames: "+C+" Total Frames: "+Z);break}return(0,T.Z)(u).create(k,{droppedFrames:C})}return E}},p=(0,t.Z)(u).getInstance().getLogger(y),y}e.__dashjs_factory_name="DroppedFramesRule",Re.Z=oe.Z.getClassFactory(e)},6535:function(et,Re,D){var oe=D(5595),T=D(8512),t=D(5448),e=D(6398),y=D(2068),p=D(3393),u=D(3860),h=D(8825);function E(n){n=n||{};var c,d,C,Z=this.context,k=(0,oe.Z)(Z).getInstance(),x=n.dashMetrics;function ne(){(C={})[p.Z.VIDEO]={ignoreCount:2},C[p.Z.AUDIO]={ignoreCount:2}}function O(){ne()}function z(te){isNaN(te.startTime)||te.mediaType!==p.Z.AUDIO&&te.mediaType!==p.Z.VIDEO||C[te.mediaType].ignoreCount>0&&C[te.mediaType].ignoreCount--}return c={getMaxIndex:function(te){var V=(0,y.Z)(Z).create();if(!te||!te.hasOwnProperty("getMediaType"))return V;(function(){if(!x||!x.hasOwnProperty("getCurrentBufferLevel")||!x.hasOwnProperty("getCurrentBufferState"))throw new Error(p.Z.MISSING_CONFIG_ERROR)})();var ee=te.getMediaType(),ce=x.getCurrentBufferState(ee),Ee=te.getRepresentationInfo().fragmentDuration,$=te.getStreamInfo(),Ie=$?$.id:null,Ze=te.getScheduleController(),Ve=$&&$.manifestInfo&&$.manifestInfo.isDynamic;if(function(ft,qe){return!ft&&C[qe].ignoreCount>0}(Ze.getPlaybackController().getLowLatencyModeEnabled(),ee)||!Ee)return V;if(ce&&ce.state===u.Z.BUFFER_EMPTY)d.debug("["+ee+"] Switch to index 0; buffer is empty."),V.quality=0,V.reason="InsufficientBufferRule: Buffer is empty";else{var ye=te.getMediaInfo(),ke=te.getAbrController(),Ke=ke.getThroughputHistory(),tt=x.getCurrentBufferLevel(ee),ve=Ke.getAverageThroughput(ee,Ve),Fe=Ke.getAverageLatency(ee),pt=ve*(tt/Ee)*.5;V.quality=ke.getQualityForBitrate(ye,pt,Ie,Fe),V.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return V},reset:function(){ne(),k.off(h.Z.PLAYBACK_SEEKING,O,c),k.off(T.Z.BYTES_APPENDED_END_FRAGMENT,z,c)}},d=(0,e.Z)(Z).getInstance().getLogger(c),ne(),k.on(h.Z.PLAYBACK_SEEKING,O,c),k.on(T.Z.BYTES_APPENDED_END_FRAGMENT,z,c),c}E.__dashjs_factory_name="InsufficientBufferRule",Re.Z=t.Z.getClassFactory(E)},1914:function(et,Re,D){var oe=D(3860),T=D(2068),t=D(5448),e=D(7855),y=D(5595),p=D(8512),u=D(6398),h=D(3393);function E(n){n=n||{};var c,d,C,Z,k=this.context,x=n.dashMetrics,ne=(0,y.Z)(k).getInstance();function O(Ie){Ie.placeholderBuffer=0,Ie.mostAdvancedSegmentStart=NaN,Ie.lastSegmentWasReplacement=!1,Ie.lastSegmentStart=NaN,Ie.lastSegmentDurationS=NaN,Ie.lastSegmentRequestTimeMs=NaN,Ie.lastSegmentFinishTimeMs=NaN,Ie.lastSegmentUrl=""}function z(){for(var Ie in d)if(d.hasOwnProperty(Ie)){var Ze=d[Ie];Ze.state!==0&&(Ze.state=1,O(Ze))}}function te(Ie){if(Ie&&Ie.chunk&&Ie.chunk.mediaInfo){var Ze=d[Ie.chunk.mediaInfo.type],Ve=C[Ie.chunk.mediaInfo.type];if(Ze&&Ze.state!==0){var ye=Ie.chunk.start;isNaN(Ze.mostAdvancedSegmentStart)||ye>Ze.mostAdvancedSegmentStart?(Ze.mostAdvancedSegmentStart=ye,Ze.lastSegmentWasReplacement=!1):Ze.lastSegmentWasReplacement=!0,Ze.lastSegmentStart=ye,Ze.lastSegmentDurationS=Ie.chunk.duration,Ze.lastQuality=Ie.chunk.quality,ee(Ze,Ve)}}}function V(Ie){if(Ie&&Ie.metric===oe.Z.HTTP_REQUEST&&Ie.value&&Ie.value.type===e.w.MEDIA_SEGMENT_TYPE&&Ie.value.trace&&Ie.value.trace.length){var Ze=d[Ie.mediaType],Ve=C[Ie.mediaType];Ze&&Ze.state!==0&&(Ze.lastSegmentRequestTimeMs=Ie.value.trequest.getTime(),Ze.lastSegmentFinishTimeMs=Ie.value._tfinish.getTime(),ee(Ze,Ve))}}function ee(Ie,Ze){isNaN(Ie.lastSegmentStart)||isNaN(Ie.lastSegmentRequestTimeMs)||(Ze.segment_request_start_s=.001*Ie.lastSegmentRequestTimeMs,Ze.segment_download_finish_s=.001*Ie.lastSegmentFinishTimeMs,Ie.lastSegmentStart=NaN,Ie.lastSegmentRequestTimeMs=NaN)}function ce(Ie){if(Ie&&Ie.mediaType){var Ze=d[Ie.mediaType];Ze&&Ze.state!==0&&(Ze.abrQuality=Ie.newQuality)}}function Ee(Ie,Ze){if(Ie.length!==Ze.length)return-1;for(var Ve=0,ye=0;ye<Ie.length;ye++)Ve+=Ie[ye]*Ze[ye];return Ve}function $(){d={},C={}}return c={getMaxIndex:function(Ie){var Ze,Ve=(0,T.Z)(k).create(),ye=Math.pow(4,.99),ke=Math.max(Math.pow(4,1),ye*Math.sqrt(4)),Ke=Ie.getMediaInfo(),tt=Ie.getMediaType(),ve=Ke.bitrateList.map(function(Jt){return Jt.bandwidth}),Fe=ve.length,pt=Ie.getScheduleController(),ft=Ie.getStreamInfo(),qe=Ie.getAbrController(),Je=qe.getThroughputHistory(),ge=ft&&ft.manifestInfo&&ft.manifestInfo.isDynamic,he=Ie.useL2AABR(),Ye=x.getCurrentBufferLevel(tt,!0),f=Je.getSafeAverageThroughput(tt,ge),i=Je.getAverageThroughput(tt,ge),v=Je.getAverageLatency(tt),S=Ie.getVideoModel().getPlaybackRate();if(!(Ie&&Ie.hasOwnProperty("getMediaInfo")&&Ie.hasOwnProperty("getMediaType")&&Ie.hasOwnProperty("getScheduleController")&&Ie.hasOwnProperty("getStreamInfo")&&Ie.hasOwnProperty("getAbrController")&&Ie.hasOwnProperty("useL2AABR"))||(Ve.reason=Ve.reason||{},!he||tt===h.Z.AUDIO))return Ve;pt.setTimeToLoadDelay(0);var W=function(Jt){var dn=Jt.getMediaType(),pn=d[dn];return pn||(pn=function(Gn){var _n={},An=Gn.getMediaInfo(),qn=An.bitrateList.map(function(yn){return yn.bandwidth/1e3});return _n.state=1,_n.bitrates=qn,_n.lastQuality=0,function(yn){yn&&yn.type&&(C[yn.type]={},C[yn.type].w=[],C[yn.type].prev_w=[],C[yn.type].Q=0,C[yn.type].segment_request_start_s=0,C[yn.type].segment_download_finish_s=0,C[yn.type].B_target=1.5)}(An),O(_n),_n}(Jt),d[dn]=pn),pn}(Ie);if(W.state===0)return Ve;var H=C[tt];if(!H||(Ve.reason.state=W.state,Ve.reason.throughput=i,Ve.reason.latency=v,isNaN(i)))return Ve;switch(W.state){case 1:if(Ze=qe.getQualityForBitrate(Ke,f,ft.id,v),Ve.quality=Ze,Ve.reason.throughput=f,W.lastQuality=Ze,!isNaN(W.lastSegmentDurationS)&&Ye>=H.B_target){W.state=2,H.Q=ye;for(var Te=0;Te<Fe;++Te)Te===W.lastQuality?H.prev_w[Te]=1:H.prev_w[Te]=0}break;case 2:var Ge=[],Ce=x.getCurrentHttpRequest(tt).trace.reduce(function(Jt,dn){return Jt+dn.d},0),be=x.getCurrentHttpRequest(tt).trace.reduce(function(Jt,dn){return Jt+dn.b[0]},0),Se=Math.round(8*be/Ce),Ue=x.getCurrentHttpRequest(tt);if(Se<1&&(Se=1),Ue.url===W.lastSegmentUrl||Ue.type===e.w.INIT_SEGMENT_TYPE)Ze=W.lastQuality;else{for(var ze=W.lastSegmentDurationS,It=1,nt=0;nt<Fe;++nt)ve[nt]=ve[nt]/1e3,S*ve[nt]>Se&&(It=-1),H.w[nt]=H.prev_w[nt]+It*(ze/(2*ke))*((H.Q+ye)*(S*ve[nt]/Se));H.w=function(Jt){for(var dn=Jt.length,pn=!1,Gn=[],_n=0;_n<dn;++_n)Gn[_n]=Jt[_n];for(var An=Jt.sort(function(tr,Vn){return Vn-tr}),qn=0,yn=0,Xn=[],xn=0;xn<dn-1;++xn)if((yn=((qn+=An[xn])-1)/(xn+1))>=An[xn+1]){pn=!0;break}pn||(yn=(qn+An[dn-1]-1)/dn);for(var Hn=0;Hn<dn;++Hn)Xn[Hn]=Math.max(Gn[Hn]-yn,0);return Xn}(H.w);for(var Lt=0;Lt<Fe;++Lt)Ge[Lt]=H.w[Lt]-H.prev_w[Lt],H.prev_w[Lt]=H.w[Lt];H.Q=Math.max(0,H.Q-ze+ze*S*((Ee(ve,H.prev_w)+Ee(ve,Ge))/Se));for(var Ot=[],Mt=0;Mt<Fe;++Mt)Ot[Mt]=Math.abs(ve[Mt]-Ee(H.w,ve));(Ze=Ot.indexOf(Math.min.apply(Math,Ot)))>W.lastQuality&&ve[W.lastQuality+1]<=Se&&(Ze=W.lastQuality+1),ve[Ze]>=Se&&(H.Q=2*Math.max(ye,H.Q)),W.lastSegmentUrl=Ue.url}Ve.quality=Ze,Ve.reason.throughput=i,Ve.reason.latency=v,Ve.reason.bufferLevel=Ye,W.lastQuality=Ve.quality;break;default:Z.debug("L2A ABR rule invoked in bad state."),Ve.quality=qe.getQualityForBitrate(Ke,f,ft.id,v),Ve.reason.state=W.state,Ve.reason.throughput=f,Ve.reason.latency=v,W.state=1,O(W)}return Ve},reset:function(){$(),ne.off(p.Z.PLAYBACK_SEEKING,z,c),ne.off(p.Z.MEDIA_FRAGMENT_LOADED,te,c),ne.off(p.Z.METRIC_ADDED,V,c),ne.off(p.Z.QUALITY_CHANGE_REQUESTED,ce,c)}},Z=(0,u.Z)(k).getInstance().getLogger(c),$(),ne.on(p.Z.PLAYBACK_SEEKING,z,c),ne.on(p.Z.MEDIA_FRAGMENT_LOADED,te,c),ne.on(p.Z.METRIC_ADDED,V,c),ne.on(p.Z.QUALITY_CHANGE_REQUESTED,ce,c),c}E.__dashjs_factory_name="L2ARule",Re.Z=t.Z.getClassFactory(E)},6070:function(et,Re,D){var oe=D(5448),T=D(6398),t=D(2068);function e(){var y,p,u=this.context;return y={getMaxIndex:function(h){for(var E=h?h.getSwitchHistory():null,n=E?E.getSwitchRequests():[],c=0,d=0,C=0,Z=(0,t.Z)(u).create(),k=0;k<n.length;k++)if(n[k]!==void 0&&(c+=n[k].drops,d+=n[k].noDrops,C+=n[k].dropSize,c+d>=6&&c/d>.075)){Z.quality=k>0&&n[k].drops>0?k-1:k,Z.reason={index:Z.quality,drops:c,noDrops:d,dropSize:C},p.debug("Switch history rule index: "+Z.quality+" samples: "+(c+d)+" drops: "+c);break}return Z}},p=(0,T.Z)(u).getInstance().getLogger(y),y}e.__dashjs_factory_name="SwitchHistoryRule",Re.Z=oe.Z.getClassFactory(e)},5628:function(et,Re,D){var oe=D(5448),T=D(2068),t=D(3393),e=D(3860);function y(p){p=p||{};var u=this.context,h=p.dashMetrics;return{getMaxIndex:function(E){var n=(0,T.Z)(u).create();if(!(E&&E.hasOwnProperty("getMediaInfo")&&E.hasOwnProperty("getMediaType")&&E.hasOwnProperty("useBufferOccupancyABR")&&E.hasOwnProperty("getAbrController")&&E.hasOwnProperty("getScheduleController")))return n;(function(){if(!h||!h.hasOwnProperty("getCurrentBufferState"))throw new Error(t.Z.MISSING_CONFIG_ERROR)})();var c=E.getMediaInfo(),d=E.getMediaType(),C=h.getCurrentBufferState(d),Z=E.getScheduleController(),k=E.getAbrController(),x=E.getStreamInfo(),ne=x?x.id:null,O=x&&x.manifestInfo?x.manifestInfo.isDynamic:null,z=k.getThroughputHistory(),te=z.getSafeAverageThroughput(d,O),V=z.getAverageLatency(d),ee=E.useBufferOccupancyABR();return isNaN(te)||!C||ee||k.getAbandonmentStateFor(ne,d)!==e.Z.ABANDON_LOAD&&(C.state===e.Z.BUFFER_LOADED||O)&&(n.quality=k.getQualityForBitrate(c,te,ne,V),Z.setTimeToLoadDelay(0),n.reason={throughput:te,latency:V}),n},reset:function(){}}}y.__dashjs_factory_name="ThroughputRule",Re.Z=oe.Z.getClassFactory(y)},4722:function(et,Re,D){var oe=D(5448),T=D(6398);function t(){var e,y,p,u,h,E,n,c,d,C=this.context;function Z(){p=null,u=1,h=100,E=0,n=null,c=null,d="dynamic_weight_selection"}function k(){var te=0;if(p)for(var V=0;V<p.length;V++){var ee=p[V];ee.state.throughput>te&&(te=ee.state.throughput)}return te}function x(te,V,ee){var ce=te.map(function(Ee,$){return ee[$]*Math.pow(Ee-V[$],2)}).reduce(function(Ee,$){return Ee+$});return(ce<0?-1:1)*Math.sqrt(Math.abs(ce))}function ne(te,V){return x([te.state.throughput,te.state.latency,te.state.rebuffer,te.state.switch],[V.state.throughput,V.state.latency,V.state.rebuffer,V.state.switch],[1,1,1,1])}function O(te,V,ee){for(var ce=0;ce<V.length;ce++){var Ee=V[ce],$=ne(Ee,te);z(Ee,ee,Math.exp(-1*Math.pow($,2)/(2*Math.pow(.1,2))))}}function z(te,V,ee){var ce=te.state,Ee=[.01,.01,.01,.01];ce.throughput=ce.throughput+(V[0]-ce.throughput)*Ee[0]*ee,ce.latency=ce.latency+(V[1]-ce.latency)*Ee[1]*ee,ce.rebuffer=ce.rebuffer+(V[2]-ce.rebuffer)*Ee[2]*ee,ce.switch=ce.switch+(V[3]-ce.switch)*Ee[3]*ee}return e={getNextQuality:function(te,V,ee,ce,Ee,$,Ie){var Ze=ee,Ve=ce,ye=V,ke=function(H){if(!p){p=[];var Te=H.bitrateList,Ge=[];E=Te[0].bandwidth,Te.forEach(function(Ue){Ge.push(Ue.bandwidth),Ue.bandwidth<E&&(E=Ue.bandwidth)}),Se=Ge.map(function(Ue){return Math.pow(Ue,2)}).reduce(function(Ue,ze){return Ue+ze}),u=Math.sqrt(Se);for(var Ce=0;Ce<Te.length;Ce++){var be={qualityIndex:Ce,bitrate:Te[Ce].bandwidth,state:{throughput:Te[Ce].bandwidth/u,latency:0,rebuffer:0,switch:0}};p.push(be)}c=function(Ue){var ze=[],It=function(Pr){for(var vt=[],mt=0;mt<Pr;mt++){var yt=[Math.random()*k(),Math.random(),Math.random(),Math.random()];vt.push(yt)}return vt}(Math.pow(Ue.length,2));ze.push(It[0]);for(var nt=[1,1,1,1],Lt=1;Lt<Ue.length;Lt++){for(var Ot=null,Mt=null,Jt=0;Jt<It.length;Jt++){for(var dn=It[Jt],pn=null,Gn=0;Gn<ze.length;Gn++){var _n=x(dn,ze[Gn],nt);(pn===null||_n<pn)&&(pn=_n)}(Mt===null||pn>Mt)&&(Ot=dn,Mt=pn)}ze.push(Ot)}for(var An=null,qn=null,yn=0;yn<ze.length;yn++){for(var Xn=0,xn=0;xn<ze.length;xn++)yn!==xn&&(Xn+=x(ze[yn],ze[xn],nt));(An===null||Xn>An)&&(An=Xn,qn=yn)}var Hn=[];for(Hn.push(ze[qn]),ze.splice(qn,1);ze.length>0;){for(var tr=null,Vn=null,rr=0;rr<ze.length;rr++){var ir=x(Hn[0],ze[rr],nt);(tr===null||ir<tr)&&(tr=ir,Vn=rr)}Hn.push(ze[Vn]),ze.splice(Vn,1)}return Hn}(p)}var Se;return p}(te),Ke=V/u;Ke>1&&(Ke=k()),ee/=h,y.debug("getNextQuality called throughput:".concat(Ke," latency:").concat(ee," bufferSize:").concat(ce," currentQualityIndex:").concat($," playbackRate:").concat(Ee));var tt=ke[$],ve=tt.bitrate*Ie.getSegmentDuration()/ye,Fe=Math.max(0,ve-Ve);if(Ve-ve<Ie.getMinBuffer())return y.debug("Buffer is low for bitrate= ".concat(tt.bitrate," downloadTime=").concat(ve," currentBuffer=").concat(Ve," rebuffer=").concat(Fe)),function(H,Te){var Ge=0,Ce=H;if(p)for(var be=0;be<p.length;be++){var Se=p[be];Se.bitrate<H.bitrate&&Se.bitrate>Ge&&Te>Se.bitrate&&(Ge=Se.bitrate,Ce=Se)}return Ce}(tt,ye).qualityIndex;switch(d){case"manual_weight_selection":n=[.4,.4,.4,.4];break;case"random_weight_selection":(function(H){n=function(Te,Ge){for(var Ce=[],be=Math.sqrt(2/Te),Se=0;Se<4;Se++)Ce.push(Math.random()*be);return n=Ce}(H.length)})(ke);break;default:(function(H,Te,Ge,Ce,be,Se,Ue){n||(n=c[c.length-1]);var ze=H.findWeightVector(Te,Ge,Ce,be,Se,Ue);ze!==null&&ze!==-1&&(n=ze)})(Ie,ke,Ze,Ve,Fe,ye,Ee)}for(var pt=null,ft=null,qe=null,Je=0;Je<ke.length;Je++){var ge=ke[Je],he=ge.state,Ye=[he.throughput,he.latency,he.rebuffer,he.switch],f=n.slice(),i=Ie.getNextBufferWithBitrate(ge.bitrate,Ve,ye),v=i<Ie.getMinBuffer();v&&y.debug("Buffer is low for bitrate=".concat(ge.bitrate," downloadTime=").concat(ve," currentBuffer=").concat(Ve," nextBuffer=").concat(i)),(ge.bitrate>V-1e4||v)&&ge.bitrate!==E&&(f[0]=100);var S=x(Ye,[Ke,0,0,0],f);(pt===null||S<pt)&&(pt=S,ft=ge.qualityIndex,qe=ge)}var W=Math.abs(tt.bitrate-qe.bitrate)/u;return O(tt,ke,[Ke,ee,Fe,W]),O(qe,ke,[Ke,0,0,W]),ft},reset:function(){Z()}},y=(0,T.Z)(C).getInstance().getLogger(e),Z(),e}t.__dashjs_factory_name="LearningAbrController",Re.Z=oe.Z.getClassFactory(t)},5317:function(et,Re,D){var oe=D(5448),T=D(2298);function t(){var e,y,p,u,h;function E(){y=null,p=null,u=null,h=null}function n(d,C,Z,k){var x=new T.Z;return x.type=d,x.weights.bitrateReward=C||1,x.weights.bitrateSwitchPenalty=1,x.weights.rebufferPenalty=Z||1e3,x.weights.latencyPenalty=[],x.weights.latencyPenalty.push({threshold:1.1,penalty:.05*k}),x.weights.latencyPenalty.push({threshold:1e8,penalty:.1*Z}),x.weights.playbackSpeedPenalty=k||200,x}function c(d,C,Z,k,x){x.bitrateWSum+=x.weights.bitrateReward*d,x.lastBitrate&&(x.bitrateSwitchWSum+=x.weights.bitrateSwitchPenalty*Math.abs(d-x.lastBitrate)),x.lastBitrate=d,x.rebufferWSum+=x.weights.rebufferPenalty*C;for(var ne=0;ne<x.weights.latencyPenalty.length;ne++){var O=x.weights.latencyPenalty[ne];if(Z<=O.threshold){x.latencyWSum+=O.penalty*Z;break}}x.playbackSpeedWSum+=x.weights.playbackSpeedPenalty*Math.abs(1-k),x.totalQoe=x.bitrateWSum-x.bitrateSwitchWSum-x.rebufferWSum-x.latencyWSum-x.playbackSpeedWSum}return e={setupPerSegmentQoe:function(d,C,Z){y=n("segment",d,C,Z),p=d,u=C,h=Z},logSegmentMetrics:function(d,C,Z,k){y&&c(d,C,Z,k,y)},getPerSegmentQoe:function(){return y},calculateSingleUseQoe:function(d,C,Z,k){var x=null;return p&&u&&h&&(x=n("segment",p,u,h)),x?(c(d,C,Z,k,x),x.totalQoe):0},reset:function(){E()}},E(),e}t.__dashjs_factory_name="LoLpQoeEvaluator",Re.Z=oe.Z.getClassFactory(t)},5435:function(et,Re,D){var oe=D(6398),T=D(5448),t=D(4722),e=D(5317),y=D(2068),p=D(3860),u=D(6523),h=D(3393);function E(n){var c,d,C,Z,k=(n=n||{}).dashMetrics,x=this.context;return d={getMaxIndex:function(ne){try{var O=(0,y.Z)(x).create(),z=ne.getMediaInfo().type,te=ne.getAbrController(),V=ne.getStreamInfo(),ee=te.getQualityFor(z,V.id),ce=ne.getMediaInfo(),Ee=k.getCurrentBufferState(z),$=ne.getScheduleController(),Ie=k.getCurrentBufferLevel(z,!0),Ze=V&&V.manifestInfo?V.manifestInfo.isDynamic:null,Ve=$.getPlaybackController(),ye=Ve.getCurrentLiveLatency();if(!ne.useLoLPABR()||z===h.Z.AUDIO)return O;ye||(ye=0);var ke=Ve.getPlaybackRate(),Ke=te.getThroughputHistory().getSafeAverageThroughput(z,Ze);if(c.debug("Throughput ".concat(Math.round(Ke)," kbps")),isNaN(Ke)||!Ee||te.getAbandonmentStateFor(V.id,z)===p.Z.ABANDON_LOAD)return O;for(var tt=ce.bitrateList,ve=ne.getRepresentationInfo().fragmentDuration,Fe=tt[0].bandwidth/1e3,pt=tt[tt.length-1].bandwidth/1e3,ft=0;ft<tt.length;ft++){var qe=tt[ft].bandwidth/1e3;qe>pt?pt=qe:qe<Fe&&(Fe=qe)}var Je=tt[ee].bandwidth/1e3,ge=k.getCurrentHttpRequest(z,!0),he=(ge.tresponse.getTime()-ge.trequest.getTime())/1e3,Ye=he>ve?he-ve:0;Z.setupPerSegmentQoe(ve,pt,Fe),Z.logSegmentMetrics(Je,Ye,ye,ke);var f=(0,u.Z)(x).create({targetLatency:1.5,bufferMin:.3,segmentDuration:ve,qoeEvaluator:Z});return O.quality=C.getNextQuality(ce,1e3*Ke,ye,Ie,ke,ee,f),O.reason={throughput:Ke,latency:ye},O.priority=y.Z.PRIORITY.STRONG,$.setTimeToLoadDelay(0),O.quality!==ee&&c.debug("[TgcLearningRule]["+z+"] requesting switch to index: ",O.quality,"Average throughput",Math.round(Ke),"kbps"),O}catch(i){throw i}},reset:function(){C.reset(),Z.reset()}},c=(0,oe.Z)(x).getInstance().getLogger(d),C=(0,t.Z)(x).create(),Z=(0,e.Z)(x).create(),d}E.__dashjs_factory_name="LoLPRule",Re.Z=T.Z.getClassFactory(E)},6523:function(et,Re,D){var oe=D(5448);function T(t){var e,y,p,u,h=t.targetLatency,E=t.bufferMin,n=t.segmentDuration,c=t.qoeEvaluator;function d(){return n}function C(Z,k){var x=d();return k>x?Z-x:Z+x-k}return e={getMinBuffer:function(){return E},getSegmentDuration:d,getNextBufferWithBitrate:function(Z,k,x){return C(k,Z*n/x)},getNextBuffer:C,findWeightVector:function(Z,k,x,ne,O,z){var te=null,V=null,ee=null,ce=Math.abs(k-p);return Z.forEach(function(Ee){y.forEach(function($){$[0];var Ie=$[1],Ze=$[2],Ve=($[3],Ee.bitrate*n/O),ye=C(x,Ve),ke=(Ze===0?10:1/Ze)*Math.max(1e-5,Ve-ye),Ke=(Ie===0?10:1/Ie)*Ee.state.latency,tt=c.calculateSingleUseQoe(Ee.bitrate,ke,Ke,z);(te===null||tt>te)&&function(ve,Fe,pt){return!(ve>h+pt)&&Fe>=E}(k,ye,ce)&&(te=tt,V=$,ee=Ee.bitrate)})}),V===null&&ee===null&&(V=-1),p=k,V}},y=function Z(k,x,ne){if(ne===x)return k;for(var O=k.length,z=0;z<O;z++)for(var te=k.shift(),V=0;V<u.length;V++)k.push(te.concat(u[V]));return Z(k,x,ne+1)}((u=[.2,.4,.6,.8,1]).map(function(Z){return[Z]}),4,1),p=0,e}T.__dashjs_factory_name="LoLpWeightSelector",Re.Z=oe.Z.getClassFactory(T)},2298:function(et,Re){Re.Z=function D(){(function(oe,T){if(!(oe instanceof T))throw new TypeError("Cannot call a class as a function")})(this,D),this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0}},7803:function(et,Re,D){D.d(Re,{Y:function(){return c}});var oe=D(3393),T=D(1553),t=D(5448),e=D(2128),y=D(2594),p=D(7387),u=D(7417),h=D(9032),E=D(9326),n=D(7802),c=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function d(C){var Z,k,x,ne,O,z,te,V,ee=this.context,ce=C.adapter,Ee=C.baseURLController,$=C.streamInfo,Ie=C.timelineConverter,Ze=C.debug,Ve=C.eventBus,ye=C.events,ke=C.dashConstants,Ke=(0,y.Z)(ee).getInstance();function tt(Fe,pt){var ft=new e.Z;ft.id=Fe.id,ft.bitrate=Fe.bandwidth,ft.width=Fe.width,ft.height=Fe.height,ft.tilesHor=1,ft.tilesVert=1,Fe.essentialProperties&&Fe.essentialProperties.forEach(function(qe){if(c.indexOf(qe.schemeIdUri)>=0&&qe.value){var Je=qe.value.split("x");Je.length!==2||isNaN(Je[0])||isNaN(Je[1])||(ft.tilesHor=parseInt(Je[0],10),ft.tilesVert=parseInt(Je[1],10))}}),pt?z.updateSegmentData(Fe).then(function(qe){(function(Je,ge,he){var Ye=[],f=function(i,v){var S,W,H,Te,Ge=[],Ce=0;for(S=0,W=i.segments.length;S<W;S++)H=i.segments[S],(Te=(0,p.TJ)(Ie,ce.getIsDynamic(),v,H.startTime,H.duration,H.timescale,H.media,H.mediaRange,Ce))&&(Ge.push(Te),Te=null,Ce++);return Ge}(he,ge);ge.segments=f,Je.segmentDuration=ge.segments[0].duration,Je.readThumbnail=function(i,v){var S=null;Ye.some(function(W){if(W.start<=i&&W.end>i)return S=W.url,!0}),S?v(S):ge.segments.some(function(W){if(W.mediaStartTime<=i&&W.mediaStartTime+W.duration>i){var H=Ee.resolve(ge.path);return te.load({method:"get",url:H.url,request:{range:W.mediaRange,responseType:"arraybuffer"},onload:function(Te){var Ge=V.getSamplesInfo(Te.target.response),Ce=new Blob([Te.target.response.slice(Ge.sampleList[0].offset,Ge.sampleList[0].offset+Ge.sampleList[0].size)],{type:"image/jpeg"}),be=window.URL.createObjectURL(Ce);Ye.push({start:W.mediaStartTime,end:W.mediaStartTime+W.duration,url:be}),v&&v(be)}}),!0}})}})(ft,Fe,qe)}):(ft.startNumber=Fe.startNumber,ft.segmentDuration=Fe.segmentDuration,ft.timescale=Fe.timescale,ft.templateUrl=function(qe){var Je=Ke.isRelative(qe.media)?Ke.resolve(qe.media,Ee.resolve(qe.path).url):qe.media;return Je?(0,p.Aj)(Je,qe.id):""}(Fe)),ft.tilesHor>0&&ft.tilesVert>0&&(ft.widthPerTile=ft.width/ft.tilesHor,ft.heightPerTile=ft.height/ft.tilesVert,k.push(ft))}function ve(){k=[],ne=-1,O=null}return Z={getTracks:function(){return k},addTracks:function(){if($&&ce&&(O=ce.getMediaInfoForType($,oe.Z.IMAGE))){var Fe=ce.getVoRepresentations(O);Fe&&Fe.length>0&&Fe.forEach(function(pt){(pt.segmentInfoType===T.Z.SEGMENT_TEMPLATE&&pt.segmentDuration>0&&pt.media||pt.segmentInfoType===T.Z.SEGMENT_TIMELINE)&&tt(pt),pt.segmentInfoType===T.Z.SEGMENT_BASE&&tt(pt,!0)}),k.length>0&&k.sort(function(pt,ft){return pt.bitrate-ft.bitrate})}},reset:ve,setTrackByIndex:function(Fe){k&&k.length!==0&&(Fe>=k.length&&(Fe=k.length-1),ne=Fe)},getCurrentTrack:function(){return ne<0?null:k[ne]},getCurrentTrackIndex:function(){return ne},getThumbnailRequestForTime:function(Fe){for(var pt,ft=ce.getVoRepresentations(O),qe=0;qe<ft.length;qe++)if(k[ne].id===ft[qe].id){pt=ft[qe];break}return x.getSegmentRequestForTime(O,pt,Fe)}},ve(),te=(0,h.Z)(ee).create({}),V=(0,u.Z)(ee).getInstance(),z=(0,n.Z)(ee).create({events:ye,eventBus:Ve,streamInfo:$,timelineConverter:Ie,dashConstants:ke,dashMetrics:C.dashMetrics,segmentBaseController:C.segmentBaseController,type:oe.Z.IMAGE}),(x=(0,E.Z)(ee).create({streamInfo:$,type:oe.Z.IMAGE,timelineConverter:Ie,segmentsController:z,baseURLController:Ee,debug:Ze,eventBus:Ve,events:ye,dashConstants:ke,urlUtils:Ke})).initialize(!!ce&&ce.getIsDynamic()),Z}d.__dashjs_factory_name="ThumbnailTracks",Re.Z=t.Z.getClassFactory(d)},7417:function(et,Re,D){var oe=D(6398),T=D(8260),t=D(5448),e=D(6934),y=D(9597);function p(){var u,h,E=this.context;function n(C){if(!C)return null;C.fileStart===void 0&&(C.fileStart=0);var Z=e.parseBuffer(C),k=(0,T.Z)(E).create();return k.setData(Z),k}function c(C,Z){return C[Z+3]>>>0|C[Z+2]<<8>>>0|C[Z+1]<<16>>>0|C[Z]<<24>>>0}function d(C,Z){return String.fromCharCode(C[Z++])+String.fromCharCode(C[Z++])+String.fromCharCode(C[Z++])+String.fromCharCode(C[Z])}return h={parse:n,findLastTopIsoBoxCompleted:function(C,Z,k){if(k===void 0&&(k=0),!Z||k+8>=Z.byteLength)return new y.Z(0,!1);for(var x,ne=Z instanceof ArrayBuffer?new Uint8Array(Z):Z,O=0;k<ne.byteLength;){var z=c(ne,k),te=d(ne,k+4);if(z===0)break;k+z<=ne.byteLength&&(C.indexOf(te)>=0?x=new y.Z(k,!0,z):O=k+z),k+=z}return x||new y.Z(O,!1)},getMediaTimescaleFromMoov:function(C){var Z=n(C),k=Z?Z.getBox("mdhd"):void 0;return k?k.timescale:NaN},getSamplesInfo:function(C){if(!C||C.byteLength===0)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var Z,k,x,ne,O,z,te,V,ee,ce,Ee,$,Ie,Ze,Ve,ye,ke=n(C),Ke=ke.getBoxes("moof"),tt=ke.getBoxes("mfhd");Ve=ke.getBoxes("moof").length,Ze=tt[tt.length-1].sequence_number,k=0,O=[];var ve=-1,Fe=-1;for(ce=0;ce<Ke.length;ce++){var pt=Ke[ce],ft=pt.getChildBoxes("traf");for(V=0;V<ft.length;V++){var qe=ft[V],Je=qe.getChildBox("tfhd"),ge=qe.getChildBox("tfdt");ne=ge.baseMediaDecodeTime;var he=qe.getChildBoxes("trun"),Ye=qe.getChildBoxes("subs");for(ee=0;ee<he.length;ee++){var f=he[ee];for(k=f.sample_count,Ie=(Je.base_data_offset||0)+(f.data_offset||0),te=0;te<k;te++){Z=(z=f.samples[te]).sample_duration!==void 0?z.sample_duration:Je.default_sample_duration,x=z.sample_size!==void 0?z.sample_size:Je.default_sample_size;var i={dts:ne,cts:ne+(z.sample_composition_time_offset!==void 0?z.sample_composition_time_offset:0),duration:Z,offset:pt.offset+Ie,size:x,subSizes:[x]};if(Ye)for(Ee=0;Ee<Ye.length;Ee++){var v=Ye[Ee];if(ve<v.entry_count-1&&te>Fe&&(ve++,Fe+=v.entries[ve].sample_delta),te==Fe){i.subSizes=[];var S=v.entries[ve];for($=0;$<S.subsample_count;$++)i.subSizes.push(S.subsamples[$].subsample_size)}}O.push(i),Ie+=x,ne+=Z}}ye=ne-ge.baseMediaDecodeTime}}return{sampleList:O,lastSequenceNumber:Ze,totalDuration:ye,numSequences:Ve}},findInitRange:function(C){var Z=null,k=n(C);if(!k)return Z;var x=k.getBox("ftyp"),ne=k.getBox("moov");return u.debug("Searching for initialization."),ne&&ne.isComplete&&(Z=(x?x.offset:ne.offset)+"-"+(ne.offset+ne.size-1),u.debug("Found the initialization.  Range: "+Z)),Z},parsePayload:function(C,Z,k){if(k===void 0&&(k=0),!Z||k+8>=Z.byteLength)return new y.Z(0,!1);for(var x,ne=Z instanceof ArrayBuffer?new Uint8Array(Z):Z,O=0;k<ne.byteLength;){var z=c(ne,k),te=d(ne,k+4);if(z===0)break;k+z<=ne.byteLength&&(C.indexOf(te)>=0?x=new y.Z(k,!0,z,te):O=k+z),k+=z}return x||new y.Z(O,!1)}},u=(0,oe.Z)(E).getInstance().getLogger(h),h}p.__dashjs_factory_name="BoxParser",Re.Z=t.Z.getSingletonFactory(p)},1715:function(et,Re,D){D.d(Re,{B:function(){return y}});var oe=D(5448),T=D(7803),t=D(3393),e=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function y(){var u="ManagedMediaSource"in window,h="WebKitMediaSource"in window,E="MediaSource"in window;return u||h||E}function p(){var u,h,E;return u={setConfig:function(n){n&&n.settings&&(h=n.settings)},supportsMediaSource:y,supportsEncryptedMedia:function(){return E},supportsCodec:function(n,c){return c!==t.Z.AUDIO&&c!==t.Z.VIDEO?Promise.resolve(!0):function(d,C){return h.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(d.codec&&C===t.Z.AUDIO||C===t.Z.VIDEO&&d.codec&&d.width&&d.height&&d.bitrate&&d.framerate)}(n,c)?function(d,C){return new Promise(function(Z){if(d&&d.codec){var k={type:"media-source"};k[C]={},k[C].contentType=d.codec,k[C].width=d.width,k[C].height=d.height,k[C].bitrate=parseInt(d.bitrate),k[C].framerate=parseFloat(d.framerate),navigator.mediaCapabilities.decodingInfo(k).then(function(x){Z(x.supported)}).catch(function(){Z(!1)})}else Z(!1)})}(n,c):function(d){return new Promise(function(C){if(d&&d.codec){var Z=d.codec;d.width&&d.height&&(Z+=';width="'+d.width+'";height="'+d.height+'"'),"ManagedMediaSource"in window&&ManagedMediaSource.isTypeSupported(Z)||"MediaSource"in window&&MediaSource.isTypeSupported(Z)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(Z)?C(!0):C(!1)}else C(!1)})}(n)},setEncryptedMediaSupported:function(n){E=n},supportsEssentialProperty:function(n){try{return T.Y.indexOf(n.schemeIdUri)!==-1}catch{return!0}},codecRootCompatibleWithCodec:function(n,c){for(var d,C=n.split(".")[0],Z=c.indexOf(C)===0,k=0;k<e.length;k++)if(e[k].codec===C){d=e[k];break}return d?Z||d.compatibleCodecs.some(function(x){return c.indexOf(x)===0}):Z}},E=!1,u}p.__dashjs_factory_name="Capabilities",Re.Z=oe.Z.getSingletonFactory(p)},2295:function(et,Re,D){var oe=D(5448),T=D(3106);function t(){return{customTimeRangeArray:[],length:0,add:function(e,y){var p;for(p=0;p<this.customTimeRangeArray.length&&e>this.customTimeRangeArray[p].start;p++);for(this.customTimeRangeArray.splice(p,0,{start:e,end:y}),p=0;p<this.customTimeRangeArray.length-1;p++)this.mergeRanges(p,p+1)&&p--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(e,y){for(var p=0;p<this.customTimeRangeArray.length;p++)if(e<=this.customTimeRangeArray[p].start&&y>=this.customTimeRangeArray[p].end)this.customTimeRangeArray.splice(p,1),p--;else{if(e>this.customTimeRangeArray[p].start&&y<this.customTimeRangeArray[p].end){this.customTimeRangeArray.splice(p+1,0,{start:y,end:this.customTimeRangeArray[p].end}),this.customTimeRangeArray[p].end=e;break}e>this.customTimeRangeArray[p].start&&e<this.customTimeRangeArray[p].end?this.customTimeRangeArray[p].end=e:y>this.customTimeRangeArray[p].start&&y<this.customTimeRangeArray[p].end&&(this.customTimeRangeArray[p].start=y)}this.length=this.customTimeRangeArray.length},mergeRanges:function(e,y){var p=this.customTimeRangeArray[e],u=this.customTimeRangeArray[y];return p.start<=u.start&&u.start<=p.end&&p.end<=u.end?(p.end=u.end,this.customTimeRangeArray.splice(y,1),!0):u.start<=p.start&&p.start<=u.end&&u.end<=p.end?(p.start=u.start,this.customTimeRangeArray.splice(y,1),!0):u.start<=p.start&&p.start<=u.end&&p.end<=u.end?(this.customTimeRangeArray.splice(e,1),!0):p.start<=u.start&&u.start<=p.end&&u.end<=p.end&&(this.customTimeRangeArray.splice(y,1),!0)},start:function(e){return(0,T.SE)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].start},end:function(e){return(0,T.SE)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].end}}}t.__dashjs_factory_name="CustomTimeRanges",Re.Z=oe.Z.getClassFactory(t)},5:function(et,Re,D){var oe=D(5448);function T(){var t,e=/^[a-z][a-z0-9+\-_.]*:/i,y=/^https?:\/\//i,p=/^https:\/\//i,u=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,h=function(x,ne){try{return new window.URL(x,ne).toString()}catch{return x}},E=function(x,ne){var O=n;if(!ne||!C(x))return x;Z(x)&&(O=c),k(x)&&(O=d);var z=O(ne),te=z.charAt(z.length-1)!=="/"&&x.charAt(0)!=="/"?"/":"";return[z,x].join(te)};function n(x){var ne=x.indexOf("/"),O=x.lastIndexOf("/");return ne!==-1?O===ne+1?x:(x.indexOf("?")!==-1&&(x=x.substring(0,x.indexOf("?"))),x.substring(0,O+1)):""}function c(x){var ne=x.match(u);return ne?ne[1]:""}function d(x){var ne=x.match(e);return ne?ne[0]:""}function C(x){return!e.test(x)}function Z(x){return C(x)&&x.charAt(0)==="/"}function k(x){return x.indexOf("//")===0}return function(){try{new window.URL("x","http://y"),t=h}catch{}finally{t=t||E}}(),{parseBaseUrl:n,parseOrigin:c,parseScheme:d,isRelative:C,isPathAbsolute:Z,isSchemeRelative:k,isHTTPURL:function(x){return y.test(x)},isHTTPS:function(x){return p.test(x)},removeHostname:function(x){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(x)[2].substring(1)},resolve:function(x,ne){return t(x,ne)}}}T.__dashjs_factory_name="DefaultURLUtils",Re.Z=oe.Z.getSingletonFactory(T)},8260:function(et,Re,D){var oe=D(2839),T=D(5448);function t(){var e;function y(u){var h=[];if(!u||!e||typeof e.fetchAll!="function")return h;for(var E,n=e.fetchAll(u),c=0,d=n.length;c<d;c++)(E=p(n[c]))&&h.push(E);return h}function p(u){if(!u)return null;var h=new oe.Z(u);return u.hasOwnProperty("_incomplete")&&(h.isComplete=!u._incomplete),h}return{getBox:function(u){return u&&e&&e.boxes&&e.boxes.length!==0&&typeof e.fetch=="function"?p(e.fetch(u)):null},getBoxes:y,setData:function(u){e=u},getLastBox:function(){if(!e||!e.boxes||!e.boxes.length)return null;var u=y(e.boxes[e.boxes.length-1].type);return u.length>0?u[u.length-1]:null}}}t.__dashjs_factory_name="IsoFile",Re.Z=T.Z.getClassFactory(t)},7473:function(et,Re,D){D.d(Re,{k:function(){return T}});var oe=D(5448);function T(e,y){var p={url:e.url,method:e.method,headers:Object.assign({},e.headers),credentials:e.withCredentials?"include":void 0};return Promise.resolve(y.modifyRequest(p)).then(function(){return Object.assign(e,p,{withCredentials:p.credentials==="include"})})}function t(){return{modifyRequest:null,modifyRequestURL:function(e){return e},modifyRequestHeader:function(e,y){return y.url,e}}}t.__dashjs_factory_name="RequestModifier",Re.Z=oe.Z.getSingletonFactory(t)},3106:function(et,Re,D){D.d(Re,{PS:function(){return t},SE:function(){return e}});var oe=D(3393);function T(y){return T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},T(y)}function t(y,p){if(T(y)!==p)throw oe.Z.BAD_ARGUMENT_ERROR}function e(y){if(y===null||isNaN(y)||y%1!=0)throw oe.Z.BAD_ARGUMENT_ERROR+" : argument is not an integer"}},2594:function(et,Re,D){var oe=D(5448),T=D(5);function t(){var y,p=[],u=this.context;function h(E,n,c){var d=function(C){var Z;for(Z=0;Z<p.length;Z++)if(p[Z].regex.test(C))return p[Z].utils;return y}(c||n);return d&&typeof d[E]=="function"?d[E](n,c):y[E](n,c)}return y=(0,T.Z)(u).getInstance(),{registerUrlRegex:function(E,n){p.push({regex:E,utils:n})},parseBaseUrl:function(E){return h("parseBaseUrl",E)},parseOrigin:function(E){return h("parseOrigin",E)},parseScheme:function(E){return h("parseScheme",E)},isRelative:function(E){return h("isRelative",E)},isPathAbsolute:function(E){return h("isPathAbsolute",E)},isSchemeRelative:function(E){return h("isSchemeRelative",E)},isHTTPURL:function(E){return h("isHTTPURL",E)},isHTTPS:function(E){return h("isHTTPS",E)},removeHostname:function(E){return h("removeHostname",E)},resolve:function(E,n){return h("resolve",E,n)}}}t.__dashjs_factory_name="URLUtils";var e=oe.Z.getSingletonFactory(t);Re.Z=e},5459:function(et,Re){Re.Z=function D(oe,T,t){(function(e,y){if(!(e instanceof y))throw new TypeError("Cannot call a class as a function")})(this,D),this.code=oe||null,this.message=T||null,this.data=t||null}},3186:function(et,Re,D){var oe=D(7855);function T(e,y){for(var p=0;p<y.length;p++){var u=y[p];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,u.key,u)}}var t=function(){function e(u){(function(h,E){if(!(h instanceof E))throw new TypeError("Cannot call a class as a function")})(this,e),this.action=e.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=u||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}var y,p;return y=e,(p=[{key:"isInitializationRequest",value:function(){return this.type&&this.type===oe.w.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(u){this.type=u&&u.init?oe.w.INIT_SEGMENT_TYPE:oe.w.MEDIA_SEGMENT_TYPE,this.url=u&&u.url?u.url:null,this.range=u&&u.range?u.range.start+"-"+u.range.end:null,this.mediaType=u&&u.mediaType?u.mediaType:null}}])&&T(y.prototype,p),e}();t.ACTION_DOWNLOAD="download",t.ACTION_COMPLETE="complete",Re.Z=t},2839:function(et,Re){function D(T,t){for(var e=0;e<t.length;e++){var y=t[e];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(T,y.key,y)}}var oe=function(){function T(y){if(function(d,C){if(!(d instanceof C))throw new TypeError("Cannot call a class as a function")}(this,T),this.offset=y._offset,this.type=y.type,this.size=y.size,this.boxes=[],y.boxes)for(var p=0;p<y.boxes.length;p++)this.boxes.push(new T(y.boxes[p]));switch(this.isComplete=!0,y.type){case"sidx":if(this.timescale=y.timescale,this.earliest_presentation_time=y.earliest_presentation_time,this.first_offset=y.first_offset,this.references=y.references,y.references){this.references=[];for(var u=0;u<y.references.length;u++){var h={reference_type:y.references[u].reference_type,referenced_size:y.references[u].referenced_size,subsegment_duration:y.references[u].subsegment_duration};this.references.push(h)}}break;case"emsg":this.id=y.id,this.version=y.version===1?1:0,this.value=y.value,this.timescale=y.timescale,this.scheme_id_uri=y.scheme_id_uri,this.presentation_time_delta=y.version===1?y.presentation_time:y.presentation_time_delta,this.event_duration=y.event_duration,this.message_data=y.message_data;break;case"mdhd":this.timescale=y.timescale;break;case"mfhd":this.sequence_number=y.sequence_number;break;case"subs":this.entry_count=y.entry_count,this.entries=y.entries;break;case"tfhd":this.base_data_offset=y.base_data_offset,this.sample_description_index=y.sample_description_index,this.default_sample_duration=y.default_sample_duration,this.default_sample_size=y.default_sample_size,this.default_sample_flags=y.default_sample_flags,this.flags=y.flags;break;case"tfdt":this.version=y.version,this.baseMediaDecodeTime=y.baseMediaDecodeTime,this.flags=y.flags;break;case"trun":if(this.sample_count=y.sample_count,this.first_sample_flags=y.first_sample_flags,this.data_offset=y.data_offset,this.flags=y.flags,this.samples=y.samples,y.samples){this.samples=[];for(var E=0,n=y.samples.length;E<n;E++){var c={sample_size:y.samples[E].sample_size,sample_duration:y.samples[E].sample_duration,sample_composition_time_offset:y.samples[E].sample_composition_time_offset};this.samples.push(c)}}break;case"prft":this.version=y.version,this.reference_track_ID=y.reference_track_ID,this.ntp_timestamp_sec=y.ntp_timestamp_sec,this.ntp_timestamp_frac=y.ntp_timestamp_frac,this.media_time=y.media_time,this.flags=y.flags}}var t,e;return t=T,(e=[{key:"getChildBox",value:function(y){for(var p=0;p<this.boxes.length;p++)if(this.boxes[p].type===y)return this.boxes[p]}},{key:"getChildBoxes",value:function(y){for(var p=[],u=0;u<this.boxes.length;u++)this.boxes[u].type===y&&p.push(this.boxes[u]);return p}}])&&D(t.prototype,e),T}();Re.Z=oe},9597:function(et,Re){Re.Z=function D(oe,T,t){(function(e,y){if(!(e instanceof y))throw new TypeError("Cannot call a class as a function")})(this,D),this.lastCompletedOffset=oe,this.found=T,this.size=t}},2128:function(et,Re){Re.Z=function D(){(function(oe,T){if(!(oe instanceof T))throw new TypeError("Cannot call a class as a function")})(this,D),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}},7855:function(et,Re,D){function oe(e,y){if(!(e instanceof y))throw new TypeError("Cannot call a class as a function")}D.d(Re,{O:function(){return t},w:function(){return T}});var T=function e(){oe(this,e),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this.cmsd=null,this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null},t=function e(){oe(this,e),this.s=null,this.d=null,this.b=[]};T.GET="GET",T.HEAD="HEAD",T.MPD_TYPE="MPD",T.XLINK_EXPANSION_TYPE="XLinkExpansion",T.INIT_SEGMENT_TYPE="InitializationSegment",T.INDEX_SEGMENT_TYPE="IndexSegment",T.MEDIA_SEGMENT_TYPE="MediaSegment",T.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",T.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",T.DVB_REPORTING_TYPE="DVBReporting",T.LICENSE="license",T.CONTENT_STEERING_TYPE="ContentSteering",T.OTHER_TYPE="other"},3039:function(et,Re){function D(T,t){return function(e,y){for(var p,u,h,E=oe(e,"tag"),n=oe(y??"*","range"),c=[],d=-1;++d<n.length;)if(p=n[d].toLowerCase(),t||p!=="*"){for(u=-1,h=[];++u<E.length;)if(T(E[u].toLowerCase(),p)){if(!t)return E[u];c.push(E[u])}else h.push(E[u]);E=h}return t?c:void 0}}function oe(T,t){var e=T&&typeof T=="string"?[T]:T;if(!e||typeof e!="object"||!("length"in e))throw new Error("Invalid "+t+" `"+e+"`, expected non-empty string");return e}Re.basicFilter=D(function(T,t){return t==="*"||T===t||T.indexOf(t+"-")>-1},!0),Re.extendedFilter=D(function(T,t){var e=T.split("-"),y=t.split("-"),p=0,u=0;if(y[u]!=="*"&&e[p]!==y[u])return!1;for(p++,u++;u<y.length;)if(y[u]!=="*"){if(!e[p])return!1;if(e[p]!==y[u]){if(e[p].length===1)return!1;p++}else p++,u++}else u++;return!0},!0),Re.lookup=D(function(T,t){for(var e,y=t;;){if(y==="*"||T===y)return!0;if((e=y.lastIndexOf("-"))<0)return!1;y.charAt(e-2)==="-"&&(e-=2),y=y.slice(0,e)}})},3973:function(et,Re,D){et.exports=D(3854)},3854:function(et,Re,D){var oe=D(2415),T=D(3039),t=D(7778),e=D(5813),y=D(3165),p=D(9460);et.exports=function(Z,k){var x,ne=k||{},O=oe.parse(String(Z||"").toLowerCase(),ne),z=oe.stringify(O),te=-1;if(!z)return z;for(;++te<t.length;)T.extendedFilter(z,t[te].from).length&&(n(O,t[te].from,t[te].to),z=oe.stringify(O));for(te=-1;++te<e.length;)c(O,e[te].from.field,e[te].from.value)&&d(O,e[te].to.field,e[te].to.value);for(z=oe.stringify(Object.assign({},O,E)),te=-1;++te<y.length;)z===y[te]&&(n(O,y[te],y[te].split("-").slice(0,-1).join("-")),z=oe.stringify(Object.assign({},O,E)));if(O.extensions.sort(C),ne.warning)for(x in p)u.call(p[x],O[x])&&ne.warning("Deprecated "+x+" `"+O[x]+"`, expected one of `"+p[x][O[x]].join("`, `")+"`",null,7);return O.script&&(O.script=O.script.charAt(0).toUpperCase()+O.script.slice(1)),O.region&&(O.region=O.region.toUpperCase()),oe.stringify(O)};var u={}.hasOwnProperty,h=new Intl.Collator,E={variants:[],extensions:[],privateuse:[],irregular:null,regular:null};function n(Z,k,x){var ne,O=oe.parse(k),z=oe.parse(x),te=[];for(ne in O)O[ne]&&O[ne].length&&c(Z,ne,O[ne])&&te.push(ne);for(ne in z)z[ne]&&z[ne].length&&(te.indexOf(ne)>-1||!Z[ne]||!Z[ne].length)&&d(Z,ne,z[ne])}function c(Z,k,x){var ne,O,z,te,V=!1;if(x){if(O=ne=Z[k],ne&&typeof ne=="object")for(O=[],z=-1;++z<ne.length;)te=ne[z],x.indexOf(te)<0?O.push(te):V=!0;else ne===x&&(O=null,V=!0);Z[k]=O}return V}function d(Z,k,x){var ne,O,z,te=Z[k];if(te&&typeof te=="object")for(ne=[].concat(x),O=-1;++O<ne.length;)z=ne[O],te.indexOf(z)<0&&te.push(z);else Z[k]=x}function C(Z,k){return h.compare(Z.singleton,k.singleton)}},2415:function(et,Re,D){Re.parse=D(6903),Re.stringify=D(6713)},6903:function(et,Re,D){var oe=D(2219),T=D(3516),t=D(395),e=D(858),y=D(8589);et.exports=function u(h,E){var n,c,d,C=E||{},Z={language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null},k=String(h),x=k.toLowerCase(),ne=0;if(h==null)throw new Error("Expected string, got `"+h+"`");if(p.call(y,x))return(C.normalize==null||C.normalize)&&y[x]?u(y[x]):(Z[e.indexOf(x)===-1?"irregular":"regular"]=k,Z);for(;T(x.charCodeAt(ne))&&ne<9;)ne++;if(ne>1&&ne<9){if(Z.language=k.slice(0,ne),ne<4)for(c=0;x.charCodeAt(ne)===45&&T(x.charCodeAt(ne+1))&&T(x.charCodeAt(ne+2))&&T(x.charCodeAt(ne+3))&&!T(x.charCodeAt(ne+4));){if(c>2)return O(ne,3,"Too many extended language subtags, expected at most 3 subtags");Z.extendedLanguageSubtags.push(k.slice(ne+1,ne+4)),ne+=4,c++}for(x.charCodeAt(ne)===45&&T(x.charCodeAt(ne+1))&&T(x.charCodeAt(ne+2))&&T(x.charCodeAt(ne+3))&&T(x.charCodeAt(ne+4))&&!T(x.charCodeAt(ne+5))&&(Z.script=k.slice(ne+1,ne+5),ne+=5),x.charCodeAt(ne)===45&&(T(x.charCodeAt(ne+1))&&T(x.charCodeAt(ne+2))&&!T(x.charCodeAt(ne+3))?(Z.region=k.slice(ne+1,ne+3),ne+=3):t(x.charCodeAt(ne+1))&&t(x.charCodeAt(ne+2))&&t(x.charCodeAt(ne+3))&&!t(x.charCodeAt(ne+4))&&(Z.region=k.slice(ne+1,ne+4),ne+=4));x.charCodeAt(ne)===45;){for(d=n=ne+1;oe(x.charCodeAt(d));){if(d-n>7)return O(d,1,"Too long variant, expected at most 8 characters");d++}if(!(d-n>4||d-n>3&&t(x.charCodeAt(n))))break;Z.variants.push(k.slice(n,d)),ne=d}for(;x.charCodeAt(ne)===45&&x.charCodeAt(ne+1)!==120&&oe(x.charCodeAt(ne+1))&&x.charCodeAt(ne+2)===45&&oe(x.charCodeAt(ne+3));){for(d=ne+2,c=0;x.charCodeAt(d)===45&&oe(x.charCodeAt(d+1))&&oe(x.charCodeAt(d+2));)for(d=(n=d+1)+2,c++;oe(x.charCodeAt(d));){if(d-n>7)return O(d,2,"Too long extension, expected at most 8 characters");d++}if(!c)return O(d,4,"Empty extension, extensions must have at least 2 characters of content");Z.extensions.push({singleton:k.charAt(ne+1),extensions:k.slice(ne+3,d).split("-")}),ne=d}}else ne=0;if(ne===0&&x.charCodeAt(ne)===120||x.charCodeAt(ne)===45&&x.charCodeAt(ne+1)===120)for(d=ne=ne?ne+2:1;x.charCodeAt(d)===45&&oe(x.charCodeAt(d+1));){for(d=n=ne+1;oe(x.charCodeAt(d));){if(d-n>7)return O(d,5,"Too long private-use area, expected at most 8 characters");d++}Z.privateuse.push(k.slice(ne+1,d)),ne=d}return ne!==k.length?O(ne,6,"Found superfluous content after tag"):Z;function O(z,te,V){return C.warning&&C.warning(V,te,z),C.forgiving?Z:{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}};var p={}.hasOwnProperty},6713:function(et){et.exports=function(Re){var D,oe,T,t=Re||{},e=[];if(t.irregular||t.regular)return t.irregular||t.regular;if(t.language)for(e=e.concat(t.language,t.extendedLanguageSubtags||[],t.script||[],t.region||[],t.variants||[]),D=t.extensions||[],oe=-1;++oe<D.length;)(T=D[oe]).singleton&&T.extensions&&T.extensions.length&&(e=e.concat(T.singleton,T.extensions));return t.privateuse&&t.privateuse.length&&(e=e.concat("x",t.privateuse)),e.join("-")}},1549:function(et,Re,D){var oe=D(6693),T=D(2165),t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Re.Buffer=p,Re.SlowBuffer=function(f){return+f!=f&&(f=0),p.alloc(+f)},Re.INSPECT_MAX_BYTES=50;var e=2147483647;function y(f){if(f>e)throw new RangeError('The value "'+f+'" is invalid for option "size"');var i=new Uint8Array(f);return Object.setPrototypeOf(i,p.prototype),i}function p(f,i,v){if(typeof f=="number"){if(typeof i=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return E(f)}return u(f,i,v)}function u(f,i,v){if(typeof f=="string")return function(H,Te){if(typeof Te=="string"&&Te!==""||(Te="utf8"),!p.isEncoding(Te))throw new TypeError("Unknown encoding: "+Te);var Ge=0|C(H,Te),Ce=y(Ge),be=Ce.write(H,Te);return be!==Ge&&(Ce=Ce.slice(0,be)),Ce}(f,i);if(ArrayBuffer.isView(f))return function(H){if(ge(H,Uint8Array)){var Te=new Uint8Array(H);return c(Te.buffer,Te.byteOffset,Te.byteLength)}return n(H)}(f);if(f==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(ge(f,ArrayBuffer)||f&&ge(f.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ge(f,SharedArrayBuffer)||f&&ge(f.buffer,SharedArrayBuffer)))return c(f,i,v);if(typeof f=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var S=f.valueOf&&f.valueOf();if(S!=null&&S!==f)return p.from(S,i,v);var W=function(H){if(p.isBuffer(H)){var Te=0|d(H.length),Ge=y(Te);return Ge.length===0||H.copy(Ge,0,0,Te),Ge}return H.length!==void 0?typeof H.length!="number"||he(H.length)?y(0):n(H):H.type==="Buffer"&&Array.isArray(H.data)?n(H.data):void 0}(f);if(W)return W;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof f[Symbol.toPrimitive]=="function")return p.from(f[Symbol.toPrimitive]("string"),i,v);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f)}function h(f){if(typeof f!="number")throw new TypeError('"size" argument must be of type number');if(f<0)throw new RangeError('The value "'+f+'" is invalid for option "size"')}function E(f){return h(f),y(f<0?0:0|d(f))}function n(f){for(var i=f.length<0?0:0|d(f.length),v=y(i),S=0;S<i;S+=1)v[S]=255&f[S];return v}function c(f,i,v){if(i<0||f.byteLength<i)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<i+(v||0))throw new RangeError('"length" is outside of buffer bounds');var S;return S=i===void 0&&v===void 0?new Uint8Array(f):v===void 0?new Uint8Array(f,i):new Uint8Array(f,i,v),Object.setPrototypeOf(S,p.prototype),S}function d(f){if(f>=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+e.toString(16)+" bytes");return 0|f}function C(f,i){if(p.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||ge(f,ArrayBuffer))return f.byteLength;if(typeof f!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof f);var v=f.length,S=arguments.length>2&&arguments[2]===!0;if(!S&&v===0)return 0;for(var W=!1;;)switch(i){case"ascii":case"latin1":case"binary":return v;case"utf8":case"utf-8":return ft(f).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*v;case"hex":return v>>>1;case"base64":return qe(f).length;default:if(W)return S?-1:ft(f).length;i=(""+i).toLowerCase(),W=!0}}function Z(f,i,v){var S=!1;if((i===void 0||i<0)&&(i=0),i>this.length||((v===void 0||v>this.length)&&(v=this.length),v<=0)||(v>>>=0)<=(i>>>=0))return"";for(f||(f="utf8");;)switch(f){case"hex":return Ve(this,i,v);case"utf8":case"utf-8":return Ee(this,i,v);case"ascii":return Ie(this,i,v);case"latin1":case"binary":return Ze(this,i,v);case"base64":return ce(this,i,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye(this,i,v);default:if(S)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase(),S=!0}}function k(f,i,v){var S=f[i];f[i]=f[v],f[v]=S}function x(f,i,v,S,W){if(f.length===0)return-1;if(typeof v=="string"?(S=v,v=0):v>2147483647?v=2147483647:v<-2147483648&&(v=-2147483648),he(v=+v)&&(v=W?0:f.length-1),v<0&&(v=f.length+v),v>=f.length){if(W)return-1;v=f.length-1}else if(v<0){if(!W)return-1;v=0}if(typeof i=="string"&&(i=p.from(i,S)),p.isBuffer(i))return i.length===0?-1:ne(f,i,v,S,W);if(typeof i=="number")return i&=255,typeof Uint8Array.prototype.indexOf=="function"?W?Uint8Array.prototype.indexOf.call(f,i,v):Uint8Array.prototype.lastIndexOf.call(f,i,v):ne(f,[i],v,S,W);throw new TypeError("val must be string, number or Buffer")}function ne(f,i,v,S,W){var H,Te=1,Ge=f.length,Ce=i.length;if(S!==void 0&&((S=String(S).toLowerCase())==="ucs2"||S==="ucs-2"||S==="utf16le"||S==="utf-16le")){if(f.length<2||i.length<2)return-1;Te=2,Ge/=2,Ce/=2,v/=2}function be(It,nt){return Te===1?It[nt]:It.readUInt16BE(nt*Te)}if(W){var Se=-1;for(H=v;H<Ge;H++)if(be(f,H)===be(i,Se===-1?0:H-Se)){if(Se===-1&&(Se=H),H-Se+1===Ce)return Se*Te}else Se!==-1&&(H-=H-Se),Se=-1}else for(v+Ce>Ge&&(v=Ge-Ce),H=v;H>=0;H--){for(var Ue=!0,ze=0;ze<Ce;ze++)if(be(f,H+ze)!==be(i,ze)){Ue=!1;break}if(Ue)return H}return-1}function O(f,i,v,S){v=Number(v)||0;var W=f.length-v;S?(S=Number(S))>W&&(S=W):S=W;var H=i.length;S>H/2&&(S=H/2);for(var Te=0;Te<S;++Te){var Ge=parseInt(i.substr(2*Te,2),16);if(he(Ge))return Te;f[v+Te]=Ge}return Te}function z(f,i,v,S){return Je(ft(i,f.length-v),f,v,S)}function te(f,i,v,S){return Je(function(W){for(var H=[],Te=0;Te<W.length;++Te)H.push(255&W.charCodeAt(Te));return H}(i),f,v,S)}function V(f,i,v,S){return Je(qe(i),f,v,S)}function ee(f,i,v,S){return Je(function(W,H){for(var Te,Ge,Ce,be=[],Se=0;Se<W.length&&!((H-=2)<0);++Se)Ge=(Te=W.charCodeAt(Se))>>8,Ce=Te%256,be.push(Ce),be.push(Ge);return be}(i,f.length-v),f,v,S)}function ce(f,i,v){return i===0&&v===f.length?oe.fromByteArray(f):oe.fromByteArray(f.slice(i,v))}function Ee(f,i,v){v=Math.min(f.length,v);for(var S=[],W=i;W<v;){var H,Te,Ge,Ce,be=f[W],Se=null,Ue=be>239?4:be>223?3:be>191?2:1;if(W+Ue<=v)switch(Ue){case 1:be<128&&(Se=be);break;case 2:(192&(H=f[W+1]))==128&&(Ce=(31&be)<<6|63&H)>127&&(Se=Ce);break;case 3:H=f[W+1],Te=f[W+2],(192&H)==128&&(192&Te)==128&&(Ce=(15&be)<<12|(63&H)<<6|63&Te)>2047&&(Ce<55296||Ce>57343)&&(Se=Ce);break;case 4:H=f[W+1],Te=f[W+2],Ge=f[W+3],(192&H)==128&&(192&Te)==128&&(192&Ge)==128&&(Ce=(15&be)<<18|(63&H)<<12|(63&Te)<<6|63&Ge)>65535&&Ce<1114112&&(Se=Ce)}Se===null?(Se=65533,Ue=1):Se>65535&&(Se-=65536,S.push(Se>>>10&1023|55296),Se=56320|1023&Se),S.push(Se),W+=Ue}return function(ze){var It=ze.length;if(It<=$)return String.fromCharCode.apply(String,ze);for(var nt="",Lt=0;Lt<It;)nt+=String.fromCharCode.apply(String,ze.slice(Lt,Lt+=$));return nt}(S)}Re.kMaxLength=e,p.TYPED_ARRAY_SUPPORT=function(){try{var f=new Uint8Array(1),i={foo:function(){return 42}};return Object.setPrototypeOf(i,Uint8Array.prototype),Object.setPrototypeOf(f,i),f.foo()===42}catch{return!1}}(),p.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}}),p.poolSize=8192,p.from=function(f,i,v){return u(f,i,v)},Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array),p.alloc=function(f,i,v){return function(S,W,H){return h(S),S<=0?y(S):W!==void 0?typeof H=="string"?y(S).fill(W,H):y(S).fill(W):y(S)}(f,i,v)},p.allocUnsafe=function(f){return E(f)},p.allocUnsafeSlow=function(f){return E(f)},p.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==p.prototype},p.compare=function(f,i){if(ge(f,Uint8Array)&&(f=p.from(f,f.offset,f.byteLength)),ge(i,Uint8Array)&&(i=p.from(i,i.offset,i.byteLength)),!p.isBuffer(f)||!p.isBuffer(i))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===i)return 0;for(var v=f.length,S=i.length,W=0,H=Math.min(v,S);W<H;++W)if(f[W]!==i[W]){v=f[W],S=i[W];break}return v<S?-1:S<v?1:0},p.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(f,i){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return p.alloc(0);var v;if(i===void 0)for(i=0,v=0;v<f.length;++v)i+=f[v].length;var S=p.allocUnsafe(i),W=0;for(v=0;v<f.length;++v){var H=f[v];if(ge(H,Uint8Array))W+H.length>S.length?p.from(H).copy(S,W):Uint8Array.prototype.set.call(S,H,W);else{if(!p.isBuffer(H))throw new TypeError('"list" argument must be an Array of Buffers');H.copy(S,W)}W+=H.length}return S},p.byteLength=C,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var f=this.length;if(f%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<f;i+=2)k(this,i,i+1);return this},p.prototype.swap32=function(){var f=this.length;if(f%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<f;i+=4)k(this,i,i+3),k(this,i+1,i+2);return this},p.prototype.swap64=function(){var f=this.length;if(f%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<f;i+=8)k(this,i,i+7),k(this,i+1,i+6),k(this,i+2,i+5),k(this,i+3,i+4);return this},p.prototype.toString=function(){var f=this.length;return f===0?"":arguments.length===0?Ee(this,0,f):Z.apply(this,arguments)},p.prototype.toLocaleString=p.prototype.toString,p.prototype.equals=function(f){if(!p.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f||p.compare(this,f)===0},p.prototype.inspect=function(){var f="",i=Re.INSPECT_MAX_BYTES;return f=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(f+=" ... "),"<Buffer "+f+">"},t&&(p.prototype[t]=p.prototype.inspect),p.prototype.compare=function(f,i,v,S,W){if(ge(f,Uint8Array)&&(f=p.from(f,f.offset,f.byteLength)),!p.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(i===void 0&&(i=0),v===void 0&&(v=f?f.length:0),S===void 0&&(S=0),W===void 0&&(W=this.length),i<0||v>f.length||S<0||W>this.length)throw new RangeError("out of range index");if(S>=W&&i>=v)return 0;if(S>=W)return-1;if(i>=v)return 1;if(this===f)return 0;for(var H=(W>>>=0)-(S>>>=0),Te=(v>>>=0)-(i>>>=0),Ge=Math.min(H,Te),Ce=this.slice(S,W),be=f.slice(i,v),Se=0;Se<Ge;++Se)if(Ce[Se]!==be[Se]){H=Ce[Se],Te=be[Se];break}return H<Te?-1:Te<H?1:0},p.prototype.includes=function(f,i,v){return this.indexOf(f,i,v)!==-1},p.prototype.indexOf=function(f,i,v){return x(this,f,i,v,!0)},p.prototype.lastIndexOf=function(f,i,v){return x(this,f,i,v,!1)},p.prototype.write=function(f,i,v,S){if(i===void 0)S="utf8",v=this.length,i=0;else if(v===void 0&&typeof i=="string")S=i,v=this.length,i=0;else{if(!isFinite(i))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");i>>>=0,isFinite(v)?(v>>>=0,S===void 0&&(S="utf8")):(S=v,v=void 0)}var W=this.length-i;if((v===void 0||v>W)&&(v=W),f.length>0&&(v<0||i<0)||i>this.length)throw new RangeError("Attempt to write outside buffer bounds");S||(S="utf8");for(var H=!1;;)switch(S){case"hex":return O(this,f,i,v);case"utf8":case"utf-8":return z(this,f,i,v);case"ascii":case"latin1":case"binary":return te(this,f,i,v);case"base64":return V(this,f,i,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee(this,f,i,v);default:if(H)throw new TypeError("Unknown encoding: "+S);S=(""+S).toLowerCase(),H=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;function Ie(f,i,v){var S="";v=Math.min(f.length,v);for(var W=i;W<v;++W)S+=String.fromCharCode(127&f[W]);return S}function Ze(f,i,v){var S="";v=Math.min(f.length,v);for(var W=i;W<v;++W)S+=String.fromCharCode(f[W]);return S}function Ve(f,i,v){var S=f.length;(!i||i<0)&&(i=0),(!v||v<0||v>S)&&(v=S);for(var W="",H=i;H<v;++H)W+=Ye[f[H]];return W}function ye(f,i,v){for(var S=f.slice(i,v),W="",H=0;H<S.length-1;H+=2)W+=String.fromCharCode(S[H]+256*S[H+1]);return W}function ke(f,i,v){if(f%1!=0||f<0)throw new RangeError("offset is not uint");if(f+i>v)throw new RangeError("Trying to access beyond buffer length")}function Ke(f,i,v,S,W,H){if(!p.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(i>W||i<H)throw new RangeError('"value" argument is out of bounds');if(v+S>f.length)throw new RangeError("Index out of range")}function tt(f,i,v,S,W,H){if(v+S>f.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("Index out of range")}function ve(f,i,v,S,W){return i=+i,v>>>=0,W||tt(f,0,v,4),T.write(f,i,v,S,23,4),v+4}function Fe(f,i,v,S,W){return i=+i,v>>>=0,W||tt(f,0,v,8),T.write(f,i,v,S,52,8),v+8}p.prototype.slice=function(f,i){var v=this.length;(f=~~f)<0?(f+=v)<0&&(f=0):f>v&&(f=v),(i=i===void 0?v:~~i)<0?(i+=v)<0&&(i=0):i>v&&(i=v),i<f&&(i=f);var S=this.subarray(f,i);return Object.setPrototypeOf(S,p.prototype),S},p.prototype.readUintLE=p.prototype.readUIntLE=function(f,i,v){f>>>=0,i>>>=0,v||ke(f,i,this.length);for(var S=this[f],W=1,H=0;++H<i&&(W*=256);)S+=this[f+H]*W;return S},p.prototype.readUintBE=p.prototype.readUIntBE=function(f,i,v){f>>>=0,i>>>=0,v||ke(f,i,this.length);for(var S=this[f+--i],W=1;i>0&&(W*=256);)S+=this[f+--i]*W;return S},p.prototype.readUint8=p.prototype.readUInt8=function(f,i){return f>>>=0,i||ke(f,1,this.length),this[f]},p.prototype.readUint16LE=p.prototype.readUInt16LE=function(f,i){return f>>>=0,i||ke(f,2,this.length),this[f]|this[f+1]<<8},p.prototype.readUint16BE=p.prototype.readUInt16BE=function(f,i){return f>>>=0,i||ke(f,2,this.length),this[f]<<8|this[f+1]},p.prototype.readUint32LE=p.prototype.readUInt32LE=function(f,i){return f>>>=0,i||ke(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+16777216*this[f+3]},p.prototype.readUint32BE=p.prototype.readUInt32BE=function(f,i){return f>>>=0,i||ke(f,4,this.length),16777216*this[f]+(this[f+1]<<16|this[f+2]<<8|this[f+3])},p.prototype.readIntLE=function(f,i,v){f>>>=0,i>>>=0,v||ke(f,i,this.length);for(var S=this[f],W=1,H=0;++H<i&&(W*=256);)S+=this[f+H]*W;return S>=(W*=128)&&(S-=Math.pow(2,8*i)),S},p.prototype.readIntBE=function(f,i,v){f>>>=0,i>>>=0,v||ke(f,i,this.length);for(var S=i,W=1,H=this[f+--S];S>0&&(W*=256);)H+=this[f+--S]*W;return H>=(W*=128)&&(H-=Math.pow(2,8*i)),H},p.prototype.readInt8=function(f,i){return f>>>=0,i||ke(f,1,this.length),128&this[f]?-1*(255-this[f]+1):this[f]},p.prototype.readInt16LE=function(f,i){f>>>=0,i||ke(f,2,this.length);var v=this[f]|this[f+1]<<8;return 32768&v?4294901760|v:v},p.prototype.readInt16BE=function(f,i){f>>>=0,i||ke(f,2,this.length);var v=this[f+1]|this[f]<<8;return 32768&v?4294901760|v:v},p.prototype.readInt32LE=function(f,i){return f>>>=0,i||ke(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},p.prototype.readInt32BE=function(f,i){return f>>>=0,i||ke(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},p.prototype.readFloatLE=function(f,i){return f>>>=0,i||ke(f,4,this.length),T.read(this,f,!0,23,4)},p.prototype.readFloatBE=function(f,i){return f>>>=0,i||ke(f,4,this.length),T.read(this,f,!1,23,4)},p.prototype.readDoubleLE=function(f,i){return f>>>=0,i||ke(f,8,this.length),T.read(this,f,!0,52,8)},p.prototype.readDoubleBE=function(f,i){return f>>>=0,i||ke(f,8,this.length),T.read(this,f,!1,52,8)},p.prototype.writeUintLE=p.prototype.writeUIntLE=function(f,i,v,S){f=+f,i>>>=0,v>>>=0,S||Ke(this,f,i,v,Math.pow(2,8*v)-1,0);var W=1,H=0;for(this[i]=255&f;++H<v&&(W*=256);)this[i+H]=f/W&255;return i+v},p.prototype.writeUintBE=p.prototype.writeUIntBE=function(f,i,v,S){f=+f,i>>>=0,v>>>=0,S||Ke(this,f,i,v,Math.pow(2,8*v)-1,0);var W=v-1,H=1;for(this[i+W]=255&f;--W>=0&&(H*=256);)this[i+W]=f/H&255;return i+v},p.prototype.writeUint8=p.prototype.writeUInt8=function(f,i,v){return f=+f,i>>>=0,v||Ke(this,f,i,1,255,0),this[i]=255&f,i+1},p.prototype.writeUint16LE=p.prototype.writeUInt16LE=function(f,i,v){return f=+f,i>>>=0,v||Ke(this,f,i,2,65535,0),this[i]=255&f,this[i+1]=f>>>8,i+2},p.prototype.writeUint16BE=p.prototype.writeUInt16BE=function(f,i,v){return f=+f,i>>>=0,v||Ke(this,f,i,2,65535,0),this[i]=f>>>8,this[i+1]=255&f,i+2},p.prototype.writeUint32LE=p.prototype.writeUInt32LE=function(f,i,v){return f=+f,i>>>=0,v||Ke(this,f,i,4,4294967295,0),this[i+3]=f>>>24,this[i+2]=f>>>16,this[i+1]=f>>>8,this[i]=255&f,i+4},p.prototype.writeUint32BE=p.prototype.writeUInt32BE=function(f,i,v){return f=+f,i>>>=0,v||Ke(this,f,i,4,4294967295,0),this[i]=f>>>24,this[i+1]=f>>>16,this[i+2]=f>>>8,this[i+3]=255&f,i+4},p.prototype.writeIntLE=function(f,i,v,S){if(f=+f,i>>>=0,!S){var W=Math.pow(2,8*v-1);Ke(this,f,i,v,W-1,-W)}var H=0,Te=1,Ge=0;for(this[i]=255&f;++H<v&&(Te*=256);)f<0&&Ge===0&&this[i+H-1]!==0&&(Ge=1),this[i+H]=(f/Te>>0)-Ge&255;return i+v},p.prototype.writeIntBE=function(f,i,v,S){if(f=+f,i>>>=0,!S){var W=Math.pow(2,8*v-1);Ke(this,f,i,v,W-1,-W)}var H=v-1,Te=1,Ge=0;for(this[i+H]=255&f;--H>=0&&(Te*=256);)f<0&&Ge===0&&this[i+H+1]!==0&&(Ge=1),this[i+H]=(f/Te>>0)-Ge&255;return i+v},p.prototype.writeInt8=function(f,i,v){return f=+f,i>>>=0,v||Ke(this,f,i,1,127,-128),f<0&&(f=255+f+1),this[i]=255&f,i+1},p.prototype.writeInt16LE=function(f,i,v){return f=+f,i>>>=0,v||Ke(this,f,i,2,32767,-32768),this[i]=255&f,this[i+1]=f>>>8,i+2},p.prototype.writeInt16BE=function(f,i,v){return f=+f,i>>>=0,v||Ke(this,f,i,2,32767,-32768),this[i]=f>>>8,this[i+1]=255&f,i+2},p.prototype.writeInt32LE=function(f,i,v){return f=+f,i>>>=0,v||Ke(this,f,i,4,2147483647,-2147483648),this[i]=255&f,this[i+1]=f>>>8,this[i+2]=f>>>16,this[i+3]=f>>>24,i+4},p.prototype.writeInt32BE=function(f,i,v){return f=+f,i>>>=0,v||Ke(this,f,i,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[i]=f>>>24,this[i+1]=f>>>16,this[i+2]=f>>>8,this[i+3]=255&f,i+4},p.prototype.writeFloatLE=function(f,i,v){return ve(this,f,i,!0,v)},p.prototype.writeFloatBE=function(f,i,v){return ve(this,f,i,!1,v)},p.prototype.writeDoubleLE=function(f,i,v){return Fe(this,f,i,!0,v)},p.prototype.writeDoubleBE=function(f,i,v){return Fe(this,f,i,!1,v)},p.prototype.copy=function(f,i,v,S){if(!p.isBuffer(f))throw new TypeError("argument should be a Buffer");if(v||(v=0),S||S===0||(S=this.length),i>=f.length&&(i=f.length),i||(i=0),S>0&&S<v&&(S=v),S===v||f.length===0||this.length===0)return 0;if(i<0)throw new RangeError("targetStart out of bounds");if(v<0||v>=this.length)throw new RangeError("Index out of range");if(S<0)throw new RangeError("sourceEnd out of bounds");S>this.length&&(S=this.length),f.length-i<S-v&&(S=f.length-i+v);var W=S-v;return this===f&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(i,v,S):Uint8Array.prototype.set.call(f,this.subarray(v,S),i),W},p.prototype.fill=function(f,i,v,S){if(typeof f=="string"){if(typeof i=="string"?(S=i,i=0,v=this.length):typeof v=="string"&&(S=v,v=this.length),S!==void 0&&typeof S!="string")throw new TypeError("encoding must be a string");if(typeof S=="string"&&!p.isEncoding(S))throw new TypeError("Unknown encoding: "+S);if(f.length===1){var W=f.charCodeAt(0);(S==="utf8"&&W<128||S==="latin1")&&(f=W)}}else typeof f=="number"?f&=255:typeof f=="boolean"&&(f=Number(f));if(i<0||this.length<i||this.length<v)throw new RangeError("Out of range index");if(v<=i)return this;var H;if(i>>>=0,v=v===void 0?this.length:v>>>0,f||(f=0),typeof f=="number")for(H=i;H<v;++H)this[H]=f;else{var Te=p.isBuffer(f)?f:p.from(f,S),Ge=Te.length;if(Ge===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(H=0;H<v-i;++H)this[H+i]=Te[H%Ge]}return this};var pt=/[^+/0-9A-Za-z-_]/g;function ft(f,i){var v;i=i||1/0;for(var S=f.length,W=null,H=[],Te=0;Te<S;++Te){if((v=f.charCodeAt(Te))>55295&&v<57344){if(!W){if(v>56319){(i-=3)>-1&&H.push(239,191,189);continue}if(Te+1===S){(i-=3)>-1&&H.push(239,191,189);continue}W=v;continue}if(v<56320){(i-=3)>-1&&H.push(239,191,189),W=v;continue}v=65536+(W-55296<<10|v-56320)}else W&&(i-=3)>-1&&H.push(239,191,189);if(W=null,v<128){if((i-=1)<0)break;H.push(v)}else if(v<2048){if((i-=2)<0)break;H.push(v>>6|192,63&v|128)}else if(v<65536){if((i-=3)<0)break;H.push(v>>12|224,v>>6&63|128,63&v|128)}else{if(!(v<1114112))throw new Error("Invalid code point");if((i-=4)<0)break;H.push(v>>18|240,v>>12&63|128,v>>6&63|128,63&v|128)}}return H}function qe(f){return oe.toByteArray(function(i){if((i=(i=i.split("=")[0]).trim().replace(pt,"")).length<2)return"";for(;i.length%4!=0;)i+="=";return i}(f))}function Je(f,i,v,S){for(var W=0;W<S&&!(W+v>=i.length||W>=f.length);++W)i[W+v]=f[W];return W}function ge(f,i){return f instanceof i||f!=null&&f.constructor!=null&&f.constructor.name!=null&&f.constructor.name===i.name}function he(f){return f!=f}var Ye=function(){for(var f="0123456789abcdef",i=new Array(256),v=0;v<16;++v)for(var S=16*v,W=0;W<16;++W)i[S+W]=f[v]+f[W];return i}()},6693:function(et,Re){Re.byteLength=function(h){var E=p(h),n=E[0],c=E[1];return 3*(n+c)/4-c},Re.toByteArray=function(h){var E,n,c=p(h),d=c[0],C=c[1],Z=new T(function(ne,O,z){return 3*(O+z)/4-z}(0,d,C)),k=0,x=C>0?d-4:d;for(n=0;n<x;n+=4)E=oe[h.charCodeAt(n)]<<18|oe[h.charCodeAt(n+1)]<<12|oe[h.charCodeAt(n+2)]<<6|oe[h.charCodeAt(n+3)],Z[k++]=E>>16&255,Z[k++]=E>>8&255,Z[k++]=255&E;return C===2&&(E=oe[h.charCodeAt(n)]<<2|oe[h.charCodeAt(n+1)]>>4,Z[k++]=255&E),C===1&&(E=oe[h.charCodeAt(n)]<<10|oe[h.charCodeAt(n+1)]<<4|oe[h.charCodeAt(n+2)]>>2,Z[k++]=E>>8&255,Z[k++]=255&E),Z},Re.fromByteArray=function(h){for(var E,n=h.length,c=n%3,d=[],C=16383,Z=0,k=n-c;Z<k;Z+=C)d.push(u(h,Z,Z+C>k?k:Z+C));return c===1?(E=h[n-1],d.push(D[E>>2]+D[E<<4&63]+"==")):c===2&&(E=(h[n-2]<<8)+h[n-1],d.push(D[E>>10]+D[E>>4&63]+D[E<<2&63]+"=")),d.join("")};for(var D=[],oe=[],T=typeof Uint8Array<"u"?Uint8Array:Array,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,y=t.length;e<y;++e)D[e]=t[e],oe[t.charCodeAt(e)]=e;function p(h){var E=h.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=h.indexOf("=");return n===-1&&(n=E),[n,n===E?0:4-n%4]}function u(h,E,n){for(var c,d,C=[],Z=E;Z<n;Z+=3)c=(h[Z]<<16&16711680)+(h[Z+1]<<8&65280)+(255&h[Z+2]),C.push(D[(d=c)>>18&63]+D[d>>12&63]+D[d>>6&63]+D[63&d]);return C.join("")}oe["-".charCodeAt(0)]=62,oe["_".charCodeAt(0)]=63},2165:function(et,Re){Re.read=function(D,oe,T,t,e){var y,p,u=8*e-t-1,h=(1<<u)-1,E=h>>1,n=-7,c=T?e-1:0,d=T?-1:1,C=D[oe+c];for(c+=d,y=C&(1<<-n)-1,C>>=-n,n+=u;n>0;y=256*y+D[oe+c],c+=d,n-=8);for(p=y&(1<<-n)-1,y>>=-n,n+=t;n>0;p=256*p+D[oe+c],c+=d,n-=8);if(y===0)y=1-E;else{if(y===h)return p?NaN:1/0*(C?-1:1);p+=Math.pow(2,t),y-=E}return(C?-1:1)*p*Math.pow(2,y-t)},Re.write=function(D,oe,T,t,e,y){var p,u,h,E=8*y-e-1,n=(1<<E)-1,c=n>>1,d=e===23?Math.pow(2,-24)-Math.pow(2,-77):0,C=t?0:y-1,Z=t?1:-1,k=oe<0||oe===0&&1/oe<0?1:0;for(oe=Math.abs(oe),isNaN(oe)||oe===1/0?(u=isNaN(oe)?1:0,p=n):(p=Math.floor(Math.log(oe)/Math.LN2),oe*(h=Math.pow(2,-p))<1&&(p--,h*=2),(oe+=p+c>=1?d/h:d*Math.pow(2,1-c))*h>=2&&(p++,h/=2),p+c>=n?(u=0,p=n):p+c>=1?(u=(oe*h-1)*Math.pow(2,e),p+=c):(u=oe*Math.pow(2,c-1)*Math.pow(2,e),p=0));e>=8;D[T+C]=255&u,C+=Z,u/=256,e-=8);for(p=p<<e|u,E+=e;E>0;D[T+C]=255&p,C+=Z,p/=256,E-=8);D[T+C-Z]|=128*k}},6934:function(et,Re){var D={parseBuffer:function(t){return new oe(t).parse()},addBoxProcessor:function(t,e){typeof t=="string"&&typeof e=="function"&&(T.prototype._boxProcessors[t]=e)},createFile:function(){return new oe},createBox:function(t,e,y){var p=T.create(t);return e&&e.append(p,y),p},createFullBox:function(t,e,y){var p=D.createBox(t,e,y);return p.version=0,p.flags=0,p},Utils:{}};D.Utils.dataViewToString=function(t,e){var y=e||"utf-8";if(typeof TextDecoder<"u")return new TextDecoder(y).decode(t);var p=[],u=0;if(y==="utf-8")for(;u<t.byteLength;){var h=t.getUint8(u++);h<128||(h<224?(h=(31&h)<<6,h|=63&t.getUint8(u++)):h<240?(h=(15&h)<<12,h|=(63&t.getUint8(u++))<<6,h|=63&t.getUint8(u++)):(h=(7&h)<<18,h|=(63&t.getUint8(u++))<<12,h|=(63&t.getUint8(u++))<<6,h|=63&t.getUint8(u++))),p.push(String.fromCharCode(h))}else for(;u<t.byteLength;)p.push(String.fromCharCode(t.getUint8(u++)));return p.join("")},D.Utils.utf8ToByteArray=function(t){var e,y;if(typeof TextEncoder<"u")e=new TextEncoder().encode(t);else for(e=[],y=0;y<t.length;++y){var p=t.charCodeAt(y);p<128?e.push(p):p<2048?(e.push(192|p>>6),e.push(128|63&p)):p<65536?(e.push(224|p>>12),e.push(128|63&p>>6),e.push(128|63&p)):(e.push(240|p>>18),e.push(128|63&p>>12),e.push(128|63&p>>6),e.push(128|63&p))}return e},D.Utils.appendBox=function(t,e,y){if(e._offset=t._cursor.offset,e._root=t._root?t._root:t,e._raw=t._raw,e._parent=t,y!==-1)if(y!=null){var p,u=-1;if(typeof y=="number")u=y;else{if(typeof y=="string")p=y;else{if(typeof y!="object"||!y.type)return void t.boxes.push(e);p=y.type}for(var h=0;h<t.boxes.length;h++)if(p===t.boxes[h].type){u=h+1;break}}t.boxes.splice(u,0,e)}else t.boxes.push(e)},Re.parseBuffer=D.parseBuffer,Re.addBoxProcessor=D.addBoxProcessor,Re.createFile=D.createFile,Re.createBox=D.createBox,Re.createFullBox=D.createFullBox,Re.Utils=D.Utils,D.Cursor=function(t){this.offset=t===void 0?0:t};var oe=function(t){this._cursor=new D.Cursor,this.boxes=[],t&&(this._raw=new DataView(t))};oe.prototype.fetch=function(t){var e=this.fetchAll(t,!0);return e.length?e[0]:null},oe.prototype.fetchAll=function(t,e){var y=[];return oe._sweep.call(this,t,y,e),y},oe.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var t=T.parse(this);if(t.type===void 0)break;this.boxes.push(t)}return this},oe._sweep=function(t,e,y){for(var p in this.type&&this.type==t&&e.push(this),this.boxes){if(e.length&&y)return;oe._sweep.call(this.boxes[p],t,e,y)}},oe.prototype.write=function(){var t,e=0;for(t=0;t<this.boxes.length;t++)e+=this.boxes[t].getLength(!1);var y=new Uint8Array(e);for(this._rawo=new DataView(y.buffer),this.bytes=y,this._cursor.offset=0,t=0;t<this.boxes.length;t++)this.boxes[t].write();return y.buffer},oe.prototype.append=function(t,e){D.Utils.appendBox(this,t,e)};var T=function(){this._cursor=new D.Cursor};T.parse=function(t){var e=new T;return e._offset=t._cursor.offset,e._root=t._root?t._root:t,e._raw=t._raw,e._parent=t,e._parseBox(),t._cursor.offset=e._raw.byteOffset+e._raw.byteLength,e},T.create=function(t){var e=new T;return e.type=t,e.boxes=[],e},T.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],T.prototype._boxProcessors={},T.prototype._procField=function(t,e,y){this._parsing?this[t]=this._readField(e,y):this._writeField(e,y,this[t])},T.prototype._procFieldArray=function(t,e,y,p){var u;if(this._parsing)for(this[t]=[],u=0;u<e;u++)this[t][u]=this._readField(y,p);else for(u=0;u<this[t].length;u++)this._writeField(y,p,this[t][u])},T.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},T.prototype._procEntries=function(t,e,y){var p;if(this._parsing)for(this[t]=[],p=0;p<e;p++)this[t].push({}),y.call(this,this[t][p]);else for(p=0;p<e;p++)y.call(this,this[t][p])},T.prototype._procSubEntries=function(t,e,y,p){var u;if(this._parsing)for(t[e]=[],u=0;u<y;u++)t[e].push({}),p.call(this,t[e][u]);else for(u=0;u<y;u++)p.call(this,t[e][u])},T.prototype._procEntryField=function(t,e,y,p){this._parsing?t[e]=this._readField(y,p):this._writeField(y,p,t[e])},T.prototype._procSubBoxes=function(t,e){var y;if(this._parsing)for(this[t]=[],y=0;y<e;y++)this[t].push(T.parse(this));else for(y=0;y<e;y++)this._rawo?this[t][y].write():this.size+=this[t][y].getLength()},T.prototype._readField=function(t,e){switch(t){case"uint":return this._readUint(e);case"int":return this._readInt(e);case"template":return this._readTemplate(e);case"string":return e===-1?this._readTerminatedString():this._readString(e);case"data":return this._readData(e);case"utf8":return this._readUTF8String();default:return-1}},T.prototype._readInt=function(t){var e=null,y=this._cursor.offset-this._raw.byteOffset;switch(t){case 8:e=this._raw.getInt8(y);break;case 16:e=this._raw.getInt16(y);break;case 32:e=this._raw.getInt32(y);break;case 64:var p=this._raw.getInt32(y),u=this._raw.getInt32(y+4);e=p*Math.pow(2,32)+u}return this._cursor.offset+=t>>3,e},T.prototype._readUint=function(t){var e,y,p=null,u=this._cursor.offset-this._raw.byteOffset;switch(t){case 8:p=this._raw.getUint8(u);break;case 16:p=this._raw.getUint16(u);break;case 24:p=((e=this._raw.getUint16(u))<<8)+(y=this._raw.getUint8(u+2));break;case 32:p=this._raw.getUint32(u);break;case 64:e=this._raw.getUint32(u),y=this._raw.getUint32(u+4),p=e*Math.pow(2,32)+y}return this._cursor.offset+=t>>3,p},T.prototype._readString=function(t){for(var e="",y=0;y<t;y++){var p=this._readUint(8);e+=String.fromCharCode(p)}return e},T.prototype._readTemplate=function(t){return this._readUint(t/2)+this._readUint(t/2)/Math.pow(2,t/2)},T.prototype._readTerminatedString=function(){for(var t="";this._cursor.offset-this._offset<this._raw.byteLength;){var e=this._readUint(8);if(e===0)break;t+=String.fromCharCode(e)}return t},T.prototype._readData=function(t){var e=t>0?t:this._raw.byteLength-(this._cursor.offset-this._offset);if(e>0){var y=new Uint8Array(this._raw.buffer,this._cursor.offset,e);return this._cursor.offset+=e,y}return null},T.prototype._readUTF8String=function(){var t=this._raw.byteLength-(this._cursor.offset-this._offset),e=null;return t>0&&(e=new DataView(this._raw.buffer,this._cursor.offset,t),this._cursor.offset+=t),e&&D.Utils.dataViewToString(e)},T.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1?this._parseContainerBox():this._data=this._readData())}},T.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},T.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(T.parse(this))},T.prototype.append=function(t,e){D.Utils.appendBox(this,t,e)},T.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var t=0;t<this.boxes.length;t++)this.size+=this.boxes[t].getLength();return this._data&&this._writeData(this._data),this.size},T.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var t=0;t<this.boxes.length;t++)this.boxes[t].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},T.prototype._writeInt=function(t,e){if(this._rawo){var y=this._cursor.offset-this._rawo.byteOffset;switch(t){case 8:this._rawo.setInt8(y,e);break;case 16:this._rawo.setInt16(y,e);break;case 32:this._rawo.setInt32(y,e);break;case 64:var p=Math.floor(e/Math.pow(2,32)),u=e-p*Math.pow(2,32);this._rawo.setUint32(y,p),this._rawo.setUint32(y+4,u)}this._cursor.offset+=t>>3}else this.size+=t>>3},T.prototype._writeUint=function(t,e){if(this._rawo){var y,p,u=this._cursor.offset-this._rawo.byteOffset;switch(t){case 8:this._rawo.setUint8(u,e);break;case 16:this._rawo.setUint16(u,e);break;case 24:y=(16776960&e)>>8,p=255&e,this._rawo.setUint16(u,y),this._rawo.setUint8(u+2,p);break;case 32:this._rawo.setUint32(u,e);break;case 64:p=e-(y=Math.floor(e/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(u,y),this._rawo.setUint32(u+4,p)}this._cursor.offset+=t>>3}else this.size+=t>>3},T.prototype._writeString=function(t,e){for(var y=0;y<t;y++)this._writeUint(8,e.charCodeAt(y))},T.prototype._writeTerminatedString=function(t){if(t.length!==0){for(var e=0;e<t.length;e++)this._writeUint(8,t.charCodeAt(e));this._writeUint(8,0)}},T.prototype._writeTemplate=function(t,e){var y=Math.floor(e),p=(e-y)*Math.pow(2,t/2);this._writeUint(t/2,y),this._writeUint(t/2,p)},T.prototype._writeData=function(t){if(t)if(this._rawo){if(t instanceof Array){for(var e=this._cursor.offset-this._rawo.byteOffset,y=0;y<t.length;y++)this._rawo.setInt8(e+y,t[y]);this._cursor.offset+=t.length}t instanceof Uint8Array&&(this._root.bytes.set(t,this._cursor.offset),this._cursor.offset+=t.length)}else this.size+=t.length},T.prototype._writeUTF8String=function(t){var e=D.Utils.utf8ToByteArray(t);if(this._rawo)for(var y=new DataView(this._rawo.buffer,this._cursor.offset,e.length),p=0;p<e.length;p++)y.setUint8(p,e[p]);else this.size+=e.length},T.prototype._writeField=function(t,e,y){switch(t){case"uint":this._writeUint(e,y);break;case"int":this._writeInt(e,y);break;case"template":this._writeTemplate(e,y);break;case"string":e==-1?this._writeTerminatedString(y):this._writeString(e,y);break;case"data":this._writeData(y);break;case"utf8":this._writeUTF8String(y)}},T.prototype._boxProcessors.avc1=T.prototype._boxProcessors.avc2=T.prototype._boxProcessors.avc3=T.prototype._boxProcessors.avc4=T.prototype._boxProcessors.hvc1=T.prototype._boxProcessors.hev1=T.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},T.prototype._boxProcessors.ctts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(t){this._procEntryField(t,"sample_count","uint",32),this._procEntryField(t,"sample_offset",this.version===1?"int":"uint",32)})},T.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},T.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(t){this._procEntryField(t,"segment_duration","uint",this.version===1?64:32),this._procEntryField(t,"media_time","int",this.version===1?64:32),this._procEntryField(t,"media_rate_integer","int",16),this._procEntryField(t,"media_rate_fraction","int",16)})},T.prototype._boxProcessors.emsg=function(){this._procFullBox(),this.version==1?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},T.prototype._boxProcessors.free=T.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},T.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},T.prototype._boxProcessors.ftyp=T.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var t=-1;this._parsing&&(t=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",t,"string",4)},T.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},T.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},T.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._parsing||typeof this.language!="string"||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},T.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",this.version==1?64:32)},T.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},T.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},T.prototype._boxProcessors.mp4a=T.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},T.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},T.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},T.prototype._boxProcessors.prft=function(){this._procFullBox(),this._procField("reference_track_ID","uint",32),this._procField("ntp_timestamp_sec","uint",32),this._procField("ntp_timestamp_frac","uint",32),this._procField("media_time","uint",this.version==1?64:32)},T.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},T.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},T.prototype._boxProcessors.sdtp=function(){this._procFullBox();var t=-1;this._parsing&&(t=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",t,"uint",8)},T.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",this.version==1?64:32),this._procField("first_offset","uint",this.version==1?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(t){this._parsing||(t.reference=(1&t.reference_type)<<31,t.reference|=2147483647&t.referenced_size,t.sap=(1&t.starts_with_SAP)<<31,t.sap|=(3&t.SAP_type)<<28,t.sap|=268435455&t.SAP_delta_time),this._procEntryField(t,"reference","uint",32),this._procEntryField(t,"subsegment_duration","uint",32),this._procEntryField(t,"sap","uint",32),this._parsing&&(t.reference_type=t.reference>>31&1,t.referenced_size=2147483647&t.reference,t.starts_with_SAP=t.sap>>31&1,t.SAP_type=t.sap>>28&7,t.SAP_delta_time=268435455&t.sap)})},T.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},T.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(t){this._procEntryField(t,"ranges_count","uint",32),this._procSubEntries(t,"ranges",t.ranges_count,function(e){this._procEntryField(e,"level","uint",8),this._procEntryField(e,"range_size","uint",24)})})},T.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},T.prototype._boxProcessors.sttg=function(){this._procField("settings","utf8")},T.prototype._boxProcessors.stts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(t){this._procEntryField(t,"sample_count","uint",32),this._procEntryField(t,"sample_delta","uint",32)})},T.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(t){this._procEntryField(t,"sample_delta","uint",32),this._procEntryField(t,"subsample_count","uint",16),this._procSubEntries(t,"subsamples",t.subsample_count,function(e){this._procEntryField(e,"subsample_size","uint",this.version===1?32:16),this._procEntryField(e,"subsample_priority","uint",8),this._procEntryField(e,"discardable","uint",8),this._procEntryField(e,"codec_specific_parameters","uint",32)})})},T.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},T.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",this.version==1?64:32)},T.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},T.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(t){this._procEntryField(t,"time","uint",this.version===1?64:32),this._procEntryField(t,"moof_offset","uint",this.version===1?64:32),this._procEntryField(t,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(t,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(t,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},T.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},T.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},T.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(t){256&this.flags&&this._procEntryField(t,"sample_duration","uint",32),512&this.flags&&this._procEntryField(t,"sample_size","uint",32),1024&this.flags&&this._procEntryField(t,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(t,"sample_composition_time_offset",this.version===1?"int":"uint",32)})},T.prototype._boxProcessors["url "]=T.prototype._boxProcessors["urn "]=function(){this._procFullBox(),this.type==="urn "&&this._procField("name","string",-1),this._procField("location","string",-1)},T.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},T.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},T.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},T.prototype._boxProcessors.vtte=function(){}},5530:function(et,Re,D){et.exports=D(6146).polyfill()},6146:function(et,Re,D){et.exports=function(){function oe(qe){return typeof qe=="function"}var T=Array.isArray?Array.isArray:function(qe){return Object.prototype.toString.call(qe)==="[object Array]"},t=0,e=void 0,y=void 0,p=function(qe,Je){C[t]=qe,C[t+1]=Je,(t+=2)===2&&(y?y(Z):z())},u=typeof window<"u"?window:void 0,h=u||{},E=h.MutationObserver||h.WebKitMutationObserver,n=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",c=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function d(){var qe=setTimeout;return function(){return qe(Z,1)}}var C=new Array(1e3);function Z(){for(var qe=0;qe<t;qe+=2)(0,C[qe])(C[qe+1]),C[qe]=void 0,C[qe+1]=void 0;t=0}var k,x,ne,O,z=void 0;function te(qe,Je){var ge=this,he=new this.constructor(ce);he[ee]===void 0&&Fe(he);var Ye=ge._state;if(Ye){var f=arguments[Ye-1];p(function(){return tt(Ye,he,f,ge._result)})}else ke(ge,he,qe,Je);return he}function V(qe){if(qe&&typeof qe=="object"&&qe.constructor===this)return qe;var Je=new this(ce);return Ie(Je,qe),Je}z=n?function(){return process.nextTick(Z)}:E?(x=0,ne=new E(Z),O=document.createTextNode(""),ne.observe(O,{characterData:!0}),function(){O.data=x=++x%2}):c?((k=new MessageChannel).port1.onmessage=Z,function(){return k.port2.postMessage(0)}):u===void 0?function(){try{var qe=Function("return this")().require("vertx");return(e=qe.runOnLoop||qe.runOnContext)!==void 0?function(){e(Z)}:d()}catch{return d()}}():d();var ee=Math.random().toString(36).substring(2);function ce(){}var Ee=void 0;function $(qe,Je,ge){Je.constructor===qe.constructor&&ge===te&&Je.constructor.resolve===V?function(he,Ye){Ye._state===1?Ve(he,Ye._result):Ye._state===2?ye(he,Ye._result):ke(Ye,void 0,function(f){return Ie(he,f)},function(f){return ye(he,f)})}(qe,Je):ge===void 0?Ve(qe,Je):oe(ge)?function(he,Ye,f){p(function(i){var v=!1,S=function(W,H,Te,Ge){try{W.call(H,Te,Ge)}catch(Ce){return Ce}}(f,Ye,function(W){v||(v=!0,Ye!==W?Ie(i,W):Ve(i,W))},function(W){v||(v=!0,ye(i,W))},i._label);!v&&S&&(v=!0,ye(i,S))},he)}(qe,Je,ge):Ve(qe,Je)}function Ie(qe,Je){if(qe===Je)ye(qe,new TypeError("You cannot resolve a promise with itself"));else if(Ye=typeof(he=Je),he===null||Ye!=="object"&&Ye!=="function")Ve(qe,Je);else{var ge=void 0;try{ge=Je.then}catch(f){return void ye(qe,f)}$(qe,Je,ge)}var he,Ye}function Ze(qe){qe._onerror&&qe._onerror(qe._result),Ke(qe)}function Ve(qe,Je){qe._state===Ee&&(qe._result=Je,qe._state=1,qe._subscribers.length!==0&&p(Ke,qe))}function ye(qe,Je){qe._state===Ee&&(qe._state=2,qe._result=Je,p(Ze,qe))}function ke(qe,Je,ge,he){var Ye=qe._subscribers,f=Ye.length;qe._onerror=null,Ye[f]=Je,Ye[f+1]=ge,Ye[f+2]=he,f===0&&qe._state&&p(Ke,qe)}function Ke(qe){var Je=qe._subscribers,ge=qe._state;if(Je.length!==0){for(var he=void 0,Ye=void 0,f=qe._result,i=0;i<Je.length;i+=3)he=Je[i],Ye=Je[i+ge],he?tt(ge,he,Ye,f):Ye(f);qe._subscribers.length=0}}function tt(qe,Je,ge,he){var Ye=oe(ge),f=void 0,i=void 0,v=!0;if(Ye){try{f=ge(he)}catch(S){v=!1,i=S}if(Je===f)return void ye(Je,new TypeError("A promises callback cannot return that same promise."))}else f=he;Je._state!==Ee||(Ye&&v?Ie(Je,f):v===!1?ye(Je,i):qe===1?Ve(Je,f):qe===2&&ye(Je,f))}var ve=0;function Fe(qe){qe[ee]=ve++,qe._state=void 0,qe._result=void 0,qe._subscribers=[]}var pt=function(){function qe(Je,ge){this._instanceConstructor=Je,this.promise=new Je(ce),this.promise[ee]||Fe(this.promise),T(ge)?(this.length=ge.length,this._remaining=ge.length,this._result=new Array(this.length),this.length===0?Ve(this.promise,this._result):(this.length=this.length||0,this._enumerate(ge),this._remaining===0&&Ve(this.promise,this._result))):ye(this.promise,new Error("Array Methods must be provided an Array"))}return qe.prototype._enumerate=function(Je){for(var ge=0;this._state===Ee&&ge<Je.length;ge++)this._eachEntry(Je[ge],ge)},qe.prototype._eachEntry=function(Je,ge){var he=this._instanceConstructor,Ye=he.resolve;if(Ye===V){var f=void 0,i=void 0,v=!1;try{f=Je.then}catch(W){v=!0,i=W}if(f===te&&Je._state!==Ee)this._settledAt(Je._state,ge,Je._result);else if(typeof f!="function")this._remaining--,this._result[ge]=Je;else if(he===ft){var S=new he(ce);v?ye(S,i):$(S,Je,f),this._willSettleAt(S,ge)}else this._willSettleAt(new he(function(W){return W(Je)}),ge)}else this._willSettleAt(Ye(Je),ge)},qe.prototype._settledAt=function(Je,ge,he){var Ye=this.promise;Ye._state===Ee&&(this._remaining--,Je===2?ye(Ye,he):this._result[ge]=he),this._remaining===0&&Ve(Ye,this._result)},qe.prototype._willSettleAt=function(Je,ge){var he=this;ke(Je,void 0,function(Ye){return he._settledAt(1,ge,Ye)},function(Ye){return he._settledAt(2,ge,Ye)})},qe}(),ft=function(){function qe(Je){this[ee]=ve++,this._result=this._state=void 0,this._subscribers=[],ce!==Je&&(typeof Je!="function"&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof qe?function(ge,he){try{he(function(Ye){Ie(ge,Ye)},function(Ye){ye(ge,Ye)})}catch(Ye){ye(ge,Ye)}}(this,Je):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return qe.prototype.catch=function(Je){return this.then(null,Je)},qe.prototype.finally=function(Je){var ge=this,he=ge.constructor;return oe(Je)?ge.then(function(Ye){return he.resolve(Je()).then(function(){return Ye})},function(Ye){return he.resolve(Je()).then(function(){throw Ye})}):ge.then(Je,Je)},qe}();return ft.prototype.then=te,ft.all=function(qe){return new pt(this,qe).promise},ft.race=function(qe){var Je=this;return T(qe)?new Je(function(ge,he){for(var Ye=qe.length,f=0;f<Ye;f++)Je.resolve(qe[f]).then(ge,he)}):new Je(function(ge,he){return he(new TypeError("You must pass an array to race."))})},ft.resolve=V,ft.reject=function(qe){var Je=new this(ce);return ye(Je,qe),Je},ft._setScheduler=function(qe){y=qe},ft._setAsap=function(qe){p=qe},ft._asap=p,ft.polyfill=function(){var qe=void 0;if(D.g!==void 0)qe=D.g;else if(typeof self<"u")qe=self;else try{qe=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var Je=qe.Promise;if(Je){var ge=null;try{ge=Object.prototype.toString.call(Je.resolve())}catch{}if(ge==="[object Promise]"&&!Je.cast)return}qe.Promise=ft},ft.Promise=ft,ft}()},1159:function(et){var Re,D=typeof Reflect=="object"?Reflect:null,oe=D&&typeof D.apply=="function"?D.apply:function(Z,k,x){return Function.prototype.apply.call(Z,k,x)};Re=D&&typeof D.ownKeys=="function"?D.ownKeys:Object.getOwnPropertySymbols?function(Z){return Object.getOwnPropertyNames(Z).concat(Object.getOwnPropertySymbols(Z))}:function(Z){return Object.getOwnPropertyNames(Z)};var T=Number.isNaN||function(Z){return Z!=Z};function t(){t.init.call(this)}et.exports=t,et.exports.once=function(Z,k){return new Promise(function(x,ne){function O(te){Z.removeListener(k,z),ne(te)}function z(){typeof Z.removeListener=="function"&&Z.removeListener("error",O),x([].slice.call(arguments))}C(Z,k,z,{once:!0}),k!=="error"&&function(te,V,ee){typeof te.on=="function"&&C(te,"error",V,{once:!0})}(Z,O)})},t.EventEmitter=t,t.prototype._events=void 0,t.prototype._eventsCount=0,t.prototype._maxListeners=void 0;var e=10;function y(Z){if(typeof Z!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Z)}function p(Z){return Z._maxListeners===void 0?t.defaultMaxListeners:Z._maxListeners}function u(Z,k,x,ne){var O,z,te,V;if(y(x),(z=Z._events)===void 0?(z=Z._events=Object.create(null),Z._eventsCount=0):(z.newListener!==void 0&&(Z.emit("newListener",k,x.listener?x.listener:x),z=Z._events),te=z[k]),te===void 0)te=z[k]=x,++Z._eventsCount;else if(typeof te=="function"?te=z[k]=ne?[x,te]:[te,x]:ne?te.unshift(x):te.push(x),(O=p(Z))>0&&te.length>O&&!te.warned){te.warned=!0;var ee=new Error("Possible EventEmitter memory leak detected. "+te.length+" "+String(k)+" listeners added. Use emitter.setMaxListeners() to increase limit");ee.name="MaxListenersExceededWarning",ee.emitter=Z,ee.type=k,ee.count=te.length,V=ee,console&&console.warn&&console.warn(V)}return Z}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function E(Z,k,x){var ne={fired:!1,wrapFn:void 0,target:Z,type:k,listener:x},O=h.bind(ne);return O.listener=x,ne.wrapFn=O,O}function n(Z,k,x){var ne=Z._events;if(ne===void 0)return[];var O=ne[k];return O===void 0?[]:typeof O=="function"?x?[O.listener||O]:[O]:x?function(z){for(var te=new Array(z.length),V=0;V<te.length;++V)te[V]=z[V].listener||z[V];return te}(O):d(O,O.length)}function c(Z){var k=this._events;if(k!==void 0){var x=k[Z];if(typeof x=="function")return 1;if(x!==void 0)return x.length}return 0}function d(Z,k){for(var x=new Array(k),ne=0;ne<k;++ne)x[ne]=Z[ne];return x}function C(Z,k,x,ne){if(typeof Z.on=="function")ne.once?Z.once(k,x):Z.on(k,x);else{if(typeof Z.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof Z);Z.addEventListener(k,function O(z){ne.once&&Z.removeEventListener(k,O),x(z)})}}Object.defineProperty(t,"defaultMaxListeners",{enumerable:!0,get:function(){return e},set:function(Z){if(typeof Z!="number"||Z<0||T(Z))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+Z+".");e=Z}}),t.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},t.prototype.setMaxListeners=function(Z){if(typeof Z!="number"||Z<0||T(Z))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+Z+".");return this._maxListeners=Z,this},t.prototype.getMaxListeners=function(){return p(this)},t.prototype.emit=function(Z){for(var k=[],x=1;x<arguments.length;x++)k.push(arguments[x]);var ne=Z==="error",O=this._events;if(O!==void 0)ne=ne&&O.error===void 0;else if(!ne)return!1;if(ne){var z;if(k.length>0&&(z=k[0]),z instanceof Error)throw z;var te=new Error("Unhandled error."+(z?" ("+z.message+")":""));throw te.context=z,te}var V=O[Z];if(V===void 0)return!1;if(typeof V=="function")oe(V,this,k);else{var ee=V.length,ce=d(V,ee);for(x=0;x<ee;++x)oe(ce[x],this,k)}return!0},t.prototype.addListener=function(Z,k){return u(this,Z,k,!1)},t.prototype.on=t.prototype.addListener,t.prototype.prependListener=function(Z,k){return u(this,Z,k,!0)},t.prototype.once=function(Z,k){return y(k),this.on(Z,E(this,Z,k)),this},t.prototype.prependOnceListener=function(Z,k){return y(k),this.prependListener(Z,E(this,Z,k)),this},t.prototype.removeListener=function(Z,k){var x,ne,O,z,te;if(y(k),(ne=this._events)===void 0)return this;if((x=ne[Z])===void 0)return this;if(x===k||x.listener===k)--this._eventsCount==0?this._events=Object.create(null):(delete ne[Z],ne.removeListener&&this.emit("removeListener",Z,x.listener||k));else if(typeof x!="function"){for(O=-1,z=x.length-1;z>=0;z--)if(x[z]===k||x[z].listener===k){te=x[z].listener,O=z;break}if(O<0)return this;O===0?x.shift():function(V,ee){for(;ee+1<V.length;ee++)V[ee]=V[ee+1];V.pop()}(x,O),x.length===1&&(ne[Z]=x[0]),ne.removeListener!==void 0&&this.emit("removeListener",Z,te||k)}return this},t.prototype.off=t.prototype.removeListener,t.prototype.removeAllListeners=function(Z){var k,x,ne;if((x=this._events)===void 0)return this;if(x.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):x[Z]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete x[Z]),this;if(arguments.length===0){var O,z=Object.keys(x);for(ne=0;ne<z.length;++ne)(O=z[ne])!=="removeListener"&&this.removeAllListeners(O);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(k=x[Z])=="function")this.removeListener(Z,k);else if(k!==void 0)for(ne=k.length-1;ne>=0;ne--)this.removeListener(Z,k[ne]);return this},t.prototype.listeners=function(Z){return n(this,Z,!0)},t.prototype.rawListeners=function(Z){return n(this,Z,!1)},t.listenerCount=function(Z,k){return typeof Z.listenerCount=="function"?Z.listenerCount(k):c.call(Z,k)},t.prototype.listenerCount=c,t.prototype.eventNames=function(){return this._eventsCount>0?Re(this._events):[]}},3101:function(et){var Re=Array.isArray,D=Object.keys,oe=Object.prototype.hasOwnProperty;et.exports=function T(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var y,p,u,h=Re(t),E=Re(e);if(h&&E){if((p=t.length)!=e.length)return!1;for(y=p;y--!=0;)if(!T(t[y],e[y]))return!1;return!0}if(h!=E)return!1;var n=t instanceof Date,c=e instanceof Date;if(n!=c)return!1;if(n&&c)return t.getTime()==e.getTime();var d=t instanceof RegExp,C=e instanceof RegExp;if(d!=C)return!1;if(d&&C)return t.toString()==e.toString();var Z=D(t);if((p=Z.length)!==D(e).length)return!1;for(y=p;y--!=0;)if(!oe.call(e,Z[y]))return!1;for(y=p;y--!=0;)if(!T(t[u=Z[y]],e[u]))return!1;return!0}return t!=t&&e!=e}},3362:function(et,Re,D){(function(oe,T,t,e,y){function p(i){if("contents"in i)for(var v=("styleAttrs"in i)?i.styleAttrs[e.byName.ruby.qname]:null,S=i.kind==="span"&&(v==="container"||v==="textContainer"||v==="baseContainer"),W=i.contents.length-1;W>=0;W--)!S||"styleAttrs"in i.contents[W]&&e.byName.ruby.qname in i.contents[W].styleAttrs?p(i.contents[W]):delete i.contents[W]}function u(i,v,S,W){var H=W&&W.timeContainer==="seq",Te=0;W&&(Te=H&&S?S.end:W.begin),v.begin=v.explicit_begin?v.explicit_begin+Te:Te;var Ge=v.begin,Ce=null;if("sets"in v)for(var be=0;be<v.sets.length;be++)u(i,v.sets[be],Ce,v),Ge=v.timeContainer==="seq"?v.sets[be].end:Math.max(Ge,v.sets[be].end),Ce=v.sets[be];if("contents"in v){if("contents"in v)for(var Se=0;Se<v.contents.length;Se++)u(i,v.contents[Se],Ce,v),Ge=v.timeContainer==="seq"?v.contents[Se].end:Math.max(Ge,v.contents[Se].end),Ce=v.contents[Se]}else Ge=H?v.begin:Number.POSITIVE_INFINITY;v.explicit_end!==null&&v.explicit_dur!==null?v.end=Math.min(v.begin+v.explicit_dur,Te+v.explicit_end):v.explicit_end===null&&v.explicit_dur!==null?v.end=v.begin+v.explicit_dur:v.explicit_end!==null&&v.explicit_dur===null?v.end=Te+v.explicit_end:v.end=Ge,delete v.explicit_begin,delete v.explicit_dur,delete v.explicit_end,i._registerEvent(v)}function h(i){this.node=i}function E(){this.events=[],this.head=new n,this.body=null}function n(){this.styling=new c,this.layout=new Z}function c(){this.styles={},this.initials={}}function d(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function C(){this.styleAttrs=null}function Z(){this.regions={}}function k(i,v){x.call(this,"image"),this.src=i,this.type=v}function x(i){this.kind=i}function ne(i){this.id=i}function O(i){this.regionID=i}function z(i){this.styleAttrs=i}function te(i){this.sets=i}function V(i){this.contents=i}function ee(i,v,S){this.explicit_begin=i,this.explicit_end=v,this.explicit_dur=S}function ce(){x.call(this,"body")}function Ee(){x.call(this,"div")}function $(){x.call(this,"p")}function Ie(){x.call(this,"span")}function Ze(){x.call(this,"span")}function Ve(){x.call(this,"br")}function ye(){}function ke(){}function Ke(i){return i&&"xml:id"in i.attributes&&i.attributes["xml:id"].value||null}function tt(i){return i&&"style"in i.attributes?i.attributes.style.value.split(" "):[]}function ve(i,v){var S={};if(i!==null)for(var W in i.attributes){var H=i.attributes[W].uri+" "+i.attributes[W].local,Te=e.byQName[H];if(Te!==void 0){var Ge=Te.parse(i.attributes[W].value);Ge!==null?(S[H]=Ge,Te===e.byName.zIndex&&ge(v,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):he(v,"Cannot parse styling attribute "+H+" --> "+i.attributes[W].value)}}return S}function Fe(i,v,S){for(var W in i.attributes)if(i.attributes[W].uri===v&&i.attributes[W].local===S)return i.attributes[W].value;return null}function pt(i,v,S){var W,H=null;return(W=/^(\d+(?:\.\d+)?)f$/.exec(S))!==null?v!==null&&(H=parseFloat(W[1])/v):(W=/^(\d+(?:\.\d+)?)t$/.exec(S))!==null?i!==null&&(H=parseFloat(W[1])/i):(W=/^(\d+(?:\.\d+)?)ms$/.exec(S))!==null?H=parseFloat(W[1])/1e3:(W=/^(\d+(?:\.\d+)?)s$/.exec(S))!==null?H=parseFloat(W[1]):(W=/^(\d+(?:\.\d+)?)h$/.exec(S))!==null?H=3600*parseFloat(W[1]):(W=/^(\d+(?:\.\d+)?)m$/.exec(S))!==null?H=60*parseFloat(W[1]):(W=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(S))!==null?H=3600*parseInt(W[1])+60*parseInt(W[2])+parseFloat(W[3]):(W=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(S))!==null&&v!==null&&(H=3600*parseInt(W[1])+60*parseInt(W[2])+parseInt(W[3])+(W[4]===null?0:parseInt(W[4])/v)),H}function ft(i,v,S){for(;v.styleRefs.length>0;){var W=v.styleRefs.pop();W in i.styles?(ft(i,i.styles[W],S),Je(i.styles[W].styleAttrs,v.styleAttrs)):he(S,"Non-existant style id referenced")}}function qe(i,v,S,W){for(var H=v.length-1;H>=0;H--){var Te=v[H];Te in i.styles?Je(i.styles[Te].styleAttrs,S):he(W,"Non-existant style id referenced")}}function Je(i,v){for(var S in i)i.hasOwnProperty(S)&&(S in v||(v[S]=i[S]))}function ge(i,v){if(i&&i.warn&&i.warn(v))throw v}function he(i,v){if(i&&i.error&&i.error(v))throw v}function Ye(i,v){throw i&&i.fatal&&i.fatal(v),v}function f(i,v){for(var S,W=0,H=i.length-1;W<=H;){var Te=i[S=Math.floor((W+H)/2)];if(Te<v)W=S+1;else{if(!(Te>v))return{found:!0,index:S};H=S-1}}return{found:!1,index:W}}oe.fromXML=function(i,v,S){var W=T.parser(!0,{xmlns:!0}),H=[],Te=[],Ge=[],Ce=0,be=null;W.onclosetag=function(nt){if(H[0]instanceof ye)be.head!==null&&be.head.styling!==null&&qe(be.head.styling,H[0].styleRefs,H[0].styleAttrs,v),delete H[0].styleRefs;else if(H[0]instanceof c)for(var Lt in H[0].styles)H[0].styles.hasOwnProperty(Lt)&&ft(H[0],H[0].styles[Lt],v);else if(H[0]instanceof $||H[0]instanceof Ie){if(H[0].contents.length>1){var Ot,Mt=[H[0].contents[0]];for(Ot=1;Ot<H[0].contents.length;Ot++)H[0].contents[Ot]instanceof Ze&&Mt[Mt.length-1]instanceof Ze?Mt[Mt.length-1].text+=H[0].contents[Ot].text:Mt.push(H[0].contents[Ot]);H[0].contents=Mt}H[0]instanceof Ie&&H[0].contents.length===1&&H[0].contents[0]instanceof Ze&&(H[0].text=H[0].contents[0].text,delete H[0].contents)}else H[0]instanceof h&&(H[0].node.uri===t.ns_tt&&H[0].node.local==="metadata"?Ce--:Ce>0&&S&&"onCloseTag"in S&&S.onCloseTag());Ge.shift(),Te.shift(),H.shift()},W.ontext=function(nt){if(H[0]!==void 0)if(H[0]instanceof Ie||H[0]instanceof $){if(H[0]instanceof Ie){var Lt=H[0].styleAttrs[e.byName.ruby.qname];if(Lt==="container"||Lt==="textContainer"||Lt==="baseContainer")return}var Ot=new Ze;Ot.initFromText(be,H[0],nt,Te[0],Ge[0],v),H[0].contents.push(Ot)}else H[0]instanceof h&&Ce>0&&S&&"onText"in S&&S.onText(nt)},W.onopentag=function(nt){var Lt=nt.attributes["xml:space"];Lt?Ge.unshift(Lt.value):Ge.length===0?Ge.unshift("default"):Ge.unshift(Ge[0]);var Ot=nt.attributes["xml:lang"];if(Ot?Te.unshift(Ot.value):Te.length===0?Te.unshift(""):Te.unshift(Te[0]),nt.uri===t.ns_tt)if(nt.local==="tt")be!==null&&Ye(v,"Two <tt> elements at ("+this.line+","+this.column+")"),(be=new E).initFromNode(nt,Te[0],v),H.unshift(be);else if(nt.local==="head")H[0]instanceof E||Ye(v,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),H.unshift(be.head);else if(nt.local==="styling")H[0]instanceof n||Ye(v,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),H.unshift(be.head.styling);else if(nt.local==="style"){var Mt;H[0]instanceof c?((Mt=new d).initFromNode(nt,v),Mt.id?be.head.styling.styles[Mt.id]=Mt:he(v,"<style> element missing @id attribute"),H.unshift(Mt)):H[0]instanceof ye?((Mt=new d).initFromNode(nt,v),Je(Mt.styleAttrs,H[0].styleAttrs),H.unshift(Mt)):Ye(v,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if(nt.local==="initial"){var Jt;if(H[0]instanceof c){for(var dn in(Jt=new C).initFromNode(nt,v),Jt.styleAttrs)Jt.styleAttrs.hasOwnProperty(dn)&&(be.head.styling.initials[dn]=Jt.styleAttrs[dn]);H.unshift(Jt)}else Ye(v,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")")}else if(nt.local==="layout")H[0]instanceof n||Ye(v,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),H.unshift(be.head.layout);else if(nt.local==="region"){H[0]instanceof Z||Ye(v,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var pn=new ye;pn.initFromNode(be,nt,Te[0],v),!pn.id||pn.id in be.head.layout.regions?he(v,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):be.head.layout.regions[pn.id]=pn,H.unshift(pn)}else if(nt.local==="body"){H[0]instanceof E||Ye(v,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),be.body!==null&&Ye(v,"Second <body> element at "+this.line+","+this.column+")");var Gn=new ce;Gn.initFromNode(be,nt,Te[0],v),be.body=Gn,H.unshift(Gn)}else if(nt.local==="div"){H[0]instanceof Ee||H[0]instanceof ce||Ye(v,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var _n=new Ee;_n.initFromNode(be,H[0],nt,Te[0],v);var An=_n.styleAttrs[e.byName.backgroundImage.qname];An&&(_n.contents.push(new k(An)),delete _n.styleAttrs[e.byName.backgroundImage.qname]),H[0].contents.push(_n),H.unshift(_n)}else if(nt.local==="image"){H[0]instanceof Ee||Ye(v,"Parent of <image> element is not <div> at "+this.line+","+this.column+")");var qn=new k;qn.initFromNode(be,H[0],nt,Te[0],v),H[0].contents.push(qn),H.unshift(qn)}else if(nt.local==="p"){H[0]instanceof Ee||Ye(v,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var yn=new $;yn.initFromNode(be,H[0],nt,Te[0],v),H[0].contents.push(yn),H.unshift(yn)}else if(nt.local==="span"){H[0]instanceof Ie||H[0]instanceof $||Ye(v,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var Xn=new Ie;Xn.initFromNode(be,H[0],nt,Te[0],Ge[0],v),H[0].contents.push(Xn),H.unshift(Xn)}else if(nt.local==="br"){H[0]instanceof Ie||H[0]instanceof $||Ye(v,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var xn=new Ve;xn.initFromNode(be,H[0],nt,Te[0],v),H[0].contents.push(xn),H.unshift(xn)}else if(nt.local==="set"){H[0]instanceof Ie||H[0]instanceof $||H[0]instanceof Ee||H[0]instanceof ce||H[0]instanceof ye||H[0]instanceof Ve||Ye(v,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var Hn=new ke;Hn.initFromNode(be,H[0],nt,v),H[0].sets.push(Hn),H.unshift(Hn)}else H.unshift(new h(nt));else H.unshift(new h(nt));if(H[0]instanceof h){if(nt.uri===t.ns_tt&&nt.local==="metadata")Ce++;else if(Ce>0&&S&&"onOpenTag"in S){var tr=[];for(var Vn in nt.attributes)tr[nt.attributes[Vn].uri+" "+nt.attributes[Vn].local]={uri:nt.attributes[Vn].uri,local:nt.attributes[Vn].local,value:nt.attributes[Vn].value};S.onOpenTag(nt.uri,nt.local,tr)}}},W.write(i).close(),delete be.head.styling.styles;var Se=!1;for(var Ue in be.head.layout.regions)if(be.head.layout.regions.hasOwnProperty(Ue)){Se=!0;break}if(!Se){var ze=ye.prototype.createDefaultRegion(be.lang);be.head.layout.regions[ze.id]=ze}for(var It in be.head.layout.regions)be.head.layout.regions.hasOwnProperty(It)&&u(be,be.head.layout.regions[It],null,null);return be.body&&u(be,be.body,null,null),be.body&&p(be.body),be},E.prototype.initFromNode=function(i,v,S){var W=function(Ce,be){var Se=Fe(Ce,t.ns_ttp,"cellResolution"),Ue=15,ze=32;if(Se!==null){var It=/(\d+) (\d+)/.exec(Se);It!==null?(ze=parseInt(It[1]),Ue=parseInt(It[2])):ge(be,"Malformed cellResolution value (using initial value instead)")}return{w:ze,h:Ue}}(i,S);this.cellLength={h:new y.ComputedLength(0,1/W.h),w:new y.ComputedLength(1/W.w,0)};var H=function(Ce,be){var Se,Ue=Fe(Ce,t.ns_ttp,"frameRate"),ze=30;Ue!==null&&((Se=/(\d+)/.exec(Ue))!==null?ze=parseInt(Se[1]):ge(be,"Malformed frame rate attribute (using initial value instead)"));var It=Fe(Ce,t.ns_ttp,"frameRateMultiplier"),nt=1;It!==null&&((Se=/(\d+) (\d+)/.exec(It))!==null?nt=parseInt(Se[1])/parseInt(Se[2]):ge(be,"Malformed frame rate multiplier attribute (using initial value instead)"));var Lt=nt*ze,Ot=1,Mt=Fe(Ce,t.ns_ttp,"tickRate");return Mt===null?Ue!==null&&(Ot=Lt):(Se=/(\d+)/.exec(Mt))!==null?Ot=parseInt(Se[1]):ge(be,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:Lt,tickRate:Ot}}(i,S);this.effectiveFrameRate=H.effectiveFrameRate,this.tickRate=H.tickRate,this.aspectRatio=function(Ce,be){var Se=Fe(Ce,t.ns_ittp,"aspectRatio");Se===null&&(Se=Fe(Ce,t.ns_ttp,"displayAspectRatio"));var Ue=null;if(Se!==null){var ze=/(\d+)\s+(\d+)/.exec(Se);if(ze!==null){var It=parseInt(ze[1]),nt=parseInt(ze[2]);It!==0&&nt!==0?Ue=It/nt:he(be,"Illegal aspectRatio values (ignoring)")}else he(be,"Malformed aspectRatio attribute (ignoring)")}return Ue}(i,S);var Te=Fe(i,t.ns_ttp,"timeBase");Te!==null&&Te!=="media"&&Ye(S,"Unsupported time base");var Ge=function(Ce,be){var Se=Fe(Ce,t.ns_tts,"extent");if(Se===null)return null;var Ue=Se.split(" ");if(Ue.length!==2)return ge(be,"Malformed extent (ignoring)"),null;var ze=y.parseLength(Ue[0]),It=y.parseLength(Ue[1]);return It&&ze?{h:It,w:ze}:(ge(be,"Malformed extent values (ignoring)"),null)}(i,S);Ge===null?this.pxLength={h:null,w:null}:(Ge.h.unit==="px"&&Ge.w.unit==="px"||Ye(S,"Extent on TT must be in px or absent"),this.pxLength={h:new y.ComputedLength(0,1/Ge.h.value),w:new y.ComputedLength(1/Ge.w.value,0)}),this.dimensions={h:new y.ComputedLength(0,1),w:new y.ComputedLength(1,0)},this.lang=v},E.prototype._registerEvent=function(i){if(!(i.end<=i.begin)){var v=f(this.events,i.begin);if(v.found||this.events.splice(v.index,0,i.begin),i.end!==Number.POSITIVE_INFINITY){var S=f(this.events,i.end);S.found||this.events.splice(S.index,0,i.end)}}},E.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},E.prototype.getMediaTimeEvents=function(){return this.events},d.prototype.initFromNode=function(i,v){this.id=Ke(i),this.styleAttrs=ve(i,v),this.styleRefs=tt(i)},C.prototype.initFromNode=function(i,v){for(var S in this.styleAttrs={},i.attributes)if(i.attributes[S].uri===t.ns_itts||i.attributes[S].uri===t.ns_ebutts||i.attributes[S].uri===t.ns_tts){var W=i.attributes[S].uri+" "+i.attributes[S].local;this.styleAttrs[W]=i.attributes[S].value}},k.prototype.initFromNode=function(i,v,S,W,H){this.src="src"in S.attributes?S.attributes.src.value:null,this.src||he(H,"Invalid image@src attribute"),this.type="type"in S.attributes?S.attributes.type.value:null,this.type||he(H,"Invalid image@type attribute"),z.prototype.initFromNode.call(this,i,v,S,H),ee.prototype.initFromNode.call(this,i,v,S,H),te.prototype.initFromNode.call(this,i,v,S,H),O.prototype.initFromNode.call(this,i,v,S,H),this.lang=W},ne.prototype.initFromNode=function(i,v,S,W){this.id=Ke(S)},O.prototype.initFromNode=function(i,v,S,W){this.regionID=function(H){return H&&"region"in H.attributes?H.attributes.region.value:""}(S)},z.prototype.initFromNode=function(i,v,S,W){this.styleAttrs=ve(S,W),i.head!==null&&i.head.styling!==null&&qe(i.head.styling,tt(S),this.styleAttrs,W)},te.prototype.initFromNode=function(i,v,S,W){this.sets=[]},V.prototype.initFromNode=function(i,v,S,W){this.contents=[]},ee.prototype.initFromNode=function(i,v,S,W){var H=function(Te,Ge,Ce,be){var Se=null;Ce&&"begin"in Ce.attributes&&(Se=pt(Te.tickRate,Te.effectiveFrameRate,Ce.attributes.begin.value))===null&&ge(be,"Malformed begin value "+Ce.attributes.begin.value+" (using 0)");var Ue=null;Ce&&"dur"in Ce.attributes&&(Ue=pt(Te.tickRate,Te.effectiveFrameRate,Ce.attributes.dur.value))===null&&ge(be,"Malformed dur value "+Ce.attributes.dur.value+" (ignoring)");var ze=null;return Ce&&"end"in Ce.attributes&&(ze=pt(Te.tickRate,Te.effectiveFrameRate,Ce.attributes.end.value))===null&&ge(be,"Malformed end value (ignoring)"),{explicit_begin:Se,explicit_end:ze,explicit_dur:Ue}}(i,0,S,W);this.explicit_begin=H.explicit_begin,this.explicit_end=H.explicit_end,this.explicit_dur=H.explicit_dur,this.timeContainer=function(Te,Ge){var Ce=Te&&"timeContainer"in Te.attributes?Te.attributes.timeContainer.value:null;return Ce&&Ce!=="par"?Ce==="seq"?"seq":(he(Ge,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(S,W)},ce.prototype.initFromNode=function(i,v,S,W){z.prototype.initFromNode.call(this,i,null,v,W),ee.prototype.initFromNode.call(this,i,null,v,W),te.prototype.initFromNode.call(this,i,null,v,W),O.prototype.initFromNode.call(this,i,null,v,W),V.prototype.initFromNode.call(this,i,null,v,W),this.lang=S},Ee.prototype.initFromNode=function(i,v,S,W,H){z.prototype.initFromNode.call(this,i,v,S,H),ee.prototype.initFromNode.call(this,i,v,S,H),te.prototype.initFromNode.call(this,i,v,S,H),O.prototype.initFromNode.call(this,i,v,S,H),V.prototype.initFromNode.call(this,i,v,S,H),this.lang=W},$.prototype.initFromNode=function(i,v,S,W,H){z.prototype.initFromNode.call(this,i,v,S,H),ee.prototype.initFromNode.call(this,i,v,S,H),te.prototype.initFromNode.call(this,i,v,S,H),O.prototype.initFromNode.call(this,i,v,S,H),V.prototype.initFromNode.call(this,i,v,S,H),this.lang=W},Ie.prototype.initFromNode=function(i,v,S,W,H,Te){z.prototype.initFromNode.call(this,i,v,S,Te),ee.prototype.initFromNode.call(this,i,v,S,Te),te.prototype.initFromNode.call(this,i,v,S,Te),O.prototype.initFromNode.call(this,i,v,S,Te),V.prototype.initFromNode.call(this,i,v,S,Te),this.space=H,this.lang=W},Ze.prototype.initFromText=function(i,v,S,W,H,Te){ee.prototype.initFromNode.call(this,i,v,null,Te),this.text=S,this.space=H,this.lang=W},Ve.prototype.initFromNode=function(i,v,S,W,H){O.prototype.initFromNode.call(this,i,v,S,H),ee.prototype.initFromNode.call(this,i,v,S,H),this.lang=W},ye.prototype.createDefaultRegion=function(i){var v=new ye;return ne.call(v,""),z.call(v,{}),te.call(v,[]),ee.call(v,0,Number.POSITIVE_INFINITY,null),this.lang=i,v},ye.prototype.initFromNode=function(i,v,S,W){ne.prototype.initFromNode.call(this,i,null,v,W),ee.prototype.initFromNode.call(this,i,null,v,W),te.prototype.initFromNode.call(this,i,null,v,W),this.styleAttrs=ve(v,W),this.styleRefs=tt(v),this.lang=S},ke.prototype.initFromNode=function(i,v,S,W){ee.prototype.initFromNode.call(this,i,v,S,W);var H=ve(S,W);for(var Te in this.qname=null,this.value=null,H)if(H.hasOwnProperty(Te)){if(this.qname){he(W,"More than one style specified on set");break}this.qname=Te,this.value=H[Te]}}})(Re,typeof sax>"u"?D(5378):sax,typeof imscNames>"u"?D(210):imscNames,typeof imscStyles>"u"?D(6811):imscStyles,typeof imscUtils>"u"?D(5926):imscUtils)},506:function(et,Re,D){var oe=/firefox/i.test(navigator.userAgent);(function(T,t,e){function y(V,ee,ce,Ee){var $;if(ce.kind==="region")($=document.createElement("div")).style.position="absolute";else if(ce.kind==="body")$=document.createElement("div");else if(ce.kind==="div")$=document.createElement("div");else if(ce.kind==="image"){if($=document.createElement("img"),V.imgResolver!==null&&ce.src!==null){var Ie=V.imgResolver(ce.src,$);Ie&&($.src=Ie),$.height=V.regionH,$.width=V.regionW}}else if(ce.kind==="p")$=document.createElement("p");else if(ce.kind==="span")if(ce.styleAttrs[e.byName.ruby.qname]==="container")$=document.createElement("ruby"),V.ruby=!0;else if(ce.styleAttrs[e.byName.ruby.qname]==="base")$=document.createElement("span");else if(ce.styleAttrs[e.byName.ruby.qname]==="text")$=document.createElement("rt");else if(ce.styleAttrs[e.byName.ruby.qname]==="baseContainer")$=document.createElement("rbc");else if(ce.styleAttrs[e.byName.ruby.qname]==="textContainer")$=document.createElement("rtc");else{if(ce.styleAttrs[e.byName.ruby.qname]==="delimiter")return;$=document.createElement("span")}else ce.kind==="br"&&($=document.createElement("br"));if($){if(ce.lang&&(ce.kind!=="region"&&ce.lang===Ee.lang||($.lang=ce.lang)),ee.appendChild($),$.style.margin="0",ce.kind==="region"){var Ze=ce.styleAttrs[e.byName.writingMode.qname];Ze==="lrtb"||Ze==="lr"?(V.ipd="lr",V.bpd="tb"):Ze==="rltb"||Ze==="rl"?(V.ipd="rl",V.bpd="tb"):Ze==="tblr"?(V.ipd="tb",V.bpd="lr"):Ze!=="tbrl"&&Ze!=="tb"||(V.ipd="tb",V.bpd="rl")}else if(ce.kind==="p"&&V.bpd==="tb"){var Ve=ce.styleAttrs[e.byName.direction.qname];V.ipd=Ve==="ltr"?"lr":"rl"}for(var ye=0;ye<C.length;ye++){var ke=C[ye],Ke=ce.styleAttrs[ke.qname];Ke!==void 0&&ke.map!==null&&ke.map(V,$,ce,Ke)}var tt=$,ve=ce.styleAttrs[e.byName.linePadding.qname];if(ve&&!ve.isZero()){var Fe=ve.toUsedLength(V.w,V.h);if(Fe>0){var pt=Math.ceil(Fe)+"px";V.bpd==="tb"?(tt.style.paddingLeft=pt,tt.style.paddingRight=pt):(tt.style.paddingTop=pt,tt.style.paddingBottom=pt),V.lp=ve}}var ft=ce.styleAttrs[e.byName.multiRowAlign.qname];if(ft&&ft!=="auto"){var qe=document.createElement("span");qe.style.display="inline-block",qe.style.textAlign=ft,$.appendChild(qe),tt=qe,V.mra=ft}var Je=ce.styleAttrs[e.byName.rubyReserve.qname];if(Je&&Je[0]!=="none"&&(V.rubyReserve=Je),ce.styleAttrs[e.byName.fillLineGap.qname]&&(V.flg=!0),ce.kind==="span"&&ce.text){var ge=ce.styleAttrs[e.byName.textEmphasis.qname];if(ge&&ge.style!=="none"&&(V.textEmphasis=!0),e.byName.textCombine.qname in ce.styleAttrs&&ce.styleAttrs[e.byName.textCombine.qname]==="all")$.textContent=ce.text,$._isd_element=ce,ge&&c(V,$,0,ge);else for(var he="",Ye=0;Ye<ce.text.length;Ye++){he+=ce.text.charAt(Ye);var f=ce.text.charCodeAt(Ye);if(f<55296||f>56319||Ye===ce.text.length-1){var i=document.createElement("span");i.textContent=he,ge&&c(V,i,0,ge),$.appendChild(i),he="",i._isd_element=ce}}}if("contents"in ce)for(var v=0;v<ce.contents.length;v++)y(V,tt,ce.contents[v],ce);var S=[];if(ce.kind==="p"&&(n(V,tt,S,null),V.rubyReserve&&(function(Ce,be){for(var Se=0;Se<Ce.length;Se++){var Ue,ze,It=document.createElement("ruby"),nt=document.createElement("span");nt.textContent="",It.appendChild(nt);var Lt,Ot=be.rubyReserve[1].toUsedLength(be.w,be.h)+"px";be.rubyReserve[0]==="both"||be.rubyReserve[0]==="outside"&&Ce.length==1?((Ue=document.createElement("rtc")).style[ne]=x?"after":"under",Ue.textContent="",Ue.style.fontSize=Ot,(ze=document.createElement("rtc")).style[ne]=x?"before":"over",ze.textContent="",ze.style.fontSize=Ot,It.appendChild(Ue),It.appendChild(ze)):((Ue=document.createElement("rtc")).textContent="",Ue.style.fontSize=Ot,Lt=be.rubyReserve[0]==="after"||be.rubyReserve[0]==="outside"&&Se>0?x?"after":be.bpd==="tb"||be.bpd==="rl"?"under":"over":x?"before":be.bpd==="tb"||be.bpd==="rl"?"over":"under",Ue.style[ne]=Lt,It.appendChild(Ue));for(var Mt=null,Jt=0;Jt<Ce[Se].rbc.length;Jt++)if(Ce[Se].rbc[Jt].localName==="ruby"){Mt=Ce[Se].rbc[Jt];for(var dn=0;dn<Mt.style.length;dn++)It.style.setProperty(Mt.style.item(dn),Mt.style.getPropertyValue(Mt.style.item(dn)));break}(Mt=Mt||Ce[Se].elements[0].node).parentElement.insertBefore(It,Mt)}}(S,V),V.rubyReserve=null),(V.ruby||V.rubyReserve)&&(function(Ce,be){for(var Se=0;Se<Ce.length;Se++)for(var Ue=0;Ue<Ce[Se].rbc.length;Ue++){var ze;Ce[Se].rbc[Ue].style[ne]||(ze=x?Se===0?"before":"after":be.bpd==="tb"||be.bpd==="rl"?Se===0?"over":"under":Se===0?"under":"over",Ce[Se].rbc[Ue].style[ne]=ze)}}(S,V),V.ruby=null),V.textEmphasis&&(function(Ce,be){for(var Se=0;Se<Ce.length;Se++)for(var Ue=0;Ue<Ce[Se].te.length;Ue++){var ze;Ce[Se].te[Ue].style[z]&&Ce[Se].te[Ue].style[z]!=="none"||(ze=be.bpd==="tb"?Se===0?"left over":"left under":be.bpd==="rl"?Se===0?"right under":"left under":Se===0?"left under":"right under",Ce[Se].te[Ue].style[z]=ze)}}(S,V),V.textEmphasis=null),V.mra&&(function(Ce){for(var be=0;be<Ce.length-1;be++){var Se=Ce[be].elements.length;if(Se!==0&&Ce[be].br===!1){var Ue=document.createElement("br"),ze=Ce[be].elements[Se-1].node;ze.parentElement.insertBefore(Ue,ze.nextSibling)}}}(S),V.mra=null),V.lp&&(function(Ce,be,Se){if(Ce!==null)for(var Ue=0;Ue<Ce.length;Ue++){var ze=Ce[Ue].elements.length,It=Math.ceil(be)+"px",nt="-"+Math.ceil(be)+"px";if(ze!==0){var Lt=Ce[Ue].elements[Ce[Ue].start_elem],Ot=Ce[Ue].elements[Ce[Ue].end_elem];if(Lt===Ot){var Mt=Lt.node.getBoundingClientRect();if(Mt.width==0||Mt.height==0)continue}Se.ipd==="lr"?(Lt.node.style.marginLeft=nt,Lt.node.style.paddingLeft=It):Se.ipd==="rl"?(Lt.node.style.paddingRight=It,Lt.node.style.marginRight=nt):Se.ipd==="tb"&&(Lt.node.style.paddingTop=It,Lt.node.style.marginTop=nt),Se.ipd==="lr"?(oe||(Ot.node.style.marginRight=nt),Ot.node.style.paddingRight=It):Se.ipd==="rl"?(Ot.node.style.paddingLeft=It,oe||(Ot.node.style.marginLeft=nt)):Se.ipd==="tb"&&(Ot.node.style.paddingBottom=It,Ot.node.style.marginBottom=nt)}}}(S,V.lp.toUsedLength(V.w,V.h),V),V.lp=null),function(Ce,be){for(var Se=0;Se<Ce.length;Se++)for(var Ue=Ce[Se],ze=1;ze<Ue.elements.length;){var It=Ue.elements[ze-1],nt=Ue.elements[ze];u(It.node,nt.node,be)?Ue.elements.splice(ze,1):ze++}for(var Lt,Ot,Mt=[],Jt=0;Jt<Ce.length;Jt++)for(var dn=0;dn<Ce[Jt].elements.length;dn++)(Ot=p(Lt=Ce[Jt].elements[dn].node,Mt,!1))&&(Lt.style.backgroundColor=Ot);for(var pn=0;pn<Mt.length;pn++)Mt[pn].style.backgroundColor=""}(S,V),V.flg)){var W=E(tt.getBoundingClientRect(),V);(function(Ce,be,Se,Ue,ze){for(var It=Math.sign(Se-be),nt=0;nt<=Ce.length;nt++){var Lt,Ot,Mt,Jt;if(Lt=nt===0?Math.round(be):nt===Ce.length?Math.round(Se):Math.round((Ce[nt-1].after+Ce[nt].before)/2),nt>0&&Ce[nt-1])for(Mt=0;Mt<Ce[nt-1].elements.length;Mt++)Ot=It*(Lt-(Jt=Ce[nt-1].elements[Mt]).after)+"px",Ue.bpd==="lr"?Jt.node.style.paddingRight=Ot:Ue.bpd==="rl"?Jt.node.style.paddingLeft=Ot:Ue.bpd==="tb"&&(Jt.node.style.paddingBottom=Ot);if(nt<Ce.length)for(Mt=0;Mt<Ce[nt].elements.length;Mt++)Ot=It*((Jt=Ce[nt].elements[Mt]).before-Lt)+"px",Ue.bpd==="lr"?Jt.node.style.paddingLeft=Ot:Ue.bpd==="rl"?Jt.node.style.paddingRight=Ot:Ue.bpd==="tb"&&(Jt.node.style.paddingTop=Ot)}})(S,W.before,W.after,V),V.flg=null}if(ce.kind==="region"&&V.bpd==="tb"&&V.enableRollUp&&ce.contents.length>0&&ce.styleAttrs[e.byName.displayAlign.qname]==="after"){n(V,tt,S,null);var H=new h(ce.id===""?"_":ce.id,S);if(V.currentISDState[H.id]=H,V.previousISDState&&H.id in V.previousISDState&&V.previousISDState[H.id].plist.length>0&&H.plist.length>1&&H.plist[H.plist.length-2].text===V.previousISDState[H.id].plist[V.previousISDState[H.id].plist.length-1].text){var Te=$.firstElementChild,Ge=H.plist[H.plist.length-1].after-H.plist[H.plist.length-1].before;Te.style.bottom="-"+Ge+"px",Te.style.transition="transform 0.4s",Te.style.position="relative",Te.style.transform="translateY(-"+Ge+"px)"}}}else te(V.errorHandler,"Error processing ISD element kind: "+ce.kind)}function p(V,ee,ce){return V.style.backgroundColor?(ce&&!ee.includes(V)&&ee.push(V),V.style.backgroundColor):V.parentElement.nodeName==="SPAN"||V.parentElement.nodeName==="RUBY"||V.parentElement.nodeName==="RBC"||V.parentElement.nodeName==="RTC"||V.parentElement.nodeName==="RT"?p(V.parentElement,ee,!0):void 0}function u(V,ee,ce){if(V.tagName==="SPAN"&&ee.tagName==="SPAN"&&V._isd_element===ee._isd_element){if(!V._isd_element)return te(ce.errorHandler,"Internal error: HTML span is not linked to a source element; cannot merge spans."),!1;V.textContent+=ee.textContent;for(var Ee=0;Ee<ee.style.length;Ee++){var $=ee.style[Ee];($.indexOf("border")>=0||$.indexOf("padding")>=0||$.indexOf("margin")>=0)&&(V.style[$]=ee.style[$])}return ee.parentElement.removeChild(ee),!0}return!1}function h(V,ee){this.id=V,this.plist=ee}function E(V,ee){var ce={before:null,after:null,start:null,end:null};return ee.bpd==="tb"?(ce.before=V.top,ce.after=V.bottom,ee.ipd==="lr"?(ce.start=V.left,ce.end=V.right):(ce.start=V.right,ce.end=V.left)):ee.bpd==="lr"?(ce.before=V.left,ce.after=V.right,ce.start=V.top,ce.end=V.bottom):ee.bpd==="rl"&&(ce.before=V.right,ce.after=V.left,ce.start=V.top,ce.end=V.bottom),ce}function n(V,ee,ce,Ee){if(ee.localName!=="rt"&&ee.localName!=="rtc"){var $,Ie,Ze,Ve,ye=ee.style.backgroundColor||Ee;if(ee.childElementCount===0)if(ee.localName==="span"||ee.localName==="rb"){var ke=E(ee.getBoundingClientRect(),V);if(ce.length!==0&&($=ke.before,Ie=ke.after,Ze=ce[ce.length-1].before,Ie<(Ve=ce[ce.length-1].after)&&$>Ze||Ve<=Ie&&Ze>=$)){var Ke=Math.sign(ke.after-ke.before),tt=Math.sign(ke.end-ke.start);Ke*(ke.before-ce[ce.length-1].before)<0&&(ce[ce.length-1].before=ke.before),Ke*(ke.after-ce[ce.length-1].after)>0&&(ce[ce.length-1].after=ke.after),tt*(ke.start-ce[ce.length-1].start)<0&&(ce[ce.length-1].start=ke.start,ce[ce.length-1].start_elem=ce[ce.length-1].elements.length),tt*(ke.end-ce[ce.length-1].end)>0&&(ce[ce.length-1].end=ke.end,ce[ce.length-1].end_elem=ce[ce.length-1].elements.length)}else ce.push({before:ke.before,after:ke.after,start:ke.start,end:ke.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1});ce[ce.length-1].text+=ee.textContent,ce[ce.length-1].elements.push({node:ee,bgcolor:ye,before:ke.before,after:ke.after})}else ee.localName==="br"&&ce.length!==0&&(ce[ce.length-1].br=!0);else for(var ve=ee.firstChild;ve;)ve.nodeType===Node.ELEMENT_NODE&&(n(V,ve,ce,ye),ve.localName==="ruby"||ve.localName==="rtc"?ce.length>0&&ce[ce.length-1].rbc.push(ve):ve.localName==="span"&&ve.style[O]&&ve.style[O]!=="none"&&ce.length>0&&ce[ce.length-1].te.push(ve)),ve=ve.nextSibling}}function c(V,ee,ce,Ee){var $;Ee.style!=="none"&&(Ee.style==="auto"?ee.style[O]="filled":ee.style[O]=Ee.style+" "+Ee.symbol,(Ee.position==="before"||Ee.position==="after")&&($=V.bpd==="tb"?Ee.position==="before"?"left over":"left under":V.bpd==="rl"?Ee.position==="before"?"right under":"left under":Ee.position==="before"?"left under":"right under",ee.style[z]=$))}function d(V,ee){this.qname=V,this.map=ee}T.render=function(V,ee,ce,Ee,$,Ie,Ze,Ve,ye){var ke=Ee||ee.clientHeight,Ke=$||ee.clientWidth;if(V.aspectRatio!==null){var tt=ke*V.aspectRatio;tt>Ke?ke=Math.round(Ke/V.aspectRatio):Ke=tt}var ve=document.createElement("div");ve.style.position="relative",ve.style.width=Ke+"px",ve.style.height=ke+"px",ve.style.margin="auto",ve.style.top=0,ve.style.bottom=0,ve.style.left=0,ve.style.right=0,ve.style.zIndex=0;var Fe={h:ke,w:Ke,regionH:null,regionW:null,imgResolver:ce,displayForcedOnlyMode:Ie||!1,isd:V,errorHandler:Ze,previousISDState:Ve,enableRollUp:ye||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};if(ee.appendChild(ve),"contents"in V)for(var pt=0;pt<V.contents.length;pt++)y(Fe,ve,V.contents[pt],V);return Fe.currentISDState};for(var C=[new d("http://www.w3.org/ns/ttml#styling backgroundColor",function(V,ee,ce,Ee){Ee[3]!==0&&(ee.style.backgroundColor="rgba("+Ee[0].toString()+","+Ee[1].toString()+","+Ee[2].toString()+","+(Ee[3]/255).toString()+")")}),new d("http://www.w3.org/ns/ttml#styling color",function(V,ee,ce,Ee){ee.style.color="rgba("+Ee[0].toString()+","+Ee[1].toString()+","+Ee[2].toString()+","+(Ee[3]/255).toString()+")"}),new d("http://www.w3.org/ns/ttml#styling direction",function(V,ee,ce,Ee){ee.style.direction=Ee}),new d("http://www.w3.org/ns/ttml#styling display",function(V,ee,ce,Ee){}),new d("http://www.w3.org/ns/ttml#styling displayAlign",function(V,ee,ce,Ee){ee.style.display="flex",ee.style.flexDirection="column",Ee==="before"?ee.style.justifyContent="flex-start":Ee==="center"?ee.style.justifyContent="center":Ee==="after"&&(ee.style.justifyContent="flex-end")}),new d("http://www.w3.org/ns/ttml#styling extent",function(V,ee,ce,Ee){V.regionH=Ee.h.toUsedLength(V.w,V.h),V.regionW=Ee.w.toUsedLength(V.w,V.h);var $=0,Ie=0,Ze=ce.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];Ze&&($=Ze[0].toUsedLength(V.w,V.h)+Ze[2].toUsedLength(V.w,V.h),Ie=Ze[1].toUsedLength(V.w,V.h)+Ze[3].toUsedLength(V.w,V.h)),ee.style.height=V.regionH-$+"px",ee.style.width=V.regionW-Ie+"px"}),new d("http://www.w3.org/ns/ttml#styling fontFamily",function(V,ee,ce,Ee){for(var $=[],Ie=0;Ie<Ee.length;Ie++)Ee[Ie]=Ee[Ie].trim(),Ee[Ie]==="monospaceSerif"?($.push("Courier New"),$.push('"Liberation Mono"'),$.push("Courier"),$.push("monospace")):Ee[Ie]==="proportionalSansSerif"?($.push("Arial"),$.push("Helvetica"),$.push('"Liberation Sans"'),$.push("sans-serif")):Ee[Ie]==="monospace"?$.push("monospace"):Ee[Ie]==="sansSerif"?$.push("sans-serif"):Ee[Ie]==="serif"?$.push("serif"):Ee[Ie]==="monospaceSansSerif"?($.push("Consolas"),$.push("monospace")):Ee[Ie]==="proportionalSerif"?$.push("serif"):$.push(Ee[Ie]);if($.length>0){for(var Ze=[$[0]],Ve=1;Ve<$.length;Ve++)Ze.indexOf($[Ve])==-1&&Ze.push($[Ve]);$=Ze}ee.style.fontFamily=$.join(",")}),new d("http://www.w3.org/ns/ttml#styling shear",function(V,ee,ce,Ee){if(Ee!==0){var $=-.9*Ee;V.bpd==="tb"?ee.style.transform="skewX("+$+"deg)":ee.style.transform="skewY("+$+"deg)"}}),new d("http://www.w3.org/ns/ttml#styling fontSize",function(V,ee,ce,Ee){ee.style.fontSize=Ee.toUsedLength(V.w,V.h)+"px"}),new d("http://www.w3.org/ns/ttml#styling fontStyle",function(V,ee,ce,Ee){ee.style.fontStyle=Ee}),new d("http://www.w3.org/ns/ttml#styling fontWeight",function(V,ee,ce,Ee){ee.style.fontWeight=Ee}),new d("http://www.w3.org/ns/ttml#styling lineHeight",function(V,ee,ce,Ee){ee.style.lineHeight=Ee==="normal"?"normal":Ee.toUsedLength(V.w,V.h)+"px"}),new d("http://www.w3.org/ns/ttml#styling opacity",function(V,ee,ce,Ee){ee.style.opacity=Ee}),new d("http://www.w3.org/ns/ttml#styling origin",function(V,ee,ce,Ee){ee.style.top=Ee.h.toUsedLength(V.w,V.h)+"px",ee.style.left=Ee.w.toUsedLength(V.w,V.h)+"px"}),new d("http://www.w3.org/ns/ttml#styling overflow",function(V,ee,ce,Ee){ee.style.overflow=Ee}),new d("http://www.w3.org/ns/ttml#styling padding",function(V,ee,ce,Ee){var $=[];$[0]=Ee[0].toUsedLength(V.w,V.h)+"px",$[1]=Ee[3].toUsedLength(V.w,V.h)+"px",$[2]=Ee[2].toUsedLength(V.w,V.h)+"px",$[3]=Ee[1].toUsedLength(V.w,V.h)+"px",ee.style.padding=$.join(" ")}),new d("http://www.w3.org/ns/ttml#styling position",function(V,ee,ce,Ee){ee.style.top=Ee.h.toUsedLength(V.w,V.h)+"px",ee.style.left=Ee.w.toUsedLength(V.w,V.h)+"px"}),new d("http://www.w3.org/ns/ttml#styling rubyAlign",function(V,ee,ce,Ee){ee.style.rubyAlign=Ee==="spaceAround"?"space-around":"center"}),new d("http://www.w3.org/ns/ttml#styling rubyPosition",function(V,ee,ce,Ee){var $;Ee!=="before"&&Ee!=="after"||($=x?Ee:V.bpd==="tb"||V.bpd==="rl"?Ee==="before"?"over":"under":Ee==="before"?"under":"over",ee.parentElement.style[ne]=$)}),new d("http://www.w3.org/ns/ttml#styling showBackground",null),new d("http://www.w3.org/ns/ttml#styling textAlign",function(V,ee,ce,Ee){var $;$=Ee==="start"?V.ipd==="rl"?"right":"left":Ee==="end"?V.ipd==="rl"?"left":"right":Ee,ee.style.textAlign=$}),new d("http://www.w3.org/ns/ttml#styling textDecoration",function(V,ee,ce,Ee){ee.style.textDecoration=Ee.join(" ").replace("lineThrough","line-through")}),new d("http://www.w3.org/ns/ttml#styling textOutline",function(V,ee,ce,Ee){}),new d("http://www.w3.org/ns/ttml#styling textShadow",function(V,ee,ce,Ee){var $=ce.styleAttrs[e.byName.textOutline.qname];if(Ee==="none"&&$==="none")ee.style.textShadow="";else{var Ie=[];if($!=="none"){var Ze="rgba("+$.color[0].toString()+","+$.color[1].toString()+","+$.color[2].toString()+","+($.color[3]/255).toString()+")";Ie.push("1px 1px 1px "+Ze),Ie.push("-1px 1px 1px "+Ze),Ie.push("1px -1px 1px "+Ze),Ie.push("-1px -1px 1px "+Ze)}if(Ee!=="none")for(var Ve=0;Ve<Ee.length;Ve++)Ie.push(Ee[Ve].x_off.toUsedLength(V.w,V.h)+"px "+Ee[Ve].y_off.toUsedLength(V.w,V.h)+"px "+Ee[Ve].b_radius.toUsedLength(V.w,V.h)+"px rgba("+Ee[Ve].color[0].toString()+","+Ee[Ve].color[1].toString()+","+Ee[Ve].color[2].toString()+","+(Ee[Ve].color[3]/255).toString()+")");ee.style.textShadow=Ie.join(",")}}),new d("http://www.w3.org/ns/ttml#styling textCombine",function(V,ee,ce,Ee){ee.style.textCombineUpright=Ee}),new d("http://www.w3.org/ns/ttml#styling textEmphasis",function(V,ee,ce,Ee){}),new d("http://www.w3.org/ns/ttml#styling unicodeBidi",function(V,ee,ce,Ee){var $;$=Ee==="bidiOverride"?"bidi-override":Ee,ee.style.unicodeBidi=$}),new d("http://www.w3.org/ns/ttml#styling visibility",function(V,ee,ce,Ee){ee.style.visibility=Ee}),new d("http://www.w3.org/ns/ttml#styling wrapOption",function(V,ee,ce,Ee){Ee==="wrap"?ce.space==="preserve"?ee.style.whiteSpace="pre-wrap":ee.style.whiteSpace="normal":ce.space==="preserve"?ee.style.whiteSpace="pre":ee.style.whiteSpace="noWrap"}),new d("http://www.w3.org/ns/ttml#styling writingMode",function(V,ee,ce,Ee){Ee==="lrtb"||Ee==="lr"||Ee==="rltb"||Ee==="rl"?ee.style.writingMode="horizontal-tb":Ee==="tblr"?ee.style.writingMode="vertical-lr":Ee!=="tbrl"&&Ee!=="tb"||(ee.style.writingMode="vertical-rl")}),new d("http://www.w3.org/ns/ttml#styling zIndex",function(V,ee,ce,Ee){ee.style.zIndex=Ee}),new d("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(V,ee,ce,Ee){V.displayForcedOnlyMode&&Ee===!1&&(ee.style.visibility="hidden")})],Z={},k=0;k<C.length;k++)Z[C[k].qname]=C[k];var x="webkitRubyPosition"in window.getComputedStyle(document.documentElement),ne=x?"webkitRubyPosition":"rubyPosition",O="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",z="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition";function te(V,ee){if(V&&V.error&&V.error(ee))throw ee}})(Re,typeof imscNames>"u"?D(210):imscNames,typeof imscStyles>"u"?D(6811):imscStyles,typeof imscUtils>"u"?D(5926):imscUtils)},4080:function(et,Re,D){(function(oe,T,t,e){oe.generateISD=function(d,C,Z){var k,x=new E(d),ne={},O={},z=d.head.styling.initials[t.byName.showBackground.qname],te=d.head.styling.initials[t.byName.backgroundColor.qname];for(var V in d.head.layout.regions)if(d.head.layout.regions.hasOwnProperty(V)){var ee=d.head.layout.regions[V],ce=ee.styleAttrs[t.byName.showBackground.qname]||z,Ee=ee.styleAttrs[t.byName.backgroundColor.qname]||te;O[ee.id]=(ce==="always"||ce===void 0)&&Ee!==void 0&&!(C<ee.begin||C>=ee.end)}for(var $ in d.body&&d.body.regionID&&(O[d.body.regionID]=!0),k=d.body!==null?function Ze(Ve,ye){if(ye.contents){var ke={};for(var Ke in ye)ye.hasOwnProperty(Ke)&&(ke[Ke]=ye[Ke]);return ke.contents=[],ye.contents.filter(function(tt){return!(Ve<tt.begin||Ve>=tt.end)}).forEach(function(tt){var ve=Ze(Ve,tt);ve.regionID&&(O[ve.regionID]=!0),ve!==null&&ke.contents.push(ve)}),ke}return ye}(C,d.body):null,O[""]!==void 0&&(O[""]=!0),O)if(O[$]){var Ie=p(d,C,d.head.layout.regions[$],k,null,"",d.head.layout.regions[$],Z,ne);Ie!==null&&x.contents.push(Ie.element)}return x};var y=[t.byName.color.qname,t.byName.textCombine.qname,t.byName.textDecoration.qname,t.byName.textEmphasis.qname,t.byName.textOutline.qname,t.byName.textShadow.qname];function p(d,C,Z,k,x,ne,O,z,te){if(C<O.begin||C>=O.end)return null;var V="regionID"in O&&O.regionID!==""?O.regionID:ne;if(x!==null&&V!==Z.id&&(!("contents"in O)||"contents"in O&&O.contents.length===0||V!==""))return null;var ee=new n(O);if("sets"in O)for(var ce=0;ce<O.sets.length;ce++)C<O.sets[ce].begin||C>=O.sets[ce].end||(ee.styleAttrs[O.sets[ce].qname]=O.sets[ce].value);var Ee={};for(var $ in ee.styleAttrs)if(ee.styleAttrs.hasOwnProperty($)&&(Ee[$]=!0,ee.kind==="region"&&$===t.byName.writingMode.qname&&!(t.byName.direction.qname in ee.styleAttrs))){var Ie=ee.styleAttrs[$];Ie==="lrtb"||Ie==="lr"?ee.styleAttrs[t.byName.direction.qname]="ltr":Ie!=="rltb"&&Ie!=="rl"||(ee.styleAttrs[t.byName.direction.qname]="rtl")}if(x!==null)for(var Ze=0;Ze<t.all.length;Ze++){var Ve=t.all[Ze];if(Ve.qname===t.byName.textDecoration.qname){var ye=x.styleAttrs[Ve.qname],ke=ee.styleAttrs[Ve.qname],Ke=[];ke===void 0?Ke=ye:ke.indexOf("none")===-1?((ke.indexOf("noUnderline")===-1&&ye.indexOf("underline")!==-1||ke.indexOf("underline")!==-1)&&Ke.push("underline"),(ke.indexOf("noLineThrough")===-1&&ye.indexOf("lineThrough")!==-1||ke.indexOf("lineThrough")!==-1)&&Ke.push("lineThrough"),(ke.indexOf("noOverline")===-1&&ye.indexOf("overline")!==-1||ke.indexOf("overline")!==-1)&&Ke.push("overline")):Ke.push("none"),ee.styleAttrs[Ve.qname]=Ke}else if(Ve.qname!==t.byName.fontSize.qname||Ve.qname in ee.styleAttrs||ee.kind!=="span"||ee.styleAttrs[t.byName.ruby.qname]!=="textContainer")if(Ve.qname!==t.byName.fontSize.qname||Ve.qname in ee.styleAttrs||ee.kind!=="span"||ee.styleAttrs[t.byName.ruby.qname]!=="text")Ve.inherit&&Ve.qname in x.styleAttrs&&!(Ve.qname in ee.styleAttrs)&&(ee.styleAttrs[Ve.qname]=x.styleAttrs[Ve.qname]);else{var tt=x.styleAttrs[t.byName.fontSize.qname];x.styleAttrs[t.byName.ruby.qname]==="textContainer"?ee.styleAttrs[Ve.qname]=tt:ee.styleAttrs[Ve.qname]=new e.ComputedLength(.5*tt.rw,.5*tt.rh)}else{var ve=x.styleAttrs[t.byName.fontSize.qname];ee.styleAttrs[Ve.qname]=new e.ComputedLength(.5*ve.rw,.5*ve.rh)}}for(var Fe=0;Fe<t.all.length;Fe++){var pt=t.all[Fe];if(!(pt.qname in ee.styleAttrs)&&!(pt.qname===t.byName.position.qname&&t.byName.origin.qname in ee.styleAttrs||pt.qname===t.byName.origin.qname&&t.byName.position.qname in ee.styleAttrs)){var ft=d.head.styling.initials[pt.qname]||pt.initial;if(ft!==null&&(ee.kind==="region"||pt.inherit===!1&&ft!==null)){var qe=pt.parse(ft);qe!==null?(ee.styleAttrs[pt.qname]=qe,Ee[pt.qname]=!0):c(z,"Invalid initial value for '"+pt.qname+"' on element '"+ee.kind)}}}for(var Je=0;Je<t.all.length;Je++){var ge=t.all[Je];if(ge.qname in Ee&&ge.compute!==null){var he=ge.compute(d,x,ee,ee.styleAttrs[ge.qname],te);he!==null?ee.styleAttrs[ge.qname]=he:(ee.styleAttrs[ge.qname]=ge.compute(d,x,ee,ge.parse(ge.initial),te),c(z,"Style '"+ge.qname+"' on element '"+ee.kind+"' cannot be computed"))}}if(ee.styleAttrs[t.byName.display.qname]==="none")return null;var Ye=null;x===null?Ye=k===null?[]:[k]:"contents"in O&&(Ye=O.contents);for(var f=0;Ye!==null&&f<Ye.length;f++){var i=p(d,C,Z,k,ee,V,Ye[f],z,te);i!==null&&ee.contents.push(i.element)}for(var v in ee.styleAttrs)if(ee.styleAttrs.hasOwnProperty(v)){var S=!1;if(ee.kind==="span"){var W=ee.styleAttrs[t.byName.ruby.qname];(S=(W==="container"||W==="textContainer"||W==="baseContainer")&&y.indexOf(v)!==-1)||(S=W!=="container"&&v===t.byName.rubyAlign.qname),S||(S=!(W==="textContainer"||W==="text")&&v===t.byName.rubyPosition.qname)}if(!S){var H=t.byQName[v];"applies"in H&&(S=H.applies.indexOf(ee.kind)===-1)}S&&delete ee.styleAttrs[v]}var Te=ee.styleAttrs[t.byName.ruby.qname];if(ee.kind==="p"||ee.kind==="span"&&(Te==="textContainer"||Te==="text")){var Ge=[];u(ee,Ge),function(Ce){for(var be,Se=0;Se<Ce.length;)if((be=Ce[Se]).kind!=="br"&&be.space!=="preserve"){var Ue=be.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(Ue)&&(Se===0||(ze=Ce[Se-1]).kind==="br"||/[\r\n\t ]$/.test(ze.text))&&(Ue=Ue.substring(1)),be.text=Ue,Ue.length===0?Ce.splice(Se,1):Se++}else Se++;var ze,It;for(Se=0;Se<Ce.length;Se++)(be=Ce[Se]).kind!=="br"&&be.space!=="preserve"?/[ ]$/.test(be.text)&&(Se===Ce.length-1||(It=Ce[Se+1]).kind==="br"||It.space==="preserve"&&/^[\r\n]/.test(It.text))&&(be.text=be.text.slice(0,-1)):Se++}(Ge),h(ee)}return ee.kind==="div"&&t.byName.backgroundImage.qname in ee.styleAttrs||ee.kind==="br"||ee.kind==="image"||"contents"in ee&&ee.contents.length>0||ee.kind==="span"&&ee.text!==null||ee.kind==="region"&&ee.styleAttrs[t.byName.showBackground.qname]==="always"?{region_id:V,element:ee}:null}function u(d,C){if("contents"in d)for(var Z=0;Z<d.contents.length;Z++){var k=d.contents[Z],x=k.styleAttrs[t.byName.ruby.qname];(k.kind!=="span"||x!=="textContainer"&&x!=="text")&&("contents"in k?u(k,C):(k.kind==="span"&&k.text.length!==0||k.kind==="br")&&C.push(k))}}function h(d){if(d.kind==="br")return!1;if("text"in d)return d.text.length===0;if("contents"in d){for(var C=d.contents.length;C--;)h(d.contents[C])&&d.contents.splice(C,1);return d.contents.length===0}}function E(d){this.contents=[],this.aspectRatio=d.aspectRatio,this.lang=d.lang}function n(d){for(var C in this.kind=d.kind||"region",this.lang=d.lang,d.id&&(this.id=d.id),this.styleAttrs={},d.styleAttrs)d.styleAttrs.hasOwnProperty(C)&&(this.styleAttrs[C]=d.styleAttrs[C]);"src"in d&&(this.src=d.src),"type"in d&&(this.type=d.type),"text"in d?this.text=d.text:(this.kind==="region"||"contents"in d)&&(this.contents=[]),"space"in d&&(this.space=d.space)}function c(d,C){if(d&&d.error&&d.error(C))throw C}})(Re,typeof imscNames>"u"?D(210):imscNames,typeof imscStyles>"u"?D(6811):imscStyles,typeof imscUtils>"u"?D(5926):imscUtils)},4403:function(et,Re,D){Re.generateISD=D(4080).generateISD,Re.fromXML=D(3362).fromXML,Re.renderHTML=D(506).render},210:function(et,Re){(function(D){D.ns_tt="http://www.w3.org/ns/ttml",D.ns_tts="http://www.w3.org/ns/ttml#styling",D.ns_ttp="http://www.w3.org/ns/ttml#parameter",D.ns_xml="http://www.w3.org/XML/1998/namespace",D.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",D.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",D.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",D.ns_ebutts="urn:ebu:tt:style"})(Re)},6811:function(et,Re,D){(function(oe,T,t){function e(u,h,E,n,c,d,C,Z){this.name=h,this.ns=u,this.qname=u+" "+h,this.inherit=c,this.animatable=d,this.initial=E,this.applies=n,this.parse=C,this.compute=Z}for(var y in oe.all=[new e(T.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,t.parseColor,null),new e(T.ns_tts,"color","white",["span"],!0,!0,t.parseColor,null),new e(T.ns_tts,"direction","ltr",["p","span"],!0,!0,function(u){return u},null),new e(T.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(u){return u},null),new e(T.ns_tts,"displayAlign","before",["region"],!1,!0,function(u){return u},null),new e(T.ns_tts,"extent","auto",["tt","region"],!1,!0,function(u){if(u==="auto")return u;var h=u.split(" ");if(h.length!==2)return null;var E=t.parseLength(h[0]),n=t.parseLength(h[1]);return n&&E?{h:n,w:E}:null},function(u,h,E,n,c){var d,C;if(n==="auto")d=new t.ComputedLength(0,1);else if((d=t.toComputedLength(n.h.value,n.h.unit,null,u.dimensions.h,null,u.pxLength.h))===null)return null;if(n==="auto")C=new t.ComputedLength(1,0);else if((C=t.toComputedLength(n.w.value,n.w.unit,null,u.dimensions.w,null,u.pxLength.w))===null)return null;return{h:d,w:C}}),new e(T.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(u){for(var h=u.split(","),E=[],n=0;n<h.length;n++)h[n].charAt(0)!=="'"&&h[n].charAt(0)!=='"'&&h[n]==="default"?E.push("monospaceSerif"):E.push(h[n]);return E},null),new e(T.ns_tts,"shear","0%",["p"],!0,!0,t.parseLength,function(u,h,E,n){return n.unit!=="%"?null:Math.abs(n.value)>100?100*Math.sign(n.value):n.value}),new e(T.ns_tts,"fontSize","1c",["span","p"],!0,!0,t.parseLength,function(u,h,E,n,c){return t.toComputedLength(n.value,n.unit,h!==null?h.styleAttrs[oe.byName.fontSize.qname]:u.cellLength.h,h!==null?h.styleAttrs[oe.byName.fontSize.qname]:u.cellLength.h,u.cellLength.h,u.pxLength.h)}),new e(T.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(u){return u},null),new e(T.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(u){return u},null),new e(T.ns_tts,"lineHeight","normal",["p"],!0,!0,function(u){return u==="normal"?u:t.parseLength(u)},function(u,h,E,n,c){var d;if(n==="normal")d=n;else if((d=t.toComputedLength(n.value,n.unit,E.styleAttrs[oe.byName.fontSize.qname],E.styleAttrs[oe.byName.fontSize.qname],u.cellLength.h,u.pxLength.h))===null)return null;return d}),new e(T.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new e(T.ns_tts,"origin","auto",["region"],!1,!0,function(u){if(u==="auto")return u;var h=u.split(" ");if(h.length!==2)return null;var E=t.parseLength(h[0]),n=t.parseLength(h[1]);return n&&E?{h:n,w:E}:null},function(u,h,E,n,c){var d,C;if(n==="auto")d=new t.ComputedLength(0,0);else if((d=t.toComputedLength(n.h.value,n.h.unit,null,u.dimensions.h,null,u.pxLength.h))===null)return null;if(n==="auto")C=new t.ComputedLength(0,0);else if((C=t.toComputedLength(n.w.value,n.w.unit,null,u.dimensions.w,null,u.pxLength.w))===null)return null;return{h:d,w:C}}),new e(T.ns_tts,"overflow","hidden",["region"],!1,!0,function(u){return u},null),new e(T.ns_tts,"padding","0px",["region"],!1,!0,function(u){var h=u.split(" ");if(h.length>4)return null;for(var E=[],n=0;n<h.length;n++){var c=t.parseLength(h[n]);if(!c)return null;E.push(c)}return E},function(u,h,E,n,c){var d;if(n.length===1)d=[n[0],n[0],n[0],n[0]];else if(n.length===2)d=[n[0],n[1],n[0],n[1]];else if(n.length===3)d=[n[0],n[1],n[2],n[1]];else{if(n.length!==4)return null;d=[n[0],n[1],n[2],n[3]]}var C=E.styleAttrs[oe.byName.writingMode.qname];if(C==="lrtb"||C==="lr")d=[d[0],d[3],d[2],d[1]];else if(C==="rltb"||C==="rl")d=[d[0],d[1],d[2],d[3]];else if(C==="tblr")d=[d[3],d[0],d[1],d[2]];else{if(C!=="tbrl"&&C!=="tb")return null;d=[d[3],d[2],d[1],d[0]]}for(var Z=[],k=0;k<d.length;k++)if(d[k].value===0)Z[k]=new t.ComputedLength(0,0);else if(Z[k]=t.toComputedLength(d[k].value,d[k].unit,E.styleAttrs[oe.byName.fontSize.qname],k===0||k===2?E.styleAttrs[oe.byName.extent.qname].h:E.styleAttrs[oe.byName.extent.qname].w,k===0||k===2?u.cellLength.h:u.cellLength.w,k===0||k===2?u.pxLength.h:u.pxLength.w),Z[k]===null)return null;return Z}),new e(T.ns_tts,"position","top left",["region"],!1,!0,function(u){return t.parsePosition(u)},function(u,h,E,n){var c,d;return(c=t.toComputedLength(n.v.offset.value,n.v.offset.unit,null,new t.ComputedLength(-E.styleAttrs[oe.byName.extent.qname].h.rw,u.dimensions.h.rh-E.styleAttrs[oe.byName.extent.qname].h.rh),null,u.pxLength.h))===null?null:(n.v.edge==="bottom"&&(c=new t.ComputedLength(-c.rw-E.styleAttrs[oe.byName.extent.qname].h.rw,u.dimensions.h.rh-c.rh-E.styleAttrs[oe.byName.extent.qname].h.rh)),d=t.toComputedLength(n.h.offset.value,n.h.offset.unit,null,new t.ComputedLength(u.dimensions.w.rw-E.styleAttrs[oe.byName.extent.qname].w.rw,-E.styleAttrs[oe.byName.extent.qname].w.rh),null,u.pxLength.w),c===null?null:(n.h.edge==="right"&&(d=new t.ComputedLength(u.dimensions.w.rw-d.rw-E.styleAttrs[oe.byName.extent.qname].w.rw,-d.rh-E.styleAttrs[oe.byName.extent.qname].w.rh)),{h:c,w:d}))}),new e(T.ns_tts,"ruby","none",["span"],!1,!0,function(u){return u},null),new e(T.ns_tts,"rubyAlign","center",["span"],!0,!0,function(u){return u!=="center"&&u!=="spaceAround"?null:u},null),new e(T.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(u){return u},null),new e(T.ns_tts,"rubyReserve","none",["p"],!0,!0,function(u){var h=u.split(" "),E=[null,null];if(h.length===0||h.length>2||h[0]!=="none"&&h[0]!=="both"&&h[0]!=="after"&&h[0]!=="before"&&h[0]!=="outside")return null;if(E[0]=h[0],h.length===2&&h[0]!=="none"){var n=t.parseLength(h[1]);if(!n)return null;E[1]=n}return E},function(u,h,E,n,c){if(n[0]==="none")return n;var d;return(d=n[1]===null?new t.ComputedLength(.5*E.styleAttrs[oe.byName.fontSize.qname].rw,.5*E.styleAttrs[oe.byName.fontSize.qname].rh):t.toComputedLength(n[1].value,n[1].unit,E.styleAttrs[oe.byName.fontSize.qname],E.styleAttrs[oe.byName.fontSize.qname],u.cellLength.h,u.pxLength.h))===null?null:[n[0],d]}),new e(T.ns_tts,"showBackground","always",["region"],!1,!0,function(u){return u},null),new e(T.ns_tts,"textAlign","start",["p"],!0,!0,function(u){return u},function(u,h,E,n,c){return n==="left"?"start":n==="right"?"end":n}),new e(T.ns_tts,"textCombine","none",["span"],!0,!0,function(u){return u==="none"||u==="all"?u:null},null),new e(T.ns_tts,"textDecoration","none",["span"],!0,!0,function(u){return u.split(" ")},null),new e(T.ns_tts,"textEmphasis","none",["span"],!0,!0,function(u){for(var h=u.split(" "),E={style:null,symbol:null,color:null,position:null},n=0;n<h.length;n++)if(h[n]==="none"||h[n]==="auto")E.style=h[n];else if(h[n]==="filled"||h[n]==="open")E.style=h[n];else if(h[n]==="circle"||h[n]==="dot"||h[n]==="sesame")E.symbol=h[n];else if(h[n]==="current")E.color=h[n];else if(h[n]==="outside"||h[n]==="before"||h[n]==="after")E.position=h[n];else if(E.color=t.parseColor(h[n]),E.color===null)return null;return E.style==null&&E.symbol==null?E.style="auto":(E.symbol=E.symbol||"circle",E.style=E.style||"filled"),E.position=E.position||"outside",E.color=E.color||"current",E},null),new e(T.ns_tts,"textOutline","none",["span"],!0,!0,function(u){if(u==="none")return u;var h={},E=u.split(" ");if(E.length===0||E.length>2)return null;var n=t.parseColor(E[0]);if(h.color=n,n!==null&&E.shift(),E.length!==1)return null;var c=t.parseLength(E[0]);return c?(h.thickness=c,h):null},function(u,h,E,n,c){if(n==="none")return n;var d={};return n.color===null?d.color=E.styleAttrs[oe.byName.color.qname]:d.color=n.color,d.thickness=t.toComputedLength(n.thickness.value,n.thickness.unit,E.styleAttrs[oe.byName.fontSize.qname],E.styleAttrs[oe.byName.fontSize.qname],u.cellLength.h,u.pxLength.h),d.thickness===null?null:d}),new e(T.ns_tts,"textShadow","none",["span"],!0,!0,t.parseTextShadow,function(u,h,E,n){if(n==="none")return n;for(var c=[],d=0;d<n.length;d++){var C={};if(C.x_off=t.toComputedLength(n[d][0].value,n[d][0].unit,null,E.styleAttrs[oe.byName.fontSize.qname],null,u.pxLength.w),C.x_off===null||(C.y_off=t.toComputedLength(n[d][1].value,n[d][1].unit,null,E.styleAttrs[oe.byName.fontSize.qname],null,u.pxLength.h),C.y_off===null))return null;if(n[d][2]===null)C.b_radius=0;else if(C.b_radius=t.toComputedLength(n[d][2].value,n[d][2].unit,null,E.styleAttrs[oe.byName.fontSize.qname],null,u.pxLength.h),C.b_radius===null)return null;n[d][3]===null?C.color=E.styleAttrs[oe.byName.color.qname]:C.color=n[d][3],c.push(C)}return c}),new e(T.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(u){return u},null),new e(T.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(u){return u},null),new e(T.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(u){return u},null),new e(T.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(u){return u},null),new e(T.ns_tts,"zIndex","auto",["region"],!1,!0,function(u){var h;return u==="auto"?h=u:(h=parseInt(u),isNaN(h)&&(h=null)),h},null),new e(T.ns_ebutts,"linePadding","0c",["p"],!0,!1,t.parseLength,function(u,h,E,n,c){return t.toComputedLength(n.value,n.unit,null,null,u.cellLength.w,null)}),new e(T.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(u){return u},null),new e(T.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(u){return u},null),new e(T.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(u){return u==="true"},null),new e(T.ns_itts,"fillLineGap","false",["p"],!0,!0,function(u){return u==="true"},null)],oe.byQName={},oe.all)oe.byQName[oe.all[y].qname]=oe.all[y];for(var p in oe.byName={},oe.all)oe.byName[oe.all[p].name]=oe.all[p]})(Re,typeof imscNames>"u"?D(210):imscNames,typeof imscUtils>"u"?D(5926):imscUtils)},5926:function(et,Re){(function(D){var oe=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,T=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,t=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,e={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};D.parseColor=function(p){var u,h=null,E=e[p.toLowerCase()];return E!==void 0?h=E:(u=oe.exec(p))!==null?h=[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16),u[4]!==void 0?parseInt(u[4],16):255]:(u=T.exec(p))!==null?h=[parseInt(u[1]),parseInt(u[2]),parseInt(u[3]),255]:(u=t.exec(p))!==null&&(h=[parseInt(u[1]),parseInt(u[2]),parseInt(u[3]),parseInt(u[4])]),h};var y=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;D.parseLength=function(p){var u,h=null;return(u=y.exec(p))!==null&&(h={value:parseFloat(u[1]),unit:u[2]}),h},D.parseTextShadow=function(p){for(var u=p.match(/([^\(,\)]|\([^\)]+\))+/g),h=[],E=0;E<u.length;E++){var n=u[E].split(" ");if(n.length===1&&n[0]==="none")return"none";if(n.length>1&&n.length<5){var c=[null,null,null,null],d=D.parseLength(n.shift());if(d===null||(c[0]=d,(d=D.parseLength(n.shift()))===null))return null;if(c[1]=d,n.length===0){h.push(c);continue}if((d=D.parseLength(n[0]))!==null&&(c[2]=d,n.shift()),n.length===0){h.push(c);continue}var C=D.parseColor(n[0]);if(C===null)return null;c[3]=C,h.push(c)}}return h},D.parsePosition=function(p){var u=p.split(" "),h=function(k){return k==="center"||k==="left"||k==="top"||k==="bottom"||k==="right"};if(u.length>4)return null;for(var E=0;E<u.length;E++)if(!h(u[E])){var n=D.parseLength(u[E]);if(n===null)return null;u[E]=n}for(var c={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},d=0;d<u.length;){var C=u[d++];if(h(C)){var Z={value:0,unit:"%"};u.length!==2&&d<u.length&&!h(u[d])&&(Z=u[d++]),C==="right"?(c.h.edge=C,c.h.offset=Z):C==="bottom"?(c.v.edge=C,c.v.offset=Z):C==="left"?c.h.offset=Z:C==="top"&&(c.v.offset=Z)}else{if(u.length!==1&&u.length!==2)return null;d===1?c.h.offset=C:c.v.offset=C}}return c},D.ComputedLength=function(p,u){this.rw=p,this.rh=u},D.ComputedLength.prototype.toUsedLength=function(p,u){return p*this.rw+u*this.rh},D.ComputedLength.prototype.isZero=function(){return this.rw===0&&this.rh===0},D.toComputedLength=function(p,u,h,E,n,c){return u==="%"&&E?new D.ComputedLength(E.rw*p/100,E.rh*p/100):u==="em"&&h?new D.ComputedLength(h.rw*p,h.rh*p):u==="c"&&n?new D.ComputedLength(p*n.rw,p*n.rh):u==="px"&&c?new D.ComputedLength(p*c.rw,p*c.rh):u==="rh"?new D.ComputedLength(0,p/100):u==="rw"?new D.ComputedLength(p/100,0):null}})(Re)},3516:function(et){et.exports=function(Re){var D=typeof Re=="string"?Re.charCodeAt(0):Re;return D>=97&&D<=122||D>=65&&D<=90}},2219:function(et,Re,D){var oe=D(3516),T=D(395);et.exports=function(t){return oe(t)||T(t)}},395:function(et){et.exports=function(Re){var D=typeof Re=="string"?Re.charCodeAt(0):Re;return D>=48&&D<=57}},3875:function(et){function Re(T){if(typeof T!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(T))}function D(T,t){for(var e,y="",p=0,u=-1,h=0,E=0;E<=T.length;++E){if(E<T.length)e=T.charCodeAt(E);else{if(e===47)break;e=47}if(e===47){if(!(u===E-1||h===1))if(u!==E-1&&h===2){if(y.length<2||p!==2||y.charCodeAt(y.length-1)!==46||y.charCodeAt(y.length-2)!==46){if(y.length>2){var n=y.lastIndexOf("/");if(n!==y.length-1){n===-1?(y="",p=0):p=(y=y.slice(0,n)).length-1-y.lastIndexOf("/"),u=E,h=0;continue}}else if(y.length===2||y.length===1){y="",p=0,u=E,h=0;continue}}t&&(y.length>0?y+="/..":y="..",p=2)}else y.length>0?y+="/"+T.slice(u+1,E):y=T.slice(u+1,E),p=E-u-1;u=E,h=0}else e===46&&h!==-1?++h:h=-1}return y}var oe={resolve:function(){for(var T,t="",e=!1,y=arguments.length-1;y>=-1&&!e;y--){var p;y>=0?p=arguments[y]:(T===void 0&&(T=process.cwd()),p=T),Re(p),p.length!==0&&(t=p+"/"+t,e=p.charCodeAt(0)===47)}return t=D(t,!e),e?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(T){if(Re(T),T.length===0)return".";var t=T.charCodeAt(0)===47,e=T.charCodeAt(T.length-1)===47;return(T=D(T,!t)).length!==0||t||(T="."),T.length>0&&e&&(T+="/"),t?"/"+T:T},isAbsolute:function(T){return Re(T),T.length>0&&T.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var T,t=0;t<arguments.length;++t){var e=arguments[t];Re(e),e.length>0&&(T===void 0?T=e:T+="/"+e)}return T===void 0?".":oe.normalize(T)},relative:function(T,t){if(Re(T),Re(t),T===t||(T=oe.resolve(T))===(t=oe.resolve(t)))return"";for(var e=1;e<T.length&&T.charCodeAt(e)===47;++e);for(var y=T.length,p=y-e,u=1;u<t.length&&t.charCodeAt(u)===47;++u);for(var h=t.length-u,E=p<h?p:h,n=-1,c=0;c<=E;++c){if(c===E){if(h>E){if(t.charCodeAt(u+c)===47)return t.slice(u+c+1);if(c===0)return t.slice(u+c)}else p>E&&(T.charCodeAt(e+c)===47?n=c:c===0&&(n=0));break}var d=T.charCodeAt(e+c);if(d!==t.charCodeAt(u+c))break;d===47&&(n=c)}var C="";for(c=e+n+1;c<=y;++c)c!==y&&T.charCodeAt(c)!==47||(C.length===0?C+="..":C+="/..");return C.length>0?C+t.slice(u+n):(u+=n,t.charCodeAt(u)===47&&++u,t.slice(u))},_makeLong:function(T){return T},dirname:function(T){if(Re(T),T.length===0)return".";for(var t=T.charCodeAt(0),e=t===47,y=-1,p=!0,u=T.length-1;u>=1;--u)if((t=T.charCodeAt(u))===47){if(!p){y=u;break}}else p=!1;return y===-1?e?"/":".":e&&y===1?"//":T.slice(0,y)},basename:function(T,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Re(T);var e,y=0,p=-1,u=!0;if(t!==void 0&&t.length>0&&t.length<=T.length){if(t.length===T.length&&t===T)return"";var h=t.length-1,E=-1;for(e=T.length-1;e>=0;--e){var n=T.charCodeAt(e);if(n===47){if(!u){y=e+1;break}}else E===-1&&(u=!1,E=e+1),h>=0&&(n===t.charCodeAt(h)?--h==-1&&(p=e):(h=-1,p=E))}return y===p?p=E:p===-1&&(p=T.length),T.slice(y,p)}for(e=T.length-1;e>=0;--e)if(T.charCodeAt(e)===47){if(!u){y=e+1;break}}else p===-1&&(u=!1,p=e+1);return p===-1?"":T.slice(y,p)},extname:function(T){Re(T);for(var t=-1,e=0,y=-1,p=!0,u=0,h=T.length-1;h>=0;--h){var E=T.charCodeAt(h);if(E!==47)y===-1&&(p=!1,y=h+1),E===46?t===-1?t=h:u!==1&&(u=1):t!==-1&&(u=-1);else if(!p){e=h+1;break}}return t===-1||y===-1||u===0||u===1&&t===y-1&&t===e+1?"":T.slice(t,y)},format:function(T){if(T===null||typeof T!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof T);return function(t,e){var y=e.dir||e.root,p=e.base||(e.name||"")+(e.ext||"");return y?y===e.root?y+p:y+"/"+p:p}(0,T)},parse:function(T){Re(T);var t={root:"",dir:"",base:"",ext:"",name:""};if(T.length===0)return t;var e,y=T.charCodeAt(0),p=y===47;p?(t.root="/",e=1):e=0;for(var u=-1,h=0,E=-1,n=!0,c=T.length-1,d=0;c>=e;--c)if((y=T.charCodeAt(c))!==47)E===-1&&(n=!1,E=c+1),y===46?u===-1?u=c:d!==1&&(d=1):u!==-1&&(d=-1);else if(!n){h=c+1;break}return u===-1||E===-1||d===0||d===1&&u===E-1&&u===h+1?E!==-1&&(t.base=t.name=h===0&&p?T.slice(1,E):T.slice(h,E)):(h===0&&p?(t.name=T.slice(1,u),t.base=T.slice(1,E)):(t.name=T.slice(h,u),t.base=T.slice(h,E)),t.ext=T.slice(u,E)),h>0?t.dir=T.slice(0,h-1):p&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};oe.posix=oe,et.exports=oe},8387:function(et,Re,D){var oe=D(1549),T=oe.Buffer;function t(y,p){for(var u in y)p[u]=y[u]}function e(y,p,u){return T(y,p,u)}T.from&&T.alloc&&T.allocUnsafe&&T.allocUnsafeSlow?et.exports=oe:(t(oe,Re),Re.Buffer=e),t(T,e),e.from=function(y,p,u){if(typeof y=="number")throw new TypeError("Argument must not be a number");return T(y,p,u)},e.alloc=function(y,p,u){if(typeof y!="number")throw new TypeError("Argument must be a number");var h=T(y);return p!==void 0?typeof u=="string"?h.fill(p,u):h.fill(p):h.fill(0),h},e.allocUnsafe=function(y){if(typeof y!="number")throw new TypeError("Argument must be a number");return T(y)},e.allocUnsafeSlow=function(y){if(typeof y!="number")throw new TypeError("Argument must be a number");return oe.SlowBuffer(y)}},5378:function(et,Re,D){(function(oe){oe.parser=function(f,i){return new e(f,i)},oe.SAXParser=e,oe.SAXStream=p,oe.createStream=function(f,i){return new p(f,i)},oe.MAX_BUFFER_LENGTH=65536;var T,t=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function e(f,i){if(!(this instanceof e))return new e(f,i);var v=this;(function(S){for(var W=0,H=t.length;W<H;W++)S[t[W]]=""})(v),v.q=v.c="",v.bufferCheckPosition=oe.MAX_BUFFER_LENGTH,v.opt=i||{},v.opt.lowercase=v.opt.lowercase||v.opt.lowercasetags,v.looseCase=v.opt.lowercase?"toLowerCase":"toUpperCase",v.tags=[],v.closed=v.closedRoot=v.sawRoot=!1,v.tag=v.error=null,v.strict=!!f,v.noscript=!(!f&&!v.opt.noscript),v.state=$.BEGIN,v.strictEntities=v.opt.strictEntities,v.ENTITIES=v.strictEntities?Object.create(oe.XML_ENTITIES):Object.create(oe.ENTITIES),v.attribList=[],v.opt.xmlns&&(v.ns=Object.create(Z)),v.trackPosition=v.opt.position!==!1,v.trackPosition&&(v.position=v.line=v.column=0),Ze(v,"onready")}oe.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(f){function i(){}return i.prototype=f,new i}),Object.keys||(Object.keys=function(f){var i=[];for(var v in f)f.hasOwnProperty(v)&&i.push(v);return i}),e.prototype={end:function(){tt(this)},write:function(f){var i=this;if(this.error)throw this.error;if(i.closed)return Ke(i,"Cannot write after close. Assign an onready handler.");if(f===null)return tt(i);typeof f=="object"&&(f=f.toString());for(var v=0,S="";S=Ye(f,v++),i.c=S,S;)switch(i.trackPosition&&(i.position++,S===`
`?(i.line++,i.column=0):i.column++),i.state){case $.BEGIN:if(i.state=$.BEGIN_WHITESPACE,S==="\uFEFF")continue;he(i,S);continue;case $.BEGIN_WHITESPACE:he(i,S);continue;case $.TEXT:if(i.sawRoot&&!i.closedRoot){for(var W=v-1;S&&S!=="<"&&S!=="&";)(S=Ye(f,v++))&&i.trackPosition&&(i.position++,S===`
`?(i.line++,i.column=0):i.column++);i.textNode+=f.substring(W,v-1)}S!=="<"||i.sawRoot&&i.closedRoot&&!i.strict?(!V(u,S)||i.sawRoot&&!i.closedRoot||ve(i,"Text data outside of root node."),S==="&"?i.state=$.TEXT_ENTITY:i.textNode+=S):(i.state=$.OPEN_WAKA,i.startTagPosition=i.position);continue;case $.SCRIPT:S==="<"?i.state=$.SCRIPT_ENDING:i.script+=S;continue;case $.SCRIPT_ENDING:S==="/"?i.state=$.CLOSE_TAG:(i.script+="<"+S,i.state=$.SCRIPT);continue;case $.OPEN_WAKA:if(S==="!")i.state=$.SGML_DECL,i.sgmlDecl="";else if(!te(u,S))if(te(k,S))i.state=$.OPEN_TAG,i.tagName=S;else if(S==="/")i.state=$.CLOSE_TAG,i.tagName="";else if(S==="?")i.state=$.PROC_INST,i.procInstName=i.procInstBody="";else{if(ve(i,"Unencoded <"),i.startTagPosition+1<i.position){var H=i.position-i.startTagPosition;S=new Array(H).join(" ")+S}i.textNode+="<"+S,i.state=$.TEXT}continue;case $.SGML_DECL:(i.sgmlDecl+S).toUpperCase()==="[CDATA["?(Ve(i,"onopencdata"),i.state=$.CDATA,i.sgmlDecl="",i.cdata=""):i.sgmlDecl+S==="--"?(i.state=$.COMMENT,i.comment="",i.sgmlDecl=""):(i.sgmlDecl+S).toUpperCase()==="DOCTYPE"?(i.state=$.DOCTYPE,(i.doctype||i.sawRoot)&&ve(i,"Inappropriately located doctype declaration"),i.doctype="",i.sgmlDecl=""):S===">"?(Ve(i,"onsgmldeclaration",i.sgmlDecl),i.sgmlDecl="",i.state=$.TEXT):(te(n,S)&&(i.state=$.SGML_DECL_QUOTED),i.sgmlDecl+=S);continue;case $.SGML_DECL_QUOTED:S===i.q&&(i.state=$.SGML_DECL,i.q=""),i.sgmlDecl+=S;continue;case $.DOCTYPE:S===">"?(i.state=$.TEXT,Ve(i,"ondoctype",i.doctype),i.doctype=!0):(i.doctype+=S,S==="["?i.state=$.DOCTYPE_DTD:te(n,S)&&(i.state=$.DOCTYPE_QUOTED,i.q=S));continue;case $.DOCTYPE_QUOTED:i.doctype+=S,S===i.q&&(i.q="",i.state=$.DOCTYPE);continue;case $.DOCTYPE_DTD:i.doctype+=S,S==="]"?i.state=$.DOCTYPE:te(n,S)&&(i.state=$.DOCTYPE_DTD_QUOTED,i.q=S);continue;case $.DOCTYPE_DTD_QUOTED:i.doctype+=S,S===i.q&&(i.state=$.DOCTYPE_DTD,i.q="");continue;case $.COMMENT:S==="-"?i.state=$.COMMENT_ENDING:i.comment+=S;continue;case $.COMMENT_ENDING:S==="-"?(i.state=$.COMMENT_ENDED,i.comment=ke(i.opt,i.comment),i.comment&&Ve(i,"oncomment",i.comment),i.comment=""):(i.comment+="-"+S,i.state=$.COMMENT);continue;case $.COMMENT_ENDED:S!==">"?(ve(i,"Malformed comment"),i.comment+="--"+S,i.state=$.COMMENT):i.state=$.TEXT;continue;case $.CDATA:S==="]"?i.state=$.CDATA_ENDING:i.cdata+=S;continue;case $.CDATA_ENDING:S==="]"?i.state=$.CDATA_ENDING_2:(i.cdata+="]"+S,i.state=$.CDATA);continue;case $.CDATA_ENDING_2:S===">"?(i.cdata&&Ve(i,"oncdata",i.cdata),Ve(i,"onclosecdata"),i.cdata="",i.state=$.TEXT):S==="]"?i.cdata+="]":(i.cdata+="]]"+S,i.state=$.CDATA);continue;case $.PROC_INST:S==="?"?i.state=$.PROC_INST_ENDING:te(u,S)?i.state=$.PROC_INST_BODY:i.procInstName+=S;continue;case $.PROC_INST_BODY:if(!i.procInstBody&&te(u,S))continue;S==="?"?i.state=$.PROC_INST_ENDING:i.procInstBody+=S;continue;case $.PROC_INST_ENDING:S===">"?(Ve(i,"onprocessinginstruction",{name:i.procInstName,body:i.procInstBody}),i.procInstName=i.procInstBody="",i.state=$.TEXT):(i.procInstBody+="?"+S,i.state=$.PROC_INST_BODY);continue;case $.OPEN_TAG:te(x,S)?i.tagName+=S:(Fe(i),S===">"?qe(i):S==="/"?i.state=$.OPEN_TAG_SLASH:(V(u,S)&&ve(i,"Invalid character in tag name"),i.state=$.ATTRIB));continue;case $.OPEN_TAG_SLASH:S===">"?(qe(i,!0),Je(i)):(ve(i,"Forward-slash in opening tag not followed by >"),i.state=$.ATTRIB);continue;case $.ATTRIB:if(te(u,S))continue;S===">"?qe(i):S==="/"?i.state=$.OPEN_TAG_SLASH:te(k,S)?(i.attribName=S,i.attribValue="",i.state=$.ATTRIB_NAME):ve(i,"Invalid attribute name");continue;case $.ATTRIB_NAME:S==="="?i.state=$.ATTRIB_VALUE:S===">"?(ve(i,"Attribute without value"),i.attribValue=i.attribName,ft(i),qe(i)):te(u,S)?i.state=$.ATTRIB_NAME_SAW_WHITE:te(x,S)?i.attribName+=S:ve(i,"Invalid attribute name");continue;case $.ATTRIB_NAME_SAW_WHITE:if(S==="=")i.state=$.ATTRIB_VALUE;else{if(te(u,S))continue;ve(i,"Attribute without value"),i.tag.attributes[i.attribName]="",i.attribValue="",Ve(i,"onattribute",{name:i.attribName,value:""}),i.attribName="",S===">"?qe(i):te(k,S)?(i.attribName=S,i.state=$.ATTRIB_NAME):(ve(i,"Invalid attribute name"),i.state=$.ATTRIB)}continue;case $.ATTRIB_VALUE:if(te(u,S))continue;te(n,S)?(i.q=S,i.state=$.ATTRIB_VALUE_QUOTED):(ve(i,"Unquoted attribute value"),i.state=$.ATTRIB_VALUE_UNQUOTED,i.attribValue=S);continue;case $.ATTRIB_VALUE_QUOTED:if(S!==i.q){S==="&"?i.state=$.ATTRIB_VALUE_ENTITY_Q:i.attribValue+=S;continue}ft(i),i.q="",i.state=$.ATTRIB_VALUE_CLOSED;continue;case $.ATTRIB_VALUE_CLOSED:te(u,S)?i.state=$.ATTRIB:S===">"?qe(i):S==="/"?i.state=$.OPEN_TAG_SLASH:te(k,S)?(ve(i,"No whitespace between attributes"),i.attribName=S,i.attribValue="",i.state=$.ATTRIB_NAME):ve(i,"Invalid attribute name");continue;case $.ATTRIB_VALUE_UNQUOTED:if(V(c,S)){S==="&"?i.state=$.ATTRIB_VALUE_ENTITY_U:i.attribValue+=S;continue}ft(i),S===">"?qe(i):i.state=$.ATTRIB;continue;case $.CLOSE_TAG:if(i.tagName)S===">"?Je(i):te(x,S)?i.tagName+=S:i.script?(i.script+="</"+i.tagName,i.tagName="",i.state=$.SCRIPT):(V(u,S)&&ve(i,"Invalid tagname in closing tag"),i.state=$.CLOSE_TAG_SAW_WHITE);else{if(te(u,S))continue;V(k,S)?i.script?(i.script+="</"+S,i.state=$.SCRIPT):ve(i,"Invalid tagname in closing tag."):i.tagName=S}continue;case $.CLOSE_TAG_SAW_WHITE:if(te(u,S))continue;S===">"?Je(i):ve(i,"Invalid characters in closing tag");continue;case $.TEXT_ENTITY:case $.ATTRIB_VALUE_ENTITY_Q:case $.ATTRIB_VALUE_ENTITY_U:var Te,Ge;switch(i.state){case $.TEXT_ENTITY:Te=$.TEXT,Ge="textNode";break;case $.ATTRIB_VALUE_ENTITY_Q:Te=$.ATTRIB_VALUE_QUOTED,Ge="attribValue";break;case $.ATTRIB_VALUE_ENTITY_U:Te=$.ATTRIB_VALUE_UNQUOTED,Ge="attribValue"}S===";"?(i[Ge]+=ge(i),i.entity="",i.state=Te):te(i.entity.length?O:ne,S)?i.entity+=S:(ve(i,"Invalid character in entity name"),i[Ge]+="&"+i.entity+S,i.entity="",i.state=Te);continue;default:throw new Error(i,"Unknown state: "+i.state)}return i.position>=i.bufferCheckPosition&&function(Ce){for(var be=Math.max(oe.MAX_BUFFER_LENGTH,10),Se=0,Ue=0,ze=t.length;Ue<ze;Ue++){var It=Ce[t[Ue]].length;if(It>be)switch(t[Ue]){case"textNode":ye(Ce);break;case"cdata":Ve(Ce,"oncdata",Ce.cdata),Ce.cdata="";break;case"script":Ve(Ce,"onscript",Ce.script),Ce.script="";break;default:Ke(Ce,"Max buffer length exceeded: "+t[Ue])}Se=Math.max(Se,It)}var nt=oe.MAX_BUFFER_LENGTH-Se;Ce.bufferCheckPosition=nt+Ce.position}(i),i},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var f;ye(f=this),f.cdata!==""&&(Ve(f,"oncdata",f.cdata),f.cdata=""),f.script!==""&&(Ve(f,"onscript",f.script),f.script="")}};try{T=D(182).Stream}catch{T=function(){}}var y=oe.EVENTS.filter(function(f){return f!=="error"&&f!=="end"});function p(f,i){if(!(this instanceof p))return new p(f,i);T.apply(this),this._parser=new e(f,i),this.writable=!0,this.readable=!0;var v=this;this._parser.onend=function(){v.emit("end")},this._parser.onerror=function(S){v.emit("error",S),v._parser.error=null},this._decoder=null,y.forEach(function(S){Object.defineProperty(v,"on"+S,{get:function(){return v._parser["on"+S]},set:function(W){if(!W)return v.removeAllListeners(S),v._parser["on"+S]=W,W;v.on(S,W)},enumerable:!0,configurable:!1})})}p.prototype=Object.create(T.prototype,{constructor:{value:p}}),p.prototype.write=function(f){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(f)){if(!this._decoder){var i=D(7503).s;this._decoder=new i("utf8")}f=this._decoder.write(f)}return this._parser.write(f.toString()),this.emit("data",f),!0},p.prototype.end=function(f){return f&&f.length&&this.write(f),this._parser.end(),!0},p.prototype.on=function(f,i){var v=this;return v._parser["on"+f]||y.indexOf(f)===-1||(v._parser["on"+f]=function(){var S=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);S.splice(0,0,f),v.emit.apply(v,S)}),T.prototype.on.call(v,f,i)};var u=`\r
	 `,h="0124356789",E="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=`'"`,c=u+">",d="http://www.w3.org/XML/1998/namespace",C="http://www.w3.org/2000/xmlns/",Z={xml:d,xmlns:C};u=z(u),h=z(h),E=z(E);var k=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,x=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,ne=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,O=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function z(f){return f.split("").reduce(function(i,v){return i[v]=!0,i},{})}function te(f,i){return function(v){return Object.prototype.toString.call(v)==="[object RegExp]"}(f)?!!i.match(f):f[i]}function V(f,i){return!te(f,i)}n=z(n),c=z(c);var ee,ce,Ee,$=0;for(var Ie in oe.STATE={BEGIN:$++,BEGIN_WHITESPACE:$++,TEXT:$++,TEXT_ENTITY:$++,OPEN_WAKA:$++,SGML_DECL:$++,SGML_DECL_QUOTED:$++,DOCTYPE:$++,DOCTYPE_QUOTED:$++,DOCTYPE_DTD:$++,DOCTYPE_DTD_QUOTED:$++,COMMENT_STARTING:$++,COMMENT:$++,COMMENT_ENDING:$++,COMMENT_ENDED:$++,CDATA:$++,CDATA_ENDING:$++,CDATA_ENDING_2:$++,PROC_INST:$++,PROC_INST_BODY:$++,PROC_INST_ENDING:$++,OPEN_TAG:$++,OPEN_TAG_SLASH:$++,ATTRIB:$++,ATTRIB_NAME:$++,ATTRIB_NAME_SAW_WHITE:$++,ATTRIB_VALUE:$++,ATTRIB_VALUE_QUOTED:$++,ATTRIB_VALUE_CLOSED:$++,ATTRIB_VALUE_UNQUOTED:$++,ATTRIB_VALUE_ENTITY_Q:$++,ATTRIB_VALUE_ENTITY_U:$++,CLOSE_TAG:$++,CLOSE_TAG_SAW_WHITE:$++,SCRIPT:$++,SCRIPT_ENDING:$++},oe.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},oe.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(oe.ENTITIES).forEach(function(f){var i=oe.ENTITIES[f],v=typeof i=="number"?String.fromCharCode(i):i;oe.ENTITIES[f]=v}),oe.STATE)oe.STATE[oe.STATE[Ie]]=Ie;function Ze(f,i,v){f[i]&&f[i](v)}function Ve(f,i,v){f.textNode&&ye(f),Ze(f,i,v)}function ye(f){f.textNode=ke(f.opt,f.textNode),f.textNode&&Ze(f,"ontext",f.textNode),f.textNode=""}function ke(f,i){return f.trim&&(i=i.trim()),f.normalize&&(i=i.replace(/\s+/g," ")),i}function Ke(f,i){return ye(f),f.trackPosition&&(i+=`
Line: `+f.line+`
Column: `+f.column+`
Char: `+f.c),i=new Error(i),f.error=i,Ze(f,"onerror",i),f}function tt(f){return f.sawRoot&&!f.closedRoot&&ve(f,"Unclosed root tag"),f.state!==$.BEGIN&&f.state!==$.BEGIN_WHITESPACE&&f.state!==$.TEXT&&Ke(f,"Unexpected end"),ye(f),f.c="",f.closed=!0,Ze(f,"onend"),e.call(f,f.strict,f.opt),f}function ve(f,i){if(typeof f!="object"||!(f instanceof e))throw new Error("bad call to strictFail");f.strict&&Ke(f,i)}function Fe(f){f.strict||(f.tagName=f.tagName[f.looseCase]());var i=f.tags[f.tags.length-1]||f,v=f.tag={name:f.tagName,attributes:{}};f.opt.xmlns&&(v.ns=i.ns),f.attribList.length=0,Ve(f,"onopentagstart",v)}function pt(f,i){var v=f.indexOf(":")<0?["",f]:f.split(":"),S=v[0],W=v[1];return i&&f==="xmlns"&&(S="xmlns",W=""),{prefix:S,local:W}}function ft(f){if(f.strict||(f.attribName=f.attribName[f.looseCase]()),f.attribList.indexOf(f.attribName)!==-1||f.tag.attributes.hasOwnProperty(f.attribName))f.attribName=f.attribValue="";else{if(f.opt.xmlns){var i=pt(f.attribName,!0),v=i.prefix,S=i.local;if(v==="xmlns")if(S==="xml"&&f.attribValue!==d)ve(f,"xml: prefix must be bound to "+d+`
Actual: `+f.attribValue);else if(S==="xmlns"&&f.attribValue!==C)ve(f,"xmlns: prefix must be bound to "+C+`
Actual: `+f.attribValue);else{var W=f.tag,H=f.tags[f.tags.length-1]||f;W.ns===H.ns&&(W.ns=Object.create(H.ns)),W.ns[S]=f.attribValue}f.attribList.push([f.attribName,f.attribValue])}else f.tag.attributes[f.attribName]=f.attribValue,Ve(f,"onattribute",{name:f.attribName,value:f.attribValue});f.attribName=f.attribValue=""}}function qe(f,i){if(f.opt.xmlns){var v=f.tag,S=pt(f.tagName);v.prefix=S.prefix,v.local=S.local,v.uri=v.ns[S.prefix]||"",v.prefix&&!v.uri&&(ve(f,"Unbound namespace prefix: "+JSON.stringify(f.tagName)),v.uri=S.prefix);var W=f.tags[f.tags.length-1]||f;v.ns&&W.ns!==v.ns&&Object.keys(v.ns).forEach(function(Lt){Ve(f,"onopennamespace",{prefix:Lt,uri:v.ns[Lt]})});for(var H=0,Te=f.attribList.length;H<Te;H++){var Ge=f.attribList[H],Ce=Ge[0],be=Ge[1],Se=pt(Ce,!0),Ue=Se.prefix,ze=Se.local,It=Ue===""?"":v.ns[Ue]||"",nt={name:Ce,value:be,prefix:Ue,local:ze,uri:It};Ue&&Ue!=="xmlns"&&!It&&(ve(f,"Unbound namespace prefix: "+JSON.stringify(Ue)),nt.uri=Ue),f.tag.attributes[Ce]=nt,Ve(f,"onattribute",nt)}f.attribList.length=0}f.tag.isSelfClosing=!!i,f.sawRoot=!0,f.tags.push(f.tag),Ve(f,"onopentag",f.tag),i||(f.noscript||f.tagName.toLowerCase()!=="script"?f.state=$.TEXT:f.state=$.SCRIPT,f.tag=null,f.tagName=""),f.attribName=f.attribValue="",f.attribList.length=0}function Je(f){if(!f.tagName)return ve(f,"Weird empty close tag."),f.textNode+="</>",void(f.state=$.TEXT);if(f.script){if(f.tagName!=="script")return f.script+="</"+f.tagName+">",f.tagName="",void(f.state=$.SCRIPT);Ve(f,"onscript",f.script),f.script=""}var i=f.tags.length,v=f.tagName;f.strict||(v=v[f.looseCase]());for(var S=v;i--&&f.tags[i].name!==S;)ve(f,"Unexpected close tag");if(i<0)return ve(f,"Unmatched closing tag: "+f.tagName),f.textNode+="</"+f.tagName+">",void(f.state=$.TEXT);f.tagName=v;for(var W=f.tags.length;W-- >i;){var H=f.tag=f.tags.pop();f.tagName=f.tag.name,Ve(f,"onclosetag",f.tagName);var Te={};for(var Ge in H.ns)Te[Ge]=H.ns[Ge];var Ce=f.tags[f.tags.length-1]||f;f.opt.xmlns&&H.ns!==Ce.ns&&Object.keys(H.ns).forEach(function(be){var Se=H.ns[be];Ve(f,"onclosenamespace",{prefix:be,uri:Se})})}i===0&&(f.closedRoot=!0),f.tagName=f.attribValue=f.attribName="",f.attribList.length=0,f.state=$.TEXT}function ge(f){var i,v=f.entity,S=v.toLowerCase(),W="";return f.ENTITIES[v]?f.ENTITIES[v]:f.ENTITIES[S]?f.ENTITIES[S]:((v=S).charAt(0)==="#"&&(v.charAt(1)==="x"?(v=v.slice(2),W=(i=parseInt(v,16)).toString(16)):(v=v.slice(1),W=(i=parseInt(v,10)).toString(10))),v=v.replace(/^0+/,""),W.toLowerCase()!==v?(ve(f,"Invalid character entity"),"&"+f.entity+";"):String.fromCodePoint(i))}function he(f,i){i==="<"?(f.state=$.OPEN_WAKA,f.startTagPosition=f.position):V(u,i)&&(ve(f,"Non-whitespace before first tag."),f.textNode=i,f.state=$.TEXT)}function Ye(f,i){var v="";return i<f.length&&(v=f.charAt(i)),v}$=oe.STATE,String.fromCodePoint||(ee=String.fromCharCode,ce=Math.floor,Ee=function(){var f,i,v=16384,S=[],W=-1,H=arguments.length;if(!H)return"";for(var Te="";++W<H;){var Ge=Number(arguments[W]);if(!isFinite(Ge)||Ge<0||Ge>1114111||ce(Ge)!==Ge)throw RangeError("Invalid code point: "+Ge);Ge<=65535?S.push(Ge):(f=55296+((Ge-=65536)>>10),i=Ge%1024+56320,S.push(f,i)),(W+1===H||S.length>v)&&(Te+=ee.apply(null,S),S.length=0)}return Te},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:Ee,configurable:!0,writable:!0}):String.fromCodePoint=Ee)})(Re)},182:function(et,Re,D){et.exports=T;var oe=D(1159).EventEmitter;function T(){oe.call(this)}D(1765)(T,oe),T.Readable=D(2846),T.Writable=D(8318),T.Duplex=D(6138),T.Transform=D(9798),T.PassThrough=D(5472),T.finished=D(8800),T.pipeline=D(7295),T.Stream=T,T.prototype.pipe=function(t,e){var y=this;function p(C){t.writable&&t.write(C)===!1&&y.pause&&y.pause()}function u(){y.readable&&y.resume&&y.resume()}y.on("data",p),t.on("drain",u),t._isStdio||e&&e.end===!1||(y.on("end",E),y.on("close",n));var h=!1;function E(){h||(h=!0,t.end())}function n(){h||(h=!0,typeof t.destroy=="function"&&t.destroy())}function c(C){if(d(),oe.listenerCount(this,"error")===0)throw C}function d(){y.removeListener("data",p),t.removeListener("drain",u),y.removeListener("end",E),y.removeListener("close",n),y.removeListener("error",c),t.removeListener("error",c),y.removeListener("end",d),y.removeListener("close",d),t.removeListener("close",d)}return y.on("error",c),t.on("error",c),y.on("end",d),y.on("close",d),t.on("close",d),t.emit("pipe",y),t}},1765:function(et){typeof Object.create=="function"?et.exports=function(Re,D){D&&(Re.super_=D,Re.prototype=Object.create(D.prototype,{constructor:{value:Re,enumerable:!1,writable:!0,configurable:!0}}))}:et.exports=function(Re,D){if(D){Re.super_=D;var oe=function(){};oe.prototype=D.prototype,Re.prototype=new oe,Re.prototype.constructor=Re}}},3690:function(et){var Re={};function D(T,t,e){e||(e=Error);var y=function(p){var u,h;function E(n,c,d){return p.call(this,function(C,Z,k){return typeof t=="string"?t:t(C,Z,k)}(n,c,d))||this}return h=p,(u=E).prototype=Object.create(h.prototype),u.prototype.constructor=u,u.__proto__=h,E}(e);y.prototype.name=e.name,y.prototype.code=T,Re[T]=y}function oe(T,t){if(Array.isArray(T)){var e=T.length;return T=T.map(function(y){return String(y)}),e>2?"one of ".concat(t," ").concat(T.slice(0,e-1).join(", "),", or ")+T[e-1]:e===2?"one of ".concat(t," ").concat(T[0]," or ").concat(T[1]):"of ".concat(t," ").concat(T[0])}return"of ".concat(t," ").concat(String(T))}D("ERR_INVALID_OPT_VALUE",function(T,t){return'The value "'+t+'" is invalid for option "'+T+'"'},TypeError),D("ERR_INVALID_ARG_TYPE",function(T,t,e){var y,p,u,h,E;if(typeof t=="string"&&(p="not ",t.substr(0,p.length)===p)?(y="must not be",t=t.replace(/^not /,"")):y="must be",function(c,d,C){return(C===void 0||C>c.length)&&(C=c.length),c.substring(C-d.length,C)===d}(T," argument"))u="The ".concat(T," ").concat(y," ").concat(oe(t,"type"));else{var n=(typeof E!="number"&&(E=0),E+1>(h=T).length||h.indexOf(".",E)===-1?"argument":"property");u='The "'.concat(T,'" ').concat(n," ").concat(y," ").concat(oe(t,"type"))}return u+". Received type ".concat(typeof e)},TypeError),D("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),D("ERR_METHOD_NOT_IMPLEMENTED",function(T){return"The "+T+" method is not implemented"}),D("ERR_STREAM_PREMATURE_CLOSE","Premature close"),D("ERR_STREAM_DESTROYED",function(T){return"Cannot call "+T+" after a stream was destroyed"}),D("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),D("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),D("ERR_STREAM_WRITE_AFTER_END","write after end"),D("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),D("ERR_UNKNOWN_ENCODING",function(T){return"Unknown encoding: "+T},TypeError),D("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),et.exports.q=Re},6138:function(et,Re,D){var oe=Object.keys||function(n){var c=[];for(var d in n)c.push(d);return c};et.exports=u;var T=D(2846),t=D(8318);D(1765)(u,T);for(var e=oe(t.prototype),y=0;y<e.length;y++){var p=e[y];u.prototype[p]||(u.prototype[p]=t.prototype[p])}function u(n){if(!(this instanceof u))return new u(n);T.call(this,n),t.call(this,n),this.allowHalfOpen=!0,n&&(n.readable===!1&&(this.readable=!1),n.writable===!1&&(this.writable=!1),n.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",h)))}function h(){this._writableState.ended||process.nextTick(E,this)}function E(n){n.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(n){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=n,this._writableState.destroyed=n)}})},5472:function(et,Re,D){et.exports=T;var oe=D(9798);function T(t){if(!(this instanceof T))return new T(t);oe.call(this,t)}D(1765)(T,oe),T.prototype._transform=function(t,e,y){y(null,t)}},2846:function(et,Re,D){var oe;et.exports=ee,ee.ReadableState=V,D(1159).EventEmitter;var T,t=function(ge,he){return ge.listeners(he).length},e=D(9299),y=D(1549).Buffer,p=D.g.Uint8Array||function(){},u=D(964);T=u&&u.debuglog?u.debuglog("stream"):function(){};var h,E,n,c=D(8393),d=D(6163),C=D(7269).getHighWaterMark,Z=D(3690).q,k=Z.ERR_INVALID_ARG_TYPE,x=Z.ERR_STREAM_PUSH_AFTER_EOF,ne=Z.ERR_METHOD_NOT_IMPLEMENTED,O=Z.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;D(1765)(ee,e);var z=d.errorOrDestroy,te=["error","close","destroy","pause","resume"];function V(ge,he,Ye){oe=oe||D(6138),ge=ge||{},typeof Ye!="boolean"&&(Ye=he instanceof oe),this.objectMode=!!ge.objectMode,Ye&&(this.objectMode=this.objectMode||!!ge.readableObjectMode),this.highWaterMark=C(this,ge,"readableHighWaterMark",Ye),this.buffer=new c,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=ge.emitClose!==!1,this.autoDestroy=!!ge.autoDestroy,this.destroyed=!1,this.defaultEncoding=ge.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,ge.encoding&&(h||(h=D(7503).s),this.decoder=new h(ge.encoding),this.encoding=ge.encoding)}function ee(ge){if(oe=oe||D(6138),!(this instanceof ee))return new ee(ge);var he=this instanceof oe;this._readableState=new V(ge,this,he),this.readable=!0,ge&&(typeof ge.read=="function"&&(this._read=ge.read),typeof ge.destroy=="function"&&(this._destroy=ge.destroy)),e.call(this)}function ce(ge,he,Ye,f,i){T("readableAddChunk",he);var v,S=ge._readableState;if(he===null)S.reading=!1,function(W,H){if(T("onEofChunk"),!H.ended){if(H.decoder){var Te=H.decoder.end();Te&&Te.length&&(H.buffer.push(Te),H.length+=H.objectMode?1:Te.length)}H.ended=!0,H.sync?Ze(W):(H.needReadable=!1,H.emittedReadable||(H.emittedReadable=!0,Ve(W)))}}(ge,S);else if(i||(v=function(W,H){var Te,Ge;return Ge=H,y.isBuffer(Ge)||Ge instanceof p||typeof H=="string"||H===void 0||W.objectMode||(Te=new k("chunk",["string","Buffer","Uint8Array"],H)),Te}(S,he)),v)z(ge,v);else if(S.objectMode||he&&he.length>0)if(typeof he=="string"||S.objectMode||Object.getPrototypeOf(he)===y.prototype||(he=function(W){return y.from(W)}(he)),f)S.endEmitted?z(ge,new O):Ee(ge,S,he,!0);else if(S.ended)z(ge,new x);else{if(S.destroyed)return!1;S.reading=!1,S.decoder&&!Ye?(he=S.decoder.write(he),S.objectMode||he.length!==0?Ee(ge,S,he,!1):ye(ge,S)):Ee(ge,S,he,!1)}else f||(S.reading=!1,ye(ge,S));return!S.ended&&(S.length<S.highWaterMark||S.length===0)}function Ee(ge,he,Ye,f){he.flowing&&he.length===0&&!he.sync?(he.awaitDrain=0,ge.emit("data",Ye)):(he.length+=he.objectMode?1:Ye.length,f?he.buffer.unshift(Ye):he.buffer.push(Ye),he.needReadable&&Ze(ge)),ye(ge,he)}Object.defineProperty(ee.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(ge){this._readableState&&(this._readableState.destroyed=ge)}}),ee.prototype.destroy=d.destroy,ee.prototype._undestroy=d.undestroy,ee.prototype._destroy=function(ge,he){he(ge)},ee.prototype.push=function(ge,he){var Ye,f=this._readableState;return f.objectMode?Ye=!0:typeof ge=="string"&&((he=he||f.defaultEncoding)!==f.encoding&&(ge=y.from(ge,he),he=""),Ye=!0),ce(this,ge,he,!1,Ye)},ee.prototype.unshift=function(ge){return ce(this,ge,null,!0,!1)},ee.prototype.isPaused=function(){return this._readableState.flowing===!1},ee.prototype.setEncoding=function(ge){h||(h=D(7503).s);var he=new h(ge);this._readableState.decoder=he,this._readableState.encoding=this._readableState.decoder.encoding;for(var Ye=this._readableState.buffer.head,f="";Ye!==null;)f+=he.write(Ye.data),Ye=Ye.next;return this._readableState.buffer.clear(),f!==""&&this._readableState.buffer.push(f),this._readableState.length=f.length,this};var $=1073741824;function Ie(ge,he){return ge<=0||he.length===0&&he.ended?0:he.objectMode?1:ge!=ge?he.flowing&&he.length?he.buffer.head.data.length:he.length:(ge>he.highWaterMark&&(he.highWaterMark=function(Ye){return Ye>=$?Ye=$:(Ye--,Ye|=Ye>>>1,Ye|=Ye>>>2,Ye|=Ye>>>4,Ye|=Ye>>>8,Ye|=Ye>>>16,Ye++),Ye}(ge)),ge<=he.length?ge:he.ended?he.length:(he.needReadable=!0,0))}function Ze(ge){var he=ge._readableState;T("emitReadable",he.needReadable,he.emittedReadable),he.needReadable=!1,he.emittedReadable||(T("emitReadable",he.flowing),he.emittedReadable=!0,process.nextTick(Ve,ge))}function Ve(ge){var he=ge._readableState;T("emitReadable_",he.destroyed,he.length,he.ended),he.destroyed||!he.length&&!he.ended||(ge.emit("readable"),he.emittedReadable=!1),he.needReadable=!he.flowing&&!he.ended&&he.length<=he.highWaterMark,Fe(ge)}function ye(ge,he){he.readingMore||(he.readingMore=!0,process.nextTick(ke,ge,he))}function ke(ge,he){for(;!he.reading&&!he.ended&&(he.length<he.highWaterMark||he.flowing&&he.length===0);){var Ye=he.length;if(T("maybeReadMore read 0"),ge.read(0),Ye===he.length)break}he.readingMore=!1}function Ke(ge){var he=ge._readableState;he.readableListening=ge.listenerCount("readable")>0,he.resumeScheduled&&!he.paused?he.flowing=!0:ge.listenerCount("data")>0&&ge.resume()}function tt(ge){T("readable nexttick read 0"),ge.read(0)}function ve(ge,he){T("resume",he.reading),he.reading||ge.read(0),he.resumeScheduled=!1,ge.emit("resume"),Fe(ge),he.flowing&&!he.reading&&ge.read(0)}function Fe(ge){var he=ge._readableState;for(T("flow",he.flowing);he.flowing&&ge.read()!==null;);}function pt(ge,he){return he.length===0?null:(he.objectMode?Ye=he.buffer.shift():!ge||ge>=he.length?(Ye=he.decoder?he.buffer.join(""):he.buffer.length===1?he.buffer.first():he.buffer.concat(he.length),he.buffer.clear()):Ye=he.buffer.consume(ge,he.decoder),Ye);var Ye}function ft(ge){var he=ge._readableState;T("endReadable",he.endEmitted),he.endEmitted||(he.ended=!0,process.nextTick(qe,he,ge))}function qe(ge,he){if(T("endReadableNT",ge.endEmitted,ge.length),!ge.endEmitted&&ge.length===0&&(ge.endEmitted=!0,he.readable=!1,he.emit("end"),ge.autoDestroy)){var Ye=he._writableState;(!Ye||Ye.autoDestroy&&Ye.finished)&&he.destroy()}}function Je(ge,he){for(var Ye=0,f=ge.length;Ye<f;Ye++)if(ge[Ye]===he)return Ye;return-1}ee.prototype.read=function(ge){T("read",ge),ge=parseInt(ge,10);var he=this._readableState,Ye=ge;if(ge!==0&&(he.emittedReadable=!1),ge===0&&he.needReadable&&((he.highWaterMark!==0?he.length>=he.highWaterMark:he.length>0)||he.ended))return T("read: emitReadable",he.length,he.ended),he.length===0&&he.ended?ft(this):Ze(this),null;if((ge=Ie(ge,he))===0&&he.ended)return he.length===0&&ft(this),null;var f,i=he.needReadable;return T("need readable",i),(he.length===0||he.length-ge<he.highWaterMark)&&T("length less than watermark",i=!0),he.ended||he.reading?T("reading or ended",i=!1):i&&(T("do read"),he.reading=!0,he.sync=!0,he.length===0&&(he.needReadable=!0),this._read(he.highWaterMark),he.sync=!1,he.reading||(ge=Ie(Ye,he))),(f=ge>0?pt(ge,he):null)===null?(he.needReadable=he.length<=he.highWaterMark,ge=0):(he.length-=ge,he.awaitDrain=0),he.length===0&&(he.ended||(he.needReadable=!0),Ye!==ge&&he.ended&&ft(this)),f!==null&&this.emit("data",f),f},ee.prototype._read=function(ge){z(this,new ne("_read()"))},ee.prototype.pipe=function(ge,he){var Ye=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=ge;break;case 1:f.pipes=[f.pipes,ge];break;default:f.pipes.push(ge)}f.pipesCount+=1,T("pipe count=%d opts=%j",f.pipesCount,he);var i=he&&he.end===!1||ge===process.stdout||ge===process.stderr?be:v;function v(){T("onend"),ge.end()}f.endEmitted?process.nextTick(i):Ye.once("end",i),ge.on("unpipe",function Se(Ue,ze){T("onunpipe"),Ue===Ye&&ze&&ze.hasUnpiped===!1&&(ze.hasUnpiped=!0,T("cleanup"),ge.removeListener("close",Ge),ge.removeListener("finish",Ce),ge.removeListener("drain",S),ge.removeListener("error",Te),ge.removeListener("unpipe",Se),Ye.removeListener("end",v),Ye.removeListener("end",be),Ye.removeListener("data",H),W=!0,!f.awaitDrain||ge._writableState&&!ge._writableState.needDrain||S())});var S=function(Se){return function(){var Ue=Se._readableState;T("pipeOnDrain",Ue.awaitDrain),Ue.awaitDrain&&Ue.awaitDrain--,Ue.awaitDrain===0&&t(Se,"data")&&(Ue.flowing=!0,Fe(Se))}}(Ye);ge.on("drain",S);var W=!1;function H(Se){T("ondata");var Ue=ge.write(Se);T("dest.write",Ue),Ue===!1&&((f.pipesCount===1&&f.pipes===ge||f.pipesCount>1&&Je(f.pipes,ge)!==-1)&&!W&&(T("false write response, pause",f.awaitDrain),f.awaitDrain++),Ye.pause())}function Te(Se){T("onerror",Se),be(),ge.removeListener("error",Te),t(ge,"error")===0&&z(ge,Se)}function Ge(){ge.removeListener("finish",Ce),be()}function Ce(){T("onfinish"),ge.removeListener("close",Ge),be()}function be(){T("unpipe"),Ye.unpipe(ge)}return Ye.on("data",H),function(Se,Ue,ze){if(typeof Se.prependListener=="function")return Se.prependListener(Ue,ze);Se._events&&Se._events[Ue]?Array.isArray(Se._events[Ue])?Se._events[Ue].unshift(ze):Se._events[Ue]=[ze,Se._events[Ue]]:Se.on(Ue,ze)}(ge,"error",Te),ge.once("close",Ge),ge.once("finish",Ce),ge.emit("pipe",Ye),f.flowing||(T("pipe resume"),Ye.resume()),ge},ee.prototype.unpipe=function(ge){var he=this._readableState,Ye={hasUnpiped:!1};if(he.pipesCount===0)return this;if(he.pipesCount===1)return ge&&ge!==he.pipes||(ge||(ge=he.pipes),he.pipes=null,he.pipesCount=0,he.flowing=!1,ge&&ge.emit("unpipe",this,Ye)),this;if(!ge){var f=he.pipes,i=he.pipesCount;he.pipes=null,he.pipesCount=0,he.flowing=!1;for(var v=0;v<i;v++)f[v].emit("unpipe",this,{hasUnpiped:!1});return this}var S=Je(he.pipes,ge);return S===-1||(he.pipes.splice(S,1),he.pipesCount-=1,he.pipesCount===1&&(he.pipes=he.pipes[0]),ge.emit("unpipe",this,Ye)),this},ee.prototype.on=function(ge,he){var Ye=e.prototype.on.call(this,ge,he),f=this._readableState;return ge==="data"?(f.readableListening=this.listenerCount("readable")>0,f.flowing!==!1&&this.resume()):ge==="readable"&&(f.endEmitted||f.readableListening||(f.readableListening=f.needReadable=!0,f.flowing=!1,f.emittedReadable=!1,T("on readable",f.length,f.reading),f.length?Ze(this):f.reading||process.nextTick(tt,this))),Ye},ee.prototype.addListener=ee.prototype.on,ee.prototype.removeListener=function(ge,he){var Ye=e.prototype.removeListener.call(this,ge,he);return ge==="readable"&&process.nextTick(Ke,this),Ye},ee.prototype.removeAllListeners=function(ge){var he=e.prototype.removeAllListeners.apply(this,arguments);return ge!=="readable"&&ge!==void 0||process.nextTick(Ke,this),he},ee.prototype.resume=function(){var ge=this._readableState;return ge.flowing||(T("resume"),ge.flowing=!ge.readableListening,function(he,Ye){Ye.resumeScheduled||(Ye.resumeScheduled=!0,process.nextTick(ve,he,Ye))}(this,ge)),ge.paused=!1,this},ee.prototype.pause=function(){return T("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(T("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},ee.prototype.wrap=function(ge){var he=this,Ye=this._readableState,f=!1;for(var i in ge.on("end",function(){if(T("wrapped end"),Ye.decoder&&!Ye.ended){var S=Ye.decoder.end();S&&S.length&&he.push(S)}he.push(null)}),ge.on("data",function(S){T("wrapped data"),Ye.decoder&&(S=Ye.decoder.write(S)),Ye.objectMode&&S==null||(Ye.objectMode||S&&S.length)&&(he.push(S)||(f=!0,ge.pause()))}),ge)this[i]===void 0&&typeof ge[i]=="function"&&(this[i]=function(S){return function(){return ge[S].apply(ge,arguments)}}(i));for(var v=0;v<te.length;v++)ge.on(te[v],this.emit.bind(this,te[v]));return this._read=function(S){T("wrapped _read",S),f&&(f=!1,ge.resume())},this},typeof Symbol=="function"&&(ee.prototype[Symbol.asyncIterator]=function(){return E===void 0&&(E=D(7299)),E(this)}),Object.defineProperty(ee.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(ee.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(ee.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ge){this._readableState&&(this._readableState.flowing=ge)}}),ee._fromList=pt,Object.defineProperty(ee.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(ee.from=function(ge,he){return n===void 0&&(n=D(6233)),n(ee,ge,he)})},9798:function(et,Re,D){et.exports=h;var oe=D(3690).q,T=oe.ERR_METHOD_NOT_IMPLEMENTED,t=oe.ERR_MULTIPLE_CALLBACK,e=oe.ERR_TRANSFORM_ALREADY_TRANSFORMING,y=oe.ERR_TRANSFORM_WITH_LENGTH_0,p=D(6138);function u(c,d){var C=this._transformState;C.transforming=!1;var Z=C.writecb;if(Z===null)return this.emit("error",new t);C.writechunk=null,C.writecb=null,d!=null&&this.push(d),Z(c);var k=this._readableState;k.reading=!1,(k.needReadable||k.length<k.highWaterMark)&&this._read(k.highWaterMark)}function h(c){if(!(this instanceof h))return new h(c);p.call(this,c),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.on("prefinish",E)}function E(){var c=this;typeof this._flush!="function"||this._readableState.destroyed?n(this,null,null):this._flush(function(d,C){n(c,d,C)})}function n(c,d,C){if(d)return c.emit("error",d);if(C!=null&&c.push(C),c._writableState.length)throw new y;if(c._transformState.transforming)throw new e;return c.push(null)}D(1765)(h,p),h.prototype.push=function(c,d){return this._transformState.needTransform=!1,p.prototype.push.call(this,c,d)},h.prototype._transform=function(c,d,C){C(new T("_transform()"))},h.prototype._write=function(c,d,C){var Z=this._transformState;if(Z.writecb=C,Z.writechunk=c,Z.writeencoding=d,!Z.transforming){var k=this._readableState;(Z.needTransform||k.needReadable||k.length<k.highWaterMark)&&this._read(k.highWaterMark)}},h.prototype._read=function(c){var d=this._transformState;d.writechunk===null||d.transforming?d.needTransform=!0:(d.transforming=!0,this._transform(d.writechunk,d.writeencoding,d.afterTransform))},h.prototype._destroy=function(c,d){p.prototype._destroy.call(this,c,function(C){d(C)})}},8318:function(et,Re,D){function oe(ye){var ke=this;this.next=null,this.entry=null,this.finish=function(){(function(Ke,tt,ve){var Fe=Ke.entry;for(Ke.entry=null;Fe;){var pt=Fe.callback;tt.pendingcb--,pt(void 0),Fe=Fe.next}tt.corkedRequestsFree.next=Ke})(ke,ye)}}var T;et.exports=ee,ee.WritableState=V;var t,e={deprecate:D(7839)},y=D(9299),p=D(1549).Buffer,u=D.g.Uint8Array||function(){},h=D(6163),E=D(7269).getHighWaterMark,n=D(3690).q,c=n.ERR_INVALID_ARG_TYPE,d=n.ERR_METHOD_NOT_IMPLEMENTED,C=n.ERR_MULTIPLE_CALLBACK,Z=n.ERR_STREAM_CANNOT_PIPE,k=n.ERR_STREAM_DESTROYED,x=n.ERR_STREAM_NULL_VALUES,ne=n.ERR_STREAM_WRITE_AFTER_END,O=n.ERR_UNKNOWN_ENCODING,z=h.errorOrDestroy;function te(){}function V(ye,ke,Ke){T=T||D(6138),ye=ye||{},typeof Ke!="boolean"&&(Ke=ke instanceof T),this.objectMode=!!ye.objectMode,Ke&&(this.objectMode=this.objectMode||!!ye.writableObjectMode),this.highWaterMark=E(this,ye,"writableHighWaterMark",Ke),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var tt=ye.decodeStrings===!1;this.decodeStrings=!tt,this.defaultEncoding=ye.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ve){(function(Fe,pt){var ft=Fe._writableState,qe=ft.sync,Je=ft.writecb;if(typeof Je!="function")throw new C;if(function(he){he.writing=!1,he.writecb=null,he.length-=he.writelen,he.writelen=0}(ft),pt)(function(he,Ye,f,i,v){--Ye.pendingcb,f?(process.nextTick(v,i),process.nextTick(Ve,he,Ye),he._writableState.errorEmitted=!0,z(he,i)):(v(i),he._writableState.errorEmitted=!0,z(he,i),Ve(he,Ye))})(Fe,ft,qe,pt,Je);else{var ge=Ie(ft)||Fe.destroyed;ge||ft.corked||ft.bufferProcessing||!ft.bufferedRequest||$(Fe,ft),qe?process.nextTick(Ee,Fe,ft,ge,Je):Ee(Fe,ft,ge,Je)}})(ke,ve)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=ye.emitClose!==!1,this.autoDestroy=!!ye.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new oe(this)}function ee(ye){var ke=this instanceof(T=T||D(6138));if(!ke&&!t.call(ee,this))return new ee(ye);this._writableState=new V(ye,this,ke),this.writable=!0,ye&&(typeof ye.write=="function"&&(this._write=ye.write),typeof ye.writev=="function"&&(this._writev=ye.writev),typeof ye.destroy=="function"&&(this._destroy=ye.destroy),typeof ye.final=="function"&&(this._final=ye.final)),y.call(this)}function ce(ye,ke,Ke,tt,ve,Fe,pt){ke.writelen=tt,ke.writecb=pt,ke.writing=!0,ke.sync=!0,ke.destroyed?ke.onwrite(new k("write")):Ke?ye._writev(ve,ke.onwrite):ye._write(ve,Fe,ke.onwrite),ke.sync=!1}function Ee(ye,ke,Ke,tt){Ke||function(ve,Fe){Fe.length===0&&Fe.needDrain&&(Fe.needDrain=!1,ve.emit("drain"))}(ye,ke),ke.pendingcb--,tt(),Ve(ye,ke)}function $(ye,ke){ke.bufferProcessing=!0;var Ke=ke.bufferedRequest;if(ye._writev&&Ke&&Ke.next){var tt=ke.bufferedRequestCount,ve=new Array(tt),Fe=ke.corkedRequestsFree;Fe.entry=Ke;for(var pt=0,ft=!0;Ke;)ve[pt]=Ke,Ke.isBuf||(ft=!1),Ke=Ke.next,pt+=1;ve.allBuffers=ft,ce(ye,ke,!0,ke.length,ve,"",Fe.finish),ke.pendingcb++,ke.lastBufferedRequest=null,Fe.next?(ke.corkedRequestsFree=Fe.next,Fe.next=null):ke.corkedRequestsFree=new oe(ke),ke.bufferedRequestCount=0}else{for(;Ke;){var qe=Ke.chunk,Je=Ke.encoding,ge=Ke.callback;if(ce(ye,ke,!1,ke.objectMode?1:qe.length,qe,Je,ge),Ke=Ke.next,ke.bufferedRequestCount--,ke.writing)break}Ke===null&&(ke.lastBufferedRequest=null)}ke.bufferedRequest=Ke,ke.bufferProcessing=!1}function Ie(ye){return ye.ending&&ye.length===0&&ye.bufferedRequest===null&&!ye.finished&&!ye.writing}function Ze(ye,ke){ye._final(function(Ke){ke.pendingcb--,Ke&&z(ye,Ke),ke.prefinished=!0,ye.emit("prefinish"),Ve(ye,ke)})}function Ve(ye,ke){var Ke=Ie(ke);if(Ke&&(function(ve,Fe){Fe.prefinished||Fe.finalCalled||(typeof ve._final!="function"||Fe.destroyed?(Fe.prefinished=!0,ve.emit("prefinish")):(Fe.pendingcb++,Fe.finalCalled=!0,process.nextTick(Ze,ve,Fe)))}(ye,ke),ke.pendingcb===0&&(ke.finished=!0,ye.emit("finish"),ke.autoDestroy))){var tt=ye._readableState;(!tt||tt.autoDestroy&&tt.endEmitted)&&ye.destroy()}return Ke}D(1765)(ee,y),V.prototype.getBuffer=function(){for(var ye=this.bufferedRequest,ke=[];ye;)ke.push(ye),ye=ye.next;return ke},function(){try{Object.defineProperty(V.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(t=Function.prototype[Symbol.hasInstance],Object.defineProperty(ee,Symbol.hasInstance,{value:function(ye){return!!t.call(this,ye)||this===ee&&ye&&ye._writableState instanceof V}})):t=function(ye){return ye instanceof this},ee.prototype.pipe=function(){z(this,new Z)},ee.prototype.write=function(ye,ke,Ke){var tt,ve=this._writableState,Fe=!1,pt=!ve.objectMode&&(tt=ye,p.isBuffer(tt)||tt instanceof u);return pt&&!p.isBuffer(ye)&&(ye=function(ft){return p.from(ft)}(ye)),typeof ke=="function"&&(Ke=ke,ke=null),pt?ke="buffer":ke||(ke=ve.defaultEncoding),typeof Ke!="function"&&(Ke=te),ve.ending?function(ft,qe){var Je=new ne;z(ft,Je),process.nextTick(qe,Je)}(this,Ke):(pt||function(ft,qe,Je,ge){var he;return Je===null?he=new x:typeof Je=="string"||qe.objectMode||(he=new c("chunk",["string","Buffer"],Je)),!he||(z(ft,he),process.nextTick(ge,he),!1)}(this,ve,ye,Ke))&&(ve.pendingcb++,Fe=function(ft,qe,Je,ge,he,Ye){if(!Je){var f=function(W,H,Te){return W.objectMode||W.decodeStrings===!1||typeof H!="string"||(H=p.from(H,Te)),H}(qe,ge,he);ge!==f&&(Je=!0,he="buffer",ge=f)}var i=qe.objectMode?1:ge.length;qe.length+=i;var v=qe.length<qe.highWaterMark;if(v||(qe.needDrain=!0),qe.writing||qe.corked){var S=qe.lastBufferedRequest;qe.lastBufferedRequest={chunk:ge,encoding:he,isBuf:Je,callback:Ye,next:null},S?S.next=qe.lastBufferedRequest:qe.bufferedRequest=qe.lastBufferedRequest,qe.bufferedRequestCount+=1}else ce(ft,qe,!1,i,ge,he,Ye);return v}(this,ve,pt,ye,ke,Ke)),Fe},ee.prototype.cork=function(){this._writableState.corked++},ee.prototype.uncork=function(){var ye=this._writableState;ye.corked&&(ye.corked--,ye.writing||ye.corked||ye.bufferProcessing||!ye.bufferedRequest||$(this,ye))},ee.prototype.setDefaultEncoding=function(ye){if(typeof ye=="string"&&(ye=ye.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ye+"").toLowerCase())>-1))throw new O(ye);return this._writableState.defaultEncoding=ye,this},Object.defineProperty(ee.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(ee.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),ee.prototype._write=function(ye,ke,Ke){Ke(new d("_write()"))},ee.prototype._writev=null,ee.prototype.end=function(ye,ke,Ke){var tt=this._writableState;return typeof ye=="function"?(Ke=ye,ye=null,ke=null):typeof ke=="function"&&(Ke=ke,ke=null),ye!=null&&this.write(ye,ke),tt.corked&&(tt.corked=1,this.uncork()),tt.ending||function(ve,Fe,pt){Fe.ending=!0,Ve(ve,Fe),pt&&(Fe.finished?process.nextTick(pt):ve.once("finish",pt)),Fe.ended=!0,ve.writable=!1}(this,tt,Ke),this},Object.defineProperty(ee.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(ee.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(ye){this._writableState&&(this._writableState.destroyed=ye)}}),ee.prototype.destroy=h.destroy,ee.prototype._undestroy=h.undestroy,ee.prototype._destroy=function(ye,ke){ke(ye)}},7299:function(et,Re,D){var oe;function T(x,ne,O){return ne in x?Object.defineProperty(x,ne,{value:O,enumerable:!0,configurable:!0,writable:!0}):x[ne]=O,x}var t=D(8800),e=Symbol("lastResolve"),y=Symbol("lastReject"),p=Symbol("error"),u=Symbol("ended"),h=Symbol("lastPromise"),E=Symbol("handlePromise"),n=Symbol("stream");function c(x,ne){return{value:x,done:ne}}function d(x){var ne=x[e];if(ne!==null){var O=x[n].read();O!==null&&(x[h]=null,x[e]=null,x[y]=null,ne(c(O,!1)))}}function C(x){process.nextTick(d,x)}var Z=Object.getPrototypeOf(function(){}),k=Object.setPrototypeOf((T(oe={get stream(){return this[n]},next:function(){var x=this,ne=this[p];if(ne!==null)return Promise.reject(ne);if(this[u])return Promise.resolve(c(void 0,!0));if(this[n].destroyed)return new Promise(function(V,ee){process.nextTick(function(){x[p]?ee(x[p]):V(c(void 0,!0))})});var O,z=this[h];if(z)O=new Promise(function(V,ee){return function(ce,Ee){V.then(function(){ee[u]?ce(c(void 0,!0)):ee[E](ce,Ee)},Ee)}}(z,this));else{var te=this[n].read();if(te!==null)return Promise.resolve(c(te,!1));O=new Promise(this[E])}return this[h]=O,O}},Symbol.asyncIterator,function(){return this}),T(oe,"return",function(){var x=this;return new Promise(function(ne,O){x[n].destroy(null,function(z){z?O(z):ne(c(void 0,!0))})})}),oe),Z);et.exports=function(x){var ne,O=Object.create(k,(T(ne={},n,{value:x,writable:!0}),T(ne,e,{value:null,writable:!0}),T(ne,y,{value:null,writable:!0}),T(ne,p,{value:null,writable:!0}),T(ne,u,{value:x._readableState.endEmitted,writable:!0}),T(ne,E,{value:function(z,te){var V=O[n].read();V?(O[h]=null,O[e]=null,O[y]=null,z(c(V,!1))):(O[e]=z,O[y]=te)},writable:!0}),ne));return O[h]=null,t(x,function(z){if(z&&z.code!=="ERR_STREAM_PREMATURE_CLOSE"){var te=O[y];return te!==null&&(O[h]=null,O[e]=null,O[y]=null,te(z)),void(O[p]=z)}var V=O[e];V!==null&&(O[h]=null,O[e]=null,O[y]=null,V(c(void 0,!0))),O[u]=!0}),x.on("readable",C.bind(null,O)),O}},8393:function(et,Re,D){function oe(u,h){var E=Object.keys(u);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(u);h&&(n=n.filter(function(c){return Object.getOwnPropertyDescriptor(u,c).enumerable})),E.push.apply(E,n)}return E}function T(u,h,E){return h in u?Object.defineProperty(u,h,{value:E,enumerable:!0,configurable:!0,writable:!0}):u[h]=E,u}function t(u,h){for(var E=0;E<h.length;E++){var n=h[E];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(u,n.key,n)}}var e=D(1549).Buffer,y=D(9862).inspect,p=y&&y.custom||"inspect";et.exports=function(){function u(){(function(n,c){if(!(n instanceof c))throw new TypeError("Cannot call a class as a function")})(this,u),this.head=null,this.tail=null,this.length=0}var h,E;return h=u,E=[{key:"push",value:function(n){var c={data:n,next:null};this.length>0?this.tail.next=c:this.head=c,this.tail=c,++this.length}},{key:"unshift",value:function(n){var c={data:n,next:this.head};this.length===0&&(this.tail=c),this.head=c,++this.length}},{key:"shift",value:function(){if(this.length!==0){var n=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,n}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(n){if(this.length===0)return"";for(var c=this.head,d=""+c.data;c=c.next;)d+=n+c.data;return d}},{key:"concat",value:function(n){if(this.length===0)return e.alloc(0);for(var c,d,C,Z=e.allocUnsafe(n>>>0),k=this.head,x=0;k;)c=k.data,d=Z,C=x,e.prototype.copy.call(c,d,C),x+=k.data.length,k=k.next;return Z}},{key:"consume",value:function(n,c){var d;return n<this.head.data.length?(d=this.head.data.slice(0,n),this.head.data=this.head.data.slice(n)):d=n===this.head.data.length?this.shift():c?this._getString(n):this._getBuffer(n),d}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(n){var c=this.head,d=1,C=c.data;for(n-=C.length;c=c.next;){var Z=c.data,k=n>Z.length?Z.length:n;if(k===Z.length?C+=Z:C+=Z.slice(0,n),(n-=k)==0){k===Z.length?(++d,c.next?this.head=c.next:this.head=this.tail=null):(this.head=c,c.data=Z.slice(k));break}++d}return this.length-=d,C}},{key:"_getBuffer",value:function(n){var c=e.allocUnsafe(n),d=this.head,C=1;for(d.data.copy(c),n-=d.data.length;d=d.next;){var Z=d.data,k=n>Z.length?Z.length:n;if(Z.copy(c,c.length-n,0,k),(n-=k)==0){k===Z.length?(++C,d.next?this.head=d.next:this.head=this.tail=null):(this.head=d,d.data=Z.slice(k));break}++C}return this.length-=C,c}},{key:p,value:function(n,c){return y(this,function(d){for(var C=1;C<arguments.length;C++){var Z=arguments[C]!=null?arguments[C]:{};C%2?oe(Object(Z),!0).forEach(function(k){T(d,k,Z[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(Z)):oe(Object(Z)).forEach(function(k){Object.defineProperty(d,k,Object.getOwnPropertyDescriptor(Z,k))})}return d}({},c,{depth:0,customInspect:!1}))}}],E&&t(h.prototype,E),u}()},6163:function(et){function Re(T,t){oe(T,t),D(T)}function D(T){T._writableState&&!T._writableState.emitClose||T._readableState&&!T._readableState.emitClose||T.emit("close")}function oe(T,t){T.emit("error",t)}et.exports={destroy:function(T,t){var e=this,y=this._readableState&&this._readableState.destroyed,p=this._writableState&&this._writableState.destroyed;return y||p?(t?t(T):T&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(oe,this,T)):process.nextTick(oe,this,T)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(T||null,function(u){!t&&u?e._writableState?e._writableState.errorEmitted?process.nextTick(D,e):(e._writableState.errorEmitted=!0,process.nextTick(Re,e,u)):process.nextTick(Re,e,u):t?(process.nextTick(D,e),t(u)):process.nextTick(D,e)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(T,t){var e=T._readableState,y=T._writableState;e&&e.autoDestroy||y&&y.autoDestroy?T.destroy(t):T.emit("error",t)}}},8800:function(et,Re,D){var oe=D(3690).q.ERR_STREAM_PREMATURE_CLOSE;function T(){}et.exports=function t(e,y,p){if(typeof y=="function")return t(e,null,y);y||(y={}),p=function(ne){var O=!1;return function(){if(!O){O=!0;for(var z=arguments.length,te=new Array(z),V=0;V<z;V++)te[V]=arguments[V];ne.apply(this,te)}}}(p||T);var u=y.readable||y.readable!==!1&&e.readable,h=y.writable||y.writable!==!1&&e.writable,E=function(){e.writable||c()},n=e._writableState&&e._writableState.finished,c=function(){h=!1,n=!0,u||p.call(e)},d=e._readableState&&e._readableState.endEmitted,C=function(){u=!1,d=!0,h||p.call(e)},Z=function(ne){p.call(e,ne)},k=function(){var ne;return u&&!d?(e._readableState&&e._readableState.ended||(ne=new oe),p.call(e,ne)):h&&!n?(e._writableState&&e._writableState.ended||(ne=new oe),p.call(e,ne)):void 0},x=function(){e.req.on("finish",c)};return function(ne){return ne.setHeader&&typeof ne.abort=="function"}(e)?(e.on("complete",c),e.on("abort",k),e.req?x():e.on("request",x)):h&&!e._writableState&&(e.on("end",E),e.on("close",E)),e.on("end",C),e.on("finish",c),y.error!==!1&&e.on("error",Z),e.on("close",k),function(){e.removeListener("complete",c),e.removeListener("abort",k),e.removeListener("request",x),e.req&&e.req.removeListener("finish",c),e.removeListener("end",E),e.removeListener("close",E),e.removeListener("finish",c),e.removeListener("end",C),e.removeListener("error",Z),e.removeListener("close",k)}}},6233:function(et){et.exports=function(){throw new Error("Readable.from is not available in the browser")}},7295:function(et,Re,D){var oe,T=D(3690).q,t=T.ERR_MISSING_ARGS,e=T.ERR_STREAM_DESTROYED;function y(n){if(n)throw n}function p(n,c,d,C){C=function(x){var ne=!1;return function(){ne||(ne=!0,x.apply(void 0,arguments))}}(C);var Z=!1;n.on("close",function(){Z=!0}),oe===void 0&&(oe=D(8800)),oe(n,{readable:c,writable:d},function(x){if(x)return C(x);Z=!0,C()});var k=!1;return function(x){if(!Z&&!k)return k=!0,function(ne){return ne.setHeader&&typeof ne.abort=="function"}(n)?n.abort():typeof n.destroy=="function"?n.destroy():void C(x||new e("pipe"))}}function u(n){n()}function h(n,c){return n.pipe(c)}function E(n){return n.length?typeof n[n.length-1]!="function"?y:n.pop():y}et.exports=function(){for(var n=arguments.length,c=new Array(n),d=0;d<n;d++)c[d]=arguments[d];var C,Z=E(c);if(Array.isArray(c[0])&&(c=c[0]),c.length<2)throw new t("streams");var k=c.map(function(x,ne){var O=ne<c.length-1;return p(x,O,ne>0,function(z){C||(C=z),z&&k.forEach(u),O||(k.forEach(u),Z(C))})});return c.reduce(h)}},7269:function(et,Re,D){var oe=D(3690).q.ERR_INVALID_OPT_VALUE;et.exports={getHighWaterMark:function(T,t,e,y){var p=function(u,h,E){return u.highWaterMark!=null?u.highWaterMark:h?u[E]:null}(t,y,e);if(p!=null){if(!isFinite(p)||Math.floor(p)!==p||p<0)throw new oe(y?e:"highWaterMark",p);return Math.floor(p)}return T.objectMode?16:16384}}},9299:function(et,Re,D){et.exports=D(1159).EventEmitter},7503:function(et,Re,D){var oe=D(8387).Buffer,T=oe.isEncoding||function(d){switch((d=""+d)&&d.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(d){var C;switch(this.encoding=function(Z){var k=function(x){if(!x)return"utf8";for(var ne;;)switch(x){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return x;default:if(ne)return;x=(""+x).toLowerCase(),ne=!0}}(Z);if(typeof k!="string"&&(oe.isEncoding===T||!T(Z)))throw new Error("Unknown encoding: "+Z);return k||Z}(d),this.encoding){case"utf16le":this.text=p,this.end=u,C=4;break;case"utf8":this.fillLast=y,C=4;break;case"base64":this.text=h,this.end=E,C=3;break;default:return this.write=n,void(this.end=c)}this.lastNeed=0,this.lastTotal=0,this.lastChar=oe.allocUnsafe(C)}function e(d){return d<=127?0:d>>5==6?2:d>>4==14?3:d>>3==30?4:d>>6==2?-1:-2}function y(d){var C=this.lastTotal-this.lastNeed,Z=function(k,x,ne){if((192&x[0])!=128)return k.lastNeed=0,"";if(k.lastNeed>1&&x.length>1){if((192&x[1])!=128)return k.lastNeed=1,"";if(k.lastNeed>2&&x.length>2&&(192&x[2])!=128)return k.lastNeed=2,""}}(this,d);return Z!==void 0?Z:this.lastNeed<=d.length?(d.copy(this.lastChar,C,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(d.copy(this.lastChar,C,0,d.length),void(this.lastNeed-=d.length))}function p(d,C){if((d.length-C)%2==0){var Z=d.toString("utf16le",C);if(Z){var k=Z.charCodeAt(Z.length-1);if(k>=55296&&k<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=d[d.length-2],this.lastChar[1]=d[d.length-1],Z.slice(0,-1)}return Z}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=d[d.length-1],d.toString("utf16le",C,d.length-1)}function u(d){var C=d&&d.length?this.write(d):"";if(this.lastNeed){var Z=this.lastTotal-this.lastNeed;return C+this.lastChar.toString("utf16le",0,Z)}return C}function h(d,C){var Z=(d.length-C)%3;return Z===0?d.toString("base64",C):(this.lastNeed=3-Z,this.lastTotal=3,Z===1?this.lastChar[0]=d[d.length-1]:(this.lastChar[0]=d[d.length-2],this.lastChar[1]=d[d.length-1]),d.toString("base64",C,d.length-Z))}function E(d){var C=d&&d.length?this.write(d):"";return this.lastNeed?C+this.lastChar.toString("base64",0,3-this.lastNeed):C}function n(d){return d.toString(this.encoding)}function c(d){return d&&d.length?this.write(d):""}Re.s=t,t.prototype.write=function(d){if(d.length===0)return"";var C,Z;if(this.lastNeed){if((C=this.fillLast(d))===void 0)return"";Z=this.lastNeed,this.lastNeed=0}else Z=0;return Z<d.length?C?C+this.text(d,Z):this.text(d,Z):C||""},t.prototype.end=function(d){var C=d&&d.length?this.write(d):"";return this.lastNeed?C+"":C},t.prototype.text=function(d,C){var Z=function(x,ne,O){var z=ne.length-1;if(z<O)return 0;var te=e(ne[z]);return te>=0?(te>0&&(x.lastNeed=te-1),te):--z<O||te===-2?0:(te=e(ne[z]))>=0?(te>0&&(x.lastNeed=te-2),te):--z<O||te===-2?0:(te=e(ne[z]))>=0?(te>0&&(te===2?te=0:x.lastNeed=te-3),te):0}(this,d,C);if(!this.lastNeed)return d.toString("utf8",C);this.lastTotal=Z;var k=d.length-(Z-this.lastNeed);return d.copy(this.lastChar,0,k),d.toString("utf8",C,k)},t.prototype.fillLast=function(d){if(this.lastNeed<=d.length)return d.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);d.copy(this.lastChar,this.lastTotal-this.lastNeed,0,d.length),this.lastNeed-=d.length}},1067:function(et,Re,D){var oe;(function(T,t){var e="function",y="undefined",p="object",u="string",h="model",E="name",n="type",c="vendor",d="version",C="architecture",Z="console",k="mobile",x="tablet",ne="smarttv",O="wearable",z="embedded",te="Amazon",V="Apple",ee="ASUS",ce="BlackBerry",Ee="Browser",$="Chrome",Ie="Firefox",Ze="Google",Ve="Huawei",ye="LG",ke="Microsoft",Ke="Motorola",tt="Opera",ve="Samsung",Fe="Sony",pt="Xiaomi",ft="Zebra",qe="Facebook",Je=function(Ge){for(var Ce={},be=0;be<Ge.length;be++)Ce[Ge[be].toUpperCase()]=Ge[be];return Ce},ge=function(Ge,Ce){return typeof Ge===u&&he(Ce).indexOf(he(Ge))!==-1},he=function(Ge){return Ge.toLowerCase()},Ye=function(Ge,Ce){if(typeof Ge===u)return Ge=Ge.replace(/^\s\s*/,"").replace(/\s\s*$/,""),typeof Ce===y?Ge:Ge.substring(0,255)},f=function(Ge,Ce){for(var be,Se,Ue,ze,It,nt,Lt=0;Lt<Ce.length&&!It;){var Ot=Ce[Lt],Mt=Ce[Lt+1];for(be=Se=0;be<Ot.length&&!It;)if(It=Ot[be++].exec(Ge))for(Ue=0;Ue<Mt.length;Ue++)nt=It[++Se],typeof(ze=Mt[Ue])===p&&ze.length>0?ze.length===2?typeof ze[1]==e?this[ze[0]]=ze[1].call(this,nt):this[ze[0]]=ze[1]:ze.length===3?typeof ze[1]!==e||ze[1].exec&&ze[1].test?this[ze[0]]=nt?nt.replace(ze[1],ze[2]):t:this[ze[0]]=nt?ze[1].call(this,nt,ze[2]):t:ze.length===4&&(this[ze[0]]=nt?ze[3].call(this,nt.replace(ze[1],ze[2])):t):this[ze]=nt||t;Lt+=2}},i=function(Ge,Ce){for(var be in Ce)if(typeof Ce[be]===p&&Ce[be].length>0){for(var Se=0;Se<Ce[be].length;Se++)if(ge(Ce[be][Se],Ge))return be==="?"?t:be}else if(ge(Ce[be],Ge))return be==="?"?t:be;return Ge},v={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},S={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[d,[E,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[d,[E,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[E,d],[/opios[\/ ]+([\w\.]+)/i],[d,[E,tt+" Mini"]],[/\bopr\/([\w\.]+)/i],[d,[E,tt]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[E,d],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[d,[E,"UC"+Ee]],[/\bqbcore\/([\w\.]+)/i],[d,[E,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[d,[E,"WeChat"]],[/konqueror\/([\w\.]+)/i],[d,[E,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[d,[E,"IE"]],[/yabrowser\/([\w\.]+)/i],[d,[E,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[E,/(.+)/,"$1 Secure "+Ee],d],[/\bfocus\/([\w\.]+)/i],[d,[E,Ie+" Focus"]],[/\bopt\/([\w\.]+)/i],[d,[E,tt+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[d,[E,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[d,[E,"Dolphin"]],[/coast\/([\w\.]+)/i],[d,[E,tt+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[d,[E,"MIUI "+Ee]],[/fxios\/([-\w\.]+)/i],[d,[E,Ie]],[/\bqihu|(qi?ho?o?|360)browser/i],[[E,"360 "+Ee]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[E,/(.+)/,"$1 "+Ee],d],[/(comodo_dragon)\/([\w\.]+)/i],[[E,/_/g," "],d],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[E,d],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[E],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[E,qe],d],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[E,d],[/\bgsa\/([\w\.]+) .*safari\//i],[d,[E,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[d,[E,$+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[E,$+" WebView"],d],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[d,[E,"Android "+Ee]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[E,d],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[d,[E,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[d,E],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[E,[d,i,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[E,d],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[E,"Netscape"],d],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[d,[E,Ie+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[E,d]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[C,"amd64"]],[/(ia32(?=;))/i],[[C,he]],[/((?:i[346]|x)86)[;\)]/i],[[C,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[C,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[C,"armhf"]],[/windows (ce|mobile); ppc;/i],[[C,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[C,/ower/,"",he]],[/(sun4\w)[;\)]/i],[[C,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[C,he]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[h,[c,ve],[n,x]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[h,[c,ve],[n,k]],[/\((ip(?:hone|od)[\w ]*);/i],[h,[c,V],[n,k]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[h,[c,V],[n,x]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[h,[c,Ve],[n,x]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[h,[c,Ve],[n,k]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[h,/_/g," "],[c,pt],[n,k]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[h,/_/g," "],[c,pt],[n,x]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[h,[c,"OPPO"],[n,k]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[h,[c,"Vivo"],[n,k]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[h,[c,"Realme"],[n,k]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[h,[c,Ke],[n,k]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[h,[c,Ke],[n,x]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[h,[c,ye],[n,x]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[h,[c,ye],[n,k]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[h,[c,"Lenovo"],[n,x]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[h,/_/g," "],[c,"Nokia"],[n,k]],[/(pixel c)\b/i],[h,[c,Ze],[n,x]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[h,[c,Ze],[n,k]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[h,[c,Fe],[n,k]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[h,"Xperia Tablet"],[c,Fe],[n,x]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[h,[c,"OnePlus"],[n,k]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[h,[c,te],[n,x]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[h,/(.+)/g,"Fire Phone $1"],[c,te],[n,k]],[/(playbook);[-\w\),; ]+(rim)/i],[h,c,[n,x]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[h,[c,ce],[n,k]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[h,[c,ee],[n,x]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[h,[c,ee],[n,k]],[/(nexus 9)/i],[h,[c,"HTC"],[n,x]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[c,[h,/_/g," "],[n,k]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[h,[c,"Acer"],[n,x]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[h,[c,"Meizu"],[n,k]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[h,[c,"Sharp"],[n,k]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[c,h,[n,k]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[c,h,[n,x]],[/(surface duo)/i],[h,[c,ke],[n,x]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[h,[c,"Fairphone"],[n,k]],[/(u304aa)/i],[h,[c,"AT&T"],[n,k]],[/\bsie-(\w*)/i],[h,[c,"Siemens"],[n,k]],[/\b(rct\w+) b/i],[h,[c,"RCA"],[n,x]],[/\b(venue[\d ]{2,7}) b/i],[h,[c,"Dell"],[n,x]],[/\b(q(?:mv|ta)\w+) b/i],[h,[c,"Verizon"],[n,x]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[h,[c,"Barnes & Noble"],[n,x]],[/\b(tm\d{3}\w+) b/i],[h,[c,"NuVision"],[n,x]],[/\b(k88) b/i],[h,[c,"ZTE"],[n,x]],[/\b(nx\d{3}j) b/i],[h,[c,"ZTE"],[n,k]],[/\b(gen\d{3}) b.+49h/i],[h,[c,"Swiss"],[n,k]],[/\b(zur\d{3}) b/i],[h,[c,"Swiss"],[n,x]],[/\b((zeki)?tb.*\b) b/i],[h,[c,"Zeki"],[n,x]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[c,"Dragon Touch"],h,[n,x]],[/\b(ns-?\w{0,9}) b/i],[h,[c,"Insignia"],[n,x]],[/\b((nxa|next)-?\w{0,9}) b/i],[h,[c,"NextBook"],[n,x]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[c,"Voice"],h,[n,k]],[/\b(lvtel\-)?(v1[12]) b/i],[[c,"LvTel"],h,[n,k]],[/\b(ph-1) /i],[h,[c,"Essential"],[n,k]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[h,[c,"Envizen"],[n,x]],[/\b(trio[-\w\. ]+) b/i],[h,[c,"MachSpeed"],[n,x]],[/\btu_(1491) b/i],[h,[c,"Rotor"],[n,x]],[/(shield[\w ]+) b/i],[h,[c,"Nvidia"],[n,x]],[/(sprint) (\w+)/i],[c,h,[n,k]],[/(kin\.[onetw]{3})/i],[[h,/\./g," "],[c,ke],[n,k]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[h,[c,ft],[n,x]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[h,[c,ft],[n,k]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[c,h,[n,Z]],[/droid.+; (shield) bui/i],[h,[c,"Nvidia"],[n,Z]],[/(playstation [345portablevi]+)/i],[h,[c,Fe],[n,Z]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[h,[c,ke],[n,Z]],[/smart-tv.+(samsung)/i],[c,[n,ne]],[/hbbtv.+maple;(\d+)/i],[[h,/^/,"SmartTV"],[c,ve],[n,ne]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[c,ye],[n,ne]],[/(apple) ?tv/i],[c,[h,V+" TV"],[n,ne]],[/crkey/i],[[h,$+"cast"],[c,Ze],[n,ne]],[/droid.+aft(\w)( bui|\))/i],[h,[c,te],[n,ne]],[/\(dtv[\);].+(aquos)/i],[h,[c,"Sharp"],[n,ne]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[c,Ye],[h,Ye],[n,ne]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[n,ne]],[/((pebble))app/i],[c,h,[n,O]],[/droid.+; (glass) \d/i],[h,[c,Ze],[n,O]],[/droid.+; (wt63?0{2,3})\)/i],[h,[c,ft],[n,O]],[/(quest( 2)?)/i],[h,[c,qe],[n,O]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[c,[n,z]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[h,[n,k]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[h,[n,x]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[n,x]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[n,k]],[/(android[-\w\. ]{0,9});.+buil/i],[h,[c,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[d,[E,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[d,[E,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[E,d],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[d,E]],os:[[/microsoft (windows) (vista|xp)/i],[E,d],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[E,[d,i,v]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[E,"Windows"],[d,i,v]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[d,/_/g,"."],[E,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[E,"Mac OS"],[d,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[d,E],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[E,d],[/\(bb(10);/i],[d,[E,ce]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[d,[E,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[d,[E,Ie+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[d,[E,"webOS"]],[/crkey\/([\d\.]+)/i],[d,[E,$+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[E,"Chromium OS"],d],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[E,d],[/(sunos) ?([\w\.\d]*)/i],[[E,"Solaris"],d],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[E,d]]},W=function(Ge,Ce){if(typeof Ge===p&&(Ce=Ge,Ge=t),!(this instanceof W))return new W(Ge,Ce).getResult();var be=Ge||(typeof T!==y&&T.navigator&&T.navigator.userAgent?T.navigator.userAgent:""),Se=Ce?function(Ue,ze){var It={};for(var nt in Ue)ze[nt]&&ze[nt].length%2==0?It[nt]=ze[nt].concat(Ue[nt]):It[nt]=Ue[nt];return It}(S,Ce):S;return this.getBrowser=function(){var Ue,ze={};return ze[E]=t,ze[d]=t,f.call(ze,be,Se.browser),ze.major=typeof(Ue=ze.version)===u?Ue.replace(/[^\d\.]/g,"").split(".")[0]:t,ze},this.getCPU=function(){var Ue={};return Ue[C]=t,f.call(Ue,be,Se.cpu),Ue},this.getDevice=function(){var Ue={};return Ue[c]=t,Ue[h]=t,Ue[n]=t,f.call(Ue,be,Se.device),Ue},this.getEngine=function(){var Ue={};return Ue[E]=t,Ue[d]=t,f.call(Ue,be,Se.engine),Ue},this.getOS=function(){var Ue={};return Ue[E]=t,Ue[d]=t,f.call(Ue,be,Se.os),Ue},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return be},this.setUA=function(Ue){return be=typeof Ue===u&&Ue.length>255?Ye(Ue,255):Ue,this},this.setUA(be),this};W.VERSION="1.0.2",W.BROWSER=Je([E,d,"major"]),W.CPU=Je([C]),W.DEVICE=Je([h,c,n,Z,k,ne,x,O,z]),W.ENGINE=W.OS=Je([E,d]),typeof Re!==y?(et.exports&&(Re=et.exports=W),Re.UAParser=W):D.amdO?(oe=(function(){return W}).call(Re,D,Re,et))===t||(et.exports=oe):typeof T!==y&&(T.UAParser=W);var H=typeof T!==y&&(T.jQuery||T.Zepto);if(H&&!H.ua){var Te=new W;H.ua=Te.getResult(),H.ua.get=function(){return Te.getUA()},H.ua.set=function(Ge){Te.setUA(Ge);var Ce=Te.getResult();for(var be in Ce)H.ua[be]=Ce[be]}}})(typeof window=="object"?window:this)},7839:function(et,Re,D){function oe(T){try{if(!D.g.localStorage)return!1}catch{return!1}var t=D.g.localStorage[T];return t!=null&&String(t).toLowerCase()==="true"}et.exports=function(T,t){if(oe("noDeprecation"))return T;var e=!1;return function(){if(!e){if(oe("throwDeprecation"))throw new Error(t);oe("traceDeprecation")?console.trace(t):console.warn(t),e=!0}return T.apply(this,arguments)}}},9862:function(){},964:function(){},3165:function(et){et.exports=JSON.parse('["mni-beng-in","mni-mtei-in","sat-deva-in","sat-olck-in","shi-latn-ma","shi-tfng-ma","vai-latn-lr","vai-vaii-lr","yue-hans-cn","yue-hant-hk","az-arab-ir","az-cyrl-az","az-latn-az","bm-nkoo-ml","bs-cyrl-ba","bs-latn-ba","en-dsrt-us","ff-adlm-gn","ff-latn-sn","ha-arab-ng","hi-latn-in","iu-latn-ca","ks-arab-in","ks-deva-in","mn-mong-cn","ms-arab-my","pa-arab-pk","pa-guru-in","sd-arab-pk","sd-deva-in","sr-cyrl-rs","sr-latn-rs","su-latn-id","uz-arab-af","uz-cyrl-uz","uz-latn-uz","zh-hans-cn","zh-hant-tw","mni-beng","sat-olck","shi-tfng","vai-vaii","yue-hant","az-latn","bs-latn","ff-latn","jbo-001","ks-arab","pa-guru","prg-001","sd-arab","sr-cyrl","su-latn","uz-latn","zh-hans","agq-cm","ar-001","arn-cl","asa-tz","ast-es","bas-cm","bem-zm","bez-tz","bgn-pk","blt-vn","brx-in","bss-cm","byn-er","cad-us","cch-ng","ccp-bd","ceb-ph","cgg-ug","chr-us","cic-us","ckb-iq","dav-ke","dje-ne","doi-in","dsb-de","dua-cm","dyo-sn","ebu-ke","eo-001","ewo-cm","fil-ph","fur-it","gaa-gh","gez-et","gsw-ch","guz-ke","haw-us","hsb-de","ia-001","ife-tg","io-001","jgo-cm","jmc-tz","kab-dz","kaj-ng","kam-ke","kcg-ng","kde-tz","kea-cv","ken-cm","khq-ml","kkj-cm","kln-ke","kok-in","kpe-lr","ksb-tz","ksf-cm","ksh-de","lag-tz","lkt-us","lrc-ir","luo-ke","luy-ke","mai-in","mas-ke","mer-ke","mfe-mu","mgh-mz","mgo-cm","moh-ca","mua-cm","mus-us","myv-ru","mzn-ir","naq-na","nds-de","nmg-cm","nnh-cm","nqo-gn","nso-za","nus-ss","nyn-ug","osa-us","pcm-ng","quc-gt","rof-tz","rwk-tz","sah-ru","saq-ke","sbp-tz","scn-it","sdh-ir","seh-mz","ses-ml","sid-et","sma-se","smj-se","smn-fi","sms-fi","ssy-er","syr-iq","szl-pl","teo-ug","tig-er","trv-tw","trw-pk","twq-ne","tzm-ma","vo-001","vun-tz","wae-ch","wal-et","wbp-au","xog-ug","yav-cm","yi-001","zgh-ma","aa-et","af-za","ak-gh","am-et","an-es","as-in","ba-ru","be-by","bg-bg","bm-ml","bn-bd","bo-cn","br-fr","ca-es","ce-ru","co-fr","cs-cz","cu-ru","cv-ru","cy-gb","da-dk","de-de","dv-mv","dz-bt","ee-gh","el-gr","en-us","es-es","et-ee","eu-es","fa-ir","fi-fi","fo-fo","fr-fr","fy-nl","ga-ie","gd-gb","gl-es","gn-py","gu-in","gv-im","ha-ng","he-il","hi-in","hr-hr","hu-hu","hy-am","id-id","ig-ng","ii-cn","is-is","it-it","iu-ca","ja-jp","jv-id","ka-ge","ki-ke","kk-kz","kl-gl","km-kh","kn-in","ko-kr","ku-tr","kw-gb","ky-kg","lb-lu","lg-ug","ln-cd","lo-la","lt-lt","lu-cd","lv-lv","mg-mg","mi-nz","mk-mk","ml-in","mn-mn","mr-in","ms-my","mt-mt","my-mm","nb-no","nd-zw","ne-np","nl-nl","nn-no","nr-za","nv-us","ny-mw","oc-fr","om-et","or-in","os-ge","pl-pl","ps-af","pt-br","qu-pe","rm-ch","rn-bi","ro-ro","ru-ru","rw-rw","sa-in","sc-it","se-no","sg-cf","si-lk","sk-sk","sl-si","sn-zw","so-so","sq-al","ss-za","st-za","sv-se","sw-tz","ta-in","te-in","tg-tj","th-th","ti-et","tk-tm","tn-za","to-to","tr-tr","ts-za","tt-ru","ug-cn","uk-ua","ur-pk","ve-za","vi-vn","wa-be","wo-sn","xh-za","yo-ng","zu-za"]')},5813:function(et){et.exports=JSON.parse('[{"from":{"field":"script","value":"qaai"},"to":{"field":"script","value":"zinh"}},{"from":{"field":"region","value":"bu"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"ct"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"dd"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"dy"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"fx"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"hv"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"jt"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"mi"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"nh"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"nq"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"pu"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"pz"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"qu"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"rh"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"tp"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"uk"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"vd"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"wk"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"yd"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"zr"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"230"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"280"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"736"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"886"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"958"},"to":{"field":"region","value":"aa"}},{"from":{"field":"region","value":"020"},"to":{"field":"region","value":"ad"}},{"from":{"field":"region","value":"784"},"to":{"field":"region","value":"ae"}},{"from":{"field":"region","value":"004"},"to":{"field":"region","value":"af"}},{"from":{"field":"region","value":"028"},"to":{"field":"region","value":"ag"}},{"from":{"field":"region","value":"660"},"to":{"field":"region","value":"ai"}},{"from":{"field":"region","value":"008"},"to":{"field":"region","value":"al"}},{"from":{"field":"region","value":"051"},"to":{"field":"region","value":"am"}},{"from":{"field":"region","value":"024"},"to":{"field":"region","value":"ao"}},{"from":{"field":"region","value":"010"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"032"},"to":{"field":"region","value":"ar"}},{"from":{"field":"region","value":"016"},"to":{"field":"region","value":"as"}},{"from":{"field":"region","value":"040"},"to":{"field":"region","value":"at"}},{"from":{"field":"region","value":"036"},"to":{"field":"region","value":"au"}},{"from":{"field":"region","value":"533"},"to":{"field":"region","value":"aw"}},{"from":{"field":"region","value":"248"},"to":{"field":"region","value":"ax"}},{"from":{"field":"region","value":"031"},"to":{"field":"region","value":"az"}},{"from":{"field":"region","value":"070"},"to":{"field":"region","value":"ba"}},{"from":{"field":"region","value":"052"},"to":{"field":"region","value":"bb"}},{"from":{"field":"region","value":"050"},"to":{"field":"region","value":"bd"}},{"from":{"field":"region","value":"056"},"to":{"field":"region","value":"be"}},{"from":{"field":"region","value":"854"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"100"},"to":{"field":"region","value":"bg"}},{"from":{"field":"region","value":"048"},"to":{"field":"region","value":"bh"}},{"from":{"field":"region","value":"108"},"to":{"field":"region","value":"bi"}},{"from":{"field":"region","value":"204"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"652"},"to":{"field":"region","value":"bl"}},{"from":{"field":"region","value":"060"},"to":{"field":"region","value":"bm"}},{"from":{"field":"region","value":"096"},"to":{"field":"region","value":"bn"}},{"from":{"field":"region","value":"068"},"to":{"field":"region","value":"bo"}},{"from":{"field":"region","value":"535"},"to":{"field":"region","value":"bq"}},{"from":{"field":"region","value":"076"},"to":{"field":"region","value":"br"}},{"from":{"field":"region","value":"044"},"to":{"field":"region","value":"bs"}},{"from":{"field":"region","value":"064"},"to":{"field":"region","value":"bt"}},{"from":{"field":"region","value":"104"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"074"},"to":{"field":"region","value":"bv"}},{"from":{"field":"region","value":"072"},"to":{"field":"region","value":"bw"}},{"from":{"field":"region","value":"112"},"to":{"field":"region","value":"by"}},{"from":{"field":"region","value":"084"},"to":{"field":"region","value":"bz"}},{"from":{"field":"region","value":"124"},"to":{"field":"region","value":"ca"}},{"from":{"field":"region","value":"166"},"to":{"field":"region","value":"cc"}},{"from":{"field":"region","value":"180"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"140"},"to":{"field":"region","value":"cf"}},{"from":{"field":"region","value":"178"},"to":{"field":"region","value":"cg"}},{"from":{"field":"region","value":"756"},"to":{"field":"region","value":"ch"}},{"from":{"field":"region","value":"384"},"to":{"field":"region","value":"ci"}},{"from":{"field":"region","value":"184"},"to":{"field":"region","value":"ck"}},{"from":{"field":"region","value":"152"},"to":{"field":"region","value":"cl"}},{"from":{"field":"region","value":"120"},"to":{"field":"region","value":"cm"}},{"from":{"field":"region","value":"156"},"to":{"field":"region","value":"cn"}},{"from":{"field":"region","value":"170"},"to":{"field":"region","value":"co"}},{"from":{"field":"region","value":"188"},"to":{"field":"region","value":"cr"}},{"from":{"field":"region","value":"192"},"to":{"field":"region","value":"cu"}},{"from":{"field":"region","value":"132"},"to":{"field":"region","value":"cv"}},{"from":{"field":"region","value":"531"},"to":{"field":"region","value":"cw"}},{"from":{"field":"region","value":"162"},"to":{"field":"region","value":"cx"}},{"from":{"field":"region","value":"196"},"to":{"field":"region","value":"cy"}},{"from":{"field":"region","value":"203"},"to":{"field":"region","value":"cz"}},{"from":{"field":"region","value":"278"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"276"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"262"},"to":{"field":"region","value":"dj"}},{"from":{"field":"region","value":"208"},"to":{"field":"region","value":"dk"}},{"from":{"field":"region","value":"212"},"to":{"field":"region","value":"dm"}},{"from":{"field":"region","value":"214"},"to":{"field":"region","value":"do"}},{"from":{"field":"region","value":"012"},"to":{"field":"region","value":"dz"}},{"from":{"field":"region","value":"218"},"to":{"field":"region","value":"ec"}},{"from":{"field":"region","value":"233"},"to":{"field":"region","value":"ee"}},{"from":{"field":"region","value":"818"},"to":{"field":"region","value":"eg"}},{"from":{"field":"region","value":"732"},"to":{"field":"region","value":"eh"}},{"from":{"field":"region","value":"232"},"to":{"field":"region","value":"er"}},{"from":{"field":"region","value":"724"},"to":{"field":"region","value":"es"}},{"from":{"field":"region","value":"231"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"246"},"to":{"field":"region","value":"fi"}},{"from":{"field":"region","value":"242"},"to":{"field":"region","value":"fj"}},{"from":{"field":"region","value":"238"},"to":{"field":"region","value":"fk"}},{"from":{"field":"region","value":"583"},"to":{"field":"region","value":"fm"}},{"from":{"field":"region","value":"234"},"to":{"field":"region","value":"fo"}},{"from":{"field":"region","value":"250"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"249"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"266"},"to":{"field":"region","value":"ga"}},{"from":{"field":"region","value":"826"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"308"},"to":{"field":"region","value":"gd"}},{"from":{"field":"region","value":"268"},"to":{"field":"region","value":"ge"}},{"from":{"field":"region","value":"254"},"to":{"field":"region","value":"gf"}},{"from":{"field":"region","value":"831"},"to":{"field":"region","value":"gg"}},{"from":{"field":"region","value":"288"},"to":{"field":"region","value":"gh"}},{"from":{"field":"region","value":"292"},"to":{"field":"region","value":"gi"}},{"from":{"field":"region","value":"304"},"to":{"field":"region","value":"gl"}},{"from":{"field":"region","value":"270"},"to":{"field":"region","value":"gm"}},{"from":{"field":"region","value":"324"},"to":{"field":"region","value":"gn"}},{"from":{"field":"region","value":"312"},"to":{"field":"region","value":"gp"}},{"from":{"field":"region","value":"226"},"to":{"field":"region","value":"gq"}},{"from":{"field":"region","value":"300"},"to":{"field":"region","value":"gr"}},{"from":{"field":"region","value":"239"},"to":{"field":"region","value":"gs"}},{"from":{"field":"region","value":"320"},"to":{"field":"region","value":"gt"}},{"from":{"field":"region","value":"316"},"to":{"field":"region","value":"gu"}},{"from":{"field":"region","value":"624"},"to":{"field":"region","value":"gw"}},{"from":{"field":"region","value":"328"},"to":{"field":"region","value":"gy"}},{"from":{"field":"region","value":"344"},"to":{"field":"region","value":"hk"}},{"from":{"field":"region","value":"334"},"to":{"field":"region","value":"hm"}},{"from":{"field":"region","value":"340"},"to":{"field":"region","value":"hn"}},{"from":{"field":"region","value":"191"},"to":{"field":"region","value":"hr"}},{"from":{"field":"region","value":"332"},"to":{"field":"region","value":"ht"}},{"from":{"field":"region","value":"348"},"to":{"field":"region","value":"hu"}},{"from":{"field":"region","value":"360"},"to":{"field":"region","value":"id"}},{"from":{"field":"region","value":"372"},"to":{"field":"region","value":"ie"}},{"from":{"field":"region","value":"376"},"to":{"field":"region","value":"il"}},{"from":{"field":"region","value":"833"},"to":{"field":"region","value":"im"}},{"from":{"field":"region","value":"356"},"to":{"field":"region","value":"in"}},{"from":{"field":"region","value":"086"},"to":{"field":"region","value":"io"}},{"from":{"field":"region","value":"368"},"to":{"field":"region","value":"iq"}},{"from":{"field":"region","value":"364"},"to":{"field":"region","value":"ir"}},{"from":{"field":"region","value":"352"},"to":{"field":"region","value":"is"}},{"from":{"field":"region","value":"380"},"to":{"field":"region","value":"it"}},{"from":{"field":"region","value":"832"},"to":{"field":"region","value":"je"}},{"from":{"field":"region","value":"388"},"to":{"field":"region","value":"jm"}},{"from":{"field":"region","value":"400"},"to":{"field":"region","value":"jo"}},{"from":{"field":"region","value":"392"},"to":{"field":"region","value":"jp"}},{"from":{"field":"region","value":"404"},"to":{"field":"region","value":"ke"}},{"from":{"field":"region","value":"417"},"to":{"field":"region","value":"kg"}},{"from":{"field":"region","value":"116"},"to":{"field":"region","value":"kh"}},{"from":{"field":"region","value":"296"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"174"},"to":{"field":"region","value":"km"}},{"from":{"field":"region","value":"659"},"to":{"field":"region","value":"kn"}},{"from":{"field":"region","value":"408"},"to":{"field":"region","value":"kp"}},{"from":{"field":"region","value":"410"},"to":{"field":"region","value":"kr"}},{"from":{"field":"region","value":"414"},"to":{"field":"region","value":"kw"}},{"from":{"field":"region","value":"136"},"to":{"field":"region","value":"ky"}},{"from":{"field":"region","value":"398"},"to":{"field":"region","value":"kz"}},{"from":{"field":"region","value":"418"},"to":{"field":"region","value":"la"}},{"from":{"field":"region","value":"422"},"to":{"field":"region","value":"lb"}},{"from":{"field":"region","value":"662"},"to":{"field":"region","value":"lc"}},{"from":{"field":"region","value":"438"},"to":{"field":"region","value":"li"}},{"from":{"field":"region","value":"144"},"to":{"field":"region","value":"lk"}},{"from":{"field":"region","value":"430"},"to":{"field":"region","value":"lr"}},{"from":{"field":"region","value":"426"},"to":{"field":"region","value":"ls"}},{"from":{"field":"region","value":"440"},"to":{"field":"region","value":"lt"}},{"from":{"field":"region","value":"442"},"to":{"field":"region","value":"lu"}},{"from":{"field":"region","value":"428"},"to":{"field":"region","value":"lv"}},{"from":{"field":"region","value":"434"},"to":{"field":"region","value":"ly"}},{"from":{"field":"region","value":"504"},"to":{"field":"region","value":"ma"}},{"from":{"field":"region","value":"492"},"to":{"field":"region","value":"mc"}},{"from":{"field":"region","value":"498"},"to":{"field":"region","value":"md"}},{"from":{"field":"region","value":"499"},"to":{"field":"region","value":"me"}},{"from":{"field":"region","value":"663"},"to":{"field":"region","value":"mf"}},{"from":{"field":"region","value":"450"},"to":{"field":"region","value":"mg"}},{"from":{"field":"region","value":"584"},"to":{"field":"region","value":"mh"}},{"from":{"field":"region","value":"807"},"to":{"field":"region","value":"mk"}},{"from":{"field":"region","value":"466"},"to":{"field":"region","value":"ml"}},{"from":{"field":"region","value":"496"},"to":{"field":"region","value":"mn"}},{"from":{"field":"region","value":"446"},"to":{"field":"region","value":"mo"}},{"from":{"field":"region","value":"580"},"to":{"field":"region","value":"mp"}},{"from":{"field":"region","value":"474"},"to":{"field":"region","value":"mq"}},{"from":{"field":"region","value":"478"},"to":{"field":"region","value":"mr"}},{"from":{"field":"region","value":"500"},"to":{"field":"region","value":"ms"}},{"from":{"field":"region","value":"470"},"to":{"field":"region","value":"mt"}},{"from":{"field":"region","value":"480"},"to":{"field":"region","value":"mu"}},{"from":{"field":"region","value":"462"},"to":{"field":"region","value":"mv"}},{"from":{"field":"region","value":"454"},"to":{"field":"region","value":"mw"}},{"from":{"field":"region","value":"484"},"to":{"field":"region","value":"mx"}},{"from":{"field":"region","value":"458"},"to":{"field":"region","value":"my"}},{"from":{"field":"region","value":"508"},"to":{"field":"region","value":"mz"}},{"from":{"field":"region","value":"516"},"to":{"field":"region","value":"na"}},{"from":{"field":"region","value":"540"},"to":{"field":"region","value":"nc"}},{"from":{"field":"region","value":"562"},"to":{"field":"region","value":"ne"}},{"from":{"field":"region","value":"574"},"to":{"field":"region","value":"nf"}},{"from":{"field":"region","value":"566"},"to":{"field":"region","value":"ng"}},{"from":{"field":"region","value":"558"},"to":{"field":"region","value":"ni"}},{"from":{"field":"region","value":"528"},"to":{"field":"region","value":"nl"}},{"from":{"field":"region","value":"578"},"to":{"field":"region","value":"no"}},{"from":{"field":"region","value":"524"},"to":{"field":"region","value":"np"}},{"from":{"field":"region","value":"520"},"to":{"field":"region","value":"nr"}},{"from":{"field":"region","value":"570"},"to":{"field":"region","value":"nu"}},{"from":{"field":"region","value":"554"},"to":{"field":"region","value":"nz"}},{"from":{"field":"region","value":"512"},"to":{"field":"region","value":"om"}},{"from":{"field":"region","value":"591"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"604"},"to":{"field":"region","value":"pe"}},{"from":{"field":"region","value":"258"},"to":{"field":"region","value":"pf"}},{"from":{"field":"region","value":"598"},"to":{"field":"region","value":"pg"}},{"from":{"field":"region","value":"608"},"to":{"field":"region","value":"ph"}},{"from":{"field":"region","value":"586"},"to":{"field":"region","value":"pk"}},{"from":{"field":"region","value":"616"},"to":{"field":"region","value":"pl"}},{"from":{"field":"region","value":"666"},"to":{"field":"region","value":"pm"}},{"from":{"field":"region","value":"612"},"to":{"field":"region","value":"pn"}},{"from":{"field":"region","value":"630"},"to":{"field":"region","value":"pr"}},{"from":{"field":"region","value":"275"},"to":{"field":"region","value":"ps"}},{"from":{"field":"region","value":"620"},"to":{"field":"region","value":"pt"}},{"from":{"field":"region","value":"585"},"to":{"field":"region","value":"pw"}},{"from":{"field":"region","value":"600"},"to":{"field":"region","value":"py"}},{"from":{"field":"region","value":"634"},"to":{"field":"region","value":"qa"}},{"from":{"field":"region","value":"959"},"to":{"field":"region","value":"qm"}},{"from":{"field":"region","value":"960"},"to":{"field":"region","value":"qn"}},{"from":{"field":"region","value":"962"},"to":{"field":"region","value":"qp"}},{"from":{"field":"region","value":"963"},"to":{"field":"region","value":"qq"}},{"from":{"field":"region","value":"964"},"to":{"field":"region","value":"qr"}},{"from":{"field":"region","value":"965"},"to":{"field":"region","value":"qs"}},{"from":{"field":"region","value":"966"},"to":{"field":"region","value":"qt"}},{"from":{"field":"region","value":"967"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"968"},"to":{"field":"region","value":"qv"}},{"from":{"field":"region","value":"969"},"to":{"field":"region","value":"qw"}},{"from":{"field":"region","value":"970"},"to":{"field":"region","value":"qx"}},{"from":{"field":"region","value":"971"},"to":{"field":"region","value":"qy"}},{"from":{"field":"region","value":"972"},"to":{"field":"region","value":"qz"}},{"from":{"field":"region","value":"638"},"to":{"field":"region","value":"re"}},{"from":{"field":"region","value":"642"},"to":{"field":"region","value":"ro"}},{"from":{"field":"region","value":"688"},"to":{"field":"region","value":"rs"}},{"from":{"field":"region","value":"643"},"to":{"field":"region","value":"ru"}},{"from":{"field":"region","value":"646"},"to":{"field":"region","value":"rw"}},{"from":{"field":"region","value":"682"},"to":{"field":"region","value":"sa"}},{"from":{"field":"region","value":"090"},"to":{"field":"region","value":"sb"}},{"from":{"field":"region","value":"690"},"to":{"field":"region","value":"sc"}},{"from":{"field":"region","value":"729"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"752"},"to":{"field":"region","value":"se"}},{"from":{"field":"region","value":"702"},"to":{"field":"region","value":"sg"}},{"from":{"field":"region","value":"654"},"to":{"field":"region","value":"sh"}},{"from":{"field":"region","value":"705"},"to":{"field":"region","value":"si"}},{"from":{"field":"region","value":"744"},"to":{"field":"region","value":"sj"}},{"from":{"field":"region","value":"703"},"to":{"field":"region","value":"sk"}},{"from":{"field":"region","value":"694"},"to":{"field":"region","value":"sl"}},{"from":{"field":"region","value":"674"},"to":{"field":"region","value":"sm"}},{"from":{"field":"region","value":"686"},"to":{"field":"region","value":"sn"}},{"from":{"field":"region","value":"706"},"to":{"field":"region","value":"so"}},{"from":{"field":"region","value":"740"},"to":{"field":"region","value":"sr"}},{"from":{"field":"region","value":"728"},"to":{"field":"region","value":"ss"}},{"from":{"field":"region","value":"678"},"to":{"field":"region","value":"st"}},{"from":{"field":"region","value":"222"},"to":{"field":"region","value":"sv"}},{"from":{"field":"region","value":"534"},"to":{"field":"region","value":"sx"}},{"from":{"field":"region","value":"760"},"to":{"field":"region","value":"sy"}},{"from":{"field":"region","value":"748"},"to":{"field":"region","value":"sz"}},{"from":{"field":"region","value":"796"},"to":{"field":"region","value":"tc"}},{"from":{"field":"region","value":"148"},"to":{"field":"region","value":"td"}},{"from":{"field":"region","value":"260"},"to":{"field":"region","value":"tf"}},{"from":{"field":"region","value":"768"},"to":{"field":"region","value":"tg"}},{"from":{"field":"region","value":"764"},"to":{"field":"region","value":"th"}},{"from":{"field":"region","value":"762"},"to":{"field":"region","value":"tj"}},{"from":{"field":"region","value":"772"},"to":{"field":"region","value":"tk"}},{"from":{"field":"region","value":"626"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"795"},"to":{"field":"region","value":"tm"}},{"from":{"field":"region","value":"788"},"to":{"field":"region","value":"tn"}},{"from":{"field":"region","value":"776"},"to":{"field":"region","value":"to"}},{"from":{"field":"region","value":"792"},"to":{"field":"region","value":"tr"}},{"from":{"field":"region","value":"780"},"to":{"field":"region","value":"tt"}},{"from":{"field":"region","value":"798"},"to":{"field":"region","value":"tv"}},{"from":{"field":"region","value":"158"},"to":{"field":"region","value":"tw"}},{"from":{"field":"region","value":"834"},"to":{"field":"region","value":"tz"}},{"from":{"field":"region","value":"804"},"to":{"field":"region","value":"ua"}},{"from":{"field":"region","value":"800"},"to":{"field":"region","value":"ug"}},{"from":{"field":"region","value":"581"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"840"},"to":{"field":"region","value":"us"}},{"from":{"field":"region","value":"858"},"to":{"field":"region","value":"uy"}},{"from":{"field":"region","value":"860"},"to":{"field":"region","value":"uz"}},{"from":{"field":"region","value":"336"},"to":{"field":"region","value":"va"}},{"from":{"field":"region","value":"670"},"to":{"field":"region","value":"vc"}},{"from":{"field":"region","value":"862"},"to":{"field":"region","value":"ve"}},{"from":{"field":"region","value":"092"},"to":{"field":"region","value":"vg"}},{"from":{"field":"region","value":"850"},"to":{"field":"region","value":"vi"}},{"from":{"field":"region","value":"704"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"548"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"876"},"to":{"field":"region","value":"wf"}},{"from":{"field":"region","value":"882"},"to":{"field":"region","value":"ws"}},{"from":{"field":"region","value":"973"},"to":{"field":"region","value":"xa"}},{"from":{"field":"region","value":"974"},"to":{"field":"region","value":"xb"}},{"from":{"field":"region","value":"975"},"to":{"field":"region","value":"xc"}},{"from":{"field":"region","value":"976"},"to":{"field":"region","value":"xd"}},{"from":{"field":"region","value":"977"},"to":{"field":"region","value":"xe"}},{"from":{"field":"region","value":"978"},"to":{"field":"region","value":"xf"}},{"from":{"field":"region","value":"979"},"to":{"field":"region","value":"xg"}},{"from":{"field":"region","value":"980"},"to":{"field":"region","value":"xh"}},{"from":{"field":"region","value":"981"},"to":{"field":"region","value":"xi"}},{"from":{"field":"region","value":"982"},"to":{"field":"region","value":"xj"}},{"from":{"field":"region","value":"983"},"to":{"field":"region","value":"xk"}},{"from":{"field":"region","value":"984"},"to":{"field":"region","value":"xl"}},{"from":{"field":"region","value":"985"},"to":{"field":"region","value":"xm"}},{"from":{"field":"region","value":"986"},"to":{"field":"region","value":"xn"}},{"from":{"field":"region","value":"987"},"to":{"field":"region","value":"xo"}},{"from":{"field":"region","value":"988"},"to":{"field":"region","value":"xp"}},{"from":{"field":"region","value":"989"},"to":{"field":"region","value":"xq"}},{"from":{"field":"region","value":"990"},"to":{"field":"region","value":"xr"}},{"from":{"field":"region","value":"991"},"to":{"field":"region","value":"xs"}},{"from":{"field":"region","value":"992"},"to":{"field":"region","value":"xt"}},{"from":{"field":"region","value":"993"},"to":{"field":"region","value":"xu"}},{"from":{"field":"region","value":"994"},"to":{"field":"region","value":"xv"}},{"from":{"field":"region","value":"995"},"to":{"field":"region","value":"xw"}},{"from":{"field":"region","value":"996"},"to":{"field":"region","value":"xx"}},{"from":{"field":"region","value":"997"},"to":{"field":"region","value":"xy"}},{"from":{"field":"region","value":"998"},"to":{"field":"region","value":"xz"}},{"from":{"field":"region","value":"720"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"887"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"175"},"to":{"field":"region","value":"yt"}},{"from":{"field":"region","value":"710"},"to":{"field":"region","value":"za"}},{"from":{"field":"region","value":"894"},"to":{"field":"region","value":"zm"}},{"from":{"field":"region","value":"716"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"999"},"to":{"field":"region","value":"zz"}},{"from":{"field":"variants","value":"aaland"},"to":{"field":"region","value":"ax"}},{"from":{"field":"variants","value":"polytoni"},"to":{"field":"variants","value":"polyton"}},{"from":{"field":"variants","value":"heploc"},"to":{"field":"variants","value":"alalc97"}},{"from":{"field":"variants","value":"arevela"},"to":{"field":"language","value":"hy"}},{"from":{"field":"variants","value":"arevmda"},"to":{"field":"language","value":"hyw"}}]')},9460:function(et){et.exports=JSON.parse('{"region":{"172":["ru","am","az","by","ge","kg","kz","md","tj","tm","ua","uz"],"200":["cz","sk"],"530":["cw","sx","bq"],"532":["cw","sx","bq"],"536":["sa","iq"],"582":["fm","mh","mp","pw"],"810":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"830":["je","gg"],"890":["rs","me","si","hr","mk","ba"],"891":["rs","me"],"an":["cw","sx","bq"],"cs":["rs","me"],"fq":["aq","tf"],"nt":["sa","iq"],"pc":["fm","mh","mp","pw"],"su":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yu":["rs","me"],"062":["034","143"],"ant":["cw","sx","bq"],"scg":["rs","me"],"ntz":["sa","iq"],"sun":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yug":["rs","me"]}}')},7778:function(et){et.exports=JSON.parse('[{"from":"in","to":"id"},{"from":"iw","to":"he"},{"from":"ji","to":"yi"},{"from":"jw","to":"jv"},{"from":"mo","to":"ro"},{"from":"scc","to":"sr"},{"from":"scr","to":"hr"},{"from":"aam","to":"aas"},{"from":"adp","to":"dz"},{"from":"aue","to":"ktz"},{"from":"ayx","to":"nun"},{"from":"bgm","to":"bcg"},{"from":"bjd","to":"drl"},{"from":"ccq","to":"rki"},{"from":"cjr","to":"mom"},{"from":"cka","to":"cmr"},{"from":"cmk","to":"xch"},{"from":"coy","to":"pij"},{"from":"cqu","to":"quh"},{"from":"drh","to":"mn"},{"from":"drw","to":"fa-af"},{"from":"gav","to":"dev"},{"from":"gfx","to":"vaj"},{"from":"ggn","to":"gvr"},{"from":"gti","to":"nyc"},{"from":"guv","to":"duz"},{"from":"hrr","to":"jal"},{"from":"ibi","to":"opa"},{"from":"ilw","to":"gal"},{"from":"jeg","to":"oyb"},{"from":"kgc","to":"tdf"},{"from":"kgh","to":"kml"},{"from":"koj","to":"kwv"},{"from":"krm","to":"bmf"},{"from":"ktr","to":"dtp"},{"from":"kvs","to":"gdj"},{"from":"kwq","to":"yam"},{"from":"kxe","to":"tvd"},{"from":"kzj","to":"dtp"},{"from":"kzt","to":"dtp"},{"from":"lii","to":"raq"},{"from":"lmm","to":"rmx"},{"from":"meg","to":"cir"},{"from":"mst","to":"mry"},{"from":"mwj","to":"vaj"},{"from":"myt","to":"mry"},{"from":"nad","to":"xny"},{"from":"ncp","to":"kdz"},{"from":"nnx","to":"ngv"},{"from":"nts","to":"pij"},{"from":"oun","to":"vaj"},{"from":"pcr","to":"adx"},{"from":"pmc","to":"huw"},{"from":"pmu","to":"phr"},{"from":"ppa","to":"bfy"},{"from":"ppr","to":"lcq"},{"from":"pry","to":"prt"},{"from":"puz","to":"pub"},{"from":"sca","to":"hle"},{"from":"skk","to":"oyb"},{"from":"tdu","to":"dtp"},{"from":"thc","to":"tpo"},{"from":"thx","to":"oyb"},{"from":"tie","to":"ras"},{"from":"tkk","to":"twm"},{"from":"tlw","to":"weo"},{"from":"tmp","to":"tyj"},{"from":"tne","to":"kak"},{"from":"tnf","to":"fa-af"},{"from":"tsf","to":"taj"},{"from":"uok","to":"ema"},{"from":"xba","to":"cax"},{"from":"xia","to":"acn"},{"from":"xkh","to":"waw"},{"from":"xsj","to":"suj"},{"from":"ybd","to":"rki"},{"from":"yma","to":"lrr"},{"from":"ymt","to":"mtm"},{"from":"yos","to":"zom"},{"from":"yuu","to":"yug"},{"from":"asd","to":"snz"},{"from":"dit","to":"dif"},{"from":"llo","to":"ngt"},{"from":"myd","to":"aog"},{"from":"nns","to":"nbr"},{"from":"sgn-br","to":"bzs"},{"from":"sgn-co","to":"csn"},{"from":"sgn-de","to":"gsg"},{"from":"sgn-dk","to":"dsl"},{"from":"sgn-fr","to":"fsl"},{"from":"sgn-gb","to":"bfi"},{"from":"sgn-gr","to":"gss"},{"from":"sgn-ie","to":"isg"},{"from":"sgn-it","to":"ise"},{"from":"sgn-jp","to":"jsl"},{"from":"sgn-mx","to":"mfs"},{"from":"sgn-ni","to":"ncs"},{"from":"sgn-nl","to":"dse"},{"from":"sgn-no","to":"nsi"},{"from":"sgn-pt","to":"psr"},{"from":"sgn-se","to":"swl"},{"from":"sgn-us","to":"ase"},{"from":"sgn-za","to":"sfs"},{"from":"no-bokmal","to":"nb"},{"from":"no-nynorsk","to":"nn"},{"from":"aa-saaho","to":"ssy"},{"from":"sh","to":"sr-latn"},{"from":"cnr","to":"sr-me"},{"from":"no","to":"nb"},{"from":"tl","to":"fil"},{"from":"az-az","to":"az-latn-az"},{"from":"bs-ba","to":"bs-latn-ba"},{"from":"ha-latn-gh","to":"ha-gh"},{"from":"ha-latn-ne","to":"ha-ne"},{"from":"ha-latn-ng","to":"ha-ng"},{"from":"kk-cyrl-kz","to":"kk-kz"},{"from":"ky-cyrl-kg","to":"ky-kg"},{"from":"ks-arab-in","to":"ks-in"},{"from":"mn-cyrl-mn","to":"mn-mn"},{"from":"ms-latn-bn","to":"ms-bn"},{"from":"ms-latn-my","to":"ms-my"},{"from":"ms-latn-sg","to":"ms-sg"},{"from":"pa-in","to":"pa-guru-in"},{"from":"pa-pk","to":"pa-arab-pk"},{"from":"shi-ma","to":"shi-tfng-ma"},{"from":"sr-ba","to":"sr-cyrl-ba"},{"from":"sr-me","to":"sr-latn-me"},{"from":"sr-rs","to":"sr-cyrl-rs"},{"from":"sr-xk","to":"sr-cyrl-xk"},{"from":"tzm-latn-ma","to":"tzm-ma"},{"from":"ug-arab-cn","to":"ug-cn"},{"from":"uz-af","to":"uz-arab-af"},{"from":"uz-uz","to":"uz-latn-uz"},{"from":"vai-lr","to":"vai-vaii-lr"},{"from":"yue-cn","to":"yue-hans-cn"},{"from":"yue-hk","to":"yue-hant-hk"},{"from":"zh-cn","to":"zh-hans-cn"},{"from":"zh-hk","to":"zh-hant-hk"},{"from":"zh-mo","to":"zh-hant-mo"},{"from":"zh-sg","to":"zh-hans-sg"},{"from":"zh-tw","to":"zh-hant-tw"},{"from":"aju","to":"jrb"},{"from":"als","to":"sq"},{"from":"arb","to":"ar"},{"from":"ayr","to":"ay"},{"from":"azj","to":"az"},{"from":"bcc","to":"bal"},{"from":"bcl","to":"bik"},{"from":"bxk","to":"luy"},{"from":"bxr","to":"bua"},{"from":"cld","to":"syr"},{"from":"cmn","to":"zh"},{"from":"cwd","to":"cr"},{"from":"dgo","to":"doi"},{"from":"dhd","to":"mwr"},{"from":"dik","to":"din"},{"from":"diq","to":"zza"},{"from":"lbk","to":"bnc"},{"from":"ekk","to":"et"},{"from":"emk","to":"man"},{"from":"esk","to":"ik"},{"from":"fat","to":"ak"},{"from":"fuc","to":"ff"},{"from":"gaz","to":"om"},{"from":"gbo","to":"grb"},{"from":"gno","to":"gon"},{"from":"gug","to":"gn"},{"from":"gya","to":"gba"},{"from":"hdn","to":"hai"},{"from":"hea","to":"hmn"},{"from":"ike","to":"iu"},{"from":"kmr","to":"ku"},{"from":"knc","to":"kr"},{"from":"kng","to":"kg"},{"from":"knn","to":"kok"},{"from":"kpv","to":"kv"},{"from":"lvs","to":"lv"},{"from":"mhr","to":"chm"},{"from":"mup","to":"raj"},{"from":"khk","to":"mn"},{"from":"npi","to":"ne"},{"from":"ojg","to":"oj"},{"from":"ory","to":"or"},{"from":"pbu","to":"ps"},{"from":"pes","to":"fa"},{"from":"plt","to":"mg"},{"from":"pnb","to":"lah"},{"from":"quz","to":"qu"},{"from":"rmy","to":"rom"},{"from":"spy","to":"kln"},{"from":"src","to":"sc"},{"from":"swh","to":"sw"},{"from":"ttq","to":"tmh"},{"from":"tw","to":"ak"},{"from":"umu","to":"del"},{"from":"uzn","to":"uz"},{"from":"xpe","to":"kpe"},{"from":"xsl","to":"den"},{"from":"ydd","to":"yi"},{"from":"zai","to":"zap"},{"from":"zsm","to":"ms"},{"from":"zyb","to":"za"},{"from":"him","to":"srx"},{"from":"mnk","to":"man"},{"from":"bh","to":"bho"},{"from":"prs","to":"fa-af"},{"from":"swc","to":"sw-cd"},{"from":"aar","to":"aa"},{"from":"abk","to":"ab"},{"from":"ave","to":"ae"},{"from":"afr","to":"af"},{"from":"aka","to":"ak"},{"from":"amh","to":"am"},{"from":"arg","to":"an"},{"from":"ara","to":"ar"},{"from":"asm","to":"as"},{"from":"ava","to":"av"},{"from":"aym","to":"ay"},{"from":"aze","to":"az"},{"from":"bak","to":"ba"},{"from":"bel","to":"be"},{"from":"bul","to":"bg"},{"from":"bih","to":"bho"},{"from":"bis","to":"bi"},{"from":"bam","to":"bm"},{"from":"ben","to":"bn"},{"from":"bod","to":"bo"},{"from":"bre","to":"br"},{"from":"bos","to":"bs"},{"from":"cat","to":"ca"},{"from":"che","to":"ce"},{"from":"cha","to":"ch"},{"from":"cos","to":"co"},{"from":"cre","to":"cr"},{"from":"ces","to":"cs"},{"from":"chu","to":"cu"},{"from":"chv","to":"cv"},{"from":"cym","to":"cy"},{"from":"dan","to":"da"},{"from":"deu","to":"de"},{"from":"div","to":"dv"},{"from":"dzo","to":"dz"},{"from":"ewe","to":"ee"},{"from":"ell","to":"el"},{"from":"eng","to":"en"},{"from":"epo","to":"eo"},{"from":"spa","to":"es"},{"from":"est","to":"et"},{"from":"eus","to":"eu"},{"from":"fas","to":"fa"},{"from":"ful","to":"ff"},{"from":"fin","to":"fi"},{"from":"fij","to":"fj"},{"from":"fao","to":"fo"},{"from":"fra","to":"fr"},{"from":"fry","to":"fy"},{"from":"gle","to":"ga"},{"from":"gla","to":"gd"},{"from":"glg","to":"gl"},{"from":"grn","to":"gn"},{"from":"guj","to":"gu"},{"from":"glv","to":"gv"},{"from":"hau","to":"ha"},{"from":"heb","to":"he"},{"from":"hin","to":"hi"},{"from":"hmo","to":"ho"},{"from":"hrv","to":"hr"},{"from":"hat","to":"ht"},{"from":"hun","to":"hu"},{"from":"hye","to":"hy"},{"from":"her","to":"hz"},{"from":"ina","to":"ia"},{"from":"ind","to":"id"},{"from":"ile","to":"ie"},{"from":"ibo","to":"ig"},{"from":"iii","to":"ii"},{"from":"ipk","to":"ik"},{"from":"ido","to":"io"},{"from":"isl","to":"is"},{"from":"ita","to":"it"},{"from":"iku","to":"iu"},{"from":"jpn","to":"ja"},{"from":"jav","to":"jv"},{"from":"kat","to":"ka"},{"from":"kon","to":"kg"},{"from":"kik","to":"ki"},{"from":"kua","to":"kj"},{"from":"kaz","to":"kk"},{"from":"kal","to":"kl"},{"from":"khm","to":"km"},{"from":"kan","to":"kn"},{"from":"kor","to":"ko"},{"from":"kau","to":"kr"},{"from":"kas","to":"ks"},{"from":"kur","to":"ku"},{"from":"kom","to":"kv"},{"from":"cor","to":"kw"},{"from":"kir","to":"ky"},{"from":"lat","to":"la"},{"from":"ltz","to":"lb"},{"from":"lug","to":"lg"},{"from":"lim","to":"li"},{"from":"lin","to":"ln"},{"from":"lao","to":"lo"},{"from":"lit","to":"lt"},{"from":"lub","to":"lu"},{"from":"lav","to":"lv"},{"from":"mlg","to":"mg"},{"from":"mah","to":"mh"},{"from":"mri","to":"mi"},{"from":"mkd","to":"mk"},{"from":"mal","to":"ml"},{"from":"mon","to":"mn"},{"from":"mol","to":"ro"},{"from":"mar","to":"mr"},{"from":"msa","to":"ms"},{"from":"mlt","to":"mt"},{"from":"mya","to":"my"},{"from":"nau","to":"na"},{"from":"nob","to":"nb"},{"from":"nde","to":"nd"},{"from":"nep","to":"ne"},{"from":"ndo","to":"ng"},{"from":"nld","to":"nl"},{"from":"nno","to":"nn"},{"from":"nor","to":"nb"},{"from":"nbl","to":"nr"},{"from":"nav","to":"nv"},{"from":"nya","to":"ny"},{"from":"oci","to":"oc"},{"from":"oji","to":"oj"},{"from":"orm","to":"om"},{"from":"ori","to":"or"},{"from":"oss","to":"os"},{"from":"pan","to":"pa"},{"from":"pli","to":"pi"},{"from":"pol","to":"pl"},{"from":"pus","to":"ps"},{"from":"por","to":"pt"},{"from":"que","to":"qu"},{"from":"roh","to":"rm"},{"from":"run","to":"rn"},{"from":"ron","to":"ro"},{"from":"rus","to":"ru"},{"from":"kin","to":"rw"},{"from":"san","to":"sa"},{"from":"srd","to":"sc"},{"from":"snd","to":"sd"},{"from":"sme","to":"se"},{"from":"sag","to":"sg"},{"from":"hbs","to":"sr-latn"},{"from":"sin","to":"si"},{"from":"slk","to":"sk"},{"from":"slv","to":"sl"},{"from":"smo","to":"sm"},{"from":"sna","to":"sn"},{"from":"som","to":"so"},{"from":"sqi","to":"sq"},{"from":"srp","to":"sr"},{"from":"ssw","to":"ss"},{"from":"sot","to":"st"},{"from":"sun","to":"su"},{"from":"swe","to":"sv"},{"from":"swa","to":"sw"},{"from":"tam","to":"ta"},{"from":"tel","to":"te"},{"from":"tgk","to":"tg"},{"from":"tha","to":"th"},{"from":"tir","to":"ti"},{"from":"tuk","to":"tk"},{"from":"tgl","to":"fil"},{"from":"tsn","to":"tn"},{"from":"ton","to":"to"},{"from":"tur","to":"tr"},{"from":"tso","to":"ts"},{"from":"tat","to":"tt"},{"from":"twi","to":"ak"},{"from":"tah","to":"ty"},{"from":"uig","to":"ug"},{"from":"ukr","to":"uk"},{"from":"urd","to":"ur"},{"from":"uzb","to":"uz"},{"from":"ven","to":"ve"},{"from":"vie","to":"vi"},{"from":"vol","to":"vo"},{"from":"wln","to":"wa"},{"from":"wol","to":"wo"},{"from":"xho","to":"xh"},{"from":"yid","to":"yi"},{"from":"yor","to":"yo"},{"from":"zha","to":"za"},{"from":"zho","to":"zh"},{"from":"zul","to":"zu"},{"from":"alb","to":"sq"},{"from":"arm","to":"hy"},{"from":"baq","to":"eu"},{"from":"bur","to":"my"},{"from":"chi","to":"zh"},{"from":"cze","to":"cs"},{"from":"dut","to":"nl"},{"from":"fre","to":"fr"},{"from":"geo","to":"ka"},{"from":"ger","to":"de"},{"from":"gre","to":"el"},{"from":"ice","to":"is"},{"from":"mac","to":"mk"},{"from":"mao","to":"mi"},{"from":"may","to":"ms"},{"from":"per","to":"fa"},{"from":"rum","to":"ro"},{"from":"slo","to":"sk"},{"from":"tib","to":"bo"},{"from":"wel","to":"cy"}]')},8589:function(et){et.exports=JSON.parse('{"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"}')},858:function(et){et.exports=JSON.parse('["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"]')}},Ir={};function Yn(et){var Re=Ir[et];if(Re!==void 0)return Re.exports;var D=Ir[et]={exports:{}};return Mr[et].call(D.exports,D,D.exports,Yn),D.exports}Yn.amdO={},Yn.n=function(et){var Re=et&&et.__esModule?function(){return et.default}:function(){return et};return Yn.d(Re,{a:Re}),Re},Yn.d=function(et,Re){for(var D in Re)Yn.o(Re,D)&&!Yn.o(et,D)&&Object.defineProperty(et,D,{enumerable:!0,get:Re[D]})},Yn.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),Yn.o=function(et,Re){return Object.prototype.hasOwnProperty.call(et,Re)};var Ur={};return function(){Yn.d(Ur,{default:function(){return p}}),Yn(8416);var et,Re=Yn(1715),D=Yn(8080),oe=Yn(1737),T=Yn(7688),t=function(){var u,h="application/dash+xml";function E(c,d,C){if(!c||!/^VIDEO$/i.test(c.nodeName))return null;if(c._dashjs_player)return c._dashjs_player;var Z,k=c.id||c.name||"video element";if(!(d=d||[].slice.call(c.querySelectorAll("source")).filter(function(x){return x.type==h})[0])&&c.src)(d=document.createElement("source")).src=c.src;else if(!d&&!c.src)return null;return C=C||{},(Z=(0,T.Z)(C).create()).initialize(c,d.src,c.autoplay),u||(u=Z.getDebug().getLogger()),u.debug("Converted "+k+" to dash.js player and added content: "+d.src),c._dashjs_player=Z,Z}function n(c){return/^VIDEO$/i.test(c.nodeName)?c:n(c.parentNode)}return{create:E,createAll:function(c,d){var C=[];c=c||"[data-dashjs-player]";for(var Z=(d=d||document).querySelectorAll(c),k=0;k<Z.length;k++){var x=E(Z[k],null);C.push(x)}for(var ne=d.querySelectorAll('source[type="'+h+'"]'),O=0;O<ne.length;O++){var z=E(n(ne[O]),null);C.push(z)}return C}}}();!(typeof window<"u"&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&typeof window<"u"&&window&&window.addEventListener&&(window.document.readyState==="complete"?window.dashjs?t.createAll():et=window.setInterval(function(){window.dashjs&&(window.clearInterval(et),t.createAll())},500):window.addEventListener("load",function u(){window.removeEventListener("load",u),t.createAll()}));var e=t,y=Yn(6398);dashjs.Protection=oe.default,dashjs.MetricsReporting=D.default,dashjs.MediaPlayerFactory=e,dashjs.Debug=y.Z,dashjs.supportsMediaSource=Re.B;var p=dashjs}(),Ur.default}()})})(yo);var Ii=yo.exports;function gu(){const er=pr.useContext(au),sr=ou(t=>t.cuedMedia),Mr=pr.useRef(null),Ir=su(Mr),Yn=uu(Ir),Ur=lu(Ir),et=pr.useRef(),[Re,D]=pr.useState(!1),oe=pr.useCallback(()=>{et.current&&(et.current.destroy(),et.current=void 0,D(!1))},[]),T=pr.useCallback(()=>{if(!Ii.supportsMediaSource()){er.getState().emit("error");return}const t=Ii.MediaPlayer().create();t.on(Ii.MediaPlayer.events.ERROR,e=>{er.getState().emit("error",{sourceEvent:e})}),t.on(Ii.MediaPlayer.events.PLAYBACK_METADATA_LOADED,()=>{const e=t.getBitrateInfoListFor("video");e!=null&&e.length&&(er.getState().emit("playbackQualities",{qualities:["auto",...e.map(po)]}),er.getState().emit("playbackQualityChange",{quality:"auto"}))}),t.initialize(Mr.current,void 0,!1),et.current=t,D(!0)},[er]);return pr.useEffect(()=>(T(),()=>{oe()}),[T,oe]),pr.useEffect(()=>{et.current&&(sr!=null&&sr.src)&&et.current.attachSource(sr.src)},[sr==null?void 0:sr.src,Re]),pr.useEffect(()=>{Re&&er.setState({providerApi:{...Ur,setPlaybackQuality:t=>{if(!et.current)return;const y=et.current.getBitrateInfoListFor("video").findIndex(p=>po(p)===t);et.current.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:y===-1}}}}),y>=0&&et.current.setQualityFor("video",y),er.getState().emit("playbackQualityChange",{quality:t})}}})},[er,Ur,Re]),iu.jsx("video",{className:"w-full h-full",ref:Mr,playsInline:!0,poster:sr==null?void 0:sr.poster,...Yn})}const po=er=>er===-1?"auto":`${er.height}p`;export{gu as default};
//# sourceMappingURL=dash-provider-e451a369.js.map
