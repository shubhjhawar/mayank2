import{d as message,bO as useSearchParams,j as jsxRuntimeExports,aI as MenuTrigger,B as Button,T as Trans,aJ as Menu,h as Item,c as clsx,I as IconButton,a1 as Link,bP as useLocalStorage,r as reactExports,aG as SiteConfigContext,b as createSvgIcon,i as useTrans,bQ as useClipboard,t as toast,bR as FacebookIcon,bS as TwitterIcon,bT as BaseMediaLink,bU as getBaseMediaLink,b5 as FormattedRelativeTime,bV as LockIcon,A as AnimatePresence,m,o as opacityAnimation,aB as useParams,a5 as FormattedDate,bd as TitleLink,bk as TitleBackdrop,bW as hashQueryKey,as as useQuery,w as apiClient,bo as MediaPlayIcon,b6 as getWatchLink,aF as LinkStyle,z as IllustratedMessage,E as SvgImage,aC as useNavigate,bj as ComboBoxForwardRef,l as SearchIcon,bg as getTitleLink,N as Navbar,bB as lazyLoader,u as useSettings,bX as useAuth,bN as Footer,bv as PageMetaTags,b3 as PageStatus,e as useIsMobileMediaQuery,D as DialogTrigger,a7 as ButtonBase,bY as useImageSrc,bi as SeasonLink,Z as useForm,_ as Form,a0 as FormTextField,p as useMutation,v as showHttpErrorToast,at as useLocation,a6 as Tooltip,y as ConfirmationDialog,ak as Skeleton,bZ as getEpisodeLink,b7 as CompactSeasonEpisode,a4 as Chip,q as queryClient,a2 as CheckIcon,b_ as FormattedCurrency,ae as useValueLists,b$ as getSeasonLink,aT as $df56164dff5785e2$export$4338b53315abf666,k as TextField,bC as EpisodeLink,c0 as useDarkThemeVariables,n as StaticPageTitle,bh as PageErrorMessage,x as useDialogContext,ao as useFieldArray,a3 as CloseIcon,K as onFormQueryError,F as Dialog,G as DialogHeader,H as DialogBody,ax as FileUploadProvider,ac as FormImageSelector,am as FormSelect,J as DialogFooter,aQ as memoize,b0 as isAbsoluteUrl,O as Outlet,bD as TitleLinkWithEpisodeNumber,bG as useRoutes,bE as AuthRoute,bH as NotFoundPage}from"./main-56ade259.js";import{b4 as useChannelQueryParams,aJ as useInfiniteData,b5 as channelQueryKey,b6 as channelEndpoint,a4 as channelContentConfig,b7 as Sort,aI as SortIcon,b as KeyboardArrowRightIcon,ae as UserAvatar,u as useBackendFilterUrlParams,av as useTitleIndexFilters,A as AddFilterButton,z as TuneIcon,e as FilterListSkeleton,f as FilterList,a1 as TITLE_MODEL,a2 as MOVIE_MODEL,a3 as SERIES_MODEL,aZ as FormattedDateTimeRange,ab as NewsArticleImage,ac as NewsArticleLink,ah as BulletSeparatedItems,al as TitlePoster,ag as TitleRating,b8 as NEWS_ARTICLE_MODEL,aS as PERSON_MODEL,aO as PersonPoster,aQ as PersonLink,aE as InfiniteScrollSentinel,K as KeyboardArrowLeftIcon,W as ChevronLeftIcon,aR as KnownForCompact,b9 as FormattedDuration,ba as InteractableRating,bb as CHANNEL_MODEL,aY as todoImage,bc as getPersonLink,y as dot,az as useScrollToTop,Z as useChannel,R as ImageZoomDialog,bd as ArrowForwardIcon,aG as useTitleSeasons,aH as SeasonPoster,be as Options,bf as tokenize$1,bg as useCreateReview,V as Avatar,ai as StarSelector,bh as useAuthClickCapture,af as useDeleteReviews,M as MoreVertIcon,bi as useReviews,ak as ReviewListSortButton,bj as VideoGrid,aC as useSeasonEpisodes,b0 as EpisodePoster,p as ChipList,i as AddIcon,aw as useTitle,aA as useSeason,aD as EpisodeListItem,aN as useEpisode,am as FormattedNumber,ad as useDeleteComments,bk as VideoGridItemSkeleton,bl as VideoGridItem,as as SiteVideoPlayer,ar as VideoPlayerSkeleton,r as Accordion,s as AccordionItem,aW as usePerson,aX as useNewsArticle,L as Tabs,O as TabList,P as Tab,bm as StarIcon,b1 as UserProfileLink,b2 as CreateUserListPage,b3 as EditUserListPage}from"./user-profile-link-0fa7845c.js";import{L as LockOpenIcon,S as ShareIcon,E as ExpandMoreIcon,T as ThumbUpIcon,a as ThumbDownIcon,R as ReplyIcon,C as CommentIcon,F as FlagIcon,b as ListAltIcon,c as RateReviewIcon,B as BookmarkBorderIcon}from"./BookmarkBorder-bd5f8365.js";import{C as ChevronRightIcon,O as OpenInNewIcon,B as Breadcrumb,a as BreadcrumbItem,E as EditIcon}from"./OpenInNew-0f1b690b.js";function usePaginatedChannelContent(e){const t=useChannelQueryParams(e);return useInfiniteData({willSortOrFilter:!0,initialPage:e.content,queryKey:channelQueryKey(e.id),endpoint:channelEndpoint(e.id),paginate:"simple",queryParams:{returnContentOnly:"true",...t}})}function ChannelSortButton({channel:e}){var x;const t=channelContentConfig.models[e.config.contentModel],s=(t==null?void 0:t.sortMethods.map(l=>({key:l,label:channelContentConfig.sortingMethods[l].label})))||[];e.config.contentType==="manual"&&s.unshift({key:Sort.curated,label:message("Default order")});const[i,n]=useSearchParams(),a=i.get("order")||e.config.contentOrder;if((s==null?void 0:s.length)<2)return null;const o=(x=s==null?void 0:s.find(l=>l.key===a))==null?void 0:x.label;return jsxRuntimeExports.jsxs(MenuTrigger,{selectionMode:"single",showCheckmark:!0,selectedValue:a,onSelectionChange:l=>{l===Sort.recent&&e.config.contentType==="manual"&&(l="channelables.created_at:desc"),n(c=>(c.set("order",l),c),{replace:!0})},children:[jsxRuntimeExports.jsx(Button,{startIcon:jsxRuntimeExports.jsx(SortIcon,{}),children:o?jsxRuntimeExports.jsx(Trans,{...o}):jsxRuntimeExports.jsx(Trans,{message:"Popularity"})}),jsxRuntimeExports.jsx(Menu,{children:s==null?void 0:s.map(l=>jsxRuntimeExports.jsx(Item,{value:l.key,children:jsxRuntimeExports.jsx(Trans,{...l.label})},l.key))})]})}function SiteSectionHeading({children:e,titleAppend:t,link:s,fontSize:i="text-3xl",fontWeight:n="font-bold",margin:a="mb-20",className:o,headingType:x="h2",description:l,descriptionFontSize:c="text-base",actions:u,hideBorder:d}){const j=s?jsxRuntimeExports.jsx(Link,{to:s,className:"hover:underline focus-visible:ring-2 focus-visible:ring-offset-2 outline-none rounded transition-colors",children:e}):e;return jsxRuntimeExports.jsxs("section",{className:clsx(o,a),children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-44 max-md:overflow-x-auto",children:[jsxRuntimeExports.jsx("div",{className:"flex-auto",children:jsxRuntimeExports.jsxs("div",{className:clsx("flex items-center gap-4 relative",!d&&"pl-14 before:absolute before:left-0 before:h-5/6 before:w-4 before:bg-primary before:rounded"),children:[jsxRuntimeExports.jsx(x,{className:clsx(i,n),children:j}),t&&jsxRuntimeExports.jsx("span",{className:"text-base text-muted pt-4",children:t}),s&&jsxRuntimeExports.jsx(IconButton,{elementType:Link,to:s,size:"sm",iconSize:"lg",className:"mt-4",children:jsxRuntimeExports.jsx(KeyboardArrowRightIcon,{})})]})}),u&&jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 flex items-center gap-4",children:u})]}),l&&jsxRuntimeExports.jsx("div",{className:clsx("mt-6",c),children:l})]})}function useChannelLayouts(e){const t=channelContentConfig.models[e.config.contentModel],s=t==null?void 0:t.layoutMethods.filter(a=>channelContentConfig.userSelectableLayouts.includes(a)).map(a=>({key:a,label:channelContentConfig.layoutMethods[a].label,icon:channelContentConfig.layoutMethods[a].icon})),[i,n]=useLocalStorage(`channel-layout-${e.config.contentModel}`,e.config.layout);return{selectedLayout:i,setSelectedLayout:n,availableLayouts:s}}function ChannelLayoutButton({channel:e}){const{selectedLayout:t,setSelectedLayout:s,availableLayouts:i}=useChannelLayouts(e);if((i==null?void 0:i.length)<2)return null;const n=i==null?void 0:i.find(a=>a.key===t);return jsxRuntimeExports.jsxs(MenuTrigger,{selectionMode:"single",showCheckmark:!0,selectedValue:t,onSelectionChange:a=>s(a),children:[jsxRuntimeExports.jsx(Button,{startIcon:(n==null?void 0:n.icon)||jsxRuntimeExports.jsx(SortIcon,{}),children:n!=null&&n.label?jsxRuntimeExports.jsx(Trans,{...n.label}):jsxRuntimeExports.jsx(Trans,{message:"Popularity"})}),jsxRuntimeExports.jsx(Menu,{children:i==null?void 0:i.map(a=>jsxRuntimeExports.jsx(Item,{value:a.key,children:jsxRuntimeExports.jsx(Trans,{...a.label})},a.key))})]})}function UserListByline({user:e}){const{auth:t}=reactExports.useContext(SiteConfigContext);return jsxRuntimeExports.jsxs("div",{className:"flex-shrink-0 flex items-center gap-8 mr-24",children:[jsxRuntimeExports.jsx(UserAvatar,{user:e,circle:!0,size:"sm"}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Trans,{message:"List by <a>:name</a>",values:{a:()=>jsxRuntimeExports.jsx(Link,{to:t.getUserProfileLink(e),className:"font-bold hover:underline",children:e.display_name})}})})]})}function shareLinkSocially(e,t,s,i){const n=generateShareUrl(e,t,s,i);e==="mail"?window.location.href=n:openNewWindow(n)}function openNewWindow(e){const i=(window.innerWidth-575)/2,n=(window.innerHeight-400)/2,a="status=1, scrollbars=1,width=575,height=400,top="+n+",left="+i;window.open(e,"share",a)}function generateShareUrl(e,t,s,i){switch(e){case"facebook":return"https://www.facebook.com/sharer/sharer.php?u="+t;case"twitter":return`https://twitter.com/intent/tweet?text=${s}&url=${t}`;case"pinterest":return"https://pinterest.com/pin/create/button/?url="+t+"&media="+i;case"tumblr":return"https://www.tumblr.com/widgets/share/tool?shareSource=legacy&canonicalUrl=&posttype=photo&title=&caption="+s+"&content="+i+"&url="+t;case"blogger":return"https://www.blogger.com/blog_this.pyra?t&u="+t+"&n="+s;case"mail":return`mailto:?subject=Check out this link.&body=${t}`}}const CopyLinkIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M 4 2 C 2.895 2 2 2.895 2 4 L 2 18 L 4 18 L 4 4 L 18 4 L 18 2 L 4 2 z M 8 6 C 6.895 6 6 6.895 6 8 L 6 20 C 6 21.105 6.895 22 8 22 L 20 22 C 21.105 22 22 21.105 22 20 L 22 8 C 22 6.895 21.105 6 20 6 L 8 6 z M 8 8 L 20 8 L 20 20 L 8 20 L 8 8 z M 16 9.0058594 C 15.230215 9.0058594 14.460443 9.2973698 13.878906 9.8789062 L 12.607422 11.150391 L 14.021484 12.564453 L 12.556641 14.029297 L 11.142578 12.615234 L 9.8789062 13.878906 C 8.7158332 15.041979 8.7158332 16.958021 9.8789062 18.121094 C 10.460397 18.702585 11.234094 19 12 19 C 12.765906 19 13.539603 18.702585 14.121094 18.121094 L 15.384766 16.857422 L 13.970703 15.443359 L 15.457031 13.957031 L 14.042969 12.542969 L 15.292969 11.292969 C 15.691896 10.894042 16.308104 10.894042 16.707031 11.292969 C 17.105958 11.691896 17.105958 12.308104 16.707031 12.707031 L 15.464844 13.949219 L 16.878906 15.363281 L 18.121094 14.121094 C 19.284167 12.958021 19.284167 11.041979 18.121094 9.8789062 C 17.539557 9.2973698 16.769785 9.0058594 16 9.0058594 z M 12.542969 14.042969 L 13.957031 15.457031 L 12.707031 16.707031 C 12.506522 16.90754 12.258094 17 12 17 C 11.741906 17 11.493478 16.90754 11.292969 16.707031 C 10.894042 16.308104 10.894042 15.691896 11.292969 15.292969 L 12.542969 14.042969 z"}));function ShareMenuTrigger({link:e,children:t}){const{trans:s}=useTrans(),[,i]=useClipboard(e);return jsxRuntimeExports.jsxs(MenuTrigger,{children:[t,jsxRuntimeExports.jsxs(Menu,{children:[jsxRuntimeExports.jsx(Item,{value:"clipboard",startIcon:jsxRuntimeExports.jsx(CopyLinkIcon,{}),onSelected:()=>{i(),toast.positive(message("Copied link to clipboard"))},children:jsxRuntimeExports.jsx(Trans,{message:"Copy to clipboard"})}),jsxRuntimeExports.jsx(Item,{value:"facebook",startIcon:jsxRuntimeExports.jsx(FacebookIcon,{}),onClick:()=>{shareLinkSocially("facebook",e,s(message("Check out this link")))},children:jsxRuntimeExports.jsx(Trans,{message:"Share to facebook"})}),jsxRuntimeExports.jsx(Item,{value:"twitter",startIcon:jsxRuntimeExports.jsx(TwitterIcon,{}),onClick:()=>{shareLinkSocially("twitter",e,s(message("Check out this link")))},children:jsxRuntimeExports.jsx(Trans,{message:"Share to twitter"})})]})]})}function UserListLink({list:e,children:t,...s}){const i=reactExports.useMemo(()=>getUserListLink(e),[e]);let n;if(t)n=t;else{if(e.internal&&e.name==="watchlist")return jsxRuntimeExports.jsx(Trans,{message:"Watchlist"});n=e.name}return jsxRuntimeExports.jsx(BaseMediaLink,{...s,link:i,children:n})}function getUserListLink(e,{absolute:t}={}){return getBaseMediaLink(`/lists/${e.id}`,{absolute:t})}function UserListDetails({list:e,className:t,showShareButton:s,showVisibility:i=!0}){return jsxRuntimeExports.jsxs("div",{className:clsx("flex items-center flex-shrink-0 whitespace-nowrap text-muted gap-4",t),children:[s&&jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(ShareButton$3,{list:e}),jsxRuntimeExports.jsx(Divider,{marginLeft:"ml-2"})]}),e.items_count?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(Trans,{message:":count items",values:{count:e.items_count}}),jsxRuntimeExports.jsx(Divider,{})]}):null,jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx(Trans,{message:"Updated :date",values:{date:jsxRuntimeExports.jsx(FormattedRelativeTime,{date:e.updated_at})}})}),i&&jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(Divider,{}),e.public?jsxRuntimeExports.jsx(LockOpenIcon,{size:"sm"}):jsxRuntimeExports.jsx(LockIcon,{size:"sm"}),jsxRuntimeExports.jsx("div",{children:e.public?jsxRuntimeExports.jsx(Trans,{message:"Public"}):jsxRuntimeExports.jsx(Trans,{message:"Private"})})]})]})}function ShareButton$3({list:e}){const t=getUserListLink(e,{absolute:!0});return jsxRuntimeExports.jsx(ShareMenuTrigger,{link:t,children:jsxRuntimeExports.jsx(Button,{startIcon:jsxRuntimeExports.jsx(ShareIcon,{}),sizeClassName:"px-10 py-6",children:jsxRuntimeExports.jsx(Trans,{message:"Share"})})})}function Divider({marginLeft:e="ml-12"}){return jsxRuntimeExports.jsx("div",{className:clsx("h-20 w-1 bg-divider mr-10",e)})}const FilterModelTypes=[TITLE_MODEL,MOVIE_MODEL,SERIES_MODEL];function ChannelHeader({channel:e,isNested:t,actions:s,margin:i=t?"mb-16 md:mb-30":"mb-20 md:mb-40"}){const n=!t&&FilterModelTypes.includes(e.config.contentModel)&&e.config.contentType==="listAll",{encodedFilters:a}=useBackendFilterUrlParams(),{filters:o,filtersLoading:x}=useTitleIndexFilters({disabled:!n});return e.config.hideTitle?null:jsxRuntimeExports.jsxs("section",{className:clsx(i),children:[jsxRuntimeExports.jsx(ChannelTitle,{channel:e,isNested:t,actions:jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[s,!t&&jsxRuntimeExports.jsx(ChannelSortButton,{channel:e}),n&&jsxRuntimeExports.jsx(AddFilterButton,{icon:jsxRuntimeExports.jsx(TuneIcon,{}),color:null,variant:"text",disabled:x,filters:o}),!t&&jsxRuntimeExports.jsx(ChannelLayoutButton,{channel:e})]})}),n&&jsxRuntimeExports.jsx("div",{className:"mt-14",children:jsxRuntimeExports.jsx(AnimatePresence,{initial:!1,mode:"wait",children:x&&a?jsxRuntimeExports.jsx(FilterListSkeleton,{}):jsxRuntimeExports.jsx(m.div,{...opacityAnimation,children:jsxRuntimeExports.jsx(FilterList,{filters:o})},"filter-list")})})]})}function ChannelTitle({channel:e,isNested:t,actions:s}){const{restriction:i}=useParams();if(e.config.hideTitle)return null;const n=e.config.restriction&&i?`/channel/${e.slug}/${i}`:`/channel/${e.slug}`;return jsxRuntimeExports.jsx(SiteSectionHeading,{className:"flex-auto",margin:"m-0",description:jsxRuntimeExports.jsx(ChannelDescription,{channel:e}),actions:s,headingType:t?"h2":"h1",descriptionFontSize:t?"text-sm":void 0,fontWeight:t?"font-normal":void 0,link:t?n:void 0,children:jsxRuntimeExports.jsx(Trans,{message:e.name})})}function ChannelDescription({channel:e}){return e.type==="channel"?jsxRuntimeExports.jsx(reactExports.Fragment,{children:e.description}):jsxRuntimeExports.jsxs("div",{className:"mt-18 items-center text-sm md:flex",children:[e.user&&jsxRuntimeExports.jsx(UserListByline,{user:e.user}),jsxRuntimeExports.jsx(UserListDetails,{list:e,className:"ml-auto max-md:mt-14",showShareButton:!0})]})}function ContentGridLayout({children:e,className:t,variant:s}){return jsxRuntimeExports.jsx("div",{className:clsx("grid grid-cols-[repeat(var(--nVisibleItems),minmax(0,1fr))] gap-24",t,s==="landscape"?"content-grid-landscape":"content-grid-portrait"),children:e})}const PersonAge=reactExports.memo(({person:e})=>e.birth_date&&e.death_date?jsxRuntimeExports.jsx(FormattedDateTimeRange,{start:e.birth_date,end:e.death_date,options:{year:"numeric"}}):e.birth_date?jsxRuntimeExports.jsx(reactExports.Fragment,{children:calculateAgeFromBirthDate(e.birth_date)}):null);function calculateAgeFromBirthDate(e){const t=new Date,s=new Date(e);let i=t.getFullYear()-s.getFullYear();const n=t.getMonth()-s.getMonth();return(n<0||n===0&&t.getDate()<s.getDate())&&i--,i}function NewsArticleGridItem({article:e}){return jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-14",children:[jsxRuntimeExports.jsx(NewsArticleImage,{article:e,className:"aspect-poster max-w-90"}),jsxRuntimeExports.jsxs("div",{className:"mt-6 text-base min-w-0 overflow-hidden overflow-ellipsis",children:[jsxRuntimeExports.jsx(NewsArticleLink,{article:e,className:"font-medium"}),jsxRuntimeExports.jsxs(BulletSeparatedItems,{className:"text-xs mt-10 min-w-0 overflow-hidden overflow-ellipsis",children:[jsxRuntimeExports.jsx(FormattedDate,{date:e.created_at}),jsxRuntimeExports.jsx("div",{className:"whitespace-nowrap overflow-hidden overflow-ellipsis",children:e.source})]})]})]})}function TitlePortraitGridItem({item:e,rating:t,description:s}){return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsx(TitlePoster,{title:e,srcSize:"md",showPlayButton:!0})}),jsxRuntimeExports.jsxs("div",{className:"mt-10 text-sm",children:[jsxRuntimeExports.jsx(RatingOrReleaseDate,{title:e,rating:t,className:"mb-4"}),jsxRuntimeExports.jsx(TitleLink,{title:e,className:"block font-medium text-base"}),s?jsxRuntimeExports.jsx("div",{className:"mt-4",children:s}):null]})]})}function TitleLandscapeGridItem({item:e}){return jsxRuntimeExports.jsxs("div",{className:"",children:[jsxRuntimeExports.jsx(TitleBackdrop,{title:e,srcSize:"lg",size:"w-full",className:"rounded",wrapWithLink:!0,showPlayButton:!0}),jsxRuntimeExports.jsxs("div",{className:"mt-10 text-sm",children:[jsxRuntimeExports.jsx(TitleLink,{title:e,className:"block font-semibold text-base mb-4"}),jsxRuntimeExports.jsxs(BulletSeparatedItems,{className:"mb-4",children:[e.release_date&&jsxRuntimeExports.jsx(FormattedDate,{date:e.release_date}),e.certification&&jsxRuntimeExports.jsx("div",{className:"uppercase",children:e.certification})]}),jsxRuntimeExports.jsx(TitleRating,{score:e.rating,className:"mb-4"})]})]})}function RatingOrReleaseDate({title:e,rating:t,className:s}){return t||(t=e.rating),t?jsxRuntimeExports.jsx(TitleRating,{score:t,className:s}):e.release_date?jsxRuntimeExports.jsx("div",{className:s,children:jsxRuntimeExports.jsx(FormattedDate,{date:e.release_date})}):null}function ChannelContentGridItem({item:e,variant:t}){switch(e.model_type){case TITLE_MODEL:return t==="landscape"?jsxRuntimeExports.jsx(TitleLandscapeGridItem,{item:e}):jsxRuntimeExports.jsx(TitlePortraitGridItem,{item:e});case PERSON_MODEL:return jsxRuntimeExports.jsx(PersonGridItem,{item:e});case NEWS_ARTICLE_MODEL:return jsxRuntimeExports.jsx(NewsArticleGridItem,{article:e});default:return null}}function PersonGridItem({item:e}){return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(PersonPoster,{person:e,srcSize:"md",size:"w-full",rounded:!0}),jsxRuntimeExports.jsxs("div",{className:"mt-10 text-sm text-center",children:[jsxRuntimeExports.jsx(PersonLink,{person:e,className:"block font-medium text-base"}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(PersonAge,{person:e})})]})]})}function useChannelContent(e){const t=useChannelQueryParams(e),s=channelQueryKey(e.id,t),i=reactExports.useRef(hashQueryKey(s)).current;return useQuery(channelQueryKey(e.id,t),()=>fetchChannelContent(e.id,t),{keepPreviousData:!0,initialData:()=>{var n;if(hashQueryKey(s)===i)return(n=e.content)==null?void 0:n.data}})}function fetchChannelContent(e,t){return apiClient.get(channelEndpoint(e),{params:{...t,paginate:"simple",returnContentOnly:"true"}}).then(s=>s.data.pagination.data)}function ChannelContentGrid(e){return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(ChannelHeader,{...e}),e.isNested||e.channel.config.contentType!=="listAll"?jsxRuntimeExports.jsx(SimpleGrid,{...e}):jsxRuntimeExports.jsx(PaginatedGrid,{...e})]})}function PaginatedGrid({channel:e,variant:t}){const s=usePaginatedChannelContent(e);return jsxRuntimeExports.jsxs("div",{className:clsx("transition-opacity",s.isReloading&&"opacity-70"),children:[jsxRuntimeExports.jsx(ContentGrid,{content:s.items,variant:t}),jsxRuntimeExports.jsx(InfiniteScrollSentinel,{query:s})]})}function SimpleGrid({channel:e,variant:t}){const{data:s}=useChannelContent(e);return jsxRuntimeExports.jsx(ContentGrid,{content:s,variant:t})}function ContentGrid({content:e=[],variant:t}){return jsxRuntimeExports.jsx(ContentGridLayout,{variant:t,children:e.map(s=>jsxRuntimeExports.jsx(ChannelContentGridItem,{item:s,variant:t},`${s.id}-${s.model_type}`))})}var functionDebounce=debounce;function debounce(e,t,s){var i=null,n=null,a=function(){i&&(clearTimeout(i),n=null,i=null)},o=function(){var l=n;a(),l&&l()},x=function(){if(!t)return e.apply(this,arguments);var l=this,c=arguments,u=s&&!i;if(a(),n=function(){e.apply(l,c)},i=setTimeout(function(){if(i=null,!u){var d=n;return n=null,d()}},t),u)return n()};return x.cancel=a,x.flush=o,x}const containerClassName="content-carousel content-grid relative w-full grid grid-flow-col grid-rows-[auto] overflow-x-auto overflow-y-hidden gap-24 snap-always snap-x snap-mandatory hidden-scrollbar scroll-smooth",itemClassName="snap-start snap-normal";function useCarousel({rotate:e=!1}={}){const t=reactExports.useRef(null),s=reactExports.useRef(0),i=reactExports.useRef(5),[n,a]=reactExports.useState(e),[o,x]=reactExports.useState(!0),[l,c]=reactExports.useState(0),u=reactExports.useCallback(()=>{const p=t.current;if(p&&s.current){e||(x(p.scrollWidth-1>p.scrollLeft+p.clientWidth),a(p.scrollLeft>0));const h=p.clientWidth,E=Math.round(p.scrollLeft/h);c(E)}},[e]);reactExports.useEffect(()=>{const p=t.current,h=functionDebounce(()=>u(),100);return p&&p.addEventListener("scroll",h),()=>p==null?void 0:p.removeEventListener("scroll",h)},[u]),reactExports.useLayoutEffect(()=>{const p=t.current;if(p){i.current=Number(getComputedStyle(p).getPropertyValue("--nVisibleItems"));const h=p.children.item(0),E=new ResizeObserver(f=>{s.current=f[0].contentRect.width,u()});return h&&E.observe(h),()=>E.unobserve(p)}},[u]);const d=reactExports.useCallback(p=>{if(t.current){c(p);const h=s.current*p;t.current.scrollTo({left:h})}},[]),j=reactExports.useCallback(()=>{if(t.current){const p=t.current.clientWidth,h=t.current.scrollLeft,E=!h&&e?t.current.scrollWidth-p:h-p;t.current.scrollTo({left:E})}},[e]),g=reactExports.useCallback(()=>{if(t.current){const p=t.current.clientWidth,h=t.current.scrollLeft,E=e&&h+p>=t.current.scrollWidth?0:(l+1)*p;t.current.scrollTo({left:E})}},[l,e]);return{scrollContainerRef:t,scrollToIndex:d,scrollToPreviousPage:j,scrollToNextPage:g,canScrollForward:o,canScrollBackward:n,activePage:l,containerClassName,itemClassName}}function ChannelContentCarousel(e){var u;const{channel:t,variant:s}=e,{scrollContainerRef:i,canScrollForward:n,canScrollBackward:a,scrollToPreviousPage:o,scrollToNextPage:x,containerClassName:l,itemClassName:c}=useCarousel();return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(ChannelHeader,{...e,actions:jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(IconButton,{disabled:!a,onClick:()=>o(),children:jsxRuntimeExports.jsx(KeyboardArrowLeftIcon,{})}),jsxRuntimeExports.jsx(IconButton,{disabled:!n,onClick:()=>x(),children:jsxRuntimeExports.jsx(KeyboardArrowRightIcon,{})})]})}),jsxRuntimeExports.jsx("div",{ref:i,className:clsx(l,s==="landscape"?"content-grid-landscape":"content-grid-portrait"),children:(u=t.content)==null?void 0:u.data.map(d=>jsxRuntimeExports.jsx("div",{className:c,children:jsxRuntimeExports.jsx(ChannelContentGridItem,{item:d,variant:s})},`${d.id}-${d.model_type}`))})]})}function ChannelContentSlider({channel:e,isNested:t}){const{scrollContainerRef:s,activePage:i,canScrollBackward:n,canScrollForward:a,scrollToNextPage:o,scrollToPreviousPage:x}=useCarousel({rotate:!0}),{data:l}=useChannelContent(e),c=l||[];return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(ChannelHeader,{channel:e,isNested:t,margin:"mb-18"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-24",children:[jsxRuntimeExports.jsxs("div",{className:"relative flex-auto",children:[jsxRuntimeExports.jsx("div",{ref:s,className:"hidden-scrollbar flex h-full select-none snap-x snap-mandatory snap-always items-center overflow-x-auto",children:c.map(u=>jsxRuntimeExports.jsx(Slide,{item:u},u.id))}),jsxRuntimeExports.jsxs("div",{className:"absolute top-[170px] z-20 w-full",children:[jsxRuntimeExports.jsx("div",{className:"absolute left-14",children:jsxRuntimeExports.jsx(IconButton,{variant:"outline",radius:"rounded",size:"lg",color:"white",disabled:!n,onClick:()=>x(),children:jsxRuntimeExports.jsx(ChevronLeftIcon,{})})}),jsxRuntimeExports.jsx("div",{className:"absolute right-14",children:jsxRuntimeExports.jsx(IconButton,{variant:"outline",radius:"rounded",size:"lg",color:"white",disabled:!a,onClick:()=>o(),children:jsxRuntimeExports.jsx(ChevronRightIcon,{})})})]})]}),jsxRuntimeExports.jsx(UpNext,{titles:c,activePage:i})]})]})}function Slide({item:e}){return jsxRuntimeExports.jsxs("div",{className:"relative h-full w-full flex-shrink-0 snap-start snap-normal overflow-hidden rounded",children:[jsxRuntimeExports.jsx(TitleBackdrop,{title:e,size:"h-full"}),jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 isolate flex h-full w-full items-end justify-start gap-24 rounded p-30 text-white",children:[jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 h-3/4 w-full bg-gradient-to-t from-black/100"}),jsxRuntimeExports.jsx(TitlePoster,{title:e,size:"max-h-320",srcSize:"md",className:"z-10 shadow-md"}),jsxRuntimeExports.jsxs("div",{className:"z-10 max-w-620 text-lg",children:[jsxRuntimeExports.jsx(TitleRating,{score:e.rating}),jsxRuntimeExports.jsx("div",{className:"my-8 text-5xl",children:jsxRuntimeExports.jsx(TitleLink,{title:e})}),jsxRuntimeExports.jsx("p",{children:e.description.slice(0,200)}),e.primary_video&&jsxRuntimeExports.jsx(Button,{variant:"flat",color:"primary",startIcon:jsxRuntimeExports.jsx(MediaPlayIcon,{}),radius:"rounded-full",className:"mt-24 min-h-42 min-w-144",elementType:Link,to:getWatchLink(e.primary_video),children:e.primary_video.category==="full"?jsxRuntimeExports.jsx(Trans,{message:"Watch now"}):jsxRuntimeExports.jsx(Trans,{message:"Play trailer"})})]})]})]})}function UpNext({titles:e,activePage:t}){const s=e.length,i=t+1,n=i+3,a=e.slice(i,n);return n>s&&a.push(...e.slice(0,n-s)),jsxRuntimeExports.jsx(AnimatePresence,{initial:!1,mode:"wait",children:jsxRuntimeExports.jsxs("div",{className:"w-1/4 max-w-200 flex-shrink-0",children:[jsxRuntimeExports.jsx("div",{className:"mb-12 text-lg font-semibold",children:jsxRuntimeExports.jsx(Trans,{message:"Up next"})}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-24",children:a.map(o=>jsxRuntimeExports.jsxs(m.div,{className:"relative flex-auto",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:[jsxRuntimeExports.jsx(TitleBackdrop,{title:o,className:"mb-6 rounded",size:"w-full",srcSize:"md",wrapWithLink:!0,showPlayButton:!0}),jsxRuntimeExports.jsx("div",{className:"mb-2 overflow-hidden overflow-ellipsis whitespace-nowrap text-sm",children:jsxRuntimeExports.jsx(TitleLink,{title:o,className:"text-base font-medium"})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(TitleRating,{score:o.rating,className:"text-sm"})})]},o.id))})]})})}function NewsArticleSourceLink({article:e,className:t}){return jsxRuntimeExports.jsxs("div",{className:clsx("flex items-center gap-4 text-primary",t),children:[jsxRuntimeExports.jsx(OpenInNewIcon,{size:"xs",className:"flex-shrink-0"}),jsxRuntimeExports.jsx("a",{href:e.source_url,target:"_blank",rel:"noreferrer",className:clsx(LinkStyle,"whitespace-nowrap overflow-hidden overflow-ellipsis"),children:e.source})]})}function NewsArticleByline({article:e}){return e.byline?jsxRuntimeExports.jsx("span",{className:"whitespace-nowrap",children:jsxRuntimeExports.jsx(Trans,{message:"By :name",values:{name:e.byline}})}):null}function ChannelContentNews({channel:e,isNested:t}){const{data:s}=useChannelContent(e);return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(ChannelHeader,{channel:e,isNested:t}),jsxRuntimeExports.jsxs("div",{className:"flex gap-34",children:[jsxRuntimeExports.jsx("div",{className:"w-240 flex-shrink-0",children:s==null?void 0:s.slice(0,3).map(i=>jsxRuntimeExports.jsx(LeftColArticle,{article:i,className:"mb-14"},i.id))}),jsxRuntimeExports.jsx("div",{className:"flex-auto",children:s==null?void 0:s.slice(2,10).map(i=>jsxRuntimeExports.jsxs("div",{className:"mb-12 flex items-center gap-14",children:[jsxRuntimeExports.jsx(NewsArticleImage,{article:i,size:"w-84 h-84"}),jsxRuntimeExports.jsxs("div",{className:"flex-auto",children:[jsxRuntimeExports.jsx(NewsArticleLink,{article:i,className:"font-semibold"}),jsxRuntimeExports.jsxs(BulletSeparatedItems,{className:"text-sm",children:[jsxRuntimeExports.jsx(FormattedDate,{date:i.created_at}),jsxRuntimeExports.jsx(NewsArticleByline,{article:i}),jsxRuntimeExports.jsx(NewsArticleSourceLink,{article:i})]})]})]},i.id))})]})]})}function LeftColArticle({article:e,className:t}){return jsxRuntimeExports.jsxs("div",{className:t,children:[jsxRuntimeExports.jsx(NewsArticleImage,{article:e,size:"aspect-video w-full"}),jsxRuntimeExports.jsx(NewsArticleLink,{article:e,className:"mt-10 block text-sm font-semibold"}),jsxRuntimeExports.jsxs("div",{className:"mt-8 text-xs text-muted",children:[jsxRuntimeExports.jsx(NewsArticleByline,{article:e}),jsxRuntimeExports.jsx(NewsArticleSourceLink,{article:e,className:"mt-4"})]})]})}function ChannelContentListItem({item:e}){switch(e.model_type){case TITLE_MODEL:return jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-24 mb-24",children:[jsxRuntimeExports.jsx(TitlePoster,{title:e,srcSize:"md",size:"w-128",showPlayButton:!0}),jsxRuntimeExports.jsxs("div",{className:"flex-auto min-w-0 pt-12",children:[jsxRuntimeExports.jsx(TitleLink,{title:e,className:"font-medium"}),jsxRuntimeExports.jsxs(BulletSeparatedItems,{className:"text-sm mt-4",children:[e.runtime?jsxRuntimeExports.jsx(FormattedDuration,{minutes:e.runtime,verbose:!0}):null,e.certification&&jsxRuntimeExports.jsx("span",{className:"uppercase",children:e.certification})]}),e.rating&&e.status!=="upcoming"?jsxRuntimeExports.jsx(InteractableRating,{size:"md",title:e,className:"my-12"}):jsxRuntimeExports.jsx("div",{className:"my-12",children:jsxRuntimeExports.jsx(FormattedDate,{date:e.release_date})}),e.description?jsxRuntimeExports.jsx("p",{className:"text-sm",children:e.description}):null]})]});case PERSON_MODEL:return jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-24 mb-24",children:[jsxRuntimeExports.jsx(PersonPoster,{person:e,srcSize:"md",size:"w-128"}),jsxRuntimeExports.jsxs("div",{className:"flex-auto min-w-0 pt-12",children:[jsxRuntimeExports.jsx(PersonLink,{person:e,className:"block font-medium text-lg"}),e.primary_credit?jsxRuntimeExports.jsx("div",{className:"text-sm mt-4",children:jsxRuntimeExports.jsx(KnownForCompact,{person:e})}):null,jsxRuntimeExports.jsx("p",{className:"text-sm mt-12",children:e.description})]})]});case NEWS_ARTICLE_MODEL:return jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-14 mb-44",children:[jsxRuntimeExports.jsx(NewsArticleImage,{article:e,className:"aspect-poster max-w-90"}),jsxRuntimeExports.jsxs("div",{className:"mt-6 text-base",children:[jsxRuntimeExports.jsx(NewsArticleLink,{article:e,className:"font-medium"}),jsxRuntimeExports.jsx("p",{className:"text-sm mt-10",children:e.body}),jsxRuntimeExports.jsxs(BulletSeparatedItems,{className:"text-xs mt-10",children:[jsxRuntimeExports.jsx(FormattedDate,{date:e.created_at}),jsxRuntimeExports.jsx(NewsArticleSourceLink,{article:e})]})]})]});default:return null}}function ChannelContentList(e){return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(ChannelHeader,{...e}),e.isNested||e.channel.config.contentType!=="listAll"?jsxRuntimeExports.jsx(SimpleList,{...e}):jsxRuntimeExports.jsx(PaginatedList,{...e})]})}function SimpleList({channel:e}){const{data:t}=useChannelContent(e);return jsxRuntimeExports.jsx(Content$1,{content:t})}function PaginatedList({channel:e}){const t=usePaginatedChannelContent(e);return jsxRuntimeExports.jsx(Content$1,{content:t.items,className:clsx("transition-opacity",t.isReloading&&"opacity-70"),children:jsxRuntimeExports.jsx(InfiniteScrollSentinel,{query:t})})}function Content$1({content:e=[],children:t,className:s}){return jsxRuntimeExports.jsxs("div",{className:s,children:[e.map(i=>jsxRuntimeExports.jsx(ChannelContentListItem,{item:i},`${i.id}-${i.model_type}`)),t]})}function ChannelContent(e){var t;return e.isNested&&!((t=e.channel.content)!=null&&t.data.length)?null:e.channel.config.contentModel===CHANNEL_MODEL?jsxRuntimeExports.jsx(NestedChannels,{...e}):jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(ChannelLayout,{...e}),jsxRuntimeExports.jsx(NoResultsMessage,{channel:e.channel})]})}function NoResultsMessage({channel:e}){var t;return((t=e.content)==null?void 0:t.data.length)===0?jsxRuntimeExports.jsx(IllustratedMessage,{className:"mt-60",image:jsxRuntimeExports.jsx(SvgImage,{src:todoImage}),title:e.type==="list"?jsxRuntimeExports.jsx(Trans,{message:"This list does not have any content yet."}):jsxRuntimeExports.jsx(Trans,{message:"This channel does not have any content yet."})}):null}function ChannelLayout(e){const{channel:t,isNested:s}=e,{selectedLayout:i}=useChannelLayouts(t);switch(s?t.config.nestedLayout:i){case"grid":return jsxRuntimeExports.jsx(ChannelContentGrid,{...e,variant:"portrait"});case"landscapeGrid":return jsxRuntimeExports.jsx(ChannelContentGrid,{...e,variant:"landscape"});case"list":return jsxRuntimeExports.jsx(ChannelContentList,{...e});case"carousel":return jsxRuntimeExports.jsx(ChannelContentCarousel,{...e,variant:"portrait"});case"landscapeCarousel":return jsxRuntimeExports.jsx(ChannelContentCarousel,{...e,variant:"landscape"});case"slider":return jsxRuntimeExports.jsx(ChannelContentSlider,{...e});case"news":return jsxRuntimeExports.jsx(ChannelContentNews,{...e});default:return null}}function NestedChannels({channel:e,isNested:t}){var s;return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(ChannelHeader,{channel:e,isNested:t}),(s=e.content)==null?void 0:s.data.map(i=>jsxRuntimeExports.jsx("div",{className:"mb-50",children:jsxRuntimeExports.jsx(ChannelContent,{channel:i,isNested:!0})},i.id))]})}function useSearchResults(e){return useQuery(["search",e],()=>search(e),{enabled:!!e.query,keepPreviousData:!!e.query})}function search(e){return apiClient.get(`search/${e.query}`,{params:e}).then(t=>t.data)}function SearchAutocomplete({className:e}){const{searchQuery:t}=useParams(),{trans:s}=useTrans(),i=useNavigate(),[n,a]=reactExports.useState(t||""),[o,x]=reactExports.useState(!1),{isFetching:l,data:c}=useSearchResults({query:n,limit:8});return jsxRuntimeExports.jsx("form",{onSubmit:u=>{u.preventDefault(),n.trim().length&&(x(!1),i(`/search/${n.trim()}`))},className:clsx("flex items-center bg-chip/40 flex-auto text max-w-580 rounded",e),children:jsxRuntimeExports.jsx(ComboBoxForwardRef,{size:"sm",startAdornment:jsxRuntimeExports.jsx("button",{type:"submit","aria-label":s(message("Search")),children:jsxRuntimeExports.jsx(SearchIcon,{className:"text-muted flex-shrink-0"})}),className:"w-full",offset:6,inputClassName:"w-full outline-none text-sm placeholder:text-muted",isAsync:!0,hideEndAdornment:!0,placeholder:s(message("Search for movies, tv shows and people...")),isLoading:l,inputValue:n,onInputValueChange:a,clearInputOnItemSelection:!0,blurReferenceOnItemSelection:!0,selectionMode:"none",openMenuOnFocus:!0,floatingMaxHeight:670,isOpen:o,onOpenChange:x,children:c==null?void 0:c.results.map(u=>{switch(u.model_type){case TITLE_MODEL:return jsxRuntimeExports.jsx(Item,{value:u.id,onSelected:()=>{i(getTitleLink(u))},startIcon:jsxRuntimeExports.jsx(TitlePoster,{title:u,srcSize:"sm",size:"w-46"}),description:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"mb-4",children:u.year}),jsxRuntimeExports.jsx("div",{children:u.is_series?jsxRuntimeExports.jsx(Trans,{message:"Tv series"}):jsxRuntimeExports.jsx(Trans,{message:"Movie"})})]}),textLabel:u.name,children:u.name},u.id);case PERSON_MODEL:return jsxRuntimeExports.jsx(Item,{value:u.id,onSelected:()=>{i(getPersonLink(u))},startIcon:jsxRuntimeExports.jsx(PersonPoster,{person:u,srcSize:"sm",className:"w-56"}),description:jsxRuntimeExports.jsx(KnownForCompact,{person:u}),textLabel:u.name,children:u.name},u.id)}})})})}function MainNavbar({position:e="relative"}){return jsxRuntimeExports.jsx(Navbar,{size:"md",menuPosition:"primary",className:clsx(e,"z-40 flex-shrink-0 w-full"),border:"border-none",alwaysDarkMode:!0,children:jsxRuntimeExports.jsx(SearchAutocomplete,{})})}function AdHost({slot:e,className:t}){var a;const s=useSettings(),{isSubscribed:i}=useAuth(),n=reactExports.useMemo(()=>dot.pick(`ads.${e}`,s),[e,s]);return(a=s.ads)!=null&&a.disable||i||!n?null:jsxRuntimeExports.jsx(InvariantAd,{className:t,slot:e,adCode:n})}const InvariantAd=reactExports.memo(({slot:e,adCode:t,className:s})=>{const i=reactExports.useRef(null),n=reactExports.useId();return reactExports.useEffect(()=>(i.current&&loadAdScripts(t,i.current).then(()=>{executeAdJavascript(t,n)}),()=>{delete window.google_ad_modifications}),[t,n]),jsxRuntimeExports.jsx("div",{ref:i,id:n,className:clsx("ad-host flex items-center justify-center w-full max-w-full overflow-hidden min-h-90 max-h-[600px]",`${e.replace(/\./g,"-")}-host`,s),dangerouslySetInnerHTML:{__html:getAdHtml(t)}})},()=>!1);function getAdHtml(e){return e==null?void 0:e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").trim()}function loadAdScripts(e,t){const s=[],i=/<script.*?src=['"](.*?)['"]/g;let n;for(;n=i.exec(e);)n[1]&&s.push(lazyLoader.loadAsset(n[1],{type:"js",parentEl:t}));return Promise.all(s)}function executeAdJavascript(adCode,id){const pattern=/<script\b[^>]*>([\s\S]*?)<\/script>/g;let content;for(;content=pattern.exec(adCode);)if(content[1]){const r=`var d = document.createElement('div'); d.innerHTML = $1; document.getElementById('${id}').appendChild(d.firstChild);`,toEval=content[1].replace(/document.write\((.+?)\);/,r);eval(toEval)}}function SitePageLayout({children:e}){return useScrollToTop(),jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx(MainNavbar,{}),jsxRuntimeExports.jsxs("div",{className:"flex-auto",children:[jsxRuntimeExports.jsx(AdHost,{slot:"general_top",className:"py-24"}),jsxRuntimeExports.jsx("div",{className:"relative min-h-[1000px]",children:e}),jsxRuntimeExports.jsx(AdHost,{slot:"general_bottom",className:"py-24"})]}),jsxRuntimeExports.jsx(Footer,{className:"container mx-auto mt-48 flex-shrink-0 px-24"})]})}function ChannelPage({slugOrId:e,type:t="channel"}){const s=useChannel(e,{channelType:t});let i=null;return s.data?i=jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(PageMetaTags,{query:s}),jsxRuntimeExports.jsx("div",{className:"pb-24",children:jsxRuntimeExports.jsx("div",{className:"container mx-auto p-24 @container",children:jsxRuntimeExports.jsx(ChannelContent,{channel:s.data.channel,isNested:!1},s.data.channel.id)})})]}):i=jsxRuntimeExports.jsx(PageStatus,{query:s,loaderClassName:"absolute inset-0 m-auto"}),jsxRuntimeExports.jsx(SitePageLayout,{children:i})}function TitlePageImageGrid({images:e,count:t,heading:s,srcSize:i}){const n=useIsMobileMediaQuery(),{trans:a}=useTrans();return e!=null&&e.length?(t||(t=n?6:5),jsxRuntimeExports.jsxs("div",{className:"mt-48",children:[s,jsxRuntimeExports.jsx("div",{className:"grid grid-cols-3 md:grid-cols-5 gap-24",children:e.slice(0,t).map((o,x)=>jsxRuntimeExports.jsxs(DialogTrigger,{type:"modal",children:[jsxRuntimeExports.jsx(ButtonBase,{"aria-label":a(message("Image :index",{values:{index:x}})),children:jsxRuntimeExports.jsx(ImageItem,{image:o,srcSize:i})}),jsxRuntimeExports.jsx(ImageZoomDialog,{images:e.map(l=>l.url),defaultActiveIndex:x})]},o.id))})]})):null}function ImageItem({image:e,srcSize:t="md"}){const s=useImageSrc(e.url,{size:t});return jsxRuntimeExports.jsx("img",{className:"w-full aspect-square object-cover cursor-pointer rounded",src:s,alt:""})}function TitleCreditsGrid({credits:e,className:t}){return e.length?jsxRuntimeExports.jsx("div",{className:clsx("grid gap-14 md:gap-20 title-credits-grid",t),children:e.map(s=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-14 md:gap-20",children:[jsxRuntimeExports.jsx(PersonPoster,{rounded:!0,person:s,size:"w-70 md:w-96",srcSize:"md"}),jsxRuntimeExports.jsxs("div",{className:"max-md:text-sm",children:[jsxRuntimeExports.jsx(PersonLink,{className:"block font-bold",person:s}),jsxRuntimeExports.jsx("div",{className:"text-muted",children:jsxRuntimeExports.jsx(Description,{credit:s})})]})]},s.pivot.id))}):jsxRuntimeExports.jsx("div",{className:"text-muted italic",children:jsxRuntimeExports.jsx(Trans,{message:"We've no cast information for this title yet."})})}function Description({credit:e}){return e.pivot.department==="actors"?jsxRuntimeExports.jsx(reactExports.Fragment,{children:e.pivot.character}):jsxRuntimeExports.jsx("span",{className:"capitalize",children:jsxRuntimeExports.jsx(Trans,{message:e.pivot.job})})}function TitlePageCast({credits:e=[]}){const t=e.filter(s=>s.pivot.department==="actors");return jsxRuntimeExports.jsxs("div",{className:"mt-48",children:[jsxRuntimeExports.jsx(SiteSectionHeading,{children:jsxRuntimeExports.jsx(Trans,{message:"Cast"})}),jsxRuntimeExports.jsx(TitleCreditsGrid,{credits:t}),jsxRuntimeExports.jsx(Button,{className:"mt-24",variant:"outline",color:"primary",elementType:Link,to:"full-credits",endIcon:jsxRuntimeExports.jsx(ArrowForwardIcon,{}),children:jsxRuntimeExports.jsx(Trans,{message:"All cast and crew"})})]})}function useRelatedTitles(e){return useQuery(["titles",e,"related"],()=>fetchRelatedTitles(e))}function fetchRelatedTitles(e){return apiClient.get(`titles/${e}/related`).then(t=>t.data)}function RelatedTitlesPanel({title:e}){const{data:t}=useRelatedTitles(e.id),{scrollContainerRef:s,canScrollForward:i,canScrollBackward:n,scrollToPreviousPage:a,scrollToNextPage:o,containerClassName:x,itemClassName:l}=useCarousel();return jsxRuntimeExports.jsxs("div",{className:"mt-48",children:[jsxRuntimeExports.jsx(SiteSectionHeading,{actions:jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(IconButton,{disabled:!n,onClick:()=>a(),children:jsxRuntimeExports.jsx(KeyboardArrowLeftIcon,{})}),jsxRuntimeExports.jsx(IconButton,{disabled:!i,onClick:()=>o(),children:jsxRuntimeExports.jsx(KeyboardArrowRightIcon,{})})]}),children:jsxRuntimeExports.jsx(Trans,{message:"More like this"})}),jsxRuntimeExports.jsx("div",{ref:s,className:clsx(x,"content-grid-portrait"),children:t==null?void 0:t.titles.map(c=>jsxRuntimeExports.jsx("div",{className:l,children:jsxRuntimeExports.jsx(TitlePortraitGridItem,{item:c})},c.id))})]})}function TitlePageSeasonGrid({data:{title:e,seasons:t}}){const s=useTitleSeasons(e.id,t);return jsxRuntimeExports.jsxs("div",{className:"mt-48",children:[jsxRuntimeExports.jsx(SiteSectionHeading,{titleAppend:`(${t.total})`,children:jsxRuntimeExports.jsx(Trans,{message:"Seasons"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 lg:grid-cols-8 gap-14",children:s.items.map(i=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(SeasonPoster,{title:e,season:i,srcSize:"sm",className:"aspect-poster flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"mt-4",children:[jsxRuntimeExports.jsx(SeasonLink,{className:"text-sm",title:e,seasonNumber:i.number,color:"primary"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-muted",children:jsxRuntimeExports.jsx(FormattedDate,{date:i.release_date,options:{year:"numeric"}})})]})]},i.id))}),jsxRuntimeExports.jsx(InfiniteScrollSentinel,{query:s,variant:"loadMore",loaderMarginTop:"mt-14",size:"sm"})]})]})}const CompactCredits=reactExports.memo(({credits:e})=>{var t,s,i,n;return jsxRuntimeExports.jsxs("div",{className:"mt-16 pt-16 border-t flex flex-col gap-14",children:[(t=e.creators)!=null&&t.length?jsxRuntimeExports.jsx(PeopleDetail,{label:jsxRuntimeExports.jsx(Trans,{message:"Created by"}),children:jsxRuntimeExports.jsx(BulletSeparatedItems,{children:e.creators.slice(0,3).map(a=>jsxRuntimeExports.jsx(PersonLink,{person:a,color:"primary"},a.id))})}):null,(s=e.directing)!=null&&s.length?jsxRuntimeExports.jsx(PeopleDetail,{label:jsxRuntimeExports.jsx(Trans,{message:"[one Director|other Directors]",values:{count:e.directing.length}}),children:jsxRuntimeExports.jsx(BulletSeparatedItems,{children:e.directing.slice(0,3).map(a=>jsxRuntimeExports.jsx(PersonLink,{person:a,color:"primary"},a.id))})}):null,(i=e.writing)!=null&&i.length?jsxRuntimeExports.jsx(PeopleDetail,{label:jsxRuntimeExports.jsx(Trans,{message:"[one Writer|other Writers]",values:{count:e.writing.length}}),children:jsxRuntimeExports.jsx(BulletSeparatedItems,{children:e.writing.slice(0,3).map(a=>jsxRuntimeExports.jsx(PersonLink,{person:a,color:"primary"},a.id))})}):null,(n=e.actors)!=null&&n.length?jsxRuntimeExports.jsx(PeopleDetail,{label:jsxRuntimeExports.jsx(Trans,{message:"Stars"}),children:jsxRuntimeExports.jsx(BulletSeparatedItems,{children:e.actors.slice(0,3).map(a=>jsxRuntimeExports.jsx(PersonLink,{person:a,color:"primary"},a.id))})}):null]})});function PeopleDetail({label:e,children:t}){return jsxRuntimeExports.jsxs("div",{className:"md:flex gap-24 flex-shrink-0",children:[jsxRuntimeExports.jsx("div",{className:"font-bold min-w-84",children:e}),jsxRuntimeExports.jsx("div",{children:t})]})}function getGenreLink(e,{absolute:t}={}){return getBaseMediaLink(`/genre/${e.name}`,{absolute:t})}function useTitleNews(e){return useQuery(["titles",`${e}`,"news"],()=>fetchNews(e))}function fetchNews(e){return apiClient.get(`titles/${e}/news`).then(t=>t.data)}function TitleNews({title:e}){const{data:t,isLoading:s}=useTitleNews(e.id);return!s&&!(t!=null&&t.news_articles.length)?null:jsxRuntimeExports.jsxs("section",{className:"mt-48",children:[jsxRuntimeExports.jsx(SiteSectionHeading,{children:jsxRuntimeExports.jsx(Trans,{message:"Related news"})}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 gap-24",children:t==null?void 0:t.news_articles.map(i=>jsxRuntimeExports.jsx(NewsArticleGridItem,{article:i},i.id))})]})}var HTML5NamedCharRefs={amp:"&",gt:">",lt:"<",nbsp:" ",quot:'"'},HEXCHARCODE=/^#[xX]([A-Fa-f0-9]+)$/,CHARCODE=/^#([0-9]+)$/,NAMED=/^([A-Za-z0-9]+)$/,EntityParser=function(){function e(t){this.named=t}return e.prototype.parse=function(t){if(t){var s=t.match(HEXCHARCODE);if(s)return String.fromCharCode(parseInt(s[1],16));if(s=t.match(CHARCODE),s)return String.fromCharCode(parseInt(s[1],10));if(s=t.match(NAMED),s)return this.named[s[1]]||"&"+s[1]+";"}},e}(),WSP=/[\t\n\f ]/,ALPHA=/[A-Za-z]/,CRLF=/\r\n?/g;function isSpace(e){return WSP.test(e)}function isAlpha(e){return ALPHA.test(e)}function preprocessInput(e){return e.replace(CRLF,`
`)}var EventedTokenizer=function(){function e(t,s,i){i===void 0&&(i="precompile"),this.delegate=t,this.entityParser=s,this.mode=i,this.state="beforeData",this.line=-1,this.column=-1,this.input="",this.index=-1,this.tagNameBuffer="",this.states={beforeData:function(){var n=this.peek();if(n==="<"&&!this.isIgnoredEndTag())this.transitionTo("tagOpen"),this.markTagStart(),this.consume();else{if(this.mode==="precompile"&&n===`
`){var a=this.tagNameBuffer.toLowerCase();(a==="pre"||a==="textarea")&&this.consume()}this.transitionTo("data"),this.delegate.beginData()}},data:function(){var n=this.peek(),a=this.tagNameBuffer;n==="<"&&!this.isIgnoredEndTag()?(this.delegate.finishData(),this.transitionTo("tagOpen"),this.markTagStart(),this.consume()):n==="&"&&a!=="script"&&a!=="style"?(this.consume(),this.delegate.appendToData(this.consumeCharRef()||"&")):(this.consume(),this.delegate.appendToData(n))},tagOpen:function(){var n=this.consume();n==="!"?this.transitionTo("markupDeclarationOpen"):n==="/"?this.transitionTo("endTagOpen"):(n==="@"||n===":"||isAlpha(n))&&(this.transitionTo("tagName"),this.tagNameBuffer="",this.delegate.beginStartTag(),this.appendToTagName(n))},markupDeclarationOpen:function(){var n=this.consume();if(n==="-"&&this.peek()==="-")this.consume(),this.transitionTo("commentStart"),this.delegate.beginComment();else{var a=n.toUpperCase()+this.input.substring(this.index,this.index+6).toUpperCase();a==="DOCTYPE"&&(this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.transitionTo("doctype"),this.delegate.beginDoctype&&this.delegate.beginDoctype())}},doctype:function(){var n=this.consume();isSpace(n)&&this.transitionTo("beforeDoctypeName")},beforeDoctypeName:function(){var n=this.consume();isSpace(n)||(this.transitionTo("doctypeName"),this.delegate.appendToDoctypeName&&this.delegate.appendToDoctypeName(n.toLowerCase()))},doctypeName:function(){var n=this.consume();isSpace(n)?this.transitionTo("afterDoctypeName"):n===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeName&&this.delegate.appendToDoctypeName(n.toLowerCase())},afterDoctypeName:function(){var n=this.consume();if(!isSpace(n))if(n===">")this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData");else{var a=n.toUpperCase()+this.input.substring(this.index,this.index+5).toUpperCase(),o=a.toUpperCase()==="PUBLIC",x=a.toUpperCase()==="SYSTEM";(o||x)&&(this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.consume()),o?this.transitionTo("afterDoctypePublicKeyword"):x&&this.transitionTo("afterDoctypeSystemKeyword")}},afterDoctypePublicKeyword:function(){var n=this.peek();isSpace(n)?(this.transitionTo("beforeDoctypePublicIdentifier"),this.consume()):n==='"'?(this.transitionTo("doctypePublicIdentifierDoubleQuoted"),this.consume()):n==="'"?(this.transitionTo("doctypePublicIdentifierSingleQuoted"),this.consume()):n===">"&&(this.consume(),this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData"))},doctypePublicIdentifierDoubleQuoted:function(){var n=this.consume();n==='"'?this.transitionTo("afterDoctypePublicIdentifier"):n===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypePublicIdentifier&&this.delegate.appendToDoctypePublicIdentifier(n)},doctypePublicIdentifierSingleQuoted:function(){var n=this.consume();n==="'"?this.transitionTo("afterDoctypePublicIdentifier"):n===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypePublicIdentifier&&this.delegate.appendToDoctypePublicIdentifier(n)},afterDoctypePublicIdentifier:function(){var n=this.consume();isSpace(n)?this.transitionTo("betweenDoctypePublicAndSystemIdentifiers"):n===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):n==='"'?this.transitionTo("doctypeSystemIdentifierDoubleQuoted"):n==="'"&&this.transitionTo("doctypeSystemIdentifierSingleQuoted")},betweenDoctypePublicAndSystemIdentifiers:function(){var n=this.consume();isSpace(n)||(n===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):n==='"'?this.transitionTo("doctypeSystemIdentifierDoubleQuoted"):n==="'"&&this.transitionTo("doctypeSystemIdentifierSingleQuoted"))},doctypeSystemIdentifierDoubleQuoted:function(){var n=this.consume();n==='"'?this.transitionTo("afterDoctypeSystemIdentifier"):n===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeSystemIdentifier&&this.delegate.appendToDoctypeSystemIdentifier(n)},doctypeSystemIdentifierSingleQuoted:function(){var n=this.consume();n==="'"?this.transitionTo("afterDoctypeSystemIdentifier"):n===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeSystemIdentifier&&this.delegate.appendToDoctypeSystemIdentifier(n)},afterDoctypeSystemIdentifier:function(){var n=this.consume();isSpace(n)||n===">"&&(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData"))},commentStart:function(){var n=this.consume();n==="-"?this.transitionTo("commentStartDash"):n===">"?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData(n),this.transitionTo("comment"))},commentStartDash:function(){var n=this.consume();n==="-"?this.transitionTo("commentEnd"):n===">"?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData("-"),this.transitionTo("comment"))},comment:function(){var n=this.consume();n==="-"?this.transitionTo("commentEndDash"):this.delegate.appendToCommentData(n)},commentEndDash:function(){var n=this.consume();n==="-"?this.transitionTo("commentEnd"):(this.delegate.appendToCommentData("-"+n),this.transitionTo("comment"))},commentEnd:function(){var n=this.consume();n===">"?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData("--"+n),this.transitionTo("comment"))},tagName:function(){var n=this.consume();isSpace(n)?this.transitionTo("beforeAttributeName"):n==="/"?this.transitionTo("selfClosingStartTag"):n===">"?(this.delegate.finishTag(),this.transitionTo("beforeData")):this.appendToTagName(n)},endTagName:function(){var n=this.consume();isSpace(n)?(this.transitionTo("beforeAttributeName"),this.tagNameBuffer=""):n==="/"?(this.transitionTo("selfClosingStartTag"),this.tagNameBuffer=""):n===">"?(this.delegate.finishTag(),this.transitionTo("beforeData"),this.tagNameBuffer=""):this.appendToTagName(n)},beforeAttributeName:function(){var n=this.peek();if(isSpace(n)){this.consume();return}else n==="/"?(this.transitionTo("selfClosingStartTag"),this.consume()):n===">"?(this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):n==="="?(this.delegate.reportSyntaxError("attribute name cannot start with equals sign"),this.transitionTo("attributeName"),this.delegate.beginAttribute(),this.consume(),this.delegate.appendToAttributeName(n)):(this.transitionTo("attributeName"),this.delegate.beginAttribute())},attributeName:function(){var n=this.peek();isSpace(n)?(this.transitionTo("afterAttributeName"),this.consume()):n==="/"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):n==="="?(this.transitionTo("beforeAttributeValue"),this.consume()):n===">"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):n==='"'||n==="'"||n==="<"?(this.delegate.reportSyntaxError(n+" is not a valid character within attribute names"),this.consume(),this.delegate.appendToAttributeName(n)):(this.consume(),this.delegate.appendToAttributeName(n))},afterAttributeName:function(){var n=this.peek();if(isSpace(n)){this.consume();return}else n==="/"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):n==="="?(this.consume(),this.transitionTo("beforeAttributeValue")):n===">"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.transitionTo("attributeName"),this.delegate.beginAttribute(),this.consume(),this.delegate.appendToAttributeName(n))},beforeAttributeValue:function(){var n=this.peek();isSpace(n)?this.consume():n==='"'?(this.transitionTo("attributeValueDoubleQuoted"),this.delegate.beginAttributeValue(!0),this.consume()):n==="'"?(this.transitionTo("attributeValueSingleQuoted"),this.delegate.beginAttributeValue(!0),this.consume()):n===">"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.transitionTo("attributeValueUnquoted"),this.delegate.beginAttributeValue(!1),this.consume(),this.delegate.appendToAttributeValue(n))},attributeValueDoubleQuoted:function(){var n=this.consume();n==='"'?(this.delegate.finishAttributeValue(),this.transitionTo("afterAttributeValueQuoted")):n==="&"?this.delegate.appendToAttributeValue(this.consumeCharRef()||"&"):this.delegate.appendToAttributeValue(n)},attributeValueSingleQuoted:function(){var n=this.consume();n==="'"?(this.delegate.finishAttributeValue(),this.transitionTo("afterAttributeValueQuoted")):n==="&"?this.delegate.appendToAttributeValue(this.consumeCharRef()||"&"):this.delegate.appendToAttributeValue(n)},attributeValueUnquoted:function(){var n=this.peek();isSpace(n)?(this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("beforeAttributeName")):n==="/"?(this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):n==="&"?(this.consume(),this.delegate.appendToAttributeValue(this.consumeCharRef()||"&")):n===">"?(this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.consume(),this.delegate.appendToAttributeValue(n))},afterAttributeValueQuoted:function(){var n=this.peek();isSpace(n)?(this.consume(),this.transitionTo("beforeAttributeName")):n==="/"?(this.consume(),this.transitionTo("selfClosingStartTag")):n===">"?(this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):this.transitionTo("beforeAttributeName")},selfClosingStartTag:function(){var n=this.peek();n===">"?(this.consume(),this.delegate.markTagAsSelfClosing(),this.delegate.finishTag(),this.transitionTo("beforeData")):this.transitionTo("beforeAttributeName")},endTagOpen:function(){var n=this.consume();(n==="@"||n===":"||isAlpha(n))&&(this.transitionTo("endTagName"),this.tagNameBuffer="",this.delegate.beginEndTag(),this.appendToTagName(n))}},this.reset()}return e.prototype.reset=function(){this.transitionTo("beforeData"),this.input="",this.tagNameBuffer="",this.index=0,this.line=1,this.column=0,this.delegate.reset()},e.prototype.transitionTo=function(t){this.state=t},e.prototype.tokenize=function(t){this.reset(),this.tokenizePart(t),this.tokenizeEOF()},e.prototype.tokenizePart=function(t){for(this.input+=preprocessInput(t);this.index<this.input.length;){var s=this.states[this.state];if(s!==void 0)s.call(this);else throw new Error("unhandled state "+this.state)}},e.prototype.tokenizeEOF=function(){this.flushData()},e.prototype.flushData=function(){this.state==="data"&&(this.delegate.finishData(),this.transitionTo("beforeData"))},e.prototype.peek=function(){return this.input.charAt(this.index)},e.prototype.consume=function(){var t=this.peek();return this.index++,t===`
`?(this.line++,this.column=0):this.column++,t},e.prototype.consumeCharRef=function(){var t=this.input.indexOf(";",this.index);if(t!==-1){var s=this.input.slice(this.index,t),i=this.entityParser.parse(s);if(i){for(var n=s.length;n;)this.consume(),n--;return this.consume(),i}}},e.prototype.markTagStart=function(){this.delegate.tagOpen()},e.prototype.appendToTagName=function(t){this.tagNameBuffer+=t,this.delegate.appendToTagName(t)},e.prototype.isIgnoredEndTag=function(){var t=this.tagNameBuffer;return t==="title"&&this.input.substring(this.index,this.index+8)!=="</title>"||t==="style"&&this.input.substring(this.index,this.index+8)!=="</style>"||t==="script"&&this.input.substring(this.index,this.index+9)!=="<\/script>"},e}(),Tokenizer=function(){function e(t,s){s===void 0&&(s={}),this.options=s,this.token=null,this.startLine=1,this.startColumn=0,this.tokens=[],this.tokenizer=new EventedTokenizer(this,t,s.mode),this._currentAttribute=void 0}return e.prototype.tokenize=function(t){return this.tokens=[],this.tokenizer.tokenize(t),this.tokens},e.prototype.tokenizePart=function(t){return this.tokens=[],this.tokenizer.tokenizePart(t),this.tokens},e.prototype.tokenizeEOF=function(){return this.tokens=[],this.tokenizer.tokenizeEOF(),this.tokens[0]},e.prototype.reset=function(){this.token=null,this.startLine=1,this.startColumn=0},e.prototype.current=function(){var t=this.token;if(t===null)throw new Error("token was unexpectedly null");if(arguments.length===0)return t;for(var s=0;s<arguments.length;s++)if(t.type===arguments[s])return t;throw new Error("token type was unexpectedly "+t.type)},e.prototype.push=function(t){this.token=t,this.tokens.push(t)},e.prototype.currentAttribute=function(){return this._currentAttribute},e.prototype.addLocInfo=function(){this.options.loc&&(this.current().loc={start:{line:this.startLine,column:this.startColumn},end:{line:this.tokenizer.line,column:this.tokenizer.column}}),this.startLine=this.tokenizer.line,this.startColumn=this.tokenizer.column},e.prototype.beginDoctype=function(){this.push({type:"Doctype",name:""})},e.prototype.appendToDoctypeName=function(t){this.current("Doctype").name+=t},e.prototype.appendToDoctypePublicIdentifier=function(t){var s=this.current("Doctype");s.publicIdentifier===void 0?s.publicIdentifier=t:s.publicIdentifier+=t},e.prototype.appendToDoctypeSystemIdentifier=function(t){var s=this.current("Doctype");s.systemIdentifier===void 0?s.systemIdentifier=t:s.systemIdentifier+=t},e.prototype.endDoctype=function(){this.addLocInfo()},e.prototype.beginData=function(){this.push({type:"Chars",chars:""})},e.prototype.appendToData=function(t){this.current("Chars").chars+=t},e.prototype.finishData=function(){this.addLocInfo()},e.prototype.beginComment=function(){this.push({type:"Comment",chars:""})},e.prototype.appendToCommentData=function(t){this.current("Comment").chars+=t},e.prototype.finishComment=function(){this.addLocInfo()},e.prototype.tagOpen=function(){},e.prototype.beginStartTag=function(){this.push({type:"StartTag",tagName:"",attributes:[],selfClosing:!1})},e.prototype.beginEndTag=function(){this.push({type:"EndTag",tagName:""})},e.prototype.finishTag=function(){this.addLocInfo()},e.prototype.markTagAsSelfClosing=function(){this.current("StartTag").selfClosing=!0},e.prototype.appendToTagName=function(t){this.current("StartTag","EndTag").tagName+=t},e.prototype.beginAttribute=function(){this._currentAttribute=["","",!1]},e.prototype.appendToAttributeName=function(t){this.currentAttribute()[0]+=t},e.prototype.beginAttributeValue=function(t){this.currentAttribute()[2]=t},e.prototype.appendToAttributeValue=function(t){this.currentAttribute()[1]+=t},e.prototype.finishAttributeValue=function(){this.current("StartTag").attributes.push(this._currentAttribute)},e.prototype.reportSyntaxError=function(t){this.current().syntaxError=t},e}();function tokenize(e,t){var s=new Tokenizer(new EntityParser(HTML5NamedCharRefs),t);return s.tokenize(e)}const LinkifyResult="LinkifyResult",StartTag="StartTag",EndTag="EndTag",Chars="Chars",Comment="Comment",Doctype="Doctype";function linkifyHtml(e,t){t===void 0&&(t={});const s=tokenize(e),i=[],n=[],a=new Options(t,defaultRender);for(let o=0;o<s.length;o++){const x=s[o];if(x.type===StartTag){i.push(x);const l=x.tagName.toUpperCase();if(!(l==="A"||a.ignoreTags.indexOf(l)>=0))continue;let u=i.length;skipTagTokens(l,s,++o,i),o+=i.length-u-1}else if(x.type!==Chars)i.push(x);else{const l=linkifyChars(x.chars,a);i.push.apply(i,l)}}for(let o=0;o<i.length;o++){const x=i[o];switch(x.type){case LinkifyResult:n.push(x.rendered);break;case StartTag:{let l="<"+x.tagName;x.attributes.length>0&&(l+=" "+attributeArrayToStrings(x.attributes).join(" ")),x.selfClosing&&(l+=" /"),l+=">",n.push(l);break}case EndTag:n.push(`</${x.tagName}>`);break;case Chars:n.push(escapeText(x.chars));break;case Comment:n.push(`<!--${escapeText(x.chars)}-->`);break;case Doctype:{let l=`<!DOCTYPE ${x.name}`;x.publicIdentifier&&(l+=` PUBLIC "${x.publicIdentifier}"`),x.systemIdentifier&&(l+=` "${x.systemIdentifier}"`),l+=">",n.push(l);break}}}return n.join("")}function linkifyChars(e,t){const s=tokenize$1(e),i=[];for(let n=0;n<s.length;n++){const a=s[n];a.t==="nl"&&t.get("nl2br")?i.push({type:StartTag,tagName:"br",attributes:[],selfClosing:!0}):!a.isLink||!t.check(a)?i.push({type:Chars,chars:a.toString()}):i.push({type:LinkifyResult,rendered:t.render(a)})}return i}function skipTagTokens(e,t,s,i){let n=1;for(;s<t.length&&n>0;){let a=t[s];a.type===StartTag&&a.tagName.toUpperCase()===e?n++:a.type===EndTag&&a.tagName.toUpperCase()===e&&n--,i.push(a),s++}return i}function defaultRender(e){let{tagName:t,attributes:s,content:i}=e;return`<${t} ${attributesToString(s)}>${escapeText(i)}</${t}>`}function escapeText(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function escapeAttr(e){return e.replace(/"/g,"&quot;")}function attributesToString(e){const t=[];for(const s in e){const i=e[s]+"";t.push(`${s}="${escapeAttr(i)}"`)}return t.join(" ")}function attributeArrayToStrings(e){const t=[];for(let s=0;s<e.length;s++){const i=e[s][0],n=e[s][1]+"";t.push(`${i}="${escapeAttr(n)}"`)}return t}function useLinkifiedString(e){return reactExports.useMemo(()=>e&&linkifyHtml(e,{nl2br:!0,attributes:{rel:"nofollow"}}),[e])}function TruncatedDescription({description:e,className:t}){const s=useLinkifiedString(e),i=reactExports.useRef(null),n=reactExports.useRef(null),[a,o]=reactExports.useState(!1),[x,l]=reactExports.useState(!1);return reactExports.useLayoutEffect(()=>{var d,j;const c=((d=i.current)==null?void 0:d.getBoundingClientRect().height)||0;(((j=i.current)==null?void 0:j.scrollHeight)||0)>c&&o(!0)},[]),s?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{ref:i,className:clsx("relative",t,!x&&"max-h-160 overflow-hidden",!x&&a&&"after:absolute after:bottom-0 after:left-0 after:w-full after:h-20 after:bg-gradient-to-b after:from-transparent after:to-background"),children:jsxRuntimeExports.jsx("div",{ref:n,dangerouslySetInnerHTML:{__html:s}})}),a&&jsxRuntimeExports.jsx(Button,{size:"xs",className:"mt-20",variant:"outline",onClick:()=>l(!x),children:x?jsxRuntimeExports.jsx(Trans,{message:"Show less"}):jsxRuntimeExports.jsx(Trans,{message:"Show more"})})]}):null}const NewReviewForm=reactExports.forwardRef(({reviewable:e,currentReview:t,className:s,disabled:i},n)=>{const[a,o]=reactExports.useState(!1),{user:x}=useAuth(),l=useForm({defaultValues:{score:8}});reactExports.useEffect(()=>{t&&(l.setValue("title",t.title),l.setValue("body",t.body),l.setValue("score",t.score))},[l,t]);const c=reactExports.useCallback(()=>{o(!0)},[]);reactExports.useImperativeHandle(n,()=>({openReviewPanel:c}),[c]);const u=useCreateReview(l);return jsxRuntimeExports.jsxs(Form,{className:clsx("rounded border bg-alt p-14",s),form:l,onSubmit:d=>{i||u.mutate({...d,reviewable:e},{onSuccess:()=>{toast(message("Review posted")),o(!1)}})},children:[jsxRuntimeExports.jsxs("div",{className:"items-center gap-24 lg:flex",children:[jsxRuntimeExports.jsx(Avatar,{size:"xl",circle:!0,src:x==null?void 0:x.avatar,label:x==null?void 0:x.display_name}),jsxRuntimeExports.jsxs("div",{className:"flex-auto",children:[jsxRuntimeExports.jsx("div",{className:"mb-4 text-xs text-muted",children:jsxRuntimeExports.jsx(Trans,{message:"Review as :name",values:{name:jsxRuntimeExports.jsx("span",{className:"font-medium text",children:x==null?void 0:x.display_name})}})}),jsxRuntimeExports.jsx(StarSelector,{readonly:i,className:"-ml-8 max-lg:mb-12",count:10,value:i?0:l.watch("score"),onValueChange:d=>{l.setValue("score",d)}})]}),!a&&jsxRuntimeExports.jsx(Button,{variant:"flat",color:"primary",onClick:()=>c(),disabled:!x||i,children:t?jsxRuntimeExports.jsx(Trans,{message:"Update review"}):jsxRuntimeExports.jsx(Trans,{message:"Add review"})})]}),a&&jsxRuntimeExports.jsxs("div",{className:"mt-24",children:[jsxRuntimeExports.jsx(FormTextField,{name:"title",className:"mb-24",label:jsxRuntimeExports.jsx(Trans,{message:"Title"}),labelSuffix:jsxRuntimeExports.jsx(Trans,{message:"10 character minimum"}),autoFocus:!0,minLength:10,required:!0}),jsxRuntimeExports.jsx(FormTextField,{name:"body",label:jsxRuntimeExports.jsx(Trans,{message:"Review"}),labelSuffix:jsxRuntimeExports.jsx(Trans,{message:"100 character minimum"}),inputElementType:"textarea",rows:5,minLength:100,required:!0}),jsxRuntimeExports.jsxs("div",{className:"mt-16 flex items-center justify-end gap-8",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",className:"min-w-100",onClick:()=>{o(!1),l.reset(t)},children:jsxRuntimeExports.jsx(Trans,{message:"Cancel"})}),jsxRuntimeExports.jsx(Button,{type:"submit",variant:"flat",color:"primary",className:"min-w-100",disabled:u.isLoading,children:jsxRuntimeExports.jsx(Trans,{message:"Post"})})]})]})]})});function useSubmitReviewFeedback(e){return useMutation(t=>submitFeedback(t,e),{onSuccess:()=>{toast(message("Feedback submitted"))},onError:t=>showHttpErrorToast(t)})}function submitFeedback(e,t){return apiClient.post(`reviews/${t.id}/feedback`,{is_helpful:e.isHelpful}).then(s=>s.data)}function useSubmitReport(e){return useMutation(t=>submitReport(e,t),{onSuccess:()=>{toast(message("Thanks for reporting. We will review this content."))},onError:t=>showHttpErrorToast(t)})}function submitReport(e,t){return apiClient.post("report",{reason:t.reason,model_id:e.id,model_type:e.model_type}).then(s=>s.data)}function useDeleteReport(e){return useMutation(()=>deleteReport(e),{onSuccess:()=>{toast(message("Report removed"))},onError:t=>showHttpErrorToast(t)})}function deleteReport(e){return apiClient.delete(`report/${e.model_type}/${e.id}`).then(t=>t.data)}function ReviewListItem$1({review:e,isShared:t,hideShareButton:s,avatar:i}){const n=useIsMobileMediaQuery(),a=reactExports.useRef(null),o=reactExports.useRef(!1);return reactExports.useEffect(()=>{var x;t&&!o.current&&((x=a.current)==null||x.scrollIntoView({behavior:"smooth"}),o.current=!0)},[t]),jsxRuntimeExports.jsxs("div",{ref:a,children:[t&&jsxRuntimeExports.jsx("div",{className:"text-sm mt-16 mb-8",children:jsxRuntimeExports.jsx(Trans,{message:"Shared review"})}),jsxRuntimeExports.jsxs("div",{className:clsx("flex items-start gap-24 py-18 min-h-70 group rounded",t&&"bg-alt border mb-34"),children:[!n&&(i||jsxRuntimeExports.jsx(UserAvatar,{user:e.user,size:"xl",circle:!0})),jsxRuntimeExports.jsxs("div",{className:"flex-auto text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-8 mb-4",children:[e.user&&jsxRuntimeExports.jsx(UserDisplayName$1,{user:e.user}),jsxRuntimeExports.jsx("time",{className:"text-muted text-xs",children:jsxRuntimeExports.jsx(FormattedRelativeTime,{date:e.created_at})})]}),jsxRuntimeExports.jsx(TitleRating,{className:"mt-10 mb-8",score:e.score}),e.title&&jsxRuntimeExports.jsx("div",{className:"mb-8 text-base font-medium",children:e.title}),jsxRuntimeExports.jsx("div",{className:"text-sm",children:e.body}),jsxRuntimeExports.jsxs("div",{className:"md:flex items-center gap-8 mt-16",children:[jsxRuntimeExports.jsx(Feedback,{review:e}),!s&&jsxRuntimeExports.jsx(ShareButton$2,{review:e}),jsxRuntimeExports.jsx(ReviewOptionsTrigger,{review:e})]})]})]})]})}function ShareButton$2({review:e}){const{base_url:t}=useSettings(),s=useLocation(),i=`${t}${s.pathname}?reviewId=${e.id}`,[,n]=useClipboard(i);return jsxRuntimeExports.jsx(Tooltip,{label:jsxRuntimeExports.jsx(Trans,{message:"Share"}),children:jsxRuntimeExports.jsx(IconButton,{className:"text-muted",onClick:()=>{n(),toast(message("Review link copied to clipboard"))},children:jsxRuntimeExports.jsx(ShareIcon,{})})})}function Feedback({review:e}){const{user:t}=useAuth(),s=useAuthClickCapture(),i=useSubmitReviewFeedback(e),n=i.isLoading||t!=null&&t.id===e.user_id,[a,o]=reactExports.useState(e.helpful_count||1),[x,l]=reactExports.useState(e.helpful_count+e.not_helpful_count||1);let c;e.current_user_feedback!=null&&(c=e.current_user_feedback?"helpful":"not_helpful");const[u,d]=reactExports.useState(c);return jsxRuntimeExports.jsxs("div",{className:"flex items-center flex-wrap gap-6 max-md:mb-12 mr-auto",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-muted",children:jsxRuntimeExports.jsx(Trans,{message:":helpfulCount out of :total people found this helpful. Was this review helpful?",values:{helpfulCount:a,total:x}})}),jsxRuntimeExports.jsxs("div",{className:"pb-2 flex items-center gap-6",children:[jsxRuntimeExports.jsx(Button,{variant:"link",className:clsx("uppercase",u==="helpful"&&"pointer-events-none"),color:u==="helpful"?"primary":void 0,disabled:n,onClickCapture:s,onClick:()=>i.mutate({isHelpful:!0},{onSuccess:()=>{o(j=>j+1),d("helpful"),u||l(j=>j+1)}}),children:jsxRuntimeExports.jsx(Trans,{message:"Yes"})}),jsxRuntimeExports.jsx("div",{className:"w-1 h-14 bg-divider"}),jsxRuntimeExports.jsx(Button,{variant:"link",className:clsx("uppercase",u==="not_helpful"&&"pointer-events-none"),color:u==="not_helpful"?"primary":void 0,disabled:n,onClickCapture:s,onClick:()=>i.mutate({isHelpful:!1},{onSuccess:()=>{o(j=>j-1),d("not_helpful"),u||l(j=>j+1)}}),children:jsxRuntimeExports.jsx(Trans,{message:"No"})})]})]})}function ReviewOptionsTrigger({review:e}){const{user:t,hasPermission:s}=useAuth(),i=useSubmitReport(e),n=useDeleteReport(e),[a,o]=reactExports.useState(e.current_user_reported),x=()=>{a?n.mutate(void 0,{onSuccess:()=>o(!1)}):i.mutate({},{onSuccess:()=>o(!0)})},l=useDeleteReviews(),[c,u]=reactExports.useState(!1),d=t&&e.user_id===t.id||s("reviews.delete"),j=g=>{u(!1),g&&l.mutate({reviewIds:[e.id]})};return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsxs(MenuTrigger,{children:[jsxRuntimeExports.jsx(IconButton,{className:"text-muted",children:jsxRuntimeExports.jsx(MoreVertIcon,{})}),jsxRuntimeExports.jsxs(Menu,{children:[jsxRuntimeExports.jsx(Item,{value:"report",onSelected:()=>x(),children:a?jsxRuntimeExports.jsx(Trans,{message:"Remove report"}):jsxRuntimeExports.jsx(Trans,{message:"Report review"})}),d&&jsxRuntimeExports.jsx(Item,{value:"delete",onSelected:()=>u(!0),children:jsxRuntimeExports.jsx(Trans,{message:"Delete"})})]})]}),jsxRuntimeExports.jsx(DialogTrigger,{type:"modal",isOpen:c,onClose:g=>j(g),children:jsxRuntimeExports.jsx(ConfirmationDialog,{isDanger:!0,title:jsxRuntimeExports.jsx(Trans,{message:"Delete review?"}),body:jsxRuntimeExports.jsx(Trans,{message:"Are you sure you want to delete this review?"}),confirm:jsxRuntimeExports.jsx(Trans,{message:"Delete"})})})]})}function UserDisplayName$1({user:e}){const t=useIsMobileMediaQuery(),{auth:s}=reactExports.useContext(SiteConfigContext),i="flex items-center gap-8 text-base font-medium";return s.getUserProfileLink?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[t&&jsxRuntimeExports.jsx(UserAvatar,{user:e,size:"sm",circle:!0}),jsxRuntimeExports.jsx(Link,{to:s.getUserProfileLink(e),className:clsx("hover:underline",i),children:e.display_name})]}):jsxRuntimeExports.jsxs("div",{className:i,children:[t&&jsxRuntimeExports.jsx(UserAvatar,{user:e,size:"sm",circle:!0}),e.display_name]})}function AccountRequiredCard({message:e}){const{user:t}=useAuth();return t?null:jsxRuntimeExports.jsxs("div",{className:"border border-dashed py-30 px-20 my-40 mx-auto text-center max-w-850 rounded",children:[jsxRuntimeExports.jsx("div",{className:"text-xl font-semibold mb-8",children:jsxRuntimeExports.jsx(Trans,{message:"Account required"})}),jsxRuntimeExports.jsx("div",{className:"text-muted text-base",children:jsxRuntimeExports.jsx(Trans,{...e,values:{l:s=>jsxRuntimeExports.jsx(Link,{className:LinkStyle,to:"/login",children:s}),r:s=>jsxRuntimeExports.jsx(Link,{className:LinkStyle,to:"/register",children:s})}})})]})}const accountRequiredMessage$1=message("Please <l>login</l> or <r>create account</r> to add a review");function ReviewList({reviewable:e,disabled:t,noResultsMessage:s,showAccountRequiredMessage:i}){var c,u;const n=useReviews(e),a=reactExports.useRef(null),{user:o}=useAuth(),x=(c=n.data)==null?void 0:c.pages[0].current_user_review,l=(u=n.data)==null?void 0:u.pages[0].shared_review;return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(NewReviewForm,{className:"mb-14 md:-mx-14",reviewable:e,currentReview:x,ref:a,disabled:t}),jsxRuntimeExports.jsxs("div",{children:[i&&jsxRuntimeExports.jsx(AccountRequiredCard,{message:accountRequiredMessage$1}),jsxRuntimeExports.jsx(AnimatePresence,{initial:!1,mode:"wait",children:n.isInitialLoading?jsxRuntimeExports.jsx(ReviewListSkeletons,{count:4}):jsxRuntimeExports.jsx(ReviewListItems,{reviews:n.items,sharedReview:l,noResultsMessage:s})}),jsxRuntimeExports.jsx("div",{className:"ml-84",children:jsxRuntimeExports.jsx(InfiniteScrollSentinel,{query:n,variant:"loadMore",loaderMarginTop:"mt-14",loadMoreExtraContent:jsxRuntimeExports.jsx(Button,{variant:"flat",color:"primary",disabled:!o,onClick:()=>{var d;(d=a.current)==null||d.openReviewPanel()},children:jsxRuntimeExports.jsx(Trans,{message:"Add a review"})})})})]})]})}function ReviewListItems({reviews:e,sharedReview:t,noResultsMessage:s}){const{user:i}=useAuth();let n;return e.length?n=e.map(a=>jsxRuntimeExports.jsx(ReviewListItem$1,{review:a},a.id)):n=i?s||jsxRuntimeExports.jsx(IllustratedMessage,{className:"mt-24",size:"sm",title:jsxRuntimeExports.jsx(Trans,{message:"Seems a little quiet over here"}),description:jsxRuntimeExports.jsx(Trans,{message:"Be the first to leave a review"})}):null,jsxRuntimeExports.jsxs(m.div,{...opacityAnimation,children:[t&&jsxRuntimeExports.jsx(ReviewListItem$1,{review:t,isShared:!0}),n]},"reviews")}function ReviewListSkeletons({count:e}){return jsxRuntimeExports.jsx(m.div,{...opacityAnimation,children:[...new Array(e).keys()].map(t=>jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-24 py-18 min-h-[212px] group",children:[jsxRuntimeExports.jsx(Skeleton,{variant:"avatar",radius:"rounded-full",size:"w-60 h-60"}),jsxRuntimeExports.jsxs("div",{className:"flex-auto text-sm",children:[jsxRuntimeExports.jsx(Skeleton,{className:"text-base font-medium max-w-200 mb-4",variant:"text"}),jsxRuntimeExports.jsx(Skeleton,{variant:"text",className:"max-w-60 mb-8 mt-10 text-lg"}),jsxRuntimeExports.jsx(Skeleton,{variant:"text",className:"mb-8 text-base max-w-240"}),jsxRuntimeExports.jsx(Skeleton,{className:"text-sm",variant:"text"}),jsxRuntimeExports.jsx(Skeleton,{className:"text-sm",variant:"text"}),jsxRuntimeExports.jsx(Skeleton,{className:"text-xs mt-16",variant:"text"})]})]},t))},"loading-skeleton")}function TitlePageReviewList({title:e}){const t=useIsMobileMediaQuery(),[s,i]=useLocalStorage(`reviewSort.${e.model_type}`,"created_at:desc"),n=useReviews(e);return jsxRuntimeExports.jsxs("div",{className:"mt-48",children:[jsxRuntimeExports.jsx(SiteSectionHeading,{titleAppend:n.totalItems?jsxRuntimeExports.jsxs("span",{children:["(",n.totalItems,")"]}):null,actions:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-24",children:[!t&&jsxRuntimeExports.jsx(TitleRating,{score:e.rating}),jsxRuntimeExports.jsx(ReviewListSortButton,{value:s,onValueChange:a=>i(a)})]}),children:jsxRuntimeExports.jsx(Trans,{message:"Reviews"})}),jsxRuntimeExports.jsx(ReviewList,{reviewable:e,showAccountRequiredMessage:e.status!=="upcoming",noResultsMessage:e.status==="upcoming"?jsxRuntimeExports.jsx(IllustratedMessage,{className:"mt-24",size:"sm",title:jsxRuntimeExports.jsx(Trans,{message:"This title is not released yet"}),description:jsxRuntimeExports.jsx(Trans,{message:"Come back after :date to see the reviews",values:{date:jsxRuntimeExports.jsx(FormattedDate,{date:e.release_date})}})}):void 0})]})}function TitlePageVideoGrid({title:e,episode:t}){const s=t?t.videos:e.videos,i=t?`${getEpisodeLink(e,t.season_number,t.episode_number)}/episodes/${t.id}/videos`:`${getTitleLink(e)}/videos`;return jsxRuntimeExports.jsx(VideoGrid,{videos:s,title:e,episode:t,heading:jsxRuntimeExports.jsx(SiteSectionHeading,{link:i,children:jsxRuntimeExports.jsx(Trans,{message:"Videos"})})})}function TitlePageEpisodeGrid({data:e}){const[t,s]=reactExports.useState(1),i=useSeasonEpisodes(void 0,{perPage:21},{season:t,willSortOrFilter:!0,defaultOrderBy:"episode_number",defaultOrderDir:"asc",titleId:e.title.id}),{isInitialLoading:n,items:a,sortDescriptor:o,setSortDescriptor:x}=i;return jsxRuntimeExports.jsxs("div",{className:"mt-48",children:[jsxRuntimeExports.jsx(SiteSectionHeading,{actions:jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(SeasonSelector,{selectedSeason:t,onSeasonChange:s,seasonCount:e.title.seasons_count}),jsxRuntimeExports.jsx(SortButton,{value:`${o.orderBy}:${o==null?void 0:o.orderDir}`,onValueChange:l=>{const[c,u]=l.split(":");x({orderBy:c,orderDir:u})}})]}),children:jsxRuntimeExports.jsx(Trans,{message:"Episodes"})}),jsxRuntimeExports.jsx(AnimatePresence,{initial:!1,mode:"wait",children:n?jsxRuntimeExports.jsx(SkeletonGrid,{}):jsxRuntimeExports.jsx(EpisodeGrid,{episodes:a,title:e.title,query:i})})]})}function GridItem({episode:e,title:t}){const s=e.runtime||t.runtime,i=jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(CompactSeasonEpisode,{className:"uppercase",episode:e})," -"," ",e.name]});return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsx(EpisodePoster,{episode:e,title:t,srcSize:"md",showPlayButton:!0,rightAction:s?jsxRuntimeExports.jsx("span",{className:"rounded bg-black/50 p-4 text-xs font-medium text-white",children:jsxRuntimeExports.jsx(FormattedDuration,{minutes:s,verbose:!0})}):null})}),jsxRuntimeExports.jsxs("div",{className:"mt-10",children:[e.release_date&&jsxRuntimeExports.jsx("div",{className:"mb-2 text-sm text-muted",children:jsxRuntimeExports.jsx(FormattedDate,{date:e.release_date})}),jsxRuntimeExports.jsx("div",{className:"overflow-hidden overflow-ellipsis whitespace-nowrap text-base",children:e.primary_video?jsxRuntimeExports.jsx(Link,{className:"rounded outline-none hover:underline focus-visible:ring focus-visible:ring-offset-2",to:getWatchLink(e.primary_video),children:i}):i})]})]})}function EpisodeGrid({title:e,episodes:t,query:s}){return jsxRuntimeExports.jsxs(m.div,{...opacityAnimation,children:[jsxRuntimeExports.jsx(ContentGridLayout,{variant:"landscape",children:t.map(i=>jsxRuntimeExports.jsx(GridItem,{episode:i,title:e},i.id))}),jsxRuntimeExports.jsx(InfiniteScrollSentinel,{query:s,variant:"loadMore",size:"sm",loaderMarginTop:"mt-16"})]},"episode-grid")}function SkeletonGrid(){return jsxRuntimeExports.jsx(m.div,{...opacityAnimation,children:jsxRuntimeExports.jsx(ContentGridLayout,{variant:"landscape",children:[...new Array(6).keys()].map(e=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Skeleton,{variant:"rect",size:"aspect-video",animation:"pulsate"}),jsxRuntimeExports.jsxs("div",{className:"mt-10 min-h-44",children:[jsxRuntimeExports.jsx(Skeleton,{variant:"text"}),jsxRuntimeExports.jsx(Skeleton,{variant:"text"})]})]},e))})},"episode-grid")}function SeasonSelector({selectedSeason:e,onSeasonChange:t,seasonCount:s}){return jsxRuntimeExports.jsxs(MenuTrigger,{selectedValue:e,onSelectionChange:i=>t(i),selectionMode:"single",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",startIcon:jsxRuntimeExports.jsx(ExpandMoreIcon,{}),className:"mr-4",children:jsxRuntimeExports.jsx(Trans,{message:"Season :number",values:{number:e}})}),jsxRuntimeExports.jsx(Menu,{children:[...new Array(s).keys()].map(i=>{const n=i+1;return jsxRuntimeExports.jsx(Item,{value:n,children:jsxRuntimeExports.jsx(Trans,{message:"Season :number",values:{number:n}})},n)})})]})}const SortOptions=[{value:"episode_number:desc",label:message("Newest")},{value:"episode_number:asc",label:message("Oldest")}];function SortButton({value:e,onValueChange:t}){let s=SortOptions.find(i=>i.value===e);return s||(s=SortOptions[0]),jsxRuntimeExports.jsxs(MenuTrigger,{selectedValue:e,onSelectionChange:i=>t(i),selectionMode:"single",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",startIcon:jsxRuntimeExports.jsx(SortIcon,{}),children:jsxRuntimeExports.jsx(Trans,{...s.label})}),jsxRuntimeExports.jsx(Menu,{children:SortOptions.map(i=>jsxRuntimeExports.jsx(Item,{value:i.value,children:jsxRuntimeExports.jsx(Trans,{...i.label})},i.value))})]})}function useConfiguredTitlePageSections(){const{title_page:e}=useSettings();return reactExports.useMemo(()=>e!=null&&e.sections?JSON.parse(e.sections):[],[e==null?void 0:e.sections])}function TitlePageMainContent({data:e,className:t}){var a;const{title:s,credits:i}=e,n=useConfiguredTitlePageSections();return jsxRuntimeExports.jsxs("main",{className:clsx(t,"@container"),children:[(a=s.genres)!=null&&a.length?jsxRuntimeExports.jsx(ChipList,{children:s.genres.map(o=>jsxRuntimeExports.jsx(Chip,{className:"capitalize",elementType:Link,to:getGenreLink(o),children:o.display_name||o.name},o.id))}):null,s.tagline&&jsxRuntimeExports.jsxs("blockquote",{className:"mt-16",children:["“",s.tagline,"”"]}),jsxRuntimeExports.jsx(TruncatedDescription,{className:"mt-16",description:s.description}),jsxRuntimeExports.jsx(CompactCredits,{credits:i}),jsxRuntimeExports.jsx(AdHost,{slot:"general_bottom",className:"pt-48"}),n.map(o=>jsxRuntimeExports.jsx(TitlePageSection,{name:o,title:s,data:e},o))]})}function TitlePageSection({name:e,title:t,data:s}){const{titles:i}=useSettings(),{hasPermission:n}=useAuth();switch(e){case"episodes":return t.is_series?jsxRuntimeExports.jsx(TitlePageEpisodeGrid,{data:s}):null;case"seasons":return t.is_series?jsxRuntimeExports.jsx(TitlePageSeasonGrid,{data:s}):null;case"videos":return jsxRuntimeExports.jsx(TitlePageVideoGrid,{title:t});case"images":return jsxRuntimeExports.jsx(TitlePageImageGrid,{images:t.images,heading:jsxRuntimeExports.jsx(SiteSectionHeading,{link:`${getTitleLink(t)}/images`,children:jsxRuntimeExports.jsx(Trans,{message:"Images"})})});case"reviews":return i.enable_reviews&&n("reviews.view")?jsxRuntimeExports.jsx(TitlePageReviewList,{title:t}):null;case"cast":return jsxRuntimeExports.jsx(TitlePageCast,{credits:s.credits.actors});case"news":return jsxRuntimeExports.jsx(TitleNews,{title:t});case"related":return jsxRuntimeExports.jsx(RelatedTitlesPanel,{title:t})}}function TitlePageHeaderLayout({name:e,description:t,children:s,right:i,poster:n}){return jsxRuntimeExports.jsxs("div",{className:"md:flex items-center justify-between gap-24 mb-24",children:[n,jsxRuntimeExports.jsxs("div",{className:"flex-auto",children:[s,jsxRuntimeExports.jsx("h1",{className:"text-4xl md:text-5xl mb-8",children:e}),t&&jsxRuntimeExports.jsx("div",{className:"text-base font-normal",children:t})]}),i]})}function TitlePageHeader({title:e,showPoster:t=!1}){return jsxRuntimeExports.jsx(TitlePageHeaderLayout,{name:jsxRuntimeExports.jsx(TitleLink,{title:e}),poster:t?jsxRuntimeExports.jsx(TitlePoster,{title:e,size:"w-80",srcSize:"sm"}):null,description:jsxRuntimeExports.jsxs(BulletSeparatedItems,{children:[jsxRuntimeExports.jsx(FormattedDate,{date:e.release_date}),e.certification&&jsxRuntimeExports.jsx("div",{className:"uppercase",children:e.certification}),e.runtime&&jsxRuntimeExports.jsx(FormattedDuration,{minutes:e.runtime,verbose:!0})]}),right:jsxRuntimeExports.jsx(InteractableRating,{title:e})})}function TitlePageHeaderImage({title:e,season:t,episode:s}){const{streaming:i}=useSettings(),n=s||t||e,a=jsxRuntimeExports.jsx(TitleBackdrop,{title:e,episode:s,size:"w-full h-full",className:"object-top",lazy:!1});return jsxRuntimeExports.jsxs("header",{className:"relative h-160 md:h-450 isolate overflow-hidden bg-black",children:[jsxRuntimeExports.jsx("div",{className:"container w-full h-full mx-auto px-24 absolute top-0 left-0 right-0 z-20",children:a}),jsxRuntimeExports.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-black w-[calc(100%+100px)] h-[calc(100% + 20px)] blur-md z-10 opacity-50",children:a}),jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-b from-black/70 absolute top-0 left-0 w-full h-full z-30 pointer-events-none"}),i.show_header_play&&n.primary_video?jsxRuntimeExports.jsx(PlayButton,{item:n}):null]})}function PlayButton({item:e}){const t=getWatchLink(e.primary_video);return jsxRuntimeExports.jsx(IconButton,{radius:"rounded-full",color:"white",variant:"raised",size:"lg",className:"absolute inset-0 m-auto z-40",elementType:Link,to:t,children:jsxRuntimeExports.jsx(MediaPlayIcon,{})})}function useCurrentUserWatchlist(){const{user:e}=useAuth();return useQuery(["channel","watchlist","compact"],()=>fetchWatchlist(),{enabled:!!e})}function useIsItemWatchlisted(e){var s,i,n;const t=useCurrentUserWatchlist();return{isLoading:t.isLoading&&t.fetchStatus!=="idle",isWatchlisted:!!((n=(i=(s=t.data)==null?void 0:s.watchlist)==null?void 0:i.items[e.model_type])!=null&&n[e.id])}}function fetchWatchlist(){return apiClient.get("users/me/watchlist").then(e=>e.data)}function useAddToWatchlist(){const{data:e}=useCurrentUserWatchlist();return useMutation(t=>addToWatchlist(e.watchlist.id,t),{onSuccess:async()=>{await queryClient.invalidateQueries(["channel","watchlist"]),toast(message("Added to your watchlist"))},onError:t=>showHttpErrorToast(t)})}function addToWatchlist(e,t){return apiClient.post(`channel/${e}/add`,{itemId:t.id,itemType:t.model_type}).then(s=>s.data)}function useRemoveFromWatchlist(){const{data:e}=useCurrentUserWatchlist();return useMutation(t=>removeFromWatchlist(e.watchlist.id,t),{onSuccess:async()=>{await queryClient.invalidateQueries(["channel","watchlist"]),toast(message("Removed from your watchlist"))},onError:t=>showHttpErrorToast(t)})}function removeFromWatchlist(e,t){return apiClient.post(`channel/${e}/remove`,{itemId:t.id,itemType:t.model_type}).then(s=>s.data)}function WatchlistButton({item:e,variant:t="flat",color:s="primary"}){const{isLoading:i,isWatchlisted:n}=useIsItemWatchlisted(e),a=useAddToWatchlist(),o=useRemoveFromWatchlist(),x=useAuthClickCapture();return jsxRuntimeExports.jsx(Button,{variant:t,color:s,startIcon:n?jsxRuntimeExports.jsx(CheckIcon,{}):jsxRuntimeExports.jsx(AddIcon,{}),className:"mt-14 min-h-40 w-full",disabled:a.isLoading||o.isLoading||i,onClickCapture:x,onClick:()=>{n?o.mutate(e):a.mutate(e)},children:n?jsxRuntimeExports.jsx(Trans,{message:"In watchlist"}):jsxRuntimeExports.jsx(Trans,{message:"Add to watchlist"})})}function TitlePageAsideLayout({poster:e,children:t}){return jsxRuntimeExports.jsxs("div",{className:"md:w-1/4 max-md:flex flex-shrink-0 md:sticky top-40",children:[e,jsxRuntimeExports.jsx("div",{className:"flex-auto max-md:ml-16 max-md:text-sm",children:t})]})}function DetailItem({label:e,children:t}){return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx("dt",{className:"font-semibold",children:e}),jsxRuntimeExports.jsx("dl",{className:"mb-12 md:mb-24",children:t})]})}function KeywordLink({keyword:e,children:t,...s}){const i=reactExports.useMemo(()=>getKeywordLink$1(e),[e]);return jsxRuntimeExports.jsx(BaseMediaLink,{...s,link:i,children:t??(e.display_name||e.name)})}function getKeywordLink$1(e,{absolute:t}={}){return getBaseMediaLink(`/keyword/${e.name}`,{absolute:t})}function ProductionCountryLink({country:e,children:t,...s}){const i=reactExports.useMemo(()=>getKeywordLink(e),[e]);return jsxRuntimeExports.jsx(BaseMediaLink,{...s,link:i,children:t??(e.display_name||e.name)})}function getKeywordLink(e,{absolute:t}={}){return getBaseMediaLink(`/production-countries/${e.name}`,{absolute:t})}function WatchNowButton({video:e,variant:t="outline",color:s="primary",size:i="w-full min-h-40 mt-14",defaultLabel:n}){const a=e.episode_num&&!n?jsxRuntimeExports.jsxs("span",{className:"inline-flex gap-4",children:[jsxRuntimeExports.jsx(Trans,{message:"Start watching"}),jsxRuntimeExports.jsx(CompactSeasonEpisode,{seasonNum:e.season_num,episodeNum:e.episode_num})]}):jsxRuntimeExports.jsx(Trans,{message:"Watch now"});return jsxRuntimeExports.jsx(Button,{to:getWatchLink(e),elementType:Link,startIcon:jsxRuntimeExports.jsx(MediaPlayIcon,{}),color:s,variant:t,className:i,children:a})}function useIsStreamingMode(){const{streaming:e}=useSettings();return(e==null?void 0:e.prefer_full)||!1}function TitlePageAside({title:e}){var s,i;const t=useIsStreamingMode();return jsxRuntimeExports.jsxs(TitlePageAsideLayout,{poster:jsxRuntimeExports.jsx(TitlePoster,{title:e,size:"w-full",srcSize:"lg"}),children:[t&&e.primary_video&&jsxRuntimeExports.jsx(WatchNowButton,{video:e.primary_video,variant:"flat"}),jsxRuntimeExports.jsx(WatchlistButton,{item:e,variant:t?"outline":"flat"}),jsxRuntimeExports.jsx(ShareButton$1,{title:e}),jsxRuntimeExports.jsxs("dl",{className:"mt-14",children:[e.language&&jsxRuntimeExports.jsx(LanguageDetailItem,{languageCode:e.language}),e.original_title!==e.name&&jsxRuntimeExports.jsx(DetailItem,{label:jsxRuntimeExports.jsx(Trans,{message:"Original title"}),children:e.original_title}),e.budget?jsxRuntimeExports.jsx(DetailItem,{label:jsxRuntimeExports.jsx(Trans,{message:"Budget"}),children:jsxRuntimeExports.jsx(FormattedCurrency,{value:e.budget,currency:"usd"})}):null,e.revenue?jsxRuntimeExports.jsx(DetailItem,{label:jsxRuntimeExports.jsx(Trans,{message:"Revenue"}),children:jsxRuntimeExports.jsx(FormattedCurrency,{value:e.revenue,currency:"usd"})}):null,(s=e.production_countries)!=null&&s.length?jsxRuntimeExports.jsx(DetailItem,{label:jsxRuntimeExports.jsx(Trans,{message:"Production countries"}),children:jsxRuntimeExports.jsx("ul",{className:"mt-12 flex flex-wrap gap-8",children:e.production_countries.map(n=>jsxRuntimeExports.jsx("li",{className:"w-max rounded-full border px-10 py-4 text-xs",children:jsxRuntimeExports.jsx(ProductionCountryLink,{country:n})},n.id))})}):null,(i=e.keywords)!=null&&i.length?jsxRuntimeExports.jsx(DetailItem,{label:jsxRuntimeExports.jsx(Trans,{message:"Keywords"}),children:jsxRuntimeExports.jsx("ul",{className:"mt-12 flex flex-wrap gap-8",children:e.keywords.map(n=>jsxRuntimeExports.jsx("li",{className:"w-max rounded-full border px-10 py-4 text-xs",children:jsxRuntimeExports.jsx(KeywordLink,{keyword:n})},n.id))})}):null]})]})}function LanguageDetailItem({languageCode:e}){var n,a;const{data:t,isLoading:s}=useValueLists(["languages"]),i=((a=(n=t==null?void 0:t.languages)==null?void 0:n.find(o=>o.code===e))==null?void 0:a.name)||"Unknown";return jsxRuntimeExports.jsx(AnimatePresence,{mode:"wait",children:jsxRuntimeExports.jsx(DetailItem,{label:jsxRuntimeExports.jsx(Trans,{message:"Original language"}),children:s?reactExports.createElement(m.span,{...opacityAnimation,key:"skeleton"},jsxRuntimeExports.jsx(Skeleton,{variant:"text"})):jsxRuntimeExports.jsx(m.span,{children:jsxRuntimeExports.jsx(Trans,{message:i})},"language")})})}function ShareButton$1({title:e}){const t=getTitleLink(e,{absolute:!0});return jsxRuntimeExports.jsx(ShareMenuTrigger,{link:t,children:jsxRuntimeExports.jsx(Button,{variant:"outline",color:"primary",startIcon:jsxRuntimeExports.jsx(ShareIcon,{}),className:"mt-14 min-h-40 w-full",children:jsxRuntimeExports.jsx(Trans,{message:"Share"})})})}function useTitlePageData(){return useTitle({load:["images","genres","productionCountries","keywords","videos","primaryVideo","seasons","compactCredits"]})}function TitlePage(){const e=useTitlePageData(),t=e.data?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(PageMetaTags,{query:e}),jsxRuntimeExports.jsx(PageContent$a,{data:e.data})]}):jsxRuntimeExports.jsx(PageStatus,{query:e,loaderClassName:"absolute inset-0 m-auto"});return jsxRuntimeExports.jsx(SitePageLayout,{children:t})}function PageContent$a({data:e}){const t=useIsMobileMediaQuery();return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(TitlePageHeaderImage,{title:e.title}),jsxRuntimeExports.jsx("div",{className:"container mx-auto mt-24 md:mt-40 px-14 md:px-24",children:jsxRuntimeExports.jsxs("div",{className:"md:flex items-start gap-54",children:[!t&&jsxRuntimeExports.jsx(TitlePageAside,{title:e.title}),jsxRuntimeExports.jsxs("div",{className:"flex-auto",children:[jsxRuntimeExports.jsx(TitlePageHeader,{title:e.title}),jsxRuntimeExports.jsx(TitlePageMainContent,{data:e})]})]})})]})}function SeasonPage(){const e=useSeason({load:"episodes,primaryVideo"}),t=e.data?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(PageMetaTags,{query:e}),jsxRuntimeExports.jsx(PageContent$9,{data:e.data})]}):jsxRuntimeExports.jsx(PageStatus,{query:e,loaderClassName:"absolute inset-0 m-auto"});return jsxRuntimeExports.jsx(SitePageLayout,{children:t})}function PageContent$9({data:e}){const{title:t,season:s}=e;return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(TitlePageHeaderImage,{title:t,season:s}),jsxRuntimeExports.jsxs("div",{className:"container mx-auto mt-40",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-12 mb-24",children:[jsxRuntimeExports.jsx(TitlePoster,{size:"w-70",srcSize:"sm",title:t}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(TitleLink,{title:t,color:"primary",className:"text-xl"}),jsxRuntimeExports.jsx("div",{className:"text-lg",children:jsxRuntimeExports.jsx(Trans,{message:"Episode list"})})]})]}),jsxRuntimeExports.jsx(SeasonList,{title:t}),jsxRuntimeExports.jsx(EpisodeList$1,{data:e}),jsxRuntimeExports.jsx(SeasonList,{title:t})]})]})}function SeasonList({title:e}){const{season:t}=useParams();return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"font-semibold text-base mb-4",children:[jsxRuntimeExports.jsx(Trans,{message:"Seasons"}),":"]}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-10 mb-34",children:[...new Array(e.seasons_count).keys()].map(s=>{const i=s+1,n=t===`${i}`;return jsxRuntimeExports.jsx(SeasonLink,{title:e,seasonNumber:i,className:clsx("flex items-center justify-center text-base border rounded w-30 h-30",n?"bg-primary text-white pointer-events-none":"text-primary"),children:i},i)})})]})}function EpisodeList$1({data:{episodes:e,title:t}}){const s=useSeasonEpisodes(e);return jsxRuntimeExports.jsxs("main",{children:[s.items.map(i=>jsxRuntimeExports.jsx(EpisodeListItem,{episode:i,title:t,allowRating:!0,showPlayButton:!0,className:"mb-34"},i.id)),jsxRuntimeExports.jsx(InfiniteScrollSentinel,{query:s})]})}function EpisodePageHeader({title:e,episode:t,showPoster:s}){const i=useNavigate();return jsxRuntimeExports.jsx(TitlePageHeaderLayout,{poster:s?jsxRuntimeExports.jsx(TitlePoster,{title:e,size:"w-80",srcSize:"sm"}):void 0,name:t.name,description:jsxRuntimeExports.jsxs(BulletSeparatedItems,{children:[jsxRuntimeExports.jsx(Trans,{message:"Aired :date",values:{date:jsxRuntimeExports.jsx(FormattedDate,{date:t.release_date})}}),jsxRuntimeExports.jsx("span",{className:"uppercase",children:e.certification}),jsxRuntimeExports.jsx(FormattedDuration,{minutes:e.runtime,verbose:!0})]}),right:jsxRuntimeExports.jsx(InteractableRating,{title:e,episode:t}),children:jsxRuntimeExports.jsxs(Breadcrumb,{isNavigation:!0,children:[jsxRuntimeExports.jsx(BreadcrumbItem,{onSelected:()=>i(getTitleLink(e)),children:e.name}),jsxRuntimeExports.jsx(BreadcrumbItem,{onSelected:()=>i(getSeasonLink(e,t.season_number)),children:jsxRuntimeExports.jsx(Trans,{message:"Season :number",values:{number:t.season_number}})}),jsxRuntimeExports.jsx(BreadcrumbItem,{children:jsxRuntimeExports.jsx(Trans,{message:"Episode :number",values:{number:t.episode_number}})})]})})}function EpisodePage(){const e=useEpisode({load:["videos","compactCredits","primaryVideo"]}),t=e.data?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(PageMetaTags,{query:e}),jsxRuntimeExports.jsx(PageContent$8,{data:e.data})]}):jsxRuntimeExports.jsx(PageStatus,{query:e,loaderClassName:"absolute inset-0 m-auto"});return jsxRuntimeExports.jsx(SitePageLayout,{children:t})}function PageContent$8({data:e}){const{episode:t,title:s}=e;return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(TitlePageHeaderImage,{title:s,episode:t}),jsxRuntimeExports.jsx("div",{className:"container mx-auto mt-40 px-24",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-54",children:[jsxRuntimeExports.jsx(Aside,{title:s,episode:t}),jsxRuntimeExports.jsxs("div",{className:"flex-auto",children:[jsxRuntimeExports.jsx(EpisodePageHeader,{title:s,episode:t}),jsxRuntimeExports.jsx(MainContent,{data:e})]})]})})]})}function MainContent({data:e}){var a;const{episode:t,title:s,credits:i}=e,n=useConfiguredTitlePageSections();return jsxRuntimeExports.jsxs("main",{className:"@container",children:[(a=s.genres)!=null&&a.length?jsxRuntimeExports.jsx(ChipList,{children:s.genres.map(o=>jsxRuntimeExports.jsx(Chip,{className:"capitalize",elementType:Link,to:getGenreLink(o),children:o.display_name||o.name},o.id))}):null,jsxRuntimeExports.jsx(TruncatedDescription,{className:"mt-16",description:t.description}),jsxRuntimeExports.jsx(CompactCredits,{credits:i}),n.map(o=>jsxRuntimeExports.jsx(EpisodePageSection,{name:o,title:s,data:e},o))]})}function EpisodePageSection({name:e,title:t,data:s}){switch(e){case"videos":return jsxRuntimeExports.jsx(TitlePageVideoGrid,{title:t,episode:s.episode});case"cast":return jsxRuntimeExports.jsx(TitlePageCast,{credits:s.credits.actors});case"related":return jsxRuntimeExports.jsx(RelatedTitlesPanel,{title:t});default:return null}}function Aside({title:e,episode:t}){const s=useIsStreamingMode();return jsxRuntimeExports.jsxs(TitlePageAsideLayout,{poster:jsxRuntimeExports.jsx(TitlePoster,{title:e,size:"w-full",srcSize:"lg"}),children:[s&&t.primary_video&&jsxRuntimeExports.jsx(WatchNowButton,{video:t.primary_video,variant:"flat",defaultLabel:!0}),jsxRuntimeExports.jsx(WatchlistButton,{item:e,variant:s?"outline":"flat"})]})}function useWatchPageVideo(){const{videoId:e}=useParams();return useQuery(["video","watch-page",e],()=>fetchVideo(e),{keepPreviousData:!0})}function fetchVideo(e){return apiClient.get(`watch/${e}`).then(t=>t.data)}function commentsQueryKey(e,t={}){return["comment",`${e.id}-${e.model_type}`,t]}function useComments(e,t={}){return useInfiniteData({queryKey:commentsQueryKey(e,t),endpoint:"commentable/comments",queryParams:{commentable_type:e.model_type,commentable_id:e.id,...t}})}function useCreateComment(){return useMutation(e=>createComment(e),{onSuccess:(e,t)=>{toast(message("Comment posted")),queryClient.invalidateQueries(["comment",`${t.commentable.id}-${t.commentable.model_type}`])},onError:e=>showHttpErrorToast(e)})}function createComment({commentable:e,content:t,inReplyTo:s,...i}){const n={commentable_id:e.id,commentable_type:e.model_type,content:t,inReplyTo:s,...i};return apiClient.post("comment",n).then(a=>a.data)}function NewCommentForm({commentable:e,inReplyTo:t,onSuccess:s,className:i,autoFocus:n,payload:a,...o}){const{trans:x}=useTrans(),{user:l}=useAuth(),c=useCreateComment(),u=$df56164dff5785e2$export$4338b53315abf666(o.inputRef),[d,j]=reactExports.useState(!1),[g,p]=reactExports.useState(""),h=()=>{j(!1),u.current&&(u.current.blur(),p(""))};return jsxRuntimeExports.jsxs("form",{className:clsx("py-6 flex gap-24",i),onSubmit:E=>{E.preventDefault(),g&&!c.isLoading&&c.mutate({...a,commentable:e,content:g,inReplyTo:t},{onSuccess:()=>{h(),s==null||s()}})},children:[jsxRuntimeExports.jsx(Avatar,{size:"xl",circle:!0,src:l==null?void 0:l.avatar,label:l==null?void 0:l.display_name}),jsxRuntimeExports.jsxs("div",{className:"flex-auto",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-muted mb-10",children:jsxRuntimeExports.jsx(Trans,{message:"Comment as :name",values:{name:jsxRuntimeExports.jsx("span",{className:"font-medium text",children:l==null?void 0:l.display_name})}})}),jsxRuntimeExports.jsx(TextField,{inputRef:u,autoFocus:n,inputElementType:"textarea",inputClassName:"resize-none",value:g,onChange:E=>p(E.target.value),onFocus:()=>j(!0),onBlur:()=>{g||j(!1)},minLength:3,rows:d?3:1,placeholder:x(t?message("Write a reply"):message("Leave a comment"))}),d&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-12 justify-end mt-12",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>h(),children:jsxRuntimeExports.jsx(Trans,{message:"Cancel"})}),jsxRuntimeExports.jsx(Button,{variant:"outline",color:"primary",type:"submit",disabled:c.isLoading||g.length<3,children:jsxRuntimeExports.jsx(Trans,{message:"Comment"})})]})]})]})}function useStoreVote(e){return useMutation(t=>changeVote(e,t),{onSuccess:t=>{},onError:t=>showHttpErrorToast(t)})}function changeVote(e,t){return apiClient.post("vote",{vote_type:t.voteType,model_id:e.id,model_type:e.model_type}).then(s=>s.data)}function ThumbButtons({model:e,className:t,showUpvotesOnly:s}){const i=useStoreVote(e),[n,a]=reactExports.useState(e.upvotes||0),[o,x]=reactExports.useState(e.downvotes||0),[l,c]=reactExports.useState(e.current_vote),u=d=>{a(d.upvotes),x(d.downvotes),c(d.current_vote)};return jsxRuntimeExports.jsxs("div",{className:t,children:[jsxRuntimeExports.jsxs(Button,{className:"gap-6",sizeClassName:"px-8 py-4",color:l==="upvote"?"primary":void 0,disabled:i.isLoading,onClick:()=>{i.mutate({voteType:"upvote"},{onSuccess:d=>u(d.model)})},children:[jsxRuntimeExports.jsx(ThumbUpIcon,{}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(FormattedNumber,{value:n})})]}),!s&&jsxRuntimeExports.jsxs(Button,{className:"gap-6",sizeClassName:"px-8 py-4",color:l==="downvote"?"primary":void 0,disabled:i.isLoading,onClick:()=>{i.mutate({voteType:"downvote"},{onSuccess:d=>u(d.model)})},children:[jsxRuntimeExports.jsx(ThumbDownIcon,{}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(FormattedNumber,{value:o})})]})]})}function CommentListItem$1({comment:e,commentable:t,canDelete:s}){const i=useIsMobileMediaQuery(),{user:n,hasPermission:a}=useAuth(),[o,x]=reactExports.useState(!1),l=n!=null&&!e.deleted&&!i&&e.depth<5&&a("comments.create");return jsxRuntimeExports.jsxs("div",{style:{paddingLeft:`${e.depth*20}px`},onClick:()=>{i&&x(!o)},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-24 py-18 min-h-70 group",children:[jsxRuntimeExports.jsx(UserAvatar,{user:e.user,size:"xl",circle:!0}),jsxRuntimeExports.jsxs("div",{className:"text-sm flex-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-8 mb-4",children:[e.user&&jsxRuntimeExports.jsx(UserDisplayName,{user:e.user}),jsxRuntimeExports.jsx("time",{className:"text-muted text-xs",children:jsxRuntimeExports.jsx(FormattedRelativeTime,{date:e.created_at})}),e.position?jsxRuntimeExports.jsx(Position,{commentable:t,position:e.position}):null]}),jsxRuntimeExports.jsx("div",{children:e.deleted?jsxRuntimeExports.jsx("span",{className:"text-muted italic",children:jsxRuntimeExports.jsx(Trans,{message:"[COMMENT DELETED]"})}):e.content}),!e.deleted&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-8 mt-10 -ml-8",children:[l&&jsxRuntimeExports.jsx(Button,{sizeClassName:"text-sm px-8 py-4",startIcon:jsxRuntimeExports.jsx(ReplyIcon,{}),onClick:()=>x(!o),children:jsxRuntimeExports.jsx(Trans,{message:"Reply"})}),jsxRuntimeExports.jsx(ThumbButtons,{model:e,showUpvotesOnly:!0}),jsxRuntimeExports.jsx(CommentOptionsTrigger,{comment:e,canDelete:s,user:n})]})]})]}),o?jsxRuntimeExports.jsx(NewCommentForm,{className:e!=null&&e.depth?void 0:"pl-20",commentable:t,inReplyTo:e,autoFocus:!0,onSuccess:()=>{x(!1)}}):null]})}const Position=reactExports.memo(({commentable:e,position:t})=>{if(!e.duration)return null;const s=t/100*(e.duration/1e3);return jsxRuntimeExports.jsx("span",{className:"text-muted text-xs",children:jsxRuntimeExports.jsx(Trans,{message:"at :position",values:{position:jsxRuntimeExports.jsx(FormattedDuration,{seconds:s})}})})});function CommentOptionsTrigger({comment:e,canDelete:t,user:s}){const i=useDeleteComments(),n=useSubmitReport(e),[a,o]=reactExports.useState(!1),x=(e.user_id===(s==null?void 0:s.id)||t)&&!e.deleted,l=()=>{n.mutate({})},c=u=>{o(!1),u&&i.mutate({commentIds:[e.id]},{onSuccess:()=>{queryClient.invalidateQueries(["comment"])}})};return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsxs(MenuTrigger,{children:[jsxRuntimeExports.jsx(Button,{startIcon:jsxRuntimeExports.jsx(MoreVertIcon,{}),sizeClassName:"text-sm px-8 py-4",children:jsxRuntimeExports.jsx(Trans,{message:"More"})}),jsxRuntimeExports.jsxs(Menu,{children:[jsxRuntimeExports.jsx(Item,{value:"report",onSelected:()=>l(),children:jsxRuntimeExports.jsx(Trans,{message:"Report comment"})}),x&&jsxRuntimeExports.jsx(Item,{value:"delete",onSelected:()=>o(!0),children:jsxRuntimeExports.jsx(Trans,{message:"Delete"})})]})]}),jsxRuntimeExports.jsx(DialogTrigger,{type:"modal",isOpen:a,onClose:u=>c(u),children:jsxRuntimeExports.jsx(ConfirmationDialog,{isDanger:!0,title:jsxRuntimeExports.jsx(Trans,{message:"Delete comment?"}),body:jsxRuntimeExports.jsx(Trans,{message:"Are you sure you want to delete this comment?"}),confirm:jsxRuntimeExports.jsx(Trans,{message:"Delete"})})})]})}function UserDisplayName({user:e}){const{auth:t}=reactExports.useContext(SiteConfigContext);return t.getUserProfileLink?jsxRuntimeExports.jsx(Link,{to:t.getUserProfileLink(e),className:"hover:underline text-base font-medium",children:e.display_name}):jsxRuntimeExports.jsx("div",{className:"text-base font-medium",children:e.display_name})}const accountRequiredMessage=message("Please <l>login</l> or <r>create account</r> to comment");function CommentList({className:e,commentable:t,canDeleteAllComments:s=!1,children:i,perPage:n=25}){const{items:a,totalItems:o,...x}=useComments(t,{perPage:n});return x.isError?null:jsxRuntimeExports.jsxs("div",{className:e,children:[jsxRuntimeExports.jsxs("div",{className:"mb-8 pb-8 border-b flex items-center gap-8",children:[jsxRuntimeExports.jsx(CommentIcon,{size:"sm",className:"text-muted"}),x.isInitialLoading?jsxRuntimeExports.jsx(Trans,{message:"Loading comments..."}):jsxRuntimeExports.jsx(Trans,{message:":count comments",values:{count:jsxRuntimeExports.jsx(FormattedNumber,{value:o||0})}})]}),i,jsxRuntimeExports.jsx(AccountRequiredCard,{message:accountRequiredMessage}),jsxRuntimeExports.jsx(AnimatePresence,{initial:!1,mode:"wait",children:x.isInitialLoading?jsxRuntimeExports.jsx(CommentSkeletons,{count:4}):jsxRuntimeExports.jsx(CommentListItems,{comments:a,canDeleteAllComments:s,commentable:t})}),jsxRuntimeExports.jsx(InfiniteScrollSentinel,{query:x,variant:"loadMore"})]})}function CommentListItems({comments:e,commentable:t,canDeleteAllComments:s}){return e.length?jsxRuntimeExports.jsx(m.div,{...opacityAnimation,children:e.map(i=>jsxRuntimeExports.jsx(CommentListItem$1,{comment:i,commentable:t,canDelete:s},i.id))},"comments"):jsxRuntimeExports.jsx(IllustratedMessage,{className:"mt-24",size:"sm",title:jsxRuntimeExports.jsx(Trans,{message:"Seems a little quiet over here"}),description:jsxRuntimeExports.jsx(Trans,{message:"Be the first to comment"})})}function CommentSkeletons({count:e}){return jsxRuntimeExports.jsx(m.div,{...opacityAnimation,children:[...new Array(e).keys()].map(t=>jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-24 py-18 min-h-70 group",children:[jsxRuntimeExports.jsx(Skeleton,{variant:"avatar",radius:"rounded-full",size:"w-60 h-60"}),jsxRuntimeExports.jsxs("div",{className:"text-sm flex-auto",children:[jsxRuntimeExports.jsx(Skeleton,{className:"text-base max-w-184 mb-4"}),jsxRuntimeExports.jsx(Skeleton,{className:"text-sm"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-8 mt-10",children:[jsxRuntimeExports.jsx(Skeleton,{className:"text-sm max-w-70"}),jsxRuntimeExports.jsx(Skeleton,{className:"text-sm max-w-40"}),jsxRuntimeExports.jsx(Skeleton,{className:"text-sm max-w-60"})]})]})]},t))},"loading-skeleton")}function WatchPageTitleDetails(){var i;const{data:e}=useWatchPageVideo(),t=useIsStreamingMode(),s=e?jsxRuntimeExports.jsx(Layout,{poster:jsxRuntimeExports.jsx(TitlePoster,{size:"w-132",srcSize:"md",title:e.title,showPlayButton:!0}),titleLink:jsxRuntimeExports.jsx(TitleLink,{title:e.title}),videoName:t?void 0:e.video.name,episodeName:e.episode?jsxRuntimeExports.jsxs(EpisodeLink,{title:e.title,episode:e.episode,children:[e.episode.name," (",jsxRuntimeExports.jsx(CompactSeasonEpisode,{episode:e.episode}),")"]}):void 0,description:((i=e.episode)==null?void 0:i.description)||e.title.description,rate:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(ThumbButtons,{model:e.video,className:"mr-auto"}),jsxRuntimeExports.jsx(ReportButton,{video:e.video}),jsxRuntimeExports.jsx(ShareButton,{video:e.video})]})},"loaded"):jsxRuntimeExports.jsx(Layout,{poster:jsxRuntimeExports.jsx(Skeleton,{variant:"rect",size:"w-132 aspect-poster"}),titleLink:jsxRuntimeExports.jsx(Skeleton,{className:"max-w-144"}),videoName:jsxRuntimeExports.jsx(Skeleton,{className:"max-w-240"}),description:jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(Skeleton,{}),jsxRuntimeExports.jsx(Skeleton,{})]}),rate:jsxRuntimeExports.jsxs("div",{className:"flex h-32 items-center gap-2",children:[jsxRuntimeExports.jsx(Skeleton,{variant:"rect",size:"w-56 h-24",className:"mr-10"}),jsxRuntimeExports.jsx(Skeleton,{variant:"rect",size:"w-56 h-24"})]})},"skeleton");return jsxRuntimeExports.jsx(AnimatePresence,{initial:!1,mode:"wait",children:s})}function ShareButton({video:e}){const t=getWatchLink(e,{absolute:!0});return jsxRuntimeExports.jsx(ShareMenuTrigger,{link:t,children:jsxRuntimeExports.jsx(Tooltip,{label:jsxRuntimeExports.jsx(Trans,{message:"Share"}),children:jsxRuntimeExports.jsx(IconButton,{children:jsxRuntimeExports.jsx(ShareIcon,{})})})})}function ReportButton({video:e}){const t=useSubmitReport(e),s=useDeleteReport(e),[i,n]=reactExports.useState(e.current_user_reported);return jsxRuntimeExports.jsx(Tooltip,{label:jsxRuntimeExports.jsx(Trans,{message:"Report"}),children:jsxRuntimeExports.jsx(IconButton,{onClick:()=>{i?s.mutate():t.mutate({}),n(!i)},children:jsxRuntimeExports.jsx(FlagIcon,{})})})}function Layout({poster:e,titleLink:t,videoName:s,episodeName:i,description:n,rate:a}){return jsxRuntimeExports.jsxs(m.div,{className:"flex items-start gap-16 overflow-hidden rounded pr-6",...opacityAnimation,children:[e,jsxRuntimeExports.jsxs("div",{className:"flex-auto py-6",children:[jsxRuntimeExports.jsx("h1",{className:"mb-6 text-2xl font-medium",children:t}),i&&jsxRuntimeExports.jsx("div",{className:"text-base font-medium",children:i}),s&&jsxRuntimeExports.jsx("div",{className:"text-base font-medium",children:s}),jsxRuntimeExports.jsx("div",{className:"my-12",children:a}),n&&jsxRuntimeExports.jsx("p",{className:"max-w-780 text-sm text-muted",children:n})]})]})}function WatchPageAside(){const{data:e}=useWatchPageVideo(),t=e?jsxRuntimeExports.jsx(m.div,{...opacityAnimation,children:e.related_videos.map(s=>jsxRuntimeExports.jsx(RelatedVideo,{video:s,activeVideo:e.video},s.id))},"loaded"):jsxRuntimeExports.jsxs(m.div,{...opacityAnimation,children:[jsxRuntimeExports.jsx(VideoGridItemSkeleton,{className:"mb-34"}),jsxRuntimeExports.jsx(VideoGridItemSkeleton,{className:"mb-34"}),jsxRuntimeExports.jsx(VideoGridItemSkeleton,{className:"mb-34"})]},"skeleton");return jsxRuntimeExports.jsxs("aside",{className:"w-350 flex-shrink-0",children:[jsxRuntimeExports.jsx(SiteSectionHeading,{fontWeight:"font-medium",fontSize:"text-2xl",margin:"mb-28",children:jsxRuntimeExports.jsx(Header,{video:e==null?void 0:e.video})}),jsxRuntimeExports.jsx(AnimatePresence,{initial:!1,mode:"wait",children:t})]})}function Header({video:e}){const t=useIsStreamingMode();return e?t?jsxRuntimeExports.jsx(Trans,{message:"Related movies & series"}):jsxRuntimeExports.jsx(Trans,{message:"Related videos"}):jsxRuntimeExports.jsx("div",{className:"h-32"})}function RelatedVideo({video:e,activeVideo:t}){const s=useIsStreamingMode();let i=e.name;return s&&(e.episode?i=jsxRuntimeExports.jsxs("span",{children:[e.episode.name," (",jsxRuntimeExports.jsx(CompactSeasonEpisode,{episode:e.episode}),")"]}):i=e.title.name),jsxRuntimeExports.jsx(VideoGridItem,{video:e,title:e.title,episode:e.episode,forceTitleBackdrop:s,className:clsx("mb-24 text-sm",t.id===e.id&&"text-primary"),showCategory:!s,name:i})}const className="flex items-center flex-wrap gap-14 mt-14";function WatchPageVideoSelector({data:e}){return jsxRuntimeExports.jsx(AnimatePresence,{initial:!1,mode:"wait",children:e?jsxRuntimeExports.jsx(VideoList,{videos:e.alternative_videos}):jsxRuntimeExports.jsx(Skeletons,{})})}function VideoList({videos:e}){const{videoId:t}=useParams();return e.length<2?null:jsxRuntimeExports.jsx(m.div,{className,...opacityAnimation,children:e.map(s=>jsxRuntimeExports.jsx(Button,{elementType:Link,to:getWatchLink(s),variant:"outline",color:t===`${s.id}`?"primary":"chip",startIcon:jsxRuntimeExports.jsx(MediaPlayIcon,{"aria-hidden":!0}),className:"min-h-42",children:s.name},s.id))},"alternative-sources")}function Skeletons(){return jsxRuntimeExports.jsxs(m.div,{className:clsx(className,"h-42"),...opacityAnimation,children:[jsxRuntimeExports.jsx(Skeleton,{variant:"rect",size:"h-full w-[116px]"}),jsxRuntimeExports.jsx(Skeleton,{variant:"rect",size:"h-full w-[116px]"}),jsxRuntimeExports.jsx(Skeleton,{variant:"rect",size:"h-full w-[116px]"}),jsxRuntimeExports.jsx(Skeleton,{variant:"rect",size:"h-full w-[116px]"}),jsxRuntimeExports.jsx(Skeleton,{variant:"rect",size:"h-full w-[116px]"})]},"skeletons")}function WatchPage(){const e=useDarkThemeVariables();return useScrollToTop(),jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(MainNavbar,{position:"fixed"}),jsxRuntimeExports.jsxs("div",{style:e,className:"dark min-h-screen bg text",children:[jsxRuntimeExports.jsx("div",{className:"container mx-auto pt-76",children:jsxRuntimeExports.jsx(Content,{})}),jsxRuntimeExports.jsx(Footer,{className:"container mx-auto mt-48 flex-shrink-0"})]})]})}function Content(){const{titles:e,comments:t,streaming:s}=useSettings(),i=useIsStreamingMode(),{hasPermission:n}=useAuth(),{data:a,isLoading:o}=useWatchPageVideo(),x=a==null?void 0:a.title,l=a==null?void 0:a.episode,c=a==null?void 0:a.video;let u=c;t!=null&&t.per_video||(u=l||x);const d=x&&c&&e.enable_comments&&n("comments.view");return a||o?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[x&&jsxRuntimeExports.jsx(StaticPageTitle,{children:jsxRuntimeExports.jsx(Trans,{message:"Watch :name",values:{name:x.name}})}),jsxRuntimeExports.jsx(AnimatePresence,{initial:!1,mode:"wait",children:c?jsxRuntimeExports.jsx(m.div,{...opacityAnimation,children:jsxRuntimeExports.jsx(SiteVideoPlayer,{title:x,episode:a==null?void 0:a.episode,video:c,relatedVideos:a==null?void 0:a.related_videos,autoPlay:!0,logPlays:!0,showEpisodeSelector:i})},"player"):jsxRuntimeExports.jsx(m.div,{className:"relative",...opacityAnimation,children:jsxRuntimeExports.jsx(VideoPlayerSkeleton,{animate:!0})},"skeleton")}),s.show_video_selector?jsxRuntimeExports.jsx(WatchPageVideoSelector,{data:a}):null,jsxRuntimeExports.jsx(AdHost,{slot:"watch_top",className:"pt-48"}),jsxRuntimeExports.jsxs("section",{className:"mt-42 flex items-start gap-56",children:[jsxRuntimeExports.jsxs("div",{className:"flex-auto",children:[jsxRuntimeExports.jsx(WatchPageTitleDetails,{}),d&&jsxRuntimeExports.jsx(CommentList,{commentable:u,className:"mt-44",perPage:20,children:jsxRuntimeExports.jsx(NewCommentForm,{commentable:u,className:"mb-14 mt-24"})})]}),jsxRuntimeExports.jsx(WatchPageAside,{})]})]},(c==null?void 0:c.id)||"loading"):jsxRuntimeExports.jsx(PageErrorMessage,{})}function TitleVideosPage(){const e=useTitlePageData(),t=e.data?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(PageMetaTags,{query:e}),jsxRuntimeExports.jsx(PageContent$7,{title:e.data.title}),";"]}):jsxRuntimeExports.jsx(PageStatus,{query:e,loaderClassName:"absolute inset-0 m-auto"});return jsxRuntimeExports.jsx(SitePageLayout,{children:t})}function PageContent$7({title:e}){return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(TitlePageHeaderImage,{title:e}),jsxRuntimeExports.jsxs("div",{className:"container mx-auto mt-40",children:[jsxRuntimeExports.jsx(TitlePageHeader,{title:e,showPoster:!0}),jsxRuntimeExports.jsx(VideoGrid,{videos:e.videos,title:e,count:24,heading:jsxRuntimeExports.jsx(SiteSectionHeading,{children:jsxRuntimeExports.jsx(Trans,{message:"Video gallery"})})})]})]})}function TitleImagesPage(){const e=useTitlePageData(),t=e.data?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(PageMetaTags,{query:e}),jsxRuntimeExports.jsx(PageContent$6,{title:e.data.title}),";"]}):jsxRuntimeExports.jsx(PageStatus,{query:e,loaderClassName:"absolute inset-0 m-auto"});return jsxRuntimeExports.jsx(SitePageLayout,{children:t})}function PageContent$6({title:e}){return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(TitlePageHeaderImage,{title:e}),jsxRuntimeExports.jsxs("div",{className:"container mx-auto mt-40",children:[jsxRuntimeExports.jsx(TitlePageHeader,{title:e,showPoster:!0}),jsxRuntimeExports.jsx(TitlePageImageGrid,{images:e.images,srcSize:"lg",count:24,heading:jsxRuntimeExports.jsx(SiteSectionHeading,{children:jsxRuntimeExports.jsx(Trans,{message:"Image gallery"})})})]})]})}function PersonPageAside({data:{person:e,total_credits_count:t}}){return jsxRuntimeExports.jsx(TitlePageAsideLayout,{poster:jsxRuntimeExports.jsx(PersonPoster,{person:e,size:"w-140 md:w-full",srcSize:"lg"}),children:jsxRuntimeExports.jsxs("dl",{className:"md:mt-24",children:[e.known_for&&jsxRuntimeExports.jsx(DetailItem,{label:jsxRuntimeExports.jsx(Trans,{message:"Known for"}),children:e.known_for}),e.gender&&jsxRuntimeExports.jsx(DetailItem,{label:jsxRuntimeExports.jsx(Trans,{message:"Gender"}),children:jsxRuntimeExports.jsx("span",{className:"capitalize",children:e.gender})}),t?jsxRuntimeExports.jsx(DetailItem,{label:jsxRuntimeExports.jsx(Trans,{message:"Known credits"}),children:t}):null,e.birth_date?jsxRuntimeExports.jsxs(DetailItem,{label:jsxRuntimeExports.jsx(Trans,{message:"Birthdate"}),children:[jsxRuntimeExports.jsx(FormattedDate,{date:e.birth_date})," (",jsxRuntimeExports.jsx(Trans,{message:":count years old",values:{count:jsxRuntimeExports.jsx(PersonAge,{person:e})}}),")"]}):null,e.birth_place?jsxRuntimeExports.jsx(DetailItem,{label:jsxRuntimeExports.jsx(Trans,{message:"Birthplace"}),children:e.birth_place}):null,e.death_date?jsxRuntimeExports.jsx(DetailItem,{label:jsxRuntimeExports.jsx(Trans,{message:"Date of death"}),children:jsxRuntimeExports.jsx(FormattedDate,{date:e.death_date})}):null]})})}function useFullPersonCreditsForTitle({person:e,credit:t,department:s},i){return useQuery(["people",`${e.id}`,"full-credits",`${t.id}`,`${s}`],()=>fetchCredits(e.id,t.id,s),{enabled:i.enabled})}function fetchCredits(e,t,s){return apiClient.get(`people/${e}/full-credits/${t}/${s}`).then(i=>i.data)}function CharacterOrJob({credit:e,className:t}){var s,i,n;return jsxRuntimeExports.jsx("div",{className:t,children:((s=e.pivot)==null?void 0:s.department)==="actors"?((i=e.pivot)==null?void 0:i.character)??jsxRuntimeExports.jsx(Trans,{message:"Unknown"}):jsxRuntimeExports.jsx("span",{className:"capitalize",children:((n=e.pivot)==null?void 0:n.job)??jsxRuntimeExports.jsx(Trans,{message:"Unknown"})})})}function PersonPageCredits({data:{credits:e,person:t}}){return jsxRuntimeExports.jsxs("div",{className:"mt-34",children:[jsxRuntimeExports.jsx(SiteSectionHeading,{fontSize:"text-xl",children:jsxRuntimeExports.jsx(Trans,{message:"Credits"})}),jsxRuntimeExports.jsx(Accordion,{mode:"multiple",defaultExpandedValues:[0],isLazy:!0,children:Object.entries(e).map(([s,i])=>jsxRuntimeExports.jsx(AccordionItem,{labelClassName:"font-semibold text-base",description:jsxRuntimeExports.jsx(Trans,{message:"(:count credits)",values:{count:i.length}}),label:jsxRuntimeExports.jsx("span",{className:"capitalize",children:jsxRuntimeExports.jsx(Trans,{message:s==="actors"?"Acting":s})}),children:i.map((n,a)=>{var x;const o=n===i[i.length-1];return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start py-6",children:[jsxRuntimeExports.jsx(TitlePoster,{title:n,size:"w-40",className:"mr-12",lazy:!0,srcSize:"sm"}),jsxRuntimeExports.jsxs("div",{className:"mr-24 pt-2",children:[jsxRuntimeExports.jsx("div",{className:"font-semibold text-base",children:jsxRuntimeExports.jsx(TitleLink,{title:n})}),jsxRuntimeExports.jsx(CharacterOrJob,{className:"text-sm text-muted",credit:n}),n.credited_episode_count?jsxRuntimeExports.jsx(EpisodeList,{credit:n,department:s,person:t}):null]}),jsxRuntimeExports.jsx("div",{className:"text-sm text-muted ml-auto",children:n.year})]}),!o&&n.year!==((x=i[a+1])==null?void 0:x.year)&&jsxRuntimeExports.jsx("div",{className:"h-1 w-full bg-divider my-8"})]},n.id)})},s))})]})}function EpisodeList({credit:e,department:t,person:s}){var u;const[i,n]=reactExports.useState(!1),a=useFullPersonCreditsForTitle({person:s,department:t,credit:e},{enabled:i}),o=e.episodes.length===e.credited_episode_count||a.data!=null,x=a.isLoading&&a.fetchStatus!=="idle",l=x||!o,c=(u=a.data)!=null&&u.credits.length?a.data.credits:e.episodes;return jsxRuntimeExports.jsxs("div",{className:"mt-4",children:[jsxRuntimeExports.jsx("div",{children:c.map(d=>jsxRuntimeExports.jsx("div",{className:"text-xs pl-10 mb-4",children:jsxRuntimeExports.jsxs(BulletSeparatedItems,{children:[jsxRuntimeExports.jsxs("span",{children:["-"," ",jsxRuntimeExports.jsx(EpisodeLink,{title:e,episode:d,seasonNumber:d.season_number})," ","(",d.year,")"]}),jsxRuntimeExports.jsx(CompactSeasonEpisode,{episode:d}),jsxRuntimeExports.jsx(CharacterOrJob,{credit:d})]})},d.id))}),l&&jsxRuntimeExports.jsx("div",{className:"mt-8",children:jsxRuntimeExports.jsx(Button,{size:"xs",disabled:x,onClick:()=>{n(!0)},children:jsxRuntimeExports.jsx(Trans,{message:"Show all :count episodes",values:{count:e.credited_episode_count}})})})]})}function PersonPage(){const e=usePerson();console.log(e.data);const t=e.data?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(PageMetaTags,{query:e}),jsxRuntimeExports.jsx(PageContent$5,{data:e.data})]}):jsxRuntimeExports.jsx(PageStatus,{query:e,loaderClassName:"absolute inset-0 m-auto"});return jsxRuntimeExports.jsx(SitePageLayout,{children:t})}function PageContent$5({data:e}){const{person:t,knownFor:s}=e;return jsxRuntimeExports.jsx(reactExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:"container mx-auto mt-14 px-14 md:mt-40 md:px-24",children:jsxRuntimeExports.jsxs("div",{className:"items-start gap-54 md:flex",children:[jsxRuntimeExports.jsx(PersonPageAside,{data:e}),jsxRuntimeExports.jsxs("main",{className:"flex-auto @container max-md:mt-34",children:[jsxRuntimeExports.jsx(TitlePageHeaderLayout,{name:t.name}),jsxRuntimeExports.jsx(Biography,{person:t}),jsxRuntimeExports.jsx(AdHost,{slot:"person_top",className:"pt-48"}),jsxRuntimeExports.jsx(KnowForList,{items:s}),jsxRuntimeExports.jsx(PersonPageCredits,{data:e})]})]})})})}function Biography({person:e}){return e.body?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(SiteSectionHeading,{fontSize:"text-xl",children:jsxRuntimeExports.jsx(Trans,{message:"Biography"})}),jsxRuntimeExports.jsx(TruncatedDescription,{className:"text-sm",description:e.body})]}):null}function KnowForList({items:e}){return e!=null&&e.length?jsxRuntimeExports.jsxs("div",{className:"mt-34",children:[jsxRuntimeExports.jsx(SiteSectionHeading,{fontSize:"text-xl",children:jsxRuntimeExports.jsx(Trans,{message:"Known for"})}),jsxRuntimeExports.jsx(ContentGridLayout,{variant:"portrait",children:e.slice(0,4).map(t=>jsxRuntimeExports.jsx(TitlePortraitGridItem,{item:t,description:jsxRuntimeExports.jsx(CharacterOrJob,{className:"text-muted",credit:t})},t.id))})]}):null}function TitleFullCreditsPage(){const e=useTitle({load:["credits"]}),t=e.data?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(PageMetaTags,{query:e}),jsxRuntimeExports.jsx(PageContent$4,{data:e.data})]}):jsxRuntimeExports.jsx(PageStatus,{query:e,loaderClassName:"absolute inset-0 m-auto"});return jsxRuntimeExports.jsx(SitePageLayout,{children:t})}function PageContent$4({data:{title:e,credits:t}}){return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(TitlePageHeaderImage,{title:e}),jsxRuntimeExports.jsxs("div",{className:"container mx-auto mt-40",children:[jsxRuntimeExports.jsx(TitlePageHeader,{title:e,showPoster:!0}),jsxRuntimeExports.jsxs("div",{className:"mt-48 @container",children:[jsxRuntimeExports.jsx(SiteSectionHeading,{headingType:"h2",className:"mb-40",children:jsxRuntimeExports.jsx(Trans,{message:"Full cast and crew"})}),Object.entries(t).map(([s,i])=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-bold text-2xl mb-16 capitalize",children:jsxRuntimeExports.jsx(Trans,{message:s})}),jsxRuntimeExports.jsx(TitleCreditsGrid,{credits:i,className:"mb-68"})]},s))]})]})]})}function EpisodeFullCreditsPage(){const e=useEpisode({load:["credits"]}),t=e.data?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(PageMetaTags,{query:e}),jsxRuntimeExports.jsx(PageContent$3,{data:e.data})]}):jsxRuntimeExports.jsx(PageStatus,{query:e,loaderClassName:"absolute inset-0 m-auto"});return jsxRuntimeExports.jsx(SitePageLayout,{children:t})}function PageContent$3({data:{title:e,episode:t,credits:s}}){return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(TitlePageHeaderImage,{title:e,episode:t}),jsxRuntimeExports.jsxs("div",{className:"container mx-auto mt-40",children:[jsxRuntimeExports.jsx(EpisodePageHeader,{title:e,episode:t,showPoster:!0}),jsxRuntimeExports.jsxs("div",{className:"mt-48 @container",children:[jsxRuntimeExports.jsx(SiteSectionHeading,{headingType:"h2",className:"mb-40",children:jsxRuntimeExports.jsx(Trans,{message:"Full cast and crew"})}),Object.entries(s).map(([i,n])=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-bold text-2xl mb-16 capitalize",children:jsxRuntimeExports.jsx(Trans,{message:i})}),jsxRuntimeExports.jsx(TitleCreditsGrid,{credits:n,className:"mb-68"})]},i))]})]})]})}function useNewsArticles(e){return useQuery(["news",e],()=>fetchNewsArticles(e))}function fetchNewsArticles(e){return apiClient.get("news",{params:e}).then(t=>t.data)}function NewsArticlePage(){const e=useNewsArticle(),t=e.data?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(PageMetaTags,{query:e}),jsxRuntimeExports.jsx(PageContent$2,{article:e.data.article})]}):jsxRuntimeExports.jsx(PageStatus,{query:e,loaderClassName:"absolute inset-0 m-auto"});return jsxRuntimeExports.jsx(SitePageLayout,{children:t})}function PageContent$2({article:e}){return jsxRuntimeExports.jsxs("div",{className:"lg:flex items-start gap-40 container mx-auto mt-14 md:mt-40 px-14 md:px-24",children:[jsxRuntimeExports.jsx("main",{className:"p-16 border rounded mb-24",children:jsxRuntimeExports.jsxs("div",{className:"flex-auto",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl md:text-4xl mb-24",children:e.title}),jsxRuntimeExports.jsxs("div",{className:"md:flex items-start gap-16",children:[jsxRuntimeExports.jsx(NewsArticleImage,{article:e,size:"w-184 h-184",className:"max-md:mb-24"}),jsxRuntimeExports.jsx("p",{dangerouslySetInnerHTML:{__html:e.body}})]}),jsxRuntimeExports.jsxs(BulletSeparatedItems,{className:"text-muted text-sm mt-24",children:[jsxRuntimeExports.jsx(FormattedDate,{date:e.created_at}),jsxRuntimeExports.jsx(NewsArticleByline,{article:e}),jsxRuntimeExports.jsx(NewsArticleSourceLink,{article:e})]})]})}),jsxRuntimeExports.jsx(OtherNews,{})]})}function OtherNews(){var t;const e=useNewsArticles({perPage:10});return jsxRuntimeExports.jsxs("div",{className:"w-full lg:w-400 max-w-full flex-shrink-0",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl mb-14",children:jsxRuntimeExports.jsx(Trans,{message:"Other news"})}),(t=e.data)==null?void 0:t.pagination.data.map(s=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-14 rounded border mb-14 pr-14",children:[jsxRuntimeExports.jsx(NewsArticleImage,{article:s,size:"w-80 h-80",lazy:!1}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold line-clamp-2",children:jsxRuntimeExports.jsx(NewsArticleLink,{article:s})}),jsxRuntimeExports.jsxs(BulletSeparatedItems,{className:"text-muted text-sm mt-6",children:[jsxRuntimeExports.jsx(FormattedDate,{date:s.created_at}),jsxRuntimeExports.jsx(NewsArticleByline,{article:s})]})]})]},s.id))]})}function useDeleteList(){const{trans:e}=useTrans();return useMutation(t=>deleteList(t),{onSuccess:async()=>{await queryClient.invalidateQueries(["channel"]),toast(e(message("List deleted")))},onError:t=>showHttpErrorToast(t)})}function deleteList(e){return apiClient.delete(`channel/${e.listId}`).then(t=>t.data)}function UserListIndexItem({list:e,user:t,showVisibility:s=!0}){const i=useIsMobileMediaQuery(),{user:n}=useAuth(),a=n&&n.id===t.id;return jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-24 py-24 border-b",children:[!i&&jsxRuntimeExports.jsx(ItemsPreview,{list:e}),jsxRuntimeExports.jsxs("section",{className:"flex-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-8",children:[jsxRuntimeExports.jsx(UserListLink,{list:e,className:"block text-lg font-semibold capitalize mr-auto"}),!e.config.preventDeletion&&!e.internal&&a&&jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(Button,{elementType:Link,to:`${getUserListLink(e)}/edit`,variant:"outline",size:"2xs",color:"primary",children:jsxRuntimeExports.jsx(Trans,{message:"Edit"})}),jsxRuntimeExports.jsxs(DialogTrigger,{type:"modal",children:[jsxRuntimeExports.jsx(Button,{color:"danger",variant:"outline",radius:"rounded",size:"2xs",children:jsxRuntimeExports.jsx(Trans,{message:"Delete"})}),jsxRuntimeExports.jsx(DeleteListDialog,{list:e})]})]})]}),e.description&&jsxRuntimeExports.jsx("p",{className:"text-sm text-muted mt-8 whitespace-nowrap",children:e.description}),jsxRuntimeExports.jsx("div",{className:"text-sm mt-12",children:jsxRuntimeExports.jsxs("div",{className:"md:flex items-center justify-between gap-24",children:[t&&jsxRuntimeExports.jsx(UserListByline,{user:t}),jsxRuntimeExports.jsx(UserListDetails,{list:e,showVisibility:s,className:"max-md:mt-12"})]})})]})]})}function ItemsPreview({list:e}){var t,s;return(t=e.items)!=null&&t.length?jsxRuntimeExports.jsx("div",{className:"flex items-center rounded overflow-hidden",children:(s=e.items)==null?void 0:s.map((i,n)=>jsxRuntimeExports.jsxs("div",{style:{zIndex:100-n},className:clsx("relative shadow-[2px_0_7px_#000] rounded overflow-hidden",n!==0&&"-ml-30"),children:[i.model_type==="title"?jsxRuntimeExports.jsx(TitlePoster,{title:i,size:"w-70",srcSize:"sm"}):jsxRuntimeExports.jsx(PersonPoster,{person:i,size:"w-70",srcSize:"sm"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 shadow-[inset_0_0_0_1px_rgba(221,238,255,.35)] pointer-events-none"})]},i.id))}):null}function DeleteListDialog({list:e}){const t=useDeleteList(),{close:s}=useDialogContext();return jsxRuntimeExports.jsx(ConfirmationDialog,{isDanger:!0,title:jsxRuntimeExports.jsx(Trans,{message:"Delete list"}),body:jsxRuntimeExports.jsx(Trans,{message:"Are you sure you want to delete this list?"}),confirm:jsxRuntimeExports.jsx(Trans,{message:"Delete"}),isLoading:t.isLoading,onConfirm:()=>t.mutate({listId:e.id},{onSuccess:s})})}function useProfileLists(){const{userId:e="me"}=useParams();return useInfiniteData({endpoint:`user-profile/${e}/lists`,queryKey:["channel","profile-lists",e],paginate:"simple"})}function UserListsIndexPage(){const e=useProfileLists(),t=e.data?jsxRuntimeExports.jsx(PageContent$1,{query:e}):jsxRuntimeExports.jsx(PageStatus,{query:e,loaderClassName:"absolute inset-0 m-auto"});return jsxRuntimeExports.jsxs(SitePageLayout,{children:[jsxRuntimeExports.jsx(StaticPageTitle,{children:jsxRuntimeExports.jsx(Trans,{message:"Your lists"})}),jsxRuntimeExports.jsxs("div",{className:"container mx-auto mt-48 px-24",children:[jsxRuntimeExports.jsx("header",{children:jsxRuntimeExports.jsx(SiteSectionHeading,{headingType:"h1",margin:"mb-34",actions:jsxRuntimeExports.jsx(Button,{variant:"flat",color:"primary",elementType:Link,to:"new",children:jsxRuntimeExports.jsx(Trans,{message:"New list"})}),children:jsxRuntimeExports.jsx(Trans,{message:"My lists"})})}),t]})]})}function PageContent$1({query:e}){const{user:t}=useAuth();return e.noResults?jsxRuntimeExports.jsx(IllustratedMessage,{className:"mt-80",image:jsxRuntimeExports.jsx(SvgImage,{src:todoImage}),title:jsxRuntimeExports.jsx(Trans,{message:"You have not created any lists yet."})}):jsxRuntimeExports.jsxs("div",{children:[e.items.map(s=>jsxRuntimeExports.jsx(UserListIndexItem,{list:s,user:t},s.id)),jsxRuntimeExports.jsx(InfiniteScrollSentinel,{query:e})]})}const userProfileQueryKey=e=>["users",`${e}`,"profile"];function useUserProfile(){const{userId:e}=useParams();return useQuery(userProfileQueryKey(e),()=>fetchProfile(e))}function fetchProfile(e){return apiClient.get(`user-profile/${e}`).then(t=>t.data)}function ProfileDescription({profile:e,className:t}){return e?jsxRuntimeExports.jsxs("div",{className:clsx("text-sm",t),children:[e.description&&jsxRuntimeExports.jsx("p",{className:"rounded text-secondary whitespace-nowrap overflow-hidden overflow-ellipsis",children:e.description}),e.city||e.country?jsxRuntimeExports.jsx("div",{className:"flex items-center gap-24 justify-between mt-4",children:(e.city||e.country)&&jsxRuntimeExports.jsxs("div",{className:"rounded text-secondary w-max",children:[e.city,e.city&&","," ",e.country]})}):null]}):null}function useFollowedUsers(){const{user:e}=useAuth();return useQuery(["users","followed","ids"],()=>fetchIds(),{enabled:!!e})}function useIsUserFollowing(e){const{data:t,isLoading:s}=useFollowedUsers();return{isLoading:s,isFollowing:!!(t!=null&&t.ids.includes(e.id))}}function fetchIds(){return apiClient.get("users/me/followed-users/ids").then(e=>e.data)}function useFollowUser(){return useMutation(e=>followUser(e),{onSuccess:async(e,{user:t})=>{await queryClient.invalidateQueries(["users"]),toast(message("Following :name",{values:{name:t.display_name}}))},onError:e=>showHttpErrorToast(e)})}function followUser({user:e}){return apiClient.post(`users/${e.id}/follow`).then(t=>t.data)}function useUnfollowUser(){return useMutation(e=>unfollowUser(e),{onSuccess:async(e,{user:t})=>{await queryClient.invalidateQueries(["users"]),toast(message("Stopped following :name",{values:{name:t.display_name}}))},onError:e=>showHttpErrorToast(e)})}function unfollowUser({user:e}){return apiClient.post(`users/${e.id}/unfollow`).then(t=>t.data)}function FollowButton({user:e,className:t,...s}){const{user:i}=useAuth(),{isFollowing:n,isLoading:a}=useIsUserFollowing(e),o=useFollowUser(),x=useUnfollowUser(),l=clsx(t,"min-w-82");return n?jsxRuntimeExports.jsx(Button,{...s,className:l,onClick:()=>x.mutate({user:e}),disabled:!i||(i==null?void 0:i.id)===e.id||x.isLoading||a,children:jsxRuntimeExports.jsx(Trans,{message:"Unfollow"})}):jsxRuntimeExports.jsx(Button,{...s,className:l,onClick:()=>o.mutate({user:e}),disabled:!i||(i==null?void 0:i.id)===e.id||o.isLoading||a,children:jsxRuntimeExports.jsx(Trans,{message:"Follow"})})}function ProfileLinksForm(){const{fields:e,append:t,remove:s}=useFieldArray({name:"links"});return jsxRuntimeExports.jsxs("div",{children:[e.map((i,n)=>jsxRuntimeExports.jsxs("div",{className:"flex gap-10 mb-10 items-end",children:[jsxRuntimeExports.jsx(FormTextField,{required:!0,type:"url",label:jsxRuntimeExports.jsx(Trans,{message:"URL"}),name:`links.${n}.url`,size:"sm",className:"flex-auto"}),jsxRuntimeExports.jsx(FormTextField,{required:!0,label:jsxRuntimeExports.jsx(Trans,{message:"Short title"}),name:`links.${n}.title`,size:"sm",className:"flex-auto"}),jsxRuntimeExports.jsx(IconButton,{size:"sm",color:"primary",className:"flex-shrink-0",onClick:()=>{s(n)},children:jsxRuntimeExports.jsx(CloseIcon,{})})]},i.id)),jsxRuntimeExports.jsx(Button,{variant:"text",color:"primary",startIcon:jsxRuntimeExports.jsx(AddIcon,{}),size:"xs",onClick:()=>{t({url:"",title:""})},children:jsxRuntimeExports.jsx(Trans,{message:"Add another link"})})]})}function useUpdateUserProfile(e){const{user:t}=useAuth(),{trans:s}=useTrans();return useMutation(i=>updateProfile(i),{onSuccess:async()=>{t&&await queryClient.invalidateQueries(userProfileQueryKey(t.id)),toast(s(message("Profile updated")))},onError:i=>onFormQueryError(i,e)})}function updateProfile(e){return apiClient.put("user-profile/me",e).then(t=>t.data)}function EditUserProfileDialog({user:e}){var o,x,l,c;const{close:t,formId:s}=useDialogContext(),{data:i}=useValueLists(["countries"]),n=useForm({defaultValues:{user:{username:e.username,avatar:e.avatar,first_name:e.first_name,last_name:e.last_name},profile:{city:(o=e.profile)==null?void 0:o.city,country:(x=e.profile)==null?void 0:x.country,description:(l=e.profile)==null?void 0:l.description},links:e.links}}),a=useUpdateUserProfile(n);return jsxRuntimeExports.jsxs(Dialog,{size:"xl",children:[jsxRuntimeExports.jsx(DialogHeader,{children:jsxRuntimeExports.jsx(Trans,{message:"Edit your profile"})}),jsxRuntimeExports.jsx(DialogBody,{children:jsxRuntimeExports.jsx(Form,{id:s,form:n,onSubmit:u=>a.mutate(u,{onSuccess:()=>t()}),children:jsxRuntimeExports.jsxs(FileUploadProvider,{children:[jsxRuntimeExports.jsxs("div",{className:"md:flex items-start gap-30",children:[jsxRuntimeExports.jsx(FormImageSelector,{label:jsxRuntimeExports.jsx(Trans,{message:"Avatar"}),name:"user.avatar",diskPrefix:"avatars",variant:"avatar",previewSize:"w-200 h-200",className:"max-md:mb-20"}),jsxRuntimeExports.jsxs("div",{className:"flex-auto",children:[jsxRuntimeExports.jsx(FormTextField,{name:"user.username",label:jsxRuntimeExports.jsx(Trans,{message:"Username"}),className:"mb-24"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-24",children:[jsxRuntimeExports.jsx(FormTextField,{name:"user.first_name",label:jsxRuntimeExports.jsx(Trans,{message:"First name"}),className:"flex-1 mb-24"}),jsxRuntimeExports.jsx(FormTextField,{name:"user.last_name",label:jsxRuntimeExports.jsx(Trans,{message:"Last name"}),className:"flex-1 mb-24"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-24",children:[jsxRuntimeExports.jsx(FormTextField,{name:"profile.city",label:jsxRuntimeExports.jsx(Trans,{message:"City"}),className:"flex-1 mb-24"}),jsxRuntimeExports.jsxs(FormSelect,{showSearchField:!0,className:"flex-1 mb-24",selectionMode:"single",name:"profile.country",label:jsxRuntimeExports.jsx(Trans,{message:"Country"}),children:[jsxRuntimeExports.jsx(Item,{value:void 0,children:jsxRuntimeExports.jsx(Trans,{message:"None"})},"none"),(c=i==null?void 0:i.countries)==null?void 0:c.map(u=>jsxRuntimeExports.jsx(Item,{value:u.name,children:u.name},u.code))]})]}),jsxRuntimeExports.jsx(FormTextField,{name:"profile.description",label:jsxRuntimeExports.jsx(Trans,{message:"Description"}),inputElementType:"textarea",rows:4})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-24",children:[jsxRuntimeExports.jsx("div",{className:"mb-16 pb-16 border-b",children:jsxRuntimeExports.jsx(Trans,{message:"Your links"})}),jsxRuntimeExports.jsx(ProfileLinksForm,{})]})]})})}),jsxRuntimeExports.jsxs(DialogFooter,{children:[jsxRuntimeExports.jsx(Button,{type:"button",onClick:()=>{t()},children:jsxRuntimeExports.jsx(Trans,{message:"Cancel"})}),jsxRuntimeExports.jsx(Button,{form:s,type:"submit",variant:"flat",color:"primary",disabled:a.isLoading,children:jsxRuntimeExports.jsx(Trans,{message:"Save"})})]})]})}function ProfileStatsList({user:e}){const{auth:{getUserProfileLink:t}}=reactExports.useContext(SiteConfigContext),s=t(e);return jsxRuntimeExports.jsxs(StatsItems,{children:[jsxRuntimeExports.jsx(StatsItem,{label:jsxRuntimeExports.jsx(Trans,{message:"Followers"}),value:e.followers_count||0,link:`${s}/followers`}),jsxRuntimeExports.jsx(StatsItem,{label:jsxRuntimeExports.jsx(Trans,{message:"Following"}),value:e.followed_users_count||0,link:`${s}/following`}),jsxRuntimeExports.jsx(StatsItem,{label:jsxRuntimeExports.jsx(Trans,{message:"Lists"}),value:e.lists_count||0,link:`${s}/lists`})]})}function StatsItems(e){const t=reactExports.Children.toArray(e.children);return jsxRuntimeExports.jsx("div",{className:"flex items-center",children:t.map((s,i)=>jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[s,i<t.length-1&&jsxRuntimeExports.jsx("div",{className:"h-34 w-1 bg-divider mx-10"})]},i))})}function StatsItem({label:e,value:t,link:s}){return jsxRuntimeExports.jsxs(Link,{to:s,className:"block text-center group",children:[jsxRuntimeExports.jsx("div",{className:"text-lg font-bold",children:jsxRuntimeExports.jsx(FormattedNumber,{value:t})}),jsxRuntimeExports.jsx("div",{className:"text-xs text-muted uppercase group-hover:text-primary transition-colors",children:e})]})}function RemoteFavicon({url:e,className:t,size:s="w-16 h-16",alt:i}){if(!e)return null;const n=getFaviconSrc(e);return jsxRuntimeExports.jsx("img",{className:clsx(s,t),src:getFaviconSrc(e),alt:i||`${n} favicon`})}const getFaviconSrc=memoize(e=>e.includes("youtube")?"https://www.youtube.com/s/desktop/ca54e1bd/img/favicon.ico":(isAbsoluteUrl(e)||(e=`${window.location.protocol}//${window.location.host}`),"https://www.google.com/s2/favicons?domain="+new URL(e).origin));function ProfileLinks({links:e,className:t}){return e!=null&&e.length?e.length===1?jsxRuntimeExports.jsxs("a",{className:"flex items-center max-md:justify-center gap-6 mt-24 md:mt-12 hover:text-primary transition-colors",href:e[0].url,children:[jsxRuntimeExports.jsx(OpenInNewIcon,{className:"text-muted",size:"sm"}),jsxRuntimeExports.jsx("span",{className:"capitalize",children:e[0].title})]}):jsxRuntimeExports.jsx("div",{className:clsx("flex items-center",t),children:e.map(s=>jsxRuntimeExports.jsx(Tooltip,{label:s.title,children:jsxRuntimeExports.jsx(ButtonBase,{elementType:"a",href:s.url,target:"_blank",rel:"noreferrer",children:jsxRuntimeExports.jsx(RemoteFavicon,{url:s.url,alt:s.title,size:"w-20 h-20"})})},s.url))}):null}function ProfilePageHeader({user:e}){const{user:t}=useAuth();return jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-24",children:[jsxRuntimeExports.jsx(UserAvatar,{user:e,circle:!0,size:"w-140 h-140"}),jsxRuntimeExports.jsxs("div",{className:"flex-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-8 gap-8",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold",children:e.display_name}),e.is_pro&&jsxRuntimeExports.jsx(Chip,{size:"xs",color:"primary",radius:"rounded",className:"mt-2",children:jsxRuntimeExports.jsx(Trans,{message:"PRO"})})]}),jsxRuntimeExports.jsx(ProfileDescription,{profile:e.profile}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-14 mt-12",children:[(t==null?void 0:t.id)!==e.id&&jsxRuntimeExports.jsx(FollowButton,{variant:"outline",color:"primary",size:"xs",user:e}),(t==null?void 0:t.id)===e.id&&jsxRuntimeExports.jsx(EditButton,{user:e})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(ProfileStatsList,{user:e}),jsxRuntimeExports.jsx(ProfileLinks,{links:e.links,className:"flex-shrink-0 ml-auto mt-12"})]})]})}function EditButton({user:e}){return jsxRuntimeExports.jsxs(DialogTrigger,{type:"modal",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",size:"xs",startIcon:jsxRuntimeExports.jsx(EditIcon,{}),children:jsxRuntimeExports.jsx(Trans,{message:"Edit profile"})}),jsxRuntimeExports.jsx(EditUserProfileDialog,{user:e})]})}const PageTabs=[{uri:"",label:message("Lists")},{uri:"ratings",label:message("Ratings")},{uri:"reviews",label:message("Reviews")},{uri:"comments",label:message("Comments")},{uri:"followers",label:message("Followers")},{uri:"followed-users",label:message("Following")}];function UserProfilePage(){const e=useUserProfile(),t=e.data?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(PageMetaTags,{query:e}),jsxRuntimeExports.jsx(PageContent,{user:e.data.user})]}):jsxRuntimeExports.jsx(PageStatus,{query:e,loaderClassName:"absolute inset-0 m-auto"});return jsxRuntimeExports.jsx(SitePageLayout,{children:t})}function PageContent({user:e}){return jsxRuntimeExports.jsxs("div",{className:"container mx-auto mt-24 md:mt-40 px-14 md:px-24",children:[jsxRuntimeExports.jsx(ProfilePageHeader,{user:e}),jsxRuntimeExports.jsx(ProfileTabs,{user:e})]})}function ProfileTabs({user:e}){const{auth:{getUserProfileLink:t}}=reactExports.useContext(SiteConfigContext),s=t(e),{pathname:i}=useLocation(),n=i.split("/").pop();let a=PageTabs.findIndex(o=>o.uri===n);return a===-1&&(a=0),jsxRuntimeExports.jsxs(Tabs,{className:"mt-34",selectedTab:a,children:[jsxRuntimeExports.jsx(TabList,{children:PageTabs.map(o=>jsxRuntimeExports.jsx(Tab,{width:"min-w-132",elementType:Link,to:`${s}/${o.uri}`,replace:!0,children:jsxRuntimeExports.jsx(Trans,{...o.label})},o.uri))}),jsxRuntimeExports.jsx("div",{className:"mt-24",children:jsxRuntimeExports.jsx(Outlet,{})})]})}function ProfileListsPanel(){const t=useUserProfile().data.user,s=useProfileLists();return s.noResults?jsxRuntimeExports.jsx(IllustratedMessage,{imageHeight:"h-auto",imageMargin:"mb-14",image:jsxRuntimeExports.jsx(ListAltIcon,{className:"text-muted"}),size:"sm",title:jsxRuntimeExports.jsx(Trans,{message:"No lists yet"}),description:jsxRuntimeExports.jsx(Trans,{message:"Follow :user for updates on lists they create in the future.",values:{user:t.display_name}})}):s.data?jsxRuntimeExports.jsxs("div",{children:[s.items.map(i=>jsxRuntimeExports.jsx(UserListIndexItem,{list:i,user:t,showVisibility:!1},i.id)),jsxRuntimeExports.jsx(InfiniteScrollSentinel,{query:s})]}):jsxRuntimeExports.jsx(PageStatus,{query:s})}function useProfileRatings(){const{userId:e="me"}=useParams();return useInfiniteData({endpoint:`user-profile/${e}/ratings`,queryKey:["reviews","profile-page-ratings",e],paginate:"simple"})}function EpisodePortraitGridItem({item:e,title:t,rating:s}){return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(EpisodePoster,{episode:e,title:t,srcSize:"lg",aspect:"aspect-poster",showPlayButton:!0}),jsxRuntimeExports.jsxs("div",{className:"mt-10 text-sm",children:[jsxRuntimeExports.jsx(TitleRating,{score:s??e.rating,className:"mb-4"}),jsxRuntimeExports.jsx(TitleLinkWithEpisodeNumber,{title:t,episode:e,className:"block font-medium text-base"})]})]})}function ProfileRatingsPanel(){const t=useUserProfile().data.user,s=useProfileRatings();return s.noResults?jsxRuntimeExports.jsx(IllustratedMessage,{imageHeight:"h-auto",imageMargin:"mb-14",image:jsxRuntimeExports.jsx(StarIcon,{className:"text-muted"}),size:"sm",title:jsxRuntimeExports.jsx(Trans,{message:"No ratings yet"}),description:jsxRuntimeExports.jsx(Trans,{message:"Follow :user for updates on titles they rate in the future.",values:{user:t.display_name}})}):s.data?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(ContentGridLayout,{variant:"portrait",children:s.items.map(i=>{const n=i.reviewable;return n.model_type==="episode"?jsxRuntimeExports.jsx(EpisodePortraitGridItem,{item:n,title:n.title,rating:i.score},i.id):jsxRuntimeExports.jsx(TitlePortraitGridItem,{item:i.reviewable,rating:i.score},i.id)})}),jsxRuntimeExports.jsx(InfiniteScrollSentinel,{query:s})]}):jsxRuntimeExports.jsx(PageStatus,{query:s})}function useProfileReviews(){const{userId:e="me"}=useParams();return useInfiniteData({endpoint:`user-profile/${e}/reviews`,queryKey:["reviews","profile-page-reviews",e],paginate:"simple"})}function ProfileReviewsPanel(){const t=useUserProfile().data.user,s=useProfileReviews();return s.noResults?jsxRuntimeExports.jsx(IllustratedMessage,{imageHeight:"h-auto",imageMargin:"mb-14",image:jsxRuntimeExports.jsx(RateReviewIcon,{className:"text-muted"}),size:"sm",title:jsxRuntimeExports.jsx(Trans,{message:"No reviews yet"}),description:jsxRuntimeExports.jsx(Trans,{message:"Follow :user for updates on titles they review in the future.",values:{user:t.display_name}})}):s.data?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[s.items.map(i=>jsxRuntimeExports.jsx(ReviewListItem,{review:i},i.id)),jsxRuntimeExports.jsx(InfiniteScrollSentinel,{query:s})]}):jsxRuntimeExports.jsx(PageStatus,{query:s})}function ReviewListItem({review:e}){const t=e.helpful_count+e.not_helpful_count,s=e.reviewable,i=s.model_type==="episode"?s.title:s;return jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-24 mb-24 border-b pb-24",children:[jsxRuntimeExports.jsx(TitlePoster,{title:i,size:"w-90",srcSize:"sm"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-lg font-semibold",children:s.model_type==="episode"?jsxRuntimeExports.jsx(TitleLinkWithEpisodeNumber,{title:i,episode:s,target:"_blank"}):jsxRuntimeExports.jsx(TitleLink,{title:i,target:"_blank"})}),jsxRuntimeExports.jsx(TitleRating,{className:"mt-14 mb-8",score:e.score}),jsxRuntimeExports.jsx("div",{className:"text-base font-semibold",children:e.title}),jsxRuntimeExports.jsx("p",{className:"text-sm mt-10",children:e.body}),t?jsxRuntimeExports.jsx("div",{className:"text-xs text-muted mt-12",children:jsxRuntimeExports.jsx(Trans,{message:":helpfulCount out of :total people found this helpful.",values:{helpfulCount:e.helpful_count,total:e.helpful_count+e.not_helpful_count}})}):null]})]})}function useProfileComments(){const{userId:e="me"}=useParams();return useInfiniteData({endpoint:`user-profile/${e}/comments`,queryKey:["comment","profile-page-comments",e],paginate:"simple"})}function ProfileCommentsPanel(){const t=useUserProfile().data.user,s=useProfileComments();return s.noResults?jsxRuntimeExports.jsx(IllustratedMessage,{imageHeight:"h-auto",imageMargin:"mb-14",image:jsxRuntimeExports.jsx(RateReviewIcon,{className:"text-muted"}),size:"sm",title:jsxRuntimeExports.jsx(Trans,{message:"No comments yet"}),description:jsxRuntimeExports.jsx(Trans,{message:"Follow :user for updates on comments they post in the future.",values:{user:t.display_name}})}):s.data?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[s.items.map(i=>jsxRuntimeExports.jsx(CommentListItem,{comment:i},i.id)),jsxRuntimeExports.jsx(InfiniteScrollSentinel,{query:s})]}):jsxRuntimeExports.jsx(PageStatus,{query:s})}function CommentListItem({comment:e}){const t=e.commentable,s=t.model_type==="episode"?t.title:t;return jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-24 mb-24 border-b pb-24",children:[jsxRuntimeExports.jsx(TitlePoster,{title:s,size:"w-90",srcSize:"sm"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-lg font-semibold",children:t.model_type==="episode"?jsxRuntimeExports.jsx(TitleLinkWithEpisodeNumber,{title:s,episode:t,target:"_blank"}):jsxRuntimeExports.jsx(TitleLink,{title:s,target:"_blank"})}),jsxRuntimeExports.jsx("time",{className:"block text-muted text-xs mt-12",children:jsxRuntimeExports.jsx(FormattedRelativeTime,{date:e.created_at})}),jsxRuntimeExports.jsx("p",{className:"text-sm mt-8",children:e.content}),e.upvotes?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-8 text-muted mt-12",children:[jsxRuntimeExports.jsx(ThumbUpIcon,{size:"sm"}),jsxRuntimeExports.jsx("div",{children:e.upvotes})]}):null]})]})}function useProfileFollowers(){const{userId:e="me"}=useParams();return useInfiniteData({endpoint:`users/${e}/followers`,queryKey:["users","profile-page-followers",e],paginate:"simple"})}function FollowerListItem({follower:e}){return jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-16 mb-16 pb-16 border-b",children:[jsxRuntimeExports.jsx(UserAvatar,{user:e,size:"lg"}),jsxRuntimeExports.jsxs("div",{className:"text-sm",children:[jsxRuntimeExports.jsx(UserProfileLink,{user:e}),e.followers_count&&e.followers_count>0?jsxRuntimeExports.jsx("div",{className:"text-xs text-muted",children:jsxRuntimeExports.jsx(Trans,{message:"[one 1 followers|other :count followers]",values:{count:e.followers_count}})}):null]}),jsxRuntimeExports.jsx(FollowButton,{variant:"outline",size:"xs",className:"ml-auto",user:e})]},e.id)}function ProfileFollowersPanel(){const t=useUserProfile().data.user,s=useProfileFollowers();return s.noResults?jsxRuntimeExports.jsx(IllustratedMessage,{imageHeight:"h-auto",imageMargin:"mb-14",image:jsxRuntimeExports.jsx(BookmarkBorderIcon,{className:"text-muted"}),size:"sm",title:jsxRuntimeExports.jsx(Trans,{message:"No followers yet"}),description:jsxRuntimeExports.jsx(Trans,{message:"Be the first to follow :name.",values:{name:t.display_name}})}):s.data?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[s.items.map(i=>jsxRuntimeExports.jsx(FollowerListItem,{follower:i},i.id)),jsxRuntimeExports.jsx(InfiniteScrollSentinel,{query:s})]}):jsxRuntimeExports.jsx(PageStatus,{query:s})}function useProfileFollowedUsers(){const{userId:e="me"}=useParams();return useInfiniteData({endpoint:`users/${e}/followed-users`,queryKey:["users","profile-page-followed-users",e],paginate:"simple"})}function ProfileFollowedUsersPanel(){const t=useUserProfile().data.user,s=useProfileFollowedUsers();return s.noResults?jsxRuntimeExports.jsx(IllustratedMessage,{imageHeight:"h-auto",imageMargin:"mb-14",image:jsxRuntimeExports.jsx(BookmarkBorderIcon,{className:"text-muted"}),size:"sm",title:jsxRuntimeExports.jsx(Trans,{message:"Not following anyone yet"}),description:jsxRuntimeExports.jsx(Trans,{message:"Check back later to see users :user is following.",values:{user:t.display_name}})}):s.data?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[s.items.map(i=>jsxRuntimeExports.jsx(FollowerListItem,{follower:i},i.id)),jsxRuntimeExports.jsx(InfiniteScrollSentinel,{query:s})]}):jsxRuntimeExports.jsx(PageStatus,{query:s})}function SearchPage(){const{query:e}=useParams(),t=useSearchResults({query:e}),{movies:s,series:i,people:n}=reactExports.useMemo(()=>{var l;const a=[],o=[],x=[];return(l=t.data)==null||l.results.forEach(c=>{c.model_type===TITLE_MODEL&&c.is_series?o.push(c):c.model_type===TITLE_MODEL&&!c.is_series?a.push(c):c.model_type===PERSON_MODEL&&x.push(c)}),{movies:a,series:o,people:x}},[t]);return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(PageMetaTags,{query:t}),jsxRuntimeExports.jsx(SitePageLayout,{children:jsxRuntimeExports.jsxs("section",{className:"container mx-auto mt-24 px-14 md:mt-40 md:px-24",children:[jsxRuntimeExports.jsx(SiteSectionHeading,{className:"mb-48",headingType:"h1",hideBorder:!0,children:jsxRuntimeExports.jsx(Trans,{message:"Search results for: “:query“",values:{query:e}})}),jsxRuntimeExports.jsxs("main",{children:[s.length>0&&jsxRuntimeExports.jsxs("div",{className:"mb-48",children:[jsxRuntimeExports.jsx(SiteSectionHeading,{fontSize:"text-2xl",children:jsxRuntimeExports.jsx(Trans,{message:"Movies"})}),jsxRuntimeExports.jsx(ContentGrid,{content:s,variant:"portrait"})]}),i.length>0&&jsxRuntimeExports.jsxs("div",{className:"mb-48",children:[jsxRuntimeExports.jsx(SiteSectionHeading,{fontSize:"text-2xl",children:jsxRuntimeExports.jsx(Trans,{message:"Series"})}),jsxRuntimeExports.jsx(ContentGrid,{content:i,variant:"portrait"})]}),n.length>0&&jsxRuntimeExports.jsxs("div",{className:"mb-48",children:[jsxRuntimeExports.jsx(SiteSectionHeading,{fontSize:"text-2xl",children:jsxRuntimeExports.jsx(Trans,{message:"People"})}),jsxRuntimeExports.jsx(ContentGrid,{content:n,variant:"portrait"})]})]})]})})]})}const RouteConfig=[{index:!0,element:jsxRuntimeExports.jsx(HomepageChannelPage,{})},{path:"search/:query",element:jsxRuntimeExports.jsx(SearchPage,{})},{path:"watch/:videoId",element:jsxRuntimeExports.jsx(WatchPage,{})},{path:"/titles/:titleId/:titleSlug",element:jsxRuntimeExports.jsx(TitlePage,{})},{path:"/titles/:titleId/:titleSlug/videos",element:jsxRuntimeExports.jsx(TitleVideosPage,{})},{path:"/titles/:titleId/:titleSlug/images",element:jsxRuntimeExports.jsx(TitleImagesPage,{})},{path:"/titles/:titleId/:titleSlug/full-credits",element:jsxRuntimeExports.jsx(TitleFullCreditsPage,{})},{path:"/titles/:titleId/:titleSlug/season/:season",element:jsxRuntimeExports.jsx(SeasonPage,{})},{path:"/titles/:titleId/:titleSlug/season/:season/episode/:episode",element:jsxRuntimeExports.jsx(EpisodePage,{})},{path:"/titles/:titleId/:titleSlug/season/:season/episode/:episode/full-credits",element:jsxRuntimeExports.jsx(EpisodeFullCreditsPage,{})},{path:"/people/:personId",element:jsxRuntimeExports.jsx(PersonPage,{})},{path:"/people/:personId/:personSlug",element:jsxRuntimeExports.jsx(PersonPage,{})},{path:"/news/:articleId",element:jsxRuntimeExports.jsx(NewsArticlePage,{})},{path:"user/:userId/:slug",element:jsxRuntimeExports.jsx(UserProfilePage,{}),children:[{index:!0,element:jsxRuntimeExports.jsx(ProfileListsPanel,{})},{path:"ratings",element:jsxRuntimeExports.jsx(ProfileRatingsPanel,{})},{path:"reviews",element:jsxRuntimeExports.jsx(ProfileReviewsPanel,{})},{path:"comments",element:jsxRuntimeExports.jsx(ProfileCommentsPanel,{})},{path:"followers",element:jsxRuntimeExports.jsx(ProfileFollowersPanel,{})},{path:"followed-users",element:jsxRuntimeExports.jsx(ProfileFollowedUsersPanel,{})}]},{path:"user/:userId/:slug/:tab",element:jsxRuntimeExports.jsx(UserProfilePage,{})},{path:"/lists",element:jsxRuntimeExports.jsx(AuthRoute,{children:jsxRuntimeExports.jsx(UserListsIndexPage,{})})},{path:"/lists/new",element:jsxRuntimeExports.jsx(AuthRoute,{children:jsxRuntimeExports.jsx(SitePageLayout,{children:jsxRuntimeExports.jsx(CreateUserListPage,{})})})},{path:"/lists/:slugOrId",element:jsxRuntimeExports.jsx(ChannelPage,{type:"list"})},{path:"/lists/:slugOrId/edit",element:jsxRuntimeExports.jsx(SitePageLayout,{children:jsxRuntimeExports.jsx(EditUserListPage,{})})},{path:":slugOrId",element:jsxRuntimeExports.jsx(ChannelPage,{})},{path:"channel/:slugOrId",element:jsxRuntimeExports.jsx(ChannelPage,{})},{path:":slugOrId/:restriction",element:jsxRuntimeExports.jsx(ChannelPage,{})},{path:"channel/:slugOrId/:restriction",element:jsxRuntimeExports.jsx(ChannelPage,{})},{path:"*",element:jsxRuntimeExports.jsx(NotFoundPage,{})}];function HomepageChannelPage(){const{homepage:e}=useSettings();let t="homepage";return(e==null?void 0:e.type)==="channel"&&e.value&&(t=e.value),jsxRuntimeExports.jsx(ChannelPage,{slugOrId:t})}function SiteRoutes(){return useRoutes(RouteConfig)}export{SiteRoutes as default};
//# sourceMappingURL=site-routes-23b0ed71.js.map
