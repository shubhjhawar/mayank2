{"version":3,"file":"site-routes-23b0ed71.js","sources":["../../../common/resources/client/channels/requests/use-paginated-channel-content.ts","../../../resources/client/channels/channel-header/channel-sort-button.tsx","../../../resources/client/titles/site-section-heading.tsx","../../../resources/client/channels/channel-header/use-channel-layouts.ts","../../../resources/client/channels/channel-header/channel-layout-button.tsx","../../../resources/client/user-lists/user-list-byline.tsx","../../../common/resources/client/utils/urls/share-link-socially.ts","../../../resources/client/sharing/copy-link-icon.tsx","../../../resources/client/sharing/share-menu-trigger.tsx","../../../resources/client/user-lists/user-list-link.tsx","../../../resources/client/user-lists/user-list-details.tsx","../../../resources/client/channels/channel-header/channel-header.tsx","../../../resources/client/channels/content-grid/content-grid-layout.tsx","../../../resources/client/people/person-age.tsx","../../../resources/client/news/news-article-grid-item.tsx","../../../resources/client/channels/content-grid/title-grid-item.tsx","../../../resources/client/channels/content-grid/channel-content-grid-item.tsx","../../../common/resources/client/channels/requests/use-channel-content.ts","../../../resources/client/channels/content-grid/channel-content-grid.tsx","../../../node_modules/just-debounce-it/index.mjs","../../../resources/client/channels/carousel/use-carousel.ts","../../../resources/client/channels/carousel/channel-content-carousel.tsx","../../../resources/client/channels/channel-content-slider.tsx","../../../resources/client/news/news-article-source-link.tsx","../../../resources/client/news/news-article-byline.tsx","../../../resources/client/channels/channel-content-news.tsx","../../../resources/client/channels/channel-content-list-item.tsx","../../../resources/client/channels/channel-content-list.tsx","../../../resources/client/channels/channel-content.tsx","../../../resources/client/search/requests/use-search-results.ts","../../../resources/client/search/search-autocomplete.tsx","../../../resources/client/main-navbar.tsx","../../../common/resources/client/admin/ads/ad-host.tsx","../../../resources/client/site-page-layout.tsx","../../../resources/client/channels/channel-page.tsx","../../../resources/client/titles/pages/title-page/sections/title-page-image-grid.tsx","../../../resources/client/titles/pages/title-page/title-credits-grid/title-credits-grid.tsx","../../../resources/client/titles/pages/title-page/sections/title-page-cast.tsx","../../../resources/client/titles/requests/use-related-titles.ts","../../../resources/client/titles/related-titles-panel.tsx","../../../resources/client/titles/pages/title-page/sections/title-page-season-grid.tsx","../../../resources/client/titles/compact-credits.tsx","../../../resources/client/titles/genre-link.tsx","../../../resources/client/titles/pages/title-page/sections/title-news/use-title-news.ts","../../../resources/client/titles/pages/title-page/sections/title-news/title-news.tsx","../../../node_modules/linkify-html/dist/linkify-html.es.js","../../../common/resources/client/utils/hooks/use-linkified-string.ts","../../../common/resources/client/ui/truncated-description.tsx","../../../resources/client/reviews/review-list/new-review-form.tsx","../../../resources/client/reviews/requests/use-submit-review-feedback.ts","../../../common/resources/client/reports/requests/use-submit-report.ts","../../../common/resources/client/reports/requests/use-delete-report.ts","../../../resources/client/reviews/review-list/review-list-item.tsx","../../../common/resources/client/comments/comment-list/account-required-card.tsx","../../../resources/client/reviews/review-list/review-list.tsx","../../../resources/client/titles/pages/title-page/sections/title-page-review-list.tsx","../../../resources/client/titles/pages/title-page/sections/title-page-video-grid.tsx","../../../resources/client/titles/pages/title-page/sections/title-page-episode-grid.tsx","../../../resources/client/titles/pages/title-page/sections/use-configured-title-page-sections.ts","../../../resources/client/titles/pages/title-page/title-page-main-content.tsx","../../../resources/client/titles/pages/title-page/title-page-header-layout.tsx","../../../resources/client/titles/pages/title-page/title-page-header.tsx","../../../resources/client/titles/pages/title-page/title-page-header-image.tsx","../../../resources/client/user-lists/requests/use-current-user-watchlist.ts","../../../resources/client/user-lists/requests/use-add-to-watchlist.ts","../../../resources/client/user-lists/requests/use-remove-from-watchlist.ts","../../../resources/client/user-lists/watchlist-button.tsx","../../../resources/client/titles/pages/title-page/title-page-aside-layout.tsx","../../../resources/client/titles/keyword-link.tsx","../../../resources/client/titles/production-country-link.tsx","../../../resources/client/titles/pages/title-page/watch-now-button.tsx","../../../resources/client/videos/use-is-streaming-mode.ts","../../../resources/client/titles/pages/title-page/title-page-aside.tsx","../../../resources/client/titles/requests/use-title-page-data.tsx","../../../resources/client/titles/pages/title-page/title-page.tsx","../../../resources/client/seasons/season-page.tsx","../../../resources/client/episodes/episode-page-header.tsx","../../../resources/client/episodes/episode-page.tsx","../../../resources/client/videos/requests/use-watch-page-video.ts","../../../common/resources/client/comments/requests/use-comments.ts","../../../common/resources/client/comments/requests/use-create-comment.ts","../../../common/resources/client/comments/new-comment-form.tsx","../../../common/resources/client/votes/requests/use-store-vote.ts","../../../common/resources/client/votes/thumb-buttons.tsx","../../../common/resources/client/comments/comment-list/comment-list-item.tsx","../../../common/resources/client/comments/comment-list/comment-list.tsx","../../../resources/client/videos/watch-page/watch-page-title-details.tsx","../../../resources/client/videos/watch-page/watch-page-aside.tsx","../../../resources/client/videos/watch-page/watch-page-video-selector.tsx","../../../resources/client/videos/watch-page/watch-page.tsx","../../../resources/client/titles/pages/title-videos-page.tsx","../../../resources/client/titles/pages/title-images-page.tsx","../../../resources/client/people/person-page/person-page-aside.tsx","../../../resources/client/people/requests/use-full-person-credits-for-title.ts","../../../resources/client/people/person-page/character-or-job.tsx","../../../resources/client/people/person-page/person-page-credits.tsx","../../../resources/client/people/person-page/person-page.tsx","../../../resources/client/titles/pages/title-full-credits-page.tsx","../../../resources/client/episodes/epispde-full-credits-page.tsx","../../../resources/client/news/requests/use-news-articles.ts","../../../resources/client/news/news-article-page.tsx","../../../resources/client/user-lists/requests/use-delete-list.ts","../../../resources/client/user-lists/pages/user-lists-index-page/user-list-index-item.tsx","../../../resources/client/profile/requests/use-profile-lists.ts","../../../resources/client/user-lists/pages/user-lists-index-page/user-lists-index-page.tsx","../../../resources/client/profile/requests/use-user-profile.ts","../../../resources/client/profile/header/profile-description.tsx","../../../common/resources/client/users/queries/use-followed-users.ts","../../../common/resources/client/users/queries/use-follow-user.ts","../../../common/resources/client/users/queries/use-unfollow-user.ts","../../../common/resources/client/users/follow-button.tsx","../../../resources/client/profile/profile-links-form.tsx","../../../resources/client/profile/requests/use-update-user-profile.ts","../../../resources/client/profile/edit-user-profile-dialog.tsx","../../../resources/client/profile/header/profile-stats-list.tsx","../../../common/resources/client/ui/remote-favicon.tsx","../../../resources/client/profile/header/profile-links.tsx","../../../resources/client/profile/header/profile-page-header.tsx","../../../resources/client/profile/user-profile-page.tsx","../../../resources/client/profile/panels/profile-lists-panel.tsx","../../../resources/client/profile/requests/use-profile-ratings.ts","../../../resources/client/channels/content-grid/episode-grid-item.tsx","../../../resources/client/profile/panels/profile-ratings-panel.tsx","../../../resources/client/profile/requests/use-profile-reviews.ts","../../../resources/client/profile/panels/profile-reviews-panel.tsx","../../../resources/client/profile/requests/use-profile-comments.ts","../../../resources/client/profile/panels/profile-comments-panel.tsx","../../../resources/client/profile/requests/use-profile-followers.ts","../../../resources/client/profile/follower-list-item.tsx","../../../resources/client/profile/panels/profile-followers-panel.tsx","../../../resources/client/profile/requests/use-profile-followed-users.ts","../../../resources/client/profile/panels/profile-followed-users-panel.tsx","../../../resources/client/search/search-page.tsx","../../../resources/client/site-routes.tsx"],"sourcesContent":["import {useInfiniteData} from '@common/ui/infinite-scroll/use-infinite-data';\nimport {Channel, ChannelContentItem} from '@common/channels/channel';\nimport {\n  channelEndpoint,\n  channelQueryKey,\n} from '@common/channels/requests/use-channel';\nimport {useChannelQueryParams} from '@common/channels/use-channel-query-params';\n\nexport function usePaginatedChannelContent<\n  T extends ChannelContentItem = ChannelContentItem\n>(channel: Channel<T>) {\n  const queryParams = useChannelQueryParams(channel);\n  return useInfiniteData<T>({\n    willSortOrFilter: true,\n    initialPage: channel.content,\n    queryKey: channelQueryKey(channel.id),\n    endpoint: channelEndpoint(channel.id),\n    paginate: 'simple',\n    queryParams: {\n      returnContentOnly: 'true',\n      ...queryParams,\n    },\n  });\n}\n","import {Channel, ChannelContentItem} from '@common/channels/channel';\nimport {\n  channelContentConfig,\n  Sort,\n} from '@app/admin/channels/channel-content-config';\nimport {Button} from '@common/ui/buttons/button';\nimport {SortIcon} from '@common/icons/material/Sort';\nimport {Trans} from '@common/i18n/trans';\nimport React from 'react';\nimport {useSearchParams} from 'react-router-dom';\nimport {\n  Menu,\n  MenuItem,\n  MenuTrigger,\n} from '@common/ui/navigation/menu/menu-trigger';\nimport {message} from '@common/i18n/message';\n\ninterface ChannelSortButtonProps<T = ChannelContentItem> {\n  channel: Channel;\n}\nexport function ChannelSortButton<T = ChannelContentItem>({\n  channel,\n}: ChannelSortButtonProps<T>) {\n  const config = channelContentConfig.models[channel.config.contentModel];\n  const sortMethods =\n    config?.sortMethods.map(method => ({\n      key: method,\n      label: channelContentConfig.sortingMethods[method].label,\n    })) || [];\n\n  if (channel.config.contentType === 'manual') {\n    sortMethods.unshift({\n      key: Sort.curated,\n      label: message('Default order'),\n    });\n  }\n\n  const [searchParams, setSearchParams] = useSearchParams();\n  const selectedValue =\n    searchParams.get('order') || channel.config.contentOrder;\n\n  if (sortMethods?.length < 2) {\n    return null;\n  }\n\n  const label = sortMethods?.find(\n    method => method.key === selectedValue\n  )?.label;\n\n  return (\n    <MenuTrigger\n      selectionMode=\"single\"\n      showCheckmark\n      selectedValue={selectedValue}\n      onSelectionChange={newValue => {\n        // order by date added to channel, if content is cured\n        if (\n          newValue === Sort.recent &&\n          channel.config.contentType === 'manual'\n        ) {\n          newValue = 'channelables.created_at:desc';\n        }\n\n        setSearchParams(\n          prev => {\n            prev.set('order', newValue as string);\n            return prev;\n          },\n          {\n            replace: true,\n          }\n        );\n      }}\n    >\n      <Button startIcon={<SortIcon />}>\n        {label ? <Trans {...label} /> : <Trans message=\"Popularity\" />}\n      </Button>\n      <Menu>\n        {sortMethods?.map(method => (\n          <MenuItem key={method.key} value={method.key}>\n            <Trans {...method.label} />\n          </MenuItem>\n        ))}\n      </Menu>\n    </MenuTrigger>\n  );\n}\n","import {IconButton} from '@common/ui/buttons/icon-button';\nimport {Link} from 'react-router-dom';\nimport {KeyboardArrowRightIcon} from '@common/icons/material/KeyboardArrowRight';\nimport {ReactNode} from 'react';\nimport clsx from 'clsx';\n\ninterface Props {\n  children: ReactNode;\n  titleAppend?: ReactNode;\n  link?: string;\n  fontSize?: string;\n  fontWeight?: string;\n  margin?: string;\n  headingType?: 'h1' | 'h2' | 'div';\n  className?: string;\n  description?: ReactNode;\n  descriptionFontSize?: string;\n  actions?: ReactNode;\n  hideBorder?: boolean;\n}\nexport function SiteSectionHeading({\n  children,\n  titleAppend,\n  link,\n  fontSize = 'text-3xl',\n  fontWeight = 'font-bold',\n  margin = 'mb-20',\n  className,\n  headingType: HeadingType = 'h2',\n  description,\n  descriptionFontSize = 'text-base',\n  actions,\n  hideBorder,\n}: Props) {\n  const title = link ? (\n    <Link\n      to={link}\n      className=\"hover:underline focus-visible:ring-2 focus-visible:ring-offset-2 outline-none rounded transition-colors\"\n    >\n      {children}\n    </Link>\n  ) : (\n    children\n  );\n\n  return (\n    <section className={clsx(className, margin)}>\n      <div className=\"flex items-center gap-44 max-md:overflow-x-auto\">\n        <div className=\"flex-auto\">\n          <div\n            className={clsx(\n              'flex items-center gap-4 relative',\n              !hideBorder &&\n                'pl-14 before:absolute before:left-0 before:h-5/6 before:w-4 before:bg-primary before:rounded'\n            )}\n          >\n            <HeadingType className={clsx(fontSize, fontWeight)}>\n              {title}\n            </HeadingType>\n            {titleAppend && (\n              <span className=\"text-base text-muted pt-4\">{titleAppend}</span>\n            )}\n            {link && (\n              <IconButton\n                elementType={Link}\n                to={link}\n                size=\"sm\"\n                iconSize=\"lg\"\n                className=\"mt-4\"\n              >\n                <KeyboardArrowRightIcon />\n              </IconButton>\n            )}\n          </div>\n        </div>\n        {actions && (\n          <div className=\"flex-shrink-0 flex items-center gap-4\">{actions}</div>\n        )}\n      </div>\n      {description && (\n        <div className={clsx('mt-6', descriptionFontSize)}>{description}</div>\n      )}\n    </section>\n  );\n}\n","import {useLocalStorage} from '@common/utils/hooks/local-storage';\nimport {Channel} from '@common/channels/channel';\nimport {channelContentConfig} from '@app/admin/channels/channel-content-config';\n\nexport function useChannelLayouts(channel: Channel) {\n  const config = channelContentConfig.models[channel.config.contentModel];\n  const availableLayouts = config?.layoutMethods\n    .filter(m => channelContentConfig.userSelectableLayouts.includes(m))\n    .map(method => ({\n      key: method,\n      label: channelContentConfig.layoutMethods[method].label,\n      icon: channelContentConfig.layoutMethods[method].icon,\n    }));\n\n  const [selectedLayout, setSelectedLayout] = useLocalStorage(\n    `channel-layout-${channel.config.contentModel}`,\n    channel.config.layout\n  );\n\n  return {selectedLayout, setSelectedLayout, availableLayouts};\n}\n","import {Channel} from '@common/channels/channel';\nimport {SortIcon} from '@common/icons/material/Sort';\nimport {Trans} from '@common/i18n/trans';\nimport React from 'react';\nimport {\n  Menu,\n  MenuItem,\n  MenuTrigger,\n} from '@common/ui/navigation/menu/menu-trigger';\nimport {useChannelLayouts} from '@app/channels/channel-header/use-channel-layouts';\nimport {Button} from '@common/ui/buttons/button';\n\ninterface Props {\n  channel: Channel;\n}\nexport function ChannelLayoutButton({channel}: Props) {\n  const {selectedLayout, setSelectedLayout, availableLayouts} =\n    useChannelLayouts(channel);\n\n  if (availableLayouts?.length < 2) {\n    return null;\n  }\n\n  const layoutConfig = availableLayouts?.find(\n    method => method.key === selectedLayout\n  );\n\n  return (\n    <MenuTrigger\n      selectionMode=\"single\"\n      showCheckmark\n      selectedValue={selectedLayout}\n      onSelectionChange={newValue => setSelectedLayout(newValue as string)}\n    >\n      <Button startIcon={layoutConfig?.icon || <SortIcon />}>\n        {layoutConfig?.label ? (\n          <Trans {...layoutConfig.label} />\n        ) : (\n          <Trans message=\"Popularity\" />\n        )}\n      </Button>\n      <Menu>\n        {availableLayouts?.map(method => (\n          <MenuItem key={method.key} value={method.key}>\n            <Trans {...method.label} />\n          </MenuItem>\n        ))}\n      </Menu>\n    </MenuTrigger>\n  );\n}\n","import {User} from '@common/auth/user';\nimport React, {useContext} from 'react';\nimport {SiteConfigContext} from '@common/core/settings/site-config-context';\nimport {UserAvatar} from '@common/ui/images/user-avatar';\nimport {Trans} from '@common/i18n/trans';\nimport {Link} from 'react-router-dom';\n\ninterface Props {\n  user: User;\n}\nexport function UserListByline({user}: Props) {\n  const {auth} = useContext(SiteConfigContext);\n  return (\n    <div className=\"flex-shrink-0 flex items-center gap-8 mr-24\">\n      <UserAvatar user={user} circle size=\"sm\" />\n      <div>\n        <Trans\n          message=\"List by <a>:name</a>\"\n          values={{\n            a: () => (\n              <Link\n                to={auth.getUserProfileLink!(user)}\n                className=\"font-bold hover:underline\"\n              >\n                {user.display_name}\n              </Link>\n            ),\n          }}\n        />\n      </div>\n    </div>\n  );\n}\n","export type ShareableNetworks =\n  | 'facebook'\n  | 'twitter'\n  | 'pinterest'\n  | 'tumblr'\n  | 'blogger'\n  | 'mail';\n\nexport function shareLinkSocially(\n  network: ShareableNetworks,\n  link: string,\n  name?: string,\n  image?: string\n) {\n  const url = generateShareUrl(network, link, name, image);\n\n  if (network === 'mail') {\n    window.location.href = url;\n  } else {\n    openNewWindow(url);\n  }\n}\n\nfunction openNewWindow(url: string) {\n  const width = 575,\n    height = 400,\n    left = (window.innerWidth - width) / 2,\n    top = (window.innerHeight - height) / 2,\n    opts =\n      'status=1, scrollbars=1' +\n      ',width=' +\n      width +\n      ',height=' +\n      height +\n      ',top=' +\n      top +\n      ',left=' +\n      left;\n\n  window.open(url, 'share', opts);\n}\n\nfunction generateShareUrl(\n  type: ShareableNetworks,\n  link: string,\n  name?: string,\n  image?: string\n): string {\n  switch (type) {\n    case 'facebook':\n      return 'https://www.facebook.com/sharer/sharer.php?u=' + link;\n    case 'twitter':\n      return `https://twitter.com/intent/tweet?text=${name}&url=${link}`;\n    case 'pinterest':\n      return (\n        'https://pinterest.com/pin/create/button/?url=' +\n        link +\n        '&media=' +\n        image\n      );\n    case 'tumblr':\n      const base =\n        'https://www.tumblr.com/widgets/share/tool?shareSource=legacy&canonicalUrl=&posttype=photo&title=&caption=';\n      return base + name + '&content=' + image + '&url=' + link;\n    case 'blogger':\n      return (\n        'https://www.blogger.com/blog_this.pyra?t&u=' + link + '&n=' + name\n      );\n    case 'mail':\n      return `mailto:?subject=Check out this link.&body=${link}`;\n  }\n}\n","import {createSvgIcon} from '@common/icons/create-svg-icon';\n\nexport const CopyLinkIcon = createSvgIcon(\n  <path d=\"M 4 2 C 2.895 2 2 2.895 2 4 L 2 18 L 4 18 L 4 4 L 18 4 L 18 2 L 4 2 z M 8 6 C 6.895 6 6 6.895 6 8 L 6 20 C 6 21.105 6.895 22 8 22 L 20 22 C 21.105 22 22 21.105 22 20 L 22 8 C 22 6.895 21.105 6 20 6 L 8 6 z M 8 8 L 20 8 L 20 20 L 8 20 L 8 8 z M 16 9.0058594 C 15.230215 9.0058594 14.460443 9.2973698 13.878906 9.8789062 L 12.607422 11.150391 L 14.021484 12.564453 L 12.556641 14.029297 L 11.142578 12.615234 L 9.8789062 13.878906 C 8.7158332 15.041979 8.7158332 16.958021 9.8789062 18.121094 C 10.460397 18.702585 11.234094 19 12 19 C 12.765906 19 13.539603 18.702585 14.121094 18.121094 L 15.384766 16.857422 L 13.970703 15.443359 L 15.457031 13.957031 L 14.042969 12.542969 L 15.292969 11.292969 C 15.691896 10.894042 16.308104 10.894042 16.707031 11.292969 C 17.105958 11.691896 17.105958 12.308104 16.707031 12.707031 L 15.464844 13.949219 L 16.878906 15.363281 L 18.121094 14.121094 C 19.284167 12.958021 19.284167 11.041979 18.121094 9.8789062 C 17.539557 9.2973698 16.769785 9.0058594 16 9.0058594 z M 12.542969 14.042969 L 13.957031 15.457031 L 12.707031 16.707031 C 12.506522 16.90754 12.258094 17 12 17 C 11.741906 17 11.493478 16.90754 11.292969 16.707031 C 10.894042 16.308104 10.894042 15.691896 11.292969 15.292969 L 12.542969 14.042969 z\"></path>\n);\n","import {Menu, MenuTrigger} from '@common/ui/navigation/menu/menu-trigger';\nimport {Item} from '@common/ui/forms/listbox/item';\nimport {Trans} from '@common/i18n/trans';\nimport {FacebookIcon} from '@common/icons/social/facebook';\nimport {TwitterIcon} from '@common/icons/social/twitter';\nimport useClipboard from 'react-use-clipboard';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\nimport {shareLinkSocially} from '@common/utils/urls/share-link-socially';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {ReactElement} from 'react';\nimport {CopyLinkIcon} from '@app/sharing/copy-link-icon';\n\ninterface Props {\n  link: string;\n  children: ReactElement;\n}\nexport function ShareMenuTrigger({link, children}: Props) {\n  const {trans} = useTrans();\n  const [, setUrlCopied] = useClipboard(link);\n\n  return (\n    <MenuTrigger>\n      {children}\n      <Menu>\n        <Item\n          value=\"clipboard\"\n          startIcon={<CopyLinkIcon />}\n          onSelected={() => {\n            setUrlCopied();\n            toast.positive(message('Copied link to clipboard'));\n          }}\n        >\n          <Trans message=\"Copy to clipboard\" />\n        </Item>\n        <Item\n          value=\"facebook\"\n          startIcon={<FacebookIcon />}\n          onClick={() => {\n            shareLinkSocially(\n              'facebook',\n              link,\n              trans(message('Check out this link'))\n            );\n          }}\n        >\n          <Trans message=\"Share to facebook\" />\n        </Item>\n        <Item\n          value=\"twitter\"\n          startIcon={<TwitterIcon />}\n          onClick={() => {\n            shareLinkSocially(\n              'twitter',\n              link,\n              trans(message('Check out this link'))\n            );\n          }}\n        >\n          <Trans message=\"Share to twitter\" />\n        </Item>\n      </Menu>\n    </MenuTrigger>\n  );\n}\n","import React, {useMemo} from 'react';\nimport {\n  BaseMediaLink,\n  BaseMediaLinkProps,\n  getBaseMediaLink,\n} from '@app/base-media-link';\nimport {Channel} from '@common/channels/channel';\nimport {Trans} from '@common/i18n/trans';\n\ninterface Props extends Omit<BaseMediaLinkProps, 'link'> {\n  list: Channel;\n}\nexport function UserListLink({list, children, ...linkProps}: Props) {\n  const link = useMemo(() => {\n    return getUserListLink(list);\n  }, [list]);\n\n  let content;\n\n  if (children) {\n    content = children;\n  } else if (list.internal && list.name === 'watchlist') {\n    return <Trans message=\"Watchlist\" />;\n  } else {\n    content = list.name;\n  }\n\n  return (\n    <BaseMediaLink {...linkProps} link={link}>\n      {content}\n    </BaseMediaLink>\n  );\n}\n\ninterface Options {\n  absolute?: boolean;\n  season?: number | string;\n  episode?: number | string;\n}\n\nexport function getUserListLink(\n  list: Channel,\n  {absolute}: Options = {}\n): string {\n  return getBaseMediaLink(`/lists/${list.id}`, {\n    absolute,\n  });\n}\n","import {Trans} from '@common/i18n/trans';\nimport {FormattedRelativeTime} from '@common/i18n/formatted-relative-time';\nimport {LockIcon} from '@common/icons/material/Lock';\nimport React, {Fragment} from 'react';\nimport {LockOpenIcon} from '@common/icons/material/LockOpen';\nimport clsx from 'clsx';\nimport {Channel} from '@common/channels/channel';\nimport {Button} from '@common/ui/buttons/button';\nimport {ShareIcon} from '@common/icons/material/Share';\nimport {ShareMenuTrigger} from '@app/sharing/share-menu-trigger';\nimport {getUserListLink} from '@app/user-lists/user-list-link';\n\ninterface Props {\n  list: Channel;\n  className?: string;\n  showShareButton?: boolean;\n  showVisibility?: boolean;\n}\nexport function UserListDetails({\n  list,\n  className,\n  showShareButton,\n  showVisibility = true,\n}: Props) {\n  return (\n    <div\n      className={clsx(\n        'flex items-center flex-shrink-0 whitespace-nowrap text-muted gap-4',\n        className\n      )}\n    >\n      {showShareButton && (\n        <Fragment>\n          <ShareButton list={list} />\n          <Divider marginLeft=\"ml-2\" />\n        </Fragment>\n      )}\n      {list.items_count ? (\n        <Fragment>\n          <Trans message=\":count items\" values={{count: list.items_count}} />\n          <Divider />\n        </Fragment>\n      ) : null}\n      <span>\n        <Trans\n          message=\"Updated :date\"\n          values={{\n            date: <FormattedRelativeTime date={list.updated_at} />,\n          }}\n        />\n      </span>\n      {showVisibility && (\n        <Fragment>\n          <Divider />\n          {list.public ? <LockOpenIcon size=\"sm\" /> : <LockIcon size=\"sm\" />}\n          <div>\n            {list.public ? (\n              <Trans message=\"Public\" />\n            ) : (\n              <Trans message=\"Private\" />\n            )}\n          </div>\n        </Fragment>\n      )}\n    </div>\n  );\n}\n\ninterface ShareButtonProps {\n  list: Channel;\n}\nfunction ShareButton({list}: ShareButtonProps) {\n  const link = getUserListLink(list, {absolute: true});\n  return (\n    <ShareMenuTrigger link={link}>\n      <Button startIcon={<ShareIcon />} sizeClassName=\"px-10 py-6\">\n        <Trans message=\"Share\" />\n      </Button>\n    </ShareMenuTrigger>\n  );\n}\n\ninterface DividerProps {\n  marginLeft?: string;\n}\nfunction Divider({marginLeft = 'ml-12'}: DividerProps) {\n  return <div className={clsx('h-20 w-1 bg-divider mr-10', marginLeft)} />;\n}\n","import React, {Fragment, ReactNode} from 'react';\nimport clsx from 'clsx';\nimport {Channel} from '@common/channels/channel';\nimport {FilterList} from '@common/datatable/filters/filter-list/filter-list';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {opacityAnimation} from '@common/ui/animation/opacity-animation';\nimport {useBackendFilterUrlParams} from '@common/datatable/filters/backend-filter-url-params';\nimport {MOVIE_MODEL, SERIES_MODEL, TITLE_MODEL} from '@app/titles/models/title';\nimport {ChannelSortButton} from '@app/channels/channel-header/channel-sort-button';\nimport {AddFilterButton} from '@common/datatable/filters/add-filter-button';\nimport {TuneIcon} from '@common/icons/material/Tune';\nimport {SiteSectionHeading} from '@app/titles/site-section-heading';\nimport {Trans} from '@common/i18n/trans';\nimport {useParams} from 'react-router-dom';\nimport {ChannelLayoutButton} from '@app/channels/channel-header/channel-layout-button';\nimport {useTitleIndexFilters} from '@app/titles/use-title-index-filters';\nimport {FilterListSkeleton} from '@common/datatable/filters/filter-list/filter-list-skeleton';\nimport {UserListByline} from '@app/user-lists/user-list-byline';\nimport {UserListDetails} from '@app/user-lists/user-list-details';\n\nconst FilterModelTypes = [TITLE_MODEL, MOVIE_MODEL, SERIES_MODEL];\n\ninterface Props {\n  channel: Channel;\n  margin?: string;\n  isNested: boolean;\n  actions?: ReactNode;\n}\nexport function ChannelHeader({\n  channel,\n  isNested,\n  actions,\n  margin = isNested ? 'mb-16 md:mb-30' : 'mb-20 md:mb-40',\n}: Props) {\n  const shouldShowFilterButton =\n    !isNested &&\n    FilterModelTypes.includes(channel.config.contentModel) &&\n    channel.config.contentType === 'listAll';\n\n  const {encodedFilters} = useBackendFilterUrlParams();\n  const {filters, filtersLoading} = useTitleIndexFilters({\n    disabled: !shouldShowFilterButton,\n  });\n\n  if (channel.config.hideTitle) {\n    return null;\n  }\n\n  return (\n    <section className={clsx(margin)}>\n      <ChannelTitle\n        channel={channel}\n        isNested={isNested}\n        actions={\n          <Fragment>\n            {actions}\n            {!isNested && <ChannelSortButton channel={channel} />}\n            {shouldShowFilterButton && (\n              <AddFilterButton\n                icon={<TuneIcon />}\n                color={null}\n                variant=\"text\"\n                disabled={filtersLoading}\n                filters={filters}\n              />\n            )}\n            {!isNested && <ChannelLayoutButton channel={channel} />}\n          </Fragment>\n        }\n      />\n      {shouldShowFilterButton && (\n        <div className=\"mt-14\">\n          <AnimatePresence initial={false} mode=\"wait\">\n            {filtersLoading && encodedFilters ? (\n              <FilterListSkeleton />\n            ) : (\n              <m.div key=\"filter-list\" {...opacityAnimation}>\n                <FilterList filters={filters} />\n              </m.div>\n            )}\n          </AnimatePresence>\n        </div>\n      )}\n    </section>\n  );\n}\n\ninterface ChannelTitleProps {\n  channel: Channel;\n  isNested: boolean;\n  actions?: ReactNode;\n}\nfunction ChannelTitle({channel, isNested, actions}: ChannelTitleProps) {\n  const {restriction: urlParam} = useParams();\n  if (channel.config.hideTitle) {\n    return null;\n  }\n\n  const link =\n    channel.config.restriction && urlParam\n      ? `/channel/${channel.slug}/${urlParam}`\n      : `/channel/${channel.slug}`;\n\n  return (\n    <SiteSectionHeading\n      className=\"flex-auto\"\n      margin=\"m-0\"\n      description={<ChannelDescription channel={channel} />}\n      actions={actions}\n      headingType={isNested ? 'h2' : 'h1'}\n      descriptionFontSize={isNested ? 'text-sm' : undefined}\n      fontWeight={isNested ? 'font-normal' : undefined}\n      link={isNested ? link : undefined}\n    >\n      <Trans message={channel.name} />\n    </SiteSectionHeading>\n  );\n}\n\ninterface ChannelDescriptionProps {\n  channel: Channel;\n}\nfunction ChannelDescription({channel}: ChannelDescriptionProps) {\n  if (channel.type === 'channel') {\n    return <Fragment>{channel.description}</Fragment>;\n  }\n\n  return (\n    <div className=\"mt-18 items-center text-sm md:flex\">\n      {channel.user && <UserListByline user={channel.user} />}\n      <UserListDetails\n        list={channel}\n        className=\"ml-auto max-md:mt-14\"\n        showShareButton\n      />\n    </div>\n  );\n}\n","import {ReactNode} from 'react';\nimport clsx from 'clsx';\n\nexport interface ContentGridProps {\n  className?: string;\n  children: ReactNode;\n  variant?: 'portrait' | 'landscape';\n}\nexport function ContentGridLayout({\n  children,\n  className,\n  variant,\n}: ContentGridProps) {\n  return (\n    <div\n      className={clsx(\n        'grid grid-cols-[repeat(var(--nVisibleItems),minmax(0,1fr))] gap-24',\n        className,\n        variant === 'landscape'\n          ? 'content-grid-landscape'\n          : 'content-grid-portrait'\n      )}\n    >\n      {children}\n    </div>\n  );\n}\n","import {Person} from '@app/titles/models/person';\nimport {FormattedDateTimeRange} from '@common/i18n/formatted-date-time-range';\nimport {Fragment, memo} from 'react';\n\ninterface Props {\n  person: Person;\n}\nexport const PersonAge = memo(({person}: Props) => {\n  if (person.birth_date && person.death_date) {\n    return (\n      <FormattedDateTimeRange\n        start={person.birth_date}\n        end={person.death_date}\n        options={{year: 'numeric'}}\n      />\n    );\n  }\n\n  if (person.birth_date) {\n    return <Fragment>{calculateAgeFromBirthDate(person.birth_date)}</Fragment>;\n  }\n\n  return null;\n});\n\nfunction calculateAgeFromBirthDate(date: string): number {\n  const today = new Date();\n  const birthDate = new Date(date);\n  let age = today.getFullYear() - birthDate.getFullYear();\n  const m = today.getMonth() - birthDate.getMonth();\n  if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {\n    age--;\n  }\n  return age;\n}\n","import {NewsArticleImage} from '@app/news/news-article-image';\nimport {NewsArticleLink} from '@app/news/news-article-link';\nimport {BulletSeparatedItems} from '@app/titles/bullet-separated-items';\nimport {FormattedDate} from '@common/i18n/formatted-date';\nimport {NewsArticle} from '@app/titles/models/news-article';\n\ninterface Props {\n  article: NewsArticle;\n}\nexport function NewsArticleGridItem({article}: Props) {\n  return (\n    <div className=\"flex items-start gap-14\">\n      <NewsArticleImage article={article} className=\"aspect-poster max-w-90\" />\n      <div className=\"mt-6 text-base min-w-0 overflow-hidden overflow-ellipsis\">\n        <NewsArticleLink article={article} className=\"font-medium\" />\n        <BulletSeparatedItems className=\"text-xs mt-10 min-w-0 overflow-hidden overflow-ellipsis\">\n          <FormattedDate date={article.created_at} />\n          <div className=\"whitespace-nowrap overflow-hidden overflow-ellipsis\">\n            {article.source}\n          </div>\n        </BulletSeparatedItems>\n      </div>\n    </div>\n  );\n}\n","import {Title} from '@app/titles/models/title';\nimport {TitlePoster} from '@app/titles/title-poster/title-poster';\nimport {TitleRating} from '@app/reviews/title-rating';\nimport {TitleLink} from '@app/titles/title-link';\nimport {ReactNode} from 'react';\nimport {TitleBackdrop} from '@app/titles/title-poster/title-backdrop';\nimport {BulletSeparatedItems} from '@app/titles/bullet-separated-items';\nimport {FormattedDate} from '@common/i18n/formatted-date';\n\nexport interface TitlePortraitGridItemProps {\n  item: Title;\n  rating?: number;\n  description?: ReactNode;\n}\nexport function TitlePortraitGridItem({\n  item,\n  rating,\n  description,\n}: TitlePortraitGridItemProps) {\n  return (\n    <div>\n      <div className=\"relative\">\n        <TitlePoster title={item} srcSize=\"md\" showPlayButton />\n      </div>\n      <div className=\"mt-10 text-sm\">\n        <RatingOrReleaseDate title={item} rating={rating} className=\"mb-4\" />\n        <TitleLink title={item} className=\"block font-medium text-base\" />\n        {description ? <div className=\"mt-4\">{description}</div> : null}\n      </div>\n    </div>\n  );\n}\n\nexport function TitleLandscapeGridItem({item}: TitlePortraitGridItemProps) {\n  return (\n    <div className=\"\">\n      <TitleBackdrop\n        title={item}\n        srcSize=\"lg\"\n        size=\"w-full\"\n        className=\"rounded\"\n        wrapWithLink\n        showPlayButton\n      />\n      <div className=\"mt-10 text-sm\">\n        <TitleLink\n          title={item}\n          className=\"block font-semibold text-base mb-4\"\n        />\n        <BulletSeparatedItems className=\"mb-4\">\n          {item.release_date && <FormattedDate date={item.release_date} />}\n          {item.certification && (\n            <div className=\"uppercase\">{item.certification}</div>\n          )}\n        </BulletSeparatedItems>\n        <TitleRating score={item.rating} className=\"mb-4\" />\n      </div>\n    </div>\n  );\n}\n\ninterface RatingOrReleaseDateProps {\n  title: Title;\n  rating?: number;\n  className?: string;\n}\nfunction RatingOrReleaseDate({\n  title,\n  rating,\n  className,\n}: RatingOrReleaseDateProps) {\n  if (!rating) {\n    rating = title.rating;\n  }\n  if (rating) {\n    return <TitleRating score={rating} className={className} />;\n  }\n  if (title.release_date) {\n    return (\n      <div className={className}>\n        <FormattedDate date={title.release_date} />\n      </div>\n    );\n  }\n  return null;\n}\n","import {TITLE_MODEL} from '@app/titles/models/title';\nimport {ChannelContentModel} from '@app/admin/channels/channel-content-config';\nimport {NEWS_ARTICLE_MODEL} from '@app/titles/models/news-article';\nimport {ContentGridProps} from '@app/channels/content-grid/content-grid-layout';\nimport {Person, PERSON_MODEL} from '@app/titles/models/person';\nimport {PersonPoster} from '@app/people/person-poster/person-poster';\nimport {PersonLink} from '@app/people/person-link';\nimport {PersonAge} from '@app/people/person-age';\nimport {NewsArticleGridItem} from '@app/news/news-article-grid-item';\nimport {\n  TitleLandscapeGridItem,\n  TitlePortraitGridItem,\n} from '@app/channels/content-grid/title-grid-item';\n\ninterface Props {\n  item: ChannelContentModel;\n  variant?: ContentGridProps['variant'];\n}\nexport function ChannelContentGridItem({item, variant}: Props) {\n  switch (item.model_type) {\n    case TITLE_MODEL:\n      return variant === 'landscape' ? (\n        <TitleLandscapeGridItem item={item} />\n      ) : (\n        <TitlePortraitGridItem item={item} />\n      );\n    case PERSON_MODEL:\n      return <PersonGridItem item={item} />;\n    case NEWS_ARTICLE_MODEL:\n      return <NewsArticleGridItem article={item} />;\n    default:\n      return null;\n  }\n}\n\ninterface PersonGridItemProps {\n  item: Person;\n}\nfunction PersonGridItem({item}: PersonGridItemProps) {\n  return (\n    <div>\n      <PersonPoster person={item} srcSize=\"md\" size=\"w-full\" rounded />\n      <div className=\"mt-10 text-sm text-center\">\n        <PersonLink person={item} className=\"block font-medium text-base\" />\n        <div>\n          <PersonAge person={item} />\n        </div>\n      </div>\n    </div>\n  );\n}\n","import {hashQueryKey, useQuery} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {Channel, ChannelContentItem} from '@common/channels/channel';\nimport {\n  channelEndpoint,\n  channelQueryKey,\n} from '@common/channels/requests/use-channel';\nimport {PaginatedBackendResponse} from '@common/http/backend-response/pagination-response';\nimport {useRef} from 'react';\nimport {useChannelQueryParams} from '@common/channels/use-channel-query-params';\n\ninterface Response<T extends ChannelContentItem = ChannelContentItem>\n  extends PaginatedBackendResponse<T> {}\n\nexport function useChannelContent<\n  T extends ChannelContentItem = ChannelContentItem\n>(channel: Channel<T>) {\n  const queryParams = useChannelQueryParams(channel);\n  const queryKey = channelQueryKey(channel.id, queryParams);\n  const initialQueryKey = useRef(hashQueryKey(queryKey)).current;\n\n  return useQuery(\n    channelQueryKey(channel.id, queryParams),\n    () => fetchChannelContent<T>(channel.id, queryParams),\n    {\n      keepPreviousData: true,\n      initialData: () => {\n        if (hashQueryKey(queryKey) === initialQueryKey) {\n          return channel.content?.data;\n        }\n        return undefined;\n      },\n    }\n  );\n}\n\nfunction fetchChannelContent<T extends ChannelContentItem = ChannelContentItem>(\n  slugOrId: number | string,\n  params: any\n) {\n  return apiClient\n    .get<Response<T>>(channelEndpoint(slugOrId), {\n      params: {\n        ...params,\n        paginate: 'simple',\n        returnContentOnly: 'true',\n      },\n    })\n    .then(response => response.data.pagination.data);\n}\n","import {InfiniteScrollSentinel} from '@common/ui/infinite-scroll/infinite-scroll-sentinel';\nimport React, {Fragment} from 'react';\nimport {ChannelContentProps} from '@app/channels/channel-content';\nimport {usePaginatedChannelContent} from '@common/channels/requests/use-paginated-channel-content';\nimport {ChannelHeader} from '@app/channels/channel-header/channel-header';\nimport {\n  ContentGridLayout,\n  ContentGridProps,\n} from '@app/channels/content-grid/content-grid-layout';\nimport {ChannelContentGridItem} from '@app/channels/content-grid/channel-content-grid-item';\nimport {ChannelContentModel} from '@app/admin/channels/channel-content-config';\nimport {useChannelContent} from '@common/channels/requests/use-channel-content';\nimport clsx from 'clsx';\n\ninterface ChannelContentGridProps extends ChannelContentProps {\n  variant?: ContentGridProps['variant'];\n}\nexport function ChannelContentGrid(props: ChannelContentGridProps) {\n  return (\n    <Fragment>\n      <ChannelHeader {...props} />\n      {props.isNested || props.channel.config.contentType !== 'listAll' ? (\n        <SimpleGrid {...props} />\n      ) : (\n        <PaginatedGrid {...props} />\n      )}\n    </Fragment>\n  );\n}\n\nfunction PaginatedGrid({channel, variant}: ChannelContentGridProps) {\n  const query = usePaginatedChannelContent<ChannelContentModel>(channel);\n  return (\n    <div\n      className={clsx('transition-opacity', query.isReloading && 'opacity-70')}\n    >\n      <ContentGrid content={query.items} variant={variant} />\n      <InfiniteScrollSentinel query={query} />\n    </div>\n  );\n}\n\nfunction SimpleGrid({channel, variant}: ChannelContentGridProps) {\n  const {data} = useChannelContent(channel);\n  return <ContentGrid content={data} variant={variant} />;\n}\n\ninterface ContentProps {\n  content: ChannelContentModel[] | undefined;\n  variant: ContentGridProps['variant'];\n}\nexport function ContentGrid({content = [], variant}: ContentProps) {\n  return (\n    <ContentGridLayout variant={variant}>\n      {content.map(item => (\n        <ChannelContentGridItem\n          key={`${item.id}-${item.model_type}`}\n          item={item}\n          variant={variant}\n        />\n      ))}\n    </ContentGridLayout>\n  );\n}\n","var functionDebounce = debounce;\n\nfunction debounce(fn, wait, callFirst) {\n  var timeout = null;\n  var debouncedFn = null;\n\n  var clear = function() {\n    if (timeout) {\n      clearTimeout(timeout);\n\n      debouncedFn = null;\n      timeout = null;\n    }\n  };\n\n  var flush = function() {\n    var call = debouncedFn;\n    clear();\n\n    if (call) {\n      call();\n    }\n  };\n\n  var debounceWrapper = function() {\n    if (!wait) {\n      return fn.apply(this, arguments);\n    }\n\n    var context = this;\n    var args = arguments;\n    var callNow = callFirst && !timeout;\n    clear();\n\n    debouncedFn = function() {\n      fn.apply(context, args);\n    };\n\n    timeout = setTimeout(function() {\n      timeout = null;\n\n      if (!callNow) {\n        var call = debouncedFn;\n        debouncedFn = null;\n\n        return call();\n      }\n    }, wait);\n\n    if (callNow) {\n      return debouncedFn();\n    }\n  };\n\n  debounceWrapper.cancel = clear;\n  debounceWrapper.flush = flush;\n\n  return debounceWrapper;\n}\n\nexport {functionDebounce as default};\n","import {useCallback, useEffect, useLayoutEffect, useRef, useState} from 'react';\nimport debounce from 'just-debounce-it';\n\ninterface Options {\n  rotate?: boolean;\n}\n\nconst containerClassName =\n  'content-carousel content-grid relative w-full grid grid-flow-col grid-rows-[auto] overflow-x-auto overflow-y-hidden gap-24 snap-always snap-x snap-mandatory hidden-scrollbar scroll-smooth';\nconst itemClassName = 'snap-start snap-normal';\n\nexport function useCarousel({rotate = false}: Options = {}) {\n  const scrollContainerRef = useRef<HTMLDivElement>(null);\n  const itemWidth = useRef<number>(0);\n  const perPage = useRef<number>(5);\n\n  const [canScrollBackward, setCanScrollBackward] = useState(rotate);\n  const [canScrollForward, setCanScrollForward] = useState(true);\n  const [activePage, setActivePage] = useState(0);\n\n  const updateNavStatus = useCallback(() => {\n    const el = scrollContainerRef.current;\n    if (el && itemWidth.current) {\n      if (!rotate) {\n        setCanScrollForward(\n          el.scrollWidth - 1 > el.scrollLeft + el.clientWidth\n        );\n        setCanScrollBackward(el.scrollLeft > 0);\n      }\n      const pageWidth = el.clientWidth;\n      const activePage = Math.round(el.scrollLeft / pageWidth);\n      setActivePage(activePage);\n    }\n  }, [rotate]);\n\n  // enable/disable navigation buttons based on element scroll offset\n  useEffect(() => {\n    const el = scrollContainerRef.current;\n    const handleScroll = debounce(() => updateNavStatus(), 100);\n    if (el) {\n      el.addEventListener('scroll', handleScroll);\n    }\n    return () => el?.removeEventListener('scroll', handleScroll);\n  }, [updateNavStatus]);\n\n  // get width for first grid item\n  useLayoutEffect(() => {\n    const el = scrollContainerRef.current;\n    if (el) {\n      perPage.current = Number(\n        getComputedStyle(el).getPropertyValue('--nVisibleItems')\n      );\n      const firstGridItem = el.children.item(0);\n      const observer = new ResizeObserver(entries => {\n        itemWidth.current = entries[0].contentRect.width;\n        updateNavStatus();\n      });\n      if (firstGridItem) {\n        observer.observe(firstGridItem);\n      }\n      return () => observer.unobserve(el);\n    }\n  }, [updateNavStatus]);\n\n  const scrollToIndex = useCallback((index: number) => {\n    if (scrollContainerRef.current) {\n      setActivePage(index);\n      const amount = itemWidth.current * index;\n      scrollContainerRef.current.scrollTo({left: amount});\n    }\n  }, []);\n\n  const scrollToPreviousPage = useCallback(() => {\n    if (scrollContainerRef.current) {\n      const pageWidth = scrollContainerRef.current.clientWidth;\n      const currentScroll = scrollContainerRef.current.scrollLeft;\n      const scrollLeft =\n        !currentScroll && rotate\n          ? scrollContainerRef.current.scrollWidth - pageWidth\n          : currentScroll - pageWidth;\n      scrollContainerRef.current.scrollTo({\n        left: scrollLeft,\n      });\n    }\n  }, [rotate]);\n\n  const scrollToNextPage = useCallback(() => {\n    if (scrollContainerRef.current) {\n      const pageWidth = scrollContainerRef.current.clientWidth;\n      const currentScroll = scrollContainerRef.current.scrollLeft;\n      const scrollLeft =\n        rotate &&\n        currentScroll + pageWidth >= scrollContainerRef.current.scrollWidth\n          ? 0\n          : (activePage + 1) * pageWidth;\n      scrollContainerRef.current.scrollTo({left: scrollLeft});\n    }\n  }, [activePage, rotate]);\n\n  return {\n    scrollContainerRef,\n    scrollToIndex,\n    scrollToPreviousPage,\n    scrollToNextPage,\n    canScrollForward,\n    canScrollBackward,\n    activePage,\n    containerClassName,\n    itemClassName,\n  };\n}\n","import React, {Fragment} from 'react';\nimport {ChannelContentProps} from '@app/channels/channel-content';\nimport {ChannelHeader} from '@app/channels/channel-header/channel-header';\nimport {ChannelContentGridItem} from '@app/channels/content-grid/channel-content-grid-item';\nimport {useCarousel} from '@app/channels/carousel/use-carousel';\nimport clsx from 'clsx';\nimport {ContentGridProps} from '@app/channels/content-grid/content-grid-layout';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {KeyboardArrowLeftIcon} from '@common/icons/material/KeyboardArrowLeft';\nimport {KeyboardArrowRightIcon} from '@common/icons/material/KeyboardArrowRight';\n\ninterface Props extends ChannelContentProps {\n  variant?: ContentGridProps['variant'];\n}\nexport function ChannelContentCarousel(props: Props) {\n  const {channel, variant} = props;\n  const {\n    scrollContainerRef,\n    canScrollForward,\n    canScrollBackward,\n    scrollToPreviousPage,\n    scrollToNextPage,\n    containerClassName,\n    itemClassName,\n  } = useCarousel();\n\n  return (\n    <div>\n      <ChannelHeader\n        {...props}\n        actions={\n          <Fragment>\n            <IconButton\n              disabled={!canScrollBackward}\n              onClick={() => scrollToPreviousPage()}\n            >\n              <KeyboardArrowLeftIcon />\n            </IconButton>\n            <IconButton\n              disabled={!canScrollForward}\n              onClick={() => scrollToNextPage()}\n            >\n              <KeyboardArrowRightIcon />\n            </IconButton>\n          </Fragment>\n        }\n      />\n      <div\n        ref={scrollContainerRef}\n        className={clsx(\n          containerClassName,\n          variant === 'landscape'\n            ? 'content-grid-landscape'\n            : 'content-grid-portrait'\n        )}\n      >\n        {channel.content?.data.map(item => (\n          <div className={itemClassName} key={`${item.id}-${item.model_type}`}>\n            <ChannelContentGridItem item={item} variant={variant} />\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n","import {ChannelContentProps} from '@app/channels/channel-content';\nimport React, {Fragment} from 'react';\nimport {useCarousel} from '@app/channels/carousel/use-carousel';\nimport {Title} from '@app/titles/models/title';\nimport {TitleRating} from '@app/reviews/title-rating';\nimport {Button} from '@common/ui/buttons/button';\nimport {Trans} from '@common/i18n/trans';\nimport {MediaPlayIcon} from '@common/icons/media/media-play';\nimport {TitleLink} from '@app/titles/title-link';\nimport {TitleBackdrop} from '@app/titles/title-poster/title-backdrop';\nimport {TitlePoster} from '@app/titles/title-poster/title-poster';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {ChevronLeftIcon} from '@common/icons/material/ChevronLeft';\nimport {ChevronRightIcon} from '@common/icons/material/ChevronRight';\nimport {ChannelHeader} from '@app/channels/channel-header/channel-header';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {Link} from 'react-router-dom';\nimport {getWatchLink} from '@app/videos/watch-page/get-watch-link';\nimport {useChannelContent} from '@common/channels/requests/use-channel-content';\nimport {Channel, ChannelContentItem} from '@common/channels/channel';\n\nexport function ChannelContentSlider({\n  channel,\n  isNested,\n}: ChannelContentProps<Title>) {\n  const {\n    scrollContainerRef,\n    activePage,\n    canScrollBackward,\n    canScrollForward,\n    scrollToNextPage,\n    scrollToPreviousPage,\n  } = useCarousel({rotate: true});\n  const {data} = useChannelContent<ChannelContentItem<Title>>(channel);\n  const titles = data || [];\n\n  return (\n    <Fragment>\n      <ChannelHeader\n        channel={channel as Channel}\n        isNested={isNested}\n        margin=\"mb-18\"\n      />\n      <div className=\"flex gap-24\">\n        <div className=\"relative flex-auto\">\n          <div\n            ref={scrollContainerRef}\n            className=\"hidden-scrollbar flex h-full select-none snap-x snap-mandatory snap-always items-center overflow-x-auto\"\n          >\n            {titles.map(item => (\n              <Slide key={item.id} item={item} />\n            ))}\n          </div>\n          <div className=\"absolute top-[170px] z-20 w-full\">\n            <div className=\"absolute left-14\">\n              <IconButton\n                variant=\"outline\"\n                radius=\"rounded\"\n                size=\"lg\"\n                color=\"white\"\n                disabled={!canScrollBackward}\n                onClick={() => scrollToPreviousPage()}\n              >\n                <ChevronLeftIcon />\n              </IconButton>\n            </div>\n            <div className=\"absolute right-14\">\n              <IconButton\n                variant=\"outline\"\n                radius=\"rounded\"\n                size=\"lg\"\n                color=\"white\"\n                disabled={!canScrollForward}\n                onClick={() => scrollToNextPage()}\n              >\n                <ChevronRightIcon />\n              </IconButton>\n            </div>\n          </div>\n        </div>\n        <UpNext titles={titles} activePage={activePage} />\n      </div>\n    </Fragment>\n  );\n}\n\ninterface SlideProps {\n  item: Title;\n}\nfunction Slide({item}: SlideProps) {\n  return (\n    <div className=\"relative h-full w-full flex-shrink-0 snap-start snap-normal overflow-hidden rounded\">\n      <TitleBackdrop title={item} size=\"h-full\" />\n      <div className=\"absolute inset-0 isolate flex h-full w-full items-end justify-start gap-24 rounded p-30 text-white\">\n        <div className=\"absolute bottom-0 left-0 h-3/4 w-full bg-gradient-to-t from-black/100\" />\n        <TitlePoster\n          title={item}\n          size=\"max-h-320\"\n          srcSize=\"md\"\n          className=\"z-10 shadow-md\"\n        />\n        <div className=\"z-10 max-w-620 text-lg\">\n          <TitleRating score={item.rating} />\n          <div className=\"my-8 text-5xl\">\n            <TitleLink title={item} />\n          </div>\n          <p>{item.description.slice(0, 200)}</p>\n          {item.primary_video && (\n            <Button\n              variant=\"flat\"\n              color=\"primary\"\n              startIcon={<MediaPlayIcon />}\n              radius=\"rounded-full\"\n              className=\"mt-24 min-h-42 min-w-144\"\n              elementType={Link}\n              to={getWatchLink(item.primary_video)}\n            >\n              {item.primary_video.category === 'full' ? (\n                <Trans message=\"Watch now\" />\n              ) : (\n                <Trans message=\"Play trailer\" />\n              )}\n            </Button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\ninterface UpNextProps {\n  titles: Title[];\n  activePage: number;\n}\nfunction UpNext({titles, activePage}: UpNextProps) {\n  const itemCount = titles.length;\n  const start = activePage + 1;\n  const end = start + 3;\n  const items = titles.slice(start, end);\n  if (end > itemCount) {\n    items.push(...titles.slice(0, end - itemCount));\n  }\n\n  return (\n    <AnimatePresence initial={false} mode=\"wait\">\n      <div className=\"w-1/4 max-w-200 flex-shrink-0\">\n        <div className=\"mb-12 text-lg font-semibold\">\n          <Trans message=\"Up next\" />\n        </div>\n        <div className=\"flex flex-col gap-24\">\n          {items.map(item => (\n            <m.div\n              key={item.id}\n              className=\"relative flex-auto\"\n              initial={{opacity: 0}}\n              animate={{opacity: 1}}\n              exit={{opacity: 0}}\n              transition={{duration: 0.2}}\n            >\n              <TitleBackdrop\n                title={item}\n                className=\"mb-6 rounded\"\n                size=\"w-full\"\n                srcSize=\"md\"\n                wrapWithLink\n                showPlayButton\n              />\n              <div className=\"mb-2 overflow-hidden overflow-ellipsis whitespace-nowrap text-sm\">\n                <TitleLink title={item} className=\"text-base font-medium\" />\n              </div>\n              <div>\n                <TitleRating score={item.rating} className=\"text-sm\" />\n              </div>\n            </m.div>\n          ))}\n        </div>\n      </div>\n    </AnimatePresence>\n  );\n}\n","import {NewsArticle} from '@app/titles/models/news-article';\nimport clsx from 'clsx';\nimport {OpenInNewIcon} from '@common/icons/material/OpenInNew';\nimport {LinkStyle} from '@common/ui/buttons/external-link';\nimport React from 'react';\n\ninterface SourceLinkProps {\n  article: NewsArticle;\n  className?: string;\n}\nexport function NewsArticleSourceLink({article, className}: SourceLinkProps) {\n  return (\n    <div className={clsx('flex items-center gap-4 text-primary', className)}>\n      <OpenInNewIcon size=\"xs\" className=\"flex-shrink-0\" />\n      <a\n        href={article.source_url}\n        target=\"_blank\"\n        rel=\"noreferrer\"\n        className={clsx(\n          LinkStyle,\n          'whitespace-nowrap overflow-hidden overflow-ellipsis'\n        )}\n      >\n        {article.source}\n      </a>\n    </div>\n  );\n}\n","import {Trans} from '@common/i18n/trans';\nimport React from 'react';\nimport {NewsArticle} from '@app/titles/models/news-article';\n\ninterface Props {\n  article: NewsArticle;\n}\nexport function NewsArticleByline({article}: Props) {\n  return article.byline ? (\n    <span className=\"whitespace-nowrap\">\n      <Trans message=\"By :name\" values={{name: article.byline}} />\n    </span>\n  ) : null;\n}\n","import {ChannelContentProps} from '@app/channels/channel-content';\nimport React from 'react';\nimport {NewsArticle} from '@app/titles/models/news-article';\nimport {BulletSeparatedItems} from '@app/titles/bullet-separated-items';\nimport {ChannelHeader} from '@app/channels/channel-header/channel-header';\nimport {NewsArticleImage} from '@app/news/news-article-image';\nimport {NewsArticleLink} from '@app/news/news-article-link';\nimport {FormattedDate} from '@common/i18n/formatted-date';\nimport {NewsArticleSourceLink} from '@app/news/news-article-source-link';\nimport {NewsArticleByline} from '@app/news/news-article-byline';\nimport {useChannelContent} from '@common/channels/requests/use-channel-content';\nimport {Channel, ChannelContentItem} from '@common/channels/channel';\n\nexport function ChannelContentNews({\n  channel,\n  isNested,\n}: ChannelContentProps<NewsArticle>) {\n  const {data} = useChannelContent<ChannelContentItem<NewsArticle>>(channel);\n\n  return (\n    <div>\n      <ChannelHeader channel={channel as Channel} isNested={isNested} />\n      <div className=\"flex gap-34\">\n        <div className=\"w-240 flex-shrink-0\">\n          {data?.slice(0, 3).map(article => (\n            <LeftColArticle\n              key={article.id}\n              article={article}\n              className=\"mb-14\"\n            />\n          ))}\n        </div>\n        <div className=\"flex-auto\">\n          {data?.slice(2, 10).map(article => (\n            <div key={article.id} className=\"mb-12 flex items-center gap-14\">\n              <NewsArticleImage article={article} size=\"w-84 h-84\" />\n              <div className=\"flex-auto\">\n                <NewsArticleLink article={article} className=\"font-semibold\" />\n                <BulletSeparatedItems className=\"text-sm\">\n                  <FormattedDate date={article.created_at} />\n                  <NewsArticleByline article={article} />\n                  <NewsArticleSourceLink article={article} />\n                </BulletSeparatedItems>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n\ninterface LeftColArticleProps {\n  article: NewsArticle;\n  className?: string;\n}\nfunction LeftColArticle({article, className}: LeftColArticleProps) {\n  return (\n    <div className={className}>\n      <NewsArticleImage article={article} size=\"aspect-video w-full\" />\n      <NewsArticleLink\n        article={article}\n        className=\"mt-10 block text-sm font-semibold\"\n      />\n      <div className=\"mt-8 text-xs text-muted\">\n        <NewsArticleByline article={article} />\n        <NewsArticleSourceLink article={article} className=\"mt-4\" />\n      </div>\n    </div>\n  );\n}\n","import {TITLE_MODEL} from '@app/titles/models/title';\nimport {TitlePoster} from '@app/titles/title-poster/title-poster';\nimport {TitleLink} from '@app/titles/title-link';\nimport {ChannelContentModel} from '@app/admin/channels/channel-content-config';\nimport {NEWS_ARTICLE_MODEL} from '@app/titles/models/news-article';\nimport {NewsArticleImage} from '@app/news/news-article-image';\nimport {NewsArticleLink} from '@app/news/news-article-link';\nimport {BulletSeparatedItems} from '@app/titles/bullet-separated-items';\nimport {FormattedDate} from '@common/i18n/formatted-date';\nimport {NewsArticleSourceLink} from '@app/news/news-article-source-link';\nimport {PERSON_MODEL} from '@app/titles/models/person';\nimport {PersonPoster} from '@app/people/person-poster/person-poster';\nimport {PersonLink} from '@app/people/person-link';\nimport {KnownForCompact} from '@app/people/known-for-compact';\nimport React from 'react';\nimport {FormattedDuration} from '@common/i18n/formatted-duration';\nimport {InteractableRating} from '@app/reviews/interactable-rating';\n\ninterface Props {\n  item: ChannelContentModel;\n}\nexport function ChannelContentListItem({item}: Props) {\n  switch (item.model_type) {\n    case TITLE_MODEL:\n      return (\n        <div className=\"flex items-start gap-24 mb-24\">\n          <TitlePoster title={item} srcSize=\"md\" size=\"w-128\" showPlayButton />\n          <div className=\"flex-auto min-w-0 pt-12\">\n            <TitleLink title={item} className=\"font-medium\" />\n            <BulletSeparatedItems className=\"text-sm mt-4\">\n              {item.runtime ? (\n                <FormattedDuration minutes={item.runtime} verbose />\n              ) : null}\n              {item.certification && (\n                <span className=\"uppercase\">{item.certification}</span>\n              )}\n            </BulletSeparatedItems>\n            {item.rating && item.status !== 'upcoming' ? (\n              <InteractableRating size=\"md\" title={item} className=\"my-12\" />\n            ) : (\n              <div className=\"my-12\">\n                <FormattedDate date={item.release_date} />\n              </div>\n            )}\n            {item.description ? (\n              <p className=\"text-sm\">{item.description}</p>\n            ) : null}\n          </div>\n        </div>\n      );\n    case PERSON_MODEL:\n      return (\n        <div className=\"flex items-start gap-24 mb-24\">\n          <PersonPoster person={item} srcSize=\"md\" size=\"w-128\" />\n          <div className=\"flex-auto min-w-0 pt-12\">\n            <PersonLink person={item} className=\"block font-medium text-lg\" />\n            {item.primary_credit ? (\n              <div className=\"text-sm mt-4\">\n                <KnownForCompact person={item} />\n              </div>\n            ) : null}\n            <p className=\"text-sm mt-12\">{item.description}</p>\n          </div>\n        </div>\n      );\n    case NEWS_ARTICLE_MODEL:\n      return (\n        <div className=\"flex items-start gap-14 mb-44\">\n          <NewsArticleImage article={item} className=\"aspect-poster max-w-90\" />\n          <div className=\"mt-6 text-base\">\n            <NewsArticleLink article={item} className=\"font-medium\" />\n            <p className=\"text-sm mt-10\">{item.body}</p>\n            <BulletSeparatedItems className=\"text-xs mt-10\">\n              <FormattedDate date={item.created_at} />\n              <NewsArticleSourceLink article={item} />\n            </BulletSeparatedItems>\n          </div>\n        </div>\n      );\n    default:\n      return null;\n  }\n}\n","import {InfiniteScrollSentinel} from '@common/ui/infinite-scroll/infinite-scroll-sentinel';\nimport React, {Fragment, ReactNode} from 'react';\nimport {ChannelContentProps} from '@app/channels/channel-content';\nimport {usePaginatedChannelContent} from '@common/channels/requests/use-paginated-channel-content';\nimport {ChannelHeader} from '@app/channels/channel-header/channel-header';\nimport {ChannelContentModel} from '@app/admin/channels/channel-content-config';\nimport {ChannelContentListItem} from '@app/channels/channel-content-list-item';\nimport {useChannelContent} from '@common/channels/requests/use-channel-content';\nimport clsx from 'clsx';\n\nexport function ChannelContentList(props: ChannelContentProps) {\n  return (\n    <Fragment>\n      <ChannelHeader {...props} />\n      {props.isNested || props.channel.config.contentType !== 'listAll' ? (\n        <SimpleList {...props} />\n      ) : (\n        <PaginatedList {...props} />\n      )}\n    </Fragment>\n  );\n}\n\nfunction SimpleList({channel}: ChannelContentProps) {\n  const {data} = useChannelContent<ChannelContentModel>(channel);\n  return <Content content={data} />;\n}\n\nfunction PaginatedList({channel}: ChannelContentProps) {\n  const query = usePaginatedChannelContent<ChannelContentModel>(channel);\n  return (\n    <Content\n      content={query.items}\n      className={clsx('transition-opacity', query.isReloading && 'opacity-70')}\n    >\n      <InfiniteScrollSentinel query={query} />\n    </Content>\n  );\n}\n\ninterface ContentProps {\n  content: ChannelContentModel[] | undefined;\n  children?: ReactNode;\n  className?: string;\n}\nfunction Content({content = [], children, className}: ContentProps) {\n  return (\n    <div className={className}>\n      {content.map(item => (\n        <ChannelContentListItem\n          key={`${item.id}-${item.model_type}`}\n          item={item}\n        />\n      ))}\n      {children}\n    </div>\n  );\n}\n","import React, {Fragment} from 'react';\nimport {Channel, CHANNEL_MODEL} from '@common/channels/channel';\nimport {ChannelContentGrid} from '@app/channels/content-grid/channel-content-grid';\nimport {ChannelHeader} from '@app/channels/channel-header/channel-header';\nimport {\n  ChannelContentModel,\n  Layout,\n} from '@app/admin/channels/channel-content-config';\nimport {ChannelContentCarousel} from '@app/channels/carousel/channel-content-carousel';\nimport {ChannelContentSlider} from '@app/channels/channel-content-slider';\nimport {ChannelContentNews} from '@app/channels/channel-content-news';\nimport {ChannelContentList} from '@app/channels/channel-content-list';\nimport {Title} from '@app/titles/models/title';\nimport {NewsArticle} from '@app/titles/models/news-article';\nimport {useChannelLayouts} from '@app/channels/channel-header/use-channel-layouts';\nimport {IllustratedMessage} from '@common/ui/images/illustrated-message';\nimport {Trans} from '@common/i18n/trans';\nimport {SvgImage} from '@common/ui/images/svg-image/svg-image';\nimport todoImage from '@app/admin/lists/todo.svg';\n\nexport interface ChannelContentProps<\n  T extends ChannelContentModel = ChannelContentModel\n> {\n  channel: Channel<T>;\n  isNested: boolean;\n}\nexport function ChannelContent(props: ChannelContentProps) {\n  // only show no results message in non nested channels\n  if (props.isNested && !props.channel.content?.data.length) {\n    return null;\n  }\n  if (props.channel.config.contentModel === CHANNEL_MODEL) {\n    return <NestedChannels {...(props as ChannelContentProps<Channel>)} />;\n  } else {\n    return (\n      <Fragment>\n        <ChannelLayout {...props} />\n        <NoResultsMessage channel={props.channel} />\n      </Fragment>\n    );\n  }\n}\n\ninterface NestedChannelsProps {\n  channel: ChannelContentProps['channel'];\n}\nfunction NoResultsMessage({channel}: NestedChannelsProps) {\n  if (channel.content?.data.length === 0) {\n    return (\n      <IllustratedMessage\n        className=\"mt-60\"\n        image={<SvgImage src={todoImage} />}\n        title={\n          channel.type === 'list' ? (\n            <Trans message=\"This list does not have any content yet.\" />\n          ) : (\n            <Trans message=\"This channel does not have any content yet.\" />\n          )\n        }\n      />\n    );\n  }\n  return null;\n}\n\nexport function ChannelLayout(props: ChannelContentProps) {\n  const {channel, isNested} = props;\n  const {selectedLayout} = useChannelLayouts(channel);\n  const layout = (\n    isNested ? channel.config.nestedLayout : selectedLayout\n  ) as Layout;\n\n  switch (layout) {\n    case 'grid':\n      return <ChannelContentGrid {...props} variant=\"portrait\" />;\n    case 'landscapeGrid':\n      return <ChannelContentGrid {...props} variant=\"landscape\" />;\n    case 'list':\n      return <ChannelContentList {...props} />;\n    case 'carousel':\n      return <ChannelContentCarousel {...props} variant=\"portrait\" />;\n    case 'landscapeCarousel':\n      return <ChannelContentCarousel {...props} variant=\"landscape\" />;\n    case 'slider':\n      return (\n        <ChannelContentSlider {...(props as ChannelContentProps<Title>)} />\n      );\n    case 'news':\n      return (\n        <ChannelContentNews {...(props as ChannelContentProps<NewsArticle>)} />\n      );\n    default:\n      return null;\n  }\n}\n\nfunction NestedChannels({channel, isNested}: ChannelContentProps) {\n  return (\n    <Fragment>\n      <ChannelHeader channel={channel} isNested={isNested} />\n      {channel.content?.data.map(nestedChannel => (\n        <div key={nestedChannel.id} className=\"mb-50\">\n          <ChannelContent\n            channel={nestedChannel as Channel<Channel>}\n            isNested\n          />\n        </div>\n      ))}\n    </Fragment>\n  );\n}\n","import {useQuery} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {Title} from '@app/titles/models/title';\nimport {Person} from '@app/titles/models/person';\n\nexport interface SearchResponse extends BackendResponse {\n  query: string;\n  results: (Title | Person)[];\n}\n\ninterface SearchParams {\n  query?: string;\n  limit?: number;\n}\n\nexport function useSearchResults(params: SearchParams) {\n  return useQuery(['search', params], () => search(params), {\n    enabled: !!params.query,\n    keepPreviousData: !!params.query,\n  });\n}\n\nfunction search(params: SearchParams) {\n  return apiClient\n    .get<SearchResponse>(`search/${params.query}`, {params})\n    .then(response => response.data);\n}\n","import {SearchIcon} from '@common/icons/material/Search';\nimport {message} from '@common/i18n/message';\nimport {Item} from '@common/ui/forms/listbox/item';\nimport {ComboBox} from '@common/ui/forms/combobox/combobox';\nimport React, {useState} from 'react';\nimport {useTrans} from '@common/i18n/use-trans';\nimport clsx from 'clsx';\nimport {useNavigate} from '@common/utils/hooks/use-navigate';\nimport {useParams} from 'react-router-dom';\nimport {useSearchResults} from '@app/search/requests/use-search-results';\nimport {TITLE_MODEL} from '@app/titles/models/title';\nimport {getTitleLink} from '@app/titles/title-link';\nimport {TitlePoster} from '@app/titles/title-poster/title-poster';\nimport {PERSON_MODEL} from '@app/titles/models/person';\nimport {getPersonLink} from '@app/people/person-link';\nimport {PersonPoster} from '@app/people/person-poster/person-poster';\nimport {KnownForCompact} from '@app/people/known-for-compact';\nimport {Trans} from '@common/i18n/trans';\n\ninterface SearchAutocompleteProps {\n  className?: string;\n}\nexport function SearchAutocomplete({className}: SearchAutocompleteProps) {\n  const {searchQuery} = useParams();\n  const {trans} = useTrans();\n  const navigate = useNavigate();\n  const [query, setQuery] = useState(searchQuery || '');\n  const [isOpen, setIsOpen] = useState(false);\n  const {isFetching, data} = useSearchResults({\n    query,\n    limit: 8,\n  });\n\n  return (\n    <form\n      onSubmit={e => {\n        e.preventDefault();\n        if (query.trim().length) {\n          setIsOpen(false);\n          navigate(`/search/${query.trim()}`);\n        }\n      }}\n      className={clsx(\n        'flex items-center bg-chip/40 flex-auto text max-w-580 rounded',\n        className\n      )}\n    >\n      <ComboBox\n        size=\"sm\"\n        startAdornment={\n          <button type=\"submit\" aria-label={trans(message('Search'))}>\n            <SearchIcon className=\"text-muted flex-shrink-0\" />\n          </button>\n        }\n        className=\"w-full\"\n        offset={6}\n        inputClassName=\"w-full outline-none text-sm placeholder:text-muted\"\n        isAsync\n        hideEndAdornment\n        placeholder={trans(\n          message('Search for movies, tv shows and people...')\n        )}\n        isLoading={isFetching}\n        inputValue={query}\n        onInputValueChange={setQuery}\n        clearInputOnItemSelection\n        blurReferenceOnItemSelection\n        selectionMode=\"none\"\n        openMenuOnFocus\n        floatingMaxHeight={670}\n        isOpen={isOpen}\n        onOpenChange={setIsOpen}\n      >\n        {data?.results.map(result => {\n          switch (result.model_type) {\n            case TITLE_MODEL:\n              return (\n                <Item\n                  key={result.id}\n                  value={result.id}\n                  onSelected={() => {\n                    navigate(getTitleLink(result));\n                  }}\n                  startIcon={\n                    <TitlePoster title={result} srcSize=\"sm\" size=\"w-46\" />\n                  }\n                  description={\n                    <div>\n                      <div className=\"mb-4\">{result.year}</div>\n                      <div>\n                        {result.is_series ? (\n                          <Trans message=\"Tv series\" />\n                        ) : (\n                          <Trans message=\"Movie\" />\n                        )}\n                      </div>\n                    </div>\n                  }\n                  textLabel={result.name}\n                >\n                  {result.name}\n                </Item>\n              );\n            case PERSON_MODEL:\n              return (\n                <Item\n                  key={result.id}\n                  value={result.id}\n                  onSelected={() => {\n                    navigate(getPersonLink(result));\n                  }}\n                  startIcon={\n                    <PersonPoster\n                      person={result}\n                      srcSize=\"sm\"\n                      className=\"w-56\"\n                    />\n                  }\n                  description={<KnownForCompact person={result} />}\n                  textLabel={result.name}\n                >\n                  {result.name}\n                </Item>\n              );\n          }\n        })}\n      </ComboBox>\n    </form>\n  );\n}\n","import {Navbar} from '@common/ui/navigation/navbar/navbar';\nimport {SearchAutocomplete} from '@app/search/search-autocomplete';\nimport clsx from 'clsx';\n\ninterface Props {\n  position?: 'fixed' | 'relative';\n}\nexport function MainNavbar({position = 'relative'}: Props) {\n  return (\n    <Navbar\n      size=\"md\"\n      menuPosition=\"primary\"\n      className={clsx(position, 'z-40 flex-shrink-0 w-full')}\n      border=\"border-none\"\n      alwaysDarkMode\n    >\n      <SearchAutocomplete />\n    </Navbar>\n  );\n}\n","import {useAuth} from '../../auth/use-auth';\nimport {memo, useEffect, useId, useMemo, useRef} from 'react';\nimport lazyLoader from '../../utils/http/lazy-loader';\nimport clsx from 'clsx';\nimport {useSettings} from '../../core/settings/use-settings';\nimport dot from 'dot-object';\nimport {Settings} from '@common/core/settings/settings';\n\ninterface AdHostProps {\n  slot: keyof Omit<NonNullable<Settings['ads']>, 'disable'>;\n  className?: string;\n}\nexport function AdHost({slot, className}: AdHostProps) {\n  const settings = useSettings();\n  const {isSubscribed} = useAuth();\n  const adCode = useMemo(() => {\n    return dot.pick(`ads.${slot}`, settings);\n  }, [slot, settings]);\n\n  if (settings.ads?.disable || isSubscribed || !adCode) return null;\n\n  return <InvariantAd className={className} slot={slot} adCode={adCode} />;\n}\n\ninterface InvariantAdProps {\n  slot: string;\n  adCode: string;\n  className?: string;\n}\nconst InvariantAd = memo(\n  ({slot, adCode, className}: InvariantAdProps) => {\n    const ref = useRef<HTMLDivElement>(null);\n\n    const id = useId();\n\n    useEffect(() => {\n      if (ref.current) {\n        loadAdScripts(adCode, ref.current).then(() => {\n          executeAdJavascript(adCode, id);\n        });\n      }\n      return () => {\n        // @ts-ignore\n        delete window['google_ad_modifications'];\n      };\n    }, [adCode, id]);\n\n    return (\n      <div\n        ref={ref}\n        id={id}\n        className={clsx(\n          'ad-host flex items-center justify-center w-full max-w-full overflow-hidden min-h-90 max-h-[600px]',\n          `${slot.replace(/\\./g, '-')}-host`,\n          className\n        )}\n        dangerouslySetInnerHTML={{__html: getAdHtml(adCode)}}\n      ></div>\n    );\n  },\n  () => {\n    // never re-render\n    return false;\n  }\n);\n\nfunction getAdHtml(adCode: string) {\n  // strip out all script tags from ad code and leave only html\n  return adCode\n    ?.replace(/<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi, '')\n    .trim();\n}\n\n// Load any external scripts needed by ad.\nfunction loadAdScripts(adCode: string, parentEl: HTMLDivElement): Promise<any> {\n  const promises = [];\n\n  // load ad code script\n  const pattern = /<script.*?src=['\"](.*?)['\"]/g;\n  let match;\n\n  while ((match = pattern.exec(adCode))) {\n    if (match[1]) {\n      promises.push(lazyLoader.loadAsset(match[1], {type: 'js', parentEl}));\n    }\n  }\n\n  return Promise.all(promises);\n}\n\n// Execute ad code javascript and replace document.write if needed.\nfunction executeAdJavascript(adCode: string, id: string) {\n  // find any ad code javascript that needs to be executed\n  const pattern = /<script\\b[^>]*>([\\s\\S]*?)<\\/script>/g;\n  let content;\n\n  while ((content = pattern.exec(adCode))) {\n    if (content[1]) {\n      const r = `var d = document.createElement('div'); d.innerHTML = $1; document.getElementById('${id}').appendChild(d.firstChild);`;\n      const toEval = content[1].replace(/document.write\\((.+?)\\);/, r);\n      eval(toEval);\n    }\n  }\n}\n","import {Footer} from '@common/ui/footer/footer';\nimport {MainNavbar} from '@app/main-navbar';\nimport {ReactNode} from 'react';\nimport {useScrollToTop} from '@common/ui/navigation/use-scroll-to-top';\nimport {AdHost} from '@common/admin/ads/ad-host';\n\ninterface Props {\n  children: ReactNode;\n}\nexport function SitePageLayout({children}: Props) {\n  useScrollToTop();\n  return (\n    <div className=\"flex flex-col\">\n      <MainNavbar />\n      <div className=\"flex-auto\">\n        <AdHost slot=\"general_top\" className=\"py-24\" />\n        <div className=\"relative min-h-[1000px]\">{children}</div>\n        <AdHost slot=\"general_bottom\" className=\"py-24\" />\n      </div>\n      <Footer className=\"container mx-auto mt-48 flex-shrink-0 px-24\" />\n    </div>\n  );\n}\n","import React from 'react';\nimport {PageStatus} from '@common/http/page-status';\nimport {useChannel} from '@common/channels/requests/use-channel';\nimport {ChannelContent} from '@app/channels/channel-content';\nimport {SitePageLayout} from '@app/site-page-layout';\nimport {Channel} from '@common/channels/channel';\nimport {ChannelContentModel} from '@app/admin/channels/channel-content-config';\nimport {PageMetaTags} from '@common/http/page-meta-tags';\n\ninterface ChannelPageProps {\n  slugOrId?: string | number;\n  type?: 'list' | 'channel';\n}\nexport function ChannelPage({slugOrId, type = 'channel'}: ChannelPageProps) {\n  const query = useChannel(slugOrId, {channelType: type});\n\n  let content = null;\n\n  if (query.data) {\n    content = (\n      <div>\n        <PageMetaTags query={query} />\n        <div className=\"pb-24\">\n          <div className=\"container mx-auto p-24 @container\">\n            <ChannelContent\n              channel={query.data.channel as Channel<ChannelContentModel>}\n              // set key to force re-render when channel changes\n              key={query.data.channel.id}\n              isNested={false}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  } else {\n    content = (\n      <PageStatus query={query} loaderClassName=\"absolute inset-0 m-auto\" />\n    );\n  }\n\n  return <SitePageLayout>{content}</SitePageLayout>;\n}\n","import {TitleImage} from '@app/titles/models/title-image';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {ImageZoomDialog} from '@common/ui/overlays/dialog/image-zoom-dialog';\nimport {ButtonBase} from '@common/ui/buttons/button-base';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {message} from '@common/i18n/message';\nimport {ImageSize, useImageSrc} from '@app/images/use-image-src';\nimport {ReactNode} from 'react';\nimport {useIsMobileMediaQuery} from '@common/utils/hooks/is-mobile-media-query';\n\ninterface Props {\n  images: TitleImage[];\n  count?: number;\n  heading?: ReactNode;\n  srcSize?: ImageSize;\n}\nexport function TitlePageImageGrid({images, count, heading, srcSize}: Props) {\n  const isMobile = useIsMobileMediaQuery();\n  const {trans} = useTrans();\n  if (!images?.length) return null;\n\n  if (!count) {\n    count = isMobile ? 6 : 5;\n  }\n\n  return (\n    <div className=\"mt-48\">\n      {heading}\n      <div className=\"grid grid-cols-3 md:grid-cols-5 gap-24\">\n        {images.slice(0, count).map((image, index) => (\n          <DialogTrigger type=\"modal\" key={image.id}>\n            <ButtonBase\n              aria-label={trans(message('Image :index', {values: {index}}))}\n            >\n              <ImageItem image={image} srcSize={srcSize} />\n            </ButtonBase>\n            <ImageZoomDialog\n              images={images.map(img => img.url)}\n              defaultActiveIndex={index}\n            />\n          </DialogTrigger>\n        ))}\n      </div>\n    </div>\n  );\n}\n\ninterface ImageProps {\n  image: TitleImage;\n  srcSize?: ImageSize;\n}\nfunction ImageItem({image, srcSize = 'md'}: ImageProps) {\n  const src = useImageSrc(image.url, {size: srcSize});\n  return (\n    <img\n      className=\"w-full aspect-square object-cover cursor-pointer rounded\"\n      src={src}\n      alt=\"\"\n    />\n  );\n}\n","import {PersonPoster} from '@app/people/person-poster/person-poster';\nimport {PersonLink} from '@app/people/person-link';\nimport {TitleCredit} from '@app/titles/models/title';\nimport clsx from 'clsx';\nimport {Fragment} from 'react';\nimport {Trans} from '@common/i18n/trans';\n\ninterface Props {\n  credits: TitleCredit[];\n  className?: string;\n}\nexport function TitleCreditsGrid({credits, className}: Props) {\n  if (!credits.length) {\n    return (\n      <div className=\"text-muted italic\">\n        <Trans message=\"We've no cast information for this title yet.\" />\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className={clsx('grid gap-14 md:gap-20 title-credits-grid', className)}\n    >\n      {credits.map(credit => (\n        <div\n          key={credit.pivot.id}\n          className=\"flex items-center gap-14 md:gap-20\"\n        >\n          <PersonPoster\n            rounded\n            person={credit}\n            size=\"w-70 md:w-96\"\n            srcSize=\"md\"\n          />\n          <div className=\"max-md:text-sm\">\n            <PersonLink className=\"block font-bold\" person={credit} />\n            <div className=\"text-muted\">\n              <Description credit={credit} />\n            </div>\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n}\n\ninterface DescriptionProps {\n  credit: TitleCredit;\n}\nfunction Description({credit}: DescriptionProps) {\n  if (credit.pivot.department === 'actors') {\n    return <Fragment>{credit.pivot.character}</Fragment>;\n  }\n  return (\n    <span className=\"capitalize\">\n      <Trans message={credit.pivot.job} />\n    </span>\n  );\n}\n","import {TitleCredit} from '@app/titles/models/title';\nimport {Trans} from '@common/i18n/trans';\nimport {SiteSectionHeading} from '@app/titles/site-section-heading';\nimport {Button} from '@common/ui/buttons/button';\nimport {Link} from 'react-router-dom';\nimport {ArrowForwardIcon} from '@common/icons/material/ArrowForward';\nimport {TitleCreditsGrid} from '@app/titles/pages/title-page/title-credits-grid/title-credits-grid';\n\ninterface Props {\n  credits: TitleCredit[];\n}\nexport function TitlePageCast({credits = []}: Props) {\n  const cast = credits.filter(credit => credit.pivot.department === 'actors');\n  return (\n    <div className=\"mt-48\">\n      <SiteSectionHeading>\n        <Trans message=\"Cast\" />\n      </SiteSectionHeading>\n      <TitleCreditsGrid credits={cast} />\n      <Button\n        className=\"mt-24\"\n        variant=\"outline\"\n        color=\"primary\"\n        elementType={Link}\n        to=\"full-credits\"\n        endIcon={<ArrowForwardIcon />}\n      >\n        <Trans message=\"All cast and crew\" />\n      </Button>\n    </div>\n  );\n}\n","import {useQuery} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {Title} from '@app/titles/models/title';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\n\ninterface Response extends BackendResponse {\n  titles: Title[];\n}\n\nexport function useRelatedTitles(titleId: number) {\n  return useQuery(['titles', titleId, 'related'], () =>\n    fetchRelatedTitles(titleId!)\n  );\n}\n\nfunction fetchRelatedTitles(titleId: number | string) {\n  return apiClient\n    .get<Response>(`titles/${titleId}/related`)\n    .then(response => response.data);\n}\n","import {Title} from '@app/titles/models/title';\nimport {SiteSectionHeading} from '@app/titles/site-section-heading';\nimport {Trans} from '@common/i18n/trans';\nimport {useRelatedTitles} from '@app/titles/requests/use-related-titles';\nimport {useCarousel} from '@app/channels/carousel/use-carousel';\nimport React, {Fragment} from 'react';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {KeyboardArrowLeftIcon} from '@common/icons/material/KeyboardArrowLeft';\nimport {KeyboardArrowRightIcon} from '@common/icons/material/KeyboardArrowRight';\nimport clsx from 'clsx';\nimport {TitlePortraitGridItem} from '@app/channels/content-grid/title-grid-item';\n\ninterface Props {\n  title: Title;\n}\nexport function RelatedTitlesPanel({title}: Props) {\n  const {data} = useRelatedTitles(title.id);\n\n  const {\n    scrollContainerRef,\n    canScrollForward,\n    canScrollBackward,\n    scrollToPreviousPage,\n    scrollToNextPage,\n    containerClassName,\n    itemClassName,\n  } = useCarousel();\n\n  return (\n    <div className=\"mt-48\">\n      <SiteSectionHeading\n        actions={\n          <Fragment>\n            <IconButton\n              disabled={!canScrollBackward}\n              onClick={() => scrollToPreviousPage()}\n            >\n              <KeyboardArrowLeftIcon />\n            </IconButton>\n            <IconButton\n              disabled={!canScrollForward}\n              onClick={() => scrollToNextPage()}\n            >\n              <KeyboardArrowRightIcon />\n            </IconButton>\n          </Fragment>\n        }\n      >\n        <Trans message=\"More like this\" />\n      </SiteSectionHeading>\n      <div\n        ref={scrollContainerRef}\n        className={clsx(containerClassName, 'content-grid-portrait')}\n      >\n        {data?.titles.map(item => (\n          <div className={itemClassName} key={item.id}>\n            <TitlePortraitGridItem item={item} />\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n","import {SiteSectionHeading} from '@app/titles/site-section-heading';\nimport {Trans} from '@common/i18n/trans';\nimport {FormattedDate} from '@common/i18n/formatted-date';\nimport {SeasonPoster} from '@app/seasons/season-poster';\nimport {SeasonLink} from '@app/seasons/season-link';\nimport {GetTitleResponse} from '@app/titles/requests/use-title';\nimport {InfiniteScrollSentinel} from '@common/ui/infinite-scroll/infinite-scroll-sentinel';\nimport {useTitleSeasons} from '@app/titles/requests/use-title-seasons';\n\ninterface Props {\n  data: GetTitleResponse;\n}\nexport function TitlePageSeasonGrid({data: {title, seasons}}: Props) {\n  const query = useTitleSeasons(title.id, seasons);\n  return (\n    <div className=\"mt-48\">\n      <SiteSectionHeading titleAppend={`(${seasons.total})`}>\n        <Trans message=\"Seasons\" />\n      </SiteSectionHeading>\n      <div>\n        <div className=\"grid grid-cols-4 sm:grid-cols-6 lg:grid-cols-8 gap-14\">\n          {query.items.map(season => (\n            <div key={season.id}>\n              <SeasonPoster\n                title={title}\n                season={season}\n                srcSize=\"sm\"\n                className=\"aspect-poster flex-shrink-0\"\n              />\n              <div className=\"mt-4\">\n                <SeasonLink\n                  className=\"text-sm\"\n                  title={title}\n                  seasonNumber={season.number}\n                  color=\"primary\"\n                />\n                <div className=\"text-xs text-muted\">\n                  <FormattedDate\n                    date={season.release_date}\n                    options={{year: 'numeric'}}\n                  />\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n        <InfiniteScrollSentinel\n          query={query}\n          variant=\"loadMore\"\n          loaderMarginTop=\"mt-14\"\n          size=\"sm\"\n        />\n      </div>\n    </div>\n  );\n}\n","import {memo, ReactNode} from 'react';\nimport {Trans} from '@common/i18n/trans';\nimport {BulletSeparatedItems} from '@app/titles/bullet-separated-items';\nimport {PersonLink} from '@app/people/person-link';\nimport {GroupTitleCredits} from '@app/titles/requests/use-title';\n\ninterface Props {\n  credits: GroupTitleCredits;\n}\nexport const CompactCredits = memo(({credits}: Props) => (\n  <div className=\"mt-16 pt-16 border-t flex flex-col gap-14\">\n    {credits.creators?.length ? (\n      <PeopleDetail label={<Trans message=\"Created by\" />}>\n        <BulletSeparatedItems>\n          {credits.creators.slice(0, 3).map(creator => (\n            <PersonLink person={creator} key={creator.id} color=\"primary\" />\n          ))}\n        </BulletSeparatedItems>\n      </PeopleDetail>\n    ) : null}\n    {credits.directing?.length ? (\n      <PeopleDetail\n        label={\n          <Trans\n            message=\"[one Director|other Directors]\"\n            values={{count: credits.directing.length}}\n          />\n        }\n      >\n        <BulletSeparatedItems>\n          {credits.directing.slice(0, 3).map(director => (\n            <PersonLink person={director} key={director.id} color=\"primary\" />\n          ))}\n        </BulletSeparatedItems>\n      </PeopleDetail>\n    ) : null}\n    {credits.writing?.length ? (\n      <PeopleDetail\n        label={\n          <Trans\n            message=\"[one Writer|other Writers]\"\n            values={{count: credits.writing.length}}\n          />\n        }\n      >\n        <BulletSeparatedItems>\n          {credits.writing.slice(0, 3).map(writer => (\n            <PersonLink person={writer} key={writer.id} color=\"primary\" />\n          ))}\n        </BulletSeparatedItems>\n      </PeopleDetail>\n    ) : null}\n    {credits.actors?.length ? (\n      <PeopleDetail label={<Trans message=\"Stars\" />}>\n        <BulletSeparatedItems>\n          {credits.actors.slice(0, 3).map(actor => (\n            <PersonLink person={actor} key={actor.id} color=\"primary\" />\n          ))}\n        </BulletSeparatedItems>\n      </PeopleDetail>\n    ) : null}\n  </div>\n));\n\ninterface PeopleDetailProps {\n  label: ReactNode;\n  children: ReactNode;\n}\nfunction PeopleDetail({label, children}: PeopleDetailProps) {\n  return (\n    <div className=\"md:flex gap-24 flex-shrink-0\">\n      <div className=\"font-bold min-w-84\">{label}</div>\n      <div>{children}</div>\n    </div>\n  );\n}\n","import React, {useMemo} from 'react';\nimport {Genre} from '@app/titles/models/genre';\nimport {\n  BaseMediaLink,\n  BaseMediaLinkProps,\n  getBaseMediaLink,\n} from '@app/base-media-link';\n\ninterface Props extends Omit<BaseMediaLinkProps, 'link'> {\n  genre: Genre;\n}\nexport function GenreLink({genre, children, ...otherProps}: Props) {\n  const link = useMemo(() => getGenreLink(genre), [genre]);\n  return (\n    <BaseMediaLink {...otherProps} link={link}>\n      {children ?? (genre.display_name || genre.name)}\n    </BaseMediaLink>\n  );\n}\n\nexport function getGenreLink(\n  genre: Genre,\n  {absolute}: {absolute?: boolean} = {}\n): string {\n  return getBaseMediaLink(`/genre/${genre.name}`, {absolute});\n}\n","import {useQuery} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {NewsArticle} from '@app/titles/models/news-article';\n\ninterface Response extends BackendResponse {\n  news_articles: NewsArticle[];\n}\n\nexport function useTitleNews(titleId: number | string) {\n  return useQuery(['titles', `${titleId}`, 'news'], () => fetchNews(titleId));\n}\n\nfunction fetchNews(titleId: number | string) {\n  return apiClient\n    .get<Response>(`titles/${titleId}/news`)\n    .then(response => response.data);\n}\n","import {useTitleNews} from '@app/titles/pages/title-page/sections/title-news/use-title-news';\nimport React from 'react';\nimport {NewsArticleGridItem} from '@app/news/news-article-grid-item';\nimport {SiteSectionHeading} from '@app/titles/site-section-heading';\nimport {Trans} from '@common/i18n/trans';\nimport {Title} from '@app/titles/models/title';\n\ninterface Props {\n  title: Title;\n}\nexport function TitleNews({title}: Props) {\n  const {data, isLoading} = useTitleNews(title.id);\n\n  if (!isLoading && !data?.news_articles.length) {\n    return null;\n  }\n\n  return (\n    <section className=\"mt-48\">\n      <SiteSectionHeading>\n        <Trans message=\"Related news\" />\n      </SiteSectionHeading>\n      <div className=\"grid grid-cols-2 gap-24\">\n        {data?.news_articles.map(article => (\n          <NewsArticleGridItem key={article.id} article={article} />\n        ))}\n      </div>\n    </section>\n  );\n}\n","import { Options, tokenize as tokenize$1 } from 'linkifyjs';\n\n/**\n * generated from https://raw.githubusercontent.com/w3c/html/26b5126f96f736f796b9e29718138919dd513744/entities.json\n * do not edit\n */\nvar HTML5NamedCharRefs = {\n  // We don't need the complete named character reference because linkifyHtml\n  // does not modify the escape sequences. We do need &nbsp; so that\n  // whitespace is parsed properly. Other types of whitespace should already\n  // be accounted for. &gt; &lt; and &quot; are also frequently relevant ones\n  amp: \"&\",\n  gt: \">\",\n  lt: \"<\",\n  nbsp: \"\",\n  quot: \"\\\"\"\n};\nvar HEXCHARCODE = /^#[xX]([A-Fa-f0-9]+)$/;\nvar CHARCODE = /^#([0-9]+)$/;\nvar NAMED = /^([A-Za-z0-9]+)$/;\nvar EntityParser = /** @class */function () {\n  function EntityParser(named) {\n    this.named = named;\n  }\n  EntityParser.prototype.parse = function (entity) {\n    if (!entity) {\n      return;\n    }\n    var matches = entity.match(HEXCHARCODE);\n    if (matches) {\n      return String.fromCharCode(parseInt(matches[1], 16));\n    }\n    matches = entity.match(CHARCODE);\n    if (matches) {\n      return String.fromCharCode(parseInt(matches[1], 10));\n    }\n    matches = entity.match(NAMED);\n    if (matches) {\n      return this.named[matches[1]] || \"&\" + matches[1] + \";\";\n    }\n  };\n  return EntityParser;\n}();\nvar WSP = /[\\t\\n\\f ]/;\nvar ALPHA = /[A-Za-z]/;\nvar CRLF = /\\r\\n?/g;\nfunction isSpace(char) {\n  return WSP.test(char);\n}\nfunction isAlpha(char) {\n  return ALPHA.test(char);\n}\nfunction preprocessInput(input) {\n  return input.replace(CRLF, '\\n');\n}\nvar EventedTokenizer = /** @class */function () {\n  function EventedTokenizer(delegate, entityParser, mode) {\n    if (mode === void 0) {\n      mode = 'precompile';\n    }\n    this.delegate = delegate;\n    this.entityParser = entityParser;\n    this.mode = mode;\n    this.state = \"beforeData\" /* beforeData */;\n    this.line = -1;\n    this.column = -1;\n    this.input = '';\n    this.index = -1;\n    this.tagNameBuffer = '';\n    this.states = {\n      beforeData: function () {\n        var char = this.peek();\n        if (char === '<' && !this.isIgnoredEndTag()) {\n          this.transitionTo(\"tagOpen\" /* tagOpen */);\n          this.markTagStart();\n          this.consume();\n        } else {\n          if (this.mode === 'precompile' && char === '\\n') {\n            var tag = this.tagNameBuffer.toLowerCase();\n            if (tag === 'pre' || tag === 'textarea') {\n              this.consume();\n            }\n          }\n          this.transitionTo(\"data\" /* data */);\n          this.delegate.beginData();\n        }\n      },\n      data: function () {\n        var char = this.peek();\n        var tag = this.tagNameBuffer;\n        if (char === '<' && !this.isIgnoredEndTag()) {\n          this.delegate.finishData();\n          this.transitionTo(\"tagOpen\" /* tagOpen */);\n          this.markTagStart();\n          this.consume();\n        } else if (char === '&' && tag !== 'script' && tag !== 'style') {\n          this.consume();\n          this.delegate.appendToData(this.consumeCharRef() || '&');\n        } else {\n          this.consume();\n          this.delegate.appendToData(char);\n        }\n      },\n      tagOpen: function () {\n        var char = this.consume();\n        if (char === '!') {\n          this.transitionTo(\"markupDeclarationOpen\" /* markupDeclarationOpen */);\n        } else if (char === '/') {\n          this.transitionTo(\"endTagOpen\" /* endTagOpen */);\n        } else if (char === '@' || char === ':' || isAlpha(char)) {\n          this.transitionTo(\"tagName\" /* tagName */);\n          this.tagNameBuffer = '';\n          this.delegate.beginStartTag();\n          this.appendToTagName(char);\n        }\n      },\n      markupDeclarationOpen: function () {\n        var char = this.consume();\n        if (char === '-' && this.peek() === '-') {\n          this.consume();\n          this.transitionTo(\"commentStart\" /* commentStart */);\n          this.delegate.beginComment();\n        } else {\n          var maybeDoctype = char.toUpperCase() + this.input.substring(this.index, this.index + 6).toUpperCase();\n          if (maybeDoctype === 'DOCTYPE') {\n            this.consume();\n            this.consume();\n            this.consume();\n            this.consume();\n            this.consume();\n            this.consume();\n            this.transitionTo(\"doctype\" /* doctype */);\n            if (this.delegate.beginDoctype) this.delegate.beginDoctype();\n          }\n        }\n      },\n      doctype: function () {\n        var char = this.consume();\n        if (isSpace(char)) {\n          this.transitionTo(\"beforeDoctypeName\" /* beforeDoctypeName */);\n        }\n      },\n\n      beforeDoctypeName: function () {\n        var char = this.consume();\n        if (isSpace(char)) {\n          return;\n        } else {\n          this.transitionTo(\"doctypeName\" /* doctypeName */);\n          if (this.delegate.appendToDoctypeName) this.delegate.appendToDoctypeName(char.toLowerCase());\n        }\n      },\n      doctypeName: function () {\n        var char = this.consume();\n        if (isSpace(char)) {\n          this.transitionTo(\"afterDoctypeName\" /* afterDoctypeName */);\n        } else if (char === '>') {\n          if (this.delegate.endDoctype) this.delegate.endDoctype();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        } else {\n          if (this.delegate.appendToDoctypeName) this.delegate.appendToDoctypeName(char.toLowerCase());\n        }\n      },\n      afterDoctypeName: function () {\n        var char = this.consume();\n        if (isSpace(char)) {\n          return;\n        } else if (char === '>') {\n          if (this.delegate.endDoctype) this.delegate.endDoctype();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        } else {\n          var nextSixChars = char.toUpperCase() + this.input.substring(this.index, this.index + 5).toUpperCase();\n          var isPublic = nextSixChars.toUpperCase() === 'PUBLIC';\n          var isSystem = nextSixChars.toUpperCase() === 'SYSTEM';\n          if (isPublic || isSystem) {\n            this.consume();\n            this.consume();\n            this.consume();\n            this.consume();\n            this.consume();\n            this.consume();\n          }\n          if (isPublic) {\n            this.transitionTo(\"afterDoctypePublicKeyword\" /* afterDoctypePublicKeyword */);\n          } else if (isSystem) {\n            this.transitionTo(\"afterDoctypeSystemKeyword\" /* afterDoctypeSystemKeyword */);\n          }\n        }\n      },\n\n      afterDoctypePublicKeyword: function () {\n        var char = this.peek();\n        if (isSpace(char)) {\n          this.transitionTo(\"beforeDoctypePublicIdentifier\" /* beforeDoctypePublicIdentifier */);\n          this.consume();\n        } else if (char === '\"') {\n          this.transitionTo(\"doctypePublicIdentifierDoubleQuoted\" /* doctypePublicIdentifierDoubleQuoted */);\n          this.consume();\n        } else if (char === \"'\") {\n          this.transitionTo(\"doctypePublicIdentifierSingleQuoted\" /* doctypePublicIdentifierSingleQuoted */);\n          this.consume();\n        } else if (char === '>') {\n          this.consume();\n          if (this.delegate.endDoctype) this.delegate.endDoctype();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        }\n      },\n\n      doctypePublicIdentifierDoubleQuoted: function () {\n        var char = this.consume();\n        if (char === '\"') {\n          this.transitionTo(\"afterDoctypePublicIdentifier\" /* afterDoctypePublicIdentifier */);\n        } else if (char === '>') {\n          if (this.delegate.endDoctype) this.delegate.endDoctype();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        } else {\n          if (this.delegate.appendToDoctypePublicIdentifier) this.delegate.appendToDoctypePublicIdentifier(char);\n        }\n      },\n      doctypePublicIdentifierSingleQuoted: function () {\n        var char = this.consume();\n        if (char === \"'\") {\n          this.transitionTo(\"afterDoctypePublicIdentifier\" /* afterDoctypePublicIdentifier */);\n        } else if (char === '>') {\n          if (this.delegate.endDoctype) this.delegate.endDoctype();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        } else {\n          if (this.delegate.appendToDoctypePublicIdentifier) this.delegate.appendToDoctypePublicIdentifier(char);\n        }\n      },\n      afterDoctypePublicIdentifier: function () {\n        var char = this.consume();\n        if (isSpace(char)) {\n          this.transitionTo(\"betweenDoctypePublicAndSystemIdentifiers\" /* betweenDoctypePublicAndSystemIdentifiers */);\n        } else if (char === '>') {\n          if (this.delegate.endDoctype) this.delegate.endDoctype();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        } else if (char === '\"') {\n          this.transitionTo(\"doctypeSystemIdentifierDoubleQuoted\" /* doctypeSystemIdentifierDoubleQuoted */);\n        } else if (char === \"'\") {\n          this.transitionTo(\"doctypeSystemIdentifierSingleQuoted\" /* doctypeSystemIdentifierSingleQuoted */);\n        }\n      },\n\n      betweenDoctypePublicAndSystemIdentifiers: function () {\n        var char = this.consume();\n        if (isSpace(char)) {\n          return;\n        } else if (char === '>') {\n          if (this.delegate.endDoctype) this.delegate.endDoctype();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        } else if (char === '\"') {\n          this.transitionTo(\"doctypeSystemIdentifierDoubleQuoted\" /* doctypeSystemIdentifierDoubleQuoted */);\n        } else if (char === \"'\") {\n          this.transitionTo(\"doctypeSystemIdentifierSingleQuoted\" /* doctypeSystemIdentifierSingleQuoted */);\n        }\n      },\n\n      doctypeSystemIdentifierDoubleQuoted: function () {\n        var char = this.consume();\n        if (char === '\"') {\n          this.transitionTo(\"afterDoctypeSystemIdentifier\" /* afterDoctypeSystemIdentifier */);\n        } else if (char === '>') {\n          if (this.delegate.endDoctype) this.delegate.endDoctype();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        } else {\n          if (this.delegate.appendToDoctypeSystemIdentifier) this.delegate.appendToDoctypeSystemIdentifier(char);\n        }\n      },\n      doctypeSystemIdentifierSingleQuoted: function () {\n        var char = this.consume();\n        if (char === \"'\") {\n          this.transitionTo(\"afterDoctypeSystemIdentifier\" /* afterDoctypeSystemIdentifier */);\n        } else if (char === '>') {\n          if (this.delegate.endDoctype) this.delegate.endDoctype();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        } else {\n          if (this.delegate.appendToDoctypeSystemIdentifier) this.delegate.appendToDoctypeSystemIdentifier(char);\n        }\n      },\n      afterDoctypeSystemIdentifier: function () {\n        var char = this.consume();\n        if (isSpace(char)) {\n          return;\n        } else if (char === '>') {\n          if (this.delegate.endDoctype) this.delegate.endDoctype();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        }\n      },\n\n      commentStart: function () {\n        var char = this.consume();\n        if (char === '-') {\n          this.transitionTo(\"commentStartDash\" /* commentStartDash */);\n        } else if (char === '>') {\n          this.delegate.finishComment();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        } else {\n          this.delegate.appendToCommentData(char);\n          this.transitionTo(\"comment\" /* comment */);\n        }\n      },\n\n      commentStartDash: function () {\n        var char = this.consume();\n        if (char === '-') {\n          this.transitionTo(\"commentEnd\" /* commentEnd */);\n        } else if (char === '>') {\n          this.delegate.finishComment();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        } else {\n          this.delegate.appendToCommentData('-');\n          this.transitionTo(\"comment\" /* comment */);\n        }\n      },\n\n      comment: function () {\n        var char = this.consume();\n        if (char === '-') {\n          this.transitionTo(\"commentEndDash\" /* commentEndDash */);\n        } else {\n          this.delegate.appendToCommentData(char);\n        }\n      },\n      commentEndDash: function () {\n        var char = this.consume();\n        if (char === '-') {\n          this.transitionTo(\"commentEnd\" /* commentEnd */);\n        } else {\n          this.delegate.appendToCommentData('-' + char);\n          this.transitionTo(\"comment\" /* comment */);\n        }\n      },\n\n      commentEnd: function () {\n        var char = this.consume();\n        if (char === '>') {\n          this.delegate.finishComment();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        } else {\n          this.delegate.appendToCommentData('--' + char);\n          this.transitionTo(\"comment\" /* comment */);\n        }\n      },\n\n      tagName: function () {\n        var char = this.consume();\n        if (isSpace(char)) {\n          this.transitionTo(\"beforeAttributeName\" /* beforeAttributeName */);\n        } else if (char === '/') {\n          this.transitionTo(\"selfClosingStartTag\" /* selfClosingStartTag */);\n        } else if (char === '>') {\n          this.delegate.finishTag();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        } else {\n          this.appendToTagName(char);\n        }\n      },\n      endTagName: function () {\n        var char = this.consume();\n        if (isSpace(char)) {\n          this.transitionTo(\"beforeAttributeName\" /* beforeAttributeName */);\n          this.tagNameBuffer = '';\n        } else if (char === '/') {\n          this.transitionTo(\"selfClosingStartTag\" /* selfClosingStartTag */);\n          this.tagNameBuffer = '';\n        } else if (char === '>') {\n          this.delegate.finishTag();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n          this.tagNameBuffer = '';\n        } else {\n          this.appendToTagName(char);\n        }\n      },\n      beforeAttributeName: function () {\n        var char = this.peek();\n        if (isSpace(char)) {\n          this.consume();\n          return;\n        } else if (char === '/') {\n          this.transitionTo(\"selfClosingStartTag\" /* selfClosingStartTag */);\n          this.consume();\n        } else if (char === '>') {\n          this.consume();\n          this.delegate.finishTag();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        } else if (char === '=') {\n          this.delegate.reportSyntaxError('attribute name cannot start with equals sign');\n          this.transitionTo(\"attributeName\" /* attributeName */);\n          this.delegate.beginAttribute();\n          this.consume();\n          this.delegate.appendToAttributeName(char);\n        } else {\n          this.transitionTo(\"attributeName\" /* attributeName */);\n          this.delegate.beginAttribute();\n        }\n      },\n      attributeName: function () {\n        var char = this.peek();\n        if (isSpace(char)) {\n          this.transitionTo(\"afterAttributeName\" /* afterAttributeName */);\n          this.consume();\n        } else if (char === '/') {\n          this.delegate.beginAttributeValue(false);\n          this.delegate.finishAttributeValue();\n          this.consume();\n          this.transitionTo(\"selfClosingStartTag\" /* selfClosingStartTag */);\n        } else if (char === '=') {\n          this.transitionTo(\"beforeAttributeValue\" /* beforeAttributeValue */);\n          this.consume();\n        } else if (char === '>') {\n          this.delegate.beginAttributeValue(false);\n          this.delegate.finishAttributeValue();\n          this.consume();\n          this.delegate.finishTag();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        } else if (char === '\"' || char === \"'\" || char === '<') {\n          this.delegate.reportSyntaxError(char + ' is not a valid character within attribute names');\n          this.consume();\n          this.delegate.appendToAttributeName(char);\n        } else {\n          this.consume();\n          this.delegate.appendToAttributeName(char);\n        }\n      },\n      afterAttributeName: function () {\n        var char = this.peek();\n        if (isSpace(char)) {\n          this.consume();\n          return;\n        } else if (char === '/') {\n          this.delegate.beginAttributeValue(false);\n          this.delegate.finishAttributeValue();\n          this.consume();\n          this.transitionTo(\"selfClosingStartTag\" /* selfClosingStartTag */);\n        } else if (char === '=') {\n          this.consume();\n          this.transitionTo(\"beforeAttributeValue\" /* beforeAttributeValue */);\n        } else if (char === '>') {\n          this.delegate.beginAttributeValue(false);\n          this.delegate.finishAttributeValue();\n          this.consume();\n          this.delegate.finishTag();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        } else {\n          this.delegate.beginAttributeValue(false);\n          this.delegate.finishAttributeValue();\n          this.transitionTo(\"attributeName\" /* attributeName */);\n          this.delegate.beginAttribute();\n          this.consume();\n          this.delegate.appendToAttributeName(char);\n        }\n      },\n      beforeAttributeValue: function () {\n        var char = this.peek();\n        if (isSpace(char)) {\n          this.consume();\n        } else if (char === '\"') {\n          this.transitionTo(\"attributeValueDoubleQuoted\" /* attributeValueDoubleQuoted */);\n          this.delegate.beginAttributeValue(true);\n          this.consume();\n        } else if (char === \"'\") {\n          this.transitionTo(\"attributeValueSingleQuoted\" /* attributeValueSingleQuoted */);\n          this.delegate.beginAttributeValue(true);\n          this.consume();\n        } else if (char === '>') {\n          this.delegate.beginAttributeValue(false);\n          this.delegate.finishAttributeValue();\n          this.consume();\n          this.delegate.finishTag();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        } else {\n          this.transitionTo(\"attributeValueUnquoted\" /* attributeValueUnquoted */);\n          this.delegate.beginAttributeValue(false);\n          this.consume();\n          this.delegate.appendToAttributeValue(char);\n        }\n      },\n      attributeValueDoubleQuoted: function () {\n        var char = this.consume();\n        if (char === '\"') {\n          this.delegate.finishAttributeValue();\n          this.transitionTo(\"afterAttributeValueQuoted\" /* afterAttributeValueQuoted */);\n        } else if (char === '&') {\n          this.delegate.appendToAttributeValue(this.consumeCharRef() || '&');\n        } else {\n          this.delegate.appendToAttributeValue(char);\n        }\n      },\n      attributeValueSingleQuoted: function () {\n        var char = this.consume();\n        if (char === \"'\") {\n          this.delegate.finishAttributeValue();\n          this.transitionTo(\"afterAttributeValueQuoted\" /* afterAttributeValueQuoted */);\n        } else if (char === '&') {\n          this.delegate.appendToAttributeValue(this.consumeCharRef() || '&');\n        } else {\n          this.delegate.appendToAttributeValue(char);\n        }\n      },\n      attributeValueUnquoted: function () {\n        var char = this.peek();\n        if (isSpace(char)) {\n          this.delegate.finishAttributeValue();\n          this.consume();\n          this.transitionTo(\"beforeAttributeName\" /* beforeAttributeName */);\n        } else if (char === '/') {\n          this.delegate.finishAttributeValue();\n          this.consume();\n          this.transitionTo(\"selfClosingStartTag\" /* selfClosingStartTag */);\n        } else if (char === '&') {\n          this.consume();\n          this.delegate.appendToAttributeValue(this.consumeCharRef() || '&');\n        } else if (char === '>') {\n          this.delegate.finishAttributeValue();\n          this.consume();\n          this.delegate.finishTag();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        } else {\n          this.consume();\n          this.delegate.appendToAttributeValue(char);\n        }\n      },\n      afterAttributeValueQuoted: function () {\n        var char = this.peek();\n        if (isSpace(char)) {\n          this.consume();\n          this.transitionTo(\"beforeAttributeName\" /* beforeAttributeName */);\n        } else if (char === '/') {\n          this.consume();\n          this.transitionTo(\"selfClosingStartTag\" /* selfClosingStartTag */);\n        } else if (char === '>') {\n          this.consume();\n          this.delegate.finishTag();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        } else {\n          this.transitionTo(\"beforeAttributeName\" /* beforeAttributeName */);\n        }\n      },\n\n      selfClosingStartTag: function () {\n        var char = this.peek();\n        if (char === '>') {\n          this.consume();\n          this.delegate.markTagAsSelfClosing();\n          this.delegate.finishTag();\n          this.transitionTo(\"beforeData\" /* beforeData */);\n        } else {\n          this.transitionTo(\"beforeAttributeName\" /* beforeAttributeName */);\n        }\n      },\n\n      endTagOpen: function () {\n        var char = this.consume();\n        if (char === '@' || char === ':' || isAlpha(char)) {\n          this.transitionTo(\"endTagName\" /* endTagName */);\n          this.tagNameBuffer = '';\n          this.delegate.beginEndTag();\n          this.appendToTagName(char);\n        }\n      }\n    };\n    this.reset();\n  }\n  EventedTokenizer.prototype.reset = function () {\n    this.transitionTo(\"beforeData\" /* beforeData */);\n    this.input = '';\n    this.tagNameBuffer = '';\n    this.index = 0;\n    this.line = 1;\n    this.column = 0;\n    this.delegate.reset();\n  };\n  EventedTokenizer.prototype.transitionTo = function (state) {\n    this.state = state;\n  };\n  EventedTokenizer.prototype.tokenize = function (input) {\n    this.reset();\n    this.tokenizePart(input);\n    this.tokenizeEOF();\n  };\n  EventedTokenizer.prototype.tokenizePart = function (input) {\n    this.input += preprocessInput(input);\n    while (this.index < this.input.length) {\n      var handler = this.states[this.state];\n      if (handler !== undefined) {\n        handler.call(this);\n      } else {\n        throw new Error(\"unhandled state \" + this.state);\n      }\n    }\n  };\n  EventedTokenizer.prototype.tokenizeEOF = function () {\n    this.flushData();\n  };\n  EventedTokenizer.prototype.flushData = function () {\n    if (this.state === 'data') {\n      this.delegate.finishData();\n      this.transitionTo(\"beforeData\" /* beforeData */);\n    }\n  };\n\n  EventedTokenizer.prototype.peek = function () {\n    return this.input.charAt(this.index);\n  };\n  EventedTokenizer.prototype.consume = function () {\n    var char = this.peek();\n    this.index++;\n    if (char === '\\n') {\n      this.line++;\n      this.column = 0;\n    } else {\n      this.column++;\n    }\n    return char;\n  };\n  EventedTokenizer.prototype.consumeCharRef = function () {\n    var endIndex = this.input.indexOf(';', this.index);\n    if (endIndex === -1) {\n      return;\n    }\n    var entity = this.input.slice(this.index, endIndex);\n    var chars = this.entityParser.parse(entity);\n    if (chars) {\n      var count = entity.length;\n      // consume the entity chars\n      while (count) {\n        this.consume();\n        count--;\n      }\n      // consume the `;`\n      this.consume();\n      return chars;\n    }\n  };\n  EventedTokenizer.prototype.markTagStart = function () {\n    this.delegate.tagOpen();\n  };\n  EventedTokenizer.prototype.appendToTagName = function (char) {\n    this.tagNameBuffer += char;\n    this.delegate.appendToTagName(char);\n  };\n  EventedTokenizer.prototype.isIgnoredEndTag = function () {\n    var tag = this.tagNameBuffer;\n    return tag === 'title' && this.input.substring(this.index, this.index + 8) !== '</title>' || tag === 'style' && this.input.substring(this.index, this.index + 8) !== '</style>' || tag === 'script' && this.input.substring(this.index, this.index + 9) !== '</script>';\n  };\n  return EventedTokenizer;\n}();\nvar Tokenizer = /** @class */function () {\n  function Tokenizer(entityParser, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    this.options = options;\n    this.token = null;\n    this.startLine = 1;\n    this.startColumn = 0;\n    this.tokens = [];\n    this.tokenizer = new EventedTokenizer(this, entityParser, options.mode);\n    this._currentAttribute = undefined;\n  }\n  Tokenizer.prototype.tokenize = function (input) {\n    this.tokens = [];\n    this.tokenizer.tokenize(input);\n    return this.tokens;\n  };\n  Tokenizer.prototype.tokenizePart = function (input) {\n    this.tokens = [];\n    this.tokenizer.tokenizePart(input);\n    return this.tokens;\n  };\n  Tokenizer.prototype.tokenizeEOF = function () {\n    this.tokens = [];\n    this.tokenizer.tokenizeEOF();\n    return this.tokens[0];\n  };\n  Tokenizer.prototype.reset = function () {\n    this.token = null;\n    this.startLine = 1;\n    this.startColumn = 0;\n  };\n  Tokenizer.prototype.current = function () {\n    var token = this.token;\n    if (token === null) {\n      throw new Error('token was unexpectedly null');\n    }\n    if (arguments.length === 0) {\n      return token;\n    }\n    for (var i = 0; i < arguments.length; i++) {\n      if (token.type === arguments[i]) {\n        return token;\n      }\n    }\n    throw new Error(\"token type was unexpectedly \" + token.type);\n  };\n  Tokenizer.prototype.push = function (token) {\n    this.token = token;\n    this.tokens.push(token);\n  };\n  Tokenizer.prototype.currentAttribute = function () {\n    return this._currentAttribute;\n  };\n  Tokenizer.prototype.addLocInfo = function () {\n    if (this.options.loc) {\n      this.current().loc = {\n        start: {\n          line: this.startLine,\n          column: this.startColumn\n        },\n        end: {\n          line: this.tokenizer.line,\n          column: this.tokenizer.column\n        }\n      };\n    }\n    this.startLine = this.tokenizer.line;\n    this.startColumn = this.tokenizer.column;\n  };\n  // Data\n  Tokenizer.prototype.beginDoctype = function () {\n    this.push({\n      type: \"Doctype\" /* Doctype */,\n      name: ''\n    });\n  };\n  Tokenizer.prototype.appendToDoctypeName = function (char) {\n    this.current(\"Doctype\" /* Doctype */).name += char;\n  };\n  Tokenizer.prototype.appendToDoctypePublicIdentifier = function (char) {\n    var doctype = this.current(\"Doctype\" /* Doctype */);\n    if (doctype.publicIdentifier === undefined) {\n      doctype.publicIdentifier = char;\n    } else {\n      doctype.publicIdentifier += char;\n    }\n  };\n  Tokenizer.prototype.appendToDoctypeSystemIdentifier = function (char) {\n    var doctype = this.current(\"Doctype\" /* Doctype */);\n    if (doctype.systemIdentifier === undefined) {\n      doctype.systemIdentifier = char;\n    } else {\n      doctype.systemIdentifier += char;\n    }\n  };\n  Tokenizer.prototype.endDoctype = function () {\n    this.addLocInfo();\n  };\n  Tokenizer.prototype.beginData = function () {\n    this.push({\n      type: \"Chars\" /* Chars */,\n      chars: ''\n    });\n  };\n  Tokenizer.prototype.appendToData = function (char) {\n    this.current(\"Chars\" /* Chars */).chars += char;\n  };\n  Tokenizer.prototype.finishData = function () {\n    this.addLocInfo();\n  };\n  // Comment\n  Tokenizer.prototype.beginComment = function () {\n    this.push({\n      type: \"Comment\" /* Comment */,\n      chars: ''\n    });\n  };\n  Tokenizer.prototype.appendToCommentData = function (char) {\n    this.current(\"Comment\" /* Comment */).chars += char;\n  };\n  Tokenizer.prototype.finishComment = function () {\n    this.addLocInfo();\n  };\n  // Tags - basic\n  Tokenizer.prototype.tagOpen = function () {};\n  Tokenizer.prototype.beginStartTag = function () {\n    this.push({\n      type: \"StartTag\" /* StartTag */,\n      tagName: '',\n      attributes: [],\n      selfClosing: false\n    });\n  };\n  Tokenizer.prototype.beginEndTag = function () {\n    this.push({\n      type: \"EndTag\" /* EndTag */,\n      tagName: ''\n    });\n  };\n  Tokenizer.prototype.finishTag = function () {\n    this.addLocInfo();\n  };\n  Tokenizer.prototype.markTagAsSelfClosing = function () {\n    this.current(\"StartTag\" /* StartTag */).selfClosing = true;\n  };\n  // Tags - name\n  Tokenizer.prototype.appendToTagName = function (char) {\n    this.current(\"StartTag\" /* StartTag */, \"EndTag\" /* EndTag */).tagName += char;\n  };\n  // Tags - attributes\n  Tokenizer.prototype.beginAttribute = function () {\n    this._currentAttribute = ['', '', false];\n  };\n  Tokenizer.prototype.appendToAttributeName = function (char) {\n    this.currentAttribute()[0] += char;\n  };\n  Tokenizer.prototype.beginAttributeValue = function (isQuoted) {\n    this.currentAttribute()[2] = isQuoted;\n  };\n  Tokenizer.prototype.appendToAttributeValue = function (char) {\n    this.currentAttribute()[1] += char;\n  };\n  Tokenizer.prototype.finishAttributeValue = function () {\n    this.current(\"StartTag\" /* StartTag */).attributes.push(this._currentAttribute);\n  };\n  Tokenizer.prototype.reportSyntaxError = function (message) {\n    this.current().syntaxError = message;\n  };\n  return Tokenizer;\n}();\nfunction tokenize(input, options) {\n  var tokenizer = new Tokenizer(new EntityParser(HTML5NamedCharRefs), options);\n  return tokenizer.tokenize(input);\n}\n\nconst LinkifyResult = 'LinkifyResult';\nconst StartTag = 'StartTag';\nconst EndTag = 'EndTag';\nconst Chars = 'Chars';\nconst Comment = 'Comment';\nconst Doctype = 'Doctype';\n\n/**\n * @param {string} str html string to link\n * @param {import('linkifyjs').Opts} [opts] linkify options\n * @returns {string} resulting string\n */\nfunction linkifyHtml(str, opts) {\n  if (opts === void 0) {\n    opts = {};\n  }\n  // `tokens` and `token` in this section refer to tokens generated by the\n  // HTML parser, not linkify's parser\n  const tokens = tokenize(str);\n  const linkifiedTokens = [];\n  const linkified = [];\n  const options = new Options(opts, defaultRender);\n\n  // Linkify the tokens given by the parser\n  for (let i = 0; i < tokens.length; i++) {\n    const token = tokens[i];\n    if (token.type === StartTag) {\n      linkifiedTokens.push(token);\n\n      // Ignore all the contents of ignored tags\n      const tagName = token.tagName.toUpperCase();\n      const isIgnored = tagName === 'A' || options.ignoreTags.indexOf(tagName) >= 0;\n      if (!isIgnored) {\n        continue;\n      }\n      let preskipLen = linkifiedTokens.length;\n      skipTagTokens(tagName, tokens, ++i, linkifiedTokens);\n      i += linkifiedTokens.length - preskipLen - 1;\n    } else if (token.type !== Chars) {\n      // Skip this token, it's not important\n      linkifiedTokens.push(token);\n    } else {\n      // Valid text token, linkify it!\n      const linkifedChars = linkifyChars(token.chars, options);\n      linkifiedTokens.push.apply(linkifiedTokens, linkifedChars);\n    }\n  }\n\n  // Convert the tokens back into a string\n  for (let i = 0; i < linkifiedTokens.length; i++) {\n    const token = linkifiedTokens[i];\n    switch (token.type) {\n      case LinkifyResult:\n        linkified.push(token.rendered);\n        break;\n      case StartTag:\n        {\n          let link = '<' + token.tagName;\n          if (token.attributes.length > 0) {\n            link += ' ' + attributeArrayToStrings(token.attributes).join(' ');\n          }\n          if (token.selfClosing) {\n            link += ' /';\n          }\n          link += '>';\n          linkified.push(link);\n          break;\n        }\n      case EndTag:\n        linkified.push(`</${token.tagName}>`);\n        break;\n      case Chars:\n        linkified.push(escapeText(token.chars));\n        break;\n      case Comment:\n        linkified.push(`<!--${escapeText(token.chars)}-->`);\n        break;\n      case Doctype:\n        {\n          let doctype = `<!DOCTYPE ${token.name}`;\n          if (token.publicIdentifier) {\n            doctype += ` PUBLIC \"${token.publicIdentifier}\"`;\n          }\n          if (token.systemIdentifier) {\n            doctype += ` \"${token.systemIdentifier}\"`;\n          }\n          doctype += '>';\n          linkified.push(doctype);\n          break;\n        }\n    }\n  }\n  return linkified.join('');\n}\n\n/**\n\t`tokens` and `token` in this section referes to tokens returned by\n\t`linkify.tokenize`. `linkified` will contain HTML Parser-style tokens\n\t@param {string}\n\t@param {import('linkifyjs').Options}\n*/\nfunction linkifyChars(str, options) {\n  const tokens = tokenize$1(str);\n  const result = [];\n  for (let i = 0; i < tokens.length; i++) {\n    const token = tokens[i];\n    if (token.t === 'nl' && options.get('nl2br')) {\n      result.push({\n        type: StartTag,\n        tagName: 'br',\n        attributes: [],\n        selfClosing: true\n      });\n    } else if (!token.isLink || !options.check(token)) {\n      result.push({\n        type: Chars,\n        chars: token.toString()\n      });\n    } else {\n      result.push({\n        type: LinkifyResult,\n        rendered: options.render(token)\n      });\n    }\n  }\n  return result;\n}\n\n/**\n\tReturns a list of tokens skipped until the closing tag of tagName.\n\n\t* `tagName` is the closing tag which will prompt us to stop skipping\n\t* `tokens` is the array of tokens generated by HTML5Tokenizer which\n\t* `i` is the index immediately after the opening tag to skip\n\t* `skippedTokens` is an array which skipped tokens are being pushed into\n\n\tCaveats\n\n\t* Assumes that i is the first token after the given opening tagName\n\t* The closing tag will be skipped, but nothing after it\n\t* Will track whether there is a nested tag of the same type\n*/\nfunction skipTagTokens(tagName, tokens, i, skippedTokens) {\n  // number of tokens of this type on the [fictional] stack\n  let stackCount = 1;\n  while (i < tokens.length && stackCount > 0) {\n    let token = tokens[i];\n    if (token.type === StartTag && token.tagName.toUpperCase() === tagName) {\n      // Nested tag of the same type, \"add to stack\"\n      stackCount++;\n    } else if (token.type === EndTag && token.tagName.toUpperCase() === tagName) {\n      // Closing tag\n      stackCount--;\n    }\n    skippedTokens.push(token);\n    i++;\n  }\n\n  // Note that if stackCount > 0 here, the HTML is probably invalid\n  return skippedTokens;\n}\nfunction defaultRender(_ref) {\n  let {\n    tagName,\n    attributes,\n    content\n  } = _ref;\n  return `<${tagName} ${attributesToString(attributes)}>${escapeText(content)}</${tagName}>`;\n}\nfunction escapeText(text) {\n  return text.replace(/</g, '&lt;').replace(/>/g, '&gt;');\n}\nfunction escapeAttr(attr) {\n  return attr.replace(/\"/g, '&quot;');\n}\nfunction attributesToString(attributes) {\n  const result = [];\n  for (const attr in attributes) {\n    const val = attributes[attr] + '';\n    result.push(`${attr}=\"${escapeAttr(val)}\"`);\n  }\n  return result.join(' ');\n}\nfunction attributeArrayToStrings(attrs) {\n  const attrStrs = [];\n  for (let i = 0; i < attrs.length; i++) {\n    const name = attrs[i][0];\n    const value = attrs[i][1] + '';\n    attrStrs.push(`${name}=\"${escapeAttr(value)}\"`);\n  }\n  return attrStrs;\n}\n\nexport { linkifyHtml as default };\n","import {useMemo} from 'react';\nimport linkifyStr from 'linkify-string';\nimport linkifyHtml from 'linkify-html';\n\nexport function useLinkifiedString(text: string | null | undefined) {\n  return useMemo(() => {\n    if (!text) {\n      return text;\n    }\n    return linkifyHtml(text, {\n      nl2br: true,\n      attributes: {rel: 'nofollow'},\n    });\n  }, [text]);\n}\n","import {useLinkifiedString} from '@common/utils/hooks/use-linkified-string';\nimport {Fragment, useLayoutEffect, useRef, useState} from 'react';\nimport {Button} from '@common/ui/buttons/button';\nimport {Trans} from '@common/i18n/trans';\nimport clsx from 'clsx';\n\ninterface TruncatedDescriptionProps {\n  description?: string;\n  className?: string;\n}\n\nexport function TruncatedDescription({\n  description,\n  className,\n}: TruncatedDescriptionProps) {\n  const linkifiedDescription = useLinkifiedString(description);\n  const wrapperRef = useRef<HTMLDivElement>(null);\n  const contentRef = useRef<HTMLDivElement>(null);\n  const [isOverflowing, setIsOverflowing] = useState(false);\n  const [isShowingAll, setIsShowingAll] = useState(false);\n\n  useLayoutEffect(() => {\n    const wrapperHeight =\n      wrapperRef.current?.getBoundingClientRect().height || 0;\n    const contentHeight = wrapperRef.current?.scrollHeight || 0;\n    if (contentHeight > wrapperHeight) {\n      setIsOverflowing(true);\n    }\n  }, []);\n\n  if (!linkifiedDescription) return null;\n\n  return (\n    <Fragment>\n      <div\n        ref={wrapperRef}\n        className={clsx(\n          'relative',\n          className,\n          !isShowingAll && 'max-h-160 overflow-hidden',\n          !isShowingAll &&\n            isOverflowing &&\n            'after:absolute after:bottom-0 after:left-0 after:w-full after:h-20 after:bg-gradient-to-b after:from-transparent after:to-background'\n        )}\n      >\n        <div\n          ref={contentRef}\n          dangerouslySetInnerHTML={{__html: linkifiedDescription}}\n        />\n      </div>\n      {isOverflowing && (\n        <Button\n          size=\"xs\"\n          className=\"mt-20\"\n          variant=\"outline\"\n          onClick={() => setIsShowingAll(!isShowingAll)}\n        >\n          {isShowingAll ? (\n            <Trans message=\"Show less\" />\n          ) : (\n            <Trans message=\"Show more\" />\n          )}\n        </Button>\n      )}\n    </Fragment>\n  );\n}\n","import {\n  forwardRef,\n  useCallback,\n  useEffect,\n  useImperativeHandle,\n  useState,\n} from 'react';\nimport {useAuth} from '@common/auth/use-auth';\nimport {\n  CreateReviewPayload,\n  useCreateReview,\n} from '@app/reviews/requests/use-create-review';\nimport {useForm} from 'react-hook-form';\nimport {Form} from '@common/ui/forms/form';\nimport {Avatar} from '@common/ui/images/avatar';\nimport {Trans} from '@common/i18n/trans';\nimport {StarSelector} from '@app/reviews/review-list/star-selector';\nimport {Button} from '@common/ui/buttons/button';\nimport {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Reviewable} from '@app/reviews/reviewable';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\nimport clsx from 'clsx';\nimport {Review} from '@app/titles/models/review';\n\nexport interface NewReviewFormActions {\n  openReviewPanel: () => void;\n}\n\ninterface Props {\n  reviewable: Reviewable;\n  currentReview?: Review;\n  className?: string;\n  disabled?: boolean;\n}\nexport const NewReviewForm = forwardRef<NewReviewFormActions, Props>(\n  ({reviewable, currentReview, className, disabled}, ref) => {\n    const [isExpanded, setIsExpanded] = useState(false);\n    const {user} = useAuth();\n    const form = useForm<CreateReviewPayload>({\n      defaultValues: {\n        score: 8,\n      },\n    });\n\n    useEffect(() => {\n      if (currentReview) {\n        form.setValue('title', currentReview.title);\n        form.setValue('body', currentReview.body);\n        form.setValue('score', currentReview.score);\n      }\n    }, [form, currentReview]);\n\n    const openReviewPanel = useCallback(() => {\n      setIsExpanded(true);\n    }, []);\n\n    useImperativeHandle(\n      ref,\n      () => ({\n        openReviewPanel,\n      }),\n      [openReviewPanel]\n    );\n\n    const createReview = useCreateReview(form);\n    return (\n      <Form\n        className={clsx('rounded border bg-alt p-14', className)}\n        form={form}\n        onSubmit={newValues => {\n          if (disabled) return;\n          createReview.mutate(\n            {\n              ...newValues,\n              reviewable,\n            },\n            {\n              onSuccess: () => {\n                toast(message('Review posted'));\n                setIsExpanded(false);\n              },\n            }\n          );\n        }}\n      >\n        <div className=\"items-center gap-24 lg:flex\">\n          <Avatar\n            size=\"xl\"\n            circle\n            src={user?.avatar}\n            label={user?.display_name}\n          />\n          <div className=\"flex-auto\">\n            <div className=\"mb-4 text-xs text-muted\">\n              <Trans\n                message=\"Review as :name\"\n                values={{\n                  name: (\n                    <span className=\"font-medium text\">\n                      {user?.display_name}\n                    </span>\n                  ),\n                }}\n              />\n            </div>\n            <StarSelector\n              readonly={disabled}\n              className=\"-ml-8 max-lg:mb-12\"\n              count={10}\n              value={disabled ? 0 : form.watch('score')}\n              onValueChange={newScore => {\n                form.setValue('score', newScore);\n              }}\n            />\n          </div>\n          {!isExpanded && (\n            <Button\n              variant=\"flat\"\n              color=\"primary\"\n              onClick={() => openReviewPanel()}\n              disabled={!user || disabled}\n            >\n              {currentReview ? (\n                <Trans message=\"Update review\" />\n              ) : (\n                <Trans message=\"Add review\" />\n              )}\n            </Button>\n          )}\n        </div>\n        {isExpanded && (\n          <div className=\"mt-24\">\n            <FormTextField\n              name=\"title\"\n              className=\"mb-24\"\n              label={<Trans message=\"Title\" />}\n              labelSuffix={<Trans message=\"10 character minimum\" />}\n              autoFocus\n              minLength={10}\n              required\n            />\n            <FormTextField\n              name=\"body\"\n              label={<Trans message=\"Review\" />}\n              labelSuffix={<Trans message=\"100 character minimum\" />}\n              inputElementType=\"textarea\"\n              rows={5}\n              minLength={100}\n              required\n            />\n            <div className=\"mt-16 flex items-center justify-end gap-8\">\n              <Button\n                variant=\"outline\"\n                className=\"min-w-100\"\n                onClick={() => {\n                  setIsExpanded(false);\n                  form.reset(currentReview);\n                }}\n              >\n                <Trans message=\"Cancel\" />\n              </Button>\n              <Button\n                type=\"submit\"\n                variant=\"flat\"\n                color=\"primary\"\n                className=\"min-w-100\"\n                disabled={createReview.isLoading}\n              >\n                <Trans message=\"Post\" />\n              </Button>\n            </div>\n          </div>\n        )}\n      </Form>\n    );\n  }\n);\n","import {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {useMutation} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {showHttpErrorToast} from '@common/utils/http/show-http-error-toast';\nimport {Review} from '@app/titles/models/review';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\n\ninterface Response extends BackendResponse {\n  review: Review;\n}\n\ninterface Payload {\n  isHelpful: boolean;\n}\n\nexport function useSubmitReviewFeedback(review: Review) {\n  return useMutation((payload: Payload) => submitFeedback(payload, review), {\n    onSuccess: () => {\n      toast(message('Feedback submitted'));\n    },\n    onError: r => showHttpErrorToast(r),\n  });\n}\n\nfunction submitFeedback(payload: Payload, review: Review): Promise<Response> {\n  return apiClient\n    .post(`reviews/${review.id}/feedback`, {\n      is_helpful: payload.isHelpful,\n    })\n    .then(r => r.data);\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {showHttpErrorToast} from '@common/utils/http/show-http-error-toast';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\nimport {Reportable} from '@common/reports/Reportable';\n\ninterface Response extends BackendResponse {\n  model: Reportable;\n}\n\ninterface Payload {\n  reason?: string;\n}\n\nexport function useSubmitReport(model: Reportable) {\n  return useMutation((payload: Payload) => submitReport(model, payload), {\n    onSuccess: () => {\n      toast(message('Thanks for reporting. We will review this content.'));\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n\nfunction submitReport(model: Reportable, payload: Payload) {\n  return apiClient\n    .post<Response>('report', {\n      reason: payload.reason,\n      model_id: model.id,\n      model_type: model.model_type,\n    })\n    .then(r => r.data);\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {showHttpErrorToast} from '@common/utils/http/show-http-error-toast';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\nimport {Reportable} from '@common/reports/Reportable';\n\ninterface Response extends BackendResponse {}\n\nexport function useDeleteReport(model: Reportable) {\n  return useMutation(() => deleteReport(model), {\n    onSuccess: () => {\n      toast(message('Report removed'));\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n\nfunction deleteReport(reportable: Reportable) {\n  return apiClient\n    .delete<Response>(`report/${reportable.model_type}/${reportable.id}`)\n    .then(r => r.data);\n}\n","import {Review} from '@app/titles/models/review';\nimport {UserAvatar} from '@common/ui/images/user-avatar';\nimport {FormattedRelativeTime} from '@common/i18n/formatted-relative-time';\nimport {TitleRating} from '@app/reviews/title-rating';\nimport {Trans} from '@common/i18n/trans';\nimport React, {\n  Fragment,\n  ReactElement,\n  useContext,\n  useEffect,\n  useRef,\n  useState,\n} from 'react';\nimport {Link, useLocation} from 'react-router-dom';\nimport {Button} from '@common/ui/buttons/button';\nimport {useSubmitReviewFeedback} from '@app/reviews/requests/use-submit-review-feedback';\nimport clsx from 'clsx';\nimport {useAuth} from '@common/auth/use-auth';\nimport {useAuthClickCapture} from '@app/use-auth-click-capture';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {Tooltip} from '@common/ui/tooltip/tooltip';\nimport {useSubmitReport} from '@common/reports/requests/use-submit-report';\nimport {useDeleteReport} from '@common/reports/requests/use-delete-report';\nimport {ShareIcon} from '@common/icons/material/Share';\nimport useClipboard from 'react-use-clipboard';\nimport {useSettings} from '@common/core/settings/use-settings';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\nimport {\n  Menu,\n  MenuItem,\n  MenuTrigger,\n} from '@common/ui/navigation/menu/menu-trigger';\nimport {MoreVertIcon} from '@common/icons/material/MoreVert';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {ConfirmationDialog} from '@common/ui/overlays/dialog/confirmation-dialog';\nimport {useDeleteReviews} from '@app/reviews/requests/use-delete-reviews';\nimport {User} from '@common/auth/user';\nimport {SiteConfigContext} from '@common/core/settings/site-config-context';\nimport {useIsMobileMediaQuery} from '@common/utils/hooks/is-mobile-media-query';\n\ninterface Props {\n  review: Review;\n  isShared?: boolean;\n  hideShareButton?: boolean;\n  avatar?: ReactElement;\n}\nexport function ReviewListItem({\n  review,\n  isShared,\n  hideShareButton,\n  avatar,\n}: Props) {\n  const isMobile = useIsMobileMediaQuery();\n  const ref = useRef<HTMLDivElement>(null);\n  const scrolled = useRef(false);\n\n  useEffect(() => {\n    if (isShared && !scrolled.current) {\n      ref.current?.scrollIntoView({behavior: 'smooth'});\n      scrolled.current = true;\n    }\n  }, [isShared]);\n\n  return (\n    <div ref={ref}>\n      {isShared && (\n        <div className=\"text-sm mt-16 mb-8\">\n          <Trans message=\"Shared review\" />\n        </div>\n      )}\n      <div\n        className={clsx(\n          'flex items-start gap-24 py-18 min-h-70 group rounded',\n          isShared && 'bg-alt border mb-34'\n        )}\n      >\n        {!isMobile &&\n          (avatar || <UserAvatar user={review.user} size=\"xl\" circle />)}\n        <div className=\"flex-auto text-sm\">\n          <div className=\"flex items-center gap-8 mb-4\">\n            {review.user && <UserDisplayName user={review.user} />}\n            <time className=\"text-muted text-xs\">\n              <FormattedRelativeTime date={review.created_at} />\n            </time>\n          </div>\n          <TitleRating className=\"mt-10 mb-8\" score={review.score} />\n          {review.title && (\n            <div className=\"mb-8 text-base font-medium\">{review.title}</div>\n          )}\n          <div className=\"text-sm\">{review.body}</div>\n          <div className=\"md:flex items-center gap-8 mt-16\">\n            <Feedback review={review} />\n            {!hideShareButton && <ShareButton review={review} />}\n            <ReviewOptionsTrigger review={review} />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\ninterface ShareButtonProps {\n  review: Review;\n}\nfunction ShareButton({review}: ShareButtonProps) {\n  const {base_url} = useSettings();\n  const location = useLocation();\n  const url = `${base_url}${location.pathname}?reviewId=${review.id}`;\n  const [, copyLink] = useClipboard(url);\n  return (\n    <Tooltip label={<Trans message=\"Share\" />}>\n      <IconButton\n        className=\"text-muted\"\n        onClick={() => {\n          copyLink();\n          toast(message('Review link copied to clipboard'));\n        }}\n      >\n        <ShareIcon />\n      </IconButton>\n    </Tooltip>\n  );\n}\n\ninterface FeedbackProps {\n  review: Review;\n}\nfunction Feedback({review}: FeedbackProps) {\n  const {user} = useAuth();\n  const authHandler = useAuthClickCapture();\n  const submitFeedback = useSubmitReviewFeedback(review);\n  const isDisabled =\n    submitFeedback.isLoading || (user != null && user.id === review.user_id);\n\n  const [helpfulCount, setHelpfulCount] = useState(review.helpful_count || 1);\n  const [total, setTotal] = useState(\n    review.helpful_count + review.not_helpful_count || 1\n  );\n\n  let initialFeedback: string | undefined;\n  if (review.current_user_feedback != null) {\n    initialFeedback = review.current_user_feedback ? 'helpful' : 'not_helpful';\n  }\n  const [currentFeedback, setCurrentFeedback] = useState<string | undefined>(\n    initialFeedback\n  );\n\n  return (\n    <div className=\"flex items-center flex-wrap gap-6 max-md:mb-12 mr-auto\">\n      <div className=\"text-xs text-muted\">\n        <Trans\n          message=\":helpfulCount out of :total people found this helpful. Was this review helpful?\"\n          values={{helpfulCount, total}}\n        />\n      </div>\n      <div className=\"pb-2 flex items-center gap-6\">\n        <Button\n          variant=\"link\"\n          className={clsx(\n            'uppercase',\n            currentFeedback === 'helpful' && 'pointer-events-none'\n          )}\n          color={currentFeedback === 'helpful' ? 'primary' : undefined}\n          disabled={isDisabled}\n          onClickCapture={authHandler}\n          onClick={() =>\n            submitFeedback.mutate(\n              {isHelpful: true},\n              {\n                onSuccess: () => {\n                  setHelpfulCount(count => count + 1);\n                  setCurrentFeedback('helpful');\n                  if (!currentFeedback) {\n                    setTotal(count => count + 1);\n                  }\n                },\n              }\n            )\n          }\n        >\n          <Trans message=\"Yes\" />\n        </Button>\n        <div className=\"w-1 h-14 bg-divider\"></div>\n        <Button\n          variant=\"link\"\n          className={clsx(\n            'uppercase',\n            currentFeedback === 'not_helpful' && 'pointer-events-none'\n          )}\n          color={currentFeedback === 'not_helpful' ? 'primary' : undefined}\n          disabled={isDisabled}\n          onClickCapture={authHandler}\n          onClick={() =>\n            submitFeedback.mutate(\n              {isHelpful: false},\n              {\n                onSuccess: () => {\n                  setHelpfulCount(count => count - 1);\n                  setCurrentFeedback('not_helpful');\n                  if (!currentFeedback) {\n                    setTotal(count => count + 1);\n                  }\n                },\n              }\n            )\n          }\n        >\n          <Trans message=\"No\" />\n        </Button>\n      </div>\n    </div>\n  );\n}\n\ninterface ReviewOptionsTriggerProps {\n  review: Review;\n}\nexport function ReviewOptionsTrigger({review}: ReviewOptionsTriggerProps) {\n  const {user, hasPermission} = useAuth();\n  const report = useSubmitReport(review);\n  const deleteReport = useDeleteReport(review);\n  const [isReported, setIsReported] = useState(review.current_user_reported);\n  const handleReport = () => {\n    if (isReported) {\n      deleteReport.mutate(undefined, {\n        onSuccess: () => setIsReported(false),\n      });\n    } else {\n      report.mutate({}, {onSuccess: () => setIsReported(true)});\n    }\n  };\n\n  const deleteReview = useDeleteReviews();\n  const [isDeleteDialogOpen, setIsDeleteDialogOpen] = useState(false);\n  const showDeleteButton =\n    (user && review.user_id === user.id) || hasPermission('reviews.delete');\n  const handleDelete = (isConfirmed: boolean) => {\n    setIsDeleteDialogOpen(false);\n    if (isConfirmed) {\n      deleteReview.mutate({reviewIds: [review.id]});\n    }\n  };\n\n  return (\n    <Fragment>\n      <MenuTrigger>\n        <IconButton className=\"text-muted\">\n          <MoreVertIcon />\n        </IconButton>\n        <Menu>\n          <MenuItem value=\"report\" onSelected={() => handleReport()}>\n            {isReported ? (\n              <Trans message=\"Remove report\" />\n            ) : (\n              <Trans message=\"Report review\" />\n            )}\n          </MenuItem>\n          {showDeleteButton && (\n            <MenuItem\n              value=\"delete\"\n              onSelected={() => setIsDeleteDialogOpen(true)}\n            >\n              <Trans message=\"Delete\" />\n            </MenuItem>\n          )}\n        </Menu>\n      </MenuTrigger>\n      <DialogTrigger\n        type=\"modal\"\n        isOpen={isDeleteDialogOpen}\n        onClose={isConfirmed => handleDelete(isConfirmed)}\n      >\n        <ConfirmationDialog\n          isDanger\n          title={<Trans message=\"Delete review?\" />}\n          body={\n            <Trans message=\"Are you sure you want to delete this review?\" />\n          }\n          confirm={<Trans message=\"Delete\" />}\n        />\n      </DialogTrigger>\n    </Fragment>\n  );\n}\n\ninterface UserDisplayNameProps {\n  user: User;\n}\nfunction UserDisplayName({user}: UserDisplayNameProps) {\n  const isMobile = useIsMobileMediaQuery();\n  const {auth} = useContext(SiteConfigContext);\n  const sharedClassName = 'flex items-center gap-8 text-base font-medium';\n  if (auth.getUserProfileLink) {\n    return (\n      <Fragment>\n        {isMobile && <UserAvatar user={user} size=\"sm\" circle />}\n        <Link\n          to={auth.getUserProfileLink(user)}\n          className={clsx('hover:underline', sharedClassName)}\n        >\n          {user.display_name}\n        </Link>\n      </Fragment>\n    );\n  }\n  return (\n    <div className={sharedClassName}>\n      {isMobile && <UserAvatar user={user} size=\"sm\" circle />}\n      {user.display_name}\n    </div>\n  );\n}\n","import {useAuth} from '@common/auth/use-auth';\nimport {Trans} from '@common/i18n/trans';\nimport {Link} from 'react-router-dom';\nimport {LinkStyle} from '@common/ui/buttons/external-link';\nimport {MessageDescriptor} from '@common/i18n/message-descriptor';\n\ninterface Props {\n  message: MessageDescriptor;\n}\nexport function AccountRequiredCard({message}: Props) {\n  const {user} = useAuth();\n  if (user) return null;\n  return (\n    <div className=\"border border-dashed py-30 px-20 my-40 mx-auto text-center max-w-850 rounded\">\n      <div className=\"text-xl font-semibold mb-8\">\n        <Trans message=\"Account required\" />\n      </div>\n      <div className=\"text-muted text-base\">\n        <Trans\n          {...message}\n          values={{\n            l: parts => (\n              <Link className={LinkStyle} to=\"/login\">\n                {parts}\n              </Link>\n            ),\n            r: parts => (\n              <Link className={LinkStyle} to=\"/register\">\n                {parts}\n              </Link>\n            ),\n          }}\n        />\n      </div>\n    </div>\n  );\n}\n","import {useReviews} from '@app/reviews/requests/use-reviews';\nimport {Reviewable} from '@app/reviews/reviewable';\nimport {\n  NewReviewForm,\n  NewReviewFormActions,\n} from '@app/reviews/review-list/new-review-form';\nimport React, {ReactNode, useRef} from 'react';\nimport {ReviewListItem} from '@app/reviews/review-list/review-list-item';\nimport {InfiniteScrollSentinel} from '@common/ui/infinite-scroll/infinite-scroll-sentinel';\nimport {Button} from '@common/ui/buttons/button';\nimport {Trans} from '@common/i18n/trans';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {opacityAnimation} from '@common/ui/animation/opacity-animation';\nimport {Skeleton} from '@common/ui/skeleton/skeleton';\nimport {IllustratedMessage} from '@common/ui/images/illustrated-message';\nimport {Review} from '@app/titles/models/review';\nimport {AccountRequiredCard} from '@common/comments/comment-list/account-required-card';\nimport {useAuth} from '@common/auth/use-auth';\nimport {message} from '@common/i18n/message';\n\nconst accountRequiredMessage = message(\n  'Please <l>login</l> or <r>create account</r> to add a review'\n);\n\ninterface Props {\n  reviewable: Reviewable;\n  disabled?: boolean;\n  noResultsMessage?: ReactNode;\n  showAccountRequiredMessage?: boolean;\n}\nexport function ReviewList({\n  reviewable,\n  disabled,\n  noResultsMessage,\n  showAccountRequiredMessage,\n}: Props) {\n  const query = useReviews(reviewable);\n  const actionsRef = useRef<NewReviewFormActions>(null);\n  const {user} = useAuth();\n\n  const currentUserReview = query.data?.pages[0].current_user_review;\n  const sharedReview = query.data?.pages[0].shared_review;\n\n  return (\n    <div>\n      <NewReviewForm\n        className=\"mb-14 md:-mx-14\"\n        reviewable={reviewable}\n        currentReview={currentUserReview}\n        ref={actionsRef}\n        disabled={disabled}\n      />\n      <div>\n        {showAccountRequiredMessage && (\n          <AccountRequiredCard message={accountRequiredMessage} />\n        )}\n        <AnimatePresence initial={false} mode=\"wait\">\n          {query.isInitialLoading ? (\n            <ReviewListSkeletons count={4} />\n          ) : (\n            <ReviewListItems\n              reviews={query.items}\n              sharedReview={sharedReview}\n              noResultsMessage={noResultsMessage}\n            />\n          )}\n        </AnimatePresence>\n        <div className=\"ml-84\">\n          <InfiniteScrollSentinel\n            query={query}\n            variant=\"loadMore\"\n            loaderMarginTop=\"mt-14\"\n            loadMoreExtraContent={\n              <Button\n                variant=\"flat\"\n                color=\"primary\"\n                disabled={!user}\n                onClick={() => {\n                  actionsRef.current?.openReviewPanel();\n                }}\n              >\n                <Trans message=\"Add a review\" />\n              </Button>\n            }\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\ninterface ReviewListItemsProps {\n  reviews: Review[];\n  sharedReview?: Review;\n  noResultsMessage?: ReactNode;\n}\nfunction ReviewListItems({\n  reviews,\n  sharedReview,\n  noResultsMessage,\n}: ReviewListItemsProps) {\n  const {user} = useAuth();\n\n  let content: ReactNode;\n\n  if (!reviews.length) {\n    content = user\n      ? noResultsMessage || (\n          <IllustratedMessage\n            className=\"mt-24\"\n            size=\"sm\"\n            title={<Trans message=\"Seems a little quiet over here\" />}\n            description={<Trans message=\"Be the first to leave a review\" />}\n          />\n        )\n      : null;\n  } else {\n    content = reviews.map(review => (\n      <ReviewListItem key={review.id} review={review} />\n    ));\n  }\n\n  return (\n    <m.div key=\"reviews\" {...opacityAnimation}>\n      {sharedReview && <ReviewListItem review={sharedReview} isShared />}\n      {content}\n    </m.div>\n  );\n}\n\ninterface ReviewListSkeletonsProps {\n  count: number;\n}\nexport function ReviewListSkeletons({count}: ReviewListSkeletonsProps) {\n  return (\n    <m.div key=\"loading-skeleton\" {...opacityAnimation}>\n      {[...new Array(count).keys()].map(index => (\n        <div\n          key={index}\n          className=\"flex items-start gap-24 py-18 min-h-[212px] group\"\n        >\n          <Skeleton variant=\"avatar\" radius=\"rounded-full\" size=\"w-60 h-60\" />\n          <div className=\"flex-auto text-sm\">\n            <Skeleton\n              className=\"text-base font-medium max-w-200 mb-4\"\n              variant=\"text\"\n            />\n            <Skeleton variant=\"text\" className=\"max-w-60 mb-8 mt-10 text-lg\" />\n            <Skeleton variant=\"text\" className=\"mb-8 text-base max-w-240\" />\n            <Skeleton className=\"text-sm\" variant=\"text\" />\n            <Skeleton className=\"text-sm\" variant=\"text\" />\n            <Skeleton className=\"text-xs mt-16\" variant=\"text\" />\n          </div>\n        </div>\n      ))}\n    </m.div>\n  );\n}\n","import {Title} from '@app/titles/models/title';\nimport {useReviews} from '@app/reviews/requests/use-reviews';\nimport {SiteSectionHeading} from '@app/titles/site-section-heading';\nimport {TitleRating} from '@app/reviews/title-rating';\nimport {Trans} from '@common/i18n/trans';\nimport {ReviewList} from '@app/reviews/review-list/review-list';\nimport {useLocalStorage} from '@common/utils/hooks/local-storage';\nimport {useIsMobileMediaQuery} from '@common/utils/hooks/is-mobile-media-query';\nimport {ReviewListSortButton} from '@app/reviews/review-list/review-list-sort-button';\nimport {IllustratedMessage} from '@common/ui/images/illustrated-message';\nimport React from 'react';\nimport {FormattedDate} from '@common/i18n/formatted-date';\n\ninterface Props {\n  title: Title;\n}\nexport function TitlePageReviewList({title}: Props) {\n  const isMobile = useIsMobileMediaQuery();\n  const [sort, setSort] = useLocalStorage(\n    `reviewSort.${title.model_type}`,\n    'created_at:desc'\n  );\n  const query = useReviews(title);\n  return (\n    <div className=\"mt-48\">\n      <SiteSectionHeading\n        titleAppend={\n          query.totalItems ? <span>({query.totalItems})</span> : null\n        }\n        actions={\n          <div className=\"flex items-center gap-24\">\n            {!isMobile && <TitleRating score={title.rating} />}\n            <ReviewListSortButton\n              value={sort}\n              onValueChange={newValue => setSort(newValue)}\n            />\n          </div>\n        }\n      >\n        <Trans message=\"Reviews\" />\n      </SiteSectionHeading>\n      <ReviewList\n        reviewable={title}\n        showAccountRequiredMessage={title.status !== 'upcoming'}\n        noResultsMessage={\n          title.status === 'upcoming' ? (\n            <IllustratedMessage\n              className=\"mt-24\"\n              size=\"sm\"\n              title={<Trans message=\"This title is not released yet\" />}\n              description={\n                <Trans\n                  message=\"Come back after :date to see the reviews\"\n                  values={{date: <FormattedDate date={title.release_date} />}}\n                />\n              }\n            />\n          ) : undefined\n        }\n      />\n    </div>\n  );\n}\n","import {Title} from '@app/titles/models/title';\nimport {Episode} from '@app/titles/models/episode';\nimport {getEpisodeLink} from '@app/episodes/episode-link';\nimport {getTitleLink} from '@app/titles/title-link';\nimport {VideoGrid} from '@app/titles/video-grid';\nimport {SiteSectionHeading} from '@app/titles/site-section-heading';\nimport {Trans} from '@common/i18n/trans';\n\ninterface Props {\n  title: Title;\n  episode?: Episode;\n}\nexport function TitlePageVideoGrid({title, episode}: Props) {\n  const videos = episode ? episode.videos : title.videos;\n  const link = episode\n    ? `${getEpisodeLink(\n        title,\n        episode.season_number,\n        episode.episode_number\n      )}/episodes/${episode.id}/videos`\n    : `${getTitleLink(title)}/videos`;\n  return (\n    <VideoGrid\n      videos={videos}\n      title={title}\n      episode={episode}\n      heading={\n        <SiteSectionHeading link={link}>\n          <Trans message=\"Videos\" />\n        </SiteSectionHeading>\n      }\n    />\n  );\n}\n","import React, {Fragment, useState} from 'react';\nimport {useSeasonEpisodes} from '@app/titles/requests/use-season-episodes';\nimport {SiteSectionHeading} from '@app/titles/site-section-heading';\nimport {Trans} from '@common/i18n/trans';\nimport {GetTitleResponse} from '@app/titles/requests/use-title';\nimport {ContentGridLayout} from '@app/channels/content-grid/content-grid-layout';\nimport {EpisodePoster} from '@app/episodes/episode-poster/episode-poster';\nimport {Link} from 'react-router-dom';\nimport {getWatchLink} from '@app/videos/watch-page/get-watch-link';\nimport {Episode} from '@app/titles/models/episode';\nimport {Title} from '@app/titles/models/title';\nimport {CompactSeasonEpisode} from '@app/episodes/compact-season-episode';\nimport {\n  Menu,\n  MenuItem,\n  MenuTrigger,\n} from '@common/ui/navigation/menu/menu-trigger';\nimport {Button} from '@common/ui/buttons/button';\nimport {message} from '@common/i18n/message';\nimport {SortIcon} from '@common/icons/material/Sort';\nimport {ExpandMoreIcon} from '@common/icons/material/ExpandMore';\nimport {FormattedDate} from '@common/i18n/formatted-date';\nimport {Skeleton} from '@common/ui/skeleton/skeleton';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {opacityAnimation} from '@common/ui/animation/opacity-animation';\nimport {UseInfiniteDataResult} from '@common/ui/infinite-scroll/use-infinite-data';\nimport {InfiniteScrollSentinel} from '@common/ui/infinite-scroll/infinite-scroll-sentinel';\nimport {FormattedDuration} from '@common/i18n/formatted-duration';\n\ninterface Props {\n  data: GetTitleResponse;\n}\nexport function TitlePageEpisodeGrid({data}: Props) {\n  const [selectedSeason, setSelectedSeason] = useState<number>(1);\n  const query = useSeasonEpisodes(\n    undefined,\n    {\n      perPage: 21,\n    },\n    {\n      season: selectedSeason,\n      willSortOrFilter: true,\n      defaultOrderBy: 'episode_number',\n      defaultOrderDir: 'asc',\n      titleId: data.title.id,\n    }\n  );\n  const {isInitialLoading, items, sortDescriptor, setSortDescriptor} = query;\n\n  return (\n    <div className=\"mt-48\">\n      <SiteSectionHeading\n        actions={\n          <Fragment>\n            <SeasonSelector\n              selectedSeason={selectedSeason}\n              onSeasonChange={setSelectedSeason}\n              seasonCount={data.title.seasons_count}\n            />\n            <SortButton\n              value={`${sortDescriptor.orderBy}:${sortDescriptor?.orderDir}`}\n              onValueChange={value => {\n                const [orderBy, orderDir] = value.split(':');\n                setSortDescriptor({\n                  orderBy,\n                  orderDir: orderDir as 'asc' | 'desc',\n                });\n              }}\n            />\n          </Fragment>\n        }\n      >\n        <Trans message=\"Episodes\" />\n      </SiteSectionHeading>\n      <AnimatePresence initial={false} mode=\"wait\">\n        {isInitialLoading ? (\n          <SkeletonGrid />\n        ) : (\n          <EpisodeGrid episodes={items} title={data.title} query={query} />\n        )}\n      </AnimatePresence>\n    </div>\n  );\n}\n\ninterface GridItemProps {\n  episode: Episode;\n  title: Title;\n}\nfunction GridItem({episode, title}: GridItemProps) {\n  const runtime = episode.runtime || title.runtime;\n  const name = (\n    <Fragment>\n      <CompactSeasonEpisode className=\"uppercase\" episode={episode} /> -{' '}\n      {episode.name}\n    </Fragment>\n  );\n  return (\n    <div>\n      <div className=\"relative\">\n        <EpisodePoster\n          episode={episode}\n          title={title}\n          srcSize=\"md\"\n          showPlayButton\n          rightAction={\n            runtime ? (\n              <span className=\"rounded bg-black/50 p-4 text-xs font-medium text-white\">\n                <FormattedDuration minutes={runtime} verbose />\n              </span>\n            ) : null\n          }\n        />\n      </div>\n      <div className=\"mt-10\">\n        {episode.release_date && (\n          <div className=\"mb-2 text-sm text-muted\">\n            <FormattedDate date={episode.release_date} />\n          </div>\n        )}\n        <div className=\"overflow-hidden overflow-ellipsis whitespace-nowrap text-base\">\n          {episode.primary_video ? (\n            <Link\n              className=\"rounded outline-none hover:underline focus-visible:ring focus-visible:ring-offset-2\"\n              to={getWatchLink(episode.primary_video)}\n            >\n              {name}\n            </Link>\n          ) : (\n            name\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\ninterface EpisodeGridProps {\n  episodes: Episode[];\n  title: Title;\n  query: UseInfiniteDataResult<Episode>;\n}\nfunction EpisodeGrid({title, episodes, query}: EpisodeGridProps) {\n  return (\n    <m.div key=\"episode-grid\" {...opacityAnimation}>\n      <ContentGridLayout variant=\"landscape\">\n        {episodes.map(episode => (\n          <GridItem key={episode.id} episode={episode} title={title} />\n        ))}\n      </ContentGridLayout>\n      <InfiniteScrollSentinel\n        query={query}\n        variant=\"loadMore\"\n        size=\"sm\"\n        loaderMarginTop=\"mt-16\"\n      />\n    </m.div>\n  );\n}\n\nfunction SkeletonGrid() {\n  return (\n    <m.div key=\"episode-grid\" {...opacityAnimation}>\n      <ContentGridLayout variant=\"landscape\">\n        {[...new Array(6).keys()].map(number => (\n          <div key={number}>\n            <Skeleton variant=\"rect\" size=\"aspect-video\" animation=\"pulsate\" />\n            <div className=\"mt-10 min-h-44\">\n              <Skeleton variant=\"text\" />\n              <Skeleton variant=\"text\" />\n            </div>\n          </div>\n        ))}\n      </ContentGridLayout>\n    </m.div>\n  );\n}\n\ninterface SeasonSelectorProps {\n  selectedSeason: number;\n  onSeasonChange: (newSeason: number) => void;\n  seasonCount: number;\n}\nfunction SeasonSelector({\n  selectedSeason,\n  onSeasonChange,\n  seasonCount,\n}: SeasonSelectorProps) {\n  return (\n    <MenuTrigger\n      selectedValue={selectedSeason}\n      onSelectionChange={newValue => onSeasonChange(newValue as number)}\n      selectionMode=\"single\"\n    >\n      <Button variant=\"outline\" startIcon={<ExpandMoreIcon />} className=\"mr-4\">\n        <Trans message=\"Season :number\" values={{number: selectedSeason}} />\n      </Button>\n      <Menu>\n        {[...new Array(seasonCount).keys()].map(number => {\n          const seasonNumber = number + 1;\n          return (\n            <MenuItem value={seasonNumber} key={seasonNumber}>\n              <Trans message=\"Season :number\" values={{number: seasonNumber}} />\n            </MenuItem>\n          );\n        })}\n      </Menu>\n    </MenuTrigger>\n  );\n}\n\nconst SortOptions = [\n  {\n    value: 'episode_number:desc',\n    label: message('Newest'),\n  },\n  {\n    value: 'episode_number:asc',\n    label: message('Oldest'),\n  },\n];\n\ninterface SortButtonProps {\n  value: string;\n  onValueChange: (newValue: string) => void;\n}\nfunction SortButton({value, onValueChange}: SortButtonProps) {\n  let selectedOption = SortOptions.find(option => option.value === value);\n  if (!selectedOption) {\n    selectedOption = SortOptions[0];\n  }\n  return (\n    <MenuTrigger\n      selectedValue={value}\n      onSelectionChange={newValue => onValueChange(newValue as string)}\n      selectionMode=\"single\"\n    >\n      <Button variant=\"outline\" startIcon={<SortIcon />}>\n        <Trans {...selectedOption.label} />\n      </Button>\n      <Menu>\n        {SortOptions.map(option => (\n          <MenuItem value={option.value} key={option.value}>\n            <Trans {...option.label} />\n          </MenuItem>\n        ))}\n      </Menu>\n    </MenuTrigger>\n  );\n}\n","import {useSettings} from '@common/core/settings/use-settings';\nimport {useMemo} from 'react';\nimport {TitlePageSections} from '@app/titles/pages/title-page/sections/title-page-sections';\n\nexport function useConfiguredTitlePageSections() {\n  const {title_page} = useSettings();\n  return useMemo(() => {\n    return title_page?.sections ? JSON.parse(title_page.sections) : [];\n  }, [title_page?.sections]) as (typeof TitlePageSections)[number][];\n}\n","import {ChipList} from '@common/ui/forms/input-field/chip-field/chip-list';\nimport {Chip} from '@common/ui/forms/input-field/chip-field/chip';\nimport {Link} from 'react-router-dom';\nimport {TitlePageImageGrid} from '@app/titles/pages/title-page/sections/title-page-image-grid';\nimport {TitlePageCast} from '@app/titles/pages/title-page/sections/title-page-cast';\nimport {RelatedTitlesPanel} from '@app/titles/related-titles-panel';\nimport {TitlePageSeasonGrid} from '@app/titles/pages/title-page/sections/title-page-season-grid';\nimport {CompactCredits} from '@app/titles/compact-credits';\nimport {SiteSectionHeading} from '@app/titles/site-section-heading';\nimport {Trans} from '@common/i18n/trans';\nimport {getTitleLink} from '@app/titles/title-link';\nimport {getGenreLink} from '@app/titles/genre-link';\nimport {TitleNews} from '@app/titles/pages/title-page/sections/title-news/title-news';\nimport {TruncatedDescription} from '@common/ui/truncated-description';\nimport clsx from 'clsx';\nimport {TitlePageReviewList} from '@app/titles/pages/title-page/sections/title-page-review-list';\nimport {GetTitleResponse} from '@app/titles/requests/use-title';\nimport {TitlePageVideoGrid} from '@app/titles/pages/title-page/sections/title-page-video-grid';\nimport {useSettings} from '@common/core/settings/use-settings';\nimport {useAuth} from '@common/auth/use-auth';\nimport {TitlePageEpisodeGrid} from '@app/titles/pages/title-page/sections/title-page-episode-grid';\nimport {TitlePageSections} from '@app/titles/pages/title-page/sections/title-page-sections';\nimport {Title} from '@app/titles/models/title';\nimport {useConfiguredTitlePageSections} from '@app/titles/pages/title-page/sections/use-configured-title-page-sections';\nimport {AdHost} from '@common/admin/ads/ad-host';\n\ninterface Props {\n  data: GetTitleResponse;\n  className?: string;\n}\nexport function TitlePageMainContent({data, className}: Props) {\n  const {title, credits} = data;\n  const sections = useConfiguredTitlePageSections();\n  return (\n    <main className={clsx(className, '@container')}>\n      {title.genres?.length ? (\n        <ChipList>\n          {title.genres.map(genre => (\n            <Chip\n              className=\"capitalize\"\n              elementType={Link}\n              to={getGenreLink(genre)}\n              key={genre.id}\n            >\n              {genre.display_name || genre.name}\n            </Chip>\n          ))}\n        </ChipList>\n      ) : null}\n      {title.tagline && (\n        <blockquote className=\"mt-16\">{title.tagline}</blockquote>\n      )}\n      <TruncatedDescription className=\"mt-16\" description={title.description} />\n      <CompactCredits credits={credits} />\n      <AdHost slot=\"general_bottom\" className=\"pt-48\" />\n      {sections.map(name => (\n        <TitlePageSection key={name} name={name} title={title} data={data} />\n      ))}\n    </main>\n  );\n}\n\ninterface TitlePageSectionProps {\n  title: Title;\n  data: GetTitleResponse;\n  name: (typeof TitlePageSections)[number];\n}\nfunction TitlePageSection({name, title, data}: TitlePageSectionProps) {\n  const {titles} = useSettings();\n  const {hasPermission} = useAuth();\n  switch (name) {\n    case 'episodes':\n      return title.is_series ? <TitlePageEpisodeGrid data={data} /> : null;\n    case 'seasons':\n      return title.is_series ? <TitlePageSeasonGrid data={data} /> : null;\n    case 'videos':\n      return <TitlePageVideoGrid title={title} />;\n    case 'images':\n      return (\n        <TitlePageImageGrid\n          images={title.images}\n          heading={\n            <SiteSectionHeading link={`${getTitleLink(title)}/images`}>\n              <Trans message=\"Images\" />\n            </SiteSectionHeading>\n          }\n        />\n      );\n    case 'reviews':\n      return titles.enable_reviews && hasPermission('reviews.view') ? (\n        <TitlePageReviewList title={title} />\n      ) : null;\n    case 'cast':\n      return <TitlePageCast credits={data.credits.actors} />;\n    case 'news':\n      return <TitleNews title={title} />;\n    case 'related':\n      return <RelatedTitlesPanel title={title} />;\n  }\n}\n","import {ReactNode} from 'react';\n\ninterface Props {\n  name: ReactNode;\n  poster?: ReactNode;\n  description?: ReactNode;\n  right?: ReactNode;\n  children?: ReactNode;\n}\nexport function TitlePageHeaderLayout({\n  name,\n  description,\n  children,\n  right,\n  poster,\n}: Props) {\n  return (\n    <div className=\"md:flex items-center justify-between gap-24 mb-24\">\n      {poster}\n      <div className=\"flex-auto\">\n        {children}\n        <h1 className=\"text-4xl md:text-5xl mb-8\">{name}</h1>\n        {description && (\n          <div className=\"text-base font-normal\">{description}</div>\n        )}\n      </div>\n      {right}\n    </div>\n  );\n}\n","import {InteractableRating} from '@app/reviews/interactable-rating';\nimport {Title} from '@app/titles/models/title';\nimport {TitlePageHeaderLayout} from '@app/titles/pages/title-page/title-page-header-layout';\nimport {FormattedDate} from '@common/i18n/formatted-date';\nimport {FormattedDuration} from '@common/i18n/formatted-duration';\nimport {BulletSeparatedItems} from '@app/titles/bullet-separated-items';\nimport {TitlePoster} from '@app/titles/title-poster/title-poster';\nimport {TitleLink} from '@app/titles/title-link';\nimport React from 'react';\n\ninterface Props {\n  title: Title;\n  showPoster?: boolean;\n}\nexport function TitlePageHeader({title, showPoster = false}: Props) {\n  return (\n    <TitlePageHeaderLayout\n      name={<TitleLink title={title} />}\n      poster={\n        showPoster ? (\n          <TitlePoster title={title} size=\"w-80\" srcSize=\"sm\" />\n        ) : null\n      }\n      description={\n        <BulletSeparatedItems>\n          <FormattedDate date={title.release_date} />\n          {title.certification && (\n            <div className=\"uppercase\">{title.certification}</div>\n          )}\n          {title.runtime && (\n            <FormattedDuration minutes={title.runtime} verbose />\n          )}\n        </BulletSeparatedItems>\n      }\n      right={<InteractableRating title={title} />}\n    />\n  );\n}\n","import {Title} from '@app/titles/models/title';\nimport {Episode} from '@app/titles/models/episode';\nimport {TitleBackdrop} from '@app/titles/title-poster/title-backdrop';\nimport {useSettings} from '@common/core/settings/use-settings';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {MediaPlayIcon} from '@common/icons/media/media-play';\nimport {Link} from 'react-router-dom';\nimport {getWatchLink} from '@app/videos/watch-page/get-watch-link';\nimport {Season} from '@app/titles/models/season';\n\ninterface Props {\n  title: Title;\n  season?: Season;\n  episode?: Episode;\n}\nexport function TitlePageHeaderImage({title, season, episode}: Props) {\n  const {streaming} = useSettings();\n  const watchItem = episode || season || title;\n  const backdrop = (\n    <TitleBackdrop\n      title={title}\n      episode={episode}\n      size=\"w-full h-full\"\n      className=\"object-top\"\n      lazy={false}\n    />\n  );\n  return (\n    <header className=\"relative h-160 md:h-450 isolate overflow-hidden bg-black\">\n      <div className=\"container w-full h-full mx-auto px-24 absolute top-0 left-0 right-0 z-20\">\n        {backdrop}\n      </div>\n      <div className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-black w-[calc(100%+100px)] h-[calc(100% + 20px)] blur-md z-10 opacity-50\">\n        {backdrop}\n      </div>\n      <div className=\"bg-gradient-to-b from-black/70 absolute top-0 left-0 w-full h-full z-30 pointer-events-none\" />\n      {streaming.show_header_play && watchItem.primary_video ? (\n        <PlayButton item={watchItem} />\n      ) : null}\n    </header>\n  );\n}\n\ninterface PlayButtonProps {\n  item: Season | Episode | Title;\n}\nfunction PlayButton({item}: PlayButtonProps) {\n  const link = getWatchLink(item.primary_video!);\n  return (\n    <IconButton\n      radius=\"rounded-full\"\n      color=\"white\"\n      variant=\"raised\"\n      size=\"lg\"\n      className=\"absolute inset-0 m-auto z-40\"\n      elementType={Link}\n      to={link}\n    >\n      <MediaPlayIcon />\n    </IconButton>\n  );\n}\n","import {useQuery} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {useAuth} from '@common/auth/use-auth';\nimport {Title} from '@app/titles/models/title';\nimport {Episode} from '@app/titles/models/episode';\n\ninterface Response extends BackendResponse {\n  watchlist: {\n    id: number;\n    items: {\n      title: Record<number, boolean>;\n      episode: Record<number, boolean>;\n    };\n  };\n}\n\nexport function useCurrentUserWatchlist() {\n  const {user} = useAuth();\n  return useQuery(['channel', 'watchlist', 'compact'], () => fetchWatchlist(), {\n    enabled: !!user,\n  });\n}\n\nexport function useIsItemWatchlisted(item: Title | Episode) {\n  const query = useCurrentUserWatchlist();\n  return {\n    isLoading: query.isLoading && query.fetchStatus !== 'idle',\n    isWatchlisted: !!query.data?.watchlist?.items[item.model_type]?.[item.id],\n  };\n}\n\nfunction fetchWatchlist() {\n  return apiClient\n    .get<Response>(`users/me/watchlist`)\n    .then(response => response.data);\n}\n","import {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {useMutation} from '@tanstack/react-query';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {showHttpErrorToast} from '@common/utils/http/show-http-error-toast';\nimport {Title} from '@app/titles/models/title';\nimport {useCurrentUserWatchlist} from '@app/user-lists/requests/use-current-user-watchlist';\n\ninterface Response extends BackendResponse {}\n\nexport function useAddToWatchlist() {\n  const {data} = useCurrentUserWatchlist();\n  return useMutation(\n    (payload: Title) => addToWatchlist(data!.watchlist!.id, payload),\n    {\n      onSuccess: async () => {\n        await queryClient.invalidateQueries(['channel', 'watchlist']);\n        toast(message('Added to your watchlist'));\n      },\n      onError: r => showHttpErrorToast(r),\n    }\n  );\n}\n\nfunction addToWatchlist(listId: number, payload: Title): Promise<Response> {\n  return apiClient\n    .post(`channel/${listId}/add`, {\n      itemId: payload.id,\n      itemType: payload.model_type,\n    })\n    .then(r => r.data);\n}\n","import {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {useMutation} from '@tanstack/react-query';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {showHttpErrorToast} from '@common/utils/http/show-http-error-toast';\nimport {Title} from '@app/titles/models/title';\nimport {useCurrentUserWatchlist} from '@app/user-lists/requests/use-current-user-watchlist';\n\ninterface Response extends BackendResponse {}\n\nexport function useRemoveFromWatchlist() {\n  const {data} = useCurrentUserWatchlist();\n  return useMutation(\n    (payload: Title) => removeFromWatchlist(data!.watchlist.id, payload),\n    {\n      onSuccess: async () => {\n        await queryClient.invalidateQueries(['channel', 'watchlist']);\n        toast(message('Removed from your watchlist'));\n      },\n      onError: r => showHttpErrorToast(r),\n    }\n  );\n}\n\nfunction removeFromWatchlist(\n  listId: number,\n  payload: Title\n): Promise<Response> {\n  return apiClient\n    .post(`channel/${listId}/remove`, {\n      itemId: payload.id,\n      itemType: payload.model_type,\n    })\n    .then(r => r.data);\n}\n","import {Button, ButtonProps} from '@common/ui/buttons/button';\nimport {AddIcon} from '@common/icons/material/Add';\nimport {Trans} from '@common/i18n/trans';\nimport {Title} from '@app/titles/models/title';\nimport {CheckIcon} from '@common/icons/material/Check';\nimport {useAddToWatchlist} from '@app/user-lists/requests/use-add-to-watchlist';\nimport {useRemoveFromWatchlist} from '@app/user-lists/requests/use-remove-from-watchlist';\nimport {useIsItemWatchlisted} from '@app/user-lists/requests/use-current-user-watchlist';\nimport {useAuthClickCapture} from '@app/use-auth-click-capture';\n\ninterface Props {\n  variant?: ButtonProps['variant'];\n  color?: ButtonProps['color'];\n  item: Title;\n}\nexport function WatchlistButton({\n  item,\n  variant = 'flat',\n  color = 'primary',\n}: Props) {\n  const {isLoading, isWatchlisted} = useIsItemWatchlisted(item);\n  const addToWatchlist = useAddToWatchlist();\n  const removeFromWatchlist = useRemoveFromWatchlist();\n  const authHandler = useAuthClickCapture();\n\n  return (\n    <Button\n      variant={variant}\n      color={color}\n      startIcon={isWatchlisted ? <CheckIcon /> : <AddIcon />}\n      className=\"mt-14 min-h-40 w-full\"\n      disabled={\n        addToWatchlist.isLoading || removeFromWatchlist.isLoading || isLoading\n      }\n      onClickCapture={authHandler}\n      onClick={() => {\n        if (isWatchlisted) {\n          removeFromWatchlist.mutate(item);\n        } else {\n          addToWatchlist.mutate(item);\n        }\n      }}\n    >\n      {isWatchlisted ? (\n        <Trans message=\"In watchlist\" />\n      ) : (\n        <Trans message=\"Add to watchlist\" />\n      )}\n    </Button>\n  );\n}\n","import {Fragment, ReactElement, ReactNode} from 'react';\n\ninterface Props {\n  poster: ReactElement;\n  children: ReactNode;\n}\nexport function TitlePageAsideLayout({poster, children}: Props) {\n  return (\n    <div className=\"md:w-1/4 max-md:flex flex-shrink-0 md:sticky top-40\">\n      {poster}\n      <div className=\"flex-auto max-md:ml-16 max-md:text-sm\">{children}</div>\n    </div>\n  );\n}\n\ninterface DetailItemProps {\n  label: ReactNode;\n  children: ReactNode;\n}\nexport function DetailItem({label, children}: DetailItemProps) {\n  return (\n    <Fragment>\n      <dt className=\"font-semibold\">{label}</dt>\n      <dl className=\"mb-12 md:mb-24\">{children}</dl>\n    </Fragment>\n  );\n}\n","import React, {useMemo} from 'react';\nimport {\n  BaseMediaLink,\n  BaseMediaLinkProps,\n  getBaseMediaLink,\n} from '@app/base-media-link';\nimport {Keyword} from '@app/titles/models/keyword';\n\ninterface Props extends Omit<BaseMediaLinkProps, 'link'> {\n  keyword: Keyword;\n}\nexport function KeywordLink({keyword, children, ...otherProps}: Props) {\n  const link = useMemo(() => getKeywordLink(keyword), [keyword]);\n  return (\n    <BaseMediaLink {...otherProps} link={link}>\n      {children ?? (keyword.display_name || keyword.name)}\n    </BaseMediaLink>\n  );\n}\n\nexport function getKeywordLink(\n  keyword: Keyword,\n  {absolute}: {absolute?: boolean} = {}\n): string {\n  return getBaseMediaLink(`/keyword/${keyword.name}`, {absolute});\n}\n","import React, {useMemo} from 'react';\nimport {\n  BaseMediaLink,\n  BaseMediaLinkProps,\n  getBaseMediaLink,\n} from '@app/base-media-link';\nimport {ProductionCountry} from '@app/titles/models/production-country';\n\ninterface Props extends Omit<BaseMediaLinkProps, 'link'> {\n  country: ProductionCountry;\n}\nexport function ProductionCountryLink({\n  country,\n  children,\n  ...otherProps\n}: Props) {\n  const link = useMemo(() => getKeywordLink(country), [country]);\n  return (\n    <BaseMediaLink {...otherProps} link={link}>\n      {children ?? (country.display_name || country.name)}\n    </BaseMediaLink>\n  );\n}\n\nexport function getKeywordLink(\n  country: ProductionCountry,\n  {absolute}: {absolute?: boolean} = {}\n): string {\n  return getBaseMediaLink(`/production-countries/${country.name}`, {absolute});\n}\n","import {MediaPlayIcon} from '@common/icons/media/media-play';\nimport {Trans} from '@common/i18n/trans';\nimport {Button, ButtonProps} from '@common/ui/buttons/button';\nimport {Link} from 'react-router-dom';\nimport {getWatchLink} from '@app/videos/watch-page/get-watch-link';\nimport {Video} from '@app/titles/models/video';\nimport {CompactSeasonEpisode} from '@app/episodes/compact-season-episode';\n\ninterface Props {\n  variant?: ButtonProps['variant'];\n  color?: ButtonProps['color'];\n  size?: string;\n  video: Video;\n  defaultLabel?: boolean;\n}\nexport function WatchNowButton({\n  video,\n  variant = 'outline',\n  color = 'primary',\n  size = 'w-full min-h-40 mt-14',\n  defaultLabel,\n}: Props) {\n  const label =\n    video.episode_num && !defaultLabel ? (\n      <span className=\"inline-flex gap-4\">\n        <Trans message=\"Start watching\" />\n        <CompactSeasonEpisode\n          seasonNum={video.season_num}\n          episodeNum={video.episode_num}\n        />\n      </span>\n    ) : (\n      <Trans message=\"Watch now\" />\n    );\n\n  return (\n    <Button\n      to={getWatchLink(video)}\n      elementType={Link}\n      startIcon={<MediaPlayIcon />}\n      color={color}\n      variant={variant}\n      className={size}\n    >\n      {label}\n    </Button>\n  );\n}\n","import {useSettings} from '@common/core/settings/use-settings';\n\nexport function useIsStreamingMode() {\n  const {streaming} = useSettings();\n  return streaming?.prefer_full || false;\n}\n","import {Title} from '@app/titles/models/title';\nimport {TitlePoster} from '@app/titles/title-poster/title-poster';\nimport {Trans} from '@common/i18n/trans';\nimport {FormattedCurrency} from '@common/i18n/formatted-currency';\nimport {WatchlistButton} from '@app/user-lists/watchlist-button';\nimport {\n  DetailItem,\n  TitlePageAsideLayout,\n} from '@app/titles/pages/title-page/title-page-aside-layout';\nimport {KeywordLink} from '@app/titles/keyword-link';\nimport {useValueLists} from '@common/http/value-lists';\nimport {Skeleton} from '@common/ui/skeleton/skeleton';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {opacityAnimation} from '@common/ui/animation/opacity-animation';\nimport {ProductionCountryLink} from '@app/titles/production-country-link';\nimport {WatchNowButton} from '@app/titles/pages/title-page/watch-now-button';\nimport {useIsStreamingMode} from '@app/videos/use-is-streaming-mode';\nimport {getTitleLink} from '@app/titles/title-link';\nimport {ShareMenuTrigger} from '@app/sharing/share-menu-trigger';\nimport {Button} from '@common/ui/buttons/button';\nimport React from 'react';\nimport {ShareIcon} from '@common/icons/material/Share';\n\ninterface Props {\n  title: Title;\n}\nexport function TitlePageAside({title}: Props) {\n  const isStreamingMode = useIsStreamingMode();\n  return (\n    <TitlePageAsideLayout\n      poster={<TitlePoster title={title} size=\"w-full\" srcSize=\"lg\" />}\n    >\n      {isStreamingMode && title.primary_video && (\n        <WatchNowButton video={title.primary_video} variant=\"flat\" />\n      )}\n      <WatchlistButton\n        item={title}\n        variant={isStreamingMode ? 'outline' : 'flat'}\n      />\n      <ShareButton title={title} />\n      <dl className=\"mt-14\">\n        {title.language && <LanguageDetailItem languageCode={title.language} />}\n        {title.original_title !== title.name && (\n          <DetailItem label={<Trans message=\"Original title\" />}>\n            {title.original_title}\n          </DetailItem>\n        )}\n        {title.budget ? (\n          <DetailItem label={<Trans message=\"Budget\" />}>\n            <FormattedCurrency value={title.budget} currency=\"usd\" />\n          </DetailItem>\n        ) : null}\n        {title.revenue ? (\n          <DetailItem label={<Trans message=\"Revenue\" />}>\n            <FormattedCurrency value={title.revenue} currency=\"usd\" />\n          </DetailItem>\n        ) : null}\n        {title.production_countries?.length ? (\n          <DetailItem label={<Trans message=\"Production countries\" />}>\n            <ul className=\"mt-12 flex flex-wrap gap-8\">\n              {title.production_countries.map(country => (\n                <li\n                  key={country.id}\n                  className=\"w-max rounded-full border px-10 py-4 text-xs\"\n                >\n                  <ProductionCountryLink country={country} />\n                </li>\n              ))}\n            </ul>\n          </DetailItem>\n        ) : null}\n        {title.keywords?.length ? (\n          <DetailItem label={<Trans message=\"Keywords\" />}>\n            <ul className=\"mt-12 flex flex-wrap gap-8\">\n              {title.keywords.map(keyword => (\n                <li\n                  key={keyword.id}\n                  className=\"w-max rounded-full border px-10 py-4 text-xs\"\n                >\n                  <KeywordLink keyword={keyword} />\n                </li>\n              ))}\n            </ul>\n          </DetailItem>\n        ) : null}\n      </dl>\n    </TitlePageAsideLayout>\n  );\n}\n\ninterface LanguageDetailItemProps {\n  languageCode: string;\n}\nfunction LanguageDetailItem({languageCode}: LanguageDetailItemProps) {\n  const {data, isLoading} = useValueLists(['languages']);\n\n  const language =\n    data?.languages?.find(lang => lang.code === languageCode)?.name ||\n    'Unknown';\n\n  return (\n    <AnimatePresence mode=\"wait\">\n      <DetailItem label={<Trans message=\"Original language\" />}>\n        {isLoading ? (\n          <m.span {...opacityAnimation} key=\"skeleton\">\n            <Skeleton variant=\"text\" />\n          </m.span>\n        ) : (\n          <m.span key=\"language\">\n            <Trans message={language} />\n          </m.span>\n        )}\n      </DetailItem>\n    </AnimatePresence>\n  );\n}\n\ninterface ShareButtonProps {\n  title: Title;\n}\nfunction ShareButton({title}: ShareButtonProps) {\n  const link = getTitleLink(title, {absolute: true});\n  return (\n    <ShareMenuTrigger link={link}>\n      <Button\n        variant=\"outline\"\n        color=\"primary\"\n        startIcon={<ShareIcon />}\n        className=\"mt-14 min-h-40 w-full\"\n      >\n        <Trans message=\"Share\" />\n      </Button>\n    </ShareMenuTrigger>\n  );\n}\n","import {useTitle} from '@app/titles/requests/use-title';\n\nexport function useTitlePageData() {\n  return useTitle({\n    load: [\n      'images',\n      'genres',\n      'productionCountries',\n      'keywords',\n      'videos',\n      'primaryVideo',\n      'seasons',\n      'compactCredits',\n    ],\n  });\n}\n","import {GetTitleResponse} from '@app/titles/requests/use-title';\nimport {PageStatus} from '@common/http/page-status';\nimport {PageMetaTags} from '@common/http/page-meta-tags';\nimport React, {Fragment} from 'react';\nimport {TitlePageMainContent} from '@app/titles/pages/title-page/title-page-main-content';\nimport {TitlePageHeader} from '@app/titles/pages/title-page/title-page-header';\nimport {TitlePageHeaderImage} from '@app/titles/pages/title-page/title-page-header-image';\nimport {TitlePageAside} from '@app/titles/pages/title-page/title-page-aside';\nimport {SitePageLayout} from '@app/site-page-layout';\nimport {useIsMobileMediaQuery} from '@common/utils/hooks/is-mobile-media-query';\nimport {useTitlePageData} from '@app/titles/requests/use-title-page-data';\n\nexport function TitlePage() {\n  const query = useTitlePageData();\n\n  const content = query.data ? (\n    <Fragment>\n      <PageMetaTags query={query} />\n      <PageContent data={query.data} />\n    </Fragment>\n  ) : (\n    <PageStatus query={query} loaderClassName=\"absolute inset-0 m-auto\" />\n  );\n\n  return <SitePageLayout>{content}</SitePageLayout>;\n}\n\ninterface PageContentProps {\n  data: GetTitleResponse;\n}\nfunction PageContent({data}: PageContentProps) {\n  const isMobile = useIsMobileMediaQuery();\n  return (\n    <Fragment>\n      <TitlePageHeaderImage title={data.title} />\n      <div className=\"container mx-auto mt-24 md:mt-40 px-14 md:px-24\">\n        <div className=\"md:flex items-start gap-54\">\n          {!isMobile && <TitlePageAside title={data.title} />}\n          <div className=\"flex-auto\">\n            <TitlePageHeader title={data.title} />\n            <TitlePageMainContent data={data} />\n          </div>\n        </div>\n      </div>\n    </Fragment>\n  );\n}\n","import React, {Fragment} from 'react';\nimport {PageMetaTags} from '@common/http/page-meta-tags';\nimport {PageStatus} from '@common/http/page-status';\nimport {GetSeasonResponse, useSeason} from '@app/seasons/requests/use-season';\nimport {TitlePageHeaderImage} from '@app/titles/pages/title-page/title-page-header-image';\nimport {Title} from '@app/titles/models/title';\nimport {TitlePoster} from '@app/titles/title-poster/title-poster';\nimport {Trans} from '@common/i18n/trans';\nimport {TitleLink} from '@app/titles/title-link';\nimport {SeasonLink} from '@app/seasons/season-link';\nimport {useParams} from 'react-router-dom';\nimport clsx from 'clsx';\nimport {SitePageLayout} from '@app/site-page-layout';\nimport {EpisodeListItem} from '@app/seasons/episode-list-item';\nimport {useSeasonEpisodes} from '@app/titles/requests/use-season-episodes';\nimport {InfiniteScrollSentinel} from '@common/ui/infinite-scroll/infinite-scroll-sentinel';\n\nexport function SeasonPage() {\n  const query = useSeason({load: 'episodes,primaryVideo'});\n  const content = query.data ? (\n    <Fragment>\n      <PageMetaTags query={query} />\n      <PageContent data={query.data} />\n    </Fragment>\n  ) : (\n    <PageStatus query={query} loaderClassName=\"absolute inset-0 m-auto\" />\n  );\n\n  return <SitePageLayout>{content}</SitePageLayout>;\n}\n\ninterface PageContentProps {\n  data: GetSeasonResponse;\n}\nfunction PageContent({data}: PageContentProps) {\n  const {title, season} = data;\n  return (\n    <div>\n      <TitlePageHeaderImage title={title} season={season} />\n      <div className=\"container mx-auto mt-40\">\n        <div className=\"flex items-center gap-12 mb-24\">\n          <TitlePoster size=\"w-70\" srcSize=\"sm\" title={title} />\n          <div>\n            <TitleLink title={title} color=\"primary\" className=\"text-xl\" />\n            <div className=\"text-lg\">\n              <Trans message=\"Episode list\" />\n            </div>\n          </div>\n        </div>\n        <SeasonList title={title} />\n        <EpisodeList data={data} />\n        <SeasonList title={title} />\n      </div>\n    </div>\n  );\n}\n\ninterface SeasonListProps {\n  title: Title;\n}\nfunction SeasonList({title}: SeasonListProps) {\n  const {season} = useParams();\n  return (\n    <div>\n      <div className=\"font-semibold text-base mb-4\">\n        <Trans message=\"Seasons\" />:\n      </div>\n      <div className=\"flex items-center gap-10 mb-34\">\n        {[...new Array(title.seasons_count).keys()].map(index => {\n          const number = index + 1;\n          const isActive = season === `${number}`;\n          return (\n            <SeasonLink\n              key={number}\n              title={title}\n              seasonNumber={number}\n              className={clsx(\n                'flex items-center justify-center text-base border rounded w-30 h-30',\n                isActive\n                  ? 'bg-primary text-white pointer-events-none'\n                  : 'text-primary'\n              )}\n            >\n              {number}\n            </SeasonLink>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n\ninterface EpisodeListProps {\n  data: GetSeasonResponse;\n}\nfunction EpisodeList({data: {episodes, title}}: EpisodeListProps) {\n  const query = useSeasonEpisodes(episodes);\n  return (\n    <main>\n      {query.items.map(episode => (\n        <EpisodeListItem\n          key={episode.id}\n          episode={episode}\n          title={title}\n          allowRating\n          showPlayButton\n          className=\"mb-34\"\n        />\n      ))}\n      <InfiniteScrollSentinel query={query} />\n    </main>\n  );\n}\n","import {TitlePageHeaderLayout} from '@app/titles/pages/title-page/title-page-header-layout';\nimport {BulletSeparatedItems} from '@app/titles/bullet-separated-items';\nimport {Trans} from '@common/i18n/trans';\nimport {FormattedDate} from '@common/i18n/formatted-date';\nimport {FormattedDuration} from '@common/i18n/formatted-duration';\nimport {InteractableRating} from '@app/reviews/interactable-rating';\nimport {Breadcrumb} from '@common/ui/breadcrumbs/breadcrumb';\nimport {BreadcrumbItem} from '@common/ui/breadcrumbs/breadcrumb-item';\nimport {getTitleLink} from '@app/titles/title-link';\nimport {getSeasonLink} from '@app/seasons/season-link';\nimport React from 'react';\nimport {Title} from '@app/titles/models/title';\nimport {Episode} from '@app/titles/models/episode';\nimport {useNavigate} from '@common/utils/hooks/use-navigate';\nimport {TitlePoster} from '@app/titles/title-poster/title-poster';\n\ninterface Props {\n  title: Title;\n  episode: Episode;\n  showPoster?: boolean;\n}\nexport function EpisodePageHeader({title, episode, showPoster}: Props) {\n  const navigate = useNavigate();\n  return (\n    <TitlePageHeaderLayout\n      poster={\n        showPoster ? (\n          <TitlePoster title={title} size=\"w-80\" srcSize=\"sm\" />\n        ) : undefined\n      }\n      name={episode.name}\n      description={\n        <BulletSeparatedItems>\n          <Trans\n            message=\"Aired :date\"\n            values={{\n              date: <FormattedDate date={episode.release_date} />,\n            }}\n          />\n          <span className=\"uppercase\">{title.certification}</span>\n          <FormattedDuration minutes={title.runtime} verbose />\n        </BulletSeparatedItems>\n      }\n      right={<InteractableRating title={title} episode={episode} />}\n    >\n      <Breadcrumb isNavigation>\n        <BreadcrumbItem onSelected={() => navigate(getTitleLink(title))}>\n          {title.name}\n        </BreadcrumbItem>\n        <BreadcrumbItem\n          onSelected={() =>\n            navigate(getSeasonLink(title, episode.season_number))\n          }\n        >\n          <Trans\n            message=\"Season :number\"\n            values={{number: episode.season_number}}\n          />\n        </BreadcrumbItem>\n        <BreadcrumbItem>\n          <Trans\n            message=\"Episode :number\"\n            values={{number: episode.episode_number}}\n          />\n        </BreadcrumbItem>\n      </Breadcrumb>\n    </TitlePageHeaderLayout>\n  );\n}\n","import {PageStatus} from '@common/http/page-status';\nimport {Title} from '@app/titles/models/title';\nimport {PageMetaTags} from '@common/http/page-meta-tags';\nimport React, {Fragment} from 'react';\nimport {TitlePageHeaderImage} from '@app/titles/pages/title-page/title-page-header-image';\nimport {\n  GetEpisodeResponse,\n  useEpisode,\n} from '@app/episodes/requests/use-episode';\nimport {ChipList} from '@common/ui/forms/input-field/chip-field/chip-list';\nimport {Chip} from '@common/ui/forms/input-field/chip-field/chip';\nimport {Link} from 'react-router-dom';\nimport {TitlePageCast} from '@app/titles/pages/title-page/sections/title-page-cast';\nimport {RelatedTitlesPanel} from '@app/titles/related-titles-panel';\nimport {CompactCredits} from '@app/titles/compact-credits';\nimport {TitlePageAsideLayout} from '@app/titles/pages/title-page/title-page-aside-layout';\nimport {WatchlistButton} from '@app/user-lists/watchlist-button';\nimport {TitlePoster} from '@app/titles/title-poster/title-poster';\nimport {getGenreLink} from '@app/titles/genre-link';\nimport {SitePageLayout} from '@app/site-page-layout';\nimport {EpisodePageHeader} from '@app/episodes/episode-page-header';\nimport {TruncatedDescription} from '@common/ui/truncated-description';\nimport {TitlePageVideoGrid} from '@app/titles/pages/title-page/sections/title-page-video-grid';\nimport {useIsStreamingMode} from '@app/videos/use-is-streaming-mode';\nimport {WatchNowButton} from '@app/titles/pages/title-page/watch-now-button';\nimport {Episode} from '@app/titles/models/episode';\nimport {TitlePageSections} from '@app/titles/pages/title-page/sections/title-page-sections';\nimport {useConfiguredTitlePageSections} from '@app/titles/pages/title-page/sections/use-configured-title-page-sections';\n\nexport function EpisodePage() {\n  const query = useEpisode({\n    load: ['videos', 'compactCredits', 'primaryVideo'],\n  });\n\n  const content = query.data ? (\n    <Fragment>\n      <PageMetaTags query={query} />\n      <PageContent data={query.data} />\n    </Fragment>\n  ) : (\n    <PageStatus query={query} loaderClassName=\"absolute inset-0 m-auto\" />\n  );\n\n  return <SitePageLayout>{content}</SitePageLayout>;\n}\n\ninterface PageContentProps {\n  data: GetEpisodeResponse;\n}\nfunction PageContent({data}: PageContentProps) {\n  const {episode, title} = data;\n  return (\n    <div>\n      <TitlePageHeaderImage title={title} episode={episode} />\n      <div className=\"container mx-auto mt-40 px-24\">\n        <div className=\"flex items-start gap-54\">\n          <Aside title={title} episode={episode} />\n          <div className=\"flex-auto\">\n            <EpisodePageHeader title={title} episode={episode} />\n            <MainContent data={data} />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\ninterface MainContentProps {\n  data: GetEpisodeResponse;\n}\nfunction MainContent({data}: MainContentProps) {\n  const {episode, title, credits} = data;\n  const sections = useConfiguredTitlePageSections();\n  return (\n    <main className=\"@container\">\n      {title.genres?.length ? (\n        <ChipList>\n          {title.genres.map(genre => (\n            <Chip\n              className=\"capitalize\"\n              elementType={Link}\n              to={getGenreLink(genre)}\n              key={genre.id}\n            >\n              {genre.display_name || genre.name}\n            </Chip>\n          ))}\n        </ChipList>\n      ) : null}\n      <TruncatedDescription\n        className=\"mt-16\"\n        description={episode.description}\n      />\n      <CompactCredits credits={credits} />\n      {sections.map(name => (\n        <EpisodePageSection key={name} name={name} title={title} data={data} />\n      ))}\n    </main>\n  );\n}\n\ninterface EpisodePageSectionProps {\n  title: Title;\n  data: GetEpisodeResponse;\n  name: (typeof TitlePageSections)[number];\n}\nfunction EpisodePageSection({name, title, data}: EpisodePageSectionProps) {\n  switch (name) {\n    case 'videos':\n      return <TitlePageVideoGrid title={title} episode={data.episode} />;\n    case 'cast':\n      return <TitlePageCast credits={data.credits.actors} />;\n    case 'related':\n      return <RelatedTitlesPanel title={title} />;\n    default:\n      return null;\n  }\n}\n\ninterface AsideProps {\n  title: Title;\n  episode: Episode;\n}\nfunction Aside({title, episode}: AsideProps) {\n  const isStreamingMode = useIsStreamingMode();\n  return (\n    <TitlePageAsideLayout\n      poster={<TitlePoster title={title} size=\"w-full\" srcSize=\"lg\" />}\n    >\n      {isStreamingMode && episode.primary_video && (\n        <WatchNowButton\n          video={episode.primary_video}\n          variant=\"flat\"\n          defaultLabel\n        />\n      )}\n      <WatchlistButton\n        item={title}\n        variant={isStreamingMode ? 'outline' : 'flat'}\n      />\n    </TitlePageAsideLayout>\n  );\n}\n","import {useQuery} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {useParams} from 'react-router-dom';\nimport {Title} from '@app/titles/models/title';\nimport {Video} from '@app/titles/models/video';\nimport {Episode} from '@app/titles/models/episode';\n\nexport interface UseWatchPageVideoResponse extends BackendResponse {\n  title: Title;\n  episode?: Episode;\n  video: Video;\n  related_videos: Video[];\n  alternative_videos: Video[];\n}\n\nexport function useWatchPageVideo() {\n  const {videoId} = useParams();\n\n  return useQuery(['video', 'watch-page', videoId], () => fetchVideo(videoId), {\n    keepPreviousData: true,\n  });\n}\n\nfunction fetchVideo(videoId?: string) {\n  return apiClient\n    .get<UseWatchPageVideoResponse>(`watch/${videoId}`)\n    .then(response => response.data);\n}\n","import {Commentable} from '@common/comments/commentable';\nimport {Comment} from '@common/comments/comment';\nimport {useInfiniteData} from '@common/ui/infinite-scroll/use-infinite-data';\n\ninterface QueryParams {\n  perPage?: number;\n}\n\nexport function commentsQueryKey(\n  commentable: Commentable,\n  params: QueryParams = {}\n) {\n  return ['comment', `${commentable.id}-${commentable.model_type}`, params];\n}\n\nexport function useComments(\n  commentable: Commentable,\n  params: QueryParams = {}\n) {\n  return useInfiniteData<Comment>({\n    queryKey: commentsQueryKey(commentable, params),\n    endpoint: 'commentable/comments',\n    //paginate: 'cursor',\n    queryParams: {\n      commentable_type: commentable.model_type,\n      commentable_id: commentable.id,\n      ...params,\n    },\n  });\n}\n","import {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {useMutation} from '@tanstack/react-query';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {showHttpErrorToast} from '@common/utils/http/show-http-error-toast';\nimport {Commentable} from '@common/comments/commentable';\nimport {Comment} from '@common/comments/comment';\n\ninterface Response extends BackendResponse {\n  //\n}\n\nexport interface CreateCommentPayload {\n  commentable: Commentable;\n  content: string;\n  inReplyTo?: Comment;\n}\n\nexport function useCreateComment() {\n  return useMutation((props: CreateCommentPayload) => createComment(props), {\n    onSuccess: (response, props) => {\n      toast(message('Comment posted'));\n      queryClient.invalidateQueries([\n        'comment',\n        `${props.commentable.id}-${props.commentable.model_type}`,\n      ]);\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n\nfunction createComment({\n  commentable,\n  content,\n  inReplyTo,\n  ...other\n}: CreateCommentPayload): Promise<Response> {\n  const payload = {\n    commentable_id: commentable.id,\n    commentable_type: commentable.model_type,\n    content,\n    inReplyTo,\n    ...other,\n  };\n  return apiClient.post('comment', payload).then(r => r.data);\n}\n","import {Commentable} from '@common/comments/commentable';\nimport {Comment} from '@common/comments/comment';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {useAuth} from '@common/auth/use-auth';\nimport {useCreateComment} from '@common/comments/requests/use-create-comment';\nimport {RefObject, useState} from 'react';\nimport clsx from 'clsx';\nimport {TextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Avatar} from '@common/ui/images/avatar';\nimport {message} from '@common/i18n/message';\nimport {Trans} from '@common/i18n/trans';\nimport {useObjectRef} from '@react-aria/utils';\nimport {Button} from '@common/ui/buttons/button';\n\nexport interface NewCommentFormProps {\n  commentable: Commentable;\n  inReplyTo?: Comment;\n  onSuccess?: () => void;\n  className?: string;\n  autoFocus?: boolean;\n  inputRef?: RefObject<HTMLInputElement>;\n  // additional data that should be sent to backend when creating comments\n  payload?: Record<string, number | string>;\n}\nexport function NewCommentForm({\n  commentable,\n  inReplyTo,\n  onSuccess,\n  className,\n  autoFocus,\n  payload,\n  ...props\n}: NewCommentFormProps) {\n  const {trans} = useTrans();\n  const {user} = useAuth();\n  const createComment = useCreateComment();\n  const inputRef = useObjectRef<HTMLInputElement>(props.inputRef);\n  const [inputIsExpanded, setInputIsExpanded] = useState(false);\n  const [inputValue, setInputValue] = useState('');\n\n  const clearInput = () => {\n    setInputIsExpanded(false);\n    if (inputRef.current) {\n      inputRef.current.blur();\n      setInputValue('');\n    }\n  };\n\n  return (\n    <form\n      className={clsx('py-6 flex gap-24', className)}\n      onSubmit={e => {\n        e.preventDefault();\n        if (inputValue && !createComment.isLoading) {\n          createComment.mutate(\n            {\n              ...payload,\n              commentable,\n              content: inputValue,\n              inReplyTo,\n            },\n            {\n              onSuccess: () => {\n                clearInput();\n                onSuccess?.();\n              },\n            }\n          );\n        }\n      }}\n    >\n      <Avatar size=\"xl\" circle src={user?.avatar} label={user?.display_name} />\n      <div className=\"flex-auto\">\n        <div className=\"text-xs text-muted mb-10\">\n          <Trans\n            message=\"Comment as :name\"\n            values={{\n              name: (\n                <span className=\"font-medium text\">{user?.display_name}</span>\n              ),\n            }}\n          />\n        </div>\n        <TextField\n          inputRef={inputRef}\n          autoFocus={autoFocus}\n          inputElementType=\"textarea\"\n          inputClassName=\"resize-none\"\n          value={inputValue}\n          onChange={e => setInputValue(e.target.value)}\n          onFocus={() => setInputIsExpanded(true)}\n          onBlur={() => {\n            if (!inputValue) {\n              setInputIsExpanded(false);\n            }\n          }}\n          minLength={3}\n          rows={inputIsExpanded ? 3 : 1}\n          placeholder={\n            inReplyTo\n              ? trans(message('Write a reply'))\n              : trans(message('Leave a comment'))\n          }\n        />\n        {inputIsExpanded && (\n          <div className=\"flex items-center gap-12 justify-end mt-12\">\n            <Button variant=\"outline\" onClick={() => clearInput()}>\n              <Trans message=\"Cancel\" />\n            </Button>\n            <Button\n              variant=\"outline\"\n              color=\"primary\"\n              type=\"submit\"\n              disabled={createComment.isLoading || inputValue.length < 3}\n            >\n              <Trans message=\"Comment\" />\n            </Button>\n          </div>\n        )}\n      </div>\n    </form>\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {VotableModel} from '@common/votes/votable-model';\nimport {showHttpErrorToast} from '@common/utils/http/show-http-error-toast';\n\ninterface Response extends BackendResponse {\n  model: VotableModel;\n}\n\ninterface Payload {\n  voteType: 'upvote' | 'downvote';\n}\n\nexport function useStoreVote(model: VotableModel) {\n  return useMutation((payload: Payload) => changeVote(model, payload), {\n    onSuccess: response => {\n      //\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n\nfunction changeVote(model: VotableModel, payload: Payload) {\n  return apiClient\n    .post<Response>('vote', {\n      vote_type: payload.voteType,\n      model_id: model.id,\n      model_type: model.model_type,\n    })\n    .then(r => r.data);\n}\n","import {ThumbUpIcon} from '@common/icons/material/ThumbUp';\nimport {ThumbDownIcon} from '@common/icons/material/ThumbDown';\nimport {VotableModel} from '@common/votes/votable-model';\nimport {Button} from '@common/ui/buttons/button';\nimport {useStoreVote} from '@common/votes/requests/use-store-vote';\nimport {useState} from 'react';\nimport {FormattedNumber} from '@common/i18n/formatted-number';\n\ninterface Props {\n  model: VotableModel;\n  className?: string;\n  showUpvotesOnly?: boolean;\n}\nexport function ThumbButtons({model, className, showUpvotesOnly}: Props) {\n  const changeVote = useStoreVote(model);\n\n  const [upvotes, setUpvotes] = useState(model.upvotes || 0);\n  const [downvotes, setDownvotes] = useState(model.downvotes || 0);\n  const [currentVote, setCurrentVote] = useState(model.current_vote);\n\n  const syncLocalState = (model: VotableModel) => {\n    setUpvotes(model.upvotes);\n    setDownvotes(model.downvotes);\n    setCurrentVote(model.current_vote);\n  };\n\n  return (\n    <div className={className}>\n      <Button\n        className=\"gap-6\"\n        sizeClassName=\"px-8 py-4\"\n        color={currentVote === 'upvote' ? 'primary' : undefined}\n        disabled={changeVote.isLoading}\n        onClick={() => {\n          changeVote.mutate(\n            {voteType: 'upvote'},\n            {\n              onSuccess: response => syncLocalState(response.model),\n            }\n          );\n        }}\n      >\n        <ThumbUpIcon />\n        <div>\n          <FormattedNumber value={upvotes} />\n        </div>\n      </Button>\n      {!showUpvotesOnly && (\n        <Button\n          className=\"gap-6\"\n          sizeClassName=\"px-8 py-4\"\n          color={currentVote === 'downvote' ? 'primary' : undefined}\n          disabled={changeVote.isLoading}\n          onClick={() => {\n            changeVote.mutate(\n              {voteType: 'downvote'},\n              {\n                onSuccess: response => syncLocalState(response.model),\n              }\n            );\n          }}\n        >\n          <ThumbDownIcon />\n          <div>\n            <FormattedNumber value={downvotes} />\n          </div>\n        </Button>\n      )}\n    </div>\n  );\n}\n","import React, {Fragment, memo, useContext, useState} from 'react';\nimport {SiteConfigContext} from '@common/core/settings/site-config-context';\nimport {Link} from 'react-router-dom';\nimport {Comment} from '@common/comments/comment';\nimport {useAuth} from '@common/auth/use-auth';\nimport {UserAvatar} from '@common/ui/images/user-avatar';\nimport {Button} from '@common/ui/buttons/button';\nimport {Trans} from '@common/i18n/trans';\nimport {NewCommentForm} from '@common/comments/new-comment-form';\nimport {User} from '@common/auth/user';\nimport {Commentable} from '@common/comments/commentable';\nimport {useDeleteComments} from '@common/comments/requests/use-delete-comments';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {queryClient} from '@common/http/query-client';\nimport {ConfirmationDialog} from '@common/ui/overlays/dialog/confirmation-dialog';\nimport {FormattedDuration} from '@common/i18n/formatted-duration';\nimport {useIsMobileMediaQuery} from '@common/utils/hooks/is-mobile-media-query';\nimport {ThumbButtons} from '@common/votes/thumb-buttons';\nimport {ReplyIcon} from '@common/icons/material/Reply';\nimport {MoreVertIcon} from '@common/icons/material/MoreVert';\nimport {\n  Menu,\n  MenuItem,\n  MenuTrigger,\n} from '@common/ui/navigation/menu/menu-trigger';\nimport {FormattedRelativeTime} from '@common/i18n/formatted-relative-time';\nimport {useSubmitReport} from '@common/reports/requests/use-submit-report';\n\ninterface CommentListItemProps {\n  comment: Comment;\n  commentable: Commentable;\n  canDelete?: boolean;\n}\nexport function CommentListItem({\n  comment,\n  commentable,\n  // user can delete comment if they have created it, or they have relevant permissions on commentable\n  canDelete,\n}: CommentListItemProps) {\n  const isMobile = useIsMobileMediaQuery();\n  const {user, hasPermission} = useAuth();\n  const [replyFormVisible, setReplyFormVisible] = useState(false);\n  const showReplyButton =\n    user != null &&\n    !comment.deleted &&\n    !isMobile &&\n    comment.depth < 5 &&\n    hasPermission('comments.create');\n\n  return (\n    <div\n      style={{paddingLeft: `${comment.depth * 20}px`}}\n      onClick={() => {\n        if (isMobile) {\n          setReplyFormVisible(!replyFormVisible);\n        }\n      }}\n    >\n      <div className=\"flex items-start gap-24 py-18 min-h-70 group\">\n        <UserAvatar user={comment.user} size=\"xl\" circle />\n        <div className=\"text-sm flex-auto\">\n          <div className=\"flex items-center gap-8 mb-4\">\n            {comment.user && <UserDisplayName user={comment.user} />}\n            <time className=\"text-muted text-xs\">\n              <FormattedRelativeTime date={comment.created_at} />\n            </time>\n            {comment.position ? (\n              <Position commentable={commentable} position={comment.position} />\n            ) : null}\n          </div>\n          <div>\n            {comment.deleted ? (\n              <span className=\"text-muted italic\">\n                <Trans message=\"[COMMENT DELETED]\" />\n              </span>\n            ) : (\n              comment.content\n            )}\n          </div>\n          {!comment.deleted && (\n            <div className=\"flex items-center gap-8 mt-10 -ml-8\">\n              {showReplyButton && (\n                <Button\n                  sizeClassName=\"text-sm px-8 py-4\"\n                  startIcon={<ReplyIcon />}\n                  onClick={() => setReplyFormVisible(!replyFormVisible)}\n                >\n                  <Trans message=\"Reply\" />\n                </Button>\n              )}\n              <ThumbButtons model={comment} showUpvotesOnly />\n              <CommentOptionsTrigger\n                comment={comment}\n                canDelete={canDelete}\n                user={user}\n              />\n            </div>\n          )}\n        </div>\n      </div>\n      {replyFormVisible ? (\n        <NewCommentForm\n          className={!comment?.depth ? 'pl-20' : undefined}\n          commentable={commentable}\n          inReplyTo={comment}\n          autoFocus\n          onSuccess={() => {\n            setReplyFormVisible(false);\n          }}\n        />\n      ) : null}\n    </div>\n  );\n}\n\ninterface PositionProps {\n  commentable: Commentable;\n  position: number;\n}\nconst Position = memo(({commentable, position}: PositionProps) => {\n  if (!commentable.duration) return null;\n  const seconds = (position / 100) * (commentable.duration / 1000);\n  return (\n    <span className=\"text-muted text-xs\">\n      <Trans\n        message=\"at :position\"\n        values={{\n          position: <FormattedDuration seconds={seconds} />,\n        }}\n      />\n    </span>\n  );\n});\n\ninterface DeleteCommentsButtonProps {\n  comment: Comment;\n  canDelete?: boolean;\n  user: User | null;\n}\nexport function CommentOptionsTrigger({\n  comment,\n  canDelete,\n  user,\n}: DeleteCommentsButtonProps) {\n  const deleteComments = useDeleteComments();\n  const reportComment = useSubmitReport(comment);\n\n  const [isDeleteDialogOpen, setIsDeleteDialogOpen] = useState(false);\n  const showDeleteButton =\n    (comment.user_id === user?.id || canDelete) && !comment.deleted;\n\n  const handleReport = () => {\n    reportComment.mutate({});\n  };\n\n  const handleDelete = (isConfirmed: boolean) => {\n    setIsDeleteDialogOpen(false);\n    if (isConfirmed) {\n      deleteComments.mutate(\n        {commentIds: [comment.id]},\n        {\n          onSuccess: () => {\n            queryClient.invalidateQueries(['comment']);\n          },\n        }\n      );\n    }\n  };\n\n  return (\n    <Fragment>\n      <MenuTrigger>\n        <Button startIcon={<MoreVertIcon />} sizeClassName=\"text-sm px-8 py-4\">\n          <Trans message=\"More\" />\n        </Button>\n        <Menu>\n          <MenuItem value=\"report\" onSelected={() => handleReport()}>\n            <Trans message=\"Report comment\" />\n          </MenuItem>\n          {showDeleteButton && (\n            <MenuItem\n              value=\"delete\"\n              onSelected={() => setIsDeleteDialogOpen(true)}\n            >\n              <Trans message=\"Delete\" />\n            </MenuItem>\n          )}\n        </Menu>\n      </MenuTrigger>\n      <DialogTrigger\n        type=\"modal\"\n        isOpen={isDeleteDialogOpen}\n        onClose={isConfirmed => handleDelete(isConfirmed)}\n      >\n        <ConfirmationDialog\n          isDanger\n          title={<Trans message=\"Delete comment?\" />}\n          body={\n            <Trans message=\"Are you sure you want to delete this comment?\" />\n          }\n          confirm={<Trans message=\"Delete\" />}\n        />\n      </DialogTrigger>\n    </Fragment>\n  );\n}\n\ninterface UserDisplayNameProps {\n  user: User;\n}\nfunction UserDisplayName({user}: UserDisplayNameProps) {\n  const {auth} = useContext(SiteConfigContext);\n  if (auth.getUserProfileLink) {\n    return (\n      <Link\n        to={auth.getUserProfileLink(user)}\n        className=\"hover:underline text-base font-medium\"\n      >\n        {user.display_name}\n      </Link>\n    );\n  }\n  return <div className=\"text-base font-medium\">{user.display_name}</div>;\n}\n","import {Comment} from '@common/comments/comment';\nimport {Trans} from '@common/i18n/trans';\nimport {CommentIcon} from '@common/icons/material/Comment';\nimport {Commentable} from '@common/comments/commentable';\nimport {useComments} from '@common/comments/requests/use-comments';\nimport {InfiniteScrollSentinel} from '@common/ui/infinite-scroll/infinite-scroll-sentinel';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {opacityAnimation} from '@common/ui/animation/opacity-animation';\nimport {FormattedNumber} from '@common/i18n/formatted-number';\nimport {IllustratedMessage} from '@common/ui/images/illustrated-message';\nimport {CommentListItem} from '@common/comments/comment-list/comment-list-item';\nimport {Skeleton} from '@common/ui/skeleton/skeleton';\nimport {ReactNode} from 'react';\nimport {AccountRequiredCard} from '@common/comments/comment-list/account-required-card';\nimport {message} from '@common/i18n/message';\n\nconst accountRequiredMessage = message(\n  'Please <l>login</l> or <r>create account</r> to comment'\n);\n\ninterface CommentListProps {\n  commentable: Commentable;\n  canDeleteAllComments?: boolean;\n  className?: string;\n  children?: ReactNode;\n  perPage?: number;\n}\nexport function CommentList({\n  className,\n  commentable,\n  canDeleteAllComments = false,\n  children,\n  perPage = 25,\n}: CommentListProps) {\n  const {items, totalItems, ...query} = useComments(commentable, {perPage});\n\n  if (query.isError) {\n    return null;\n  }\n\n  return (\n    <div className={className}>\n      <div className=\"mb-8 pb-8 border-b flex items-center gap-8\">\n        <CommentIcon size=\"sm\" className=\"text-muted\" />\n        {query.isInitialLoading ? (\n          <Trans message=\"Loading comments...\" />\n        ) : (\n          <Trans\n            message=\":count comments\"\n            values={{count: <FormattedNumber value={totalItems || 0} />}}\n          />\n        )}\n      </div>\n      {children}\n      <AccountRequiredCard message={accountRequiredMessage} />\n      <AnimatePresence initial={false} mode=\"wait\">\n        {query.isInitialLoading ? (\n          <CommentSkeletons count={4} />\n        ) : (\n          <CommentListItems\n            comments={items}\n            canDeleteAllComments={canDeleteAllComments}\n            commentable={commentable}\n          />\n        )}\n      </AnimatePresence>\n      <InfiniteScrollSentinel query={query} variant=\"loadMore\" />\n    </div>\n  );\n}\n\ninterface CommentListItemsProps {\n  comments: Comment[];\n  canDeleteAllComments: boolean;\n  commentable: Commentable;\n}\nfunction CommentListItems({\n  comments,\n  commentable,\n  canDeleteAllComments,\n}: CommentListItemsProps) {\n  if (!comments.length) {\n    return (\n      <IllustratedMessage\n        className=\"mt-24\"\n        size=\"sm\"\n        title={<Trans message=\"Seems a little quiet over here\" />}\n        description={<Trans message=\"Be the first to comment\" />}\n      />\n    );\n  }\n\n  return (\n    <m.div key=\"comments\" {...opacityAnimation}>\n      {comments.map(comment => (\n        <CommentListItem\n          key={comment.id}\n          comment={comment}\n          commentable={commentable}\n          canDelete={canDeleteAllComments}\n        />\n      ))}\n    </m.div>\n  );\n}\n\ninterface CommentSkeletonsProps {\n  count: number;\n}\nfunction CommentSkeletons({count}: CommentSkeletonsProps) {\n  return (\n    <m.div key=\"loading-skeleton\" {...opacityAnimation}>\n      {[...new Array(count).keys()].map(index => (\n        <div\n          key={index}\n          className=\"flex items-start gap-24 py-18 min-h-70 group\"\n        >\n          <Skeleton variant=\"avatar\" radius=\"rounded-full\" size=\"w-60 h-60\" />\n          <div className=\"text-sm flex-auto\">\n            <Skeleton className=\"text-base max-w-184 mb-4\" />\n            <Skeleton className=\"text-sm\" />\n            <div className=\"flex items-center gap-8 mt-10\">\n              <Skeleton className=\"text-sm max-w-70\" />\n              <Skeleton className=\"text-sm max-w-40\" />\n              <Skeleton className=\"text-sm max-w-60\" />\n            </div>\n          </div>\n        </div>\n      ))}\n    </m.div>\n  );\n}\n","import {useWatchPageVideo} from '@app/videos/requests/use-watch-page-video';\nimport {TitlePoster} from '@app/titles/title-poster/title-poster';\nimport {TitleLink} from '@app/titles/title-link';\nimport React, {Fragment, ReactNode, useState} from 'react';\nimport {Skeleton} from '@common/ui/skeleton/skeleton';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {opacityAnimation} from '@common/ui/animation/opacity-animation';\nimport {ThumbButtons} from '@common/votes/thumb-buttons';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {ShareIcon} from '@common/icons/material/Share';\nimport {FlagIcon} from '@common/icons/material/Flag';\nimport {Tooltip} from '@common/ui/tooltip/tooltip';\nimport {Trans} from '@common/i18n/trans';\nimport {useSubmitReport} from '@common/reports/requests/use-submit-report';\nimport {useDeleteReport} from '@common/reports/requests/use-delete-report';\nimport {Video} from '@app/titles/models/video';\nimport {useIsStreamingMode} from '@app/videos/use-is-streaming-mode';\nimport {EpisodeLink} from '@app/episodes/episode-link';\nimport {CompactSeasonEpisode} from '@app/episodes/compact-season-episode';\nimport {ShareMenuTrigger} from '@app/sharing/share-menu-trigger';\nimport {getWatchLink} from '@app/videos/watch-page/get-watch-link';\n\nexport function WatchPageTitleDetails() {\n  const {data} = useWatchPageVideo();\n  const isStreamingMode = useIsStreamingMode();\n\n  const content = !data ? (\n    <Layout\n      key=\"skeleton\"\n      poster={<Skeleton variant=\"rect\" size=\"w-132 aspect-poster\" />}\n      titleLink={<Skeleton className=\"max-w-144\" />}\n      videoName={<Skeleton className=\"max-w-240\" />}\n      description={\n        <Fragment>\n          <Skeleton />\n          <Skeleton />\n        </Fragment>\n      }\n      rate={\n        <div className=\"flex h-32 items-center gap-2\">\n          <Skeleton variant=\"rect\" size=\"w-56 h-24\" className=\"mr-10\" />\n          <Skeleton variant=\"rect\" size=\"w-56 h-24\" />\n        </div>\n      }\n    />\n  ) : (\n    <Layout\n      key=\"loaded\"\n      poster={\n        <TitlePoster\n          size=\"w-132\"\n          srcSize=\"md\"\n          title={data.title}\n          showPlayButton\n        />\n      }\n      titleLink={<TitleLink title={data.title} />}\n      videoName={!isStreamingMode ? data.video.name : undefined}\n      episodeName={\n        data.episode ? (\n          <EpisodeLink title={data.title} episode={data.episode}>\n            {data.episode.name} (<CompactSeasonEpisode episode={data.episode} />\n            )\n          </EpisodeLink>\n        ) : undefined\n      }\n      description={data.episode?.description || data.title.description}\n      rate={\n        <div className=\"flex items-center gap-2\">\n          <ThumbButtons model={data.video} className=\"mr-auto\" />\n          <ReportButton video={data.video} />\n          <ShareButton video={data.video} />\n        </div>\n      }\n    />\n  );\n\n  return (\n    <AnimatePresence initial={false} mode=\"wait\">\n      {content}\n    </AnimatePresence>\n  );\n}\n\ninterface ShareButtonProps {\n  video: Video;\n}\nfunction ShareButton({video}: ShareButtonProps) {\n  const link = getWatchLink(video, {absolute: true});\n  return (\n    <ShareMenuTrigger link={link}>\n      <Tooltip label={<Trans message=\"Share\" />}>\n        <IconButton>\n          <ShareIcon />\n        </IconButton>\n      </Tooltip>\n    </ShareMenuTrigger>\n  );\n}\n\ninterface ReportButtonProps {\n  video: Video;\n}\nfunction ReportButton({video}: ReportButtonProps) {\n  const report = useSubmitReport(video);\n  const deleteReport = useDeleteReport(video);\n  const [isReported, setIsReported] = useState(video.current_user_reported);\n\n  return (\n    <Tooltip label={<Trans message=\"Report\" />}>\n      <IconButton\n        onClick={() => {\n          if (isReported) {\n            deleteReport.mutate();\n          } else {\n            report.mutate({});\n          }\n          setIsReported(!isReported);\n        }}\n      >\n        <FlagIcon />\n      </IconButton>\n    </Tooltip>\n  );\n}\n\ninterface LayoutProps {\n  poster: ReactNode;\n  titleLink: ReactNode;\n  videoName: ReactNode;\n  episodeName?: ReactNode;\n  description: ReactNode;\n  rate?: ReactNode;\n}\nfunction Layout({\n  poster,\n  titleLink,\n  videoName,\n  episodeName,\n  description,\n  rate,\n}: LayoutProps) {\n  return (\n    <m.div\n      className=\"flex items-start gap-16 overflow-hidden rounded pr-6\"\n      {...opacityAnimation}\n    >\n      {poster}\n      <div className=\"flex-auto py-6\">\n        <h1 className=\"mb-6 text-2xl font-medium\">{titleLink}</h1>\n        {episodeName && (\n          <div className=\"text-base font-medium\">{episodeName}</div>\n        )}\n        {videoName && <div className=\"text-base font-medium\">{videoName}</div>}\n        <div className=\"my-12\">{rate}</div>\n        {description && (\n          <p className=\"max-w-780 text-sm text-muted\">{description}</p>\n        )}\n      </div>\n    </m.div>\n  );\n}\n","import {SiteSectionHeading} from '@app/titles/site-section-heading';\nimport {Trans} from '@common/i18n/trans';\nimport {VideoGridItem, VideoGridItemSkeleton} from '@app/titles/video-grid';\nimport React, {ReactNode} from 'react';\nimport {useWatchPageVideo} from '@app/videos/requests/use-watch-page-video';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {opacityAnimation} from '@common/ui/animation/opacity-animation';\nimport {useIsStreamingMode} from '@app/videos/use-is-streaming-mode';\nimport {Video} from '@app/titles/models/video';\nimport {CompactSeasonEpisode} from '@app/episodes/compact-season-episode';\nimport clsx from 'clsx';\n\nexport function WatchPageAside() {\n  const {data} = useWatchPageVideo();\n\n  const content = !data ? (\n    <m.div key=\"skeleton\" {...opacityAnimation}>\n      <VideoGridItemSkeleton className=\"mb-34\" />\n      <VideoGridItemSkeleton className=\"mb-34\" />\n      <VideoGridItemSkeleton className=\"mb-34\" />\n    </m.div>\n  ) : (\n    <m.div key=\"loaded\" {...opacityAnimation}>\n      {data.related_videos.map(video => (\n        <RelatedVideo video={video} key={video.id} activeVideo={data.video} />\n      ))}\n    </m.div>\n  );\n\n  return (\n    <aside className=\"w-350 flex-shrink-0\">\n      <SiteSectionHeading\n        fontWeight=\"font-medium\"\n        fontSize=\"text-2xl\"\n        margin=\"mb-28\"\n      >\n        <Header video={data?.video} />\n      </SiteSectionHeading>\n      <AnimatePresence initial={false} mode=\"wait\">\n        {content}\n      </AnimatePresence>\n    </aside>\n  );\n}\n\ninterface HeaderProps {\n  video?: Video;\n}\nfunction Header({video}: HeaderProps) {\n  const isStreamingMode = useIsStreamingMode();\n\n  if (!video) {\n    return <div className=\"h-32\" />;\n  }\n\n  return isStreamingMode ? (\n    <Trans message=\"Related movies & series\" />\n  ) : (\n    <Trans message=\"Related videos\" />\n  );\n}\n\ninterface RelatedVideoProps {\n  video: Video;\n  activeVideo: Video;\n}\nfunction RelatedVideo({video, activeVideo}: RelatedVideoProps) {\n  const isStreamingMode = useIsStreamingMode();\n\n  let name: ReactNode = video.name;\n\n  if (isStreamingMode) {\n    if (video.episode) {\n      name = (\n        <span>\n          {video.episode.name} (<CompactSeasonEpisode episode={video.episode} />\n          )\n        </span>\n      );\n    } else {\n      name = video.title!.name;\n    }\n  }\n\n  return (\n    <VideoGridItem\n      video={video}\n      title={video.title}\n      episode={video.episode}\n      forceTitleBackdrop={isStreamingMode}\n      className={clsx(\n        'mb-24 text-sm',\n        activeVideo.id === video.id && 'text-primary'\n      )}\n      showCategory={!isStreamingMode}\n      name={name}\n    />\n  );\n}\n","import {UseWatchPageVideoResponse} from '@app/videos/requests/use-watch-page-video';\nimport {MediaPlayIcon} from '@common/icons/media/media-play';\nimport {getWatchLink} from '@app/videos/watch-page/get-watch-link';\nimport {Button} from '@common/ui/buttons/button';\nimport {Link, useParams} from 'react-router-dom';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {Skeleton} from '@common/ui/skeleton/skeleton';\nimport {opacityAnimation} from '@common/ui/animation/opacity-animation';\nimport clsx from 'clsx';\nimport {Video} from '@app/titles/models/video';\n\nconst className = 'flex items-center flex-wrap gap-14 mt-14';\n\ninterface Props {\n  data: UseWatchPageVideoResponse | undefined;\n}\nexport function WatchPageVideoSelector({data}: Props) {\n  return (\n    <AnimatePresence initial={false} mode=\"wait\">\n      {data ? <VideoList videos={data.alternative_videos} /> : <Skeletons />}\n    </AnimatePresence>\n  );\n}\n\ninterface VideoListProps {\n  videos: Video[];\n}\nfunction VideoList({videos}: VideoListProps) {\n  const {videoId} = useParams();\n\n  if (videos.length < 2) {\n    return null;\n  }\n\n  return (\n    <m.div\n      key=\"alternative-sources\"\n      className={className}\n      {...opacityAnimation}\n    >\n      {videos.map(video => (\n        <Button\n          elementType={Link}\n          to={getWatchLink(video)}\n          key={video.id}\n          variant=\"outline\"\n          color={videoId === `${video.id}` ? 'primary' : 'chip'}\n          startIcon={<MediaPlayIcon aria-hidden />}\n          className=\"min-h-42\"\n        >\n          {video.name}\n        </Button>\n      ))}\n    </m.div>\n  );\n}\n\nfunction Skeletons() {\n  return (\n    <m.div\n      key=\"skeletons\"\n      className={clsx(className, 'h-42')}\n      {...opacityAnimation}\n    >\n      <Skeleton variant=\"rect\" size=\"h-full w-[116px]\" />\n      <Skeleton variant=\"rect\" size=\"h-full w-[116px]\" />\n      <Skeleton variant=\"rect\" size=\"h-full w-[116px]\" />\n      <Skeleton variant=\"rect\" size=\"h-full w-[116px]\" />\n      <Skeleton variant=\"rect\" size=\"h-full w-[116px]\" />\n    </m.div>\n  );\n}\n","import React, {Fragment} from 'react';\nimport {MainNavbar} from '@app/main-navbar';\nimport {useDarkThemeVariables} from '@common/ui/themes/use-dark-theme-variables';\nimport {useWatchPageVideo} from '@app/videos/requests/use-watch-page-video';\nimport {Footer} from '@common/ui/footer/footer';\nimport {PageErrorMessage} from '@common/errors/page-error-message';\nimport {CommentList} from '@common/comments/comment-list/comment-list';\nimport {NewCommentForm} from '@common/comments/new-comment-form';\nimport {WatchPageTitleDetails} from '@app/videos/watch-page/watch-page-title-details';\nimport {WatchPageAside} from '@app/videos/watch-page/watch-page-aside';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {opacityAnimation} from '@common/ui/animation/opacity-animation';\nimport {useScrollToTop} from '@common/ui/navigation/use-scroll-to-top';\nimport {VideoPlayerSkeleton} from '@app/videos/video-player-skeleton';\nimport {SiteVideoPlayer} from '@app/videos/site-video-player';\nimport {useSettings} from '@common/core/settings/use-settings';\nimport {useAuth} from '@common/auth/use-auth';\nimport {useIsStreamingMode} from '@app/videos/use-is-streaming-mode';\nimport {WatchPageVideoSelector} from '@app/videos/watch-page/watch-page-video-selector';\nimport {StaticPageTitle} from '@common/seo/static-page-title';\nimport {Trans} from '@common/i18n/trans';\nimport {AdHost} from '@common/admin/ads/ad-host';\nimport {Episode} from '@app/titles/models/episode';\nimport {Title} from '@app/titles/models/title';\nimport {Video} from '@app/titles/models/video';\n\nexport function WatchPage() {\n  const darkThemeVars = useDarkThemeVariables();\n  useScrollToTop();\n\n  return (\n    <Fragment>\n      <MainNavbar position=\"fixed\" />\n      <div style={darkThemeVars} className=\"dark min-h-screen bg text\">\n        <div className=\"container mx-auto pt-76\">\n          <Content />\n        </div>\n        <Footer className=\"container mx-auto mt-48 flex-shrink-0\" />\n      </div>\n    </Fragment>\n  );\n}\n\nfunction Content() {\n  const {titles, comments, streaming} = useSettings();\n  const isStreamingMode = useIsStreamingMode();\n  const {hasPermission} = useAuth();\n  const {data, isLoading} = useWatchPageVideo();\n  const title = data?.title;\n  const episode = data?.episode;\n  const video = data?.video;\n  let commentable: Episode | Title | Video | undefined = video;\n\n  if (!comments?.per_video) {\n    commentable = episode || title;\n  }\n\n  const shouldShowComments =\n    title && video && titles.enable_comments && hasPermission('comments.view');\n\n  if (data || isLoading) {\n    return (\n      <Fragment key={video?.id || 'loading'}>\n        {title && (\n          <StaticPageTitle>\n            <Trans message=\"Watch :name\" values={{name: title.name}} />\n          </StaticPageTitle>\n        )}\n        <AnimatePresence initial={false} mode=\"wait\">\n          {video ? (\n            <m.div key=\"player\" {...opacityAnimation}>\n              <SiteVideoPlayer\n                title={title}\n                episode={data?.episode}\n                video={video}\n                relatedVideos={data?.related_videos}\n                autoPlay\n                logPlays\n                showEpisodeSelector={isStreamingMode}\n              />\n            </m.div>\n          ) : (\n            <m.div className=\"relative\" key=\"skeleton\" {...opacityAnimation}>\n              <VideoPlayerSkeleton animate />\n            </m.div>\n          )}\n        </AnimatePresence>\n        {streaming.show_video_selector ? (\n          <WatchPageVideoSelector data={data} />\n        ) : null}\n        <AdHost slot=\"watch_top\" className=\"pt-48\" />\n        <section className=\"mt-42 flex items-start gap-56\">\n          <div className=\"flex-auto\">\n            <WatchPageTitleDetails />\n            {shouldShowComments && (\n              <CommentList\n                commentable={commentable!}\n                className=\"mt-44\"\n                perPage={20}\n              >\n                <NewCommentForm\n                  commentable={commentable!}\n                  className=\"mb-14 mt-24\"\n                />\n              </CommentList>\n            )}\n          </div>\n          <WatchPageAside />\n        </section>\n      </Fragment>\n    );\n  }\n\n  return <PageErrorMessage />;\n}\n","import React, {Fragment} from 'react';\nimport {PageMetaTags} from '@common/http/page-meta-tags';\nimport {PageStatus} from '@common/http/page-status';\nimport {TitlePageHeaderImage} from '@app/titles/pages/title-page/title-page-header-image';\nimport {Title} from '@app/titles/models/title';\nimport {VideoGrid} from '@app/titles/video-grid';\nimport {TitlePageHeader} from '@app/titles/pages/title-page/title-page-header';\nimport {Trans} from '@common/i18n/trans';\nimport {SiteSectionHeading} from '@app/titles/site-section-heading';\nimport {SitePageLayout} from '@app/site-page-layout';\nimport {useTitlePageData} from '@app/titles/requests/use-title-page-data';\n\nexport function TitleVideosPage() {\n  const query = useTitlePageData();\n\n  const content = query.data ? (\n    <Fragment>\n      <PageMetaTags query={query} />\n      <PageContent title={query.data.title} />;\n    </Fragment>\n  ) : (\n    <PageStatus query={query} loaderClassName=\"absolute inset-0 m-auto\" />\n  );\n\n  return <SitePageLayout>{content}</SitePageLayout>;\n}\n\ninterface PageContentProps {\n  title: Title;\n}\nfunction PageContent({title}: PageContentProps) {\n  return (\n    <div>\n      <TitlePageHeaderImage title={title} />\n      <div className=\"container mx-auto mt-40\">\n        <TitlePageHeader title={title} showPoster />\n        <VideoGrid\n          videos={title.videos}\n          title={title}\n          count={24}\n          heading={\n            <SiteSectionHeading>\n              <Trans message=\"Video gallery\" />\n            </SiteSectionHeading>\n          }\n        />\n      </div>\n    </div>\n  );\n}\n","import React, {Fragment} from 'react';\nimport {PageMetaTags} from '@common/http/page-meta-tags';\nimport {PageStatus} from '@common/http/page-status';\nimport {TitlePageHeaderImage} from '@app/titles/pages/title-page/title-page-header-image';\nimport {Title} from '@app/titles/models/title';\nimport {TitlePageHeader} from '@app/titles/pages/title-page/title-page-header';\nimport {SitePageLayout} from '@app/site-page-layout';\nimport {TitlePageImageGrid} from '@app/titles/pages/title-page/sections/title-page-image-grid';\nimport {SiteSectionHeading} from '@app/titles/site-section-heading';\nimport {Trans} from '@common/i18n/trans';\nimport {useTitlePageData} from '@app/titles/requests/use-title-page-data';\n\nexport function TitleImagesPage() {\n  const query = useTitlePageData();\n\n  const content = query.data ? (\n    <Fragment>\n      <PageMetaTags query={query} />\n      <PageContent title={query.data.title} />;\n    </Fragment>\n  ) : (\n    <PageStatus query={query} loaderClassName=\"absolute inset-0 m-auto\" />\n  );\n\n  return <SitePageLayout>{content}</SitePageLayout>;\n}\n\ninterface PageContentProps {\n  title: Title;\n}\nfunction PageContent({title}: PageContentProps) {\n  return (\n    <div>\n      <TitlePageHeaderImage title={title} />\n      <div className=\"container mx-auto mt-40\">\n        <TitlePageHeader title={title} showPoster />\n        <TitlePageImageGrid\n          images={title.images}\n          srcSize=\"lg\"\n          count={24}\n          heading={\n            <SiteSectionHeading>\n              <Trans message=\"Image gallery\" />\n            </SiteSectionHeading>\n          }\n        />\n      </div>\n    </div>\n  );\n}\n","import {\n  DetailItem,\n  TitlePageAsideLayout,\n} from '@app/titles/pages/title-page/title-page-aside-layout';\nimport {PersonPoster} from '@app/people/person-poster/person-poster';\nimport {Trans} from '@common/i18n/trans';\nimport {FormattedDate} from '@common/i18n/formatted-date';\nimport React from 'react';\nimport {PersonAge} from '@app/people/person-age';\nimport {GetPersonResponse} from '@app/people/requests/use-person';\n\ninterface Props {\n  data: GetPersonResponse;\n}\nexport function PersonPageAside({data: {person, total_credits_count}}: Props) {\n  return (\n    <TitlePageAsideLayout\n      poster={\n        <PersonPoster person={person} size=\"w-140 md:w-full\" srcSize=\"lg\" />\n      }\n    >\n      <dl className=\"md:mt-24\">\n        {person.known_for && (\n          <DetailItem label={<Trans message=\"Known for\" />}>\n            {person.known_for}\n          </DetailItem>\n        )}\n        {person.gender && (\n          <DetailItem label={<Trans message=\"Gender\" />}>\n            <span className=\"capitalize\">{person.gender}</span>\n          </DetailItem>\n        )}\n        {total_credits_count ? (\n          <DetailItem label={<Trans message=\"Known credits\" />}>\n            {total_credits_count}\n          </DetailItem>\n        ) : null}\n        {person.birth_date ? (\n          <DetailItem label={<Trans message=\"Birthdate\" />}>\n            <FormattedDate date={person.birth_date} /> (\n            <Trans\n              message=\":count years old\"\n              values={{count: <PersonAge person={person} />}}\n            />\n            )\n          </DetailItem>\n        ) : null}\n        {person.birth_place ? (\n          <DetailItem label={<Trans message=\"Birthplace\" />}>\n            {person.birth_place}\n          </DetailItem>\n        ) : null}\n        {person.death_date ? (\n          <DetailItem label={<Trans message=\"Date of death\" />}>\n            <FormattedDate date={person.death_date} />\n          </DetailItem>\n        ) : null}\n      </dl>\n    </TitlePageAsideLayout>\n  );\n}\n","import {useQuery} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {EpisodeCredit, PersonCredit} from '@app/titles/models/title';\nimport {Person} from '@app/titles/models/person';\n\nexport interface GetFullTitleCreditsResponse extends BackendResponse {\n  credits: EpisodeCredit[];\n}\n\ninterface Params {\n  credit: PersonCredit;\n  department: string;\n  person: Person;\n}\n\ninterface Options {\n  enabled?: boolean;\n}\n\nexport function useFullPersonCreditsForTitle(\n  {person, credit, department}: Params,\n  options: Options\n) {\n  return useQuery(\n    ['people', `${person.id}`, 'full-credits', `${credit.id}`, `${department}`],\n    () => fetchCredits(person.id, credit.id, department),\n    {enabled: options.enabled}\n  );\n}\n\nfunction fetchCredits(\n  personId: number | string,\n  titleId: number | string,\n  department: string\n) {\n  return apiClient\n    .get<GetFullTitleCreditsResponse>(\n      `people/${personId}/full-credits/${titleId}/${department}`\n    )\n    .then(response => response.data);\n}\n","import {EpisodeCredit, PersonCredit} from '@app/titles/models/title';\nimport {Trans} from '@common/i18n/trans';\n\ninterface Props {\n  credit: PersonCredit | EpisodeCredit;\n  className?: string;\n}\nexport function CharacterOrJob({credit, className}: Props) {\n  return (\n    <div className={className}>\n      {credit.pivot?.department === 'actors' ? (\n        credit.pivot?.character ?? <Trans message=\"Unknown\" />\n      ) : (\n        <span className=\"capitalize\">\n          {credit.pivot?.job ?? <Trans message=\"Unknown\" />}\n        </span>\n      )}\n    </div>\n  );\n}\n","import {GetPersonResponse} from '@app/people/requests/use-person';\nimport {Accordion, AccordionItem} from '@common/ui/accordion/accordion';\nimport {Trans} from '@common/i18n/trans';\nimport {TitlePoster} from '@app/titles/title-poster/title-poster';\nimport {SiteSectionHeading} from '@app/titles/site-section-heading';\nimport {TitleLink} from '@app/titles/title-link';\nimport {PersonCredit} from '@app/titles/models/title';\nimport {BulletSeparatedItems} from '@app/titles/bullet-separated-items';\nimport {CompactSeasonEpisode} from '@app/episodes/compact-season-episode';\nimport {EpisodeLink} from '@app/episodes/episode-link';\nimport {Button} from '@common/ui/buttons/button';\nimport {Fragment, useState} from 'react';\nimport {useFullPersonCreditsForTitle} from '@app/people/requests/use-full-person-credits-for-title';\nimport {CharacterOrJob} from '@app/people/person-page/character-or-job';\nimport {Person} from '@app/titles/models/person';\n\ninterface Props {\n  data: GetPersonResponse;\n}\nexport function PersonPageCredits({data: {credits, person}}: Props) {\n  return (\n    <div className=\"mt-34\">\n      <SiteSectionHeading fontSize=\"text-xl\">\n        <Trans message=\"Credits\" />\n      </SiteSectionHeading>\n      <Accordion mode=\"multiple\" defaultExpandedValues={[0]} isLazy>\n        {Object.entries(credits).map(([department, credits]) => (\n          <AccordionItem\n            labelClassName=\"font-semibold text-base\"\n            description={\n              <Trans\n                message=\"(:count credits)\"\n                values={{count: credits.length}}\n              />\n            }\n            key={department}\n            label={\n              <span className=\"capitalize\">\n                <Trans\n                  message={department === 'actors' ? 'Acting' : department}\n                />\n              </span>\n            }\n          >\n            {credits.map((credit, index) => {\n              const isLast = credit === credits[credits.length - 1];\n              return (\n                <Fragment key={credit.id}>\n                  <div className=\"flex items-start py-6\">\n                    <TitlePoster\n                      title={credit}\n                      size=\"w-40\"\n                      className=\"mr-12\"\n                      lazy\n                      srcSize=\"sm\"\n                    />\n                    <div className=\"mr-24 pt-2\">\n                      <div className=\"font-semibold text-base\">\n                        <TitleLink title={credit} />\n                      </div>\n                      <CharacterOrJob\n                        className=\"text-sm text-muted\"\n                        credit={credit}\n                      />\n                      {credit.credited_episode_count ? (\n                        <EpisodeList\n                          credit={credit}\n                          department={department}\n                          person={person}\n                        />\n                      ) : null}\n                    </div>\n                    <div className=\"text-sm text-muted ml-auto\">\n                      {credit.year}\n                    </div>\n                  </div>\n                  {!isLast && credit.year !== credits[index + 1]?.year && (\n                    <div className=\"h-1 w-full bg-divider my-8\" />\n                  )}\n                </Fragment>\n              );\n            })}\n          </AccordionItem>\n        ))}\n      </Accordion>\n    </div>\n  );\n}\n\ninterface EpisodeListProps {\n  credit: PersonCredit;\n  department: string;\n  person: Person;\n}\nfunction EpisodeList({credit, department, person}: EpisodeListProps) {\n  const [loadMoreEpisodes, setLoadMoreEpisodes] = useState(false);\n  const query = useFullPersonCreditsForTitle(\n    {person, department, credit},\n    {\n      enabled: loadMoreEpisodes,\n    }\n  );\n  const allEpisodesLoaded =\n    credit.episodes.length === credit.credited_episode_count ||\n    query.data != null;\n  const isLoadingMore = query.isLoading && query.fetchStatus !== 'idle';\n  const shouldShowLoadMoreBtn = isLoadingMore || !allEpisodesLoaded;\n  const episodeCredits = query.data?.credits.length\n    ? query.data.credits\n    : credit.episodes;\n\n  return (\n    <div className=\"mt-4\">\n      <div>\n        {episodeCredits.map(episodeCredit => (\n          <div className=\"text-xs pl-10 mb-4\" key={episodeCredit.id}>\n            <BulletSeparatedItems>\n              <span>\n                -{' '}\n                <EpisodeLink\n                  title={credit}\n                  episode={episodeCredit}\n                  seasonNumber={episodeCredit.season_number}\n                />{' '}\n                ({episodeCredit.year})\n              </span>\n              <CompactSeasonEpisode episode={episodeCredit} />\n              <CharacterOrJob credit={episodeCredit} />\n            </BulletSeparatedItems>\n          </div>\n        ))}\n      </div>\n      {shouldShowLoadMoreBtn && (\n        <div className=\"mt-8\">\n          <Button\n            size=\"xs\"\n            disabled={isLoadingMore}\n            onClick={() => {\n              setLoadMoreEpisodes(true);\n            }}\n          >\n            <Trans\n              message=\"Show all :count episodes\"\n              values={{count: credit.credited_episode_count}}\n            />\n          </Button>\n        </div>\n      )}\n    </div>\n  );\n}\n","import {PageStatus} from '@common/http/page-status';\nimport {PageMetaTags} from '@common/http/page-meta-tags';\nimport React, {Fragment} from 'react';\nimport {SitePageLayout} from '@app/site-page-layout';\nimport {GetPersonResponse, usePerson} from '@app/people/requests/use-person';\nimport {Person} from '@app/titles/models/person';\nimport {Trans} from '@common/i18n/trans';\nimport {TitlePageHeaderLayout} from '@app/titles/pages/title-page/title-page-header-layout';\nimport {SiteSectionHeading} from '@app/titles/site-section-heading';\nimport {PersonPageAside} from '@app/people/person-page/person-page-aside';\nimport {ContentGridLayout} from '@app/channels/content-grid/content-grid-layout';\nimport {PersonCredit} from '@app/titles/models/title';\nimport {TitlePortraitGridItem} from '@app/channels/content-grid/title-grid-item';\nimport {PersonPageCredits} from '@app/people/person-page/person-page-credits';\nimport {TruncatedDescription} from '@common/ui/truncated-description';\nimport {CharacterOrJob} from '@app/people/person-page/character-or-job';\nimport {AdHost} from '@common/admin/ads/ad-host';\n\nexport function PersonPage() {\n  const query = usePerson();\n  console.log(query.data)\n  const content = query.data ? (\n    <Fragment>\n      <PageMetaTags query={query} />\n      <PageContent data={query.data} />\n    </Fragment>\n  ) : (\n    <PageStatus query={query} loaderClassName=\"absolute inset-0 m-auto\" />\n  );\n\n  return <SitePageLayout>{content}</SitePageLayout>;\n}\n\ninterface PageContentProps {\n  data: GetPersonResponse;\n}\nfunction PageContent({data}: PageContentProps) {\n  const {person, knownFor} = data;\n  return (\n    <Fragment>\n      <div className=\"container mx-auto mt-14 px-14 md:mt-40 md:px-24\">\n        <div className=\"items-start gap-54 md:flex\">\n          <PersonPageAside data={data} />\n          <main className=\"flex-auto @container max-md:mt-34\">\n            <TitlePageHeaderLayout name={person.name} />\n            <Biography person={person} />\n            <AdHost slot=\"person_top\" className=\"pt-48\" />\n            <KnowForList items={knownFor} />\n            <PersonPageCredits data={data} />\n          </main>\n        </div>\n      </div>\n    </Fragment>\n  );\n}\n\ninterface BiographyProps {\n  person: Person;\n}\nfunction Biography({person}: BiographyProps) {\n  if (!person.body) return null;\n  return (\n    <Fragment>\n      <SiteSectionHeading fontSize=\"text-xl\">\n        <Trans message=\"Biography\" />\n      </SiteSectionHeading>\n      <TruncatedDescription\n        className=\"text-sm\"\n        description={person.body}\n      />\n    </Fragment>\n  );\n}\n\ninterface KnownForProps {\n  items: PersonCredit[];\n}\nfunction KnowForList({items}: KnownForProps) {\n  if (!items?.length) return null;\n  return (\n    <div className=\"mt-34\">\n      <SiteSectionHeading fontSize=\"text-xl\">\n        <Trans message=\"Known for\" />\n      </SiteSectionHeading>\n      <ContentGridLayout variant=\"portrait\">\n        {items.slice(0, 4).map(item => (\n          <TitlePortraitGridItem\n            key={item.id}\n            item={item}\n            description={\n              <CharacterOrJob className=\"text-muted\" credit={item} />\n            }\n          />\n        ))}\n      </ContentGridLayout>\n    </div>\n  );\n}\n","import React, {Fragment} from 'react';\nimport {PageMetaTags} from '@common/http/page-meta-tags';\nimport {PageStatus} from '@common/http/page-status';\nimport {TitlePageHeaderImage} from '@app/titles/pages/title-page/title-page-header-image';\nimport {TitlePageHeader} from '@app/titles/pages/title-page/title-page-header';\nimport {SitePageLayout} from '@app/site-page-layout';\nimport {GetTitleResponse, useTitle} from '@app/titles/requests/use-title';\nimport {SiteSectionHeading} from '@app/titles/site-section-heading';\nimport {Trans} from '@common/i18n/trans';\nimport {TitleCreditsGrid} from '@app/titles/pages/title-page/title-credits-grid/title-credits-grid';\n\nexport function TitleFullCreditsPage() {\n  const query = useTitle({\n    load: ['credits'],\n  });\n\n  const content = query.data ? (\n    <Fragment>\n      <PageMetaTags query={query} />\n      <PageContent data={query.data} />\n    </Fragment>\n  ) : (\n    <PageStatus query={query} loaderClassName=\"absolute inset-0 m-auto\" />\n  );\n\n  return <SitePageLayout>{content}</SitePageLayout>;\n}\n\ninterface PageContentProps {\n  data: GetTitleResponse;\n}\nfunction PageContent({\n  data: {title, credits: groupedCredits},\n}: PageContentProps) {\n  return (\n    <div>\n      <TitlePageHeaderImage title={title} />\n      <div className=\"container mx-auto mt-40\">\n        <TitlePageHeader title={title} showPoster />\n        <div className=\"mt-48 @container\">\n          <SiteSectionHeading headingType=\"h2\" className=\"mb-40\">\n            <Trans message=\"Full cast and crew\" />\n          </SiteSectionHeading>\n          {Object.entries(groupedCredits).map(([department, credits]) => (\n            <div key={department}>\n              <h3 className=\"font-bold text-2xl mb-16 capitalize\">\n                <Trans message={department} />\n              </h3>\n              <TitleCreditsGrid credits={credits} className=\"mb-68\" />\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, {Fragment} from 'react';\nimport {PageMetaTags} from '@common/http/page-meta-tags';\nimport {PageStatus} from '@common/http/page-status';\nimport {TitlePageHeaderImage} from '@app/titles/pages/title-page/title-page-header-image';\nimport {SitePageLayout} from '@app/site-page-layout';\nimport {SiteSectionHeading} from '@app/titles/site-section-heading';\nimport {Trans} from '@common/i18n/trans';\nimport {TitleCreditsGrid} from '@app/titles/pages/title-page/title-credits-grid/title-credits-grid';\nimport {\n  GetEpisodeResponse,\n  useEpisode,\n} from '@app/episodes/requests/use-episode';\nimport {EpisodePageHeader} from '@app/episodes/episode-page-header';\n\nexport function EpisodeFullCreditsPage() {\n  const query = useEpisode({\n    load: ['credits'],\n  });\n\n  const content = query.data ? (\n    <Fragment>\n      <PageMetaTags query={query} />\n      <PageContent data={query.data} />\n    </Fragment>\n  ) : (\n    <PageStatus query={query} loaderClassName=\"absolute inset-0 m-auto\" />\n  );\n\n  return <SitePageLayout>{content}</SitePageLayout>;\n}\n\ninterface PageContentProps {\n  data: GetEpisodeResponse;\n}\nfunction PageContent({\n  data: {title, episode, credits: groupedCredits},\n}: PageContentProps) {\n  return (\n    <div>\n      <TitlePageHeaderImage title={title} episode={episode} />\n      <div className=\"container mx-auto mt-40\">\n        <EpisodePageHeader title={title} episode={episode} showPoster />\n        <div className=\"mt-48 @container\">\n          <SiteSectionHeading headingType=\"h2\" className=\"mb-40\">\n            <Trans message=\"Full cast and crew\" />\n          </SiteSectionHeading>\n          {Object.entries(groupedCredits).map(([department, credits]) => (\n            <div key={department}>\n              <h3 className=\"font-bold text-2xl mb-16 capitalize\">\n                <Trans message={department} />\n              </h3>\n              <TitleCreditsGrid credits={credits} className=\"mb-68\" />\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import {useQuery} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {PaginatedBackendResponse} from '@common/http/backend-response/pagination-response';\nimport {NewsArticle} from '@app/titles/models/news-article';\n\ninterface Response extends PaginatedBackendResponse<NewsArticle> {}\n\ninterface Params {\n  perPage?: number;\n}\n\nexport function useNewsArticles(params?: Params) {\n  return useQuery(['news', params], () => fetchNewsArticles(params));\n}\n\nfunction fetchNewsArticles(params?: Params) {\n  return apiClient\n    .get<Response>(`news`, {params})\n    .then(response => response.data);\n}\n","import React, {Fragment} from 'react';\nimport {PageMetaTags} from '@common/http/page-meta-tags';\nimport {PageStatus} from '@common/http/page-status';\nimport {SitePageLayout} from '@app/site-page-layout';\nimport {useNewsArticle} from '@app/admin/news/requests/use-news-article';\nimport {NewsArticle} from '@app/titles/models/news-article';\nimport {useNewsArticles} from '@app/news/requests/use-news-articles';\nimport {Trans} from '@common/i18n/trans';\nimport {FormattedDate} from '@common/i18n/formatted-date';\nimport {BulletSeparatedItems} from '@app/titles/bullet-separated-items';\nimport {NewsArticleImage} from '@app/news/news-article-image';\nimport {NewsArticleLink} from '@app/news/news-article-link';\nimport {NewsArticleByline} from '@app/news/news-article-byline';\nimport {NewsArticleSourceLink} from '@app/news/news-article-source-link';\n\nexport function NewsArticlePage() {\n  const query = useNewsArticle();\n\n  const content = query.data ? (\n    <Fragment>\n      <PageMetaTags query={query} />\n      <PageContent article={query.data.article} />\n    </Fragment>\n  ) : (\n    <PageStatus query={query} loaderClassName=\"absolute inset-0 m-auto\" />\n  );\n\n  return <SitePageLayout>{content}</SitePageLayout>;\n}\n\ninterface PageContentProps {\n  article: NewsArticle;\n}\nfunction PageContent({article}: PageContentProps) {\n  return (\n    <div className=\"lg:flex items-start gap-40 container mx-auto mt-14 md:mt-40 px-14 md:px-24\">\n      <main className=\"p-16 border rounded mb-24\">\n        <div className=\"flex-auto\">\n          <h1 className=\"text-3xl md:text-4xl mb-24\">{article.title}</h1>\n          <div className=\"md:flex items-start gap-16\">\n            <NewsArticleImage\n              article={article}\n              size=\"w-184 h-184\"\n              className=\"max-md:mb-24\"\n            />\n            <p dangerouslySetInnerHTML={{__html: article.body}} />\n          </div>\n          <BulletSeparatedItems className=\"text-muted text-sm mt-24\">\n            <FormattedDate date={article.created_at} />\n            <NewsArticleByline article={article} />\n            <NewsArticleSourceLink article={article} />\n          </BulletSeparatedItems>\n        </div>\n      </main>\n      <OtherNews />\n    </div>\n  );\n}\n\nfunction OtherNews() {\n  const query = useNewsArticles({\n    perPage: 10,\n  });\n\n  return (\n    <div className=\"w-full lg:w-400 max-w-full flex-shrink-0\">\n      <h2 className=\"text-2xl mb-14\">\n        <Trans message=\"Other news\" />\n      </h2>\n      {query.data?.pagination.data.map(article => (\n        <div\n          key={article.id}\n          className=\"flex items-center gap-14 rounded border mb-14 pr-14\"\n        >\n          <NewsArticleImage article={article} size=\"w-80 h-80\" lazy={false} />\n          <div>\n            <h3 className=\"text-sm font-semibold line-clamp-2\">\n              <NewsArticleLink article={article} />\n            </h3>\n            <BulletSeparatedItems className=\"text-muted text-sm mt-6\">\n              <FormattedDate date={article.created_at} />\n              <NewsArticleByline article={article} />\n            </BulletSeparatedItems>\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {toast} from '@common/ui/toast/toast';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {message} from '@common/i18n/message';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {showHttpErrorToast} from '@common/utils/http/show-http-error-toast';\n\ninterface Response extends BackendResponse {}\n\ninterface Payload {\n  listId: number | string;\n}\n\nexport function useDeleteList() {\n  const {trans} = useTrans();\n  return useMutation((payload: Payload) => deleteList(payload), {\n    onSuccess: async () => {\n      await queryClient.invalidateQueries(['channel']);\n      toast(trans(message('List deleted')));\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n\nfunction deleteList(payload: Payload) {\n  return apiClient\n    .delete<Response>(`channel/${payload.listId}`)\n    .then(r => r.data);\n}\n","import {Channel} from '@common/channels/channel';\nimport {Title} from '@app/titles/models/title';\nimport {Person} from '@app/titles/models/person';\nimport {useDeleteList} from '@app/user-lists/requests/use-delete-list';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {ConfirmationDialog} from '@common/ui/overlays/dialog/confirmation-dialog';\nimport {Trans} from '@common/i18n/trans';\nimport React, {Fragment} from 'react';\nimport {useIsMobileMediaQuery} from '@common/utils/hooks/is-mobile-media-query';\nimport {getUserListLink, UserListLink} from '@app/user-lists/user-list-link';\nimport {Button} from '@common/ui/buttons/button';\nimport {Link} from 'react-router-dom';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {UserListByline} from '@app/user-lists/user-list-byline';\nimport {UserListDetails} from '@app/user-lists/user-list-details';\nimport clsx from 'clsx';\nimport {TitlePoster} from '@app/titles/title-poster/title-poster';\nimport {PersonPoster} from '@app/people/person-poster/person-poster';\nimport {User} from '@common/auth/user';\nimport {useAuth} from '@common/auth/use-auth';\n\ninterface UserListIndexItemProps {\n  list: Channel;\n  user: User;\n  showVisibility?: boolean;\n}\nexport function UserListIndexItem({\n  list,\n  user,\n  showVisibility = true,\n}: UserListIndexItemProps) {\n  const isMobile = useIsMobileMediaQuery();\n  const {user: authUser} = useAuth();\n  const canEdit = authUser && authUser.id === user.id;\n  return (\n    <div className=\"flex items-center gap-24 py-24 border-b\">\n      {!isMobile && <ItemsPreview list={list as Channel<Title | Person>} />}\n      <section className=\"flex-auto\">\n        <div className=\"flex items-center gap-8\">\n          <UserListLink\n            list={list}\n            className=\"block text-lg font-semibold capitalize mr-auto\"\n          />\n          {!list.config.preventDeletion && !list.internal && canEdit && (\n            <Fragment>\n              <Button\n                elementType={Link}\n                to={`${getUserListLink(list)}/edit`}\n                variant=\"outline\"\n                size=\"2xs\"\n                color=\"primary\"\n              >\n                <Trans message=\"Edit\" />\n              </Button>\n              <DialogTrigger type=\"modal\">\n                <Button\n                  color=\"danger\"\n                  variant=\"outline\"\n                  radius=\"rounded\"\n                  size=\"2xs\"\n                >\n                  <Trans message=\"Delete\" />\n                </Button>\n                <DeleteListDialog list={list} />\n              </DialogTrigger>\n            </Fragment>\n          )}\n        </div>\n        {list.description && (\n          <p className=\"text-sm text-muted mt-8 whitespace-nowrap\">\n            {list.description}\n          </p>\n        )}\n        <div className=\"text-sm mt-12\">\n          <div className=\"md:flex items-center justify-between gap-24\">\n            {user && <UserListByline user={user} />}\n            <UserListDetails\n              list={list}\n              showVisibility={showVisibility}\n              className=\"max-md:mt-12\"\n            />\n          </div>\n        </div>\n      </section>\n    </div>\n  );\n}\n\ninterface ItemPreviewProps {\n  list: Channel<Title | Person>;\n}\nfunction ItemsPreview({list}: ItemPreviewProps) {\n  if (!list.items?.length) return null;\n  return (\n    <div className=\"flex items-center rounded overflow-hidden\">\n      {list.items?.map((item, index) => (\n        <div\n          key={item.id}\n          style={{zIndex: 100 - index}}\n          className={clsx(\n            'relative shadow-[2px_0_7px_#000] rounded overflow-hidden',\n            index !== 0 && '-ml-30'\n          )}\n        >\n          {item.model_type === 'title' ? (\n            <TitlePoster title={item} size=\"w-70\" srcSize=\"sm\" />\n          ) : (\n            <PersonPoster person={item} size=\"w-70\" srcSize=\"sm\" />\n          )}\n          <div className=\"absolute inset-0 shadow-[inset_0_0_0_1px_rgba(221,238,255,.35)] pointer-events-none\" />\n        </div>\n      ))}\n    </div>\n  );\n}\n\ninterface DeleteButtonProps {\n  list: Channel;\n}\nfunction DeleteListDialog({list}: DeleteButtonProps) {\n  const deleteList = useDeleteList();\n  const {close} = useDialogContext();\n\n  return (\n    <ConfirmationDialog\n      isDanger\n      title={<Trans message=\"Delete list\" />}\n      body={<Trans message=\"Are you sure you want to delete this list?\" />}\n      confirm={<Trans message=\"Delete\" />}\n      isLoading={deleteList.isLoading}\n      onConfirm={() => deleteList.mutate({listId: list.id}, {onSuccess: close})}\n    />\n  );\n}\n","import {useInfiniteData} from '@common/ui/infinite-scroll/use-infinite-data';\nimport {useParams} from 'react-router-dom';\nimport {Channel} from '@common/channels/channel';\n\nexport function useProfileLists() {\n  const {userId = 'me'} = useParams();\n  return useInfiniteData<Channel>({\n    endpoint: `user-profile/${userId}/lists`,\n    queryKey: ['channel', 'profile-lists', userId],\n    paginate: 'simple',\n  });\n}\n","import React from 'react';\nimport {PageStatus} from '@common/http/page-status';\nimport {SitePageLayout} from '@app/site-page-layout';\nimport {Trans} from '@common/i18n/trans';\nimport {SiteSectionHeading} from '@app/titles/site-section-heading';\nimport {Link} from 'react-router-dom';\nimport {Button} from '@common/ui/buttons/button';\nimport {Channel} from '@common/channels/channel';\nimport {UserListIndexItem} from '@app/user-lists/pages/user-lists-index-page/user-list-index-item';\nimport {useProfileLists} from '@app/profile/requests/use-profile-lists';\nimport {StaticPageTitle} from '@common/seo/static-page-title';\nimport {useAuth} from '@common/auth/use-auth';\nimport {UseInfiniteDataResult} from '@common/ui/infinite-scroll/use-infinite-data';\nimport {InfiniteScrollSentinel} from '@common/ui/infinite-scroll/infinite-scroll-sentinel';\nimport {IllustratedMessage} from '@common/ui/images/illustrated-message';\nimport {SvgImage} from '@common/ui/images/svg-image/svg-image';\nimport todoImage from '@app/admin/lists/todo.svg';\n\nexport function UserListsIndexPage() {\n  const query = useProfileLists();\n\n  const content = query.data ? (\n    <PageContent query={query} />\n  ) : (\n    <PageStatus query={query} loaderClassName=\"absolute inset-0 m-auto\" />\n  );\n\n  return (\n    <SitePageLayout>\n      <StaticPageTitle>\n        <Trans message=\"Your lists\" />\n      </StaticPageTitle>\n      <div className=\"container mx-auto mt-48 px-24\">\n        <header>\n          <SiteSectionHeading\n            headingType=\"h1\"\n            margin=\"mb-34\"\n            actions={\n              <Button\n                variant=\"flat\"\n                color=\"primary\"\n                elementType={Link}\n                to=\"new\"\n              >\n                <Trans message=\"New list\" />\n              </Button>\n            }\n          >\n            <Trans message=\"My lists\" />\n          </SiteSectionHeading>\n        </header>\n        {content}\n      </div>\n    </SitePageLayout>\n  );\n}\n\ninterface PageContentProps {\n  query: UseInfiniteDataResult<Channel>;\n}\nfunction PageContent({query}: PageContentProps) {\n  const {user} = useAuth();\n\n  if (query.noResults) {\n    return (\n      <IllustratedMessage\n        className=\"mt-80\"\n        image={<SvgImage src={todoImage} />}\n        title={<Trans message=\"You have not created any lists yet.\" />}\n      />\n    );\n  }\n\n  return (\n    <div>\n      {query.items.map(list => (\n        <UserListIndexItem list={list} key={list.id} user={user!} />\n      ))}\n      <InfiniteScrollSentinel query={query} />\n    </div>\n  );\n}\n","import {useQuery} from '@tanstack/react-query';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {User} from '@common/auth/user';\nimport {apiClient} from '@common/http/query-client';\nimport {useParams} from 'react-router-dom';\n\nexport interface UseUserProfileResponse extends BackendResponse {\n  user: User;\n}\n\nexport const userProfileQueryKey = (userId: number | string) => [\n  'users',\n  `${userId}`,\n  'profile',\n];\n\nexport function useUserProfile() {\n  const {userId} = useParams();\n  return useQuery(userProfileQueryKey(userId!), () => fetchProfile(userId!));\n}\n\nfunction fetchProfile(userId: string) {\n  return apiClient\n    .get<UseUserProfileResponse>(`user-profile/${userId}`)\n    .then(response => response.data);\n}\n","import {UserProfile} from '@app/profile/user-profile';\nimport clsx from 'clsx';\n\ninterface Props {\n  profile?: UserProfile;\n  className?: string;\n}\nexport function ProfileDescription({profile, className}: Props) {\n  if (!profile) return null;\n  return (\n    <div className={clsx('text-sm', className)}>\n      {profile.description && (\n        <p className=\"rounded text-secondary whitespace-nowrap overflow-hidden overflow-ellipsis\">\n          {profile.description}\n        </p>\n      )}\n      {profile.city || profile.country ? (\n        <div className=\"flex items-center gap-24 justify-between mt-4\">\n          {(profile.city || profile.country) && (\n            <div className=\"rounded text-secondary w-max\">\n              {profile.city}\n              {profile.city && ','} {profile.country}\n            </div>\n          )}\n        </div>\n      ) : null}\n    </div>\n  );\n}\n","import {useQuery} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {useAuth} from '@common/auth/use-auth';\nimport {User} from '@common/auth/user';\n\ninterface Response extends BackendResponse {\n  ids: number[];\n}\n\nexport function useFollowedUsers() {\n  const {user} = useAuth();\n  return useQuery(['users', 'followed', 'ids'], () => fetchIds(), {\n    enabled: !!user,\n  });\n}\n\nexport function useIsUserFollowing(user: User) {\n  const {data, isLoading} = useFollowedUsers();\n  return {\n    isLoading,\n    isFollowing: !!data?.ids.includes(user.id),\n  };\n}\n\nfunction fetchIds() {\n  return apiClient\n    .get<Response>(`users/me/followed-users/ids`)\n    .then(response => response.data);\n}\n","import {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {useMutation} from '@tanstack/react-query';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {showHttpErrorToast} from '@common/utils/http/show-http-error-toast';\nimport {User} from '@common/auth/user';\n\ninterface Response extends BackendResponse {}\n\ninterface Payload {\n  user: User;\n}\n\nexport function useFollowUser() {\n  return useMutation((payload: Payload) => followUser(payload), {\n    onSuccess: async (response, {user}) => {\n      await queryClient.invalidateQueries(['users']);\n      toast(message('Following :name', {values: {name: user.display_name}}));\n    },\n    onError: r => showHttpErrorToast(r),\n  });\n}\n\nfunction followUser({user}: Payload): Promise<Response> {\n  return apiClient.post(`users/${user.id}/follow`).then(r => r.data);\n}\n","import {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {useMutation} from '@tanstack/react-query';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {showHttpErrorToast} from '@common/utils/http/show-http-error-toast';\nimport {User} from '@common/auth/user';\n\ninterface Response extends BackendResponse {}\n\ninterface Payload {\n  user: User;\n}\n\nexport function useUnfollowUser() {\n  return useMutation((payload: Payload) => unfollowUser(payload), {\n    onSuccess: async (response, {user}) => {\n      await queryClient.invalidateQueries(['users']);\n      toast(\n        message('Stopped following :name', {values: {name: user.display_name}})\n      );\n    },\n    onError: r => showHttpErrorToast(r),\n  });\n}\n\nfunction unfollowUser({user}: Payload): Promise<Response> {\n  return apiClient.post(`users/${user.id}/unfollow`).then(r => r.data);\n}\n","import {Button, ButtonProps} from '@common/ui/buttons/button';\nimport {useAuth} from '@common/auth/use-auth';\nimport {User} from '@common/auth/user';\nimport {useIsUserFollowing} from '@common/users/queries/use-followed-users';\nimport {useFollowUser} from '@common/users/queries/use-follow-user';\nimport {useUnfollowUser} from '@common/users/queries/use-unfollow-user';\nimport {Trans} from '@common/i18n/trans';\nimport clsx from 'clsx';\n\ninterface Props extends Omit<ButtonProps, 'onClick' | 'disabled'> {\n  user: User;\n}\nexport function FollowButton({user, className, ...buttonProps}: Props) {\n  const {user: currentUser} = useAuth();\n  const {isFollowing, isLoading} = useIsUserFollowing(user);\n  const followUser = useFollowUser();\n  const unfollowUser = useUnfollowUser();\n\n  const mergedClassName = clsx(className, 'min-w-82');\n\n  if (isFollowing) {\n    return (\n      <Button\n        {...buttonProps}\n        className={mergedClassName}\n        onClick={() => unfollowUser.mutate({user})}\n        disabled={\n          !currentUser ||\n          currentUser?.id === user.id ||\n          unfollowUser.isLoading ||\n          isLoading\n        }\n      >\n        <Trans message=\"Unfollow\" />\n      </Button>\n    );\n  }\n\n  return (\n    <Button\n      {...buttonProps}\n      className={mergedClassName}\n      onClick={() => followUser.mutate({user})}\n      disabled={\n        !currentUser ||\n        currentUser?.id === user.id ||\n        followUser.isLoading ||\n        isLoading\n      }\n    >\n      <Trans message=\"Follow\" />\n    </Button>\n  );\n}\n","import {useFieldArray} from 'react-hook-form';\nimport {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@common/i18n/trans';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {CloseIcon} from '@common/icons/material/Close';\nimport {Button} from '@common/ui/buttons/button';\nimport {AddIcon} from '@common/icons/material/Add';\nimport React from 'react';\nimport {UserLink} from '@app/profile/user-link';\n\nexport function ProfileLinksForm() {\n  const {fields, append, remove} = useFieldArray<{links: UserLink[]}>({\n    name: 'links',\n  });\n  return (\n    <div>\n      {fields.map((field, index) => {\n        return (\n          <div key={field.id} className=\"flex gap-10 mb-10 items-end\">\n            <FormTextField\n              required\n              type=\"url\"\n              label={<Trans message=\"URL\" />}\n              name={`links.${index}.url`}\n              size=\"sm\"\n              className=\"flex-auto\"\n            />\n            <FormTextField\n              required\n              label={<Trans message=\"Short title\" />}\n              name={`links.${index}.title`}\n              size=\"sm\"\n              className=\"flex-auto\"\n            />\n            <IconButton\n              size=\"sm\"\n              color=\"primary\"\n              className=\"flex-shrink-0\"\n              onClick={() => {\n                remove(index);\n              }}\n            >\n              <CloseIcon />\n            </IconButton>\n          </div>\n        );\n      })}\n      <Button\n        variant=\"text\"\n        color=\"primary\"\n        startIcon={<AddIcon />}\n        size=\"xs\"\n        onClick={() => {\n          append({url: '', title: ''});\n        }}\n      >\n        <Trans message=\"Add another link\" />\n      </Button>\n    </div>\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {onFormQueryError} from '@common/errors/on-form-query-error';\nimport {UseFormReturn} from 'react-hook-form';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {useAuth} from '@common/auth/use-auth';\nimport {UserLink} from '@app/profile/user-link';\nimport {userProfileQueryKey} from '@app/profile/requests/use-user-profile';\nimport {User} from '@common/auth/user';\n\ninterface Response extends BackendResponse {\n  user: User;\n}\n\nexport interface UpdateProfilePayload {\n  user: {\n    avatar?: string;\n    first_name?: string;\n    last_name?: string;\n    username?: string;\n  };\n  profile: {\n    city?: string;\n    country?: string;\n    description?: string;\n  };\n  links: UserLink[];\n}\n\nexport function useUpdateUserProfile(\n  form: UseFormReturn<UpdateProfilePayload>\n) {\n  const {user} = useAuth();\n  const {trans} = useTrans();\n  return useMutation(\n    (payload: UpdateProfilePayload) => updateProfile(payload),\n    {\n      onSuccess: async () => {\n        if (user) {\n          await queryClient.invalidateQueries(userProfileQueryKey(user.id));\n        }\n        toast(trans(message('Profile updated')));\n      },\n      onError: err => onFormQueryError(err, form),\n    }\n  );\n}\n\nfunction updateProfile(payload: UpdateProfilePayload): Promise<Response> {\n  return apiClient.put('user-profile/me', payload).then(r => r.data);\n}\n","import {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {Trans} from '@common/i18n/trans';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {User} from '@common/auth/user';\nimport {Form} from '@common/ui/forms/form';\nimport {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {FormImageSelector} from '@common/ui/images/image-selector';\nimport {FileUploadProvider} from '@common/uploads/uploader/file-upload-provider';\nimport {Option} from '@common/ui/forms/combobox/combobox';\nimport {useValueLists} from '@common/http/value-lists';\nimport {useForm} from 'react-hook-form';\nimport {ProfileLinksForm} from '@app/profile/profile-links-form';\nimport {\n  UpdateProfilePayload,\n  useUpdateUserProfile,\n} from '@app/profile/requests/use-update-user-profile';\nimport {FormSelect} from '@common/ui/forms/select/select';\n\ninterface Props {\n  user: User;\n}\nexport function EditUserProfileDialog({user}: Props) {\n  const {close, formId} = useDialogContext();\n  const {data} = useValueLists(['countries']);\n  const form = useForm<UpdateProfilePayload>({\n    defaultValues: {\n      user: {\n        username: user.username,\n        avatar: user.avatar,\n        first_name: user.first_name,\n        last_name: user.last_name,\n      },\n      profile: {\n        city: user.profile?.city,\n        country: user.profile?.country,\n        description: user.profile?.description,\n      },\n      links: user.links,\n    },\n  });\n  const updateProfile = useUpdateUserProfile(form);\n  return (\n    <Dialog size=\"xl\">\n      <DialogHeader>\n        <Trans message=\"Edit your profile\" />\n      </DialogHeader>\n      <DialogBody>\n        <Form\n          id={formId}\n          form={form}\n          onSubmit={values =>\n            updateProfile.mutate(values, {onSuccess: () => close()})\n          }\n        >\n          <FileUploadProvider>\n            <div className=\"md:flex items-start gap-30\">\n              <FormImageSelector\n                label={<Trans message=\"Avatar\" />}\n                name=\"user.avatar\"\n                diskPrefix=\"avatars\"\n                variant=\"avatar\"\n                previewSize=\"w-200 h-200\"\n                className=\"max-md:mb-20\"\n              />\n              <div className=\"flex-auto\">\n                <FormTextField\n                  name=\"user.username\"\n                  label={<Trans message=\"Username\" />}\n                  className=\"mb-24\"\n                />\n                <div className=\"flex items-center gap-24\">\n                  <FormTextField\n                    name=\"user.first_name\"\n                    label={<Trans message=\"First name\" />}\n                    className=\"flex-1 mb-24\"\n                  />\n                  <FormTextField\n                    name=\"user.last_name\"\n                    label={<Trans message=\"Last name\" />}\n                    className=\"flex-1 mb-24\"\n                  />\n                </div>\n                <div className=\"flex items-center gap-24\">\n                  <FormTextField\n                    name=\"profile.city\"\n                    label={<Trans message=\"City\" />}\n                    className=\"flex-1 mb-24\"\n                  />\n                  <FormSelect\n                    showSearchField\n                    className=\"flex-1 mb-24\"\n                    selectionMode=\"single\"\n                    name=\"profile.country\"\n                    label={<Trans message=\"Country\" />}\n                  >\n                    <Option key=\"none\" value={undefined}>\n                      <Trans message=\"None\" />\n                    </Option>\n                    {data?.countries?.map(country => (\n                      <Option key={country.code} value={country.name}>\n                        {country.name}\n                      </Option>\n                    ))}\n                  </FormSelect>\n                </div>\n                <FormTextField\n                  name=\"profile.description\"\n                  label={<Trans message=\"Description\" />}\n                  inputElementType=\"textarea\"\n                  rows={4}\n                />\n              </div>\n            </div>\n            <div className=\"mt-24\">\n              <div className=\"mb-16 pb-16 border-b\">\n                <Trans message=\"Your links\" />\n              </div>\n              <ProfileLinksForm />\n            </div>\n          </FileUploadProvider>\n        </Form>\n      </DialogBody>\n      <DialogFooter>\n        <Button\n          type=\"button\"\n          onClick={() => {\n            close();\n          }}\n        >\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          form={formId}\n          type=\"submit\"\n          variant=\"flat\"\n          color=\"primary\"\n          disabled={updateProfile.isLoading}\n        >\n          <Trans message=\"Save\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {User} from '@common/auth/user';\nimport React, {\n  Children,\n  Fragment,\n  ReactElement,\n  ReactNode,\n  useContext,\n} from 'react';\nimport {SiteConfigContext} from '@common/core/settings/site-config-context';\nimport {Trans} from '@common/i18n/trans';\nimport {Link} from 'react-router-dom';\nimport {FormattedNumber} from '@common/i18n/formatted-number';\n\ninterface Props {\n  user: User;\n}\nexport function ProfileStatsList({user}: Props) {\n  const {\n    auth: {getUserProfileLink},\n  } = useContext(SiteConfigContext);\n  const profileLink = getUserProfileLink!(user);\n\n  return (\n    <StatsItems>\n      <StatsItem\n        label={<Trans message=\"Followers\" />}\n        value={user.followers_count || 0}\n        link={`${profileLink}/followers`}\n      />\n      <StatsItem\n        label={<Trans message=\"Following\" />}\n        value={user.followed_users_count || 0}\n        link={`${profileLink}/following`}\n      />\n      <StatsItem\n        label={<Trans message=\"Lists\" />}\n        value={user.lists_count || 0}\n        link={`${profileLink}/lists`}\n      />\n    </StatsItems>\n  );\n}\n\ninterface StatsItemsProps {\n  children: ReactNode;\n}\nfunction StatsItems(props: StatsItemsProps) {\n  const children = Children.toArray(props.children);\n  return (\n    <div className=\"flex items-center\">\n      {children.map((child, index) => (\n        <Fragment key={index}>\n          {child}\n          {index < children.length - 1 && (\n            <div className=\"h-34 w-1 bg-divider mx-10\" />\n          )}\n        </Fragment>\n      ))}\n    </div>\n  );\n}\n\ninterface StatsItemProps {\n  label: ReactElement;\n  value: number;\n  link: string;\n}\nfunction StatsItem({label, value, link}: StatsItemProps) {\n  return (\n    <Link to={link} className=\"block text-center group\">\n      <div className=\"text-lg font-bold\">\n        <FormattedNumber value={value} />\n      </div>\n      <div className=\"text-xs text-muted uppercase group-hover:text-primary transition-colors\">\n        {label}\n      </div>\n    </Link>\n  );\n}\n","import {isAbsoluteUrl} from '../utils/urls/is-absolute-url';\nimport memoize from 'nano-memoize';\nimport clsx from 'clsx';\n\ninterface RemoteFaviconProps {\n  url: string;\n  className?: string;\n  size?: string;\n  alt?: string;\n}\nexport function RemoteFavicon({\n  url,\n  className,\n  size = 'w-16 h-16',\n  alt,\n}: RemoteFaviconProps) {\n  if (!url) {\n    return null;\n  }\n\n  const src = getFaviconSrc(url);\n\n  return (\n    <img\n      className={clsx(size, className)}\n      src={getFaviconSrc(url)}\n      alt={alt || `${src} favicon`}\n    />\n  );\n}\n\nconst getFaviconSrc = memoize((url: string): string => {\n  if (url.includes('youtube')) {\n    return 'https://www.youtube.com/s/desktop/ca54e1bd/img/favicon.ico';\n  }\n\n  // relative url to current site\n  if (!isAbsoluteUrl(url)) {\n    url = `${window.location.protocol}//${window.location.host}`;\n  }\n  const domain = new URL(url).origin;\n  return 'https://www.google.com/s2/favicons?domain=' + domain;\n});\n","import {UserLink} from '@app/profile/user-link';\nimport {Tooltip} from '@common/ui/tooltip/tooltip';\nimport {RemoteFavicon} from '@common/ui/remote-favicon';\nimport clsx from 'clsx';\nimport {ButtonBase} from '@common/ui/buttons/button-base';\nimport {OpenInNewIcon} from '@common/icons/material/OpenInNew';\n\ninterface Props {\n  links?: UserLink[];\n  className?: string;\n}\nexport function ProfileLinks({links, className}: Props) {\n  if (!links?.length) return null;\n\n  if (links.length === 1) {\n    return (\n      <a\n        className=\"flex items-center max-md:justify-center gap-6 mt-24 md:mt-12 hover:text-primary transition-colors\"\n        href={links[0].url}\n      >\n        <OpenInNewIcon className=\"text-muted\" size=\"sm\" />\n        <span className=\"capitalize\">{links[0].title}</span>\n      </a>\n    );\n  }\n\n  return (\n    <div className={clsx('flex items-center', className)}>\n      {links.map(link => (\n        <Tooltip label={link.title} key={link.url}>\n          <ButtonBase\n            elementType=\"a\"\n            href={link.url}\n            target=\"_blank\"\n            rel=\"noreferrer\"\n          >\n            <RemoteFavicon url={link.url} alt={link.title} size=\"w-20 h-20\" />\n          </ButtonBase>\n        </Tooltip>\n      ))}\n    </div>\n  );\n}\n","import {UserAvatar} from '@common/ui/images/user-avatar';\nimport {ProfileDescription} from '@app/profile/header/profile-description';\nimport {FollowButton} from '@common/users/follow-button';\nimport React from 'react';\nimport {useAuth} from '@common/auth/use-auth';\nimport {User} from '@common/auth/user';\nimport {Trans} from '@common/i18n/trans';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {Button} from '@common/ui/buttons/button';\nimport {EditIcon} from '@common/icons/material/Edit';\nimport {EditUserProfileDialog} from '@app/profile/edit-user-profile-dialog';\nimport {ProfileStatsList} from '@app/profile/header/profile-stats-list';\nimport {ProfileLinks} from '@app/profile/header/profile-links';\nimport {Chip} from '@common/ui/forms/input-field/chip-field/chip';\n\ninterface Props {\n  user: User;\n}\nexport function ProfilePageHeader({user}: Props) {\n  const {user: currentUser} = useAuth();\n  return (\n    <div className=\"flex flex-col md:flex-row items-center gap-24\">\n      <UserAvatar user={user} circle size=\"w-140 h-140\" />\n      <div className=\"flex-auto\">\n        <div className=\"flex items-center mb-8 gap-8\">\n          <h1 className=\"text-2xl font-bold\">{user.display_name}</h1>\n          {user.is_pro && (\n            <Chip size=\"xs\" color=\"primary\" radius=\"rounded\" className=\"mt-2\">\n              <Trans message=\"PRO\" />\n            </Chip>\n          )}\n        </div>\n        <ProfileDescription profile={user.profile} />\n        <div className=\"flex items-center gap-14 mt-12\">\n          {currentUser?.id !== user.id && (\n            <FollowButton\n              variant=\"outline\"\n              color=\"primary\"\n              size=\"xs\"\n              user={user}\n            />\n          )}\n          {currentUser?.id === user.id && <EditButton user={user} />}\n        </div>\n      </div>\n      <div>\n        <ProfileStatsList user={user} />\n        <ProfileLinks\n          links={user.links}\n          className=\"flex-shrink-0 ml-auto mt-12\"\n        />\n      </div>\n    </div>\n  );\n}\n\ninterface EditButtonProps {\n  user: User;\n}\nfunction EditButton({user}: EditButtonProps) {\n  return (\n    <DialogTrigger type=\"modal\">\n      <Button variant=\"outline\" size=\"xs\" startIcon={<EditIcon />}>\n        <Trans message=\"Edit profile\" />\n      </Button>\n      <EditUserProfileDialog user={user} />\n    </DialogTrigger>\n  );\n}\n","import {useUserProfile} from '@app/profile/requests/use-user-profile';\nimport React, {Fragment, useContext} from 'react';\nimport {PageMetaTags} from '@common/http/page-meta-tags';\nimport {PageStatus} from '@common/http/page-status';\nimport {SitePageLayout} from '@app/site-page-layout';\nimport {User} from '@common/auth/user';\nimport {Tabs} from '@common/ui/tabs/tabs';\nimport {TabList} from '@common/ui/tabs/tab-list';\nimport {Tab} from '@common/ui/tabs/tab';\nimport {Trans} from '@common/i18n/trans';\nimport {Link, Outlet, useLocation} from 'react-router-dom';\nimport {SiteConfigContext} from '@common/core/settings/site-config-context';\nimport {message} from '@common/i18n/message';\nimport {ProfilePageHeader} from '@app/profile/header/profile-page-header';\n\nconst PageTabs = [\n  {uri: '', label: message('Lists')},\n  {uri: 'ratings', label: message('Ratings')},\n  {uri: 'reviews', label: message('Reviews')},\n  {uri: 'comments', label: message('Comments')},\n  {uri: 'followers', label: message('Followers')},\n  {uri: 'followed-users', label: message('Following')},\n];\n\nexport function UserProfilePage() {\n  const query = useUserProfile();\n\n  const content = query.data ? (\n    <Fragment>\n      <PageMetaTags query={query} />\n      <PageContent user={query.data.user} />\n    </Fragment>\n  ) : (\n    <PageStatus query={query} loaderClassName=\"absolute inset-0 m-auto\" />\n  );\n\n  return <SitePageLayout>{content}</SitePageLayout>;\n}\n\ninterface PageContentProps {\n  user: User;\n}\nfunction PageContent({user}: PageContentProps) {\n  return (\n    <div className=\"container mx-auto mt-24 md:mt-40 px-14 md:px-24\">\n      <ProfilePageHeader user={user} />\n      <ProfileTabs user={user} />\n    </div>\n  );\n}\n\ninterface ProfileTabsProps {\n  user: User;\n}\nfunction ProfileTabs({user}: ProfileTabsProps) {\n  const {\n    auth: {getUserProfileLink},\n  } = useContext(SiteConfigContext);\n  const profileLink = getUserProfileLink!(user);\n\n  const {pathname} = useLocation();\n  const tabName = pathname.split('/').pop();\n  let selectedTab = PageTabs.findIndex(tab => tab.uri === tabName);\n  if (selectedTab === -1) {\n    selectedTab = 0;\n  }\n\n  return (\n    <Tabs className=\"mt-34\" selectedTab={selectedTab}>\n      <TabList>\n        {PageTabs.map(tab => (\n          <Tab\n            key={tab.uri}\n            width=\"min-w-132\"\n            elementType={Link}\n            to={`${profileLink}/${tab.uri}`}\n            replace\n          >\n            <Trans {...tab.label} />\n          </Tab>\n        ))}\n      </TabList>\n      <div className=\"mt-24\">\n        <Outlet />\n      </div>\n    </Tabs>\n  );\n}\n","import {useProfileLists} from '@app/profile/requests/use-profile-lists';\nimport {IllustratedMessage} from '@common/ui/images/illustrated-message';\nimport {ListAltIcon} from '@common/icons/material/ListAlt';\nimport {Trans} from '@common/i18n/trans';\nimport {UserListIndexItem} from '@app/user-lists/pages/user-lists-index-page/user-list-index-item';\nimport {InfiniteScrollSentinel} from '@common/ui/infinite-scroll/infinite-scroll-sentinel';\nimport {PageStatus} from '@common/http/page-status';\nimport React from 'react';\nimport {useUserProfile} from '@app/profile/requests/use-user-profile';\n\nexport function ProfileListsPanel() {\n  const userQuery = useUserProfile();\n  const user = userQuery.data!.user;\n  const listsQuery = useProfileLists();\n\n  if (listsQuery.noResults) {\n    return (\n      <IllustratedMessage\n        imageHeight=\"h-auto\"\n        imageMargin=\"mb-14\"\n        image={<ListAltIcon className=\"text-muted\" />}\n        size=\"sm\"\n        title={<Trans message=\"No lists yet\" />}\n        description={\n          <Trans\n            message=\"Follow :user for updates on lists they create in the future.\"\n            values={{user: user.display_name}}\n          />\n        }\n      />\n    );\n  }\n\n  if (listsQuery.data) {\n    return (\n      <div>\n        {listsQuery.items.map(list => (\n          <UserListIndexItem\n            key={list.id}\n            list={list}\n            user={user}\n            showVisibility={false}\n          />\n        ))}\n        <InfiniteScrollSentinel query={listsQuery} />\n      </div>\n    );\n  }\n\n  return <PageStatus query={listsQuery} />;\n}\n","import {useInfiniteData} from '@common/ui/infinite-scroll/use-infinite-data';\nimport {useParams} from 'react-router-dom';\nimport {Review} from '@app/titles/models/review';\n\nexport function useProfileRatings() {\n  const {userId = 'me'} = useParams();\n  return useInfiniteData<Review>({\n    endpoint: `user-profile/${userId}/ratings`,\n    queryKey: ['reviews', 'profile-page-ratings', userId],\n    paginate: 'simple',\n  });\n}\n","import {TitleRating} from '@app/reviews/title-rating';\nimport React from 'react';\nimport {Episode} from '@app/titles/models/episode';\nimport {EpisodePoster} from '@app/episodes/episode-poster/episode-poster';\nimport {Title} from '@app/titles/models/title';\nimport {TitleLinkWithEpisodeNumber} from '@app/titles/title-link';\n\nexport interface EpisodePortraitGridItemProps {\n  item: Episode;\n  title: Title;\n  rating?: number;\n}\nexport function EpisodePortraitGridItem({\n  item,\n  title,\n  rating,\n}: EpisodePortraitGridItemProps) {\n  return (\n    <div>\n      <EpisodePoster\n        episode={item}\n        title={title}\n        srcSize=\"lg\"\n        aspect=\"aspect-poster\"\n        showPlayButton\n      />\n      <div className=\"mt-10 text-sm\">\n        <TitleRating score={rating ?? item.rating} className=\"mb-4\" />\n        <TitleLinkWithEpisodeNumber\n          title={title}\n          episode={item}\n          className=\"block font-medium text-base\"\n        />\n      </div>\n    </div>\n  );\n}\n","import {IllustratedMessage} from '@common/ui/images/illustrated-message';\nimport {Trans} from '@common/i18n/trans';\nimport {InfiniteScrollSentinel} from '@common/ui/infinite-scroll/infinite-scroll-sentinel';\nimport {PageStatus} from '@common/http/page-status';\nimport React, {Fragment} from 'react';\nimport {StarIcon} from '@common/icons/material/Star';\nimport {useProfileRatings} from '@app/profile/requests/use-profile-ratings';\nimport {ContentGridLayout} from '@app/channels/content-grid/content-grid-layout';\nimport {Title} from '@app/titles/models/title';\nimport {TitlePortraitGridItem} from '@app/channels/content-grid/title-grid-item';\nimport {useUserProfile} from '@app/profile/requests/use-user-profile';\nimport {Episode} from '@app/titles/models/episode';\nimport {EpisodePortraitGridItem} from '@app/channels/content-grid/episode-grid-item';\n\nexport function ProfileRatingsPanel() {\n  const userQuery = useUserProfile();\n  const user = userQuery.data!.user;\n  const ratingsQuery = useProfileRatings();\n\n  if (ratingsQuery.noResults) {\n    return (\n      <IllustratedMessage\n        imageHeight=\"h-auto\"\n        imageMargin=\"mb-14\"\n        image={<StarIcon className=\"text-muted\" />}\n        size=\"sm\"\n        title={<Trans message=\"No ratings yet\" />}\n        description={\n          <Trans\n            message=\"Follow :user for updates on titles they rate in the future.\"\n            values={{user: user.display_name}}\n          />\n        }\n      />\n    );\n  }\n\n  if (ratingsQuery.data) {\n    return (\n      <Fragment>\n        <ContentGridLayout variant=\"portrait\">\n          {ratingsQuery.items.map(review => {\n            const reviewable = review.reviewable as Title | Episode;\n            if (reviewable.model_type === 'episode') {\n              return (\n                <EpisodePortraitGridItem\n                  key={review.id}\n                  item={reviewable}\n                  title={reviewable.title!}\n                  rating={review.score}\n                />\n              );\n            }\n            return (\n              <TitlePortraitGridItem\n                item={review.reviewable as Title}\n                key={review.id}\n                rating={review.score}\n              />\n            );\n          })}\n        </ContentGridLayout>\n        <InfiniteScrollSentinel query={ratingsQuery} />\n      </Fragment>\n    );\n  }\n\n  return <PageStatus query={ratingsQuery} />;\n}\n","import {useInfiniteData} from '@common/ui/infinite-scroll/use-infinite-data';\nimport {useParams} from 'react-router-dom';\nimport {Review} from '@app/titles/models/review';\n\nexport function useProfileReviews() {\n  const {userId = 'me'} = useParams();\n  return useInfiniteData<Review>({\n    endpoint: `user-profile/${userId}/reviews`,\n    queryKey: ['reviews', 'profile-page-reviews', userId],\n    paginate: 'simple',\n  });\n}\n","import {IllustratedMessage} from '@common/ui/images/illustrated-message';\nimport {Trans} from '@common/i18n/trans';\nimport {InfiniteScrollSentinel} from '@common/ui/infinite-scroll/infinite-scroll-sentinel';\nimport {PageStatus} from '@common/http/page-status';\nimport React, {Fragment} from 'react';\nimport {useUserProfile} from '@app/profile/requests/use-user-profile';\nimport {RateReviewIcon} from '@common/icons/material/RateReview';\nimport {useProfileReviews} from '@app/profile/requests/use-profile-reviews';\nimport {TitlePoster} from '@app/titles/title-poster/title-poster';\nimport {Title} from '@app/titles/models/title';\nimport {Review} from '@app/titles/models/review';\nimport {TitleRating} from '@app/reviews/title-rating';\nimport {TitleLink, TitleLinkWithEpisodeNumber} from '@app/titles/title-link';\nimport {Episode} from '@app/titles/models/episode';\n\nexport function ProfileReviewsPanel() {\n  const userQuery = useUserProfile();\n  const user = userQuery.data!.user;\n  const reviewsQuery = useProfileReviews();\n\n  if (reviewsQuery.noResults) {\n    return (\n      <IllustratedMessage\n        imageHeight=\"h-auto\"\n        imageMargin=\"mb-14\"\n        image={<RateReviewIcon className=\"text-muted\" />}\n        size=\"sm\"\n        title={<Trans message=\"No reviews yet\" />}\n        description={\n          <Trans\n            message=\"Follow :user for updates on titles they review in the future.\"\n            values={{user: user.display_name}}\n          />\n        }\n      />\n    );\n  }\n\n  if (reviewsQuery.data) {\n    return (\n      <Fragment>\n        {reviewsQuery.items.map(review => (\n          <ReviewListItem key={review.id} review={review} />\n        ))}\n        <InfiniteScrollSentinel query={reviewsQuery} />\n      </Fragment>\n    );\n  }\n\n  return <PageStatus query={reviewsQuery} />;\n}\n\ninterface ReviewListItemProps {\n  review: Review;\n}\nfunction ReviewListItem({review}: ReviewListItemProps) {\n  const totalVotes = review.helpful_count + review.not_helpful_count;\n  const reviewable = review.reviewable as Title | Episode;\n  const title =\n    reviewable.model_type === 'episode' ? reviewable.title! : reviewable;\n  return (\n    <div className=\"flex items-start gap-24 mb-24 border-b pb-24\">\n      <TitlePoster title={title} size=\"w-90\" srcSize=\"sm\" />\n      <div>\n        <div className=\"text-lg font-semibold\">\n          {reviewable.model_type === 'episode' ? (\n            <TitleLinkWithEpisodeNumber\n              title={title}\n              episode={reviewable}\n              target=\"_blank\"\n            />\n          ) : (\n            <TitleLink title={title} target=\"_blank\" />\n          )}\n        </div>\n        <TitleRating className=\"mt-14 mb-8\" score={review.score} />\n        <div className=\"text-base font-semibold\">{review.title}</div>\n        <p className=\"text-sm mt-10\">{review.body}</p>\n        {totalVotes ? (\n          <div className=\"text-xs text-muted mt-12\">\n            <Trans\n              message=\":helpfulCount out of :total people found this helpful.\"\n              values={{\n                helpfulCount: review.helpful_count,\n                total: review.helpful_count + review.not_helpful_count,\n              }}\n            />\n          </div>\n        ) : null}\n      </div>\n    </div>\n  );\n}\n","import {useInfiniteData} from '@common/ui/infinite-scroll/use-infinite-data';\nimport {useParams} from 'react-router-dom';\nimport {Comment} from '@common/comments/comment';\n\nexport function useProfileComments() {\n  const {userId = 'me'} = useParams();\n  return useInfiniteData<Comment>({\n    endpoint: `user-profile/${userId}/comments`,\n    queryKey: ['comment', 'profile-page-comments', userId],\n    paginate: 'simple',\n  });\n}\n","import {IllustratedMessage} from '@common/ui/images/illustrated-message';\nimport {Trans} from '@common/i18n/trans';\nimport {InfiniteScrollSentinel} from '@common/ui/infinite-scroll/infinite-scroll-sentinel';\nimport {PageStatus} from '@common/http/page-status';\nimport React, {Fragment} from 'react';\nimport {useUserProfile} from '@app/profile/requests/use-user-profile';\nimport {RateReviewIcon} from '@common/icons/material/RateReview';\nimport {TitlePoster} from '@app/titles/title-poster/title-poster';\nimport {Title} from '@app/titles/models/title';\nimport {TitleLink, TitleLinkWithEpisodeNumber} from '@app/titles/title-link';\nimport {Episode} from '@app/titles/models/episode';\nimport {useProfileComments} from '@app/profile/requests/use-profile-comments';\nimport {Comment} from '@common/comments/comment';\nimport {ThumbUpIcon} from '@common/icons/material/ThumbUp';\nimport {FormattedRelativeTime} from '@common/i18n/formatted-relative-time';\n\nexport function ProfileCommentsPanel() {\n  const userQuery = useUserProfile();\n  const user = userQuery.data!.user;\n  const commentsQuery = useProfileComments();\n\n  if (commentsQuery.noResults) {\n    return (\n      <IllustratedMessage\n        imageHeight=\"h-auto\"\n        imageMargin=\"mb-14\"\n        image={<RateReviewIcon className=\"text-muted\" />}\n        size=\"sm\"\n        title={<Trans message=\"No comments yet\" />}\n        description={\n          <Trans\n            message=\"Follow :user for updates on comments they post in the future.\"\n            values={{user: user.display_name}}\n          />\n        }\n      />\n    );\n  }\n\n  if (commentsQuery.data) {\n    return (\n      <Fragment>\n        {commentsQuery.items.map(comment => (\n          <CommentListItem key={comment.id} comment={comment} />\n        ))}\n        <InfiniteScrollSentinel query={commentsQuery} />\n      </Fragment>\n    );\n  }\n\n  return <PageStatus query={commentsQuery} />;\n}\n\ninterface CommentListItemProps {\n  comment: Comment;\n}\nfunction CommentListItem({comment}: CommentListItemProps) {\n  const commentable = comment.commentable as Title | Episode;\n  const title =\n    commentable.model_type === 'episode' ? commentable.title! : commentable;\n  return (\n    <div className=\"flex items-start gap-24 mb-24 border-b pb-24\">\n      <TitlePoster title={title} size=\"w-90\" srcSize=\"sm\" />\n      <div>\n        <div className=\"text-lg font-semibold\">\n          {commentable.model_type === 'episode' ? (\n            <TitleLinkWithEpisodeNumber\n              title={title}\n              episode={commentable}\n              target=\"_blank\"\n            />\n          ) : (\n            <TitleLink title={title} target=\"_blank\" />\n          )}\n        </div>\n        <time className=\"block text-muted text-xs mt-12\">\n          <FormattedRelativeTime date={comment.created_at} />\n        </time>\n        <p className=\"text-sm mt-8\">{comment.content}</p>\n        {comment.upvotes ? (\n          <div className=\"flex items-center gap-8 text-muted mt-12\">\n            <ThumbUpIcon size=\"sm\" />\n            <div>{comment.upvotes}</div>\n          </div>\n        ) : null}\n      </div>\n    </div>\n  );\n}\n","import {useInfiniteData} from '@common/ui/infinite-scroll/use-infinite-data';\nimport {useParams} from 'react-router-dom';\nimport {User} from '@common/auth/user';\n\nexport function useProfileFollowers() {\n  const {userId = 'me'} = useParams();\n  return useInfiniteData<User>({\n    endpoint: `users/${userId}/followers`,\n    queryKey: ['users', 'profile-page-followers', userId],\n    paginate: 'simple',\n  });\n}\n","import {User} from '@common/auth/user';\nimport {Trans} from '@common/i18n/trans';\nimport React from 'react';\nimport {UserProfileLink} from '@common/users/user-profile-link';\nimport {UserAvatar} from '@common/ui/images/user-avatar';\nimport {FollowButton} from '@common/users/follow-button';\n\ninterface Props {\n  follower: User;\n}\nexport function FollowerListItem({follower}: Props) {\n  return (\n    <div\n      key={follower.id}\n      className=\"flex items-center gap-16 mb-16 pb-16 border-b\"\n    >\n      <UserAvatar user={follower} size=\"lg\" />\n      <div className=\"text-sm\">\n        <UserProfileLink user={follower} />\n        {follower.followers_count && follower.followers_count > 0 ? (\n          <div className=\"text-xs text-muted\">\n            <Trans\n              message=\"[one 1 followers|other :count followers]\"\n              values={{count: follower.followers_count}}\n            />\n          </div>\n        ) : null}\n      </div>\n      <FollowButton\n        variant=\"outline\"\n        size=\"xs\"\n        className=\"ml-auto\"\n        user={follower}\n      />\n    </div>\n  );\n}\n","import {Trans} from '@common/i18n/trans';\nimport React, {Fragment} from 'react';\nimport {IllustratedMessage} from '@common/ui/images/illustrated-message';\nimport {BookmarkBorderIcon} from '@common/icons/material/BookmarkBorder';\nimport {InfiniteScrollSentinel} from '@common/ui/infinite-scroll/infinite-scroll-sentinel';\nimport {useUserProfile} from '@app/profile/requests/use-user-profile';\nimport {useProfileFollowers} from '@app/profile/requests/use-profile-followers';\nimport {FollowerListItem} from '@app/profile/follower-list-item';\nimport {PageStatus} from '@common/http/page-status';\n\nexport function ProfileFollowersPanel() {\n  const userQuery = useUserProfile();\n  const user = userQuery.data!.user;\n  const followersQuery = useProfileFollowers();\n\n  if (followersQuery.noResults) {\n    return (\n      <IllustratedMessage\n        imageHeight=\"h-auto\"\n        imageMargin=\"mb-14\"\n        image={<BookmarkBorderIcon className=\"text-muted\" />}\n        size=\"sm\"\n        title={<Trans message=\"No followers yet\" />}\n        description={\n          <Trans\n            message=\"Be the first to follow :name.\"\n            values={{name: user.display_name}}\n          />\n        }\n      />\n    );\n  }\n\n  if (followersQuery.data) {\n    return (\n      <Fragment>\n        {followersQuery.items.map(follower => (\n          <FollowerListItem key={follower.id} follower={follower} />\n        ))}\n        <InfiniteScrollSentinel query={followersQuery} />\n      </Fragment>\n    );\n  }\n\n  return <PageStatus query={followersQuery} />;\n}\n","import {useInfiniteData} from '@common/ui/infinite-scroll/use-infinite-data';\nimport {useParams} from 'react-router-dom';\nimport {User} from '@common/auth/user';\n\nexport function useProfileFollowedUsers() {\n  const {userId = 'me'} = useParams();\n  return useInfiniteData<User>({\n    endpoint: `users/${userId}/followed-users`,\n    queryKey: ['users', 'profile-page-followed-users', userId],\n    paginate: 'simple',\n  });\n}\n","import {Trans} from '@common/i18n/trans';\nimport React, {Fragment} from 'react';\nimport {IllustratedMessage} from '@common/ui/images/illustrated-message';\nimport {BookmarkBorderIcon} from '@common/icons/material/BookmarkBorder';\nimport {InfiniteScrollSentinel} from '@common/ui/infinite-scroll/infinite-scroll-sentinel';\nimport {useUserProfile} from '@app/profile/requests/use-user-profile';\nimport {FollowerListItem} from '@app/profile/follower-list-item';\nimport {useProfileFollowedUsers} from '@app/profile/requests/use-profile-followed-users';\nimport {PageStatus} from '@common/http/page-status';\n\nexport function ProfileFollowedUsersPanel() {\n  const userQuery = useUserProfile();\n  const user = userQuery.data!.user;\n  const followedUsersQuery = useProfileFollowedUsers();\n\n  if (followedUsersQuery.noResults) {\n    return (\n      <IllustratedMessage\n        imageHeight=\"h-auto\"\n        imageMargin=\"mb-14\"\n        image={<BookmarkBorderIcon className=\"text-muted\" />}\n        size=\"sm\"\n        title={<Trans message=\"Not following anyone yet\" />}\n        description={\n          <Trans\n            message=\"Check back later to see users :user is following.\"\n            values={{user: user.display_name}}\n          />\n        }\n      />\n    );\n  }\n\n  if (followedUsersQuery.data) {\n    return (\n      <Fragment>\n        {followedUsersQuery.items.map(followedUser => (\n          <FollowerListItem key={followedUser.id} follower={followedUser} />\n        ))}\n        <InfiniteScrollSentinel query={followedUsersQuery} />\n      </Fragment>\n    );\n  }\n\n  return <PageStatus query={followedUsersQuery} />;\n}\n","import {useSearchResults} from '@app/search/requests/use-search-results';\nimport {useParams} from 'react-router-dom';\nimport {SitePageLayout} from '@app/site-page-layout';\nimport {Trans} from '@common/i18n/trans';\nimport {SiteSectionHeading} from '@app/titles/site-section-heading';\nimport React, {Fragment, useMemo} from 'react';\nimport {Title, TITLE_MODEL} from '@app/titles/models/title';\nimport {Person, PERSON_MODEL} from '@app/titles/models/person';\nimport {ContentGrid} from '@app/channels/content-grid/channel-content-grid';\nimport {PageMetaTags} from '@common/http/page-meta-tags';\n\nexport function SearchPage() {\n  const {query: searchTerm} = useParams();\n  const query = useSearchResults({query: searchTerm});\n\n  const {movies, series, people} = useMemo(() => {\n    const movies: Title[] = [];\n    const series: Title[] = [];\n    const people: Person[] = [];\n\n    query.data?.results.forEach(result => {\n      if (result.model_type === TITLE_MODEL && result.is_series) {\n        series.push(result);\n      } else if (result.model_type === TITLE_MODEL && !result.is_series) {\n        movies.push(result);\n      } else if (result.model_type === PERSON_MODEL) {\n        people.push(result);\n      }\n    });\n\n    return {movies, series, people};\n  }, [query]);\n\n  return (\n    <Fragment>\n      <PageMetaTags query={query} />\n      <SitePageLayout>\n        <section className=\"container mx-auto mt-24 px-14 md:mt-40 md:px-24\">\n          <SiteSectionHeading className=\"mb-48\" headingType=\"h1\" hideBorder>\n            <Trans\n              message=\"Search results for: :query\"\n              values={{query: searchTerm}}\n            />\n          </SiteSectionHeading>\n          <main>\n            {movies.length > 0 && (\n              <div className=\"mb-48\">\n                <SiteSectionHeading fontSize=\"text-2xl\">\n                  <Trans message=\"Movies\" />\n                </SiteSectionHeading>\n                <ContentGrid content={movies} variant=\"portrait\" />\n              </div>\n            )}\n            {series.length > 0 && (\n              <div className=\"mb-48\">\n                <SiteSectionHeading fontSize=\"text-2xl\">\n                  <Trans message=\"Series\" />\n                </SiteSectionHeading>\n                <ContentGrid content={series} variant=\"portrait\" />\n              </div>\n            )}\n            {people.length > 0 && (\n              <div className=\"mb-48\">\n                <SiteSectionHeading fontSize=\"text-2xl\">\n                  <Trans message=\"People\" />\n                </SiteSectionHeading>\n                <ContentGrid content={people} variant=\"portrait\" />\n              </div>\n            )}\n          </main>\n        </section>\n      </SitePageLayout>\n    </Fragment>\n  );\n}\n","import {RouteObject, useRoutes} from 'react-router-dom';\nimport React from 'react';\nimport {ChannelPage} from '@app/channels/channel-page';\nimport {TitlePage} from '@app/titles/pages/title-page/title-page';\nimport {SeasonPage} from '@app/seasons/season-page';\nimport {EpisodePage} from '@app/episodes/episode-page';\nimport {useSettings} from '@common/core/settings/use-settings';\nimport {WatchPage} from '@app/videos/watch-page/watch-page';\nimport {TitleVideosPage} from '@app/titles/pages/title-videos-page';\nimport {TitleImagesPage} from '@app/titles/pages/title-images-page';\nimport {PersonPage} from '@app/people/person-page/person-page';\nimport {TitleFullCreditsPage} from '@app/titles/pages/title-full-credits-page';\nimport {EpisodeFullCreditsPage} from '@app/episodes/epispde-full-credits-page';\nimport {NewsArticlePage} from '@app/news/news-article-page';\nimport {UserListsIndexPage} from '@app/user-lists/pages/user-lists-index-page/user-lists-index-page';\nimport {EditUserListPage} from '@app/user-lists/pages/edit-user-list-page';\nimport {CreateUserListPage} from '@app/user-lists/pages/create-user-list-page';\nimport {SitePageLayout} from '@app/site-page-layout';\nimport {UserProfilePage} from '@app/profile/user-profile-page';\nimport {AuthRoute} from '@common/auth/guards/auth-route';\nimport {ProfileListsPanel} from '@app/profile/panels/profile-lists-panel';\nimport {ProfileRatingsPanel} from '@app/profile/panels/profile-ratings-panel';\nimport {ProfileReviewsPanel} from '@app/profile/panels/profile-reviews-panel';\nimport {ProfileCommentsPanel} from '@app/profile/panels/profile-comments-panel';\nimport {ProfileFollowersPanel} from '@app/profile/panels/profile-followers-panel';\nimport {ProfileFollowedUsersPanel} from '@app/profile/panels/profile-followed-users-panel';\nimport {SearchPage} from '@app/search/search-page';\nimport {NotFoundPage} from '@common/ui/not-found-page/not-found-page';\n\nconst RouteConfig: RouteObject[] = [\n  {\n    index: true,\n    element: <HomepageChannelPage />,\n  },\n  {\n    path: 'search/:query',\n    element: <SearchPage />,\n  },\n  // Watch\n  {\n    path: 'watch/:videoId',\n    element: <WatchPage />,\n  },\n  // Titles\n  {\n    path: '/titles/:titleId/:titleSlug',\n    element: <TitlePage />,\n  },\n  {\n    path: '/titles/:titleId/:titleSlug/videos',\n    element: <TitleVideosPage />,\n  },\n  {\n    path: '/titles/:titleId/:titleSlug/images',\n    element: <TitleImagesPage />,\n  },\n  {\n    path: '/titles/:titleId/:titleSlug/full-credits',\n    element: <TitleFullCreditsPage />,\n  },\n  {\n    path: '/titles/:titleId/:titleSlug/season/:season',\n    element: <SeasonPage />,\n  },\n  {\n    path: '/titles/:titleId/:titleSlug/season/:season/episode/:episode',\n    element: <EpisodePage />,\n  },\n  {\n    path: '/titles/:titleId/:titleSlug/season/:season/episode/:episode/full-credits',\n    element: <EpisodeFullCreditsPage />,\n  },\n  // People\n  {\n    path: '/people/:personId',\n    element: <PersonPage />,\n  },\n  {\n    path: '/people/:personId/:personSlug',\n    element: <PersonPage />,\n  },\n  // News\n  {\n    path: '/news/:articleId',\n    element: <NewsArticlePage />,\n  },\n  // Profile page\n  {\n    path: 'user/:userId/:slug',\n    element: <UserProfilePage />,\n    children: [\n      {\n        index: true,\n        element: <ProfileListsPanel />,\n      },\n      {\n        path: 'ratings',\n        element: <ProfileRatingsPanel />,\n      },\n      {\n        path: 'reviews',\n        element: <ProfileReviewsPanel />,\n      },\n      {\n        path: 'comments',\n        element: <ProfileCommentsPanel />,\n      },\n      {\n        path: 'followers',\n        element: <ProfileFollowersPanel />,\n      },\n      {\n        path: 'followed-users',\n        element: <ProfileFollowedUsersPanel />,\n      },\n    ],\n  },\n  {\n    path: 'user/:userId/:slug/:tab',\n    element: <UserProfilePage />,\n  },\n  // User Lists\n  {\n    path: '/lists',\n    element: (\n      <AuthRoute>\n        <UserListsIndexPage />\n      </AuthRoute>\n    ),\n  },\n  {\n    path: '/lists/new',\n    element: (\n      <AuthRoute>\n        <SitePageLayout>\n          <CreateUserListPage />\n        </SitePageLayout>\n      </AuthRoute>\n    ),\n  },\n  {\n    path: '/lists/:slugOrId',\n    element: <ChannelPage type=\"list\" />,\n  },\n  {\n    path: '/lists/:slugOrId/edit',\n    element: (\n      <SitePageLayout>\n        <EditUserListPage />\n      </SitePageLayout>\n    ),\n  },\n\n  // Channels\n  {\n    path: ':slugOrId',\n    element: <ChannelPage />,\n  },\n  {\n    path: 'channel/:slugOrId',\n    element: <ChannelPage />,\n  },\n  {\n    path: ':slugOrId/:restriction',\n    element: <ChannelPage />,\n  },\n  {\n    path: 'channel/:slugOrId/:restriction',\n    element: <ChannelPage />,\n  },\n  {\n    path: '*',\n    element: <NotFoundPage />,\n  },\n];\n\nfunction HomepageChannelPage() {\n  const {homepage} = useSettings();\n  let slugOrId = 'homepage';\n  if (homepage?.type === 'channel' && homepage.value) {\n    slugOrId = homepage.value;\n  }\n  return <ChannelPage slugOrId={slugOrId} />;\n}\n\nexport default function SiteRoutes() {\n  return useRoutes(RouteConfig);\n}\n"],"names":["channel","queryParams","config","sortMethods","method","searchParams","setSearchParams","selectedValue","label","_a","jsxs","newValue","prev","jsx","MenuItem","children","titleAppend","link","fontSize","fontWeight","margin","className","HeadingType","description","descriptionFontSize","actions","hideBorder","title","availableLayouts","m","selectedLayout","setSelectedLayout","layoutConfig","user","auth","useContext","network","name","image","url","left","top","opts","type","trans","setUrlCopied","list","linkProps","useMemo","content","absolute","showShareButton","showVisibility","Fragment","ShareButton","marginLeft","isNested","shouldShowFilterButton","encodedFilters","filters","filtersLoading","urlParam","variant","memo","person","date","today","birthDate","age","article","item","rating","queryKey","initialQueryKey","useRef","slugOrId","params","response","props","query","data","fn","wait","callFirst","timeout","debouncedFn","clear","flush","call","debounceWrapper","context","args","callNow","rotate","scrollContainerRef","itemWidth","perPage","canScrollBackward","setCanScrollBackward","useState","canScrollForward","setCanScrollForward","activePage","setActivePage","updateNavStatus","useCallback","el","pageWidth","useEffect","handleScroll","debounce","useLayoutEffect","firstGridItem","observer","entries","scrollToIndex","index","amount","scrollToPreviousPage","currentScroll","scrollLeft","scrollToNextPage","containerClassName","itemClassName","titles","itemCount","start","end","items","Content","nestedChannel","searchQuery","navigate","setQuery","isOpen","setIsOpen","isFetching","e","ComboBox","result","position","slot","settings","isSubscribed","adCode","ref","id","useId","parentEl","promises","pattern","match","images","count","heading","srcSize","isMobile","img","src","credits","credit","cast","titleId","seasons","season","creator","_b","director","_c","writer","_d","actor","genre","isLoading","EntityParser","named","entity","matches","char","input","EventedTokenizer","delegate","entityParser","mode","tag","maybeDoctype","nextSixChars","isPublic","isSystem","state","handler","endIndex","chars","Tokenizer","options","token","i","doctype","isQuoted","message","tokenizer","str","tokens","linkifiedTokens","linkified","tagName","preskipLen","linkifedChars","skippedTokens","stackCount","_ref","attributes","text","attr","val","attrs","attrStrs","value","linkifiedDescription","wrapperRef","contentRef","isOverflowing","setIsOverflowing","isShowingAll","setIsShowingAll","wrapperHeight","forwardRef","reviewable","currentReview","disabled","isExpanded","setIsExpanded","form","openReviewPanel","useImperativeHandle","createReview","newValues","newScore","review","payload","r","model","err","reportable","ReviewListItem","isShared","hideShareButton","avatar","scrolled","UserDisplayName","base_url","location","copyLink","authHandler","submitFeedback","isDisabled","helpfulCount","setHelpfulCount","total","setTotal","initialFeedback","currentFeedback","setCurrentFeedback","hasPermission","report","deleteReport","isReported","setIsReported","handleReport","deleteReview","isDeleteDialogOpen","setIsDeleteDialogOpen","showDeleteButton","handleDelete","isConfirmed","sharedClassName","parts","accountRequiredMessage","noResultsMessage","showAccountRequiredMessage","actionsRef","currentUserReview","sharedReview","reviews","sort","setSort","episode","videos","selectedSeason","setSelectedSeason","isInitialLoading","sortDescriptor","setSortDescriptor","orderBy","orderDir","runtime","episodes","number","onSeasonChange","seasonCount","seasonNumber","onValueChange","selectedOption","option","title_page","sections","right","poster","showPoster","streaming","watchItem","backdrop","listId","color","isWatchlisted","addToWatchlist","removeFromWatchlist","keyword","otherProps","getKeywordLink","country","video","size","defaultLabel","isStreamingMode","languageCode","language","lang","PageContent","EpisodeList","isActive","videoId","commentable","inReplyTo","other","onSuccess","autoFocus","createComment","inputRef","useObjectRef","inputIsExpanded","setInputIsExpanded","inputValue","setInputValue","clearInput","showUpvotesOnly","changeVote","upvotes","setUpvotes","downvotes","setDownvotes","currentVote","setCurrentVote","syncLocalState","CommentListItem","comment","canDelete","replyFormVisible","setReplyFormVisible","showReplyButton","seconds","deleteComments","reportComment","canDeleteAllComments","totalItems","comments","titleLink","videoName","episodeName","rate","activeVideo","darkThemeVars","shouldShowComments","total_credits_count","department","personId","isLast","loadMoreEpisodes","setLoadMoreEpisodes","allEpisodesLoaded","isLoadingMore","shouldShowLoadMoreBtn","episodeCredits","episodeCredit","knownFor","groupedCredits","authUser","canEdit","deleteList","close","userId","profile","buttonProps","currentUser","isFollowing","followUser","unfollowUser","mergedClassName","fields","append","remove","field","formId","updateProfile","values","Option","getUserProfileLink","profileLink","Children","child","alt","links","pathname","tabName","selectedTab","tab","listsQuery","ratingsQuery","reviewsQuery","totalVotes","commentsQuery","follower","followersQuery","followedUsersQuery","followedUser","searchTerm","movies","series","people","homepage"],"mappings":"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","x_google_ignoreList":[19,45]}